<repomix><file_summary>This file is a merged representation of the entire codebase, combined into a single document by Repomix.
The content has been processed where comments have been removed, empty lines have been removed, line numbers have been added, content has been formatted for parsing in xml style, content has been compressed (code blocks are separated by ‚ãÆ---- delimiter), security check has been disabled.<purpose>This file contains a packed representation of the entire repository&apos;s contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.</purpose><file_format>The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Repository files, each consisting of:
  - File path as an attribute
  - Full contents of the file</file_format><usage_guidelines>- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.</usage_guidelines><notes>- Some files may have been excluded based on .gitignore rules and Repomix&apos;s configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Code comments have been removed from supported file types
- Empty lines have been removed from all files
- Line numbers have been added to the beginning of each line
- Content has been formatted for parsing in xml style
- Content has been compressed - code blocks are separated by ‚ãÆ---- delimiter
- Security check has been disabled - content may contain sensitive information
- Files are sorted by Git change count (files with more changes are at the bottom)</notes></file_summary><directory_structure>be/
  .claude/
    commands/
      tm/
        add-dependency.md
        add-subtask.md
        add-task.md
        analyze-complexity.md
        analyze-project.md
        auto-implement-tasks.md
        command-pipeline.md
        complexity-report.md
        convert-task-to-subtask.md
        expand-all-tasks.md
        expand-task.md
        fix-dependencies.md
        help.md
        init-project-quick.md
        init-project.md
        install-taskmaster.md
        learn.md
        list-tasks-by-status.md
        list-tasks-with-subtasks.md
        list-tasks.md
        next-task.md
        parse-prd-with-research.md
        parse-prd.md
        project-status.md
        quick-install-taskmaster.md
        remove-all-subtasks.md
        remove-dependency.md
        remove-subtask.md
        remove-subtasks.md
        remove-task.md
        setup-models.md
        show-task.md
        smart-workflow.md
        sync-readme.md
        tm-main.md
        to-cancelled.md
        to-deferred.md
        to-done.md
        to-in-progress.md
        to-pending.md
        to-review.md
        update-single-task.md
        update-task.md
        update-tasks-from-id.md
        validate-dependencies.md
        view-models.md
  .cursor/
    commands/
      tm/
        add-dependency.md
        add-subtask.md
        add-task.md
        analyze-complexity.md
        analyze-project.md
        auto-implement-tasks.md
        command-pipeline.md
        complexity-report.md
        convert-task-to-subtask.md
        expand-all-tasks.md
        expand-task.md
        fix-dependencies.md
        help.md
        init-project-quick.md
        init-project.md
        install-taskmaster.md
        learn.md
        list-tasks-by-status.md
        list-tasks-with-subtasks.md
        list-tasks.md
        next-task.md
        parse-prd-with-research.md
        parse-prd.md
        project-status.md
        quick-install-taskmaster.md
        remove-all-subtasks.md
        remove-dependency.md
        remove-subtask.md
        remove-subtasks.md
        remove-task.md
        setup-models.md
        show-task.md
        smart-workflow.md
        sync-readme.md
        tm-main.md
        to-cancelled.md
        to-deferred.md
        to-done.md
        to-in-progress.md
        to-pending.md
        to-review.md
        update-single-task.md
        update-task.md
        update-tasks-from-id.md
        validate-dependencies.md
        view-models.md
    rules/
      taskmaster/
        dev_workflow.mdc
        taskmaster.mdc
      cursor_rules.mdc
      self_improve.mdc
      ultracite.mdc
  .gemini/
    commands/
      tm/
        add-dependency.toml
        add-subtask.toml
        add-task.toml
        analyze-complexity.toml
        analyze-project.toml
        auto-implement-tasks.toml
        command-pipeline.toml
        complexity-report.toml
        convert-task-to-subtask.toml
        expand-all-tasks.toml
        expand-task.toml
        fix-dependencies.toml
        help.toml
        init-project-quick.toml
        init-project.toml
        install-taskmaster.toml
        learn.toml
        list-tasks-by-status.toml
        list-tasks-with-subtasks.toml
        list-tasks.toml
        next-task.toml
        parse-prd-with-research.toml
        parse-prd.toml
        project-status.toml
        quick-install-taskmaster.toml
        remove-all-subtasks.toml
        remove-dependency.toml
        remove-subtask.toml
        remove-subtasks.toml
        remove-task.toml
        setup-models.toml
        show-task.toml
        smart-workflow.toml
        sync-readme.toml
        tm-main.toml
        to-cancelled.toml
        to-deferred.toml
        to-done.toml
        to-in-progress.toml
        to-pending.toml
        to-review.toml
        update-single-task.toml
        update-task.toml
        update-tasks-from-id.toml
        validate-dependencies.toml
        view-models.toml
  .github/
    workflows/
      align-code-style.yaml
      delete-all-workflows-history.yaml
      run-tests-on-push.yaml
      weekly-npm-updates.yaml
    copilot-instructions.md
  .taskmaster/
    templates/
      example_prd_rpg.txt
      example_prd.txt
    CLAUDE.md
  ai-agents/
    sessions/
      index.ts
      session-factory.ts
    agent-handoff-descriptions.ts
    agents-instructions.ts
    AGENTS.md
    agents.ts
    direct-utilities.ts
    guardrails.ts
    index.ts
    insights-generator.ts
    tool-descriptions.ts
    tool-execution.ts
    tool-registry.ts
    tool-schemas.ts
    utils.ts
  config/
    clients/
      google-oauth.ts
      index.ts
      lemonsqueezy.ts
      openai.ts
      redis.ts
      supabase.ts
    constants/
      ai.ts
      google.ts
      http.ts
      index.ts
      sql.ts
      timezone.ts
    env.ts
    index.ts
  controllers/
    google-calendar/
      acl-controller.ts
      calendar-controller.ts
      calendar-list-controller.ts
      channels-controller.ts
      events-controller.ts
    users/
      auth-controller.ts
      google-integration-controller.ts
      index.ts
      profile-controller.ts
    admin-controller.ts
    agent-profiles-controller.ts
    chat-controller.ts
    chat-stream-controller.ts
    contact-controller.ts
    cron-controller.ts
    payment-controller.ts
    risc-controller.ts
    user-preferences-controller.ts
    voice-controller.ts
    whatsapp-controller.ts
  middlewares/
    admin-auth.ts
    admin-validation.ts
    auth-handler.ts
    calendar-client.ts
    error-handler.ts
    google-token-refresh.ts
    google-token-validation.ts
    rate-limiter.ts
    security-audit.ts
    supabase-auth.ts
    validation.ts
  migrations/
    20260108_lemonsqueezy_migration.sql
    20260109_admin_rbac.sql
    20260109_set_admin_user.sql
  mocks/
    google-calendar.ts
    openai-agents.ts
    supabase.ts
  postman/
    AI-Google-Calendar-Assistant.postman_collection.json
    AI-Google-Calendar-Assistant.postman_environment.json
  public/
    logo.jpeg
  routes/
    google-calendar/
      acl-route.ts
      calendar-list-route.ts
      calendar-route.ts
      channels-route.ts
      chat-route.ts
      events-route.ts
    admin-route.ts
    contact-route.ts
    cron-route.ts
    payment-route.ts
    risc-route.ts
    slack-route.ts
    telegram-route.ts
    users-route.ts
    voice-route.ts
    webhooks-route.ts
    whatsapp-route.ts
  services/
    admin-service.ts
    lemonsqueezy-service.ts
    user-preferences-service.ts
  shared/
    adapters/
      index.ts
      openai-adapter.ts
    context/
      entity-tracker.ts
      index.ts
      unified-context-store.ts
    llm/
      providers/
        anthropic-provider.ts
        google-provider.ts
        openai-provider.ts
      index.ts
      provider-factory.ts
      types.ts
    orchestrator/
      agent-profiles.ts
      index.ts
      model-registry.ts
      orchestrator-factory.ts
      text-agent-factory.ts
    projections/
      calendar-projections.ts
      event-projections.ts
      index.ts
    prompts/
      base-prompts.ts
      index.ts
    tools/
      handlers/
        direct-handlers.ts
        event-handlers.ts
        gap-handlers.ts
        index.ts
      schemas/
        calendar-schemas.ts
        event-schemas.ts
        gap-schemas.ts
        index.ts
        reminder-schemas.ts
      tool-executor.ts
    types/
      index.ts
    index.ts
  slack-bot/
    handlers/
      agent-handler.ts
      commands.ts
      message-handler.ts
    middleware/
      auth-handler.ts
      rate-limiter.ts
    services/
      oauth-service.ts
    utils/
      conversation-history.ts
      response-builder.ts
      session.ts
      summarize.ts
      user-resolver.ts
    index.ts
    init-bot.ts
  supabase/
    migrations/
      20260109000000_admin_rbac.sql
      20260110100000_simplify_schema.sql
      20260112180000_add_slack_users.sql
      20260113000000_add_slack_workspaces.sql
      20260113020000_add_slack_webhooks.sql
    .gitignore
    config.toml
  telegram-bot/
    handlers/
      agent-handler.ts
      bot-config.ts
      callback-handlers.ts
      message-handler.ts
    i18n/
      locales/
        ar.ts
        de.ts
        en.ts
        fr.ts
        he.ts
        ru.ts
      config.ts
      index.ts
      translator.ts
      types.ts
    middleware/
      auth-tg-handler.ts
      google-token-tg-handler.ts
      rate-limiter.ts
      session-expiry.ts
    response-system/
      adapters/
        index.ts
        telegram-adapter.ts
      core/
        config.ts
        html-escaper.ts
        index.ts
        response-builder.ts
        rtl-handler.ts
        types.ts
      templates/
        calendar.ts
        index.ts
        notifications.ts
      index.ts
    utils/
      agent-profile.ts
      ally-brain.ts
      commands.ts
      constants.ts
      conversation-history.ts
      email-change.ts
      embeddings.ts
      image-handler.ts
      index.ts
      prompts.ts
      session.ts
      summarize.ts
      typing-indicator.ts
      user-knowledge.ts
    AGENTS.md
    init-bot.ts
  tests/
    ai-agents/
      agent-utils.test.ts
      tool-execution.test.ts
    controllers/
      google-calendar/
        events-controller.test.ts
      users/
        auth-controller.test.ts
      chat-controller.test.ts
      payment-controller.test.ts
    infrastructure/
      google-calendar-mock.test.ts
      openai-agents-mock.test.ts
    middlewares/
      admin-auth.test.ts
      auth-handler.test.ts
      error-handler.test.ts
      supabase-auth.test.ts
    services/
      admin-service.test.ts
      lemonsqueezy-service.test.ts
    utils/
      auth/
        google-token.test.ts
      async-handlers.test.ts
      error-template.test.ts
      format-date.test.ts
      get-event-duration-string.test.ts
      send-response.test.ts
    README.md
    setup.ts
    test-utils.ts
  utils/
    ai/
      activate-agent.ts
      index.ts
      insights-calculator.ts
      quick-add-orchestrator.ts
      text-to-speech.ts
      voice-transcription.ts
    auth/
      cookie-utils.ts
      get-user-calendar-tokens.ts
      google-token.ts
      index.ts
      ownership-validation.ts
      require-user.ts
      risc-event-handlers.ts
      risc-jwt-verifier.ts
      risc-types.ts
      supabase-token.ts
      third-party-signin.ts
      update-tokens-of-user.ts
    cache/
      gap-recovery-cache.ts
      insights-cache.ts
    calendar/
      check-conflicts.ts
      delete-event.ts
      duration.ts
      ensure-calendars-synced.ts
      events.ts
      gap-recovery.ts
      get-events.ts
      index.ts
      init.ts
      insert-event.ts
      patch-event.ts
      reminders.ts
      reschedule.ts
      sync-calendars-after-oauth.ts
      travel-patterns-i18n.ts
      update-categories.ts
      update-event.ts
    conversation/
      ConversationService.ts
      TelegramConversationAdapter.ts
      types.ts
      WebConversationAdapter.ts
    date/
      date-helpers.ts
      format-date.ts
      index.ts
      timestamp-utils.ts
    db/
      index.ts
      subscription-status.ts
    http/
      async-handlers.ts
      error-template.ts
      index.ts
      pagination.ts
    repositories/
      UserRepository.ts
    security/
      index.ts
      llm-output-validation.ts
      pii-masking.ts
      ssrf-protection.ts
    audit-logger.ts
    compression.ts
    index.ts
    logger.ts
    send-response.ts
    sse.ts
    web-conversation-history.ts
    web-embeddings.ts
  whatsapp-bot/
    handlers/
      message-handler.ts
    services/
      media.ts
      send-message.ts
      webhook-security.ts
    types/
      index.ts
    utils/
      agent-profile.ts
      ally-brain.ts
      conversation-history.ts
      embeddings.ts
      format-response.ts
      index.ts
      prompts.ts
    init-whatsapp.ts
  .biomeignore
  .dockerignore
  .env.example
  .gitignore
  .rules
  app-runner.yaml
  app.ts
  apprunner.yaml
  biome.jsonc
  database.types.ts
  Dockerfile
  dump.rdb
  expressd.d.ts
  livekit.toml
  package.json
  README.md
  SECURITY.md
  tsconfig.json
  types.ts
  Untitled-2025-08-03-0213.excalidraw.svg
fe/
  .claude/
    commands/
      tm/
        add-dependency.md
        add-subtask.md
        add-task.md
        analyze-complexity.md
        analyze-project.md
        auto-implement-tasks.md
        command-pipeline.md
        complexity-report.md
        convert-task-to-subtask.md
        expand-all-tasks.md
        expand-task.md
        fix-dependencies.md
        help.md
        init-project-quick.md
        init-project.md
        install-taskmaster.md
        learn.md
        list-tasks-by-status.md
        list-tasks-with-subtasks.md
        list-tasks.md
        next-task.md
        parse-prd-with-research.md
        parse-prd.md
        project-status.md
        quick-install-taskmaster.md
        remove-all-subtasks.md
        remove-dependency.md
        remove-subtask.md
        remove-subtasks.md
        remove-task.md
        setup-models.md
        show-task.md
        smart-workflow.md
        sync-readme.md
        tm-main.md
        to-cancelled.md
        to-deferred.md
        to-done.md
        to-in-progress.md
        to-pending.md
        to-review.md
        update-single-task.md
        update-task.md
        update-tasks-from-id.md
        validate-dependencies.md
        view-models.md
  .cursor/
    commands/
      tm/
        add-dependency.md
        add-subtask.md
        add-task.md
        analyze-complexity.md
        analyze-project.md
        auto-implement-tasks.md
        command-pipeline.md
        complexity-report.md
        convert-task-to-subtask.md
        expand-all-tasks.md
        expand-task.md
        fix-dependencies.md
        help.md
        init-project-quick.md
        init-project.md
        install-taskmaster.md
        learn.md
        list-tasks-by-status.md
        list-tasks-with-subtasks.md
        list-tasks.md
        next-task.md
        parse-prd-with-research.md
        parse-prd.md
        project-status.md
        quick-install-taskmaster.md
        remove-all-subtasks.md
        remove-dependency.md
        remove-subtask.md
        remove-subtasks.md
        remove-task.md
        setup-models.md
        show-task.md
        smart-workflow.md
        sync-readme.md
        tm-main.md
        to-cancelled.md
        to-deferred.md
        to-done.md
        to-in-progress.md
        to-pending.md
        to-review.md
        update-single-task.md
        update-task.md
        update-tasks-from-id.md
        validate-dependencies.md
        view-models.md
    rules/
      taskmaster/
        dev_workflow.mdc
        taskmaster.mdc
      cursor_rules.mdc
      self_improve.mdc
    mcp.json
  .gemini/
    commands/
      tm/
        add-dependency.toml
        add-subtask.toml
        add-task.toml
        analyze-complexity.toml
        analyze-project.toml
        auto-implement-tasks.toml
        command-pipeline.toml
        complexity-report.toml
        convert-task-to-subtask.toml
        expand-all-tasks.toml
        expand-task.toml
        fix-dependencies.toml
        help.toml
        init-project-quick.toml
        init-project.toml
        install-taskmaster.toml
        learn.toml
        list-tasks-by-status.toml
        list-tasks-with-subtasks.toml
        list-tasks.toml
        next-task.toml
        parse-prd-with-research.toml
        parse-prd.toml
        project-status.toml
        quick-install-taskmaster.toml
        remove-all-subtasks.toml
        remove-dependency.toml
        remove-subtask.toml
        remove-subtasks.toml
        remove-task.toml
        setup-models.toml
        show-task.toml
        smart-workflow.toml
        sync-readme.toml
        tm-main.toml
        to-cancelled.toml
        to-deferred.toml
        to-done.toml
        to-in-progress.toml
        to-pending.toml
        to-review.toml
        update-single-task.toml
        update-task.toml
        update-tasks-from-id.toml
        validate-dependencies.toml
        view-models.toml
    settings.json
  .taskmaster/
    templates/
      example_prd_rpg.txt
      example_prd.txt
    CLAUDE.md
    config.json
    state.json
  app/
    about/
      page.tsx
    admin/
      audit-logs/
        page.tsx
      payments/
        page.tsx
      subscriptions/
        page.tsx
      users/
        page.tsx
      layout.tsx
      page.tsx
    api/
      chat/
        route.ts
      tts/
        route.ts
    auth/
      callback/
        page.tsx
    callback/
      page.tsx
    contact/
      page.tsx
    dashboard/
      analytics/
        page.tsx
      billing/
        page.tsx
      integrations/
        page.tsx
      layout.tsx
      page.tsx
    integrations/
      slack/
        page.tsx
    loading/
      page.tsx
    login/
      page.tsx
    pricing/
      page.tsx
    privacy/
      page.tsx
    register/
      page.tsx
    terms/
      page.tsx
    waitinglist/
      page.tsx
    error.tsx
    global-error.tsx
    layout.tsx
    page.tsx
    providers.tsx
  components/
    3d/
      ally-character.tsx
      ally-chat-avatar.tsx
      index.ts
      three-dwall-calendar.tsx
      wireframe-dotted-globe.tsx
    admin/
      AdminSidebar.tsx
      GrantCreditsDialog.tsx
      UserDetailsDialog.tsx
    auth/
      ImageCarousel.tsx
      LoginPage.tsx
      OTPVerificationPage.tsx
      PhoneRegistrationPage.tsx
      RegisterPage.tsx
    contact/
      ContactForm.tsx
    dashboard/
      analytics/
        daily-hours-charts/
          DailyHoursAreaChart.tsx
          DailyHoursBarChart.tsx
          DailyHoursLineChart.tsx
          DailyHoursStackedChart.tsx
          index.ts
        event-duration-charts/
          EventDurationBarChart.tsx
          EventDurationPieChart.tsx
          EventDurationProgressChart.tsx
        monthly-pattern-charts/
          MonthlyPatternAreaChart.tsx
          MonthlyPatternBarChart.tsx
          MonthlyPatternLineChart.tsx
        time-allocation-charts/
          index.ts
          TimeAllocationBarChart.tsx
          TimeAllocationDonutChart.tsx
          TimeAllocationHorizontalBarChart.tsx
          TimeAllocationPieChart.tsx
          TimeAllocationRadarChart.tsx
        weekly-pattern-charts/
          WeeklyPatternAreaChart.tsx
          WeeklyPatternBarChart.tsx
          WeeklyPatternLineChart.tsx
        AnalyticsDashboard.tsx
        AnalyticsDashboardSkeleton.tsx
        BentoStatsGrid.tsx
        CalendarFilterSelect.tsx
        ChartTypeWrapper.tsx
        DailyAvailableHoursChart.tsx
        DailyAvailableHoursDashboard.tsx
        EventDurationDashboard.tsx
        FocusTimeTracker.tsx
        InsightCard.tsx
        InsightCardSkeleton.tsx
        ManageCalendars.tsx
        MonthlyPatternChart.tsx
        MonthlyPatternDashboard.tsx
        RecentEvents.tsx
        ScheduleHealthScore.tsx
        TimeAllocationChart.tsx
        TimeAllocationDashboard.tsx
        TimeDistributionChart.tsx
        TimeSavedChart.tsx
        TimeSavedColumnChart.tsx
        UpcomingWeekPreview.tsx
        WeeklyPatternDashboard.tsx
      billing/
        PaymentMethodCard.tsx
        TransactionHistoryTable.tsx
      chat/
        AgentProfileSelector.tsx
        AssistantAvatar.tsx
        AvatarView.tsx
        ChatInput.tsx
        ChatInterface.tsx
        ChatTabSkeleton.tsx
        ChatView.tsx
        ComingSoonPlaceholder.tsx
        MessageActions.tsx
        MessageBubble.tsx
        StreamingMessage.tsx
        ThreeDView.tsx
        TwoDTabSkeleton.tsx
        ViewSwitcher.tsx
      shared/
        settings-tabs/
          components/
            index.ts
            SettingsDropdown.tsx
            SettingsRow.tsx
            SettingsSection.tsx
            TimePicker.tsx
            TimezoneSelector.tsx
          AssistantTab.tsx
          DataControlsTab.tsx
          GeneralTab.tsx
          index.ts
          IntegrationsTab.tsx
          NotificationsTab.tsx
          SecurityTab.tsx
          SubscriptionTab.tsx
        sidebar-components/
          ConversationList.tsx
          DeleteConfirmDialog.tsx
          index.ts
          SidebarFooter.tsx
          SidebarHeader.tsx
          SidebarNav.tsx
          StreamingTitle.tsx
        AIAllySidebar.tsx
        ConfirmDialog.tsx
        OnboardingTour.tsx
        SettingsModal.tsx
        Sidebar.tsx
        UserProfileCard.tsx
      IntegrationsDashboard.tsx
      RescheduleDialog.tsx
    dialogs/
      quick-event/
        DialogStateViews.tsx
        EventPreview.tsx
        index.ts
      CalendarEventsDialog.tsx
      CalendarSettingsDialog.tsx
      CreateCalendarDialog.tsx
      DayEventsDialog.tsx
      EventDetailsDialog.tsx
      EventsListDialog.tsx
      QuickEventDialog.tsx
    marketing/
      BentoGridSection.tsx
      FAQs.tsx
      FeatureCarousel.tsx
      FeatureShowcase.tsx
      Footer.tsx
      MarketingLayout.tsx
      Navbar.tsx
      Testimonials.tsx
      UseCaseGrid.tsx
    shared/
      BackgroundPattern1.tsx
      ErrorBoundary.tsx
      Icons.tsx
      LanguageDropdown.tsx
      logo.tsx
      PatternPlaceholder.tsx
      ThemeProvider.tsx
    ui/
      accordion.tsx
      ai-voice-input.tsx
      alert-dialog.tsx
      animated-cursor.tsx
      animated-feature-spotlight3d.tsx
      animated-hamburger.tsx
      animated-testimonials.tsx
      animated-text-cycle.tsx
      avatar.tsx
      badge.tsx
      bento-grid.tsx
      button.tsx
      calendar.tsx
      card.tsx
      chart.tsx
      cinematic-glow-toggle.tsx
      date-range-picker.tsx
      demo.tsx
      dialog.tsx
      dropdown-menu.tsx
      hand-writing-text-demo.tsx
      hand-writing-text.tsx
      hover-card.tsx
      input.tsx
      interactive-hover-button.tsx
      iphone-mockup.tsx
      label.tsx
      livekit-voice-button.tsx
      loading-spinner.tsx
      popover.tsx
      pricing-card.tsx
      pricing-section-demo.tsx
      pricing-section.tsx
      pricing-tab.tsx
      radial-orbital-timeline.tsx
      separator.tsx
      skeleton.tsx
      sparkles.tsx
      table.tsx
      tabs.tsx
      testimonials-column.tsx
      textarea.tsx
      theme-toggle.tsx
      timeline.tsx
      tooltip.tsx
      typewriter.tsx
      voice-powered-orb.tsx
    waiting-list/
      WaitingList.tsx
    AvatarTooltipGroup.tsx
    ProductivityGauge.tsx
    TaskBreakdownChart.tsx
    UseCaseSimulator.tsx
    Waveform.tsx
  contexts/
    AnalyticsContext.tsx
    AuthContext.tsx
    ChatContext.tsx
    DashboardUIContext.tsx
    GapRecoveryContext.tsx
    LanguageContext.tsx
    SidebarContext.tsx
  coverage/
    .lcov.info.0b72bd2634c65b27.tmp
    .lcov.info.3d1a0965f091892f.tmp
    .lcov.info.6d75b8dae9b8a72a.tmp
    .lcov.info.a3bd81d83991e9ab.tmp
    .lcov.info.cb4b8924cabc5d50.tmp
    .lcov.info.d8a701fbb22bfc53.tmp
    .lcov.info.dfab37873e75a6b1.tmp
    .lcov.info.fc76ad9af8353d8f.tmp
    lcov.info
  hooks/
    queries/
      admin/
        index.ts
        useAdminAuditLogs.ts
        useAdminCharts.ts
        useAdminPayments.ts
        useAdminSubscriptions.ts
        useAdminUsers.ts
        useDashboardStats.ts
      agent-profiles/
        index.ts
      analytics/
        index.ts
        useAIInsights.ts
        useAnalyticsComparison.ts
        useAnalyticsData.ts
        useUpcomingWeekData.ts
      auth/
        index.ts
        useDeactivateUser.ts
        useSignIn.ts
        useSignUp.ts
        useUser.ts
        useVerifyOTP.ts
      billing/
        index.ts
        useBilling.ts
      calendars/
        index.ts
        useCalendarById.ts
        useCalendarColors.ts
        useCalendars.ts
        useCalendarSettings.ts
        useCalendarTimezones.ts
        useCreateCalendar.ts
        useFreeBusy.ts
      conversations/
        index.ts
        useConversation.ts
        useConversations.ts
        useDeleteAllConversations.ts
        useDeleteConversationById.ts
        useGetConversationById.ts
        useGetConversations.ts
        useRefreshConversation.ts
        useResetMemory.ts
        useUpdateConversationById.ts
      events/
        index.ts
        useCreateEvent.ts
        useDeleteEvent.ts
        useEventAnalytics.ts
        useEventById.ts
        useEvents.ts
        useMoveEvent.ts
        useQuickAddEvent.ts
        useReschedule.ts
        useUpdateEvent.ts
        useWatchEvents.ts
      gaps/
        index.ts
        useGapMutations.ts
        useGaps.ts
      integrations/
        index.ts
        useDisconnectGoogleCalendar.ts
        useGoogleCalendarStatus.ts
        useSlackStatus.ts
      preferences/
        index.ts
      AGENTS.md
      index.ts
      useMutationWrapper.ts
      useQueryWrapper.ts
    useAgentProfiles.ts
    useContainerDimensions.ts
    useLiveKitVoice.ts
    useSpeechRecognition.ts
    useStreamingChat.ts
  lib/
    api/
      client.ts
      endpoints.ts
    i18n/
      locales/
        ar.ts
        de.ts
        en.ts
        fr.ts
        he.ts
        ru.ts
      config.ts
      index.ts
    query/
      config.ts
      index.ts
      keys.ts
      types.ts
    security/
      sanitize.ts
    validations/
      preferences.ts
    colorUtils.ts
    constants.ts
    dataUtils.ts
    dateUtils.ts
    geolocation.ts
    iconUtils.ts
    user-utils.ts
    utils.ts
  public/
    ai-look.png
    ally-3d-create.py
    ally-3d.blend
    ally-3d.glb
    ally-animations-setup.py
    image copy 2.png
    image copy 3.png
    image copy.png
    image.png
    logo.png
  services/
    admin.service.ts
    agent-profiles.service.ts
    auth.service.ts
    calendars.service.ts
    chatService.ts
    chatStreamService.ts
    events.service.ts
    gaps.service.ts
    geminiService.ts
    integrations.service.ts
    payment.service.ts
    preferences.service.ts
    tts-cache.service.ts
    voice.service.ts
  styles/
    globals.css
  tests/
    components/
      shared/
        ErrorBoundary.test.tsx
    hooks/
      queries/
        conversations/
          useConversations.test.ts
    lib/
      api/
        services/
          auth.service.test.ts
        client.test.ts
      dateUtils.test.ts
      utils.test.ts
    mocks/
      axios.ts
      react-query.ts
    setup.ts
    test-utils.tsx
  types/
    admin.ts
    analytics.ts
    api.ts
    billing.ts
    stream.ts
  .dockerignore
  .gitignore
  .mcp.json
  .prettierignore
  .prettierrc
  app-runner.yaml
  bunfig.toml
  components.json
  database.types.ts
  Dockerfile
  env.example
  eslint.config.mjs
  metadata.json
  next-env.d.ts
  next.config.mjs
  package.json
  postcss.config.js
  README.md
  tailwind.config.ts
  tsconfig.json
  types.ts
infra/
  cloudfront/
    CLOUDFRONT_SETUP.md
    cloudfront-frontend.yaml
  INFRASTRUCTURE.md
AGENTS.md
CHANGELOG.md
README.md</directory_structure><files>This section contains the contents of the repository&apos;s files.<file path="be/.claude/commands/tm/add-dependency.md">Add Dependency

Arguments: $ARGUMENTS
Add a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to establish dependency relationship.

## Adding Dependencies

Creates a dependency where one task must be completed before another can start.

## Argument Parsing

Parse natural language or IDs:
- &quot;make 5 depend on 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 needs 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 after 3&quot; ‚Üí task 5 depends on task 3

## Execution

```bash
task-master add-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Validation

Before adding:
1. **Verify both tasks exist**
2. **Check for circular dependencies**
3. **Ensure dependency makes logical sense**
4. **Warn if creating complex chains**

## Smart Features

- Detect if dependency already exists
- Suggest related dependencies
- Show impact on task flow
- Update task priorities if needed

## Post-Addition

After adding dependency:
1. Show updated dependency graph
2. Identify any newly blocked tasks
3. Suggest task order changes
4. Update project timeline

## Example Flows

```
/taskmaster:add-dependency 5 needs 3
‚Üí Task #5 now depends on Task #3
‚Üí Task #5 is now blocked until #3 completes
‚Üí Suggested: Also consider if #5 needs #4
```</file><file path="be/.claude/commands/tm/add-subtask.md">Add Subtask

Arguments: $ARGUMENTS
Add a subtask to a parent task.

Arguments: $ARGUMENTS

Parse arguments to create a new subtask or convert existing task.

## Adding Subtasks

Creates subtasks to break down complex parent tasks into manageable pieces.

## Argument Parsing

Flexible natural language:
- &quot;add subtask to 5: implement login form&quot;
- &quot;break down 5 with: setup, implement, test&quot;
- &quot;subtask for 5: handle edge cases&quot;
- &quot;5: validate user input&quot; ‚Üí adds subtask to task 5

## Execution Modes

### 1. Create New Subtask
```bash
task-master add-subtask --parent=&lt;id&gt; --title=&quot;&lt;title&gt;&quot; --description=&quot;&lt;desc&gt;&quot;
```

### 2. Convert Existing Task
```bash
task-master add-subtask --parent=&lt;id&gt; --task-id=&lt;existing-id&gt;
```

## Smart Features

1. **Automatic Subtask Generation**
   - If title contains &quot;and&quot; or commas, create multiple
   - Suggest common subtask patterns
   - Inherit parent&apos;s context

2. **Intelligent Defaults**
   - Priority based on parent
   - Appropriate time estimates
   - Logical dependencies between subtasks

3. **Validation**
   - Check parent task complexity
   - Warn if too many subtasks
   - Ensure subtask makes sense

## Creation Process

1. Parse parent task context
2. Generate subtask with ID like &quot;5.1&quot;
3. Set appropriate defaults
4. Link to parent task
5. Update parent&apos;s time estimate

## Example Flows

```
/taskmaster:add-subtask to 5: implement user authentication
‚Üí Created subtask #5.1: &quot;implement user authentication&quot;
‚Üí Parent task #5 now has 1 subtask
‚Üí Suggested next subtasks: tests, documentation

/taskmaster:add-subtask 5: setup, implement, test
‚Üí Created 3 subtasks:
  #5.1: setup
  #5.2: implement
  #5.3: test
```

## Post-Creation

- Show updated task hierarchy
- Suggest logical next subtasks
- Update complexity estimates
- Recommend subtask order</file><file path="be/.claude/commands/tm/add-task.md">Add Task

Arguments: $ARGUMENTS
Add new tasks with intelligent parsing and context awareness.

Arguments: $ARGUMENTS

## Smart Task Addition

Parse natural language to create well-structured tasks.

### 1. **Input Understanding**

I&apos;ll intelligently parse your request:
- Natural language ‚Üí Structured task
- Detect priority from keywords (urgent, ASAP, important)
- Infer dependencies from context
- Suggest complexity based on description
- Determine task type (feature, bug, refactor, test, docs)

### 2. **Smart Parsing Examples**

**&quot;Add urgent task to fix login bug&quot;**
‚Üí Title: Fix login bug
‚Üí Priority: high
‚Üí Type: bug
‚Üí Suggested complexity: medium

**&quot;Create task for API documentation after task 23 is done&quot;**
‚Üí Title: API documentation
‚Üí Dependencies: [23]
‚Üí Type: documentation
‚Üí Priority: medium

**&quot;Need to refactor auth module - depends on 12 and 15, high complexity&quot;**
‚Üí Title: Refactor auth module
‚Üí Dependencies: [12, 15]
‚Üí Complexity: high
‚Üí Type: refactor

### 3. **Context Enhancement**

Based on current project state:
- Suggest related existing tasks
- Warn about potential conflicts
- Recommend dependencies
- Propose subtasks if complex

### 4. **Interactive Refinement**

```yaml
Task Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Title: [Extracted title]
Priority: [Inferred priority]
Dependencies: [Detected dependencies]
Complexity: [Estimated complexity]

Suggestions:
- Similar task #34 exists, consider as dependency?
- This seems complex, break into subtasks?
- Tasks #45-47 work on same module
```

### 5. **Validation &amp; Creation**

Before creating:
- Validate dependencies exist
- Check for duplicates
- Ensure logical ordering
- Verify task completeness

### 6. **Smart Defaults**

Intelligent defaults based on:
- Task type patterns
- Team conventions
- Historical data
- Current sprint/phase

Result: High-quality tasks from minimal input.</file><file path="be/.claude/commands/tm/analyze-complexity.md">Analyze Complexity

Arguments: $ARGUMENTS
Analyze task complexity and generate expansion recommendations.

Arguments: $ARGUMENTS

Perform deep analysis of task complexity across the project.

## Complexity Analysis

Uses AI to analyze tasks and recommend which ones need breakdown.

## Execution Options

```bash
task-master analyze-complexity [--research] [--threshold=5]
```

## Analysis Parameters

- `--research` ‚Üí Use research AI for deeper analysis
- `--threshold=5` ‚Üí Only flag tasks above complexity 5
- Default: Analyze all pending tasks

## Analysis Process

### 1. **Task Evaluation**
For each task, AI evaluates:
- Technical complexity
- Time requirements
- Dependency complexity
- Risk factors
- Knowledge requirements

### 2. **Complexity Scoring**
Assigns score 1-10 based on:
- Implementation difficulty
- Integration challenges
- Testing requirements
- Unknown factors
- Technical debt risk

### 3. **Recommendations**
For complex tasks:
- Suggest expansion approach
- Recommend subtask breakdown
- Identify risk areas
- Propose mitigation strategies

## Smart Analysis Features

1. **Pattern Recognition**
   - Similar task comparisons
   - Historical complexity accuracy
   - Team velocity consideration
   - Technology stack factors

2. **Contextual Factors**
   - Team expertise
   - Available resources
   - Timeline constraints
   - Business criticality

3. **Risk Assessment**
   - Technical risks
   - Timeline risks
   - Dependency risks
   - Knowledge gaps

## Output Format

```
Task Complexity Analysis Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

High Complexity Tasks (&gt;7):
üìç #5 &quot;Implement real-time sync&quot; - Score: 9/10
   Factors: WebSocket complexity, state management, conflict resolution
   Recommendation: Expand into 5-7 subtasks
   Risks: Performance, data consistency

üìç #12 &quot;Migrate database schema&quot; - Score: 8/10
   Factors: Data migration, zero downtime, rollback strategy
   Recommendation: Expand into 4-5 subtasks
   Risks: Data loss, downtime

Medium Complexity Tasks (5-7):
üìç #23 &quot;Add export functionality&quot; - Score: 6/10
   Consider expansion if timeline tight

Low Complexity Tasks (&lt;5):
‚úÖ 15 tasks - No expansion needed

Summary:
- Expand immediately: 2 tasks
- Consider expanding: 5 tasks
- Keep as-is: 15 tasks
```

## Actionable Output

For each high-complexity task:
1. Complexity score with reasoning
2. Specific expansion suggestions
3. Risk mitigation approaches
4. Recommended subtask structure

## Integration

Results are:
- Saved to `.taskmaster/reports/complexity-analysis.md`
- Used by expand command
- Inform sprint planning
- Guide resource allocation

## Next Steps

After analysis:
```
/taskmaster:expand 5    # Expand specific task
/taskmaster:expand-all  # Expand all recommended
/taskmaster:complexity-report  # View detailed report
```</file><file path="be/.claude/commands/tm/analyze-project.md">Analyze Project

Arguments: $ARGUMENTS
Advanced project analysis with actionable insights and recommendations.

Arguments: $ARGUMENTS

## Comprehensive Project Analysis

Multi-dimensional analysis based on requested focus area.

### 1. **Analysis Modes**

Based on $ARGUMENTS:
- &quot;velocity&quot; ‚Üí Sprint velocity and trends
- &quot;quality&quot; ‚Üí Code quality metrics
- &quot;risk&quot; ‚Üí Risk assessment and mitigation
- &quot;dependencies&quot; ‚Üí Dependency graph analysis
- &quot;team&quot; ‚Üí Workload and skill distribution
- &quot;architecture&quot; ‚Üí System design coherence
- Default ‚Üí Full spectrum analysis

### 2. **Velocity Analytics**

```
üìä Velocity Analysis
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Current Sprint: 24 points/week ‚ÜóÔ∏è +20%
Rolling Average: 20 points/week
Efficiency: 85% (17/20 tasks on time)

Bottlenecks Detected:
- Code review delays (avg 4h wait)
- Test environment availability
- Dependency on external team

Recommendations:
1. Implement parallel review process
2. Add staging environment
3. Mock external dependencies
```

### 3. **Risk Assessment**

**Technical Risks**
- High complexity tasks without backup assignee
- Single points of failure in architecture
- Insufficient test coverage in critical paths
- Technical debt accumulation rate

**Project Risks**
- Critical path dependencies
- Resource availability gaps
- Deadline feasibility analysis
- Scope creep indicators

### 4. **Dependency Intelligence**

Visual dependency analysis:
```
Critical Path:
#12 ‚Üí #15 ‚Üí #23 ‚Üí #45 ‚Üí #50 (20 days)
         ‚Üò #24 ‚Üí #46 ‚Üó

Optimization: Parallelize #15 and #24
Time Saved: 3 days
```

### 5. **Quality Metrics**

**Code Quality**
- Test coverage trends
- Complexity scores
- Technical debt ratio
- Review feedback patterns

**Process Quality**
- Rework frequency
- Bug introduction rate
- Time to resolution
- Knowledge distribution

### 6. **Predictive Insights**

Based on patterns:
- Completion probability by deadline
- Resource needs projection
- Risk materialization likelihood
- Suggested interventions

### 7. **Executive Dashboard**

High-level summary with:
- Health score (0-100)
- Top 3 risks
- Top 3 opportunities
- Recommended actions
- Success probability

Result: Data-driven decisions with clear action paths.</file><file path="be/.claude/commands/tm/auto-implement-tasks.md">Auto Implement Tasks

Arguments: $ARGUMENTS
Enhanced auto-implementation with intelligent code generation and testing.

Arguments: $ARGUMENTS

## Intelligent Auto-Implementation

Advanced implementation with context awareness and quality checks.

### 1. **Pre-Implementation Analysis**

Before starting:
- Analyze task complexity and requirements
- Check codebase patterns and conventions
- Identify similar completed tasks
- Assess test coverage needs
- Detect potential risks

### 2. **Smart Implementation Strategy**

Based on task type and context:

**Feature Tasks**
1. Research existing patterns
2. Design component architecture
3. Implement with tests
4. Integrate with system
5. Update documentation

**Bug Fix Tasks**
1. Reproduce issue
2. Identify root cause
3. Implement minimal fix
4. Add regression tests
5. Verify side effects

**Refactoring Tasks**
1. Analyze current structure
2. Plan incremental changes
3. Maintain test coverage
4. Refactor step-by-step
5. Verify behavior unchanged

### 3. **Code Intelligence**

**Pattern Recognition**
- Learn from existing code
- Follow team conventions
- Use preferred libraries
- Match style guidelines

**Test-Driven Approach**
- Write tests first when possible
- Ensure comprehensive coverage
- Include edge cases
- Performance considerations

### 4. **Progressive Implementation**

Step-by-step with validation:
```
Step 1/5: Setting up component structure ‚úì
Step 2/5: Implementing core logic ‚úì
Step 3/5: Adding error handling ‚ö° (in progress)
Step 4/5: Writing tests ‚è≥
Step 5/5: Integration testing ‚è≥

Current: Adding try-catch blocks and validation...
```

### 5. **Quality Assurance**

Automated checks:
- Linting and formatting
- Test execution
- Type checking
- Dependency validation
- Performance analysis

### 6. **Smart Recovery**

If issues arise:
- Diagnostic analysis
- Suggestion generation
- Fallback strategies
- Manual intervention points
- Learning from failures

### 7. **Post-Implementation**

After completion:
- Generate PR description
- Update documentation
- Log lessons learned
- Suggest follow-up tasks
- Update task relationships

Result: High-quality, production-ready implementations.</file><file path="be/.claude/commands/tm/command-pipeline.md">Command Pipeline

Arguments: $ARGUMENTS
Execute a pipeline of commands based on a specification.

Arguments: $ARGUMENTS

## Command Pipeline Execution

Parse pipeline specification from arguments. Supported formats:

### Simple Pipeline
`init ‚Üí expand-all ‚Üí sprint-plan`

### Conditional Pipeline
`status ‚Üí if:pending&gt;10 ‚Üí sprint-plan ‚Üí else ‚Üí next`

### Iterative Pipeline
`for:pending-tasks ‚Üí expand ‚Üí complexity-check`

### Smart Pipeline Patterns

**1. Project Setup Pipeline**
```
init [prd] ‚Üí
expand-all ‚Üí
complexity-report ‚Üí
sprint-plan ‚Üí
show first-sprint
```

**2. Daily Work Pipeline**
```
standup ‚Üí
if:in-progress ‚Üí continue ‚Üí
else ‚Üí next ‚Üí start
```

**3. Task Completion Pipeline**
```
complete [id] ‚Üí
git-commit ‚Üí
if:blocked-tasks-freed ‚Üí show-freed ‚Üí
next
```

**4. Quality Check Pipeline**
```
list in-progress ‚Üí
for:each ‚Üí check-idle-time ‚Üí
if:idle&gt;1day ‚Üí prompt-update
```

### Pipeline Features

**Variables**
- Store results: `status ‚Üí $count=pending-count`
- Use in conditions: `if:$count&gt;10`
- Pass between commands: `expand $high-priority-tasks`

**Error Handling**
- On failure: `try:complete ‚Üí catch:show-blockers`
- Skip on error: `optional:test-run`
- Retry logic: `retry:3:commit`

**Parallel Execution**
- Parallel branches: `[analyze | test | lint]`
- Join results: `parallel ‚Üí join:report`

### Execution Flow

1. Parse pipeline specification
2. Validate command sequence
3. Execute with state passing
4. Handle conditions and loops
5. Aggregate results
6. Show summary

This enables complex workflows like:
`parse-prd ‚Üí expand-all ‚Üí filter:complex&gt;70 ‚Üí assign:senior ‚Üí sprint-plan:weighted`</file><file path="be/.claude/commands/tm/complexity-report.md">Complexity Report

Arguments: $ARGUMENTS
Display the task complexity analysis report.

Arguments: $ARGUMENTS

View the detailed complexity analysis generated by analyze-complexity command.

## Viewing Complexity Report

Shows comprehensive task complexity analysis with actionable insights.

## Execution

```bash
task-master complexity-report [--file=&lt;path&gt;]
```

## Report Location

Default: `.taskmaster/reports/complexity-analysis.md`
Custom: Specify with --file parameter

## Report Contents

### 1. **Executive Summary**
```
Complexity Analysis Summary
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Analysis Date: 2024-01-15
Tasks Analyzed: 32
High Complexity: 5 (16%)
Medium Complexity: 12 (37%)
Low Complexity: 15 (47%)

Critical Findings:
- 5 tasks need immediate expansion
- 3 tasks have high technical risk
- 2 tasks block critical path
```

### 2. **Detailed Task Analysis**
For each complex task:
- Complexity score breakdown
- Contributing factors
- Specific risks identified
- Expansion recommendations
- Similar completed tasks

### 3. **Risk Matrix**
Visual representation:
```
Risk vs Complexity Matrix
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
High Risk  | #5(9) #12(8) | #23(6)
Med Risk   | #34(7)       | #45(5) #67(5)
Low Risk   | #78(8)       | [15 tasks]
           | High Complex  | Med Complex
```

### 4. **Recommendations**

**Immediate Actions:**
1. Expand task #5 - Critical path + high complexity
2. Expand task #12 - High risk + dependencies
3. Review task #34 - Consider splitting

**Sprint Planning:**
- Don&apos;t schedule multiple high-complexity tasks together
- Ensure expertise available for complex tasks
- Build in buffer time for unknowns

## Interactive Features

When viewing report:
1. **Quick Actions**
   - Press &apos;e&apos; to expand a task
   - Press &apos;d&apos; for task details
   - Press &apos;r&apos; to refresh analysis

2. **Filtering**
   - View by complexity level
   - Filter by risk factors
   - Show only actionable items

3. **Export Options**
   - Markdown format
   - CSV for spreadsheets
   - JSON for tools

## Report Intelligence

- Compares with historical data
- Shows complexity trends
- Identifies patterns
- Suggests process improvements

## Integration

Use report for:
- Sprint planning sessions
- Resource allocation
- Risk assessment
- Team discussions
- Client updates

## Example Usage

```
/taskmaster:complexity-report
‚Üí Opens latest analysis

/taskmaster:complexity-report --file=archived/2024-01-01.md
‚Üí View historical analysis

After viewing:
/taskmaster:expand 5
‚Üí Expand high-complexity task
```</file><file path="be/.claude/commands/tm/convert-task-to-subtask.md">Convert Task To Subtask

Arguments: $ARGUMENTS
Convert an existing task into a subtask.

Arguments: $ARGUMENTS

Parse parent ID and task ID to convert.

## Task Conversion

Converts an existing standalone task into a subtask of another task.

## Argument Parsing

- &quot;move task 8 under 5&quot;
- &quot;make 8 a subtask of 5&quot;
- &quot;nest 8 in 5&quot;
- &quot;5 8&quot; ‚Üí make task 8 a subtask of task 5

## Execution

```bash
task-master add-subtask --parent=&lt;parent-id&gt; --task-id=&lt;task-to-convert&gt;
```

## Pre-Conversion Checks

1. **Validation**
   - Both tasks exist and are valid
   - No circular parent relationships
   - Task isn&apos;t already a subtask
   - Logical hierarchy makes sense

2. **Impact Analysis**
   - Dependencies that will be affected
   - Tasks that depend on converting task
   - Priority alignment needed
   - Status compatibility

## Conversion Process

1. Change task ID from &quot;8&quot; to &quot;5.1&quot; (next available)
2. Update all dependency references
3. Inherit parent&apos;s context where appropriate
4. Adjust priorities if needed
5. Update time estimates

## Smart Features

- Preserve task history
- Maintain dependencies
- Update all references
- Create conversion log

## Example

```
/taskmaster:add-subtask/from-task 5 8
‚Üí Converting: Task #8 becomes subtask #5.1
‚Üí Updated: 3 dependency references
‚Üí Parent task #5 now has 1 subtask
‚Üí Note: Subtask inherits parent&apos;s priority

Before: #8 &quot;Implement validation&quot; (standalone)
After:  #5.1 &quot;Implement validation&quot; (subtask of #5)
```

## Post-Conversion

- Show new task hierarchy
- List updated dependencies
- Verify project integrity
- Suggest related conversions</file><file path="be/.claude/commands/tm/expand-all-tasks.md">Expand All Tasks
Expand all pending tasks that need subtasks.

## Bulk Task Expansion

Intelligently expands all tasks that would benefit from breakdown.

## Execution

```bash
task-master expand --all
```

## Smart Selection

Only expands tasks that:
- Are marked as pending
- Have high complexity (&gt;5)
- Lack existing subtasks
- Would benefit from breakdown

## Expansion Process

1. **Analysis Phase**
   - Identify expansion candidates
   - Group related tasks
   - Plan expansion strategy

2. **Batch Processing**
   - Expand tasks in logical order
   - Maintain consistency
   - Preserve relationships
   - Optimize for parallelism

3. **Quality Control**
   - Ensure subtask quality
   - Avoid over-decomposition
   - Maintain task coherence
   - Update dependencies

## Options

- Add `force` to expand all regardless of complexity
- Add `research` for enhanced AI analysis

## Results

After bulk expansion:
- Summary of tasks expanded
- New subtask count
- Updated complexity metrics
- Suggested task order</file><file path="be/.claude/commands/tm/expand-task.md">Expand Task

Arguments: $ARGUMENTS
Break down a complex task into subtasks.

Arguments: $ARGUMENTS (task ID)

## Intelligent Task Expansion

Analyzes a task and creates detailed subtasks for better manageability.

## Execution

```bash
task-master expand --id=$ARGUMENTS
```

## Expansion Process

1. **Task Analysis**
   - Review task complexity
   - Identify components
   - Detect technical challenges
   - Estimate time requirements

2. **Subtask Generation**
   - Create 3-7 subtasks typically
   - Each subtask 1-4 hours
   - Logical implementation order
   - Clear acceptance criteria

3. **Smart Breakdown**
   - Setup/configuration tasks
   - Core implementation
   - Testing components
   - Integration steps
   - Documentation updates

## Enhanced Features

Based on task type:
- **Feature**: Setup ‚Üí Implement ‚Üí Test ‚Üí Integrate
- **Bug Fix**: Reproduce ‚Üí Diagnose ‚Üí Fix ‚Üí Verify
- **Refactor**: Analyze ‚Üí Plan ‚Üí Refactor ‚Üí Validate

## Post-Expansion

After expansion:
1. Show subtask hierarchy
2. Update time estimates
3. Suggest implementation order
4. Highlight critical path</file><file path="be/.claude/commands/tm/fix-dependencies.md">Fix Dependencies
Automatically fix dependency issues found during validation.

## Automatic Dependency Repair

Intelligently fixes common dependency problems while preserving project logic.

## Execution

```bash
task-master fix-dependencies
```

## What Gets Fixed

### 1. **Auto-Fixable Issues**
- Remove references to deleted tasks
- Break simple circular dependencies
- Remove self-dependencies
- Clean up duplicate dependencies

### 2. **Smart Resolutions**
- Reorder dependencies to maintain logic
- Suggest task merging for over-dependent tasks
- Flatten unnecessary dependency chains
- Remove redundant transitive dependencies

### 3. **Manual Review Required**
- Complex circular dependencies
- Critical path modifications
- Business logic dependencies
- High-impact changes

## Fix Process

1. **Analysis Phase**
   - Run validation check
   - Categorize issues by type
   - Determine fix strategy

2. **Execution Phase**
   - Apply automatic fixes
   - Log all changes made
   - Preserve task relationships

3. **Verification Phase**
   - Re-validate after fixes
   - Show before/after comparison
   - Highlight manual fixes needed

## Smart Features

- Preserves intended task flow
- Minimal disruption approach
- Creates fix history/log
- Suggests manual interventions

## Output Example

```
Dependency Auto-Fix Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Fixed Automatically:
‚úÖ Removed 2 references to deleted tasks
‚úÖ Resolved 1 self-dependency
‚úÖ Cleaned 3 redundant dependencies

Manual Review Needed:
‚ö†Ô∏è Complex circular dependency: #12 ‚Üí #15 ‚Üí #18 ‚Üí #12
  Suggestion: Make #15 not depend on #12
‚ö†Ô∏è Task #45 has 8 dependencies
  Suggestion: Break into subtasks

Run &apos;/taskmaster:validate-dependencies&apos; to verify fixes
```

## Safety

- Preview mode available
- Rollback capability
- Change logging
- No data loss</file><file path="be/.claude/commands/tm/help.md">Help

Arguments: $ARGUMENTS
Show help for Task Master AI commands.

Arguments: $ARGUMENTS

Display help for Task Master commands and available options.

## Task Master AI Command Help

### Quick Navigation

Type `/taskmaster:` and use tab completion to explore all commands.

### Command Categories

#### üöÄ Setup &amp; Installation
- `/taskmaster:install-taskmaster` - Comprehensive installation guide
- `/taskmaster:quick-install-taskmaster` - One-line global install

#### üìã Project Setup
- `/taskmaster:init-project` - Initialize new project
- `/taskmaster:init-project-quick` - Quick setup with auto-confirm
- `/taskmaster:view-models` - View AI configuration
- `/taskmaster:setup-models` - Configure AI providers

#### üéØ Task Generation
- `/taskmaster:parse-prd` - Generate tasks from PRD
- `/taskmaster:parse-prd-with-research` - Enhanced parsing
- `/taskmaster:generate-tasks` - Create task files

#### üìù Task Management
- `/taskmaster:list-tasks` - List all tasks
- `/taskmaster:list-tasks-by-status` - List tasks filtered by status
- `/taskmaster:list-tasks-with-subtasks` - List tasks with subtasks
- `/taskmaster:show-task` - Display task details
- `/taskmaster:add-task` - Create new task
- `/taskmaster:update-task` - Update single task
- `/taskmaster:update-tasks-from-id` - Update multiple tasks
- `/taskmaster:next-task` - Get next task recommendation

#### üîÑ Status Management
- `/taskmaster:to-pending` - Set task to pending
- `/taskmaster:to-in-progress` - Set task to in-progress
- `/taskmaster:to-done` - Set task to done
- `/taskmaster:to-review` - Set task to review
- `/taskmaster:to-deferred` - Set task to deferred
- `/taskmaster:to-cancelled` - Set task to cancelled

#### üîç Analysis &amp; Breakdown
- `/taskmaster:analyze-complexity` - Analyze task complexity
- `/taskmaster:complexity-report` - View complexity report
- `/taskmaster:expand-task` - Break down complex task
- `/taskmaster:expand-all-tasks` - Expand all eligible tasks

#### üîó Dependencies
- `/taskmaster:add-dependency` - Add task dependency
- `/taskmaster:remove-dependency` - Remove dependency
- `/taskmaster:validate-dependencies` - Check for issues
- `/taskmaster:fix-dependencies` - Auto-fix dependency issues

#### üì¶ Subtasks
- `/taskmaster:add-subtask` - Add subtask to task
- `/taskmaster:convert-task-to-subtask` - Convert task to subtask
- `/taskmaster:remove-subtask` - Remove subtask
- `/taskmaster:remove-subtasks` - Clear specific task subtasks
- `/taskmaster:remove-all-subtasks` - Clear all subtasks

#### üóëÔ∏è Task Removal
- `/taskmaster:remove-task` - Remove task permanently

#### ü§ñ Workflows
- `/taskmaster:smart-workflow` - Intelligent workflows
- `/taskmaster:command-pipeline` - Command chaining
- `/taskmaster:auto-implement-tasks` - Auto-implementation

#### üìä Utilities
- `/taskmaster:analyze-project` - Project analysis
- `/taskmaster:project-status` - Project dashboard
- `/taskmaster:sync-readme` - Sync README with tasks
- `/taskmaster:learn` - Interactive learning
- `/taskmaster:tm-main` - Main Task Master interface

### Quick Start Examples

```
/taskmaster:list-tasks
/taskmaster:show-task 1.2
/taskmaster:add-task
/taskmaster:next-task
```

### Getting Started

1. Install: `/taskmaster:quick-install-taskmaster`
2. Initialize: `/taskmaster:init-project-quick`
3. Learn: `/taskmaster:learn`
4. Work: `/taskmaster:smart-workflow`

For detailed command info, run the specific command with `--help` or check command documentation.</file><file path="be/.claude/commands/tm/init-project-quick.md">Init Project Quick

Arguments: $ARGUMENTS
Quick initialization with auto-confirmation.

Arguments: $ARGUMENTS

Initialize a Task Master project without prompts, accepting all defaults.

## Quick Setup

```bash
task-master init -y
```

## What It Does

1. Creates `.taskmaster/` directory structure
2. Initializes empty `tasks.json`
3. Sets up default configuration
4. Uses directory name as project name
5. Skips all confirmation prompts

## Smart Defaults

- Project name: Current directory name
- Description: &quot;Task Master Project&quot;
- Model config: Existing environment vars
- Task structure: Standard format

## Next Steps

After quick init:
1. Configure AI models if needed:
   ```
   /taskmaster:models/setup
   ```

2. Parse PRD if available:
   ```
   /taskmaster:parse-prd &lt;file&gt;
   ```

3. Or create first task:
   ```
   /taskmaster:add-task create initial setup
   ```

Perfect for rapid project setup!</file><file path="be/.claude/commands/tm/init-project.md">Init Project

Arguments: $ARGUMENTS
Initialize a new Task Master project.

Arguments: $ARGUMENTS

Parse arguments to determine initialization preferences.

## Initialization Process

1. **Parse Arguments**
   - PRD file path (if provided)
   - Project name
   - Auto-confirm flag (-y)

2. **Project Setup**
   ```bash
   task-master init
   ```

3. **Smart Initialization**
   - Detect existing project files
   - Suggest project name from directory
   - Check for git repository
   - Verify AI provider configuration

## Configuration Options

Based on arguments:
- `quick` / `-y` ‚Üí Skip confirmations
- `&lt;file.md&gt;` ‚Üí Use as PRD after init
- `--name=&lt;name&gt;` ‚Üí Set project name
- `--description=&lt;desc&gt;` ‚Üí Set description

## Post-Initialization

After successful init:
1. Show project structure created
2. Verify AI models configured
3. Suggest next steps:
   - Parse PRD if available
   - Configure AI providers
   - Set up git hooks
   - Create first tasks

## Integration

If PRD file provided:
```
/taskmaster:init my-prd.md
‚Üí Automatically runs parse-prd after init
```</file><file path="be/.claude/commands/tm/install-taskmaster.md">Install TaskMaster
Check if Task Master is installed and install it if needed.

This command helps you get Task Master set up globally on your system.

## Detection and Installation Process

1. **Check Current Installation**
   ```bash
   # Check if task-master command exists
   which task-master || echo &quot;Task Master not found&quot;

   # Check npm global packages
   npm list -g task-master-ai
   ```

2. **System Requirements Check**
   ```bash
   # Verify Node.js is installed
   node --version

   # Verify npm is installed
   npm --version

   # Check Node version (need 16+)
   ```

3. **Install Task Master Globally**
   If not installed, run:
   ```bash
   npm install -g task-master-ai
   ```

4. **Verify Installation**
   ```bash
   # Check version
   task-master --version

   # Verify command is available
   which task-master
   ```

5. **Initial Setup**
   ```bash
   # Initialize in current directory
   task-master init
   ```

6. **Configure AI Provider**
   Ensure you have at least one AI provider API key set:
   ```bash
   # Check current configuration
   task-master models --status

   # If no API keys found, guide setup
   echo &quot;You&apos;ll need at least one API key:&quot;
   echo &quot;- ANTHROPIC_API_KEY for Claude&quot;
   echo &quot;- OPENAI_API_KEY for GPT models&quot;
   echo &quot;- PERPLEXITY_API_KEY for research&quot;
   echo &quot;&quot;
   echo &quot;Set them in your shell profile or .env file&quot;
   ```

7. **Quick Test**
   ```bash
   # Create a test PRD
   echo &quot;Build a simple hello world API&quot; &gt; test-prd.txt

   # Try parsing it
   task-master parse-prd test-prd.txt -n 3
   ```

## Troubleshooting

If installation fails:

**Permission Errors:**
```bash
# Try with sudo (macOS/Linux)
sudo npm install -g task-master-ai

# Or fix npm permissions
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH
```

**Network Issues:**
```bash
# Use different registry
npm install -g task-master-ai --registry https://registry.npmjs.org/
```

**Node Version Issues:**
```bash
# Install Node 20+ via nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20
```

## Success Confirmation

Once installed, you should see:
```
‚úÖ Task Master installed
‚úÖ Command &apos;task-master&apos; available globally
‚úÖ AI provider configured
‚úÖ Ready to use slash commands!

Try: /taskmaster:init your-prd.md
```

## Next Steps

After installation:
1. Run `/taskmaster:status` to verify setup
2. Configure AI providers with `/taskmaster:setup-models`
3. Start using Task Master commands!</file><file path="be/.claude/commands/tm/learn.md">Learn

Arguments: $ARGUMENTS
Learn about Task Master capabilities through interactive exploration.

Arguments: $ARGUMENTS

## Interactive Task Master Learning

Based on your input, I&apos;ll help you discover capabilities:

### 1. **What are you trying to do?**

If $ARGUMENTS contains:
- &quot;start&quot; / &quot;begin&quot; ‚Üí Show project initialization workflows
- &quot;manage&quot; / &quot;organize&quot; ‚Üí Show task management commands
- &quot;automate&quot; / &quot;auto&quot; ‚Üí Show automation workflows
- &quot;analyze&quot; / &quot;report&quot; ‚Üí Show analysis tools
- &quot;fix&quot; / &quot;problem&quot; ‚Üí Show troubleshooting commands
- &quot;fast&quot; / &quot;quick&quot; ‚Üí Show efficiency shortcuts

### 2. **Intelligent Suggestions**

Based on your project state:

**No tasks yet?**
```
You&apos;ll want to start with:
1. /project:task-master:init &lt;prd-file&gt;
   ‚Üí Creates tasks from requirements

2. /project:task-master:parse-prd &lt;file&gt;
   ‚Üí Alternative task generation

Try: /project:task-master:init demo-prd.md
```

**Have tasks?**
Let me analyze what you might need...
- Many pending tasks? ‚Üí Learn sprint planning
- Complex tasks? ‚Üí Learn task expansion
- Daily work? ‚Üí Learn workflow automation

### 3. **Command Discovery**

**By Category:**
- üìã Task Management: list, show, add, update, complete
- üîÑ Workflows: auto-implement, sprint-plan, daily-standup
- üõ†Ô∏è Utilities: check-health, complexity-report, sync-memory
- üîç Analysis: validate-deps, show dependencies

**By Scenario:**
- &quot;I want to see what to work on&quot; ‚Üí `/project:task-master:next`
- &quot;I need to break this down&quot; ‚Üí `/project:task-master:expand &lt;id&gt;`
- &quot;Show me everything&quot; ‚Üí `/project:task-master:status`
- &quot;Just do it for me&quot; ‚Üí `/project:workflows:auto-implement`

### 4. **Power User Patterns**

**Command Chaining:**
```
/project:task-master:next
/project:task-master:start &lt;id&gt;
/project:workflows:auto-implement
```

**Smart Filters:**
```
/project:task-master:list pending high
/project:task-master:list blocked
/project:task-master:list 1-5 tree
```

**Automation:**
```
/project:workflows:pipeline init ‚Üí expand-all ‚Üí sprint-plan
```

### 5. **Learning Path**

Based on your experience level:

**Beginner Path:**
1. init ‚Üí Create project
2. status ‚Üí Understand state
3. next ‚Üí Find work
4. complete ‚Üí Finish task

**Intermediate Path:**
1. expand ‚Üí Break down complex tasks
2. sprint-plan ‚Üí Organize work
3. complexity-report ‚Üí Understand difficulty
4. validate-deps ‚Üí Ensure consistency

**Advanced Path:**
1. pipeline ‚Üí Chain operations
2. smart-flow ‚Üí Context-aware automation
3. Custom commands ‚Üí Extend the system

### 6. **Try This Now**

Based on what you asked about, try:
[Specific command suggestion based on $ARGUMENTS]

Want to learn more about a specific command?
Type: /project:help &lt;command-name&gt;</file><file path="be/.claude/commands/tm/list-tasks-by-status.md">List Tasks By Status

Arguments: $ARGUMENTS
List tasks filtered by a specific status.

Arguments: $ARGUMENTS

Parse the status from arguments and list only tasks matching that status.

## Status Options
- `pending` - Not yet started
- `in-progress` - Currently being worked on
- `done` - Completed
- `review` - Awaiting review
- `deferred` - Postponed
- `cancelled` - Cancelled

## Execution

Based on $ARGUMENTS, run:
```bash
task-master list --status=$ARGUMENTS
```

## Enhanced Display

For the filtered results:
- Group by priority within the status
- Show time in current status
- Highlight tasks approaching deadlines
- Display blockers and dependencies
- Suggest next actions for each status group

## Intelligent Insights

Based on the status filter:
- **Pending**: Show recommended start order
- **In-Progress**: Display idle time warnings
- **Done**: Show newly unblocked tasks
- **Review**: Indicate review duration
- **Deferred**: Show reactivation criteria
- **Cancelled**: Display impact analysis</file><file path="be/.claude/commands/tm/list-tasks-with-subtasks.md">List Tasks With Subtasks
List all tasks including their subtasks in a hierarchical view.

This command shows all tasks with their nested subtasks, providing a complete project overview.

## Execution

Run the Task Master list command with subtasks flag:
```bash
task-master list --with-subtasks
```

## Enhanced Display

I&apos;ll organize the output to show:
- Parent tasks with clear indicators
- Nested subtasks with proper indentation
- Status badges for quick scanning
- Dependencies and blockers highlighted
- Progress indicators for tasks with subtasks

## Smart Filtering

Based on the task hierarchy:
- Show completion percentage for parent tasks
- Highlight blocked subtask chains
- Group by functional areas
- Indicate critical path items

This gives you a complete tree view of your project structure.</file><file path="be/.claude/commands/tm/list-tasks.md">List Tasks

Arguments: $ARGUMENTS
List tasks with intelligent argument parsing.

Parse arguments to determine filters and display options:
- Status: pending, in-progress, done, review, deferred, cancelled
- Priority: high, medium, low (or priority:high)
- Special: subtasks, tree, dependencies, blocked
- IDs: Direct numbers (e.g., &quot;1,3,5&quot; or &quot;1-5&quot;)
- Complex: &quot;pending high&quot; = pending AND high priority

Arguments: $ARGUMENTS

Let me parse your request intelligently:

1. **Detect Filter Intent**
   - If arguments contain status keywords ‚Üí filter by status
   - If arguments contain priority ‚Üí filter by priority
   - If arguments contain &quot;subtasks&quot; ‚Üí include subtasks
   - If arguments contain &quot;tree&quot; ‚Üí hierarchical view
   - If arguments contain numbers ‚Üí show specific tasks
   - If arguments contain &quot;blocked&quot; ‚Üí show blocked tasks only

2. **Smart Combinations**
   Examples of what I understand:
   - &quot;pending high&quot; ‚Üí pending tasks with high priority
   - &quot;done today&quot; ‚Üí tasks completed today
   - &quot;blocked&quot; ‚Üí tasks with unmet dependencies
   - &quot;1-5&quot; ‚Üí tasks 1 through 5
   - &quot;subtasks tree&quot; ‚Üí hierarchical view with subtasks

3. **Execute Appropriate Query**
   Based on parsed intent, run the most specific task-master command

4. **Enhanced Display**
   - Group by relevant criteria
   - Show most important information first
   - Use visual indicators for quick scanning
   - Include relevant metrics

5. **Intelligent Suggestions**
   Based on what you&apos;re viewing, suggest next actions:
   - Many pending? ‚Üí Suggest priority order
   - Many blocked? ‚Üí Show dependency resolution
   - Looking at specific tasks? ‚Üí Show related tasks</file><file path="be/.claude/commands/tm/next-task.md">Next Task

Arguments: $ARGUMENTS
Intelligently determine and prepare the next action based on comprehensive context.

This enhanced version of &apos;next&apos; considers:
- Current task states
- Recent activity
- Time constraints
- Dependencies
- Your working patterns

Arguments: $ARGUMENTS

## Intelligent Next Action

### 1. **Context Gathering**
Let me analyze the current situation:
- Active tasks (in-progress)
- Recently completed tasks
- Blocked tasks
- Time since last activity
- Arguments provided: $ARGUMENTS

### 2. **Smart Decision Tree**

**If you have an in-progress task:**
- Has it been idle &gt; 2 hours? ‚Üí Suggest resuming or switching
- Near completion? ‚Üí Show remaining steps
- Blocked? ‚Üí Find alternative task

**If no in-progress tasks:**
- Unblocked high-priority tasks? ‚Üí Start highest
- Complex tasks need breakdown? ‚Üí Suggest expansion
- All tasks blocked? ‚Üí Show dependency resolution

**Special arguments handling:**
- &quot;quick&quot; ‚Üí Find task &lt; 2 hours
- &quot;easy&quot; ‚Üí Find low complexity task
- &quot;important&quot; ‚Üí Find high priority regardless of complexity
- &quot;continue&quot; ‚Üí Resume last worked task

### 3. **Preparation Workflow**

Based on selected task:
1. Show full context and history
2. Set up development environment
3. Run relevant tests
4. Open related files
5. Show similar completed tasks
6. Estimate completion time

### 4. **Alternative Suggestions**

Always provide options:
- Primary recommendation
- Quick alternative (&lt; 1 hour)
- Strategic option (unblocks most tasks)
- Learning option (new technology/skill)

### 5. **Workflow Integration**

Seamlessly connect to:
- `/project:task-master:start [selected]`
- `/project:workflows:auto-implement`
- `/project:task-master:expand` (if complex)
- `/project:utils:complexity-report` (if unsure)

The goal: Zero friction from decision to implementation.</file><file path="be/.claude/commands/tm/parse-prd-with-research.md">Parse PRD With Research

Arguments: $ARGUMENTS
Parse PRD with enhanced research mode for better task generation.

Arguments: $ARGUMENTS (PRD file path)

## Research-Enhanced Parsing

Uses the research AI provider (typically Perplexity) for more comprehensive task generation with current best practices.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS --research
```

## Research Benefits

1. **Current Best Practices**
   - Latest framework patterns
   - Security considerations
   - Performance optimizations
   - Accessibility requirements

2. **Technical Deep Dive**
   - Implementation approaches
   - Library recommendations
   - Architecture patterns
   - Testing strategies

3. **Comprehensive Coverage**
   - Edge cases consideration
   - Error handling tasks
   - Monitoring setup
   - Deployment tasks

## Enhanced Output

Research mode typically:
- Generates more detailed tasks
- Includes industry standards
- Adds compliance considerations
- Suggests modern tooling

## When to Use

- New technology domains
- Complex requirements
- Regulatory compliance needed
- Best practices crucial</file><file path="be/.claude/commands/tm/parse-prd.md">Parse PRD

Arguments: $ARGUMENTS
Parse a PRD document to generate tasks.

Arguments: $ARGUMENTS (PRD file path)

## Intelligent PRD Parsing

Analyzes your requirements document and generates a complete task breakdown.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS
```

## Parsing Process

1. **Document Analysis**
   - Extract key requirements
   - Identify technical components
   - Detect dependencies
   - Estimate complexity

2. **Task Generation**
   - Create 10-15 tasks by default
   - Include implementation tasks
   - Add testing tasks
   - Include documentation tasks
   - Set logical dependencies

3. **Smart Enhancements**
   - Group related functionality
   - Set appropriate priorities
   - Add acceptance criteria
   - Include test strategies

## Options

Parse arguments for modifiers:
- Number after filename ‚Üí `--num-tasks`
- `research` ‚Üí Use research mode
- `comprehensive` ‚Üí Generate more tasks

## Post-Generation

After parsing:
1. Display task summary
2. Show dependency graph
3. Suggest task expansion for complex items
4. Recommend sprint planning</file><file path="be/.claude/commands/tm/project-status.md">Project Status

Arguments: $ARGUMENTS
Enhanced status command with comprehensive project insights.

Arguments: $ARGUMENTS

## Intelligent Status Overview

### 1. **Executive Summary**
Quick dashboard view:
- üèÉ Active work (in-progress tasks)
- üìä Progress metrics (% complete, velocity)
- üöß Blockers and risks
- ‚è±Ô∏è Time analysis (estimated vs actual)
- üéØ Sprint/milestone progress

### 2. **Contextual Analysis**

Based on $ARGUMENTS, focus on:
- &quot;sprint&quot; ‚Üí Current sprint progress and burndown
- &quot;blocked&quot; ‚Üí Dependency chains and resolution paths
- &quot;team&quot; ‚Üí Task distribution and workload
- &quot;timeline&quot; ‚Üí Schedule adherence and projections
- &quot;risk&quot; ‚Üí High complexity or overdue items

### 3. **Smart Insights**

**Workflow Health:**
- Idle tasks (in-progress &gt; 24h without updates)
- Bottlenecks (multiple tasks waiting on same dependency)
- Quick wins (low complexity, high impact)

**Predictive Analytics:**
- Completion projections based on velocity
- Risk of missing deadlines
- Recommended task order for optimal flow

### 4. **Visual Intelligence**

Dynamic visualization based on data:
```
Sprint Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% (16/20 tasks)
Velocity Trend: ‚ÜóÔ∏è +15% this week
Blocked Tasks:  üî¥ 3 critical path items

Priority Distribution:
High:   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 8 tasks (2 blocked)
Medium: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 4 tasks
Low:    ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 2 tasks
```

### 5. **Actionable Recommendations**

Based on analysis:
1. **Immediate actions** (unblock critical path)
2. **Today&apos;s focus** (optimal task sequence)
3. **Process improvements** (recurring patterns)
4. **Resource needs** (skills, time, dependencies)

### 6. **Historical Context**

Compare to previous periods:
- Velocity changes
- Pattern recognition
- Improvement areas
- Success patterns to repeat</file><file path="be/.claude/commands/tm/quick-install-taskmaster.md">Quick Install TaskMaster
Quick install Task Master globally if not already installed.

Execute this streamlined installation:

```bash
# Check and install in one command
task-master --version 2&gt;/dev/null || npm install -g task-master-ai

# Verify installation
task-master --version

# Quick setup check
task-master models --status || echo &quot;Note: You&apos;ll need to set up an AI provider API key&quot;
```

If you see &quot;command not found&quot; after installation, you may need to:
1. Restart your terminal
2. Or add npm global bin to PATH: `export PATH=$(npm bin -g):$PATH`

Once installed, you can use all the Task Master commands!

Quick test: Run `/taskmaster:help` to see all available commands.</file><file path="be/.claude/commands/tm/remove-all-subtasks.md">Remove All Subtasks
Clear all subtasks from all tasks globally.

## Global Subtask Clearing

Remove all subtasks across the entire project. Use with extreme caution.

## Execution

```bash
task-master clear-subtasks --all
```

## Pre-Clear Analysis

1. **Project-Wide Summary**
   ```
   Global Subtask Summary
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Total parent tasks: 12
   Total subtasks: 47
   - Completed: 15
   - In-progress: 8
   - Pending: 24

   Work at risk: ~120 hours
   ```

2. **Critical Warnings**
   - In-progress subtasks that will lose work
   - Completed subtasks with valuable history
   - Complex dependency chains
   - Integration test results

## Double Confirmation

```
‚ö†Ô∏è  DESTRUCTIVE OPERATION WARNING ‚ö†Ô∏è
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
This will remove ALL 47 subtasks from your project
Including 8 in-progress and 15 completed subtasks

This action CANNOT be undone

Type &apos;CLEAR ALL SUBTASKS&apos; to confirm:
```

## Smart Safeguards

- Require explicit confirmation phrase
- Create automatic backup
- Log all removed data
- Option to export first

## Use Cases

Valid reasons for global clear:
- Project restructuring
- Major pivot in approach
- Starting fresh breakdown
- Switching to different task organization

## Process

1. Full project analysis
2. Create backup file
3. Show detailed impact
4. Require confirmation
5. Execute removal
6. Generate summary report

## Alternative Suggestions

Before clearing all:
- Export subtasks to file
- Clear only pending subtasks
- Clear by task category
- Archive instead of delete

## Post-Clear Report

```
Global Subtask Clear Complete
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Removed: 47 subtasks from 12 tasks
Backup saved: .taskmaster/backup/subtasks-20240115.json
Parent tasks updated: 12
Time estimates adjusted: Yes

Next steps:
- Review updated task list
- Re-expand complex tasks as needed
- Check project timeline
```</file><file path="be/.claude/commands/tm/remove-dependency.md">Remove Dependency

Arguments: $ARGUMENTS
Remove a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to remove dependency relationship.

## Removing Dependencies

Removes a dependency relationship, potentially unblocking tasks.

## Argument Parsing

Parse natural language or IDs:
- &quot;remove dependency between 5 and 3&quot;
- &quot;5 no longer needs 3&quot;
- &quot;unblock 5 from 3&quot;
- &quot;5 3&quot; ‚Üí remove dependency of 5 on 3

## Execution

```bash
task-master remove-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Pre-Removal Checks

1. **Verify dependency exists**
2. **Check impact on task flow**
3. **Warn if it breaks logical sequence**
4. **Show what will be unblocked**

## Smart Analysis

Before removing:
- Show why dependency might have existed
- Check if removal makes tasks executable
- Verify no critical path disruption
- Suggest alternative dependencies

## Post-Removal

After removing:
1. Show updated task status
2. List newly unblocked tasks
3. Update project timeline
4. Suggest next actions

## Safety Features

- Confirm if removing critical dependency
- Show tasks that become immediately actionable
- Warn about potential issues
- Keep removal history

## Example

```
/taskmaster:remove-dependency 5 from 3
‚Üí Removed: Task #5 no longer depends on #3
‚Üí Task #5 is now UNBLOCKED and ready to start
‚Üí Warning: Consider if #5 still needs #2 completed first
```</file><file path="be/.claude/commands/tm/remove-subtask.md">Remove Subtask

Arguments: $ARGUMENTS
Remove a subtask from its parent task.

Arguments: $ARGUMENTS

Parse subtask ID to remove, with option to convert to standalone task.

## Removing Subtasks

Remove a subtask and optionally convert it back to a standalone task.

## Argument Parsing

- &quot;remove subtask 5.1&quot;
- &quot;delete 5.1&quot;
- &quot;convert 5.1 to task&quot; ‚Üí remove and convert
- &quot;5.1 standalone&quot; ‚Üí convert to standalone

## Execution Options

### 1. Delete Subtask
```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt;
```

### 2. Convert to Standalone
```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt; --convert
```

## Pre-Removal Checks

1. **Validate Subtask**
   - Verify subtask exists
   - Check completion status
   - Review dependencies

2. **Impact Analysis**
   - Other subtasks that depend on it
   - Parent task implications
   - Data that will be lost

## Removal Process

### For Deletion:
1. Confirm if subtask has work done
2. Update parent task estimates
3. Remove subtask and its data
4. Clean up dependencies

### For Conversion:
1. Assign new standalone task ID
2. Preserve all task data
3. Update dependency references
4. Maintain task history

## Smart Features

- Warn if subtask is in-progress
- Show impact on parent task
- Preserve important data
- Update related estimates

## Example Flows

```
/taskmaster:remove-subtask 5.1
‚Üí Warning: Subtask #5.1 is in-progress
‚Üí This will delete all subtask data
‚Üí Parent task #5 will be updated
Confirm deletion? (y/n)

/taskmaster:remove-subtask 5.1 convert
‚Üí Converting subtask #5.1 to standalone task #89
‚Üí Preserved: All task data and history
‚Üí Updated: 2 dependency references
‚Üí New task #89 is now independent
```

## Post-Removal

- Update parent task status
- Recalculate estimates
- Show updated hierarchy
- Suggest next actions</file><file path="be/.claude/commands/tm/remove-subtasks.md">Remove Subtasks

Arguments: $ARGUMENTS
Clear all subtasks from a specific task.

Arguments: $ARGUMENTS (task ID)

Remove all subtasks from a parent task at once.

## Clearing Subtasks

Bulk removal of all subtasks from a parent task.

## Execution

```bash
task-master remove-subtasks --id=$ARGUMENTS
```

## Pre-Clear Analysis

1. **Subtask Summary**
   - Number of subtasks
   - Completion status of each
   - Work already done
   - Dependencies affected

2. **Impact Assessment**
   - Data that will be lost
   - Dependencies to be removed
   - Effect on project timeline
   - Parent task implications

## Confirmation Required

```
Remove Subtasks Confirmation
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Parent Task: #5 &quot;Implement user authentication&quot;
Subtasks to remove: 4
- #5.1 &quot;Setup auth framework&quot; (done)
- #5.2 &quot;Create login form&quot; (in-progress)
- #5.3 &quot;Add validation&quot; (pending)
- #5.4 &quot;Write tests&quot; (pending)

‚ö†Ô∏è  This will permanently delete all subtask data
Continue? (y/n)
```

## Smart Features

- Option to convert to standalone tasks
- Backup task data before clearing
- Preserve completed work history
- Update parent task appropriately

## Process

1. List all subtasks for confirmation
2. Check for in-progress work
3. Remove all subtasks
4. Update parent task
5. Clean up dependencies

## Alternative Options

Suggest alternatives:
- Convert important subtasks to tasks
- Keep completed subtasks
- Archive instead of delete
- Export subtask data first

## Post-Clear

- Show updated parent task
- Recalculate time estimates
- Update task complexity
- Suggest next steps

## Example

```
/taskmaster:remove-subtasks 5
‚Üí Found 4 subtasks to remove
‚Üí Warning: Subtask #5.2 is in-progress
‚Üí Cleared all subtasks from task #5
‚Üí Updated parent task estimates
‚Üí Suggestion: Consider re-expanding with better breakdown
```</file><file path="be/.claude/commands/tm/remove-task.md">Remove Task

Arguments: $ARGUMENTS
Remove a task permanently from the project.

Arguments: $ARGUMENTS (task ID)

Delete a task and handle all its relationships properly.

## Task Removal

Permanently removes a task while maintaining project integrity.

## Argument Parsing

- &quot;remove task 5&quot;
- &quot;delete 5&quot;
- &quot;5&quot; ‚Üí remove task 5
- Can include &quot;-y&quot; for auto-confirm

## Execution

```bash
task-master remove-task --id=&lt;id&gt; [-y]
```

## Pre-Removal Analysis

1. **Task Details**
   - Current status
   - Work completed
   - Time invested
   - Associated data

2. **Relationship Check**
   - Tasks that depend on this
   - Dependencies this task has
   - Subtasks that will be removed
   - Blocking implications

3. **Impact Assessment**
   ```
   Task Removal Impact
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Task: #5 &quot;Implement authentication&quot; (in-progress)
   Status: 60% complete (~8 hours work)

   Will affect:
   - 3 tasks depend on this (will be blocked)
   - Has 4 subtasks (will be deleted)
   - Part of critical path

   ‚ö†Ô∏è  This action cannot be undone
   ```

## Smart Warnings

- Warn if task is in-progress
- Show dependent tasks that will be blocked
- Highlight if part of critical path
- Note any completed work being lost

## Removal Process

1. Show comprehensive impact
2. Require confirmation (unless -y)
3. Update dependent task references
4. Remove task and subtasks
5. Clean up orphaned dependencies
6. Log removal with timestamp

## Alternative Actions

Suggest before deletion:
- Mark as cancelled instead
- Convert to documentation
- Archive task data
- Transfer work to another task

## Post-Removal

- List affected tasks
- Show broken dependencies
- Update project statistics
- Suggest dependency fixes
- Recalculate timeline

## Example Flows

```
/taskmaster:remove-task 5
‚Üí Task #5 is in-progress with 8 hours logged
‚Üí 3 other tasks depend on this
‚Üí Suggestion: Mark as cancelled instead?
Remove anyway? (y/n)

/taskmaster:remove-task 5 -y
‚Üí Removed: Task #5 and 4 subtasks
‚Üí Updated: 3 task dependencies
‚Üí Warning: Tasks #7, #8, #9 now have missing dependency
‚Üí Run /taskmaster:fix-dependencies to resolve
```

## Safety Features

- Confirmation required
- Impact preview
- Removal logging
- Suggest alternatives
- No cascade delete of dependents</file><file path="be/.claude/commands/tm/setup-models.md">Setup Models
Run interactive setup to configure AI models.

## Interactive Model Configuration

Guides you through setting up AI providers for Task Master.

## Execution

```bash
task-master models --setup
```

## Setup Process

1. **Environment Check**
   - Detect existing API keys
   - Show current configuration
   - Identify missing providers

2. **Provider Selection**
   - Choose main provider (required)
   - Select research provider (recommended)
   - Configure fallback (optional)

3. **API Key Configuration**
   - Prompt for missing keys
   - Validate key format
   - Test connectivity
   - Save configuration

## Smart Recommendations

Based on your needs:
- **For best results**: Claude + Perplexity
- **Budget conscious**: GPT-3.5 + Perplexity
- **Maximum capability**: GPT-4 + Perplexity + Claude fallback

## Configuration Storage

Keys can be stored in:
1. Environment variables (recommended)
2. `.env` file in project
3. Global `.taskmaster/config`

## Post-Setup

After configuration:
- Test each provider
- Show usage examples
- Suggest next steps
- Verify parse-prd works</file><file path="be/.claude/commands/tm/show-task.md">Show Task

Arguments: $ARGUMENTS
Show detailed task information with rich context and insights.

Arguments: $ARGUMENTS

## Enhanced Task Display

Parse arguments to determine what to show and how.

### 1. **Smart Task Selection**

Based on $ARGUMENTS:
- Number ‚Üí Show specific task with full context
- &quot;current&quot; ‚Üí Show active in-progress task(s)
- &quot;next&quot; ‚Üí Show recommended next task
- &quot;blocked&quot; ‚Üí Show all blocked tasks with reasons
- &quot;critical&quot; ‚Üí Show critical path tasks
- Multiple IDs ‚Üí Comparative view

### 2. **Contextual Information**

For each task, intelligently include:

**Core Details**
- Full task information (id, title, description, details)
- Current status with history
- Test strategy and acceptance criteria
- Priority and complexity analysis

**Relationships**
- Dependencies (what it needs)
- Dependents (what needs it)
- Parent/subtask hierarchy
- Related tasks (similar work)

**Time Intelligence**
- Created/updated timestamps
- Time in current status
- Estimated vs actual time
- Historical completion patterns

### 3. **Visual Enhancements**

```
üìã Task #45: Implement User Authentication
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Status: üü° in-progress (2 hours)
Priority: üî¥ High | Complexity: 73/100

Dependencies: ‚úÖ #41, ‚úÖ #42, ‚è≥ #43 (blocked)
Blocks: #46, #47, #52

Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% complete

Recent Activity:
- 2h ago: Status changed to in-progress
- 4h ago: Dependency #42 completed
- Yesterday: Task expanded with 3 subtasks
```

### 4. **Intelligent Insights**

Based on task analysis:
- **Risk Assessment**: Complexity vs time remaining
- **Bottleneck Analysis**: Is this blocking critical work?
- **Recommendation**: Suggested approach or concerns
- **Similar Tasks**: How others completed similar work

### 5. **Action Suggestions**

Context-aware next steps:
- If blocked ‚Üí Show how to unblock
- If complex ‚Üí Suggest expansion
- If in-progress ‚Üí Show completion checklist
- If done ‚Üí Show dependent tasks ready to start

### 6. **Multi-Task View**

When showing multiple tasks:
- Common dependencies
- Optimal completion order
- Parallel work opportunities
- Combined complexity analysis</file><file path="be/.claude/commands/tm/smart-workflow.md">Smart Workflow

Arguments: $ARGUMENTS
Execute an intelligent workflow based on current project state and recent commands.

This command analyzes:
1. Recent commands you&apos;ve run
2. Current project state
3. Time of day / day of week
4. Your working patterns

Arguments: $ARGUMENTS

## Intelligent Workflow Selection

Based on context, I&apos;ll determine the best workflow:

### Context Analysis
- Previous command executed
- Current task states
- Unfinished work from last session
- Your typical patterns

### Smart Execution

If last command was:
- `status` ‚Üí Likely starting work ‚Üí Run daily standup
- `complete` ‚Üí Task finished ‚Üí Find next task
- `list pending` ‚Üí Planning ‚Üí Suggest sprint planning
- `expand` ‚Üí Breaking down work ‚Üí Show complexity analysis
- `init` ‚Üí New project ‚Üí Show onboarding workflow

If no recent commands:
- Morning? ‚Üí Daily standup workflow
- Many pending tasks? ‚Üí Sprint planning
- Tasks blocked? ‚Üí Dependency resolution
- Friday? ‚Üí Weekly review

### Workflow Composition

I&apos;ll chain appropriate commands:
1. Analyze current state
2. Execute primary workflow
3. Suggest follow-up actions
4. Prepare environment for coding

### Learning Mode

This command learns from your patterns:
- Track command sequences
- Note time preferences
- Remember common workflows
- Adapt to your style

Example flows detected:
- Morning: standup ‚Üí next ‚Üí start
- After lunch: status ‚Üí continue task
- End of day: complete ‚Üí commit ‚Üí status</file><file path="be/.claude/commands/tm/sync-readme.md">Sync README

Arguments: $ARGUMENTS
Export tasks to README.md with professional formatting.

Arguments: $ARGUMENTS

Generate a well-formatted README with current task information.

## README Synchronization

Creates or updates README.md with beautifully formatted task information.

## Argument Parsing

Optional filters:
- &quot;pending&quot; ‚Üí Only pending tasks
- &quot;with-subtasks&quot; ‚Üí Include subtask details
- &quot;by-priority&quot; ‚Üí Group by priority
- &quot;sprint&quot; ‚Üí Current sprint only

## Execution

```bash
task-master sync-readme [--with-subtasks] [--status=&lt;status&gt;]
```

## README Generation

### 1. **Project Header**
```markdown
# Project Name

## üìã Task Progress

Last Updated: 2024-01-15 10:30 AM

### Summary
- Total Tasks: 45
- Completed: 15 (33%)
- In Progress: 5 (11%)
- Pending: 25 (56%)
```

### 2. **Task Sections**
Organized by status or priority:
- Progress indicators
- Task descriptions
- Dependencies noted
- Time estimates

### 3. **Visual Elements**
- Progress bars
- Status badges
- Priority indicators
- Completion checkmarks

## Smart Features

1. **Intelligent Grouping**
   - By feature area
   - By sprint/milestone
   - By assigned developer
   - By priority

2. **Progress Tracking**
   - Overall completion
   - Sprint velocity
   - Burndown indication
   - Time tracking

3. **Formatting Options**
   - GitHub-flavored markdown
   - Task checkboxes
   - Collapsible sections
   - Table format available

## Example Output

```markdown
## üöÄ Current Sprint

### In Progress
- [ ] üîÑ #5 **Implement user authentication** (60% complete)
  - Dependencies: API design (#3 ‚úÖ)
  - Subtasks: 4 (2 completed)
  - Est: 8h / Spent: 5h

### Pending (High Priority)
- [ ] ‚ö° #8 **Create dashboard UI**
  - Blocked by: #5
  - Complexity: High
  - Est: 12h
```

## Customization

Based on arguments:
- Include/exclude sections
- Detail level control
- Custom grouping
- Filter by criteria

## Post-Sync

After generation:
1. Show diff preview
2. Backup existing README
3. Write new content
4. Commit reminder
5. Update timestamp

## Integration

Works well with:
- Git workflows
- CI/CD pipelines
- Project documentation
- Team updates
- Client reports</file><file path="be/.claude/commands/tm/tm-main.md">Task Master Main
# Task Master Command Reference

Comprehensive command structure for Task Master integration with Claude Code.

## Command Organization

Commands are organized hierarchically to match Task Master&apos;s CLI structure while providing enhanced Claude Code integration.

## Project Setup &amp; Configuration

### `/taskmaster:init`
- `init-project` - Initialize new project (handles PRD files intelligently)
- `init-project-quick` - Quick setup with auto-confirmation (-y flag)

### `/taskmaster:models`
- `view-models` - View current AI model configuration
- `setup-models` - Interactive model configuration
- `set-main` - Set primary generation model
- `set-research` - Set research model
- `set-fallback` - Set fallback model

## Task Generation

### `/taskmaster:parse-prd`
- `parse-prd` - Generate tasks from PRD document
- `parse-prd-with-research` - Enhanced parsing with research mode

### `/taskmaster:generate`
- `generate-tasks` - Create individual task files from tasks.json

## Task Management

### `/taskmaster:list`
- `list-tasks` - Smart listing with natural language filters
- `list-tasks-with-subtasks` - Include subtasks in hierarchical view
- `list-tasks-by-status` - Filter by specific status

### `/taskmaster:set-status`
- `to-pending` - Reset task to pending
- `to-in-progress` - Start working on task
- `to-done` - Mark task complete
- `to-review` - Submit for review
- `to-deferred` - Defer task
- `to-cancelled` - Cancel task

### `/taskmaster:sync-readme`
- `sync-readme` - Export tasks to README.md with formatting

### `/taskmaster:update`
- `update-task` - Update tasks with natural language
- `update-tasks-from-id` - Update multiple tasks from a starting point
- `update-single-task` - Update specific task

### `/taskmaster:add-task`
- `add-task` - Add new task with AI assistance

### `/taskmaster:remove-task`
- `remove-task` - Remove task with confirmation

## Subtask Management

### `/taskmaster:add-subtask`
- `add-subtask` - Add new subtask to parent
- `convert-task-to-subtask` - Convert existing task to subtask

### `/taskmaster:remove-subtask`
- `remove-subtask` - Remove subtask (with optional conversion)

### `/taskmaster:clear-subtasks`
- `clear-subtasks` - Clear subtasks from specific task
- `clear-all-subtasks` - Clear all subtasks globally

## Task Analysis &amp; Breakdown

### `/taskmaster:analyze-complexity`
- `analyze-complexity` - Analyze and generate expansion recommendations

### `/taskmaster:complexity-report`
- `complexity-report` - Display complexity analysis report

### `/taskmaster:expand`
- `expand-task` - Break down specific task
- `expand-all-tasks` - Expand all eligible tasks
- `with-research` - Enhanced expansion

## Task Navigation

### `/taskmaster:next`
- `next-task` - Intelligent next task recommendation

### `/taskmaster:show`
- `show-task` - Display detailed task information

### `/taskmaster:status`
- `project-status` - Comprehensive project dashboard

## Dependency Management

### `/taskmaster:add-dependency`
- `add-dependency` - Add task dependency

### `/taskmaster:remove-dependency`
- `remove-dependency` - Remove task dependency

### `/taskmaster:validate-dependencies`
- `validate-dependencies` - Check for dependency issues

### `/taskmaster:fix-dependencies`
- `fix-dependencies` - Automatically fix dependency problems

## Workflows &amp; Automation

### `/taskmaster:workflows`
- `smart-workflow` - Context-aware intelligent workflow execution
- `command-pipeline` - Chain multiple commands together
- `auto-implement-tasks` - Advanced auto-implementation with code generation

## Utilities

### `/taskmaster:utils`
- `analyze-project` - Deep project analysis and insights

### `/taskmaster:setup`
- `install-taskmaster` - Comprehensive installation guide
- `quick-install-taskmaster` - One-line global installation

## Usage Patterns

### Natural Language
Most commands accept natural language arguments:
```
/taskmaster:add-task create user authentication system
/taskmaster:update mark all API tasks as high priority
/taskmaster:list show blocked tasks
```

### ID-Based Commands
Commands requiring IDs intelligently parse from $ARGUMENTS:
```
/taskmaster:show 45
/taskmaster:expand 23
/taskmaster:set-status/to-done 67
```

### Smart Defaults
Commands provide intelligent defaults and suggestions based on context.</file><file path="be/.claude/commands/tm/to-cancelled.md">To Cancelled

Arguments: $ARGUMENTS
Cancel a task permanently.

Arguments: $ARGUMENTS (task ID)

## Cancelling a Task

This status indicates a task is no longer needed and won&apos;t be completed.

## Valid Reasons for Cancellation

- Requirements changed
- Feature deprecated
- Duplicate of another task
- Strategic pivot
- Technical approach invalidated

## Pre-Cancellation Checks

1. Confirm no critical dependencies
2. Check for partial implementation
3. Verify cancellation rationale
4. Document lessons learned

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=cancelled
```

## Cancellation Impact

When cancelling:
1. **Dependency Updates**
   - Notify dependent tasks
   - Update project scope
   - Recalculate timelines

2. **Clean-up Actions**
   - Remove related branches
   - Archive any work done
   - Update documentation
   - Close related issues

3. **Learning Capture**
   - Document why cancelled
   - Note what was learned
   - Update estimation models
   - Prevent future duplicates

## Historical Preservation

- Keep for reference
- Tag with cancellation reason
- Link to replacement if any
- Maintain audit trail</file><file path="be/.claude/commands/tm/to-deferred.md">To Deferred

Arguments: $ARGUMENTS
Defer a task for later consideration.

Arguments: $ARGUMENTS (task ID)

## Deferring a Task

This status indicates a task is valid but not currently actionable or prioritized.

## Valid Reasons for Deferral

- Waiting for external dependencies
- Reprioritized for future sprint
- Blocked by technical limitations
- Resource constraints
- Strategic timing considerations

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=deferred
```

## Deferral Management

When deferring:
1. **Document Reason**
   - Capture why it&apos;s being deferred
   - Set reactivation criteria
   - Note any partial work completed

2. **Impact Analysis**
   - Check dependent tasks
   - Update project timeline
   - Notify affected stakeholders

3. **Future Planning**
   - Set review reminders
   - Tag for specific milestone
   - Preserve context for reactivation
   - Link to blocking issues

## Smart Tracking

- Monitor deferral duration
- Alert when criteria met
- Prevent scope creep
- Regular review cycles</file><file path="be/.claude/commands/tm/to-done.md">To Done

Arguments: $ARGUMENTS
Mark a task as completed.

Arguments: $ARGUMENTS (task ID)

## Completing a Task

This command validates task completion and updates project state intelligently.

## Pre-Completion Checks

1. Verify test strategy was followed
2. Check if all subtasks are complete
3. Validate acceptance criteria met
4. Ensure code is committed

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=done
```

## Post-Completion Actions

1. **Update Dependencies**
   - Identify newly unblocked tasks
   - Update sprint progress
   - Recalculate project timeline

2. **Documentation**
   - Generate completion summary
   - Update CLAUDE.md with learnings
   - Log implementation approach

3. **Next Steps**
   - Show newly available tasks
   - Suggest logical next task
   - Update velocity metrics

## Celebration &amp; Learning

- Show impact of completion
- Display unblocked work
- Recognize achievement
- Capture lessons learned</file><file path="be/.claude/commands/tm/to-in-progress.md">To In Progress

Arguments: $ARGUMENTS
Start working on a task by setting its status to in-progress.

Arguments: $ARGUMENTS (task ID)

## Starting Work on Task

This command does more than just change status - it prepares your environment for productive work.

## Pre-Start Checks

1. Verify dependencies are met
2. Check if another task is already in-progress
3. Ensure task details are complete
4. Validate test strategy exists

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=in-progress
```

## Environment Setup

After setting to in-progress:
1. Create/checkout appropriate git branch
2. Open relevant documentation
3. Set up test watchers if applicable
4. Display task details and acceptance criteria
5. Show similar completed tasks for reference

## Smart Suggestions

- Estimated completion time based on complexity
- Related files from similar tasks
- Potential blockers to watch for
- Recommended first steps</file><file path="be/.claude/commands/tm/to-pending.md">To Pending

Arguments: $ARGUMENTS
Set a task&apos;s status to pending.

Arguments: $ARGUMENTS (task ID)

## Setting Task to Pending

This moves a task back to the pending state, useful for:
- Resetting erroneously started tasks
- Deferring work that was prematurely begun
- Reorganizing sprint priorities

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=pending
```

## Validation

Before setting to pending:
- Warn if task is currently in-progress
- Check if this will block other tasks
- Suggest documenting why it&apos;s being reset
- Preserve any work already done

## Smart Actions

After setting to pending:
- Update sprint planning if needed
- Notify about freed resources
- Suggest priority reassessment
- Log the status change with context</file><file path="be/.claude/commands/tm/to-review.md">To Review

Arguments: $ARGUMENTS
Set a task&apos;s status to review.

Arguments: $ARGUMENTS (task ID)

## Marking Task for Review

This status indicates work is complete but needs verification before final approval.

## When to Use Review Status

- Code complete but needs peer review
- Implementation done but needs testing
- Documentation written but needs proofreading
- Design complete but needs stakeholder approval

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=review
```

## Review Preparation

When setting to review:
1. **Generate Review Checklist**
   - Link to PR/MR if applicable
   - Highlight key changes
   - Note areas needing attention
   - Include test results

2. **Documentation**
   - Update task with review notes
   - Link relevant artifacts
   - Specify reviewers if known

3. **Smart Actions**
   - Create review reminders
   - Track review duration
   - Suggest reviewers based on expertise
   - Prepare rollback plan if needed</file><file path="be/.claude/commands/tm/update-single-task.md">Update Single Task

Arguments: $ARGUMENTS
Update a single specific task with new information.

Arguments: $ARGUMENTS

Parse task ID and update details.

## Single Task Update

Precisely update one task with AI assistance to maintain consistency.

## Argument Parsing

Natural language updates:
- &quot;5: add caching requirement&quot;
- &quot;update 5 to include error handling&quot;
- &quot;task 5 needs rate limiting&quot;
- &quot;5 change priority to high&quot;

## Execution

```bash
task-master update-task --id=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Types

### 1. **Content Updates**
- Enhance description
- Add requirements
- Clarify details
- Update acceptance criteria

### 2. **Metadata Updates**
- Change priority
- Adjust time estimates
- Update complexity
- Modify dependencies

### 3. **Strategic Updates**
- Revise approach
- Change test strategy
- Update implementation notes
- Adjust subtask needs

## AI-Powered Updates

The AI:
1. **Understands Context**
   - Reads current task state
   - Identifies update intent
   - Maintains consistency
   - Preserves important info

2. **Applies Changes**
   - Updates relevant fields
   - Keeps style consistent
   - Adds without removing
   - Enhances clarity

3. **Validates Results**
   - Checks coherence
   - Verifies completeness
   - Maintains relationships
   - Suggests related updates

## Example Updates

```
/taskmaster:update/single 5: add rate limiting
‚Üí Updating Task #5: &quot;Implement API endpoints&quot;

Current: Basic CRUD endpoints
Adding: Rate limiting requirements

Updated sections:
‚úì Description: Added rate limiting mention
‚úì Details: Added specific limits (100/min)
‚úì Test Strategy: Added rate limit tests
‚úì Complexity: Increased from 5 to 6
‚úì Time Estimate: Increased by 2 hours

Suggestion: Also update task #6 (API Gateway) for consistency?
```

## Smart Features

1. **Incremental Updates**
   - Adds without overwriting
   - Preserves work history
   - Tracks what changed
   - Shows diff view

2. **Consistency Checks**
   - Related task alignment
   - Subtask compatibility
   - Dependency validity
   - Timeline impact

3. **Update History**
   - Timestamp changes
   - Track who/what updated
   - Reason for update
   - Previous versions

## Field-Specific Updates

Quick syntax for specific fields:
- &quot;5 priority:high&quot; ‚Üí Update priority only
- &quot;5 add-time:4h&quot; ‚Üí Add to time estimate
- &quot;5 status:review&quot; ‚Üí Change status
- &quot;5 depends:3,4&quot; ‚Üí Add dependencies

## Post-Update

- Show updated task
- Highlight changes
- Check related tasks
- Update suggestions
- Timeline adjustments</file><file path="be/.claude/commands/tm/update-task.md">Update Task

Arguments: $ARGUMENTS
Update tasks with intelligent field detection and bulk operations.

Arguments: $ARGUMENTS

## Intelligent Task Updates

Parse arguments to determine update intent and execute smartly.

### 1. **Natural Language Processing**

Understand update requests like:
- &quot;mark 23 as done&quot; ‚Üí Update status to done
- &quot;increase priority of 45&quot; ‚Üí Set priority to high
- &quot;add dependency on 12 to task 34&quot; ‚Üí Add dependency
- &quot;tasks 20-25 need review&quot; ‚Üí Bulk status update
- &quot;all API tasks high priority&quot; ‚Üí Pattern-based update

### 2. **Smart Field Detection**

Automatically detect what to update:
- Status keywords: done, complete, start, pause, review
- Priority changes: urgent, high, low, deprioritize
- Dependency updates: depends on, blocks, after
- Assignment: assign to, owner, responsible
- Time: estimate, spent, deadline

### 3. **Bulk Operations**

Support for multiple task updates:
```
Examples:
- &quot;complete tasks 12, 15, 18&quot;
- &quot;all pending auth tasks to in-progress&quot;
- &quot;increase priority for tasks blocking 45&quot;
- &quot;defer all documentation tasks&quot;
```

### 4. **Contextual Validation**

Before updating, check:
- Status transitions are valid
- Dependencies don&apos;t create cycles
- Priority changes make sense
- Bulk updates won&apos;t break project flow

Show preview:
```
Update Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Tasks to update: #23, #24, #25
Change: status ‚Üí in-progress
Impact: Will unblock tasks #30, #31
Warning: Task #24 has unmet dependencies
```

### 5. **Smart Suggestions**

Based on update:
- Completing task? ‚Üí Show newly unblocked tasks
- Changing priority? ‚Üí Show impact on sprint
- Adding dependency? ‚Üí Check for conflicts
- Bulk update? ‚Üí Show summary of changes

### 6. **Workflow Integration**

After updates:
- Auto-update dependent task states
- Trigger status recalculation
- Update sprint/milestone progress
- Log changes with context

Result: Flexible, intelligent task updates with safety checks.</file><file path="be/.claude/commands/tm/update-tasks-from-id.md">Update Tasks From ID

Arguments: $ARGUMENTS
Update multiple tasks starting from a specific ID.

Arguments: $ARGUMENTS

Parse starting task ID and update context.

## Bulk Task Updates

Update multiple related tasks based on new requirements or context changes.

## Argument Parsing

- &quot;from 5: add security requirements&quot;
- &quot;5 onwards: update API endpoints&quot;
- &quot;starting at 5: change to use new framework&quot;

## Execution

```bash
task-master update --from=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Process

### 1. **Task Selection**
Starting from specified ID:
- Include the task itself
- Include all dependent tasks
- Include related subtasks
- Smart boundary detection

### 2. **Context Application**
AI analyzes the update context and:
- Identifies what needs changing
- Maintains consistency
- Preserves completed work
- Updates related information

### 3. **Intelligent Updates**
- Modify descriptions appropriately
- Update test strategies
- Adjust time estimates
- Revise dependencies if needed

## Smart Features

1. **Scope Detection**
   - Find natural task groupings
   - Identify related features
   - Stop at logical boundaries
   - Avoid over-updating

2. **Consistency Maintenance**
   - Keep naming conventions
   - Preserve relationships
   - Update cross-references
   - Maintain task flow

3. **Change Preview**
   ```
   Bulk Update Preview
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Starting from: Task #5
   Tasks to update: 8 tasks + 12 subtasks

   Context: &quot;add security requirements&quot;

   Changes will include:
   - Add security sections to descriptions
   - Update test strategies for security
   - Add security-related subtasks where needed
   - Adjust time estimates (+20% average)

   Continue? (y/n)
   ```

## Example Updates

```
/taskmaster:update-tasks-from-id 5: change database to PostgreSQL
‚Üí Analyzing impact starting from task #5
‚Üí Found 6 related tasks to update
‚Üí Updates will maintain consistency
‚Üí Preview changes? (y/n)

Applied updates:
‚úì Task #5: Updated connection logic references
‚úì Task #6: Changed migration approach
‚úì Task #7: Updated query syntax notes
‚úì Task #8: Revised testing strategy
‚úì Task #9: Updated deployment steps
‚úì Task #12: Changed backup procedures
```

## Safety Features

- Preview all changes
- Selective confirmation
- Rollback capability
- Change logging
- Validation checks

## Post-Update

- Summary of changes
- Consistency verification
- Suggest review tasks
- Update timeline if needed</file><file path="be/.claude/commands/tm/validate-dependencies.md">Validate Dependencies
Validate all task dependencies for issues.

## Dependency Validation

Comprehensive check for dependency problems across the entire project.

## Execution

```bash
task-master validate-dependencies
```

## Validation Checks

1. **Circular Dependencies**
   - A depends on B, B depends on A
   - Complex circular chains
   - Self-dependencies

2. **Missing Dependencies**
   - References to non-existent tasks
   - Deleted task references
   - Invalid task IDs

3. **Logical Issues**
   - Completed tasks depending on pending
   - Cancelled tasks in dependency chains
   - Impossible sequences

4. **Complexity Warnings**
   - Over-complex dependency chains
   - Too many dependencies per task
   - Bottleneck tasks

## Smart Analysis

The validation provides:
- Visual dependency graph
- Critical path analysis
- Bottleneck identification
- Suggested optimizations

## Report Format

```
Dependency Validation Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ No circular dependencies found
‚ö†Ô∏è  2 warnings found:
   - Task #23 has 7 dependencies (consider breaking down)
   - Task #45 blocks 5 other tasks (potential bottleneck)
‚ùå 1 error found:
   - Task #67 depends on deleted task #66

Critical Path: #1 ‚Üí #5 ‚Üí #23 ‚Üí #45 ‚Üí #50 (15 days)
```

## Actionable Output

For each issue found:
- Clear description
- Impact assessment
- Suggested fix
- Command to resolve

## Next Steps

After validation:
- Run `/taskmaster:fix-dependencies` to auto-fix
- Manually adjust problematic dependencies
- Rerun to verify fixes</file><file path="be/.claude/commands/tm/view-models.md">View Models
View current AI model configuration.

## Model Configuration Display

Shows the currently configured AI providers and models for Task Master.

## Execution

```bash
task-master models
```

## Information Displayed

1. **Main Provider**
   - Model ID and name
   - API key status (configured/missing)
   - Usage: Primary task generation

2. **Research Provider**
   - Model ID and name
   - API key status
   - Usage: Enhanced research mode

3. **Fallback Provider**
   - Model ID and name
   - API key status
   - Usage: Backup when main fails

## Visual Status

```
Task Master AI Model Configuration
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Main:     ‚úÖ claude-3-5-sonnet (configured)
Research: ‚úÖ perplexity-sonar (configured)
Fallback: ‚ö†Ô∏è  Not configured (optional)

Available Models:
- claude-3-5-sonnet
- gpt-4-turbo
- gpt-3.5-turbo
- perplexity-sonar
```

## Next Actions

Based on configuration:
- If missing API keys ‚Üí Suggest setup
- If no research model ‚Üí Explain benefits
- If all configured ‚Üí Show usage tips</file><file path="be/.cursor/commands/tm/add-dependency.md">Add a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to establish dependency relationship.

## Adding Dependencies

Creates a dependency where one task must be completed before another can start.

## Argument Parsing

Parse natural language or IDs:
- &quot;make 5 depend on 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 needs 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 after 3&quot; ‚Üí task 5 depends on task 3

## Execution

```bash
task-master add-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Validation

Before adding:
1. **Verify both tasks exist**
2. **Check for circular dependencies**
3. **Ensure dependency makes logical sense**
4. **Warn if creating complex chains**

## Smart Features

- Detect if dependency already exists
- Suggest related dependencies
- Show impact on task flow
- Update task priorities if needed

## Post-Addition

After adding dependency:
1. Show updated dependency graph
2. Identify any newly blocked tasks
3. Suggest task order changes
4. Update project timeline

## Example Flows

```
/taskmaster:add-dependency 5 needs 3
‚Üí Task #5 now depends on Task #3
‚Üí Task #5 is now blocked until #3 completes
‚Üí Suggested: Also consider if #5 needs #4
```</file><file path="be/.cursor/commands/tm/add-subtask.md">Add a subtask to a parent task.

Arguments: $ARGUMENTS

Parse arguments to create a new subtask or convert existing task.

## Adding Subtasks

Creates subtasks to break down complex parent tasks into manageable pieces.

## Argument Parsing

Flexible natural language:
- &quot;add subtask to 5: implement login form&quot;
- &quot;break down 5 with: setup, implement, test&quot;
- &quot;subtask for 5: handle edge cases&quot;
- &quot;5: validate user input&quot; ‚Üí adds subtask to task 5

## Execution Modes

### 1. Create New Subtask
```bash
task-master add-subtask --parent=&lt;id&gt; --title=&quot;&lt;title&gt;&quot; --description=&quot;&lt;desc&gt;&quot;
```

### 2. Convert Existing Task
```bash
task-master add-subtask --parent=&lt;id&gt; --task-id=&lt;existing-id&gt;
```

## Smart Features

1. **Automatic Subtask Generation**
   - If title contains &quot;and&quot; or commas, create multiple
   - Suggest common subtask patterns
   - Inherit parent&apos;s context

2. **Intelligent Defaults**
   - Priority based on parent
   - Appropriate time estimates
   - Logical dependencies between subtasks

3. **Validation**
   - Check parent task complexity
   - Warn if too many subtasks
   - Ensure subtask makes sense

## Creation Process

1. Parse parent task context
2. Generate subtask with ID like &quot;5.1&quot;
3. Set appropriate defaults
4. Link to parent task
5. Update parent&apos;s time estimate

## Example Flows

```
/taskmaster:add-subtask to 5: implement user authentication
‚Üí Created subtask #5.1: &quot;implement user authentication&quot;
‚Üí Parent task #5 now has 1 subtask
‚Üí Suggested next subtasks: tests, documentation

/taskmaster:add-subtask 5: setup, implement, test
‚Üí Created 3 subtasks:
  #5.1: setup
  #5.2: implement
  #5.3: test
```

## Post-Creation

- Show updated task hierarchy
- Suggest logical next subtasks
- Update complexity estimates
- Recommend subtask order</file><file path="be/.cursor/commands/tm/add-task.md">Add new tasks with intelligent parsing and context awareness.

Arguments: $ARGUMENTS

## Smart Task Addition

Parse natural language to create well-structured tasks.

### 1. **Input Understanding**

I&apos;ll intelligently parse your request:
- Natural language ‚Üí Structured task
- Detect priority from keywords (urgent, ASAP, important)
- Infer dependencies from context
- Suggest complexity based on description
- Determine task type (feature, bug, refactor, test, docs)

### 2. **Smart Parsing Examples**

**&quot;Add urgent task to fix login bug&quot;**
‚Üí Title: Fix login bug
‚Üí Priority: high
‚Üí Type: bug
‚Üí Suggested complexity: medium

**&quot;Create task for API documentation after task 23 is done&quot;**
‚Üí Title: API documentation
‚Üí Dependencies: [23]
‚Üí Type: documentation
‚Üí Priority: medium

**&quot;Need to refactor auth module - depends on 12 and 15, high complexity&quot;**
‚Üí Title: Refactor auth module
‚Üí Dependencies: [12, 15]
‚Üí Complexity: high
‚Üí Type: refactor

### 3. **Context Enhancement**

Based on current project state:
- Suggest related existing tasks
- Warn about potential conflicts
- Recommend dependencies
- Propose subtasks if complex

### 4. **Interactive Refinement**

```yaml
Task Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Title: [Extracted title]
Priority: [Inferred priority]
Dependencies: [Detected dependencies]
Complexity: [Estimated complexity]

Suggestions:
- Similar task #34 exists, consider as dependency?
- This seems complex, break into subtasks?
- Tasks #45-47 work on same module
```

### 5. **Validation &amp; Creation**

Before creating:
- Validate dependencies exist
- Check for duplicates
- Ensure logical ordering
- Verify task completeness

### 6. **Smart Defaults**

Intelligent defaults based on:
- Task type patterns
- Team conventions
- Historical data
- Current sprint/phase

Result: High-quality tasks from minimal input.</file><file path="be/.cursor/commands/tm/analyze-complexity.md">Analyze task complexity and generate expansion recommendations.

Arguments: $ARGUMENTS

Perform deep analysis of task complexity across the project.

## Complexity Analysis

Uses AI to analyze tasks and recommend which ones need breakdown.

## Execution Options

```bash
task-master analyze-complexity [--research] [--threshold=5]
```

## Analysis Parameters

- `--research` ‚Üí Use research AI for deeper analysis
- `--threshold=5` ‚Üí Only flag tasks above complexity 5
- Default: Analyze all pending tasks

## Analysis Process

### 1. **Task Evaluation**
For each task, AI evaluates:
- Technical complexity
- Time requirements
- Dependency complexity
- Risk factors
- Knowledge requirements

### 2. **Complexity Scoring**
Assigns score 1-10 based on:
- Implementation difficulty
- Integration challenges
- Testing requirements
- Unknown factors
- Technical debt risk

### 3. **Recommendations**
For complex tasks:
- Suggest expansion approach
- Recommend subtask breakdown
- Identify risk areas
- Propose mitigation strategies

## Smart Analysis Features

1. **Pattern Recognition**
   - Similar task comparisons
   - Historical complexity accuracy
   - Team velocity consideration
   - Technology stack factors

2. **Contextual Factors**
   - Team expertise
   - Available resources
   - Timeline constraints
   - Business criticality

3. **Risk Assessment**
   - Technical risks
   - Timeline risks
   - Dependency risks
   - Knowledge gaps

## Output Format

```
Task Complexity Analysis Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

High Complexity Tasks (&gt;7):
üìç #5 &quot;Implement real-time sync&quot; - Score: 9/10
   Factors: WebSocket complexity, state management, conflict resolution
   Recommendation: Expand into 5-7 subtasks
   Risks: Performance, data consistency

üìç #12 &quot;Migrate database schema&quot; - Score: 8/10
   Factors: Data migration, zero downtime, rollback strategy
   Recommendation: Expand into 4-5 subtasks
   Risks: Data loss, downtime

Medium Complexity Tasks (5-7):
üìç #23 &quot;Add export functionality&quot; - Score: 6/10
   Consider expansion if timeline tight

Low Complexity Tasks (&lt;5):
‚úÖ 15 tasks - No expansion needed

Summary:
- Expand immediately: 2 tasks
- Consider expanding: 5 tasks
- Keep as-is: 15 tasks
```

## Actionable Output

For each high-complexity task:
1. Complexity score with reasoning
2. Specific expansion suggestions
3. Risk mitigation approaches
4. Recommended subtask structure

## Integration

Results are:
- Saved to `.taskmaster/reports/complexity-analysis.md`
- Used by expand command
- Inform sprint planning
- Guide resource allocation

## Next Steps

After analysis:
```
/taskmaster:expand 5    # Expand specific task
/taskmaster:expand-all  # Expand all recommended
/taskmaster:complexity-report  # View detailed report
```</file><file path="be/.cursor/commands/tm/analyze-project.md">Advanced project analysis with actionable insights and recommendations.

Arguments: $ARGUMENTS

## Comprehensive Project Analysis

Multi-dimensional analysis based on requested focus area.

### 1. **Analysis Modes**

Based on $ARGUMENTS:
- &quot;velocity&quot; ‚Üí Sprint velocity and trends
- &quot;quality&quot; ‚Üí Code quality metrics
- &quot;risk&quot; ‚Üí Risk assessment and mitigation
- &quot;dependencies&quot; ‚Üí Dependency graph analysis
- &quot;team&quot; ‚Üí Workload and skill distribution
- &quot;architecture&quot; ‚Üí System design coherence
- Default ‚Üí Full spectrum analysis

### 2. **Velocity Analytics**

```
üìä Velocity Analysis
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Current Sprint: 24 points/week ‚ÜóÔ∏è +20%
Rolling Average: 20 points/week
Efficiency: 85% (17/20 tasks on time)

Bottlenecks Detected:
- Code review delays (avg 4h wait)
- Test environment availability
- Dependency on external team

Recommendations:
1. Implement parallel review process
2. Add staging environment
3. Mock external dependencies
```

### 3. **Risk Assessment**

**Technical Risks**
- High complexity tasks without backup assignee
- Single points of failure in architecture
- Insufficient test coverage in critical paths
- Technical debt accumulation rate

**Project Risks**
- Critical path dependencies
- Resource availability gaps
- Deadline feasibility analysis
- Scope creep indicators

### 4. **Dependency Intelligence**

Visual dependency analysis:
```
Critical Path:
#12 ‚Üí #15 ‚Üí #23 ‚Üí #45 ‚Üí #50 (20 days)
         ‚Üò #24 ‚Üí #46 ‚Üó

Optimization: Parallelize #15 and #24
Time Saved: 3 days
```

### 5. **Quality Metrics**

**Code Quality**
- Test coverage trends
- Complexity scores
- Technical debt ratio
- Review feedback patterns

**Process Quality**
- Rework frequency
- Bug introduction rate
- Time to resolution
- Knowledge distribution

### 6. **Predictive Insights**

Based on patterns:
- Completion probability by deadline
- Resource needs projection
- Risk materialization likelihood
- Suggested interventions

### 7. **Executive Dashboard**

High-level summary with:
- Health score (0-100)
- Top 3 risks
- Top 3 opportunities
- Recommended actions
- Success probability

Result: Data-driven decisions with clear action paths.</file><file path="be/.cursor/commands/tm/auto-implement-tasks.md">Enhanced auto-implementation with intelligent code generation and testing.

Arguments: $ARGUMENTS

## Intelligent Auto-Implementation

Advanced implementation with context awareness and quality checks.

### 1. **Pre-Implementation Analysis**

Before starting:
- Analyze task complexity and requirements
- Check codebase patterns and conventions
- Identify similar completed tasks
- Assess test coverage needs
- Detect potential risks

### 2. **Smart Implementation Strategy**

Based on task type and context:

**Feature Tasks**
1. Research existing patterns
2. Design component architecture
3. Implement with tests
4. Integrate with system
5. Update documentation

**Bug Fix Tasks**
1. Reproduce issue
2. Identify root cause
3. Implement minimal fix
4. Add regression tests
5. Verify side effects

**Refactoring Tasks**
1. Analyze current structure
2. Plan incremental changes
3. Maintain test coverage
4. Refactor step-by-step
5. Verify behavior unchanged

### 3. **Code Intelligence**

**Pattern Recognition**
- Learn from existing code
- Follow team conventions
- Use preferred libraries
- Match style guidelines

**Test-Driven Approach**
- Write tests first when possible
- Ensure comprehensive coverage
- Include edge cases
- Performance considerations

### 4. **Progressive Implementation**

Step-by-step with validation:
```
Step 1/5: Setting up component structure ‚úì
Step 2/5: Implementing core logic ‚úì
Step 3/5: Adding error handling ‚ö° (in progress)
Step 4/5: Writing tests ‚è≥
Step 5/5: Integration testing ‚è≥

Current: Adding try-catch blocks and validation...
```

### 5. **Quality Assurance**

Automated checks:
- Linting and formatting
- Test execution
- Type checking
- Dependency validation
- Performance analysis

### 6. **Smart Recovery**

If issues arise:
- Diagnostic analysis
- Suggestion generation
- Fallback strategies
- Manual intervention points
- Learning from failures

### 7. **Post-Implementation**

After completion:
- Generate PR description
- Update documentation
- Log lessons learned
- Suggest follow-up tasks
- Update task relationships

Result: High-quality, production-ready implementations.</file><file path="be/.cursor/commands/tm/command-pipeline.md">Execute a pipeline of commands based on a specification.

Arguments: $ARGUMENTS

## Command Pipeline Execution

Parse pipeline specification from arguments. Supported formats:

### Simple Pipeline
`init ‚Üí expand-all ‚Üí sprint-plan`

### Conditional Pipeline
`status ‚Üí if:pending&gt;10 ‚Üí sprint-plan ‚Üí else ‚Üí next`

### Iterative Pipeline
`for:pending-tasks ‚Üí expand ‚Üí complexity-check`

### Smart Pipeline Patterns

**1. Project Setup Pipeline**
```
init [prd] ‚Üí
expand-all ‚Üí
complexity-report ‚Üí
sprint-plan ‚Üí
show first-sprint
```

**2. Daily Work Pipeline**
```
standup ‚Üí
if:in-progress ‚Üí continue ‚Üí
else ‚Üí next ‚Üí start
```

**3. Task Completion Pipeline**
```
complete [id] ‚Üí
git-commit ‚Üí
if:blocked-tasks-freed ‚Üí show-freed ‚Üí
next
```

**4. Quality Check Pipeline**
```
list in-progress ‚Üí
for:each ‚Üí check-idle-time ‚Üí
if:idle&gt;1day ‚Üí prompt-update
```

### Pipeline Features

**Variables**
- Store results: `status ‚Üí $count=pending-count`
- Use in conditions: `if:$count&gt;10`
- Pass between commands: `expand $high-priority-tasks`

**Error Handling**
- On failure: `try:complete ‚Üí catch:show-blockers`
- Skip on error: `optional:test-run`
- Retry logic: `retry:3:commit`

**Parallel Execution**
- Parallel branches: `[analyze | test | lint]`
- Join results: `parallel ‚Üí join:report`

### Execution Flow

1. Parse pipeline specification
2. Validate command sequence
3. Execute with state passing
4. Handle conditions and loops
5. Aggregate results
6. Show summary

This enables complex workflows like:
`parse-prd ‚Üí expand-all ‚Üí filter:complex&gt;70 ‚Üí assign:senior ‚Üí sprint-plan:weighted`</file><file path="be/.cursor/commands/tm/complexity-report.md">Display the task complexity analysis report.

Arguments: $ARGUMENTS

View the detailed complexity analysis generated by analyze-complexity command.

## Viewing Complexity Report

Shows comprehensive task complexity analysis with actionable insights.

## Execution

```bash
task-master complexity-report [--file=&lt;path&gt;]
```

## Report Location

Default: `.taskmaster/reports/complexity-analysis.md`
Custom: Specify with --file parameter

## Report Contents

### 1. **Executive Summary**
```
Complexity Analysis Summary
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Analysis Date: 2024-01-15
Tasks Analyzed: 32
High Complexity: 5 (16%)
Medium Complexity: 12 (37%)
Low Complexity: 15 (47%)

Critical Findings:
- 5 tasks need immediate expansion
- 3 tasks have high technical risk
- 2 tasks block critical path
```

### 2. **Detailed Task Analysis**
For each complex task:
- Complexity score breakdown
- Contributing factors
- Specific risks identified
- Expansion recommendations
- Similar completed tasks

### 3. **Risk Matrix**
Visual representation:
```
Risk vs Complexity Matrix
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
High Risk  | #5(9) #12(8) | #23(6)
Med Risk   | #34(7)       | #45(5) #67(5)
Low Risk   | #78(8)       | [15 tasks]
           | High Complex  | Med Complex
```

### 4. **Recommendations**

**Immediate Actions:**
1. Expand task #5 - Critical path + high complexity
2. Expand task #12 - High risk + dependencies
3. Review task #34 - Consider splitting

**Sprint Planning:**
- Don&apos;t schedule multiple high-complexity tasks together
- Ensure expertise available for complex tasks
- Build in buffer time for unknowns

## Interactive Features

When viewing report:
1. **Quick Actions**
   - Press &apos;e&apos; to expand a task
   - Press &apos;d&apos; for task details
   - Press &apos;r&apos; to refresh analysis

2. **Filtering**
   - View by complexity level
   - Filter by risk factors
   - Show only actionable items

3. **Export Options**
   - Markdown format
   - CSV for spreadsheets
   - JSON for tools

## Report Intelligence

- Compares with historical data
- Shows complexity trends
- Identifies patterns
- Suggests process improvements

## Integration

Use report for:
- Sprint planning sessions
- Resource allocation
- Risk assessment
- Team discussions
- Client updates

## Example Usage

```
/taskmaster:complexity-report
‚Üí Opens latest analysis

/taskmaster:complexity-report --file=archived/2024-01-01.md
‚Üí View historical analysis

After viewing:
/taskmaster:expand 5
‚Üí Expand high-complexity task
```</file><file path="be/.cursor/commands/tm/convert-task-to-subtask.md">Convert an existing task into a subtask.

Arguments: $ARGUMENTS

Parse parent ID and task ID to convert.

## Task Conversion

Converts an existing standalone task into a subtask of another task.

## Argument Parsing

- &quot;move task 8 under 5&quot;
- &quot;make 8 a subtask of 5&quot;
- &quot;nest 8 in 5&quot;
- &quot;5 8&quot; ‚Üí make task 8 a subtask of task 5

## Execution

```bash
task-master add-subtask --parent=&lt;parent-id&gt; --task-id=&lt;task-to-convert&gt;
```

## Pre-Conversion Checks

1. **Validation**
   - Both tasks exist and are valid
   - No circular parent relationships
   - Task isn&apos;t already a subtask
   - Logical hierarchy makes sense

2. **Impact Analysis**
   - Dependencies that will be affected
   - Tasks that depend on converting task
   - Priority alignment needed
   - Status compatibility

## Conversion Process

1. Change task ID from &quot;8&quot; to &quot;5.1&quot; (next available)
2. Update all dependency references
3. Inherit parent&apos;s context where appropriate
4. Adjust priorities if needed
5. Update time estimates

## Smart Features

- Preserve task history
- Maintain dependencies
- Update all references
- Create conversion log

## Example

```
/taskmaster:add-subtask/from-task 5 8
‚Üí Converting: Task #8 becomes subtask #5.1
‚Üí Updated: 3 dependency references
‚Üí Parent task #5 now has 1 subtask
‚Üí Note: Subtask inherits parent&apos;s priority

Before: #8 &quot;Implement validation&quot; (standalone)
After:  #5.1 &quot;Implement validation&quot; (subtask of #5)
```

## Post-Conversion

- Show new task hierarchy
- List updated dependencies
- Verify project integrity
- Suggest related conversions</file><file path="be/.cursor/commands/tm/expand-all-tasks.md">Expand all pending tasks that need subtasks.

## Bulk Task Expansion

Intelligently expands all tasks that would benefit from breakdown.

## Execution

```bash
task-master expand --all
```

## Smart Selection

Only expands tasks that:
- Are marked as pending
- Have high complexity (&gt;5)
- Lack existing subtasks
- Would benefit from breakdown

## Expansion Process

1. **Analysis Phase**
   - Identify expansion candidates
   - Group related tasks
   - Plan expansion strategy

2. **Batch Processing**
   - Expand tasks in logical order
   - Maintain consistency
   - Preserve relationships
   - Optimize for parallelism

3. **Quality Control**
   - Ensure subtask quality
   - Avoid over-decomposition
   - Maintain task coherence
   - Update dependencies

## Options

- Add `force` to expand all regardless of complexity
- Add `research` for enhanced AI analysis

## Results

After bulk expansion:
- Summary of tasks expanded
- New subtask count
- Updated complexity metrics
- Suggested task order</file><file path="be/.cursor/commands/tm/expand-task.md">Break down a complex task into subtasks.

Arguments: $ARGUMENTS (task ID)

## Intelligent Task Expansion

Analyzes a task and creates detailed subtasks for better manageability.

## Execution

```bash
task-master expand --id=$ARGUMENTS
```

## Expansion Process

1. **Task Analysis**
   - Review task complexity
   - Identify components
   - Detect technical challenges
   - Estimate time requirements

2. **Subtask Generation**
   - Create 3-7 subtasks typically
   - Each subtask 1-4 hours
   - Logical implementation order
   - Clear acceptance criteria

3. **Smart Breakdown**
   - Setup/configuration tasks
   - Core implementation
   - Testing components
   - Integration steps
   - Documentation updates

## Enhanced Features

Based on task type:
- **Feature**: Setup ‚Üí Implement ‚Üí Test ‚Üí Integrate
- **Bug Fix**: Reproduce ‚Üí Diagnose ‚Üí Fix ‚Üí Verify
- **Refactor**: Analyze ‚Üí Plan ‚Üí Refactor ‚Üí Validate

## Post-Expansion

After expansion:
1. Show subtask hierarchy
2. Update time estimates
3. Suggest implementation order
4. Highlight critical path</file><file path="be/.cursor/commands/tm/fix-dependencies.md">Automatically fix dependency issues found during validation.

## Automatic Dependency Repair

Intelligently fixes common dependency problems while preserving project logic.

## Execution

```bash
task-master fix-dependencies
```

## What Gets Fixed

### 1. **Auto-Fixable Issues**
- Remove references to deleted tasks
- Break simple circular dependencies
- Remove self-dependencies
- Clean up duplicate dependencies

### 2. **Smart Resolutions**
- Reorder dependencies to maintain logic
- Suggest task merging for over-dependent tasks
- Flatten unnecessary dependency chains
- Remove redundant transitive dependencies

### 3. **Manual Review Required**
- Complex circular dependencies
- Critical path modifications
- Business logic dependencies
- High-impact changes

## Fix Process

1. **Analysis Phase**
   - Run validation check
   - Categorize issues by type
   - Determine fix strategy

2. **Execution Phase**
   - Apply automatic fixes
   - Log all changes made
   - Preserve task relationships

3. **Verification Phase**
   - Re-validate after fixes
   - Show before/after comparison
   - Highlight manual fixes needed

## Smart Features

- Preserves intended task flow
- Minimal disruption approach
- Creates fix history/log
- Suggests manual interventions

## Output Example

```
Dependency Auto-Fix Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Fixed Automatically:
‚úÖ Removed 2 references to deleted tasks
‚úÖ Resolved 1 self-dependency
‚úÖ Cleaned 3 redundant dependencies

Manual Review Needed:
‚ö†Ô∏è Complex circular dependency: #12 ‚Üí #15 ‚Üí #18 ‚Üí #12
  Suggestion: Make #15 not depend on #12
‚ö†Ô∏è Task #45 has 8 dependencies
  Suggestion: Break into subtasks

Run &apos;/taskmaster:validate-dependencies&apos; to verify fixes
```

## Safety

- Preview mode available
- Rollback capability
- Change logging
- No data loss</file><file path="be/.cursor/commands/tm/help.md">Show help for Task Master AI commands.

Arguments: $ARGUMENTS

Display help for Task Master commands and available options.

## Task Master AI Command Help

### Quick Navigation

Type `/taskmaster:` and use tab completion to explore all commands.

### Command Categories

#### üöÄ Setup &amp; Installation
- `/taskmaster:install-taskmaster` - Comprehensive installation guide
- `/taskmaster:quick-install-taskmaster` - One-line global install

#### üìã Project Setup
- `/taskmaster:init-project` - Initialize new project
- `/taskmaster:init-project-quick` - Quick setup with auto-confirm
- `/taskmaster:view-models` - View AI configuration
- `/taskmaster:setup-models` - Configure AI providers

#### üéØ Task Generation
- `/taskmaster:parse-prd` - Generate tasks from PRD
- `/taskmaster:parse-prd-with-research` - Enhanced parsing
- `/taskmaster:generate-tasks` - Create task files

#### üìù Task Management
- `/taskmaster:list-tasks` - List all tasks
- `/taskmaster:list-tasks-by-status` - List tasks filtered by status
- `/taskmaster:list-tasks-with-subtasks` - List tasks with subtasks
- `/taskmaster:show-task` - Display task details
- `/taskmaster:add-task` - Create new task
- `/taskmaster:update-task` - Update single task
- `/taskmaster:update-tasks-from-id` - Update multiple tasks
- `/taskmaster:next-task` - Get next task recommendation

#### üîÑ Status Management
- `/taskmaster:to-pending` - Set task to pending
- `/taskmaster:to-in-progress` - Set task to in-progress
- `/taskmaster:to-done` - Set task to done
- `/taskmaster:to-review` - Set task to review
- `/taskmaster:to-deferred` - Set task to deferred
- `/taskmaster:to-cancelled` - Set task to cancelled

#### üîç Analysis &amp; Breakdown
- `/taskmaster:analyze-complexity` - Analyze task complexity
- `/taskmaster:complexity-report` - View complexity report
- `/taskmaster:expand-task` - Break down complex task
- `/taskmaster:expand-all-tasks` - Expand all eligible tasks

#### üîó Dependencies
- `/taskmaster:add-dependency` - Add task dependency
- `/taskmaster:remove-dependency` - Remove dependency
- `/taskmaster:validate-dependencies` - Check for issues
- `/taskmaster:fix-dependencies` - Auto-fix dependency issues

#### üì¶ Subtasks
- `/taskmaster:add-subtask` - Add subtask to task
- `/taskmaster:convert-task-to-subtask` - Convert task to subtask
- `/taskmaster:remove-subtask` - Remove subtask
- `/taskmaster:remove-subtasks` - Clear specific task subtasks
- `/taskmaster:remove-all-subtasks` - Clear all subtasks

#### üóëÔ∏è Task Removal
- `/taskmaster:remove-task` - Remove task permanently

#### ü§ñ Workflows
- `/taskmaster:smart-workflow` - Intelligent workflows
- `/taskmaster:command-pipeline` - Command chaining
- `/taskmaster:auto-implement-tasks` - Auto-implementation

#### üìä Utilities
- `/taskmaster:analyze-project` - Project analysis
- `/taskmaster:project-status` - Project dashboard
- `/taskmaster:sync-readme` - Sync README with tasks
- `/taskmaster:learn` - Interactive learning
- `/taskmaster:tm-main` - Main Task Master interface

### Quick Start Examples

```
/taskmaster:list-tasks
/taskmaster:show-task 1.2
/taskmaster:add-task
/taskmaster:next-task
```

### Getting Started

1. Install: `/taskmaster:quick-install-taskmaster`
2. Initialize: `/taskmaster:init-project-quick`
3. Learn: `/taskmaster:learn`
4. Work: `/taskmaster:smart-workflow`

For detailed command info, run the specific command with `--help` or check command documentation.</file><file path="be/.cursor/commands/tm/init-project-quick.md">Quick initialization with auto-confirmation.

Arguments: $ARGUMENTS

Initialize a Task Master project without prompts, accepting all defaults.

## Quick Setup

```bash
task-master init -y
```

## What It Does

1. Creates `.taskmaster/` directory structure
2. Initializes empty `tasks.json`
3. Sets up default configuration
4. Uses directory name as project name
5. Skips all confirmation prompts

## Smart Defaults

- Project name: Current directory name
- Description: &quot;Task Master Project&quot;
- Model config: Existing environment vars
- Task structure: Standard format

## Next Steps

After quick init:
1. Configure AI models if needed:
   ```
   /taskmaster:models/setup
   ```

2. Parse PRD if available:
   ```
   /taskmaster:parse-prd &lt;file&gt;
   ```

3. Or create first task:
   ```
   /taskmaster:add-task create initial setup
   ```

Perfect for rapid project setup!</file><file path="be/.cursor/commands/tm/init-project.md">Initialize a new Task Master project.

Arguments: $ARGUMENTS

Parse arguments to determine initialization preferences.

## Initialization Process

1. **Parse Arguments**
   - PRD file path (if provided)
   - Project name
   - Auto-confirm flag (-y)

2. **Project Setup**
   ```bash
   task-master init
   ```

3. **Smart Initialization**
   - Detect existing project files
   - Suggest project name from directory
   - Check for git repository
   - Verify AI provider configuration

## Configuration Options

Based on arguments:
- `quick` / `-y` ‚Üí Skip confirmations
- `&lt;file.md&gt;` ‚Üí Use as PRD after init
- `--name=&lt;name&gt;` ‚Üí Set project name
- `--description=&lt;desc&gt;` ‚Üí Set description

## Post-Initialization

After successful init:
1. Show project structure created
2. Verify AI models configured
3. Suggest next steps:
   - Parse PRD if available
   - Configure AI providers
   - Set up git hooks
   - Create first tasks

## Integration

If PRD file provided:
```
/taskmaster:init my-prd.md
‚Üí Automatically runs parse-prd after init
```</file><file path="be/.cursor/commands/tm/install-taskmaster.md">Check if Task Master is installed and install it if needed.

This command helps you get Task Master set up globally on your system.

## Detection and Installation Process

1. **Check Current Installation**
   ```bash
   # Check if task-master command exists
   which task-master || echo &quot;Task Master not found&quot;

   # Check npm global packages
   npm list -g task-master-ai
   ```

2. **System Requirements Check**
   ```bash
   # Verify Node.js is installed
   node --version

   # Verify npm is installed
   npm --version

   # Check Node version (need 16+)
   ```

3. **Install Task Master Globally**
   If not installed, run:
   ```bash
   npm install -g task-master-ai
   ```

4. **Verify Installation**
   ```bash
   # Check version
   task-master --version

   # Verify command is available
   which task-master
   ```

5. **Initial Setup**
   ```bash
   # Initialize in current directory
   task-master init
   ```

6. **Configure AI Provider**
   Ensure you have at least one AI provider API key set:
   ```bash
   # Check current configuration
   task-master models --status

   # If no API keys found, guide setup
   echo &quot;You&apos;ll need at least one API key:&quot;
   echo &quot;- ANTHROPIC_API_KEY for Claude&quot;
   echo &quot;- OPENAI_API_KEY for GPT models&quot;
   echo &quot;- PERPLEXITY_API_KEY for research&quot;
   echo &quot;&quot;
   echo &quot;Set them in your shell profile or .env file&quot;
   ```

7. **Quick Test**
   ```bash
   # Create a test PRD
   echo &quot;Build a simple hello world API&quot; &gt; test-prd.txt

   # Try parsing it
   task-master parse-prd test-prd.txt -n 3
   ```

## Troubleshooting

If installation fails:

**Permission Errors:**
```bash
# Try with sudo (macOS/Linux)
sudo npm install -g task-master-ai

# Or fix npm permissions
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH
```

**Network Issues:**
```bash
# Use different registry
npm install -g task-master-ai --registry https://registry.npmjs.org/
```

**Node Version Issues:**
```bash
# Install Node 20+ via nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20
```

## Success Confirmation

Once installed, you should see:
```
‚úÖ Task Master installed
‚úÖ Command &apos;task-master&apos; available globally
‚úÖ AI provider configured
‚úÖ Ready to use slash commands!

Try: /taskmaster:init your-prd.md
```

## Next Steps

After installation:
1. Run `/taskmaster:status` to verify setup
2. Configure AI providers with `/taskmaster:setup-models`
3. Start using Task Master commands!</file><file path="be/.cursor/commands/tm/learn.md">Learn about Task Master capabilities through interactive exploration.

Arguments: $ARGUMENTS

## Interactive Task Master Learning

Based on your input, I&apos;ll help you discover capabilities:

### 1. **What are you trying to do?**

If $ARGUMENTS contains:
- &quot;start&quot; / &quot;begin&quot; ‚Üí Show project initialization workflows
- &quot;manage&quot; / &quot;organize&quot; ‚Üí Show task management commands
- &quot;automate&quot; / &quot;auto&quot; ‚Üí Show automation workflows
- &quot;analyze&quot; / &quot;report&quot; ‚Üí Show analysis tools
- &quot;fix&quot; / &quot;problem&quot; ‚Üí Show troubleshooting commands
- &quot;fast&quot; / &quot;quick&quot; ‚Üí Show efficiency shortcuts

### 2. **Intelligent Suggestions**

Based on your project state:

**No tasks yet?**
```
You&apos;ll want to start with:
1. /project:task-master:init &lt;prd-file&gt;
   ‚Üí Creates tasks from requirements

2. /project:task-master:parse-prd &lt;file&gt;
   ‚Üí Alternative task generation

Try: /project:task-master:init demo-prd.md
```

**Have tasks?**
Let me analyze what you might need...
- Many pending tasks? ‚Üí Learn sprint planning
- Complex tasks? ‚Üí Learn task expansion
- Daily work? ‚Üí Learn workflow automation

### 3. **Command Discovery**

**By Category:**
- üìã Task Management: list, show, add, update, complete
- üîÑ Workflows: auto-implement, sprint-plan, daily-standup
- üõ†Ô∏è Utilities: check-health, complexity-report, sync-memory
- üîç Analysis: validate-deps, show dependencies

**By Scenario:**
- &quot;I want to see what to work on&quot; ‚Üí `/project:task-master:next`
- &quot;I need to break this down&quot; ‚Üí `/project:task-master:expand &lt;id&gt;`
- &quot;Show me everything&quot; ‚Üí `/project:task-master:status`
- &quot;Just do it for me&quot; ‚Üí `/project:workflows:auto-implement`

### 4. **Power User Patterns**

**Command Chaining:**
```
/project:task-master:next
/project:task-master:start &lt;id&gt;
/project:workflows:auto-implement
```

**Smart Filters:**
```
/project:task-master:list pending high
/project:task-master:list blocked
/project:task-master:list 1-5 tree
```

**Automation:**
```
/project:workflows:pipeline init ‚Üí expand-all ‚Üí sprint-plan
```

### 5. **Learning Path**

Based on your experience level:

**Beginner Path:**
1. init ‚Üí Create project
2. status ‚Üí Understand state
3. next ‚Üí Find work
4. complete ‚Üí Finish task

**Intermediate Path:**
1. expand ‚Üí Break down complex tasks
2. sprint-plan ‚Üí Organize work
3. complexity-report ‚Üí Understand difficulty
4. validate-deps ‚Üí Ensure consistency

**Advanced Path:**
1. pipeline ‚Üí Chain operations
2. smart-flow ‚Üí Context-aware automation
3. Custom commands ‚Üí Extend the system

### 6. **Try This Now**

Based on what you asked about, try:
[Specific command suggestion based on $ARGUMENTS]

Want to learn more about a specific command?
Type: /project:help &lt;command-name&gt;</file><file path="be/.cursor/commands/tm/list-tasks-by-status.md">List tasks filtered by a specific status.

Arguments: $ARGUMENTS

Parse the status from arguments and list only tasks matching that status.

## Status Options
- `pending` - Not yet started
- `in-progress` - Currently being worked on
- `done` - Completed
- `review` - Awaiting review
- `deferred` - Postponed
- `cancelled` - Cancelled

## Execution

Based on $ARGUMENTS, run:
```bash
task-master list --status=$ARGUMENTS
```

## Enhanced Display

For the filtered results:
- Group by priority within the status
- Show time in current status
- Highlight tasks approaching deadlines
- Display blockers and dependencies
- Suggest next actions for each status group

## Intelligent Insights

Based on the status filter:
- **Pending**: Show recommended start order
- **In-Progress**: Display idle time warnings
- **Done**: Show newly unblocked tasks
- **Review**: Indicate review duration
- **Deferred**: Show reactivation criteria
- **Cancelled**: Display impact analysis</file><file path="be/.cursor/commands/tm/list-tasks-with-subtasks.md">List all tasks including their subtasks in a hierarchical view.

This command shows all tasks with their nested subtasks, providing a complete project overview.

## Execution

Run the Task Master list command with subtasks flag:
```bash
task-master list --with-subtasks
```

## Enhanced Display

I&apos;ll organize the output to show:
- Parent tasks with clear indicators
- Nested subtasks with proper indentation
- Status badges for quick scanning
- Dependencies and blockers highlighted
- Progress indicators for tasks with subtasks

## Smart Filtering

Based on the task hierarchy:
- Show completion percentage for parent tasks
- Highlight blocked subtask chains
- Group by functional areas
- Indicate critical path items

This gives you a complete tree view of your project structure.</file><file path="be/.cursor/commands/tm/list-tasks.md">List tasks with intelligent argument parsing.

Parse arguments to determine filters and display options:
- Status: pending, in-progress, done, review, deferred, cancelled
- Priority: high, medium, low (or priority:high)
- Special: subtasks, tree, dependencies, blocked
- IDs: Direct numbers (e.g., &quot;1,3,5&quot; or &quot;1-5&quot;)
- Complex: &quot;pending high&quot; = pending AND high priority

Arguments: $ARGUMENTS

Let me parse your request intelligently:

1. **Detect Filter Intent**
   - If arguments contain status keywords ‚Üí filter by status
   - If arguments contain priority ‚Üí filter by priority
   - If arguments contain &quot;subtasks&quot; ‚Üí include subtasks
   - If arguments contain &quot;tree&quot; ‚Üí hierarchical view
   - If arguments contain numbers ‚Üí show specific tasks
   - If arguments contain &quot;blocked&quot; ‚Üí show blocked tasks only

2. **Smart Combinations**
   Examples of what I understand:
   - &quot;pending high&quot; ‚Üí pending tasks with high priority
   - &quot;done today&quot; ‚Üí tasks completed today
   - &quot;blocked&quot; ‚Üí tasks with unmet dependencies
   - &quot;1-5&quot; ‚Üí tasks 1 through 5
   - &quot;subtasks tree&quot; ‚Üí hierarchical view with subtasks

3. **Execute Appropriate Query**
   Based on parsed intent, run the most specific task-master command

4. **Enhanced Display**
   - Group by relevant criteria
   - Show most important information first
   - Use visual indicators for quick scanning
   - Include relevant metrics

5. **Intelligent Suggestions**
   Based on what you&apos;re viewing, suggest next actions:
   - Many pending? ‚Üí Suggest priority order
   - Many blocked? ‚Üí Show dependency resolution
   - Looking at specific tasks? ‚Üí Show related tasks</file><file path="be/.cursor/commands/tm/next-task.md">Intelligently determine and prepare the next action based on comprehensive context.

This enhanced version of &apos;next&apos; considers:
- Current task states
- Recent activity
- Time constraints
- Dependencies
- Your working patterns

Arguments: $ARGUMENTS

## Intelligent Next Action

### 1. **Context Gathering**
Let me analyze the current situation:
- Active tasks (in-progress)
- Recently completed tasks
- Blocked tasks
- Time since last activity
- Arguments provided: $ARGUMENTS

### 2. **Smart Decision Tree**

**If you have an in-progress task:**
- Has it been idle &gt; 2 hours? ‚Üí Suggest resuming or switching
- Near completion? ‚Üí Show remaining steps
- Blocked? ‚Üí Find alternative task

**If no in-progress tasks:**
- Unblocked high-priority tasks? ‚Üí Start highest
- Complex tasks need breakdown? ‚Üí Suggest expansion
- All tasks blocked? ‚Üí Show dependency resolution

**Special arguments handling:**
- &quot;quick&quot; ‚Üí Find task &lt; 2 hours
- &quot;easy&quot; ‚Üí Find low complexity task
- &quot;important&quot; ‚Üí Find high priority regardless of complexity
- &quot;continue&quot; ‚Üí Resume last worked task

### 3. **Preparation Workflow**

Based on selected task:
1. Show full context and history
2. Set up development environment
3. Run relevant tests
4. Open related files
5. Show similar completed tasks
6. Estimate completion time

### 4. **Alternative Suggestions**

Always provide options:
- Primary recommendation
- Quick alternative (&lt; 1 hour)
- Strategic option (unblocks most tasks)
- Learning option (new technology/skill)

### 5. **Workflow Integration**

Seamlessly connect to:
- `/project:task-master:start [selected]`
- `/project:workflows:auto-implement`
- `/project:task-master:expand` (if complex)
- `/project:utils:complexity-report` (if unsure)

The goal: Zero friction from decision to implementation.</file><file path="be/.cursor/commands/tm/parse-prd-with-research.md">Parse PRD with enhanced research mode for better task generation.

Arguments: $ARGUMENTS (PRD file path)

## Research-Enhanced Parsing

Uses the research AI provider (typically Perplexity) for more comprehensive task generation with current best practices.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS --research
```

## Research Benefits

1. **Current Best Practices**
   - Latest framework patterns
   - Security considerations
   - Performance optimizations
   - Accessibility requirements

2. **Technical Deep Dive**
   - Implementation approaches
   - Library recommendations
   - Architecture patterns
   - Testing strategies

3. **Comprehensive Coverage**
   - Edge cases consideration
   - Error handling tasks
   - Monitoring setup
   - Deployment tasks

## Enhanced Output

Research mode typically:
- Generates more detailed tasks
- Includes industry standards
- Adds compliance considerations
- Suggests modern tooling

## When to Use

- New technology domains
- Complex requirements
- Regulatory compliance needed
- Best practices crucial</file><file path="be/.cursor/commands/tm/parse-prd.md">Parse a PRD document to generate tasks.

Arguments: $ARGUMENTS (PRD file path)

## Intelligent PRD Parsing

Analyzes your requirements document and generates a complete task breakdown.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS
```

## Parsing Process

1. **Document Analysis**
   - Extract key requirements
   - Identify technical components
   - Detect dependencies
   - Estimate complexity

2. **Task Generation**
   - Create 10-15 tasks by default
   - Include implementation tasks
   - Add testing tasks
   - Include documentation tasks
   - Set logical dependencies

3. **Smart Enhancements**
   - Group related functionality
   - Set appropriate priorities
   - Add acceptance criteria
   - Include test strategies

## Options

Parse arguments for modifiers:
- Number after filename ‚Üí `--num-tasks`
- `research` ‚Üí Use research mode
- `comprehensive` ‚Üí Generate more tasks

## Post-Generation

After parsing:
1. Display task summary
2. Show dependency graph
3. Suggest task expansion for complex items
4. Recommend sprint planning</file><file path="be/.cursor/commands/tm/project-status.md">Enhanced status command with comprehensive project insights.

Arguments: $ARGUMENTS

## Intelligent Status Overview

### 1. **Executive Summary**
Quick dashboard view:
- üèÉ Active work (in-progress tasks)
- üìä Progress metrics (% complete, velocity)
- üöß Blockers and risks
- ‚è±Ô∏è Time analysis (estimated vs actual)
- üéØ Sprint/milestone progress

### 2. **Contextual Analysis**

Based on $ARGUMENTS, focus on:
- &quot;sprint&quot; ‚Üí Current sprint progress and burndown
- &quot;blocked&quot; ‚Üí Dependency chains and resolution paths
- &quot;team&quot; ‚Üí Task distribution and workload
- &quot;timeline&quot; ‚Üí Schedule adherence and projections
- &quot;risk&quot; ‚Üí High complexity or overdue items

### 3. **Smart Insights**

**Workflow Health:**
- Idle tasks (in-progress &gt; 24h without updates)
- Bottlenecks (multiple tasks waiting on same dependency)
- Quick wins (low complexity, high impact)

**Predictive Analytics:**
- Completion projections based on velocity
- Risk of missing deadlines
- Recommended task order for optimal flow

### 4. **Visual Intelligence**

Dynamic visualization based on data:
```
Sprint Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% (16/20 tasks)
Velocity Trend: ‚ÜóÔ∏è +15% this week
Blocked Tasks:  üî¥ 3 critical path items

Priority Distribution:
High:   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 8 tasks (2 blocked)
Medium: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 4 tasks
Low:    ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 2 tasks
```

### 5. **Actionable Recommendations**

Based on analysis:
1. **Immediate actions** (unblock critical path)
2. **Today&apos;s focus** (optimal task sequence)
3. **Process improvements** (recurring patterns)
4. **Resource needs** (skills, time, dependencies)

### 6. **Historical Context**

Compare to previous periods:
- Velocity changes
- Pattern recognition
- Improvement areas
- Success patterns to repeat</file><file path="be/.cursor/commands/tm/quick-install-taskmaster.md">Quick install Task Master globally if not already installed.

Execute this streamlined installation:

```bash
# Check and install in one command
task-master --version 2&gt;/dev/null || npm install -g task-master-ai

# Verify installation
task-master --version

# Quick setup check
task-master models --status || echo &quot;Note: You&apos;ll need to set up an AI provider API key&quot;
```

If you see &quot;command not found&quot; after installation, you may need to:
1. Restart your terminal
2. Or add npm global bin to PATH: `export PATH=$(npm bin -g):$PATH`

Once installed, you can use all the Task Master commands!

Quick test: Run `/taskmaster:help` to see all available commands.</file><file path="be/.cursor/commands/tm/remove-all-subtasks.md">Clear all subtasks from all tasks globally.

## Global Subtask Clearing

Remove all subtasks across the entire project. Use with extreme caution.

## Execution

```bash
task-master clear-subtasks --all
```

## Pre-Clear Analysis

1. **Project-Wide Summary**
   ```
   Global Subtask Summary
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Total parent tasks: 12
   Total subtasks: 47
   - Completed: 15
   - In-progress: 8
   - Pending: 24

   Work at risk: ~120 hours
   ```

2. **Critical Warnings**
   - In-progress subtasks that will lose work
   - Completed subtasks with valuable history
   - Complex dependency chains
   - Integration test results

## Double Confirmation

```
‚ö†Ô∏è  DESTRUCTIVE OPERATION WARNING ‚ö†Ô∏è
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
This will remove ALL 47 subtasks from your project
Including 8 in-progress and 15 completed subtasks

This action CANNOT be undone

Type &apos;CLEAR ALL SUBTASKS&apos; to confirm:
```

## Smart Safeguards

- Require explicit confirmation phrase
- Create automatic backup
- Log all removed data
- Option to export first

## Use Cases

Valid reasons for global clear:
- Project restructuring
- Major pivot in approach
- Starting fresh breakdown
- Switching to different task organization

## Process

1. Full project analysis
2. Create backup file
3. Show detailed impact
4. Require confirmation
5. Execute removal
6. Generate summary report

## Alternative Suggestions

Before clearing all:
- Export subtasks to file
- Clear only pending subtasks
- Clear by task category
- Archive instead of delete

## Post-Clear Report

```
Global Subtask Clear Complete
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Removed: 47 subtasks from 12 tasks
Backup saved: .taskmaster/backup/subtasks-20240115.json
Parent tasks updated: 12
Time estimates adjusted: Yes

Next steps:
- Review updated task list
- Re-expand complex tasks as needed
- Check project timeline
```</file><file path="be/.cursor/commands/tm/remove-dependency.md">Remove a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to remove dependency relationship.

## Removing Dependencies

Removes a dependency relationship, potentially unblocking tasks.

## Argument Parsing

Parse natural language or IDs:
- &quot;remove dependency between 5 and 3&quot;
- &quot;5 no longer needs 3&quot;
- &quot;unblock 5 from 3&quot;
- &quot;5 3&quot; ‚Üí remove dependency of 5 on 3

## Execution

```bash
task-master remove-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Pre-Removal Checks

1. **Verify dependency exists**
2. **Check impact on task flow**
3. **Warn if it breaks logical sequence**
4. **Show what will be unblocked**

## Smart Analysis

Before removing:
- Show why dependency might have existed
- Check if removal makes tasks executable
- Verify no critical path disruption
- Suggest alternative dependencies

## Post-Removal

After removing:
1. Show updated task status
2. List newly unblocked tasks
3. Update project timeline
4. Suggest next actions

## Safety Features

- Confirm if removing critical dependency
- Show tasks that become immediately actionable
- Warn about potential issues
- Keep removal history

## Example

```
/taskmaster:remove-dependency 5 from 3
‚Üí Removed: Task #5 no longer depends on #3
‚Üí Task #5 is now UNBLOCKED and ready to start
‚Üí Warning: Consider if #5 still needs #2 completed first
```</file><file path="be/.cursor/commands/tm/remove-subtask.md">Remove a subtask from its parent task.

Arguments: $ARGUMENTS

Parse subtask ID to remove, with option to convert to standalone task.

## Removing Subtasks

Remove a subtask and optionally convert it back to a standalone task.

## Argument Parsing

- &quot;remove subtask 5.1&quot;
- &quot;delete 5.1&quot;
- &quot;convert 5.1 to task&quot; ‚Üí remove and convert
- &quot;5.1 standalone&quot; ‚Üí convert to standalone

## Execution Options

### 1. Delete Subtask
```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt;
```

### 2. Convert to Standalone
```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt; --convert
```

## Pre-Removal Checks

1. **Validate Subtask**
   - Verify subtask exists
   - Check completion status
   - Review dependencies

2. **Impact Analysis**
   - Other subtasks that depend on it
   - Parent task implications
   - Data that will be lost

## Removal Process

### For Deletion:
1. Confirm if subtask has work done
2. Update parent task estimates
3. Remove subtask and its data
4. Clean up dependencies

### For Conversion:
1. Assign new standalone task ID
2. Preserve all task data
3. Update dependency references
4. Maintain task history

## Smart Features

- Warn if subtask is in-progress
- Show impact on parent task
- Preserve important data
- Update related estimates

## Example Flows

```
/taskmaster:remove-subtask 5.1
‚Üí Warning: Subtask #5.1 is in-progress
‚Üí This will delete all subtask data
‚Üí Parent task #5 will be updated
Confirm deletion? (y/n)

/taskmaster:remove-subtask 5.1 convert
‚Üí Converting subtask #5.1 to standalone task #89
‚Üí Preserved: All task data and history
‚Üí Updated: 2 dependency references
‚Üí New task #89 is now independent
```

## Post-Removal

- Update parent task status
- Recalculate estimates
- Show updated hierarchy
- Suggest next actions</file><file path="be/.cursor/commands/tm/remove-subtasks.md">Clear all subtasks from a specific task.

Arguments: $ARGUMENTS (task ID)

Remove all subtasks from a parent task at once.

## Clearing Subtasks

Bulk removal of all subtasks from a parent task.

## Execution

```bash
task-master remove-subtasks --id=$ARGUMENTS
```

## Pre-Clear Analysis

1. **Subtask Summary**
   - Number of subtasks
   - Completion status of each
   - Work already done
   - Dependencies affected

2. **Impact Assessment**
   - Data that will be lost
   - Dependencies to be removed
   - Effect on project timeline
   - Parent task implications

## Confirmation Required

```
Remove Subtasks Confirmation
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Parent Task: #5 &quot;Implement user authentication&quot;
Subtasks to remove: 4
- #5.1 &quot;Setup auth framework&quot; (done)
- #5.2 &quot;Create login form&quot; (in-progress)
- #5.3 &quot;Add validation&quot; (pending)
- #5.4 &quot;Write tests&quot; (pending)

‚ö†Ô∏è  This will permanently delete all subtask data
Continue? (y/n)
```

## Smart Features

- Option to convert to standalone tasks
- Backup task data before clearing
- Preserve completed work history
- Update parent task appropriately

## Process

1. List all subtasks for confirmation
2. Check for in-progress work
3. Remove all subtasks
4. Update parent task
5. Clean up dependencies

## Alternative Options

Suggest alternatives:
- Convert important subtasks to tasks
- Keep completed subtasks
- Archive instead of delete
- Export subtask data first

## Post-Clear

- Show updated parent task
- Recalculate time estimates
- Update task complexity
- Suggest next steps

## Example

```
/taskmaster:remove-subtasks 5
‚Üí Found 4 subtasks to remove
‚Üí Warning: Subtask #5.2 is in-progress
‚Üí Cleared all subtasks from task #5
‚Üí Updated parent task estimates
‚Üí Suggestion: Consider re-expanding with better breakdown
```</file><file path="be/.cursor/commands/tm/remove-task.md">Remove a task permanently from the project.

Arguments: $ARGUMENTS (task ID)

Delete a task and handle all its relationships properly.

## Task Removal

Permanently removes a task while maintaining project integrity.

## Argument Parsing

- &quot;remove task 5&quot;
- &quot;delete 5&quot;
- &quot;5&quot; ‚Üí remove task 5
- Can include &quot;-y&quot; for auto-confirm

## Execution

```bash
task-master remove-task --id=&lt;id&gt; [-y]
```

## Pre-Removal Analysis

1. **Task Details**
   - Current status
   - Work completed
   - Time invested
   - Associated data

2. **Relationship Check**
   - Tasks that depend on this
   - Dependencies this task has
   - Subtasks that will be removed
   - Blocking implications

3. **Impact Assessment**
   ```
   Task Removal Impact
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Task: #5 &quot;Implement authentication&quot; (in-progress)
   Status: 60% complete (~8 hours work)

   Will affect:
   - 3 tasks depend on this (will be blocked)
   - Has 4 subtasks (will be deleted)
   - Part of critical path

   ‚ö†Ô∏è  This action cannot be undone
   ```

## Smart Warnings

- Warn if task is in-progress
- Show dependent tasks that will be blocked
- Highlight if part of critical path
- Note any completed work being lost

## Removal Process

1. Show comprehensive impact
2. Require confirmation (unless -y)
3. Update dependent task references
4. Remove task and subtasks
5. Clean up orphaned dependencies
6. Log removal with timestamp

## Alternative Actions

Suggest before deletion:
- Mark as cancelled instead
- Convert to documentation
- Archive task data
- Transfer work to another task

## Post-Removal

- List affected tasks
- Show broken dependencies
- Update project statistics
- Suggest dependency fixes
- Recalculate timeline

## Example Flows

```
/taskmaster:remove-task 5
‚Üí Task #5 is in-progress with 8 hours logged
‚Üí 3 other tasks depend on this
‚Üí Suggestion: Mark as cancelled instead?
Remove anyway? (y/n)

/taskmaster:remove-task 5 -y
‚Üí Removed: Task #5 and 4 subtasks
‚Üí Updated: 3 task dependencies
‚Üí Warning: Tasks #7, #8, #9 now have missing dependency
‚Üí Run /taskmaster:fix-dependencies to resolve
```

## Safety Features

- Confirmation required
- Impact preview
- Removal logging
- Suggest alternatives
- No cascade delete of dependents</file><file path="be/.cursor/commands/tm/setup-models.md">Run interactive setup to configure AI models.

## Interactive Model Configuration

Guides you through setting up AI providers for Task Master.

## Execution

```bash
task-master models --setup
```

## Setup Process

1. **Environment Check**
   - Detect existing API keys
   - Show current configuration
   - Identify missing providers

2. **Provider Selection**
   - Choose main provider (required)
   - Select research provider (recommended)
   - Configure fallback (optional)

3. **API Key Configuration**
   - Prompt for missing keys
   - Validate key format
   - Test connectivity
   - Save configuration

## Smart Recommendations

Based on your needs:
- **For best results**: Claude + Perplexity
- **Budget conscious**: GPT-3.5 + Perplexity
- **Maximum capability**: GPT-4 + Perplexity + Claude fallback

## Configuration Storage

Keys can be stored in:
1. Environment variables (recommended)
2. `.env` file in project
3. Global `.taskmaster/config`

## Post-Setup

After configuration:
- Test each provider
- Show usage examples
- Suggest next steps
- Verify parse-prd works</file><file path="be/.cursor/commands/tm/show-task.md">Show detailed task information with rich context and insights.

Arguments: $ARGUMENTS

## Enhanced Task Display

Parse arguments to determine what to show and how.

### 1. **Smart Task Selection**

Based on $ARGUMENTS:
- Number ‚Üí Show specific task with full context
- &quot;current&quot; ‚Üí Show active in-progress task(s)
- &quot;next&quot; ‚Üí Show recommended next task
- &quot;blocked&quot; ‚Üí Show all blocked tasks with reasons
- &quot;critical&quot; ‚Üí Show critical path tasks
- Multiple IDs ‚Üí Comparative view

### 2. **Contextual Information**

For each task, intelligently include:

**Core Details**
- Full task information (id, title, description, details)
- Current status with history
- Test strategy and acceptance criteria
- Priority and complexity analysis

**Relationships**
- Dependencies (what it needs)
- Dependents (what needs it)
- Parent/subtask hierarchy
- Related tasks (similar work)

**Time Intelligence**
- Created/updated timestamps
- Time in current status
- Estimated vs actual time
- Historical completion patterns

### 3. **Visual Enhancements**

```
üìã Task #45: Implement User Authentication
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Status: üü° in-progress (2 hours)
Priority: üî¥ High | Complexity: 73/100

Dependencies: ‚úÖ #41, ‚úÖ #42, ‚è≥ #43 (blocked)
Blocks: #46, #47, #52

Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% complete

Recent Activity:
- 2h ago: Status changed to in-progress
- 4h ago: Dependency #42 completed
- Yesterday: Task expanded with 3 subtasks
```

### 4. **Intelligent Insights**

Based on task analysis:
- **Risk Assessment**: Complexity vs time remaining
- **Bottleneck Analysis**: Is this blocking critical work?
- **Recommendation**: Suggested approach or concerns
- **Similar Tasks**: How others completed similar work

### 5. **Action Suggestions**

Context-aware next steps:
- If blocked ‚Üí Show how to unblock
- If complex ‚Üí Suggest expansion
- If in-progress ‚Üí Show completion checklist
- If done ‚Üí Show dependent tasks ready to start

### 6. **Multi-Task View**

When showing multiple tasks:
- Common dependencies
- Optimal completion order
- Parallel work opportunities
- Combined complexity analysis</file><file path="be/.cursor/commands/tm/smart-workflow.md">Execute an intelligent workflow based on current project state and recent commands.

This command analyzes:
1. Recent commands you&apos;ve run
2. Current project state
3. Time of day / day of week
4. Your working patterns

Arguments: $ARGUMENTS

## Intelligent Workflow Selection

Based on context, I&apos;ll determine the best workflow:

### Context Analysis
- Previous command executed
- Current task states
- Unfinished work from last session
- Your typical patterns

### Smart Execution

If last command was:
- `status` ‚Üí Likely starting work ‚Üí Run daily standup
- `complete` ‚Üí Task finished ‚Üí Find next task
- `list pending` ‚Üí Planning ‚Üí Suggest sprint planning
- `expand` ‚Üí Breaking down work ‚Üí Show complexity analysis
- `init` ‚Üí New project ‚Üí Show onboarding workflow

If no recent commands:
- Morning? ‚Üí Daily standup workflow
- Many pending tasks? ‚Üí Sprint planning
- Tasks blocked? ‚Üí Dependency resolution
- Friday? ‚Üí Weekly review

### Workflow Composition

I&apos;ll chain appropriate commands:
1. Analyze current state
2. Execute primary workflow
3. Suggest follow-up actions
4. Prepare environment for coding

### Learning Mode

This command learns from your patterns:
- Track command sequences
- Note time preferences
- Remember common workflows
- Adapt to your style

Example flows detected:
- Morning: standup ‚Üí next ‚Üí start
- After lunch: status ‚Üí continue task
- End of day: complete ‚Üí commit ‚Üí status</file><file path="be/.cursor/commands/tm/sync-readme.md">Export tasks to README.md with professional formatting.

Arguments: $ARGUMENTS

Generate a well-formatted README with current task information.

## README Synchronization

Creates or updates README.md with beautifully formatted task information.

## Argument Parsing

Optional filters:
- &quot;pending&quot; ‚Üí Only pending tasks
- &quot;with-subtasks&quot; ‚Üí Include subtask details
- &quot;by-priority&quot; ‚Üí Group by priority
- &quot;sprint&quot; ‚Üí Current sprint only

## Execution

```bash
task-master sync-readme [--with-subtasks] [--status=&lt;status&gt;]
```

## README Generation

### 1. **Project Header**
```markdown
# Project Name

## üìã Task Progress

Last Updated: 2024-01-15 10:30 AM

### Summary
- Total Tasks: 45
- Completed: 15 (33%)
- In Progress: 5 (11%)
- Pending: 25 (56%)
```

### 2. **Task Sections**
Organized by status or priority:
- Progress indicators
- Task descriptions
- Dependencies noted
- Time estimates

### 3. **Visual Elements**
- Progress bars
- Status badges
- Priority indicators
- Completion checkmarks

## Smart Features

1. **Intelligent Grouping**
   - By feature area
   - By sprint/milestone
   - By assigned developer
   - By priority

2. **Progress Tracking**
   - Overall completion
   - Sprint velocity
   - Burndown indication
   - Time tracking

3. **Formatting Options**
   - GitHub-flavored markdown
   - Task checkboxes
   - Collapsible sections
   - Table format available

## Example Output

```markdown
## üöÄ Current Sprint

### In Progress
- [ ] üîÑ #5 **Implement user authentication** (60% complete)
  - Dependencies: API design (#3 ‚úÖ)
  - Subtasks: 4 (2 completed)
  - Est: 8h / Spent: 5h

### Pending (High Priority)
- [ ] ‚ö° #8 **Create dashboard UI**
  - Blocked by: #5
  - Complexity: High
  - Est: 12h
```

## Customization

Based on arguments:
- Include/exclude sections
- Detail level control
- Custom grouping
- Filter by criteria

## Post-Sync

After generation:
1. Show diff preview
2. Backup existing README
3. Write new content
4. Commit reminder
5. Update timestamp

## Integration

Works well with:
- Git workflows
- CI/CD pipelines
- Project documentation
- Team updates
- Client reports</file><file path="be/.cursor/commands/tm/tm-main.md"># Task Master Command Reference

Comprehensive command structure for Task Master integration with Claude Code.

## Command Organization

Commands are organized hierarchically to match Task Master&apos;s CLI structure while providing enhanced Claude Code integration.

## Project Setup &amp; Configuration

### `/taskmaster:init`
- `init-project` - Initialize new project (handles PRD files intelligently)
- `init-project-quick` - Quick setup with auto-confirmation (-y flag)

### `/taskmaster:models`
- `view-models` - View current AI model configuration
- `setup-models` - Interactive model configuration
- `set-main` - Set primary generation model
- `set-research` - Set research model
- `set-fallback` - Set fallback model

## Task Generation

### `/taskmaster:parse-prd`
- `parse-prd` - Generate tasks from PRD document
- `parse-prd-with-research` - Enhanced parsing with research mode

### `/taskmaster:generate`
- `generate-tasks` - Create individual task files from tasks.json

## Task Management

### `/taskmaster:list`
- `list-tasks` - Smart listing with natural language filters
- `list-tasks-with-subtasks` - Include subtasks in hierarchical view
- `list-tasks-by-status` - Filter by specific status

### `/taskmaster:set-status`
- `to-pending` - Reset task to pending
- `to-in-progress` - Start working on task
- `to-done` - Mark task complete
- `to-review` - Submit for review
- `to-deferred` - Defer task
- `to-cancelled` - Cancel task

### `/taskmaster:sync-readme`
- `sync-readme` - Export tasks to README.md with formatting

### `/taskmaster:update`
- `update-task` - Update tasks with natural language
- `update-tasks-from-id` - Update multiple tasks from a starting point
- `update-single-task` - Update specific task

### `/taskmaster:add-task`
- `add-task` - Add new task with AI assistance

### `/taskmaster:remove-task`
- `remove-task` - Remove task with confirmation

## Subtask Management

### `/taskmaster:add-subtask`
- `add-subtask` - Add new subtask to parent
- `convert-task-to-subtask` - Convert existing task to subtask

### `/taskmaster:remove-subtask`
- `remove-subtask` - Remove subtask (with optional conversion)

### `/taskmaster:clear-subtasks`
- `clear-subtasks` - Clear subtasks from specific task
- `clear-all-subtasks` - Clear all subtasks globally

## Task Analysis &amp; Breakdown

### `/taskmaster:analyze-complexity`
- `analyze-complexity` - Analyze and generate expansion recommendations

### `/taskmaster:complexity-report`
- `complexity-report` - Display complexity analysis report

### `/taskmaster:expand`
- `expand-task` - Break down specific task
- `expand-all-tasks` - Expand all eligible tasks
- `with-research` - Enhanced expansion

## Task Navigation

### `/taskmaster:next`
- `next-task` - Intelligent next task recommendation

### `/taskmaster:show`
- `show-task` - Display detailed task information

### `/taskmaster:status`
- `project-status` - Comprehensive project dashboard

## Dependency Management

### `/taskmaster:add-dependency`
- `add-dependency` - Add task dependency

### `/taskmaster:remove-dependency`
- `remove-dependency` - Remove task dependency

### `/taskmaster:validate-dependencies`
- `validate-dependencies` - Check for dependency issues

### `/taskmaster:fix-dependencies`
- `fix-dependencies` - Automatically fix dependency problems

## Workflows &amp; Automation

### `/taskmaster:workflows`
- `smart-workflow` - Context-aware intelligent workflow execution
- `command-pipeline` - Chain multiple commands together
- `auto-implement-tasks` - Advanced auto-implementation with code generation

## Utilities

### `/taskmaster:utils`
- `analyze-project` - Deep project analysis and insights

### `/taskmaster:setup`
- `install-taskmaster` - Comprehensive installation guide
- `quick-install-taskmaster` - One-line global installation

## Usage Patterns

### Natural Language
Most commands accept natural language arguments:
```
/taskmaster:add-task create user authentication system
/taskmaster:update mark all API tasks as high priority
/taskmaster:list show blocked tasks
```

### ID-Based Commands
Commands requiring IDs intelligently parse from $ARGUMENTS:
```
/taskmaster:show 45
/taskmaster:expand 23
/taskmaster:set-status/to-done 67
```

### Smart Defaults
Commands provide intelligent defaults and suggestions based on context.</file><file path="be/.cursor/commands/tm/to-cancelled.md">Cancel a task permanently.

Arguments: $ARGUMENTS (task ID)

## Cancelling a Task

This status indicates a task is no longer needed and won&apos;t be completed.

## Valid Reasons for Cancellation

- Requirements changed
- Feature deprecated
- Duplicate of another task
- Strategic pivot
- Technical approach invalidated

## Pre-Cancellation Checks

1. Confirm no critical dependencies
2. Check for partial implementation
3. Verify cancellation rationale
4. Document lessons learned

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=cancelled
```

## Cancellation Impact

When cancelling:
1. **Dependency Updates**
   - Notify dependent tasks
   - Update project scope
   - Recalculate timelines

2. **Clean-up Actions**
   - Remove related branches
   - Archive any work done
   - Update documentation
   - Close related issues

3. **Learning Capture**
   - Document why cancelled
   - Note what was learned
   - Update estimation models
   - Prevent future duplicates

## Historical Preservation

- Keep for reference
- Tag with cancellation reason
- Link to replacement if any
- Maintain audit trail</file><file path="be/.cursor/commands/tm/to-deferred.md">Defer a task for later consideration.

Arguments: $ARGUMENTS (task ID)

## Deferring a Task

This status indicates a task is valid but not currently actionable or prioritized.

## Valid Reasons for Deferral

- Waiting for external dependencies
- Reprioritized for future sprint
- Blocked by technical limitations
- Resource constraints
- Strategic timing considerations

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=deferred
```

## Deferral Management

When deferring:
1. **Document Reason**
   - Capture why it&apos;s being deferred
   - Set reactivation criteria
   - Note any partial work completed

2. **Impact Analysis**
   - Check dependent tasks
   - Update project timeline
   - Notify affected stakeholders

3. **Future Planning**
   - Set review reminders
   - Tag for specific milestone
   - Preserve context for reactivation
   - Link to blocking issues

## Smart Tracking

- Monitor deferral duration
- Alert when criteria met
- Prevent scope creep
- Regular review cycles</file><file path="be/.cursor/commands/tm/to-done.md">Mark a task as completed.

Arguments: $ARGUMENTS (task ID)

## Completing a Task

This command validates task completion and updates project state intelligently.

## Pre-Completion Checks

1. Verify test strategy was followed
2. Check if all subtasks are complete
3. Validate acceptance criteria met
4. Ensure code is committed

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=done
```

## Post-Completion Actions

1. **Update Dependencies**
   - Identify newly unblocked tasks
   - Update sprint progress
   - Recalculate project timeline

2. **Documentation**
   - Generate completion summary
   - Update CLAUDE.md with learnings
   - Log implementation approach

3. **Next Steps**
   - Show newly available tasks
   - Suggest logical next task
   - Update velocity metrics

## Celebration &amp; Learning

- Show impact of completion
- Display unblocked work
- Recognize achievement
- Capture lessons learned</file><file path="be/.cursor/commands/tm/to-in-progress.md">Start working on a task by setting its status to in-progress.

Arguments: $ARGUMENTS (task ID)

## Starting Work on Task

This command does more than just change status - it prepares your environment for productive work.

## Pre-Start Checks

1. Verify dependencies are met
2. Check if another task is already in-progress
3. Ensure task details are complete
4. Validate test strategy exists

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=in-progress
```

## Environment Setup

After setting to in-progress:
1. Create/checkout appropriate git branch
2. Open relevant documentation
3. Set up test watchers if applicable
4. Display task details and acceptance criteria
5. Show similar completed tasks for reference

## Smart Suggestions

- Estimated completion time based on complexity
- Related files from similar tasks
- Potential blockers to watch for
- Recommended first steps</file><file path="be/.cursor/commands/tm/to-pending.md">Set a task&apos;s status to pending.

Arguments: $ARGUMENTS (task ID)

## Setting Task to Pending

This moves a task back to the pending state, useful for:
- Resetting erroneously started tasks
- Deferring work that was prematurely begun
- Reorganizing sprint priorities

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=pending
```

## Validation

Before setting to pending:
- Warn if task is currently in-progress
- Check if this will block other tasks
- Suggest documenting why it&apos;s being reset
- Preserve any work already done

## Smart Actions

After setting to pending:
- Update sprint planning if needed
- Notify about freed resources
- Suggest priority reassessment
- Log the status change with context</file><file path="be/.cursor/commands/tm/to-review.md">Set a task&apos;s status to review.

Arguments: $ARGUMENTS (task ID)

## Marking Task for Review

This status indicates work is complete but needs verification before final approval.

## When to Use Review Status

- Code complete but needs peer review
- Implementation done but needs testing
- Documentation written but needs proofreading
- Design complete but needs stakeholder approval

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=review
```

## Review Preparation

When setting to review:
1. **Generate Review Checklist**
   - Link to PR/MR if applicable
   - Highlight key changes
   - Note areas needing attention
   - Include test results

2. **Documentation**
   - Update task with review notes
   - Link relevant artifacts
   - Specify reviewers if known

3. **Smart Actions**
   - Create review reminders
   - Track review duration
   - Suggest reviewers based on expertise
   - Prepare rollback plan if needed</file><file path="be/.cursor/commands/tm/update-single-task.md">Update a single specific task with new information.

Arguments: $ARGUMENTS

Parse task ID and update details.

## Single Task Update

Precisely update one task with AI assistance to maintain consistency.

## Argument Parsing

Natural language updates:
- &quot;5: add caching requirement&quot;
- &quot;update 5 to include error handling&quot;
- &quot;task 5 needs rate limiting&quot;
- &quot;5 change priority to high&quot;

## Execution

```bash
task-master update-task --id=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Types

### 1. **Content Updates**
- Enhance description
- Add requirements
- Clarify details
- Update acceptance criteria

### 2. **Metadata Updates**
- Change priority
- Adjust time estimates
- Update complexity
- Modify dependencies

### 3. **Strategic Updates**
- Revise approach
- Change test strategy
- Update implementation notes
- Adjust subtask needs

## AI-Powered Updates

The AI:
1. **Understands Context**
   - Reads current task state
   - Identifies update intent
   - Maintains consistency
   - Preserves important info

2. **Applies Changes**
   - Updates relevant fields
   - Keeps style consistent
   - Adds without removing
   - Enhances clarity

3. **Validates Results**
   - Checks coherence
   - Verifies completeness
   - Maintains relationships
   - Suggests related updates

## Example Updates

```
/taskmaster:update/single 5: add rate limiting
‚Üí Updating Task #5: &quot;Implement API endpoints&quot;

Current: Basic CRUD endpoints
Adding: Rate limiting requirements

Updated sections:
‚úì Description: Added rate limiting mention
‚úì Details: Added specific limits (100/min)
‚úì Test Strategy: Added rate limit tests
‚úì Complexity: Increased from 5 to 6
‚úì Time Estimate: Increased by 2 hours

Suggestion: Also update task #6 (API Gateway) for consistency?
```

## Smart Features

1. **Incremental Updates**
   - Adds without overwriting
   - Preserves work history
   - Tracks what changed
   - Shows diff view

2. **Consistency Checks**
   - Related task alignment
   - Subtask compatibility
   - Dependency validity
   - Timeline impact

3. **Update History**
   - Timestamp changes
   - Track who/what updated
   - Reason for update
   - Previous versions

## Field-Specific Updates

Quick syntax for specific fields:
- &quot;5 priority:high&quot; ‚Üí Update priority only
- &quot;5 add-time:4h&quot; ‚Üí Add to time estimate
- &quot;5 status:review&quot; ‚Üí Change status
- &quot;5 depends:3,4&quot; ‚Üí Add dependencies

## Post-Update

- Show updated task
- Highlight changes
- Check related tasks
- Update suggestions
- Timeline adjustments</file><file path="be/.cursor/commands/tm/update-task.md">Update tasks with intelligent field detection and bulk operations.

Arguments: $ARGUMENTS

## Intelligent Task Updates

Parse arguments to determine update intent and execute smartly.

### 1. **Natural Language Processing**

Understand update requests like:
- &quot;mark 23 as done&quot; ‚Üí Update status to done
- &quot;increase priority of 45&quot; ‚Üí Set priority to high
- &quot;add dependency on 12 to task 34&quot; ‚Üí Add dependency
- &quot;tasks 20-25 need review&quot; ‚Üí Bulk status update
- &quot;all API tasks high priority&quot; ‚Üí Pattern-based update

### 2. **Smart Field Detection**

Automatically detect what to update:
- Status keywords: done, complete, start, pause, review
- Priority changes: urgent, high, low, deprioritize
- Dependency updates: depends on, blocks, after
- Assignment: assign to, owner, responsible
- Time: estimate, spent, deadline

### 3. **Bulk Operations**

Support for multiple task updates:
```
Examples:
- &quot;complete tasks 12, 15, 18&quot;
- &quot;all pending auth tasks to in-progress&quot;
- &quot;increase priority for tasks blocking 45&quot;
- &quot;defer all documentation tasks&quot;
```

### 4. **Contextual Validation**

Before updating, check:
- Status transitions are valid
- Dependencies don&apos;t create cycles
- Priority changes make sense
- Bulk updates won&apos;t break project flow

Show preview:
```
Update Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Tasks to update: #23, #24, #25
Change: status ‚Üí in-progress
Impact: Will unblock tasks #30, #31
Warning: Task #24 has unmet dependencies
```

### 5. **Smart Suggestions**

Based on update:
- Completing task? ‚Üí Show newly unblocked tasks
- Changing priority? ‚Üí Show impact on sprint
- Adding dependency? ‚Üí Check for conflicts
- Bulk update? ‚Üí Show summary of changes

### 6. **Workflow Integration**

After updates:
- Auto-update dependent task states
- Trigger status recalculation
- Update sprint/milestone progress
- Log changes with context

Result: Flexible, intelligent task updates with safety checks.</file><file path="be/.cursor/commands/tm/update-tasks-from-id.md">Update multiple tasks starting from a specific ID.

Arguments: $ARGUMENTS

Parse starting task ID and update context.

## Bulk Task Updates

Update multiple related tasks based on new requirements or context changes.

## Argument Parsing

- &quot;from 5: add security requirements&quot;
- &quot;5 onwards: update API endpoints&quot;
- &quot;starting at 5: change to use new framework&quot;

## Execution

```bash
task-master update --from=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Process

### 1. **Task Selection**
Starting from specified ID:
- Include the task itself
- Include all dependent tasks
- Include related subtasks
- Smart boundary detection

### 2. **Context Application**
AI analyzes the update context and:
- Identifies what needs changing
- Maintains consistency
- Preserves completed work
- Updates related information

### 3. **Intelligent Updates**
- Modify descriptions appropriately
- Update test strategies
- Adjust time estimates
- Revise dependencies if needed

## Smart Features

1. **Scope Detection**
   - Find natural task groupings
   - Identify related features
   - Stop at logical boundaries
   - Avoid over-updating

2. **Consistency Maintenance**
   - Keep naming conventions
   - Preserve relationships
   - Update cross-references
   - Maintain task flow

3. **Change Preview**
   ```
   Bulk Update Preview
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Starting from: Task #5
   Tasks to update: 8 tasks + 12 subtasks

   Context: &quot;add security requirements&quot;

   Changes will include:
   - Add security sections to descriptions
   - Update test strategies for security
   - Add security-related subtasks where needed
   - Adjust time estimates (+20% average)

   Continue? (y/n)
   ```

## Example Updates

```
/taskmaster:update-tasks-from-id 5: change database to PostgreSQL
‚Üí Analyzing impact starting from task #5
‚Üí Found 6 related tasks to update
‚Üí Updates will maintain consistency
‚Üí Preview changes? (y/n)

Applied updates:
‚úì Task #5: Updated connection logic references
‚úì Task #6: Changed migration approach
‚úì Task #7: Updated query syntax notes
‚úì Task #8: Revised testing strategy
‚úì Task #9: Updated deployment steps
‚úì Task #12: Changed backup procedures
```

## Safety Features

- Preview all changes
- Selective confirmation
- Rollback capability
- Change logging
- Validation checks

## Post-Update

- Summary of changes
- Consistency verification
- Suggest review tasks
- Update timeline if needed</file><file path="be/.cursor/commands/tm/validate-dependencies.md">Validate all task dependencies for issues.

## Dependency Validation

Comprehensive check for dependency problems across the entire project.

## Execution

```bash
task-master validate-dependencies
```

## Validation Checks

1. **Circular Dependencies**
   - A depends on B, B depends on A
   - Complex circular chains
   - Self-dependencies

2. **Missing Dependencies**
   - References to non-existent tasks
   - Deleted task references
   - Invalid task IDs

3. **Logical Issues**
   - Completed tasks depending on pending
   - Cancelled tasks in dependency chains
   - Impossible sequences

4. **Complexity Warnings**
   - Over-complex dependency chains
   - Too many dependencies per task
   - Bottleneck tasks

## Smart Analysis

The validation provides:
- Visual dependency graph
- Critical path analysis
- Bottleneck identification
- Suggested optimizations

## Report Format

```
Dependency Validation Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ No circular dependencies found
‚ö†Ô∏è  2 warnings found:
   - Task #23 has 7 dependencies (consider breaking down)
   - Task #45 blocks 5 other tasks (potential bottleneck)
‚ùå 1 error found:
   - Task #67 depends on deleted task #66

Critical Path: #1 ‚Üí #5 ‚Üí #23 ‚Üí #45 ‚Üí #50 (15 days)
```

## Actionable Output

For each issue found:
- Clear description
- Impact assessment
- Suggested fix
- Command to resolve

## Next Steps

After validation:
- Run `/taskmaster:fix-dependencies` to auto-fix
- Manually adjust problematic dependencies
- Rerun to verify fixes</file><file path="be/.cursor/commands/tm/view-models.md">View current AI model configuration.

## Model Configuration Display

Shows the currently configured AI providers and models for Task Master.

## Execution

```bash
task-master models
```

## Information Displayed

1. **Main Provider**
   - Model ID and name
   - API key status (configured/missing)
   - Usage: Primary task generation

2. **Research Provider**
   - Model ID and name
   - API key status
   - Usage: Enhanced research mode

3. **Fallback Provider**
   - Model ID and name
   - API key status
   - Usage: Backup when main fails

## Visual Status

```
Task Master AI Model Configuration
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Main:     ‚úÖ claude-3-5-sonnet (configured)
Research: ‚úÖ perplexity-sonar (configured)
Fallback: ‚ö†Ô∏è  Not configured (optional)

Available Models:
- claude-3-5-sonnet
- gpt-4-turbo
- gpt-3.5-turbo
- perplexity-sonar
```

## Next Actions

Based on configuration:
- If missing API keys ‚Üí Suggest setup
- If no research model ‚Üí Explain benefits
- If all configured ‚Üí Show usage tips</file><file path="be/.cursor/rules/taskmaster/dev_workflow.mdc">---
description: Guide for using Taskmaster to manage task-driven development workflows
globs: **/*
alwaysApply: true
---

# Taskmaster Development Workflow

This guide outlines the standard process for using Taskmaster to manage software development projects. It is written as a set of instructions for you, the AI agent.

- **Your Default Stance**: For most projects, the user can work directly within the `master` task context. Your initial actions should operate on this default context unless a clear pattern for multi-context work emerges.
- **Your Goal**: Your role is to elevate the user&apos;s workflow by intelligently introducing advanced features like **Tagged Task Lists** when you detect the appropriate context. Do not force tags on the user; suggest them as a helpful solution to a specific need.

## The Basic Loop
The fundamental development cycle you will facilitate is:
1.  **`list`**: Show the user what needs to be done.
2.  **`next`**: Help the user decide what to work on.
3.  **`show &lt;id&gt;`**: Provide details for a specific task.
4.  **`expand &lt;id&gt;`**: Break down a complex task into smaller, manageable subtasks.
5.  **Implement**: The user writes the code and tests.
6.  **`update-subtask`**: Log progress and findings on behalf of the user.
7.  **`set-status`**: Mark tasks and subtasks as `done` as work is completed.
8.  **Repeat**.

All your standard command executions should operate on the user&apos;s current task context, which defaults to `master`.

---

## Standard Development Workflow Process

### Simple Workflow (Default Starting Point)

For new projects or when users are getting started, operate within the `master` tag context:

-   Start new projects by running `initialize_project` tool / `task-master init` or `parse_prd` / `task-master parse-prd --input=&apos;&lt;prd-file.txt&gt;&apos;` (see @`taskmaster.mdc`) to generate initial tasks.json with tagged structure
-   Configure rule sets during initialization with `--rules` flag (e.g., `task-master init --rules cursor,windsurf`) or manage them later with `task-master rules add/remove` commands  
-   Begin coding sessions with `get_tasks` / `task-master list` (see @`taskmaster.mdc`) to see current tasks, status, and IDs
-   Determine the next task to work on using `next_task` / `task-master next` (see @`taskmaster.mdc`)
-   Analyze task complexity with `analyze_project_complexity` / `task-master analyze-complexity --research` (see @`taskmaster.mdc`) before breaking down tasks
-   Review complexity report using `complexity_report` / `task-master complexity-report` (see @`taskmaster.mdc`)
-   Select tasks based on dependencies (all marked &apos;done&apos;), priority level, and ID order
-   View specific task details using `get_task` / `task-master show &lt;id&gt;` (see @`taskmaster.mdc`) to understand implementation requirements
-   Break down complex tasks using `expand_task` / `task-master expand --id=&lt;id&gt; --force --research` (see @`taskmaster.mdc`) with appropriate flags like `--force` (to replace existing subtasks) and `--research`
-   Implement code following task details, dependencies, and project standards
-   Mark completed tasks with `set_task_status` / `task-master set-status --id=&lt;id&gt; --status=done` (see @`taskmaster.mdc`)
-   Update dependent tasks when implementation differs from original plan using `update` / `task-master update --from=&lt;id&gt; --prompt=&quot;...&quot;` or `update_task` / `task-master update-task --id=&lt;id&gt; --prompt=&quot;...&quot;` (see @`taskmaster.mdc`)

---

## Leveling Up: Agent-Led Multi-Context Workflows

While the basic workflow is powerful, your primary opportunity to add value is by identifying when to introduce **Tagged Task Lists**. These patterns are your tools for creating a more organized and efficient development environment for the user, especially if you detect agentic or parallel development happening across the same session.

**Critical Principle**: Most users should never see a difference in their experience. Only introduce advanced workflows when you detect clear indicators that the project has evolved beyond simple task management.

### When to Introduce Tags: Your Decision Patterns

Here are the patterns to look for. When you detect one, you should propose the corresponding workflow to the user.

#### Pattern 1: Simple Git Feature Branching
This is the most common and direct use case for tags.

- **Trigger**: The user creates a new git branch (e.g., `git checkout -b feature/user-auth`).
- **Your Action**: Propose creating a new tag that mirrors the branch name to isolate the feature&apos;s tasks from `master`.
- **Your Suggested Prompt**: *&quot;I see you&apos;ve created a new branch named &apos;feature/user-auth&apos;. To keep all related tasks neatly organized and separate from your main list, I can create a corresponding task tag for you. This helps prevent merge conflicts in your `tasks.json` file later. Shall I create the &apos;feature-user-auth&apos; tag?&quot;*
- **Tool to Use**: `task-master add-tag --from-branch`

#### Pattern 2: Team Collaboration
- **Trigger**: The user mentions working with teammates (e.g., &quot;My teammate Alice is handling the database schema,&quot; or &quot;I need to review Bob&apos;s work on the API.&quot;).
- **Your Action**: Suggest creating a separate tag for the user&apos;s work to prevent conflicts with shared master context.
- **Your Suggested Prompt**: *&quot;Since you&apos;re working with Alice, I can create a separate task context for your work to avoid conflicts. This way, Alice can continue working with the master list while you have your own isolated context. When you&apos;re ready to merge your work, we can coordinate the tasks back to master. Shall I create a tag for your current work?&quot;*
- **Tool to Use**: `task-master add-tag my-work --copy-from-current --description=&quot;My tasks while collaborating with Alice&quot;`

#### Pattern 3: Experiments or Risky Refactors
- **Trigger**: The user wants to try something that might not be kept (e.g., &quot;I want to experiment with switching our state management library,&quot; or &quot;Let&apos;s refactor the old API module, but I want to keep the current tasks as a reference.&quot;).
- **Your Action**: Propose creating a sandboxed tag for the experimental work.
- **Your Suggested Prompt**: *&quot;This sounds like a great experiment. To keep these new tasks separate from our main plan, I can create a temporary &apos;experiment-zustand&apos; tag for this work. If we decide not to proceed, we can simply delete the tag without affecting the main task list. Sound good?&quot;*
- **Tool to Use**: `task-master add-tag experiment-zustand --description=&quot;Exploring Zustand migration&quot;`

#### Pattern 4: Large Feature Initiatives (PRD-Driven)
This is a more structured approach for significant new features or epics.

- **Trigger**: The user describes a large, multi-step feature that would benefit from a formal plan.
- **Your Action**: Propose a comprehensive, PRD-driven workflow.
- **Your Suggested Prompt**: *&quot;This sounds like a significant new feature. To manage this effectively, I suggest we create a dedicated task context for it. Here&apos;s the plan: I&apos;ll create a new tag called &apos;feature-xyz&apos;, then we can draft a Product Requirements Document (PRD) together to scope the work. Once the PRD is ready, I&apos;ll automatically generate all the necessary tasks within that new tag. How does that sound?&quot;*
- **Your Implementation Flow**:
    1.  **Create an empty tag**: `task-master add-tag feature-xyz --description &quot;Tasks for the new XYZ feature&quot;`. You can also start by creating a git branch if applicable, and then create the tag from that branch.
    2.  **Collaborate &amp; Create PRD**: Work with the user to create a detailed PRD file (e.g., `.taskmaster/docs/feature-xyz-prd.txt`).
    3.  **Parse PRD into the new tag**: `task-master parse-prd .taskmaster/docs/feature-xyz-prd.txt --tag feature-xyz`
    4.  **Prepare the new task list**: Follow up by suggesting `analyze-complexity` and `expand-all` for the newly created tasks within the `feature-xyz` tag.

#### Pattern 5: Version-Based Development
Tailor your approach based on the project maturity indicated by tag names.

- **Prototype/MVP Tags** (`prototype`, `mvp`, `poc`, `v0.x`):
  - **Your Approach**: Focus on speed and functionality over perfection
  - **Task Generation**: Create tasks that emphasize &quot;get it working&quot; over &quot;get it perfect&quot;
  - **Complexity Level**: Lower complexity, fewer subtasks, more direct implementation paths
  - **Research Prompts**: Include context like &quot;This is a prototype - prioritize speed and basic functionality over optimization&quot;
  - **Example Prompt Addition**: *&quot;Since this is for the MVP, I&apos;ll focus on tasks that get core functionality working quickly rather than over-engineering.&quot;*

- **Production/Mature Tags** (`v1.0+`, `production`, `stable`):
  - **Your Approach**: Emphasize robustness, testing, and maintainability
  - **Task Generation**: Include comprehensive error handling, testing, documentation, and optimization
  - **Complexity Level**: Higher complexity, more detailed subtasks, thorough implementation paths
  - **Research Prompts**: Include context like &quot;This is for production - prioritize reliability, performance, and maintainability&quot;
  - **Example Prompt Addition**: *&quot;Since this is for production, I&apos;ll ensure tasks include proper error handling, testing, and documentation.&quot;*

### Advanced Workflow (Tag-Based &amp; PRD-Driven)

**When to Transition**: Recognize when the project has evolved (or has initiated a project which existing code) beyond simple task management. Look for these indicators:
- User mentions teammates or collaboration needs
- Project has grown to 15+ tasks with mixed priorities
- User creates feature branches or mentions major initiatives
- User initializes Taskmaster on an existing, complex codebase
- User describes large features that would benefit from dedicated planning

**Your Role in Transition**: Guide the user to a more sophisticated workflow that leverages tags for organization and PRDs for comprehensive planning.

#### Master List Strategy (High-Value Focus)
Once you transition to tag-based workflows, the `master` tag should ideally contain only:
- **High-level deliverables** that provide significant business value
- **Major milestones** and epic-level features
- **Critical infrastructure** work that affects the entire project
- **Release-blocking** items

**What NOT to put in master**:
- Detailed implementation subtasks (these go in feature-specific tags&apos; parent tasks)
- Refactoring work (create dedicated tags like `refactor-auth`)
- Experimental features (use `experiment-*` tags)
- Team member-specific tasks (use person-specific tags)

#### PRD-Driven Feature Development

**For New Major Features**:
1. **Identify the Initiative**: When user describes a significant feature
2. **Create Dedicated Tag**: `add_tag feature-[name] --description=&quot;[Feature description]&quot;`
3. **Collaborative PRD Creation**: Work with user to create comprehensive PRD in `.taskmaster/docs/feature-[name]-prd.txt`
4. **Parse &amp; Prepare**: 
   - `parse_prd .taskmaster/docs/feature-[name]-prd.txt --tag=feature-[name]`
   - `analyze_project_complexity --tag=feature-[name] --research`
   - `expand_all --tag=feature-[name] --research`
5. **Add Master Reference**: Create a high-level task in `master` that references the feature tag

**For Existing Codebase Analysis**:
When users initialize Taskmaster on existing projects:
1. **Codebase Discovery**: Use your native tools for producing deep context about the code base. You may use `research` tool with `--tree` and `--files` to collect up to date information using the existing architecture as context.
2. **Collaborative Assessment**: Work with user to identify improvement areas, technical debt, or new features
3. **Strategic PRD Creation**: Co-author PRDs that include:
   - Current state analysis (based on your codebase research)
   - Proposed improvements or new features
   - Implementation strategy considering existing code
4. **Tag-Based Organization**: Parse PRDs into appropriate tags (`refactor-api`, `feature-dashboard`, `tech-debt`, etc.)
5. **Master List Curation**: Keep only the most valuable initiatives in master

The parse-prd&apos;s `--append` flag enables the user to parse multiple PRDs within tags or across tags. PRDs should be focused and the number of tasks they are parsed into should be strategically chosen relative to the PRD&apos;s complexity and level of detail.

### Workflow Transition Examples

**Example 1: Simple ‚Üí Team-Based**
```
User: &quot;Alice is going to help with the API work&quot;
Your Response: &quot;Great! To avoid conflicts, I&apos;ll create a separate task context for your work. Alice can continue with the master list while you work in your own context. When you&apos;re ready to merge, we can coordinate the tasks back together.&quot;
Action: add_tag my-api-work --copy-from-current --description=&quot;My API tasks while collaborating with Alice&quot;
```

**Example 2: Simple ‚Üí PRD-Driven**
```
User: &quot;I want to add a complete user dashboard with analytics, user management, and reporting&quot;
Your Response: &quot;This sounds like a major feature that would benefit from detailed planning. Let me create a dedicated context for this work and we can draft a PRD together to ensure we capture all requirements.&quot;
Actions: 
1. add_tag feature-dashboard --description=&quot;User dashboard with analytics and management&quot;
2. Collaborate on PRD creation
3. parse_prd dashboard-prd.txt --tag=feature-dashboard
4. Add high-level &quot;User Dashboard&quot; task to master
```

**Example 3: Existing Project ‚Üí Strategic Planning**
```
User: &quot;I just initialized Taskmaster on my existing React app. It&apos;s getting messy and I want to improve it.&quot;
Your Response: &quot;Let me research your codebase to understand the current architecture, then we can create a strategic plan for improvements.&quot;
Actions:
1. research &quot;Current React app architecture and improvement opportunities&quot; --tree --files=src/
2. Collaborate on improvement PRD based on findings
3. Create tags for different improvement areas (refactor-components, improve-state-management, etc.)
4. Keep only major improvement initiatives in master
```

---

## Primary Interaction: MCP Server vs. CLI

Taskmaster offers two primary ways to interact:

1.  **MCP Server (Recommended for Integrated Tools)**:
    - For AI agents and integrated development environments (like Cursor), interacting via the **MCP server is the preferred method**.
    - The MCP server exposes Taskmaster functionality through a set of tools (e.g., `get_tasks`, `add_subtask`).
    - This method offers better performance, structured data exchange, and richer error handling compared to CLI parsing.
    - Refer to @`mcp.mdc` for details on the MCP architecture and available tools.
    - A comprehensive list and description of MCP tools and their corresponding CLI commands can be found in @`taskmaster.mdc`.
    - **Restart the MCP server** if core logic in `scripts/modules` or MCP tool/direct function definitions change.
    - **Note**: MCP tools fully support tagged task lists with complete tag management capabilities.

2.  **`task-master` CLI (For Users &amp; Fallback)**:
    - The global `task-master` command provides a user-friendly interface for direct terminal interaction.
    - It can also serve as a fallback if the MCP server is inaccessible or a specific function isn&apos;t exposed via MCP.
    - Install globally with `npm install -g task-master-ai` or use locally via `npx task-master-ai ...`.
    - The CLI commands often mirror the MCP tools (e.g., `task-master list` corresponds to `get_tasks`).
    - Refer to @`taskmaster.mdc` for a detailed command reference.
    - **Tagged Task Lists**: CLI fully supports the new tagged system with seamless migration.

## How the Tag System Works (For Your Reference)

- **Data Structure**: Tasks are organized into separate contexts (tags) like &quot;master&quot;, &quot;feature-branch&quot;, or &quot;v2.0&quot;.
- **Silent Migration**: Existing projects automatically migrate to use a &quot;master&quot; tag with zero disruption.
- **Context Isolation**: Tasks in different tags are completely separate. Changes in one tag do not affect any other tag.
- **Manual Control**: The user is always in control. There is no automatic switching. You facilitate switching by using `use-tag &lt;name&gt;`.
- **Full CLI &amp; MCP Support**: All tag management commands are available through both the CLI and MCP tools for you to use. Refer to @`taskmaster.mdc` for a full command list.

---

## Task Complexity Analysis

-   Run `analyze_project_complexity` / `task-master analyze-complexity --research` (see @`taskmaster.mdc`) for comprehensive analysis
-   Review complexity report via `complexity_report` / `task-master complexity-report` (see @`taskmaster.mdc`) for a formatted, readable version.
-   Focus on tasks with highest complexity scores (8-10) for detailed breakdown
-   Use analysis results to determine appropriate subtask allocation
-   Note that reports are automatically used by the `expand_task` tool/command

## Task Breakdown Process

-   Use `expand_task` / `task-master expand --id=&lt;id&gt;`. It automatically uses the complexity report if found, otherwise generates default number of subtasks.
-   Use `--num=&lt;number&gt;` to specify an explicit number of subtasks, overriding defaults or complexity report recommendations.
-   Add `--research` flag to leverage Perplexity AI for research-backed expansion.
-   Add `--force` flag to clear existing subtasks before generating new ones (default is to append).
-   Use `--prompt=&quot;&lt;context&gt;&quot;` to provide additional context when needed.
-   Review and adjust generated subtasks as necessary.
-   Use `expand_all` tool or `task-master expand --all` to expand multiple pending tasks at once, respecting flags like `--force` and `--research`.
-   If subtasks need complete replacement (regardless of the `--force` flag on `expand`), clear them first with `clear_subtasks` / `task-master clear-subtasks --id=&lt;id&gt;`.

## Implementation Drift Handling

-   When implementation differs significantly from planned approach
-   When future tasks need modification due to current implementation choices
-   When new dependencies or requirements emerge
-   Use `update` / `task-master update --from=&lt;futureTaskId&gt; --prompt=&apos;&lt;explanation&gt;\nUpdate context...&apos; --research` to update multiple future tasks.
-   Use `update_task` / `task-master update-task --id=&lt;taskId&gt; --prompt=&apos;&lt;explanation&gt;\nUpdate context...&apos; --research` to update a single specific task.

## Task Status Management

-   Use &apos;pending&apos; for tasks ready to be worked on
-   Use &apos;done&apos; for completed and verified tasks
-   Use &apos;deferred&apos; for postponed tasks
-   Add custom status values as needed for project-specific workflows

## Task Structure Fields

- **id**: Unique identifier for the task (Example: `1`, `1.1`)
- **title**: Brief, descriptive title (Example: `&quot;Initialize Repo&quot;`)
- **description**: Concise summary of what the task involves (Example: `&quot;Create a new repository, set up initial structure.&quot;`)
- **status**: Current state of the task (Example: `&quot;pending&quot;`, `&quot;done&quot;`, `&quot;deferred&quot;`)
- **dependencies**: IDs of prerequisite tasks (Example: `[1, 2.1]`)
    - Dependencies are displayed with status indicators (‚úÖ for completed, ‚è±Ô∏è for pending)
    - This helps quickly identify which prerequisite tasks are blocking work
- **priority**: Importance level (Example: `&quot;high&quot;`, `&quot;medium&quot;`, `&quot;low&quot;`)
- **details**: In-depth implementation instructions (Example: `&quot;Use GitHub client ID/secret, handle callback, set session token.&quot;`) 
- **testStrategy**: Verification approach (Example: `&quot;Deploy and call endpoint to confirm &apos;Hello World&apos; response.&quot;`) 
- **subtasks**: List of smaller, more specific tasks (Example: `[{&quot;id&quot;: 1, &quot;title&quot;: &quot;Configure OAuth&quot;, ...}]`) 
- Refer to task structure details (previously linked to `tasks.mdc`).

## Configuration Management (Updated)

Taskmaster configuration is managed through two main mechanisms:

1.  **`.taskmaster/config.json` File (Primary):**
    *   Located in the project root directory.
    *   Stores most configuration settings: AI model selections (main, research, fallback), parameters (max tokens, temperature), logging level, default subtasks/priority, project name, etc.
    *   **Tagged System Settings**: Includes `global.defaultTag` (defaults to &quot;master&quot;) and `tags` section for tag management configuration.
    *   **Managed via `task-master models --setup` command.** Do not edit manually unless you know what you are doing.
    *   **View/Set specific models via `task-master models` command or `models` MCP tool.**
    *   Created automatically when you run `task-master models --setup` for the first time or during tagged system migration.

2.  **Environment Variables (`.env` / `mcp.json`):**
    *   Used **only** for sensitive API keys and specific endpoint URLs.
    *   Place API keys (one per provider) in a `.env` file in the project root for CLI usage.
    *   For MCP/Cursor integration, configure these keys in the `env` section of `.cursor/mcp.json`.
    *   Available keys/variables: See `assets/env.example` or the Configuration section in the command reference (previously linked to `taskmaster.mdc`).

3.  **`.taskmaster/state.json` File (Tagged System State):**
    *   Tracks current tag context and migration status.
    *   Automatically created during tagged system migration.
    *   Contains: `currentTag`, `lastSwitched`, `migrationNoticeShown`.

**Important:** Non-API key settings (like model selections, `MAX_TOKENS`, `TASKMASTER_LOG_LEVEL`) are **no longer configured via environment variables**. Use the `task-master models` command (or `--setup` for interactive configuration) or the `models` MCP tool.
**If AI commands FAIL in MCP** verify that the API key for the selected provider is present in the `env` section of `.cursor/mcp.json`.
**If AI commands FAIL in CLI** verify that the API key for the selected provider is present in the `.env` file in the root of the project.

## Rules Management

Taskmaster supports multiple AI coding assistant rule sets that can be configured during project initialization or managed afterward:

- **Available Profiles**: Claude Code, Cline, Codex, Cursor, Roo Code, Trae, Windsurf (claude, cline, codex, cursor, roo, trae, windsurf)
- **During Initialization**: Use `task-master init --rules cursor,windsurf` to specify which rule sets to include
- **After Initialization**: Use `task-master rules add &lt;profiles&gt;` or `task-master rules remove &lt;profiles&gt;` to manage rule sets
- **Interactive Setup**: Use `task-master rules setup` to launch an interactive prompt for selecting rule profiles
- **Default Behavior**: If no `--rules` flag is specified during initialization, all available rule profiles are included
- **Rule Structure**: Each profile creates its own directory (e.g., `.cursor/rules`, `.roo/rules`) with appropriate configuration files

## Determining the Next Task

- Run `next_task` / `task-master next` to show the next task to work on.
- The command identifies tasks with all dependencies satisfied
- Tasks are prioritized by priority level, dependency count, and ID
- The command shows comprehensive task information including:
    - Basic task details and description
    - Implementation details
    - Subtasks (if they exist)
    - Contextual suggested actions
- Recommended before starting any new development work
- Respects your project&apos;s dependency structure
- Ensures tasks are completed in the appropriate sequence
- Provides ready-to-use commands for common task actions

## Viewing Specific Task Details

- Run `get_task` / `task-master show &lt;id&gt;` to view a specific task.
- Use dot notation for subtasks: `task-master show 1.2` (shows subtask 2 of task 1)
- Displays comprehensive information similar to the next command, but for a specific task
- For parent tasks, shows all subtasks and their current status
- For subtasks, shows parent task information and relationship
- Provides contextual suggested actions appropriate for the specific task
- Useful for examining task details before implementation or checking status

## Managing Task Dependencies

- Use `add_dependency` / `task-master add-dependency --id=&lt;id&gt; --depends-on=&lt;id&gt;` to add a dependency.
- Use `remove_dependency` / `task-master remove-dependency --id=&lt;id&gt; --depends-on=&lt;id&gt;` to remove a dependency.
- The system prevents circular dependencies and duplicate dependency entries
- Dependencies are checked for existence before being added or removed
- Task files are automatically regenerated after dependency changes
- Dependencies are visualized with status indicators in task listings and files

## Task Reorganization

- Use `move_task` / `task-master move --from=&lt;id&gt; --to=&lt;id&gt;` to move tasks or subtasks within the hierarchy
- This command supports several use cases:
  - Moving a standalone task to become a subtask (e.g., `--from=5 --to=7`)
  - Moving a subtask to become a standalone task (e.g., `--from=5.2 --to=7`) 
  - Moving a subtask to a different parent (e.g., `--from=5.2 --to=7.3`)
  - Reordering subtasks within the same parent (e.g., `--from=5.2 --to=5.4`)
  - Moving a task to a new, non-existent ID position (e.g., `--from=5 --to=25`)
  - Moving multiple tasks at once using comma-separated IDs (e.g., `--from=10,11,12 --to=16,17,18`)
- The system includes validation to prevent data loss:
  - Allows moving to non-existent IDs by creating placeholder tasks
  - Prevents moving to existing task IDs that have content (to avoid overwriting)
  - Validates source tasks exist before attempting to move them
- The system maintains proper parent-child relationships and dependency integrity
- Task files are automatically regenerated after the move operation
- This provides greater flexibility in organizing and refining your task structure as project understanding evolves
- This is especially useful when dealing with potential merge conflicts arising from teams creating tasks on separate branches. Solve these conflicts very easily by moving your tasks and keeping theirs.

## Iterative Subtask Implementation

Once a task has been broken down into subtasks using `expand_task` or similar methods, follow this iterative process for implementation:

1.  **Understand the Goal (Preparation):**
    *   Use `get_task` / `task-master show &lt;subtaskId&gt;` (see @`taskmaster.mdc`) to thoroughly understand the specific goals and requirements of the subtask.

2.  **Initial Exploration &amp; Planning (Iteration 1):**
    *   This is the first attempt at creating a concrete implementation plan.
    *   Explore the codebase to identify the precise files, functions, and even specific lines of code that will need modification.
    *   Determine the intended code changes (diffs) and their locations.
    *   Gather *all* relevant details from this exploration phase.

3.  **Log the Plan:**
    *   Run `update_subtask` / `task-master update-subtask --id=&lt;subtaskId&gt; --prompt=&apos;&lt;detailed plan&gt;&apos;`.
    *   Provide the *complete and detailed* findings from the exploration phase in the prompt. Include file paths, line numbers, proposed diffs, reasoning, and any potential challenges identified. Do not omit details. The goal is to create a rich, timestamped log within the subtask&apos;s `details`.

4.  **Verify the Plan:**
    *   Run `get_task` / `task-master show &lt;subtaskId&gt;` again to confirm that the detailed implementation plan has been successfully appended to the subtask&apos;s details.

5.  **Begin Implementation:**
    *   Set the subtask status using `set_task_status` / `task-master set-status --id=&lt;subtaskId&gt; --status=in-progress`.
    *   Start coding based on the logged plan.

6.  **Refine and Log Progress (Iteration 2+):**
    *   As implementation progresses, you will encounter challenges, discover nuances, or confirm successful approaches.
    *   **Before appending new information**: Briefly review the *existing* details logged in the subtask (using `get_task` or recalling from context) to ensure the update adds fresh insights and avoids redundancy.
    *   **Regularly** use `update_subtask` / `task-master update-subtask --id=&lt;subtaskId&gt; --prompt=&apos;&lt;update details&gt;\n- What worked...\n- What didn&apos;t work...&apos;` to append new findings.
    *   **Crucially, log:**
        *   What worked (&quot;fundamental truths&quot; discovered).
        *   What didn&apos;t work and why (to avoid repeating mistakes).
        *   Specific code snippets or configurations that were successful.
        *   Decisions made, especially if confirmed with user input.
        *   Any deviations from the initial plan and the reasoning.
    *   The objective is to continuously enrich the subtask&apos;s details, creating a log of the implementation journey that helps the AI (and human developers) learn, adapt, and avoid repeating errors.

7.  **Review &amp; Update Rules (Post-Implementation):**
    *   Once the implementation for the subtask is functionally complete, review all code changes and the relevant chat history.
    *   Identify any new or modified code patterns, conventions, or best practices established during the implementation.
    *   Create new or update existing rules following internal guidelines (previously linked to `cursor_rules.mdc` and `self_improve.mdc`).

8.  **Mark Task Complete:**
    *   After verifying the implementation and updating any necessary rules, mark the subtask as completed: `set_task_status` / `task-master set-status --id=&lt;subtaskId&gt; --status=done`.

9.  **Commit Changes (If using Git):**
    *   Stage the relevant code changes and any updated/new rule files (`git add .`).
    *   Craft a comprehensive Git commit message summarizing the work done for the subtask, including both code implementation and any rule adjustments.
    *   Execute the commit command directly in the terminal (e.g., `git commit -m &apos;feat(module): Implement feature X for subtask &lt;subtaskId&gt;\n\n- Details about changes...\n- Updated rule Y for pattern Z&apos;`).
    *   Consider if a Changeset is needed according to internal versioning guidelines (previously linked to `changeset.mdc`). If so, run `npm run changeset`, stage the generated file, and amend the commit or create a new one.

10. **Proceed to Next Subtask:**
    *   Identify the next subtask (e.g., using `next_task` / `task-master next`).

## Code Analysis &amp; Refactoring Techniques

- **Top-Level Function Search**:
    - Useful for understanding module structure or planning refactors.
    - Use grep/ripgrep to find exported functions/constants:
      `rg &quot;export (async function|function|const) \w+&quot;` or similar patterns.
    - Can help compare functions between files during migrations or identify potential naming conflicts.

---
*This workflow provides a general guideline. Adapt it based on your specific project needs and team practices.*</file><file path="be/.cursor/rules/taskmaster/taskmaster.mdc">---
description: Comprehensive reference for Taskmaster MCP tools and CLI commands.
globs: **/*
alwaysApply: true
---

# Taskmaster Tool &amp; Command Reference

This document provides a detailed reference for interacting with Taskmaster, covering both the recommended MCP tools, suitable for integrations like Cursor, and the corresponding `task-master` CLI commands, designed for direct user interaction or fallback.

**Note:** For interacting with Taskmaster programmatically or via integrated tools, using the **MCP tools is strongly recommended** due to better performance, structured data, and error handling. The CLI commands serve as a user-friendly alternative and fallback. 

**Important:** Several MCP tools involve AI processing... The AI-powered tools include `parse_prd`, `analyze_project_complexity`, `update_subtask`, `update_task`, `update`, `expand_all`, `expand_task`, and `add_task`.

**üè∑Ô∏è Tagged Task Lists System:** Task Master now supports **tagged task lists** for multi-context task management. This allows you to maintain separate, isolated lists of tasks for different features, branches, or experiments. Existing projects are seamlessly migrated to use a default &quot;master&quot; tag. Most commands now support a `--tag &lt;name&gt;` flag to specify which context to operate on. If omitted, commands use the currently active tag.

---

## Initialization &amp; Setup

### 1. Initialize Project (`init`)

*   **MCP Tool:** `initialize_project`
*   **CLI Command:** `task-master init [options]`
*   **Description:** `Set up the basic Taskmaster file structure and configuration in the current directory for a new project.`
*   **Key CLI Options:**
    *   `--name &lt;name&gt;`: `Set the name for your project in Taskmaster&apos;s configuration.`
    *   `--description &lt;text&gt;`: `Provide a brief description for your project.`
    *   `--version &lt;version&gt;`: `Set the initial version for your project, e.g., &apos;0.1.0&apos;.`
    *   `-y, --yes`: `Initialize Taskmaster quickly using default settings without interactive prompts.`
*   **Usage:** Run this once at the beginning of a new project.
*   **MCP Variant Description:** `Set up the basic Taskmaster file structure and configuration in the current directory for a new project by running the &apos;task-master init&apos; command.`
*   **Key MCP Parameters/Options:**
    *   `projectName`: `Set the name for your project.` (CLI: `--name &lt;name&gt;`)
    *   `projectDescription`: `Provide a brief description for your project.` (CLI: `--description &lt;text&gt;`)
    *   `projectVersion`: `Set the initial version for your project, e.g., &apos;0.1.0&apos;.` (CLI: `--version &lt;version&gt;`)
    *   `authorName`: `Author name.` (CLI: `--author &lt;author&gt;`)
    *   `skipInstall`: `Skip installing dependencies. Default is false.` (CLI: `--skip-install`)
    *   `addAliases`: `Add shell aliases tm, taskmaster, hamster, and ham. Default is false.` (CLI: `--aliases`)
    *   `yes`: `Skip prompts and use defaults/provided arguments. Default is false.` (CLI: `-y, --yes`)
*   **Usage:** Run this once at the beginning of a new project, typically via an integrated tool like Cursor. Operates on the current working directory of the MCP server. 
*   **Important:** Once complete, you *MUST* parse a prd in order to generate tasks. There will be no tasks files until then. The next step after initializing should be to create a PRD using the example PRD in .taskmaster/templates/example_prd.txt. 
*   **Tagging:** Use the `--tag` option to parse the PRD into a specific, non-default tag context. If the tag doesn&apos;t exist, it will be created automatically. Example: `task-master parse-prd spec.txt --tag=new-feature`.

### 2. Parse PRD (`parse_prd`)

*   **MCP Tool:** `parse_prd`
*   **CLI Command:** `task-master parse-prd [file] [options]`
*   **Description:** `Parse a Product Requirements Document, PRD, or text file with Taskmaster to automatically generate an initial set of tasks in tasks.json.`
*   **Key Parameters/Options:**
    *   `input`: `Path to your PRD or requirements text file that Taskmaster should parse for tasks.` (CLI: `[file]` positional or `-i, --input &lt;file&gt;`)
    *   `output`: `Specify where Taskmaster should save the generated &apos;tasks.json&apos; file. Defaults to &apos;.taskmaster/tasks/tasks.json&apos;.` (CLI: `-o, --output &lt;file&gt;`)
    *   `numTasks`: `Approximate number of top-level tasks Taskmaster should aim to generate from the document.` (CLI: `-n, --num-tasks &lt;number&gt;`)
    *   `force`: `Use this to allow Taskmaster to overwrite an existing &apos;tasks.json&apos; without asking for confirmation.` (CLI: `-f, --force`)
*   **Usage:** Useful for bootstrapping a project from an existing requirements document.
*   **Notes:** Task Master will strictly adhere to any specific requirements mentioned in the PRD, such as libraries, database schemas, frameworks, tech stacks, etc., while filling in any gaps where the PRD isn&apos;t fully specified. Tasks are designed to provide the most direct implementation path while avoiding over-engineering.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress. If the user does not have a PRD, suggest discussing their idea and then use the example PRD in `.taskmaster/templates/example_prd.txt` as a template for creating the PRD based on their idea, for use with `parse-prd`.

---

## AI Model Configuration

### 2. Manage Models (`models`)
*   **MCP Tool:** `models`
*   **CLI Command:** `task-master models [options]`
*   **Description:** `View the current AI model configuration or set specific models for different roles (main, research, fallback). Allows setting custom model IDs for Ollama and OpenRouter.`
*   **Key MCP Parameters/Options:**
    *   `setMain &lt;model_id&gt;`: `Set the primary model ID for task generation/updates.` (CLI: `--set-main &lt;model_id&gt;`)
    *   `setResearch &lt;model_id&gt;`: `Set the model ID for research-backed operations.` (CLI: `--set-research &lt;model_id&gt;`)
    *   `setFallback &lt;model_id&gt;`: `Set the model ID to use if the primary fails.` (CLI: `--set-fallback &lt;model_id&gt;`)
    *   `ollama &lt;boolean&gt;`: `Indicates the set model ID is a custom Ollama model.` (CLI: `--ollama`)
    *   `openrouter &lt;boolean&gt;`: `Indicates the set model ID is a custom OpenRouter model.` (CLI: `--openrouter`)
    *   `listAvailableModels &lt;boolean&gt;`: `If true, lists available models not currently assigned to a role.` (CLI: No direct equivalent; CLI lists available automatically)
    *   `projectRoot &lt;string&gt;`: `Optional. Absolute path to the project root directory.` (CLI: Determined automatically)
*   **Key CLI Options:**
    *   `--set-main &lt;model_id&gt;`: `Set the primary model.`
    *   `--set-research &lt;model_id&gt;`: `Set the research model.`
    *   `--set-fallback &lt;model_id&gt;`: `Set the fallback model.`
    *   `--ollama`: `Specify that the provided model ID is for Ollama (use with --set-*).`
    *   `--openrouter`: `Specify that the provided model ID is for OpenRouter (use with --set-*). Validates against OpenRouter API.`
    *   `--bedrock`: `Specify that the provided model ID is for AWS Bedrock (use with --set-*).`
    *   `--setup`: `Run interactive setup to configure models, including custom Ollama/OpenRouter IDs.`
*   **Usage (MCP):** Call without set flags to get current config. Use `setMain`, `setResearch`, or `setFallback` with a valid model ID to update the configuration. Use `listAvailableModels: true` to get a list of unassigned models. To set a custom model, provide the model ID and set `ollama: true` or `openrouter: true`.
*   **Usage (CLI):** Run without flags to view current configuration and available models. Use set flags to update specific roles. Use `--setup` for guided configuration, including custom models. To set a custom model via flags, use `--set-&lt;role&gt;=&lt;model_id&gt;` along with either `--ollama` or `--openrouter`.
*   **Notes:** Configuration is stored in `.taskmaster/config.json` in the project root. This command/tool modifies that file. Use `listAvailableModels` or `task-master models` to see internally supported models. OpenRouter custom models are validated against their live API. Ollama custom models are not validated live.
*   **API note:** API keys for selected AI providers (based on their model) need to exist in the mcp.json file to be accessible in MCP context. The API keys must be present in the local .env file for the CLI to be able to read them.
*   **Model costs:** The costs in supported models are expressed in dollars. An input/output value of 3 is $3.00. A value of 0.8 is $0.80. 
*   **Warning:** DO NOT MANUALLY EDIT THE .taskmaster/config.json FILE. Use the included commands either in the MCP or CLI format as needed. Always prioritize MCP tools when available and use the CLI as a fallback.

---

## Task Listing &amp; Viewing

### 3. Get Tasks (`get_tasks`)

*   **MCP Tool:** `get_tasks`
*   **CLI Command:** `task-master list [options]`
*   **Description:** `List your Taskmaster tasks, optionally filtering by status and showing subtasks.`
*   **Key Parameters/Options:**
    *   `status`: `Show only Taskmaster tasks matching this status (or multiple statuses, comma-separated), e.g., &apos;pending&apos; or &apos;done,in-progress&apos;.` (CLI: `-s, --status &lt;status&gt;`)
    *   `withSubtasks`: `Include subtasks indented under their parent tasks in the list.` (CLI: `--with-subtasks`)
    *   `tag`: `Specify which tag context to list tasks from. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
    *   `watch`: `Watch for changes and auto-refresh the list in real-time. Works with file storage (fs.watch) and API storage (Supabase Realtime).` (CLI: `-w, --watch`)
*   **Usage:** Get an overview of the project status, often used at the start of a work session. Use `--watch` to keep the list live-updating as tasks change.

### 4. Get Next Task (`next_task`)

*   **MCP Tool:** `next_task`
*   **CLI Command:** `task-master next [options]`
*   **Description:** `Ask Taskmaster to show the next available task you can work on, based on status and completed dependencies.`
*   **Key Parameters/Options:**
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
    *   `tag`: `Specify which tag context to use. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
*   **Usage:** Identify what to work on next according to the plan.

### 5. Get Task Details (`get_task`)

*   **MCP Tool:** `get_task`
*   **CLI Command:** `task-master show [id] [options]`
*   **Description:** `Display detailed information for one or more specific Taskmaster tasks or subtasks by ID.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task (e.g., &apos;15&apos;), subtask (e.g., &apos;15.2&apos;), or a comma-separated list of IDs (&apos;1,5,10.2&apos;) you want to view.` (CLI: `[id]` positional or `-i, --id &lt;id&gt;`)
    *   `tag`: `Specify which tag context to get the task(s) from. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Understand the full details for a specific task. When multiple IDs are provided, a summary table is shown.
*   **CRITICAL INFORMATION** If you need to collect information from multiple tasks, use comma-separated IDs (i.e. 1,2,3) to receive an array of tasks. Do not needlessly get tasks one at a time if you need to get many as that is wasteful.

---

## Task Creation &amp; Modification

### 6. Add Task (`add_task`)

*   **MCP Tool:** `add_task`
*   **CLI Command:** `task-master add-task [options]`
*   **Description:** `Add a new task to Taskmaster by describing it; AI will structure it.`
*   **Key Parameters/Options:**
    *   `prompt`: `Required. Describe the new task you want Taskmaster to create, e.g., &quot;Implement user authentication using JWT&quot;.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `dependencies`: `Specify the IDs of any Taskmaster tasks that must be completed before this new one can start, e.g., &apos;12,14&apos;.` (CLI: `-d, --dependencies &lt;ids&gt;`)
    *   `priority`: `Set the priority for the new task: &apos;high&apos;, &apos;medium&apos;, or &apos;low&apos;. Default is &apos;medium&apos;.` (CLI: `--priority &lt;priority&gt;`)
    *   `research`: `Enable Taskmaster to use the research role for potentially more informed task creation.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context to add the task to. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Quickly add newly identified tasks during development.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 7. Add Subtask (`add_subtask`)

*   **MCP Tool:** `add_subtask`
*   **CLI Command:** `task-master add-subtask [options]`
*   **Description:** `Add a new subtask to a Taskmaster parent task, or convert an existing task into a subtask.`
*   **Key Parameters/Options:**
    *   `id` / `parent`: `Required. The ID of the Taskmaster task that will be the parent.` (MCP: `id`, CLI: `-p, --parent &lt;id&gt;`)
    *   `taskId`: `Use this if you want to convert an existing top-level Taskmaster task into a subtask of the specified parent.` (CLI: `-i, --task-id &lt;id&gt;`)
    *   `title`: `Required if not using taskId. The title for the new subtask Taskmaster should create.` (CLI: `-t, --title &lt;title&gt;`)
    *   `description`: `A brief description for the new subtask.` (CLI: `-d, --description &lt;text&gt;`)
    *   `details`: `Provide implementation notes or details for the new subtask.` (CLI: `--details &lt;text&gt;`)
    *   `dependencies`: `Specify IDs of other tasks or subtasks, e.g., &apos;15&apos; or &apos;16.1&apos;, that must be done before this new subtask.` (CLI: `--dependencies &lt;ids&gt;`)
    *   `status`: `Set the initial status for the new subtask. Default is &apos;pending&apos;.` (CLI: `-s, --status &lt;status&gt;`)
    *   `generate`: `Enable Taskmaster to regenerate markdown task files after adding the subtask.` (CLI: `--generate`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Break down tasks manually or reorganize existing tasks.

### 8. Update Tasks (`update`)

*   **MCP Tool:** `update`
*   **CLI Command:** `task-master update [options]`
*   **Description:** `Update multiple upcoming tasks in Taskmaster based on new context or changes, starting from a specific task ID.`
*   **Key Parameters/Options:**
    *   `from`: `Required. The ID of the first task Taskmaster should update. All tasks with this ID or higher that are not &apos;done&apos; will be considered.` (CLI: `--from &lt;id&gt;`)
    *   `prompt`: `Required. Explain the change or new context for Taskmaster to apply to the tasks, e.g., &quot;We are now using React Query instead of Redux Toolkit for data fetching&quot;.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `research`: `Enable Taskmaster to use the research role for more informed updates. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Handle significant implementation changes or pivots that affect multiple future tasks. Example CLI: `task-master update --from=&apos;18&apos; --prompt=&apos;Switching to React Query.\nNeed to refactor data fetching...&apos;`
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 9. Update Task (`update_task`)

*   **MCP Tool:** `update_task`
*   **CLI Command:** `task-master update-task [options]`
*   **Description:** `Modify a specific Taskmaster task by ID, incorporating new information or changes. By default, this replaces the existing task details.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The specific ID of the Taskmaster task, e.g., &apos;15&apos;, you want to update.` (CLI: `-i, --id &lt;id&gt;`)
    *   `prompt`: `Required. Explain the specific changes or provide the new information Taskmaster should incorporate into this task.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `append`: `If true, appends the prompt content to the task&apos;s details with a timestamp, rather than replacing them. Behaves like update-subtask.` (CLI: `--append`)
    *   `research`: `Enable Taskmaster to use the research role for more informed updates. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context the task belongs to. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Refine a specific task based on new understanding. Use `--append` to log progress without creating subtasks.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 10. Update Subtask (`update_subtask`)

*   **MCP Tool:** `update_subtask`
*   **CLI Command:** `task-master update-subtask [options]`
*   **Description:** `Append timestamped notes or details to a specific Taskmaster subtask without overwriting existing content. Intended for iterative implementation logging.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster subtask, e.g., &apos;5.2&apos;, to update with new information.` (CLI: `-i, --id &lt;id&gt;`)
    *   `prompt`: `Required. The information, findings, or progress notes to append to the subtask&apos;s details with a timestamp.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `research`: `Enable Taskmaster to use the research role for more informed updates. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context the subtask belongs to. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Log implementation progress, findings, and discoveries during subtask development. Each update is timestamped and appended to preserve the implementation journey.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 11. Set Task Status (`set_task_status`)

*   **MCP Tool:** `set_task_status`
*   **CLI Command:** `task-master set-status [options]`
*   **Description:** `Update the status of one or more Taskmaster tasks or subtasks, e.g., &apos;pending&apos;, &apos;in-progress&apos;, &apos;done&apos;.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID(s) of the Taskmaster task(s) or subtask(s), e.g., &apos;15&apos;, &apos;15.2&apos;, or &apos;16,17.1&apos;, to update.` (CLI: `-i, --id &lt;id&gt;`)
    *   `status`: `Required. The new status to set, e.g., &apos;done&apos;, &apos;pending&apos;, &apos;in-progress&apos;, &apos;review&apos;, &apos;cancelled&apos;.` (CLI: `-s, --status &lt;status&gt;`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Mark progress as tasks move through the development cycle.

### 12. Remove Task (`remove_task`)

*   **MCP Tool:** `remove_task`
*   **CLI Command:** `task-master remove-task [options]`
*   **Description:** `Permanently remove a task or subtask from the Taskmaster tasks list.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task, e.g., &apos;5&apos;, or subtask, e.g., &apos;5.2&apos;, to permanently remove.` (CLI: `-i, --id &lt;id&gt;`)
    *   `yes`: `Skip the confirmation prompt and immediately delete the task.` (CLI: `-y, --yes`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Permanently delete tasks or subtasks that are no longer needed in the project.
*   **Notes:** Use with caution as this operation cannot be undone. Consider using &apos;blocked&apos;, &apos;cancelled&apos;, or &apos;deferred&apos; status instead if you just want to exclude a task from active planning but keep it for reference. The command automatically cleans up dependency references in other tasks.

---

## Task Structure &amp; Breakdown

### 13. Expand Task (`expand_task`)

*   **MCP Tool:** `expand_task`
*   **CLI Command:** `task-master expand [options]`
*   **Description:** `Use Taskmaster&apos;s AI to break down a complex task into smaller, manageable subtasks. Appends subtasks by default.`
*   **Key Parameters/Options:**
    *   `id`: `The ID of the specific Taskmaster task you want to break down into subtasks.` (CLI: `-i, --id &lt;id&gt;`)
    *   `num`: `Optional: Suggests how many subtasks Taskmaster should aim to create. Uses complexity analysis/defaults otherwise.` (CLI: `-n, --num &lt;number&gt;`)
    *   `research`: `Enable Taskmaster to use the research role for more informed subtask generation. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `prompt`: `Optional: Provide extra context or specific instructions to Taskmaster for generating the subtasks.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `force`: `Optional: If true, clear existing subtasks before generating new ones. Default is false (append).` (CLI: `--force`)
    *   `tag`: `Specify which tag context the task belongs to. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Generate a detailed implementation plan for a complex task before starting coding. Automatically uses complexity report recommendations if available and `num` is not specified.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 14. Expand All Tasks (`expand_all`)

*   **MCP Tool:** `expand_all`
*   **CLI Command:** `task-master expand --all [options]` (Note: CLI uses the `expand` command with the `--all` flag)
*   **Description:** `Tell Taskmaster to automatically expand all eligible pending/in-progress tasks based on complexity analysis or defaults. Appends subtasks by default.`
*   **Key Parameters/Options:**
    *   `num`: `Optional: Suggests how many subtasks Taskmaster should aim to create per task.` (CLI: `-n, --num &lt;number&gt;`)
    *   `research`: `Enable research role for more informed subtask generation. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `prompt`: `Optional: Provide extra context for Taskmaster to apply generally during expansion.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `force`: `Optional: If true, clear existing subtasks before generating new ones for each eligible task. Default is false (append).` (CLI: `--force`)
    *   `tag`: `Specify which tag context to expand. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Useful after initial task generation or complexity analysis to break down multiple tasks at once.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 15. Clear Subtasks (`clear_subtasks`)

*   **MCP Tool:** `clear_subtasks`
*   **CLI Command:** `task-master clear-subtasks [options]`
*   **Description:** `Remove all subtasks from one or more specified Taskmaster parent tasks.`
*   **Key Parameters/Options:**
    *   `id`: `The ID(s) of the Taskmaster parent task(s) whose subtasks you want to remove, e.g., &apos;15&apos; or &apos;16,18&apos;. Required unless using &apos;all&apos;.` (CLI: `-i, --id &lt;ids&gt;`)
    *   `all`: `Tell Taskmaster to remove subtasks from all parent tasks.` (CLI: `--all`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Used before regenerating subtasks with `expand_task` if the previous breakdown needs replacement.

### 16. Remove Subtask (`remove_subtask`)

*   **MCP Tool:** `remove_subtask`
*   **CLI Command:** `task-master remove-subtask [options]`
*   **Description:** `Remove a subtask from its Taskmaster parent, optionally converting it into a standalone task.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID(s) of the Taskmaster subtask(s) to remove, e.g., &apos;15.2&apos; or &apos;16.1,16.3&apos;.` (CLI: `-i, --id &lt;id&gt;`)
    *   `convert`: `If used, Taskmaster will turn the subtask into a regular top-level task instead of deleting it.` (CLI: `-c, --convert`)
    *   `generate`: `Enable Taskmaster to regenerate markdown task files after removing the subtask.` (CLI: `--generate`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Delete unnecessary subtasks or promote a subtask to a top-level task.

### 17. Move Task (`move_task`)

*   **MCP Tool:** `move_task`
*   **CLI Command:** `task-master move [options]`
*   **Description:** `Move a task or subtask to a new position within the task hierarchy.`
*   **Key Parameters/Options:**
    *   `from`: `Required. ID of the task/subtask to move (e.g., &quot;5&quot; or &quot;5.2&quot;). Can be comma-separated for multiple tasks.` (CLI: `--from &lt;id&gt;`)
    *   `to`: `Required. ID of the destination (e.g., &quot;7&quot; or &quot;7.3&quot;). Must match the number of source IDs if comma-separated.` (CLI: `--to &lt;id&gt;`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Reorganize tasks by moving them within the hierarchy. Supports various scenarios like:
    *   Moving a task to become a subtask
    *   Moving a subtask to become a standalone task
    *   Moving a subtask to a different parent
    *   Reordering subtasks within the same parent
    *   Moving a task to a new, non-existent ID (automatically creates placeholders)
    *   Moving multiple tasks at once with comma-separated IDs
*   **Validation Features:**
    *   Allows moving tasks to non-existent destination IDs (creates placeholder tasks)
    *   Prevents moving to existing task IDs that already have content (to avoid overwriting)
    *   Validates that source tasks exist before attempting to move them
    *   Maintains proper parent-child relationships
*   **Example CLI:** `task-master move --from=5.2 --to=7.3` to move subtask 5.2 to become subtask 7.3.
*   **Example Multi-Move:** `task-master move --from=10,11,12 --to=16,17,18` to move multiple tasks to new positions.
*   **Common Use:** Resolving merge conflicts in tasks.json when multiple team members create tasks on different branches.

---

## Dependency Management

### 18. Add Dependency (`add_dependency`)

*   **MCP Tool:** `add_dependency`
*   **CLI Command:** `task-master add-dependency [options]`
*   **Description:** `Define a dependency in Taskmaster, making one task a prerequisite for another.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task that will depend on another.` (CLI: `-i, --id &lt;id&gt;`)
    *   `dependsOn`: `Required. The ID of the Taskmaster task that must be completed first, the prerequisite.` (CLI: `-d, --depends-on &lt;id&gt;`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;path&gt;`)
*   **Usage:** Establish the correct order of execution between tasks.

### 19. Remove Dependency (`remove_dependency`)

*   **MCP Tool:** `remove_dependency`
*   **CLI Command:** `task-master remove-dependency [options]`
*   **Description:** `Remove a dependency relationship between two Taskmaster tasks.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task you want to remove a prerequisite from.` (CLI: `-i, --id &lt;id&gt;`)
    *   `dependsOn`: `Required. The ID of the Taskmaster task that should no longer be a prerequisite.` (CLI: `-d, --depends-on &lt;id&gt;`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Update task relationships when the order of execution changes.

### 20. Validate Dependencies (`validate_dependencies`)

*   **MCP Tool:** `validate_dependencies`
*   **CLI Command:** `task-master validate-dependencies [options]`
*   **Description:** `Check your Taskmaster tasks for dependency issues (like circular references or links to non-existent tasks) without making changes.`
*   **Key Parameters/Options:**
    *   `tag`: `Specify which tag context to validate. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Audit the integrity of your task dependencies.

### 21. Fix Dependencies (`fix_dependencies`)

*   **MCP Tool:** `fix_dependencies`
*   **CLI Command:** `task-master fix-dependencies [options]`
*   **Description:** `Automatically fix dependency issues (like circular references or links to non-existent tasks) in your Taskmaster tasks.`
*   **Key Parameters/Options:**
    *   `tag`: `Specify which tag context to fix dependencies in. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Clean up dependency errors automatically.

---

## Analysis &amp; Reporting

### 22. Analyze Project Complexity (`analyze_project_complexity`)

*   **MCP Tool:** `analyze_project_complexity`
*   **CLI Command:** `task-master analyze-complexity [options]`
*   **Description:** `Have Taskmaster analyze your tasks to determine their complexity and suggest which ones need to be broken down further.`
*   **Key Parameters/Options:**
    *   `output`: `Where to save the complexity analysis report. Default is &apos;.taskmaster/reports/task-complexity-report.json&apos; (or &apos;..._tagname.json&apos; if a tag is used).` (CLI: `-o, --output &lt;file&gt;`)
    *   `threshold`: `The minimum complexity score (1-10) that should trigger a recommendation to expand a task.` (CLI: `-t, --threshold &lt;number&gt;`)
    *   `research`: `Enable research role for more accurate complexity analysis. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context to analyze. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Used before breaking down tasks to identify which ones need the most attention.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 23. View Complexity Report (`complexity_report`)

*   **MCP Tool:** `complexity_report`
*   **CLI Command:** `task-master complexity-report [options]`
*   **Description:** `Display the task complexity analysis report in a readable format.`
*   **Key Parameters/Options:**
    *   `tag`: `Specify which tag context to show the report for. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to the complexity report (default: &apos;.taskmaster/reports/task-complexity-report.json&apos;).` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Review and understand the complexity analysis results after running analyze-complexity.

---

## File Management

### 24. Generate Task Files (`generate`)

*   **MCP Tool:** `generate`
*   **CLI Command:** `task-master generate [options]`
*   **Description:** `Create or update individual Markdown files for each task based on your tasks.json.`
*   **Key Parameters/Options:**
    *   `output`: `The directory where Taskmaster should save the task files (default: in a &apos;tasks&apos; directory).` (CLI: `-o, --output &lt;directory&gt;`)
    *   `tag`: `Specify which tag context to generate files for. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Run this after making changes to tasks.json to keep individual task files up to date. This command is now manual and no longer runs automatically.

---

## AI-Powered Research

### 25. Research (`research`)

*   **MCP Tool:** `research`
*   **CLI Command:** `task-master research [options]`
*   **Description:** `Perform AI-powered research queries with project context to get fresh, up-to-date information beyond the AI&apos;s knowledge cutoff.`
*   **Key Parameters/Options:**
    *   `query`: `Required. Research query/prompt (e.g., &quot;What are the latest best practices for React Query v5?&quot;).` (CLI: `[query]` positional or `-q, --query &lt;text&gt;`)
    *   `taskIds`: `Comma-separated list of task/subtask IDs from the current tag context (e.g., &quot;15,16.2,17&quot;).` (CLI: `-i, --id &lt;ids&gt;`)
    *   `filePaths`: `Comma-separated list of file paths for context (e.g., &quot;src/api.js,docs/readme.md&quot;).` (CLI: `-f, --files &lt;paths&gt;`)
    *   `customContext`: `Additional custom context text to include in the research.` (CLI: `-c, --context &lt;text&gt;`)
    *   `includeProjectTree`: `Include project file tree structure in context (default: false).` (CLI: `--tree`)
    *   `detailLevel`: `Detail level for the research response: &apos;low&apos;, &apos;medium&apos;, &apos;high&apos; (default: medium).` (CLI: `--detail &lt;level&gt;`)
    *   `saveTo`: `Task or subtask ID (e.g., &quot;15&quot;, &quot;15.2&quot;) to automatically save the research conversation to.` (CLI: `--save-to &lt;id&gt;`)
    *   `saveFile`: `If true, saves the research conversation to a markdown file in &apos;.taskmaster/docs/research/&apos;.` (CLI: `--save-file`)
    *   `noFollowup`: `Disables the interactive follow-up question menu in the CLI.` (CLI: `--no-followup`)
    *   `tag`: `Specify which tag context to use for task-based context gathering. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `projectRoot`: `The directory of the project. Must be an absolute path.` (CLI: Determined automatically)
*   **Usage:** **This is a POWERFUL tool that agents should use FREQUENTLY** to:
    *   Get fresh information beyond knowledge cutoff dates
    *   Research latest best practices, library updates, security patches
    *   Find implementation examples for specific technologies
    *   Validate approaches against current industry standards
    *   Get contextual advice based on project files and tasks
*   **When to Consider Using Research:**
    *   **Before implementing any task** - Research current best practices
    *   **When encountering new technologies** - Get up-to-date implementation guidance (libraries, apis, etc)
    *   **For security-related tasks** - Find latest security recommendations
    *   **When updating dependencies** - Research breaking changes and migration guides
    *   **For performance optimization** - Get current performance best practices
    *   **When debugging complex issues** - Research known solutions and workarounds
*   **Research + Action Pattern:**
    *   Use `research` to gather fresh information
    *   Use `update_subtask` to commit findings with timestamps
    *   Use `update_task` to incorporate research into task details
    *   Use `add_task` with research flag for informed task creation
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. The research provides FRESH data beyond the AI&apos;s training cutoff, making it invaluable for current best practices and recent developments.

---

## Tag Management

This new suite of commands allows you to manage different task contexts (tags).

### 26. List Tags (`tags`)

*   **MCP Tool:** `list_tags`
*   **CLI Command:** `task-master tags [options]`
*   **Description:** `List all available tags with task counts, completion status, and other metadata.`
*   **Key Parameters/Options:**
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
    *   `--show-metadata`: `Include detailed metadata in the output (e.g., creation date, description).` (CLI: `--show-metadata`)

### 27. Add Tag (`add_tag`)

*   **MCP Tool:** `add_tag`
*   **CLI Command:** `task-master add-tag &lt;tagName&gt; [options]`
*   **Description:** `Create a new, empty tag context, or copy tasks from another tag.`
*   **Key Parameters/Options:**
    *   `tagName`: `Name of the new tag to create (alphanumeric, hyphens, underscores).` (CLI: `&lt;tagName&gt;` positional)
    *   `--from-branch`: `Creates a tag with a name derived from the current git branch, ignoring the &lt;tagName&gt; argument.` (CLI: `--from-branch`)
    *   `--copy-from-current`: `Copy tasks from the currently active tag to the new tag.` (CLI: `--copy-from-current`)
    *   `--copy-from &lt;tag&gt;`: `Copy tasks from a specific source tag to the new tag.` (CLI: `--copy-from &lt;tag&gt;`)
    *   `--description &lt;text&gt;`: `Provide an optional description for the new tag.` (CLI: `-d, --description &lt;text&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)

### 28. Delete Tag (`delete_tag`)

*   **MCP Tool:** `delete_tag`
*   **CLI Command:** `task-master delete-tag &lt;tagName&gt; [options]`
*   **Description:** `Permanently delete a tag and all of its associated tasks.`
*   **Key Parameters/Options:**
    *   `tagName`: `Name of the tag to delete.` (CLI: `&lt;tagName&gt;` positional)
    *   `--yes`: `Skip the confirmation prompt.` (CLI: `-y, --yes`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)

### 29. Use Tag (`use_tag`)

*   **MCP Tool:** `use_tag`
*   **CLI Command:** `task-master use-tag &lt;tagName&gt;`
*   **Description:** `Switch your active task context to a different tag.`
*   **Key Parameters/Options:**
    *   `tagName`: `Name of the tag to switch to.` (CLI: `&lt;tagName&gt;` positional)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)

### 30. Rename Tag (`rename_tag`)

*   **MCP Tool:** `rename_tag`
*   **CLI Command:** `task-master rename-tag &lt;oldName&gt; &lt;newName&gt;`
*   **Description:** `Rename an existing tag.`
*   **Key Parameters/Options:**
    *   `oldName`: `The current name of the tag.` (CLI: `&lt;oldName&gt;` positional)
    *   `newName`: `The new name for the tag.` (CLI: `&lt;newName&gt;` positional)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)

### 31. Copy Tag (`copy_tag`)

*   **MCP Tool:** `copy_tag`
*   **CLI Command:** `task-master copy-tag &lt;sourceName&gt; &lt;targetName&gt; [options]`
*   **Description:** `Copy an entire tag context, including all its tasks and metadata, to a new tag.`
*   **Key Parameters/Options:**
    *   `sourceName`: `Name of the tag to copy from.` (CLI: `&lt;sourceName&gt;` positional)
    *   `targetName`: `Name of the new tag to create.` (CLI: `&lt;targetName&gt;` positional)
    *   `--description &lt;text&gt;`: `Optional description for the new tag.` (CLI: `-d, --description &lt;text&gt;`)

---

## Miscellaneous

### 32. Sync Readme (`sync-readme`) -- experimental

*   **MCP Tool:** N/A
*   **CLI Command:** `task-master sync-readme [options]`
*   **Description:** `Exports your task list to your project&apos;s README.md file, useful for showcasing progress.`
*   **Key Parameters/Options:**
    *   `status`: `Filter tasks by status (e.g., &apos;pending&apos;, &apos;done&apos;).` (CLI: `-s, --status &lt;status&gt;`)
    *   `withSubtasks`: `Include subtasks in the export.` (CLI: `--with-subtasks`)
    *   `tag`: `Specify which tag context to export from. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)

---

## Environment Variables Configuration (Updated)

Taskmaster primarily uses the **`.taskmaster/config.json`** file (in project root) for configuration (models, parameters, logging level, etc.), managed via `task-master models --setup`.

Environment variables are used **only** for sensitive API keys related to AI providers and specific overrides like the Ollama base URL:

*   **API Keys (Required for corresponding provider):**
    *   `ANTHROPIC_API_KEY`
    *   `PERPLEXITY_API_KEY`
    *   `OPENAI_API_KEY`
    *   `GOOGLE_API_KEY`
    *   `MISTRAL_API_KEY`
    *   `AZURE_OPENAI_API_KEY` (Requires `AZURE_OPENAI_ENDPOINT` too)
    *   `OPENROUTER_API_KEY`
    *   `XAI_API_KEY`
    *   `OLLAMA_API_KEY` (Requires `OLLAMA_BASE_URL` too)
*   **Endpoints (Optional/Provider Specific inside .taskmaster/config.json):**
    *   `AZURE_OPENAI_ENDPOINT`
    *   `OLLAMA_BASE_URL` (Default: `http://localhost:11434/api`)

**Set API keys** in your **`.env`** file in the project root (for CLI use) or within the `env` section of your **`.cursor/mcp.json`** file (for MCP/Cursor integration). All other settings (model choice, max tokens, temperature, log level, custom endpoints) are managed in `.taskmaster/config.json` via `task-master models` command or `models` MCP tool.

---

## MCP Tool Tiers

Default: `core` (7 tools). Set via `TASK_MASTER_TOOLS` env var in MCP config.

| Tier | Count | Tools |
|------|-------|-------|
| `core` | 7 | `get_tasks`, `next_task`, `get_task`, `set_task_status`, `update_subtask`, `parse_prd`, `expand_task` |
| `standard` | 14 | core + `initialize_project`, `analyze_project_complexity`, `expand_all`, `add_subtask`, `remove_task`, `add_task`, `complexity_report` |
| `all` | 44+ | standard + dependencies, tags, research, autopilot, scoping, models, rules |

**Upgrade when tool unavailable:** Edit MCP config (`.cursor/mcp.json`, `.mcp.json`, or `.vscode/mcp.json`), change `TASK_MASTER_TOOLS` from `&quot;core&quot;` to `&quot;standard&quot;` or `&quot;all&quot;`, restart MCP.

---

For details on how these commands fit into the development process, see the [dev_workflow.mdc](mdc:.cursor/rules/taskmaster/dev_workflow.mdc).</file><file path="be/.cursor/rules/cursor_rules.mdc">---
description: Guidelines for creating and maintaining Cursor rules to ensure consistency and effectiveness.
globs: .cursor/rules/*.mdc
alwaysApply: true
---

- **Required Rule Structure:**
  ```markdown
  ---
  description: Clear, one-line description of what the rule enforces
  globs: path/to/files/*.ext, other/path/**/*
  alwaysApply: boolean
  ---

  - **Main Points in Bold**
    - Sub-points with details
    - Examples and explanations
  ```

- **File References:**
  - Use `[filename](mdc:path/to/file)` ([filename](mdc:filename)) to reference files
  - Example: [prisma.mdc](mdc:.cursor/rules/prisma.mdc) for rule references
  - Example: [schema.prisma](mdc:prisma/schema.prisma) for code references

- **Code Examples:**
  - Use language-specific code blocks
  ```typescript
  // ‚úÖ DO: Show good examples
  const goodExample = true;
  
  // ‚ùå DON&apos;T: Show anti-patterns
  const badExample = false;
  ```

- **Rule Content Guidelines:**
  - Start with high-level overview
  - Include specific, actionable requirements
  - Show examples of correct implementation
  - Reference existing code when possible
  - Keep rules DRY by referencing other rules

- **Rule Maintenance:**
  - Update rules when new patterns emerge
  - Add examples from actual codebase
  - Remove outdated patterns
  - Cross-reference related rules

- **Best Practices:**
  - Use bullet points for clarity
  - Keep descriptions concise
  - Include both DO and DON&apos;T examples
  - Reference actual code over theoretical examples
  - Use consistent formatting across rules</file><file path="be/.cursor/rules/self_improve.mdc">---
description: Guidelines for continuously improving Cursor rules based on emerging code patterns and best practices.
globs: **/*
alwaysApply: true
---

- **Rule Improvement Triggers:**
  - New code patterns not covered by existing rules
  - Repeated similar implementations across files
  - Common error patterns that could be prevented
  - New libraries or tools being used consistently
  - Emerging best practices in the codebase

- **Analysis Process:**
  - Compare new code with existing rules
  - Identify patterns that should be standardized
  - Look for references to external documentation
  - Check for consistent error handling patterns
  - Monitor test patterns and coverage

- **Rule Updates:**
  - **Add New Rules When:**
    - A new technology/pattern is used in 3+ files
    - Common bugs could be prevented by a rule
    - Code reviews repeatedly mention the same feedback
    - New security or performance patterns emerge

  - **Modify Existing Rules When:**
    - Better examples exist in the codebase
    - Additional edge cases are discovered
    - Related rules have been updated
    - Implementation details have changed

- **Example Pattern Recognition:**
  ```typescript
  // If you see repeated patterns like:
  const data = await prisma.user.findMany({
    select: { id: true, email: true },
    where: { status: &apos;ACTIVE&apos; }
  });
  
  // Consider adding to [prisma.mdc](mdc:.cursor/rules/prisma.mdc):
  // - Standard select fields
  // - Common where conditions
  // - Performance optimization patterns
  ```

- **Rule Quality Checks:**
  - Rules should be actionable and specific
  - Examples should come from actual code
  - References should be up to date
  - Patterns should be consistently enforced

- **Continuous Improvement:**
  - Monitor code review comments
  - Track common development questions
  - Update rules after major refactors
  - Add links to relevant documentation
  - Cross-reference related rules

- **Rule Deprecation:**
  - Mark outdated patterns as deprecated
  - Remove rules that no longer apply
  - Update references to deprecated rules
  - Document migration paths for old patterns

- **Documentation Updates:**
  - Keep examples synchronized with code
  - Update references to external docs
  - Maintain links between related rules
  - Document breaking changes
Follow [cursor_rules.mdc](mdc:.cursor/rules/cursor_rules.mdc) for proper rule formatting and structure.</file><file path="be/.cursor/rules/ultracite.mdc">---
description: Ultracite Rules - AI-Ready Formatter and Linter
globs: &quot;**/*.{ts,tsx,js,jsx}&quot;
alwaysApply: true
---

# Project Context
Ultracite enforces strict type safety, accessibility standards, and consistent code quality for JavaScript/TypeScript projects using Biome&apos;s lightning-fast formatter and linter.

## Key Principles
- Zero configuration required
- Subsecond performance
- Maximum type safety
- AI-friendly code generation

## Before Writing Code
1. Analyze existing patterns in the codebase
2. Consider edge cases and error scenarios
3. Follow the rules below strictly
4. Validate accessibility requirements

## Rules

### Accessibility (a11y)
- Don&apos;t use `accessKey` attribute on any HTML element.
- Don&apos;t set `aria-hidden=&quot;true&quot;` on focusable elements.
- Don&apos;t add ARIA roles, states, and properties to elements that don&apos;t support them.
- Don&apos;t use distracting elements like `&lt;marquee&gt;` or `&lt;blink&gt;`.
- Only use the `scope` prop on `&lt;th&gt;` elements.
- Don&apos;t assign non-interactive ARIA roles to interactive HTML elements.
- Make sure label elements have text content and are associated with an input.
- Don&apos;t assign interactive ARIA roles to non-interactive HTML elements.
- Don&apos;t assign `tabIndex` to non-interactive HTML elements.
- Don&apos;t use positive integers for `tabIndex` property.
- Don&apos;t include &quot;image&quot;, &quot;picture&quot;, or &quot;photo&quot; in img alt prop.
- Don&apos;t use explicit role property that&apos;s the same as the implicit/default role.
- Make static elements with click handlers use a valid role attribute.
- Always include a `title` element for SVG elements.
- Give all elements requiring alt text meaningful information for screen readers.
- Make sure anchors have content that&apos;s accessible to screen readers.
- Assign `tabIndex` to non-interactive HTML elements with `aria-activedescendant`.
- Include all required ARIA attributes for elements with ARIA roles.
- Make sure ARIA properties are valid for the element&apos;s supported roles.
- Always include a `type` attribute for button elements.
- Make elements with interactive roles and handlers focusable.
- Give heading elements content that&apos;s accessible to screen readers (not hidden with `aria-hidden`).
- Always include a `lang` attribute on the html element.
- Always include a `title` attribute for iframe elements.
- Accompany `onClick` with at least one of: `onKeyUp`, `onKeyDown`, or `onKeyPress`.
- Accompany `onMouseOver`/`onMouseOut` with `onFocus`/`onBlur`.
- Include caption tracks for audio and video elements.
- Use semantic elements instead of role attributes in JSX.
- Make sure all anchors are valid and navigable.
- Ensure all ARIA properties (`aria-*`) are valid.
- Use valid, non-abstract ARIA roles for elements with ARIA roles.
- Use valid ARIA state and property values.
- Use valid values for the `autocomplete` attribute on input elements.
- Use correct ISO language/country codes for the `lang` attribute.

### Code Complexity and Quality
- Don&apos;t use consecutive spaces in regular expression literals.
- Don&apos;t use the `arguments` object.
- Don&apos;t use primitive type aliases or misleading types.
- Don&apos;t use the comma operator.
- Don&apos;t use empty type parameters in type aliases and interfaces.
- Don&apos;t write functions that exceed a given Cognitive Complexity score.
- Don&apos;t nest describe() blocks too deeply in test files.
- Don&apos;t use unnecessary boolean casts.
- Don&apos;t use unnecessary callbacks with flatMap.
- Use for...of statements instead of Array.forEach.
- Don&apos;t create classes that only have static members (like a static namespace).
- Don&apos;t use this and super in static contexts.
- Don&apos;t use unnecessary catch clauses.
- Don&apos;t use unnecessary constructors.
- Don&apos;t use unnecessary continue statements.
- Don&apos;t export empty modules that don&apos;t change anything.
- Don&apos;t use unnecessary escape sequences in regular expression literals.
- Don&apos;t use unnecessary fragments.
- Don&apos;t use unnecessary labels.
- Don&apos;t use unnecessary nested block statements.
- Don&apos;t rename imports, exports, and destructured assignments to the same name.
- Don&apos;t use unnecessary string or template literal concatenation.
- Don&apos;t use String.raw in template literals when there are no escape sequences.
- Don&apos;t use useless case statements in switch statements.
- Don&apos;t use ternary operators when simpler alternatives exist.
- Don&apos;t use useless `this` aliasing.
- Don&apos;t use any or unknown as type constraints.
- Don&apos;t initialize variables to undefined.
- Don&apos;t use the void operators (they&apos;re not familiar).
- Use arrow functions instead of function expressions.
- Use Date.now() to get milliseconds since the Unix Epoch.
- Use .flatMap() instead of map().flat() when possible.
- Use literal property access instead of computed property access.
- Don&apos;t use parseInt() or Number.parseInt() when binary, octal, or hexadecimal literals work.
- Use concise optional chaining instead of chained logical expressions.
- Use regular expression literals instead of the RegExp constructor when possible.
- Don&apos;t use number literal object member names that aren&apos;t base 10 or use underscore separators.
- Remove redundant terms from logical expressions.
- Use while loops instead of for loops when you don&apos;t need initializer and update expressions.
- Don&apos;t pass children as props.
- Don&apos;t reassign const variables.
- Don&apos;t use constant expressions in conditions.
- Don&apos;t use `Math.min` and `Math.max` to clamp values when the result is constant.
- Don&apos;t return a value from a constructor.
- Don&apos;t use empty character classes in regular expression literals.
- Don&apos;t use empty destructuring patterns.
- Don&apos;t call global object properties as functions.
- Don&apos;t declare functions and vars that are accessible outside their block.
- Make sure builtins are correctly instantiated.
- Don&apos;t use super() incorrectly inside classes. Also check that super() is called in classes that extend other constructors.
- Don&apos;t use variables and function parameters before they&apos;re declared.
- Don&apos;t use 8 and 9 escape sequences in string literals.
- Don&apos;t use literal numbers that lose precision.

### React and JSX Best Practices
- Don&apos;t use the return value of React.render.
- Make sure all dependencies are correctly specified in React hooks.
- Make sure all React hooks are called from the top level of component functions.
- Don&apos;t forget key props in iterators and collection literals.
- Don&apos;t destructure props inside JSX components in Solid projects.
- Don&apos;t define React components inside other components.
- Don&apos;t use event handlers on non-interactive elements.
- Don&apos;t assign to React component props.
- Don&apos;t use both `children` and `dangerouslySetInnerHTML` props on the same element.
- Don&apos;t use dangerous JSX props.
- Don&apos;t use Array index in keys.
- Don&apos;t insert comments as text nodes.
- Don&apos;t assign JSX properties multiple times.
- Don&apos;t add extra closing tags for components without children.
- Use `&lt;&gt;...&lt;/&gt;` instead of `&lt;Fragment&gt;...&lt;/Fragment&gt;`.
- Watch out for possible &quot;wrong&quot; semicolons inside JSX elements.

### Correctness and Safety
- Don&apos;t assign a value to itself.
- Don&apos;t return a value from a setter.
- Don&apos;t compare expressions that modify string case with non-compliant values.
- Don&apos;t use lexical declarations in switch clauses.
- Don&apos;t use variables that haven&apos;t been declared in the document.
- Don&apos;t write unreachable code.
- Make sure super() is called exactly once on every code path in a class constructor before this is accessed if the class has a superclass.
- Don&apos;t use control flow statements in finally blocks.
- Don&apos;t use optional chaining where undefined values aren&apos;t allowed.
- Don&apos;t have unused function parameters.
- Don&apos;t have unused imports.
- Don&apos;t have unused labels.
- Don&apos;t have unused private class members.
- Don&apos;t have unused variables.
- Make sure void (self-closing) elements don&apos;t have children.
- Don&apos;t return a value from a function with the return type &apos;void&apos;
- Use isNaN() when checking for NaN.
- Make sure &quot;for&quot; loop update clauses move the counter in the right direction.
- Make sure typeof expressions are compared to valid values.
- Make sure generator functions contain yield.
- Don&apos;t use await inside loops.
- Don&apos;t use bitwise operators.
- Don&apos;t use expressions where the operation doesn&apos;t change the value.
- Make sure Promise-like statements are handled appropriately.
- Don&apos;t use __dirname and __filename in the global scope.
- Prevent import cycles.
- Don&apos;t use configured elements.
- Don&apos;t hardcode sensitive data like API keys and tokens.
- Don&apos;t let variable declarations shadow variables from outer scopes.
- Don&apos;t use the TypeScript directive @ts-ignore.
- Prevent duplicate polyfills from Polyfill.io.
- Don&apos;t use useless backreferences in regular expressions that always match empty strings.
- Don&apos;t use unnecessary escapes in string literals.
- Don&apos;t use useless undefined.
- Make sure getters and setters for the same property are next to each other in class and object definitions.
- Make sure object literals are declared consistently (defaults to explicit definitions).
- Use static Response methods instead of new Response() constructor when possible.
- Make sure switch-case statements are exhaustive.
- Make sure the `preconnect` attribute is used when using Google Fonts.
- Use `Array#{indexOf,lastIndexOf}()` instead of `Array#{findIndex,findLastIndex}()` when looking for the index of an item.
- Make sure iterable callbacks return consistent values.
- Use `with { type: &quot;json&quot; }` for JSON module imports.
- Use numeric separators in numeric literals.
- Use object spread instead of `Object.assign()` when constructing new objects.
- Always use the radix argument when using `parseInt()`.
- Make sure JSDoc comment lines start with a single asterisk, except for the first one.
- Include a description parameter for `Symbol()`.
- Don&apos;t use spread (`...`) syntax on accumulators.
- Don&apos;t use the `delete` operator.
- Don&apos;t access namespace imports dynamically.
- Don&apos;t use namespace imports.
- Declare regex literals at the top level.
- Don&apos;t use `target=&quot;_blank&quot;` without `rel=&quot;noopener&quot;`.

### TypeScript Best Practices
- Don&apos;t use TypeScript enums.
- Don&apos;t export imported variables.
- Don&apos;t add type annotations to variables, parameters, and class properties that are initialized with literal expressions.
- Don&apos;t use TypeScript namespaces.
- Don&apos;t use non-null assertions with the `!` postfix operator.
- Don&apos;t use parameter properties in class constructors.
- Don&apos;t use user-defined types.
- Use `as const` instead of literal types and type annotations.
- Use either `T[]` or `Array&lt;T&gt;` consistently.
- Initialize each enum member value explicitly.
- Use `export type` for types.
- Use `import type` for types.
- Make sure all enum members are literal values.
- Don&apos;t use TypeScript const enum.
- Don&apos;t declare empty interfaces.
- Don&apos;t let variables evolve into any type through reassignments.
- Don&apos;t use the any type.
- Don&apos;t misuse the non-null assertion operator (!) in TypeScript files.
- Don&apos;t use implicit any type on variable declarations.
- Don&apos;t merge interfaces and classes unsafely.
- Don&apos;t use overload signatures that aren&apos;t next to each other.
- Use the namespace keyword instead of the module keyword to declare TypeScript namespaces.

### Style and Consistency
- Don&apos;t use global `eval()`.
- Don&apos;t use callbacks in asynchronous tests and hooks.
- Don&apos;t use negation in `if` statements that have `else` clauses.
- Don&apos;t use nested ternary expressions.
- Don&apos;t reassign function parameters.
- This rule lets you specify global variable names you don&apos;t want to use in your application.
- Don&apos;t use specified modules when loaded by import or require.
- Don&apos;t use constants whose value is the upper-case version of their name.
- Use `String.slice()` instead of `String.substr()` and `String.substring()`.
- Don&apos;t use template literals if you don&apos;t need interpolation or special-character handling.
- Don&apos;t use `else` blocks when the `if` block breaks early.
- Don&apos;t use yoda expressions.
- Don&apos;t use Array constructors.
- Use `at()` instead of integer index access.
- Follow curly brace conventions.
- Use `else if` instead of nested `if` statements in `else` clauses.
- Use single `if` statements instead of nested `if` clauses.
- Use `new` for all builtins except `String`, `Number`, and `Boolean`.
- Use consistent accessibility modifiers on class properties and methods.
- Use `const` declarations for variables that are only assigned once.
- Put default function parameters and optional function parameters last.
- Include a `default` clause in switch statements.
- Use the `**` operator instead of `Math.pow`.
- Use `for-of` loops when you need the index to extract an item from the iterated array.
- Use `node:assert/strict` over `node:assert`.
- Use the `node:` protocol for Node.js builtin modules.
- Use Number properties instead of global ones.
- Use assignment operator shorthand where possible.
- Use function types instead of object types with call signatures.
- Use template literals over string concatenation.
- Use `new` when throwing an error.
- Don&apos;t throw non-Error values.
- Use `String.trimStart()` and `String.trimEnd()` over `String.trimLeft()` and `String.trimRight()`.
- Use standard constants instead of approximated literals.
- Don&apos;t assign values in expressions.
- Don&apos;t use async functions as Promise executors.
- Don&apos;t reassign exceptions in catch clauses.
- Don&apos;t reassign class members.
- Don&apos;t compare against -0.
- Don&apos;t use labeled statements that aren&apos;t loops.
- Don&apos;t use void type outside of generic or return types.
- Don&apos;t use console.
- Don&apos;t use control characters and escape sequences that match control characters in regular expression literals.
- Don&apos;t use debugger.
- Don&apos;t assign directly to document.cookie.
- Use `===` and `!==`.
- Don&apos;t use duplicate case labels.
- Don&apos;t use duplicate class members.
- Don&apos;t use duplicate conditions in if-else-if chains.
- Don&apos;t use two keys with the same name inside objects.
- Don&apos;t use duplicate function parameter names.
- Don&apos;t have duplicate hooks in describe blocks.
- Don&apos;t use empty block statements and static blocks.
- Don&apos;t let switch clauses fall through.
- Don&apos;t reassign function declarations.
- Don&apos;t allow assignments to native objects and read-only global variables.
- Use Number.isFinite instead of global isFinite.
- Use Number.isNaN instead of global isNaN.
- Don&apos;t assign to imported bindings.
- Don&apos;t use irregular whitespace characters.
- Don&apos;t use labels that share a name with a variable.
- Don&apos;t use characters made with multiple code points in character class syntax.
- Make sure to use new and constructor properly.
- Don&apos;t use shorthand assign when the variable appears on both sides.
- Don&apos;t use octal escape sequences in string literals.
- Don&apos;t use Object.prototype builtins directly.
- Don&apos;t redeclare variables, functions, classes, and types in the same scope.
- Don&apos;t have redundant &quot;use strict&quot;.
- Don&apos;t compare things where both sides are exactly the same.
- Don&apos;t let identifiers shadow restricted names.
- Don&apos;t use sparse arrays (arrays with holes).
- Don&apos;t use template literal placeholder syntax in regular strings.
- Don&apos;t use the then property.
- Don&apos;t use unsafe negation.
- Don&apos;t use var.
- Don&apos;t use with statements in non-strict contexts.
- Make sure async functions actually use await.
- Make sure default clauses in switch statements come last.
- Make sure to pass a message value when creating a built-in error.
- Make sure get methods always return a value.
- Use a recommended display strategy with Google Fonts.
- Make sure for-in loops include an if statement.
- Use Array.isArray() instead of instanceof Array.
- Make sure to use the digits argument with Number#toFixed().
- Make sure to use the &quot;use strict&quot; directive in script files.

### Next.js Specific Rules
- Don&apos;t use `&lt;img&gt;` elements in Next.js projects.
- Don&apos;t use `&lt;head&gt;` elements in Next.js projects.
- Don&apos;t import next/document outside of pages/_document.jsx in Next.js projects.
- Don&apos;t use the next/head module in pages/_document.js on Next.js projects.

### Testing Best Practices
- Don&apos;t use export or module.exports in test files.
- Don&apos;t use focused tests.
- Make sure the assertion function, like expect, is placed inside an it() function call.
- Don&apos;t use disabled tests.

## Common Tasks
- `npx ultracite init` - Initialize Ultracite in your project
- `npx ultracite fix` - Format and fix code automatically
- `npx ultracite check` - Check for issues without fixing

## Example: Error Handling
```typescript
// ‚úÖ Good: Comprehensive error handling
try {
  const result = await fetchData();
  return { success: true, data: result };
} catch (error) {
  console.error(&apos;API call failed:&apos;, error);
  return { success: false, error: error.message };
}

// ‚ùå Bad: Swallowing errors
try {
  return await fetchData();
} catch (e) {
  console.log(e);
}
```</file><file path="be/.gemini/commands/tm/add-dependency.toml">description=&quot;Add Dependency&quot;
prompt = &quot;&quot;&quot;
Add a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to establish dependency relationship.

## Adding Dependencies

Creates a dependency where one task must be completed before another can start.

## Argument Parsing

Parse natural language or IDs:
- &quot;make 5 depend on 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 needs 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 after 3&quot; ‚Üí task 5 depends on task 3

## Execution

```bash
task-master add-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Validation

Before adding:
1. **Verify both tasks exist**
2. **Check for circular dependencies**
3. **Ensure dependency makes logical sense**
4. **Warn if creating complex chains**

## Smart Features

- Detect if dependency already exists
- Suggest related dependencies
- Show impact on task flow
- Update task priorities if needed

## Post-Addition

After adding dependency:
1. Show updated dependency graph
2. Identify any newly blocked tasks
3. Suggest task order changes
4. Update project timeline

## Example Flows

```
/taskmaster:add-dependency 5 needs 3
‚Üí Task #5 now depends on Task #3
‚Üí Task #5 is now blocked until #3 completes
‚Üí Suggested: Also consider if #5 needs #4
```
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/add-subtask.toml">description=&quot;Add Subtask&quot;
prompt = &quot;&quot;&quot;
Add a subtask to a parent task.

Arguments: $ARGUMENTS

Parse arguments to create a new subtask or convert existing task.

## Adding Subtasks

Creates subtasks to break down complex parent tasks into manageable pieces.

## Argument Parsing

Flexible natural language:
- &quot;add subtask to 5: implement login form&quot;
- &quot;break down 5 with: setup, implement, test&quot;
- &quot;subtask for 5: handle edge cases&quot;
- &quot;5: validate user input&quot; ‚Üí adds subtask to task 5

## Execution Modes

### 1. Create New Subtask
```bash
task-master add-subtask --parent=&lt;id&gt; --title=&quot;&lt;title&gt;&quot; --description=&quot;&lt;desc&gt;&quot;
```

### 2. Convert Existing Task
```bash
task-master add-subtask --parent=&lt;id&gt; --task-id=&lt;existing-id&gt;
```

## Smart Features

1. **Automatic Subtask Generation**
   - If title contains &quot;and&quot; or commas, create multiple
   - Suggest common subtask patterns
   - Inherit parent&apos;s context

2. **Intelligent Defaults**
   - Priority based on parent
   - Appropriate time estimates
   - Logical dependencies between subtasks

3. **Validation**
   - Check parent task complexity
   - Warn if too many subtasks
   - Ensure subtask makes sense

## Creation Process

1. Parse parent task context
2. Generate subtask with ID like &quot;5.1&quot;
3. Set appropriate defaults
4. Link to parent task
5. Update parent&apos;s time estimate

## Example Flows

```
/taskmaster:add-subtask to 5: implement user authentication
‚Üí Created subtask #5.1: &quot;implement user authentication&quot;
‚Üí Parent task #5 now has 1 subtask
‚Üí Suggested next subtasks: tests, documentation

/taskmaster:add-subtask 5: setup, implement, test
‚Üí Created 3 subtasks:
  #5.1: setup
  #5.2: implement
  #5.3: test
```

## Post-Creation

- Show updated task hierarchy
- Suggest logical next subtasks
- Update complexity estimates
- Recommend subtask order
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/add-task.toml">description=&quot;Add Task&quot;
prompt = &quot;&quot;&quot;
Add new tasks with intelligent parsing and context awareness.

Arguments: $ARGUMENTS

## Smart Task Addition

Parse natural language to create well-structured tasks.

### 1. **Input Understanding**

I&apos;ll intelligently parse your request:
- Natural language ‚Üí Structured task
- Detect priority from keywords (urgent, ASAP, important)
- Infer dependencies from context
- Suggest complexity based on description
- Determine task type (feature, bug, refactor, test, docs)

### 2. **Smart Parsing Examples**

**&quot;Add urgent task to fix login bug&quot;**
‚Üí Title: Fix login bug
‚Üí Priority: high
‚Üí Type: bug
‚Üí Suggested complexity: medium

**&quot;Create task for API documentation after task 23 is done&quot;**
‚Üí Title: API documentation
‚Üí Dependencies: [23]
‚Üí Type: documentation
‚Üí Priority: medium

**&quot;Need to refactor auth module - depends on 12 and 15, high complexity&quot;**
‚Üí Title: Refactor auth module
‚Üí Dependencies: [12, 15]
‚Üí Complexity: high
‚Üí Type: refactor

### 3. **Context Enhancement**

Based on current project state:
- Suggest related existing tasks
- Warn about potential conflicts
- Recommend dependencies
- Propose subtasks if complex

### 4. **Interactive Refinement**

```yaml
Task Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Title: [Extracted title]
Priority: [Inferred priority]
Dependencies: [Detected dependencies]
Complexity: [Estimated complexity]

Suggestions:
- Similar task #34 exists, consider as dependency?
- This seems complex, break into subtasks?
- Tasks #45-47 work on same module
```

### 5. **Validation &amp; Creation**

Before creating:
- Validate dependencies exist
- Check for duplicates
- Ensure logical ordering
- Verify task completeness

### 6. **Smart Defaults**

Intelligent defaults based on:
- Task type patterns
- Team conventions
- Historical data
- Current sprint/phase

Result: High-quality tasks from minimal input.
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/analyze-complexity.toml">description=&quot;Analyze Complexity&quot;
prompt = &quot;&quot;&quot;
Analyze task complexity and generate expansion recommendations.

Arguments: $ARGUMENTS

Perform deep analysis of task complexity across the project.

## Complexity Analysis

Uses AI to analyze tasks and recommend which ones need breakdown.

## Execution Options

```bash
task-master analyze-complexity [--research] [--threshold=5]
```

## Analysis Parameters

- `--research` ‚Üí Use research AI for deeper analysis
- `--threshold=5` ‚Üí Only flag tasks above complexity 5
- Default: Analyze all pending tasks

## Analysis Process

### 1. **Task Evaluation**
For each task, AI evaluates:
- Technical complexity
- Time requirements
- Dependency complexity
- Risk factors
- Knowledge requirements

### 2. **Complexity Scoring**
Assigns score 1-10 based on:
- Implementation difficulty
- Integration challenges
- Testing requirements
- Unknown factors
- Technical debt risk

### 3. **Recommendations**
For complex tasks:
- Suggest expansion approach
- Recommend subtask breakdown
- Identify risk areas
- Propose mitigation strategies

## Smart Analysis Features

1. **Pattern Recognition**
   - Similar task comparisons
   - Historical complexity accuracy
   - Team velocity consideration
   - Technology stack factors

2. **Contextual Factors**
   - Team expertise
   - Available resources
   - Timeline constraints
   - Business criticality

3. **Risk Assessment**
   - Technical risks
   - Timeline risks
   - Dependency risks
   - Knowledge gaps

## Output Format

```
Task Complexity Analysis Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

High Complexity Tasks (&gt;7):
üìç #5 &quot;Implement real-time sync&quot; - Score: 9/10
   Factors: WebSocket complexity, state management, conflict resolution
   Recommendation: Expand into 5-7 subtasks
   Risks: Performance, data consistency

üìç #12 &quot;Migrate database schema&quot; - Score: 8/10
   Factors: Data migration, zero downtime, rollback strategy
   Recommendation: Expand into 4-5 subtasks
   Risks: Data loss, downtime

Medium Complexity Tasks (5-7):
üìç #23 &quot;Add export functionality&quot; - Score: 6/10
   Consider expansion if timeline tight

Low Complexity Tasks (&lt;5):
‚úÖ 15 tasks - No expansion needed

Summary:
- Expand immediately: 2 tasks
- Consider expanding: 5 tasks
- Keep as-is: 15 tasks
```

## Actionable Output

For each high-complexity task:
1. Complexity score with reasoning
2. Specific expansion suggestions
3. Risk mitigation approaches
4. Recommended subtask structure

## Integration

Results are:
- Saved to `.taskmaster/reports/complexity-analysis.md`
- Used by expand command
- Inform sprint planning
- Guide resource allocation

## Next Steps

After analysis:
```
/taskmaster:expand 5    # Expand specific task
/taskmaster:expand-all  # Expand all recommended
/taskmaster:complexity-report  # View detailed report
```
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/analyze-project.toml">description=&quot;Analyze Project&quot;
prompt = &quot;&quot;&quot;
Advanced project analysis with actionable insights and recommendations.

Arguments: $ARGUMENTS

## Comprehensive Project Analysis

Multi-dimensional analysis based on requested focus area.

### 1. **Analysis Modes**

Based on $ARGUMENTS:
- &quot;velocity&quot; ‚Üí Sprint velocity and trends
- &quot;quality&quot; ‚Üí Code quality metrics
- &quot;risk&quot; ‚Üí Risk assessment and mitigation
- &quot;dependencies&quot; ‚Üí Dependency graph analysis
- &quot;team&quot; ‚Üí Workload and skill distribution
- &quot;architecture&quot; ‚Üí System design coherence
- Default ‚Üí Full spectrum analysis

### 2. **Velocity Analytics**

```
üìä Velocity Analysis
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Current Sprint: 24 points/week ‚ÜóÔ∏è +20%
Rolling Average: 20 points/week
Efficiency: 85% (17/20 tasks on time)

Bottlenecks Detected:
- Code review delays (avg 4h wait)
- Test environment availability
- Dependency on external team

Recommendations:
1. Implement parallel review process
2. Add staging environment
3. Mock external dependencies
```

### 3. **Risk Assessment**

**Technical Risks**
- High complexity tasks without backup assignee
- Single points of failure in architecture
- Insufficient test coverage in critical paths
- Technical debt accumulation rate

**Project Risks**
- Critical path dependencies
- Resource availability gaps
- Deadline feasibility analysis
- Scope creep indicators

### 4. **Dependency Intelligence**

Visual dependency analysis:
```
Critical Path:
#12 ‚Üí #15 ‚Üí #23 ‚Üí #45 ‚Üí #50 (20 days)
         ‚Üò #24 ‚Üí #46 ‚Üó

Optimization: Parallelize #15 and #24
Time Saved: 3 days
```

### 5. **Quality Metrics**

**Code Quality**
- Test coverage trends
- Complexity scores
- Technical debt ratio
- Review feedback patterns

**Process Quality**
- Rework frequency
- Bug introduction rate
- Time to resolution
- Knowledge distribution

### 6. **Predictive Insights**

Based on patterns:
- Completion probability by deadline
- Resource needs projection
- Risk materialization likelihood
- Suggested interventions

### 7. **Executive Dashboard**

High-level summary with:
- Health score (0-100)
- Top 3 risks
- Top 3 opportunities
- Recommended actions
- Success probability

Result: Data-driven decisions with clear action paths.
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/auto-implement-tasks.toml">description=&quot;Auto Implement Tasks&quot;
prompt = &quot;&quot;&quot;
Enhanced auto-implementation with intelligent code generation and testing.

Arguments: $ARGUMENTS

## Intelligent Auto-Implementation

Advanced implementation with context awareness and quality checks.

### 1. **Pre-Implementation Analysis**

Before starting:
- Analyze task complexity and requirements
- Check codebase patterns and conventions
- Identify similar completed tasks
- Assess test coverage needs
- Detect potential risks

### 2. **Smart Implementation Strategy**

Based on task type and context:

**Feature Tasks**
1. Research existing patterns
2. Design component architecture
3. Implement with tests
4. Integrate with system
5. Update documentation

**Bug Fix Tasks**
1. Reproduce issue
2. Identify root cause
3. Implement minimal fix
4. Add regression tests
5. Verify side effects

**Refactoring Tasks**
1. Analyze current structure
2. Plan incremental changes
3. Maintain test coverage
4. Refactor step-by-step
5. Verify behavior unchanged

### 3. **Code Intelligence**

**Pattern Recognition**
- Learn from existing code
- Follow team conventions
- Use preferred libraries
- Match style guidelines

**Test-Driven Approach**
- Write tests first when possible
- Ensure comprehensive coverage
- Include edge cases
- Performance considerations

### 4. **Progressive Implementation**

Step-by-step with validation:
```
Step 1/5: Setting up component structure ‚úì
Step 2/5: Implementing core logic ‚úì
Step 3/5: Adding error handling ‚ö° (in progress)
Step 4/5: Writing tests ‚è≥
Step 5/5: Integration testing ‚è≥

Current: Adding try-catch blocks and validation...
```

### 5. **Quality Assurance**

Automated checks:
- Linting and formatting
- Test execution
- Type checking
- Dependency validation
- Performance analysis

### 6. **Smart Recovery**

If issues arise:
- Diagnostic analysis
- Suggestion generation
- Fallback strategies
- Manual intervention points
- Learning from failures

### 7. **Post-Implementation**

After completion:
- Generate PR description
- Update documentation
- Log lessons learned
- Suggest follow-up tasks
- Update task relationships

Result: High-quality, production-ready implementations.
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/command-pipeline.toml">description=&quot;Command Pipeline&quot;
prompt = &quot;&quot;&quot;
Execute a pipeline of commands based on a specification.

Arguments: $ARGUMENTS

## Command Pipeline Execution

Parse pipeline specification from arguments. Supported formats:

### Simple Pipeline
`init ‚Üí expand-all ‚Üí sprint-plan`

### Conditional Pipeline
`status ‚Üí if:pending&gt;10 ‚Üí sprint-plan ‚Üí else ‚Üí next`

### Iterative Pipeline
`for:pending-tasks ‚Üí expand ‚Üí complexity-check`

### Smart Pipeline Patterns

**1. Project Setup Pipeline**
```
init [prd] ‚Üí
expand-all ‚Üí
complexity-report ‚Üí
sprint-plan ‚Üí
show first-sprint
```

**2. Daily Work Pipeline**
```
standup ‚Üí
if:in-progress ‚Üí continue ‚Üí
else ‚Üí next ‚Üí start
```

**3. Task Completion Pipeline**
```
complete [id] ‚Üí
git-commit ‚Üí
if:blocked-tasks-freed ‚Üí show-freed ‚Üí
next
```

**4. Quality Check Pipeline**
```
list in-progress ‚Üí
for:each ‚Üí check-idle-time ‚Üí
if:idle&gt;1day ‚Üí prompt-update
```

### Pipeline Features

**Variables**
- Store results: `status ‚Üí $count=pending-count`
- Use in conditions: `if:$count&gt;10`
- Pass between commands: `expand $high-priority-tasks`

**Error Handling**
- On failure: `try:complete ‚Üí catch:show-blockers`
- Skip on error: `optional:test-run`
- Retry logic: `retry:3:commit`

**Parallel Execution**
- Parallel branches: `[analyze | test | lint]`
- Join results: `parallel ‚Üí join:report`

### Execution Flow

1. Parse pipeline specification
2. Validate command sequence
3. Execute with state passing
4. Handle conditions and loops
5. Aggregate results
6. Show summary

This enables complex workflows like:
`parse-prd ‚Üí expand-all ‚Üí filter:complex&gt;70 ‚Üí assign:senior ‚Üí sprint-plan:weighted`
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/complexity-report.toml">description=&quot;Complexity Report&quot;
prompt = &quot;&quot;&quot;
Display the task complexity analysis report.

Arguments: $ARGUMENTS

View the detailed complexity analysis generated by analyze-complexity command.

## Viewing Complexity Report

Shows comprehensive task complexity analysis with actionable insights.

## Execution

```bash
task-master complexity-report [--file=&lt;path&gt;]
```

## Report Location

Default: `.taskmaster/reports/complexity-analysis.md`
Custom: Specify with --file parameter

## Report Contents

### 1. **Executive Summary**
```
Complexity Analysis Summary
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Analysis Date: 2024-01-15
Tasks Analyzed: 32
High Complexity: 5 (16%)
Medium Complexity: 12 (37%)
Low Complexity: 15 (47%)

Critical Findings:
- 5 tasks need immediate expansion
- 3 tasks have high technical risk
- 2 tasks block critical path
```

### 2. **Detailed Task Analysis**
For each complex task:
- Complexity score breakdown
- Contributing factors
- Specific risks identified
- Expansion recommendations
- Similar completed tasks

### 3. **Risk Matrix**
Visual representation:
```
Risk vs Complexity Matrix
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
High Risk  | #5(9) #12(8) | #23(6)
Med Risk   | #34(7)       | #45(5) #67(5)
Low Risk   | #78(8)       | [15 tasks]
           | High Complex  | Med Complex
```

### 4. **Recommendations**

**Immediate Actions:**
1. Expand task #5 - Critical path + high complexity
2. Expand task #12 - High risk + dependencies
3. Review task #34 - Consider splitting

**Sprint Planning:**
- Don&apos;t schedule multiple high-complexity tasks together
- Ensure expertise available for complex tasks
- Build in buffer time for unknowns

## Interactive Features

When viewing report:
1. **Quick Actions**
   - Press &apos;e&apos; to expand a task
   - Press &apos;d&apos; for task details
   - Press &apos;r&apos; to refresh analysis

2. **Filtering**
   - View by complexity level
   - Filter by risk factors
   - Show only actionable items

3. **Export Options**
   - Markdown format
   - CSV for spreadsheets
   - JSON for tools

## Report Intelligence

- Compares with historical data
- Shows complexity trends
- Identifies patterns
- Suggests process improvements

## Integration

Use report for:
- Sprint planning sessions
- Resource allocation
- Risk assessment
- Team discussions
- Client updates

## Example Usage

```
/taskmaster:complexity-report
‚Üí Opens latest analysis

/taskmaster:complexity-report --file=archived/2024-01-01.md
‚Üí View historical analysis

After viewing:
/taskmaster:expand 5
‚Üí Expand high-complexity task
```
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/convert-task-to-subtask.toml">description=&quot;Convert Task To Subtask&quot;
prompt = &quot;&quot;&quot;
Convert an existing task into a subtask.

Arguments: $ARGUMENTS

Parse parent ID and task ID to convert.

## Task Conversion

Converts an existing standalone task into a subtask of another task.

## Argument Parsing

- &quot;move task 8 under 5&quot;
- &quot;make 8 a subtask of 5&quot;
- &quot;nest 8 in 5&quot;
- &quot;5 8&quot; ‚Üí make task 8 a subtask of task 5

## Execution

```bash
task-master add-subtask --parent=&lt;parent-id&gt; --task-id=&lt;task-to-convert&gt;
```

## Pre-Conversion Checks

1. **Validation**
   - Both tasks exist and are valid
   - No circular parent relationships
   - Task isn&apos;t already a subtask
   - Logical hierarchy makes sense

2. **Impact Analysis**
   - Dependencies that will be affected
   - Tasks that depend on converting task
   - Priority alignment needed
   - Status compatibility

## Conversion Process

1. Change task ID from &quot;8&quot; to &quot;5.1&quot; (next available)
2. Update all dependency references
3. Inherit parent&apos;s context where appropriate
4. Adjust priorities if needed
5. Update time estimates

## Smart Features

- Preserve task history
- Maintain dependencies
- Update all references
- Create conversion log

## Example

```
/taskmaster:add-subtask/from-task 5 8
‚Üí Converting: Task #8 becomes subtask #5.1
‚Üí Updated: 3 dependency references
‚Üí Parent task #5 now has 1 subtask
‚Üí Note: Subtask inherits parent&apos;s priority

Before: #8 &quot;Implement validation&quot; (standalone)
After:  #5.1 &quot;Implement validation&quot; (subtask of #5)
```

## Post-Conversion

- Show new task hierarchy
- List updated dependencies
- Verify project integrity
- Suggest related conversions
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/expand-all-tasks.toml">description=&quot;Expand All Tasks&quot;
prompt = &quot;&quot;&quot;
Expand all pending tasks that need subtasks.

## Bulk Task Expansion

Intelligently expands all tasks that would benefit from breakdown.

## Execution

```bash
task-master expand --all
```

## Smart Selection

Only expands tasks that:
- Are marked as pending
- Have high complexity (&gt;5)
- Lack existing subtasks
- Would benefit from breakdown

## Expansion Process

1. **Analysis Phase**
   - Identify expansion candidates
   - Group related tasks
   - Plan expansion strategy

2. **Batch Processing**
   - Expand tasks in logical order
   - Maintain consistency
   - Preserve relationships
   - Optimize for parallelism

3. **Quality Control**
   - Ensure subtask quality
   - Avoid over-decomposition
   - Maintain task coherence
   - Update dependencies

## Options

- Add `force` to expand all regardless of complexity
- Add `research` for enhanced AI analysis

## Results

After bulk expansion:
- Summary of tasks expanded
- New subtask count
- Updated complexity metrics
- Suggested task order
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/expand-task.toml">description=&quot;Expand Task&quot;
prompt = &quot;&quot;&quot;
Break down a complex task into subtasks.

Arguments: $ARGUMENTS (task ID)

## Intelligent Task Expansion

Analyzes a task and creates detailed subtasks for better manageability.

## Execution

```bash
task-master expand --id=$ARGUMENTS
```

## Expansion Process

1. **Task Analysis**
   - Review task complexity
   - Identify components
   - Detect technical challenges
   - Estimate time requirements

2. **Subtask Generation**
   - Create 3-7 subtasks typically
   - Each subtask 1-4 hours
   - Logical implementation order
   - Clear acceptance criteria

3. **Smart Breakdown**
   - Setup/configuration tasks
   - Core implementation
   - Testing components
   - Integration steps
   - Documentation updates

## Enhanced Features

Based on task type:
- **Feature**: Setup ‚Üí Implement ‚Üí Test ‚Üí Integrate
- **Bug Fix**: Reproduce ‚Üí Diagnose ‚Üí Fix ‚Üí Verify
- **Refactor**: Analyze ‚Üí Plan ‚Üí Refactor ‚Üí Validate

## Post-Expansion

After expansion:
1. Show subtask hierarchy
2. Update time estimates
3. Suggest implementation order
4. Highlight critical path
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/fix-dependencies.toml">description=&quot;Fix Dependencies&quot;
prompt = &quot;&quot;&quot;
Automatically fix dependency issues found during validation.

## Automatic Dependency Repair

Intelligently fixes common dependency problems while preserving project logic.

## Execution

```bash
task-master fix-dependencies
```

## What Gets Fixed

### 1. **Auto-Fixable Issues**
- Remove references to deleted tasks
- Break simple circular dependencies
- Remove self-dependencies
- Clean up duplicate dependencies

### 2. **Smart Resolutions**
- Reorder dependencies to maintain logic
- Suggest task merging for over-dependent tasks
- Flatten unnecessary dependency chains
- Remove redundant transitive dependencies

### 3. **Manual Review Required**
- Complex circular dependencies
- Critical path modifications
- Business logic dependencies
- High-impact changes

## Fix Process

1. **Analysis Phase**
   - Run validation check
   - Categorize issues by type
   - Determine fix strategy

2. **Execution Phase**
   - Apply automatic fixes
   - Log all changes made
   - Preserve task relationships

3. **Verification Phase**
   - Re-validate after fixes
   - Show before/after comparison
   - Highlight manual fixes needed

## Smart Features

- Preserves intended task flow
- Minimal disruption approach
- Creates fix history/log
- Suggests manual interventions

## Output Example

```
Dependency Auto-Fix Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Fixed Automatically:
‚úÖ Removed 2 references to deleted tasks
‚úÖ Resolved 1 self-dependency
‚úÖ Cleaned 3 redundant dependencies

Manual Review Needed:
‚ö†Ô∏è Complex circular dependency: #12 ‚Üí #15 ‚Üí #18 ‚Üí #12
  Suggestion: Make #15 not depend on #12
‚ö†Ô∏è Task #45 has 8 dependencies
  Suggestion: Break into subtasks

Run &apos;/taskmaster:validate-dependencies&apos; to verify fixes
```

## Safety

- Preview mode available
- Rollback capability
- Change logging
- No data loss
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/help.toml">description=&quot;Help&quot;
prompt = &quot;&quot;&quot;
Show help for Task Master AI commands.

Arguments: $ARGUMENTS

Display help for Task Master commands and available options.

## Task Master AI Command Help

### Quick Navigation

Type `/taskmaster:` and use tab completion to explore all commands.

### Command Categories

#### üöÄ Setup &amp; Installation
- `/taskmaster:install-taskmaster` - Comprehensive installation guide
- `/taskmaster:quick-install-taskmaster` - One-line global install

#### üìã Project Setup
- `/taskmaster:init-project` - Initialize new project
- `/taskmaster:init-project-quick` - Quick setup with auto-confirm
- `/taskmaster:view-models` - View AI configuration
- `/taskmaster:setup-models` - Configure AI providers

#### üéØ Task Generation
- `/taskmaster:parse-prd` - Generate tasks from PRD
- `/taskmaster:parse-prd-with-research` - Enhanced parsing
- `/taskmaster:generate-tasks` - Create task files

#### üìù Task Management
- `/taskmaster:list-tasks` - List all tasks
- `/taskmaster:list-tasks-by-status` - List tasks filtered by status
- `/taskmaster:list-tasks-with-subtasks` - List tasks with subtasks
- `/taskmaster:show-task` - Display task details
- `/taskmaster:add-task` - Create new task
- `/taskmaster:update-task` - Update single task
- `/taskmaster:update-tasks-from-id` - Update multiple tasks
- `/taskmaster:next-task` - Get next task recommendation

#### üîÑ Status Management
- `/taskmaster:to-pending` - Set task to pending
- `/taskmaster:to-in-progress` - Set task to in-progress
- `/taskmaster:to-done` - Set task to done
- `/taskmaster:to-review` - Set task to review
- `/taskmaster:to-deferred` - Set task to deferred
- `/taskmaster:to-cancelled` - Set task to cancelled

#### üîç Analysis &amp; Breakdown
- `/taskmaster:analyze-complexity` - Analyze task complexity
- `/taskmaster:complexity-report` - View complexity report
- `/taskmaster:expand-task` - Break down complex task
- `/taskmaster:expand-all-tasks` - Expand all eligible tasks

#### üîó Dependencies
- `/taskmaster:add-dependency` - Add task dependency
- `/taskmaster:remove-dependency` - Remove dependency
- `/taskmaster:validate-dependencies` - Check for issues
- `/taskmaster:fix-dependencies` - Auto-fix dependency issues

#### üì¶ Subtasks
- `/taskmaster:add-subtask` - Add subtask to task
- `/taskmaster:convert-task-to-subtask` - Convert task to subtask
- `/taskmaster:remove-subtask` - Remove subtask
- `/taskmaster:remove-subtasks` - Clear specific task subtasks
- `/taskmaster:remove-all-subtasks` - Clear all subtasks

#### üóëÔ∏è Task Removal
- `/taskmaster:remove-task` - Remove task permanently

#### ü§ñ Workflows
- `/taskmaster:smart-workflow` - Intelligent workflows
- `/taskmaster:command-pipeline` - Command chaining
- `/taskmaster:auto-implement-tasks` - Auto-implementation

#### üìä Utilities
- `/taskmaster:analyze-project` - Project analysis
- `/taskmaster:project-status` - Project dashboard
- `/taskmaster:sync-readme` - Sync README with tasks
- `/taskmaster:learn` - Interactive learning
- `/taskmaster:tm-main` - Main Task Master interface

### Quick Start Examples

```
/taskmaster:list-tasks
/taskmaster:show-task 1.2
/taskmaster:add-task
/taskmaster:next-task
```

### Getting Started

1. Install: `/taskmaster:quick-install-taskmaster`
2. Initialize: `/taskmaster:init-project-quick`
3. Learn: `/taskmaster:learn`
4. Work: `/taskmaster:smart-workflow`

For detailed command info, run the specific command with `--help` or check command documentation.
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/init-project-quick.toml">description=&quot;Init Project Quick&quot;
prompt = &quot;&quot;&quot;
Quick initialization with auto-confirmation.

Arguments: $ARGUMENTS

Initialize a Task Master project without prompts, accepting all defaults.

## Quick Setup

```bash
task-master init -y
```

## What It Does

1. Creates `.taskmaster/` directory structure
2. Initializes empty `tasks.json`
3. Sets up default configuration
4. Uses directory name as project name
5. Skips all confirmation prompts

## Smart Defaults

- Project name: Current directory name
- Description: &quot;Task Master Project&quot;
- Model config: Existing environment vars
- Task structure: Standard format

## Next Steps

After quick init:
1. Configure AI models if needed:
   ```
   /taskmaster:models/setup
   ```

2. Parse PRD if available:
   ```
   /taskmaster:parse-prd &lt;file&gt;
   ```

3. Or create first task:
   ```
   /taskmaster:add-task create initial setup
   ```

Perfect for rapid project setup!
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/init-project.toml">description=&quot;Init Project&quot;
prompt = &quot;&quot;&quot;
Initialize a new Task Master project.

Arguments: $ARGUMENTS

Parse arguments to determine initialization preferences.

## Initialization Process

1. **Parse Arguments**
   - PRD file path (if provided)
   - Project name
   - Auto-confirm flag (-y)

2. **Project Setup**
   ```bash
   task-master init
   ```

3. **Smart Initialization**
   - Detect existing project files
   - Suggest project name from directory
   - Check for git repository
   - Verify AI provider configuration

## Configuration Options

Based on arguments:
- `quick` / `-y` ‚Üí Skip confirmations
- `&lt;file.md&gt;` ‚Üí Use as PRD after init
- `--name=&lt;name&gt;` ‚Üí Set project name
- `--description=&lt;desc&gt;` ‚Üí Set description

## Post-Initialization

After successful init:
1. Show project structure created
2. Verify AI models configured
3. Suggest next steps:
   - Parse PRD if available
   - Configure AI providers
   - Set up git hooks
   - Create first tasks

## Integration

If PRD file provided:
```
/taskmaster:init my-prd.md
‚Üí Automatically runs parse-prd after init
```
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/install-taskmaster.toml">description=&quot;Install TaskMaster&quot;
prompt = &quot;&quot;&quot;
Check if Task Master is installed and install it if needed.

This command helps you get Task Master set up globally on your system.

## Detection and Installation Process

1. **Check Current Installation**
   ```bash
   # Check if task-master command exists
   which task-master || echo &quot;Task Master not found&quot;

   # Check npm global packages
   npm list -g task-master-ai
   ```

2. **System Requirements Check**
   ```bash
   # Verify Node.js is installed
   node --version

   # Verify npm is installed
   npm --version

   # Check Node version (need 16+)
   ```

3. **Install Task Master Globally**
   If not installed, run:
   ```bash
   npm install -g task-master-ai
   ```

4. **Verify Installation**
   ```bash
   # Check version
   task-master --version

   # Verify command is available
   which task-master
   ```

5. **Initial Setup**
   ```bash
   # Initialize in current directory
   task-master init
   ```

6. **Configure AI Provider**
   Ensure you have at least one AI provider API key set:
   ```bash
   # Check current configuration
   task-master models --status

   # If no API keys found, guide setup
   echo &quot;You&apos;ll need at least one API key:&quot;
   echo &quot;- ANTHROPIC_API_KEY for Claude&quot;
   echo &quot;- OPENAI_API_KEY for GPT models&quot;
   echo &quot;- PERPLEXITY_API_KEY for research&quot;
   echo &quot;&quot;
   echo &quot;Set them in your shell profile or .env file&quot;
   ```

7. **Quick Test**
   ```bash
   # Create a test PRD
   echo &quot;Build a simple hello world API&quot; &gt; test-prd.txt

   # Try parsing it
   task-master parse-prd test-prd.txt -n 3
   ```

## Troubleshooting

If installation fails:

**Permission Errors:**
```bash
# Try with sudo (macOS/Linux)
sudo npm install -g task-master-ai

# Or fix npm permissions
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH
```

**Network Issues:**
```bash
# Use different registry
npm install -g task-master-ai --registry https://registry.npmjs.org/
```

**Node Version Issues:**
```bash
# Install Node 20+ via nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20
```

## Success Confirmation

Once installed, you should see:
```
‚úÖ Task Master installed
‚úÖ Command &apos;task-master&apos; available globally
‚úÖ AI provider configured
‚úÖ Ready to use slash commands!

Try: /taskmaster:init your-prd.md
```

## Next Steps

After installation:
1. Run `/taskmaster:status` to verify setup
2. Configure AI providers with `/taskmaster:setup-models`
3. Start using Task Master commands!
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/learn.toml">description=&quot;Learn&quot;
prompt = &quot;&quot;&quot;
Learn about Task Master capabilities through interactive exploration.

Arguments: $ARGUMENTS

## Interactive Task Master Learning

Based on your input, I&apos;ll help you discover capabilities:

### 1. **What are you trying to do?**

If $ARGUMENTS contains:
- &quot;start&quot; / &quot;begin&quot; ‚Üí Show project initialization workflows
- &quot;manage&quot; / &quot;organize&quot; ‚Üí Show task management commands
- &quot;automate&quot; / &quot;auto&quot; ‚Üí Show automation workflows
- &quot;analyze&quot; / &quot;report&quot; ‚Üí Show analysis tools
- &quot;fix&quot; / &quot;problem&quot; ‚Üí Show troubleshooting commands
- &quot;fast&quot; / &quot;quick&quot; ‚Üí Show efficiency shortcuts

### 2. **Intelligent Suggestions**

Based on your project state:

**No tasks yet?**
```
You&apos;ll want to start with:
1. /project:task-master:init &lt;prd-file&gt;
   ‚Üí Creates tasks from requirements

2. /project:task-master:parse-prd &lt;file&gt;
   ‚Üí Alternative task generation

Try: /project:task-master:init demo-prd.md
```

**Have tasks?**
Let me analyze what you might need...
- Many pending tasks? ‚Üí Learn sprint planning
- Complex tasks? ‚Üí Learn task expansion
- Daily work? ‚Üí Learn workflow automation

### 3. **Command Discovery**

**By Category:**
- üìã Task Management: list, show, add, update, complete
- üîÑ Workflows: auto-implement, sprint-plan, daily-standup
- üõ†Ô∏è Utilities: check-health, complexity-report, sync-memory
- üîç Analysis: validate-deps, show dependencies

**By Scenario:**
- &quot;I want to see what to work on&quot; ‚Üí `/project:task-master:next`
- &quot;I need to break this down&quot; ‚Üí `/project:task-master:expand &lt;id&gt;`
- &quot;Show me everything&quot; ‚Üí `/project:task-master:status`
- &quot;Just do it for me&quot; ‚Üí `/project:workflows:auto-implement`

### 4. **Power User Patterns**

**Command Chaining:**
```
/project:task-master:next
/project:task-master:start &lt;id&gt;
/project:workflows:auto-implement
```

**Smart Filters:**
```
/project:task-master:list pending high
/project:task-master:list blocked
/project:task-master:list 1-5 tree
```

**Automation:**
```
/project:workflows:pipeline init ‚Üí expand-all ‚Üí sprint-plan
```

### 5. **Learning Path**

Based on your experience level:

**Beginner Path:**
1. init ‚Üí Create project
2. status ‚Üí Understand state
3. next ‚Üí Find work
4. complete ‚Üí Finish task

**Intermediate Path:**
1. expand ‚Üí Break down complex tasks
2. sprint-plan ‚Üí Organize work
3. complexity-report ‚Üí Understand difficulty
4. validate-deps ‚Üí Ensure consistency

**Advanced Path:**
1. pipeline ‚Üí Chain operations
2. smart-flow ‚Üí Context-aware automation
3. Custom commands ‚Üí Extend the system

### 6. **Try This Now**

Based on what you asked about, try:
[Specific command suggestion based on $ARGUMENTS]

Want to learn more about a specific command?
Type: /project:help &lt;command-name&gt;
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/list-tasks-by-status.toml">description=&quot;List Tasks By Status&quot;
prompt = &quot;&quot;&quot;
List tasks filtered by a specific status.

Arguments: $ARGUMENTS

Parse the status from arguments and list only tasks matching that status.

## Status Options
- `pending` - Not yet started
- `in-progress` - Currently being worked on
- `done` - Completed
- `review` - Awaiting review
- `deferred` - Postponed
- `cancelled` - Cancelled

## Execution

Based on $ARGUMENTS, run:
```bash
task-master list --status=$ARGUMENTS
```

## Enhanced Display

For the filtered results:
- Group by priority within the status
- Show time in current status
- Highlight tasks approaching deadlines
- Display blockers and dependencies
- Suggest next actions for each status group

## Intelligent Insights

Based on the status filter:
- **Pending**: Show recommended start order
- **In-Progress**: Display idle time warnings
- **Done**: Show newly unblocked tasks
- **Review**: Indicate review duration
- **Deferred**: Show reactivation criteria
- **Cancelled**: Display impact analysis
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/list-tasks-with-subtasks.toml">description=&quot;List Tasks With Subtasks&quot;
prompt = &quot;&quot;&quot;
List all tasks including their subtasks in a hierarchical view.

This command shows all tasks with their nested subtasks, providing a complete project overview.

## Execution

Run the Task Master list command with subtasks flag:
```bash
task-master list --with-subtasks
```

## Enhanced Display

I&apos;ll organize the output to show:
- Parent tasks with clear indicators
- Nested subtasks with proper indentation
- Status badges for quick scanning
- Dependencies and blockers highlighted
- Progress indicators for tasks with subtasks

## Smart Filtering

Based on the task hierarchy:
- Show completion percentage for parent tasks
- Highlight blocked subtask chains
- Group by functional areas
- Indicate critical path items

This gives you a complete tree view of your project structure.
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/list-tasks.toml">description=&quot;List Tasks&quot;
prompt = &quot;&quot;&quot;
List tasks with intelligent argument parsing.

Parse arguments to determine filters and display options:
- Status: pending, in-progress, done, review, deferred, cancelled
- Priority: high, medium, low (or priority:high)
- Special: subtasks, tree, dependencies, blocked
- IDs: Direct numbers (e.g., &quot;1,3,5&quot; or &quot;1-5&quot;)
- Complex: &quot;pending high&quot; = pending AND high priority

Arguments: $ARGUMENTS

Let me parse your request intelligently:

1. **Detect Filter Intent**
   - If arguments contain status keywords ‚Üí filter by status
   - If arguments contain priority ‚Üí filter by priority
   - If arguments contain &quot;subtasks&quot; ‚Üí include subtasks
   - If arguments contain &quot;tree&quot; ‚Üí hierarchical view
   - If arguments contain numbers ‚Üí show specific tasks
   - If arguments contain &quot;blocked&quot; ‚Üí show blocked tasks only

2. **Smart Combinations**
   Examples of what I understand:
   - &quot;pending high&quot; ‚Üí pending tasks with high priority
   - &quot;done today&quot; ‚Üí tasks completed today
   - &quot;blocked&quot; ‚Üí tasks with unmet dependencies
   - &quot;1-5&quot; ‚Üí tasks 1 through 5
   - &quot;subtasks tree&quot; ‚Üí hierarchical view with subtasks

3. **Execute Appropriate Query**
   Based on parsed intent, run the most specific task-master command

4. **Enhanced Display**
   - Group by relevant criteria
   - Show most important information first
   - Use visual indicators for quick scanning
   - Include relevant metrics

5. **Intelligent Suggestions**
   Based on what you&apos;re viewing, suggest next actions:
   - Many pending? ‚Üí Suggest priority order
   - Many blocked? ‚Üí Show dependency resolution
   - Looking at specific tasks? ‚Üí Show related tasks
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/next-task.toml">description=&quot;Next Task&quot;
prompt = &quot;&quot;&quot;
Intelligently determine and prepare the next action based on comprehensive context.

This enhanced version of &apos;next&apos; considers:
- Current task states
- Recent activity
- Time constraints
- Dependencies
- Your working patterns

Arguments: $ARGUMENTS

## Intelligent Next Action

### 1. **Context Gathering**
Let me analyze the current situation:
- Active tasks (in-progress)
- Recently completed tasks
- Blocked tasks
- Time since last activity
- Arguments provided: $ARGUMENTS

### 2. **Smart Decision Tree**

**If you have an in-progress task:**
- Has it been idle &gt; 2 hours? ‚Üí Suggest resuming or switching
- Near completion? ‚Üí Show remaining steps
- Blocked? ‚Üí Find alternative task

**If no in-progress tasks:**
- Unblocked high-priority tasks? ‚Üí Start highest
- Complex tasks need breakdown? ‚Üí Suggest expansion
- All tasks blocked? ‚Üí Show dependency resolution

**Special arguments handling:**
- &quot;quick&quot; ‚Üí Find task &lt; 2 hours
- &quot;easy&quot; ‚Üí Find low complexity task
- &quot;important&quot; ‚Üí Find high priority regardless of complexity
- &quot;continue&quot; ‚Üí Resume last worked task

### 3. **Preparation Workflow**

Based on selected task:
1. Show full context and history
2. Set up development environment
3. Run relevant tests
4. Open related files
5. Show similar completed tasks
6. Estimate completion time

### 4. **Alternative Suggestions**

Always provide options:
- Primary recommendation
- Quick alternative (&lt; 1 hour)
- Strategic option (unblocks most tasks)
- Learning option (new technology/skill)

### 5. **Workflow Integration**

Seamlessly connect to:
- `/project:task-master:start [selected]`
- `/project:workflows:auto-implement`
- `/project:task-master:expand` (if complex)
- `/project:utils:complexity-report` (if unsure)

The goal: Zero friction from decision to implementation.
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/parse-prd-with-research.toml">description=&quot;Parse PRD With Research&quot;
prompt = &quot;&quot;&quot;
Parse PRD with enhanced research mode for better task generation.

Arguments: $ARGUMENTS (PRD file path)

## Research-Enhanced Parsing

Uses the research AI provider (typically Perplexity) for more comprehensive task generation with current best practices.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS --research
```

## Research Benefits

1. **Current Best Practices**
   - Latest framework patterns
   - Security considerations
   - Performance optimizations
   - Accessibility requirements

2. **Technical Deep Dive**
   - Implementation approaches
   - Library recommendations
   - Architecture patterns
   - Testing strategies

3. **Comprehensive Coverage**
   - Edge cases consideration
   - Error handling tasks
   - Monitoring setup
   - Deployment tasks

## Enhanced Output

Research mode typically:
- Generates more detailed tasks
- Includes industry standards
- Adds compliance considerations
- Suggests modern tooling

## When to Use

- New technology domains
- Complex requirements
- Regulatory compliance needed
- Best practices crucial
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/parse-prd.toml">description=&quot;Parse PRD&quot;
prompt = &quot;&quot;&quot;
Parse a PRD document to generate tasks.

Arguments: $ARGUMENTS (PRD file path)

## Intelligent PRD Parsing

Analyzes your requirements document and generates a complete task breakdown.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS
```

## Parsing Process

1. **Document Analysis**
   - Extract key requirements
   - Identify technical components
   - Detect dependencies
   - Estimate complexity

2. **Task Generation**
   - Create 10-15 tasks by default
   - Include implementation tasks
   - Add testing tasks
   - Include documentation tasks
   - Set logical dependencies

3. **Smart Enhancements**
   - Group related functionality
   - Set appropriate priorities
   - Add acceptance criteria
   - Include test strategies

## Options

Parse arguments for modifiers:
- Number after filename ‚Üí `--num-tasks`
- `research` ‚Üí Use research mode
- `comprehensive` ‚Üí Generate more tasks

## Post-Generation

After parsing:
1. Display task summary
2. Show dependency graph
3. Suggest task expansion for complex items
4. Recommend sprint planning
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/project-status.toml">description=&quot;Project Status&quot;
prompt = &quot;&quot;&quot;
Enhanced status command with comprehensive project insights.

Arguments: $ARGUMENTS

## Intelligent Status Overview

### 1. **Executive Summary**
Quick dashboard view:
- üèÉ Active work (in-progress tasks)
- üìä Progress metrics (% complete, velocity)
- üöß Blockers and risks
- ‚è±Ô∏è Time analysis (estimated vs actual)
- üéØ Sprint/milestone progress

### 2. **Contextual Analysis**

Based on $ARGUMENTS, focus on:
- &quot;sprint&quot; ‚Üí Current sprint progress and burndown
- &quot;blocked&quot; ‚Üí Dependency chains and resolution paths
- &quot;team&quot; ‚Üí Task distribution and workload
- &quot;timeline&quot; ‚Üí Schedule adherence and projections
- &quot;risk&quot; ‚Üí High complexity or overdue items

### 3. **Smart Insights**

**Workflow Health:**
- Idle tasks (in-progress &gt; 24h without updates)
- Bottlenecks (multiple tasks waiting on same dependency)
- Quick wins (low complexity, high impact)

**Predictive Analytics:**
- Completion projections based on velocity
- Risk of missing deadlines
- Recommended task order for optimal flow

### 4. **Visual Intelligence**

Dynamic visualization based on data:
```
Sprint Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% (16/20 tasks)
Velocity Trend: ‚ÜóÔ∏è +15% this week
Blocked Tasks:  üî¥ 3 critical path items

Priority Distribution:
High:   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 8 tasks (2 blocked)
Medium: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 4 tasks
Low:    ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 2 tasks
```

### 5. **Actionable Recommendations**

Based on analysis:
1. **Immediate actions** (unblock critical path)
2. **Today&apos;s focus** (optimal task sequence)
3. **Process improvements** (recurring patterns)
4. **Resource needs** (skills, time, dependencies)

### 6. **Historical Context**

Compare to previous periods:
- Velocity changes
- Pattern recognition
- Improvement areas
- Success patterns to repeat
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/quick-install-taskmaster.toml">description=&quot;Quick Install TaskMaster&quot;
prompt = &quot;&quot;&quot;
Quick install Task Master globally if not already installed.

Execute this streamlined installation:

```bash
# Check and install in one command
task-master --version 2&gt;/dev/null || npm install -g task-master-ai

# Verify installation
task-master --version

# Quick setup check
task-master models --status || echo &quot;Note: You&apos;ll need to set up an AI provider API key&quot;
```

If you see &quot;command not found&quot; after installation, you may need to:
1. Restart your terminal
2. Or add npm global bin to PATH: `export PATH=$(npm bin -g):$PATH`

Once installed, you can use all the Task Master commands!

Quick test: Run `/taskmaster:help` to see all available commands.
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/remove-all-subtasks.toml">description=&quot;Remove All Subtasks&quot;
prompt = &quot;&quot;&quot;
Clear all subtasks from all tasks globally.

## Global Subtask Clearing

Remove all subtasks across the entire project. Use with extreme caution.

## Execution

```bash
task-master clear-subtasks --all
```

## Pre-Clear Analysis

1. **Project-Wide Summary**
   ```
   Global Subtask Summary
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Total parent tasks: 12
   Total subtasks: 47
   - Completed: 15
   - In-progress: 8
   - Pending: 24

   Work at risk: ~120 hours
   ```

2. **Critical Warnings**
   - In-progress subtasks that will lose work
   - Completed subtasks with valuable history
   - Complex dependency chains
   - Integration test results

## Double Confirmation

```
‚ö†Ô∏è  DESTRUCTIVE OPERATION WARNING ‚ö†Ô∏è
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
This will remove ALL 47 subtasks from your project
Including 8 in-progress and 15 completed subtasks

This action CANNOT be undone

Type &apos;CLEAR ALL SUBTASKS&apos; to confirm:
```

## Smart Safeguards

- Require explicit confirmation phrase
- Create automatic backup
- Log all removed data
- Option to export first

## Use Cases

Valid reasons for global clear:
- Project restructuring
- Major pivot in approach
- Starting fresh breakdown
- Switching to different task organization

## Process

1. Full project analysis
2. Create backup file
3. Show detailed impact
4. Require confirmation
5. Execute removal
6. Generate summary report

## Alternative Suggestions

Before clearing all:
- Export subtasks to file
- Clear only pending subtasks
- Clear by task category
- Archive instead of delete

## Post-Clear Report

```
Global Subtask Clear Complete
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Removed: 47 subtasks from 12 tasks
Backup saved: .taskmaster/backup/subtasks-20240115.json
Parent tasks updated: 12
Time estimates adjusted: Yes

Next steps:
- Review updated task list
- Re-expand complex tasks as needed
- Check project timeline
```
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/remove-dependency.toml">description=&quot;Remove Dependency&quot;
prompt = &quot;&quot;&quot;
Remove a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to remove dependency relationship.

## Removing Dependencies

Removes a dependency relationship, potentially unblocking tasks.

## Argument Parsing

Parse natural language or IDs:
- &quot;remove dependency between 5 and 3&quot;
- &quot;5 no longer needs 3&quot;
- &quot;unblock 5 from 3&quot;
- &quot;5 3&quot; ‚Üí remove dependency of 5 on 3

## Execution

```bash
task-master remove-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Pre-Removal Checks

1. **Verify dependency exists**
2. **Check impact on task flow**
3. **Warn if it breaks logical sequence**
4. **Show what will be unblocked**

## Smart Analysis

Before removing:
- Show why dependency might have existed
- Check if removal makes tasks executable
- Verify no critical path disruption
- Suggest alternative dependencies

## Post-Removal

After removing:
1. Show updated task status
2. List newly unblocked tasks
3. Update project timeline
4. Suggest next actions

## Safety Features

- Confirm if removing critical dependency
- Show tasks that become immediately actionable
- Warn about potential issues
- Keep removal history

## Example

```
/taskmaster:remove-dependency 5 from 3
‚Üí Removed: Task #5 no longer depends on #3
‚Üí Task #5 is now UNBLOCKED and ready to start
‚Üí Warning: Consider if #5 still needs #2 completed first
```
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/remove-subtask.toml">description=&quot;Remove Subtask&quot;
prompt = &quot;&quot;&quot;
Remove a subtask from its parent task.

Arguments: $ARGUMENTS

Parse subtask ID to remove, with option to convert to standalone task.

## Removing Subtasks

Remove a subtask and optionally convert it back to a standalone task.

## Argument Parsing

- &quot;remove subtask 5.1&quot;
- &quot;delete 5.1&quot;
- &quot;convert 5.1 to task&quot; ‚Üí remove and convert
- &quot;5.1 standalone&quot; ‚Üí convert to standalone

## Execution Options

### 1. Delete Subtask
```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt;
```

### 2. Convert to Standalone
```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt; --convert
```

## Pre-Removal Checks

1. **Validate Subtask**
   - Verify subtask exists
   - Check completion status
   - Review dependencies

2. **Impact Analysis**
   - Other subtasks that depend on it
   - Parent task implications
   - Data that will be lost

## Removal Process

### For Deletion:
1. Confirm if subtask has work done
2. Update parent task estimates
3. Remove subtask and its data
4. Clean up dependencies

### For Conversion:
1. Assign new standalone task ID
2. Preserve all task data
3. Update dependency references
4. Maintain task history

## Smart Features

- Warn if subtask is in-progress
- Show impact on parent task
- Preserve important data
- Update related estimates

## Example Flows

```
/taskmaster:remove-subtask 5.1
‚Üí Warning: Subtask #5.1 is in-progress
‚Üí This will delete all subtask data
‚Üí Parent task #5 will be updated
Confirm deletion? (y/n)

/taskmaster:remove-subtask 5.1 convert
‚Üí Converting subtask #5.1 to standalone task #89
‚Üí Preserved: All task data and history
‚Üí Updated: 2 dependency references
‚Üí New task #89 is now independent
```

## Post-Removal

- Update parent task status
- Recalculate estimates
- Show updated hierarchy
- Suggest next actions
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/remove-subtasks.toml">description=&quot;Remove Subtasks&quot;
prompt = &quot;&quot;&quot;
Clear all subtasks from a specific task.

Arguments: $ARGUMENTS (task ID)

Remove all subtasks from a parent task at once.

## Clearing Subtasks

Bulk removal of all subtasks from a parent task.

## Execution

```bash
task-master remove-subtasks --id=$ARGUMENTS
```

## Pre-Clear Analysis

1. **Subtask Summary**
   - Number of subtasks
   - Completion status of each
   - Work already done
   - Dependencies affected

2. **Impact Assessment**
   - Data that will be lost
   - Dependencies to be removed
   - Effect on project timeline
   - Parent task implications

## Confirmation Required

```
Remove Subtasks Confirmation
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Parent Task: #5 &quot;Implement user authentication&quot;
Subtasks to remove: 4
- #5.1 &quot;Setup auth framework&quot; (done)
- #5.2 &quot;Create login form&quot; (in-progress)
- #5.3 &quot;Add validation&quot; (pending)
- #5.4 &quot;Write tests&quot; (pending)

‚ö†Ô∏è  This will permanently delete all subtask data
Continue? (y/n)
```

## Smart Features

- Option to convert to standalone tasks
- Backup task data before clearing
- Preserve completed work history
- Update parent task appropriately

## Process

1. List all subtasks for confirmation
2. Check for in-progress work
3. Remove all subtasks
4. Update parent task
5. Clean up dependencies

## Alternative Options

Suggest alternatives:
- Convert important subtasks to tasks
- Keep completed subtasks
- Archive instead of delete
- Export subtask data first

## Post-Clear

- Show updated parent task
- Recalculate time estimates
- Update task complexity
- Suggest next steps

## Example

```
/taskmaster:remove-subtasks 5
‚Üí Found 4 subtasks to remove
‚Üí Warning: Subtask #5.2 is in-progress
‚Üí Cleared all subtasks from task #5
‚Üí Updated parent task estimates
‚Üí Suggestion: Consider re-expanding with better breakdown
```
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/remove-task.toml">description=&quot;Remove Task&quot;
prompt = &quot;&quot;&quot;
Remove a task permanently from the project.

Arguments: $ARGUMENTS (task ID)

Delete a task and handle all its relationships properly.

## Task Removal

Permanently removes a task while maintaining project integrity.

## Argument Parsing

- &quot;remove task 5&quot;
- &quot;delete 5&quot;
- &quot;5&quot; ‚Üí remove task 5
- Can include &quot;-y&quot; for auto-confirm

## Execution

```bash
task-master remove-task --id=&lt;id&gt; [-y]
```

## Pre-Removal Analysis

1. **Task Details**
   - Current status
   - Work completed
   - Time invested
   - Associated data

2. **Relationship Check**
   - Tasks that depend on this
   - Dependencies this task has
   - Subtasks that will be removed
   - Blocking implications

3. **Impact Assessment**
   ```
   Task Removal Impact
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Task: #5 &quot;Implement authentication&quot; (in-progress)
   Status: 60% complete (~8 hours work)

   Will affect:
   - 3 tasks depend on this (will be blocked)
   - Has 4 subtasks (will be deleted)
   - Part of critical path

   ‚ö†Ô∏è  This action cannot be undone
   ```

## Smart Warnings

- Warn if task is in-progress
- Show dependent tasks that will be blocked
- Highlight if part of critical path
- Note any completed work being lost

## Removal Process

1. Show comprehensive impact
2. Require confirmation (unless -y)
3. Update dependent task references
4. Remove task and subtasks
5. Clean up orphaned dependencies
6. Log removal with timestamp

## Alternative Actions

Suggest before deletion:
- Mark as cancelled instead
- Convert to documentation
- Archive task data
- Transfer work to another task

## Post-Removal

- List affected tasks
- Show broken dependencies
- Update project statistics
- Suggest dependency fixes
- Recalculate timeline

## Example Flows

```
/taskmaster:remove-task 5
‚Üí Task #5 is in-progress with 8 hours logged
‚Üí 3 other tasks depend on this
‚Üí Suggestion: Mark as cancelled instead?
Remove anyway? (y/n)

/taskmaster:remove-task 5 -y
‚Üí Removed: Task #5 and 4 subtasks
‚Üí Updated: 3 task dependencies
‚Üí Warning: Tasks #7, #8, #9 now have missing dependency
‚Üí Run /taskmaster:fix-dependencies to resolve
```

## Safety Features

- Confirmation required
- Impact preview
- Removal logging
- Suggest alternatives
- No cascade delete of dependents
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/setup-models.toml">description=&quot;Setup Models&quot;
prompt = &quot;&quot;&quot;
Run interactive setup to configure AI models.

## Interactive Model Configuration

Guides you through setting up AI providers for Task Master.

## Execution

```bash
task-master models --setup
```

## Setup Process

1. **Environment Check**
   - Detect existing API keys
   - Show current configuration
   - Identify missing providers

2. **Provider Selection**
   - Choose main provider (required)
   - Select research provider (recommended)
   - Configure fallback (optional)

3. **API Key Configuration**
   - Prompt for missing keys
   - Validate key format
   - Test connectivity
   - Save configuration

## Smart Recommendations

Based on your needs:
- **For best results**: Claude + Perplexity
- **Budget conscious**: GPT-3.5 + Perplexity
- **Maximum capability**: GPT-4 + Perplexity + Claude fallback

## Configuration Storage

Keys can be stored in:
1. Environment variables (recommended)
2. `.env` file in project
3. Global `.taskmaster/config`

## Post-Setup

After configuration:
- Test each provider
- Show usage examples
- Suggest next steps
- Verify parse-prd works
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/show-task.toml">description=&quot;Show Task&quot;
prompt = &quot;&quot;&quot;
Show detailed task information with rich context and insights.

Arguments: $ARGUMENTS

## Enhanced Task Display

Parse arguments to determine what to show and how.

### 1. **Smart Task Selection**

Based on $ARGUMENTS:
- Number ‚Üí Show specific task with full context
- &quot;current&quot; ‚Üí Show active in-progress task(s)
- &quot;next&quot; ‚Üí Show recommended next task
- &quot;blocked&quot; ‚Üí Show all blocked tasks with reasons
- &quot;critical&quot; ‚Üí Show critical path tasks
- Multiple IDs ‚Üí Comparative view

### 2. **Contextual Information**

For each task, intelligently include:

**Core Details**
- Full task information (id, title, description, details)
- Current status with history
- Test strategy and acceptance criteria
- Priority and complexity analysis

**Relationships**
- Dependencies (what it needs)
- Dependents (what needs it)
- Parent/subtask hierarchy
- Related tasks (similar work)

**Time Intelligence**
- Created/updated timestamps
- Time in current status
- Estimated vs actual time
- Historical completion patterns

### 3. **Visual Enhancements**

```
üìã Task #45: Implement User Authentication
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Status: üü° in-progress (2 hours)
Priority: üî¥ High | Complexity: 73/100

Dependencies: ‚úÖ #41, ‚úÖ #42, ‚è≥ #43 (blocked)
Blocks: #46, #47, #52

Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% complete

Recent Activity:
- 2h ago: Status changed to in-progress
- 4h ago: Dependency #42 completed
- Yesterday: Task expanded with 3 subtasks
```

### 4. **Intelligent Insights**

Based on task analysis:
- **Risk Assessment**: Complexity vs time remaining
- **Bottleneck Analysis**: Is this blocking critical work?
- **Recommendation**: Suggested approach or concerns
- **Similar Tasks**: How others completed similar work

### 5. **Action Suggestions**

Context-aware next steps:
- If blocked ‚Üí Show how to unblock
- If complex ‚Üí Suggest expansion
- If in-progress ‚Üí Show completion checklist
- If done ‚Üí Show dependent tasks ready to start

### 6. **Multi-Task View**

When showing multiple tasks:
- Common dependencies
- Optimal completion order
- Parallel work opportunities
- Combined complexity analysis
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/smart-workflow.toml">description=&quot;Smart Workflow&quot;
prompt = &quot;&quot;&quot;
Execute an intelligent workflow based on current project state and recent commands.

This command analyzes:
1. Recent commands you&apos;ve run
2. Current project state
3. Time of day / day of week
4. Your working patterns

Arguments: $ARGUMENTS

## Intelligent Workflow Selection

Based on context, I&apos;ll determine the best workflow:

### Context Analysis
- Previous command executed
- Current task states
- Unfinished work from last session
- Your typical patterns

### Smart Execution

If last command was:
- `status` ‚Üí Likely starting work ‚Üí Run daily standup
- `complete` ‚Üí Task finished ‚Üí Find next task
- `list pending` ‚Üí Planning ‚Üí Suggest sprint planning
- `expand` ‚Üí Breaking down work ‚Üí Show complexity analysis
- `init` ‚Üí New project ‚Üí Show onboarding workflow

If no recent commands:
- Morning? ‚Üí Daily standup workflow
- Many pending tasks? ‚Üí Sprint planning
- Tasks blocked? ‚Üí Dependency resolution
- Friday? ‚Üí Weekly review

### Workflow Composition

I&apos;ll chain appropriate commands:
1. Analyze current state
2. Execute primary workflow
3. Suggest follow-up actions
4. Prepare environment for coding

### Learning Mode

This command learns from your patterns:
- Track command sequences
- Note time preferences
- Remember common workflows
- Adapt to your style

Example flows detected:
- Morning: standup ‚Üí next ‚Üí start
- After lunch: status ‚Üí continue task
- End of day: complete ‚Üí commit ‚Üí status
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/sync-readme.toml">description=&quot;Sync README&quot;
prompt = &quot;&quot;&quot;
Export tasks to README.md with professional formatting.

Arguments: $ARGUMENTS

Generate a well-formatted README with current task information.

## README Synchronization

Creates or updates README.md with beautifully formatted task information.

## Argument Parsing

Optional filters:
- &quot;pending&quot; ‚Üí Only pending tasks
- &quot;with-subtasks&quot; ‚Üí Include subtask details
- &quot;by-priority&quot; ‚Üí Group by priority
- &quot;sprint&quot; ‚Üí Current sprint only

## Execution

```bash
task-master sync-readme [--with-subtasks] [--status=&lt;status&gt;]
```

## README Generation

### 1. **Project Header**
```markdown
# Project Name

## üìã Task Progress

Last Updated: 2024-01-15 10:30 AM

### Summary
- Total Tasks: 45
- Completed: 15 (33%)
- In Progress: 5 (11%)
- Pending: 25 (56%)
```

### 2. **Task Sections**
Organized by status or priority:
- Progress indicators
- Task descriptions
- Dependencies noted
- Time estimates

### 3. **Visual Elements**
- Progress bars
- Status badges
- Priority indicators
- Completion checkmarks

## Smart Features

1. **Intelligent Grouping**
   - By feature area
   - By sprint/milestone
   - By assigned developer
   - By priority

2. **Progress Tracking**
   - Overall completion
   - Sprint velocity
   - Burndown indication
   - Time tracking

3. **Formatting Options**
   - GitHub-flavored markdown
   - Task checkboxes
   - Collapsible sections
   - Table format available

## Example Output

```markdown
## üöÄ Current Sprint

### In Progress
- [ ] üîÑ #5 **Implement user authentication** (60% complete)
  - Dependencies: API design (#3 ‚úÖ)
  - Subtasks: 4 (2 completed)
  - Est: 8h / Spent: 5h

### Pending (High Priority)
- [ ] ‚ö° #8 **Create dashboard UI**
  - Blocked by: #5
  - Complexity: High
  - Est: 12h
```

## Customization

Based on arguments:
- Include/exclude sections
- Detail level control
- Custom grouping
- Filter by criteria

## Post-Sync

After generation:
1. Show diff preview
2. Backup existing README
3. Write new content
4. Commit reminder
5. Update timestamp

## Integration

Works well with:
- Git workflows
- CI/CD pipelines
- Project documentation
- Team updates
- Client reports
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/tm-main.toml">description=&quot;Task Master Main&quot;
prompt = &quot;&quot;&quot;
# Task Master Command Reference

Comprehensive command structure for Task Master integration with Claude Code.

## Command Organization

Commands are organized hierarchically to match Task Master&apos;s CLI structure while providing enhanced Claude Code integration.

## Project Setup &amp; Configuration

### `/taskmaster:init`
- `init-project` - Initialize new project (handles PRD files intelligently)
- `init-project-quick` - Quick setup with auto-confirmation (-y flag)

### `/taskmaster:models`
- `view-models` - View current AI model configuration
- `setup-models` - Interactive model configuration
- `set-main` - Set primary generation model
- `set-research` - Set research model
- `set-fallback` - Set fallback model

## Task Generation

### `/taskmaster:parse-prd`
- `parse-prd` - Generate tasks from PRD document
- `parse-prd-with-research` - Enhanced parsing with research mode

### `/taskmaster:generate`
- `generate-tasks` - Create individual task files from tasks.json

## Task Management

### `/taskmaster:list`
- `list-tasks` - Smart listing with natural language filters
- `list-tasks-with-subtasks` - Include subtasks in hierarchical view
- `list-tasks-by-status` - Filter by specific status

### `/taskmaster:set-status`
- `to-pending` - Reset task to pending
- `to-in-progress` - Start working on task
- `to-done` - Mark task complete
- `to-review` - Submit for review
- `to-deferred` - Defer task
- `to-cancelled` - Cancel task

### `/taskmaster:sync-readme`
- `sync-readme` - Export tasks to README.md with formatting

### `/taskmaster:update`
- `update-task` - Update tasks with natural language
- `update-tasks-from-id` - Update multiple tasks from a starting point
- `update-single-task` - Update specific task

### `/taskmaster:add-task`
- `add-task` - Add new task with AI assistance

### `/taskmaster:remove-task`
- `remove-task` - Remove task with confirmation

## Subtask Management

### `/taskmaster:add-subtask`
- `add-subtask` - Add new subtask to parent
- `convert-task-to-subtask` - Convert existing task to subtask

### `/taskmaster:remove-subtask`
- `remove-subtask` - Remove subtask (with optional conversion)

### `/taskmaster:clear-subtasks`
- `clear-subtasks` - Clear subtasks from specific task
- `clear-all-subtasks` - Clear all subtasks globally

## Task Analysis &amp; Breakdown

### `/taskmaster:analyze-complexity`
- `analyze-complexity` - Analyze and generate expansion recommendations

### `/taskmaster:complexity-report`
- `complexity-report` - Display complexity analysis report

### `/taskmaster:expand`
- `expand-task` - Break down specific task
- `expand-all-tasks` - Expand all eligible tasks
- `with-research` - Enhanced expansion

## Task Navigation

### `/taskmaster:next`
- `next-task` - Intelligent next task recommendation

### `/taskmaster:show`
- `show-task` - Display detailed task information

### `/taskmaster:status`
- `project-status` - Comprehensive project dashboard

## Dependency Management

### `/taskmaster:add-dependency`
- `add-dependency` - Add task dependency

### `/taskmaster:remove-dependency`
- `remove-dependency` - Remove task dependency

### `/taskmaster:validate-dependencies`
- `validate-dependencies` - Check for dependency issues

### `/taskmaster:fix-dependencies`
- `fix-dependencies` - Automatically fix dependency problems

## Workflows &amp; Automation

### `/taskmaster:workflows`
- `smart-workflow` - Context-aware intelligent workflow execution
- `command-pipeline` - Chain multiple commands together
- `auto-implement-tasks` - Advanced auto-implementation with code generation

## Utilities

### `/taskmaster:utils`
- `analyze-project` - Deep project analysis and insights

### `/taskmaster:setup`
- `install-taskmaster` - Comprehensive installation guide
- `quick-install-taskmaster` - One-line global installation

## Usage Patterns

### Natural Language
Most commands accept natural language arguments:
```
/taskmaster:add-task create user authentication system
/taskmaster:update mark all API tasks as high priority
/taskmaster:list show blocked tasks
```

### ID-Based Commands
Commands requiring IDs intelligently parse from $ARGUMENTS:
```
/taskmaster:show 45
/taskmaster:expand 23
/taskmaster:set-status/to-done 67
```

### Smart Defaults
Commands provide intelligent defaults and suggestions based on context.
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/to-cancelled.toml">description=&quot;To Cancelled&quot;
prompt = &quot;&quot;&quot;
Cancel a task permanently.

Arguments: $ARGUMENTS (task ID)

## Cancelling a Task

This status indicates a task is no longer needed and won&apos;t be completed.

## Valid Reasons for Cancellation

- Requirements changed
- Feature deprecated
- Duplicate of another task
- Strategic pivot
- Technical approach invalidated

## Pre-Cancellation Checks

1. Confirm no critical dependencies
2. Check for partial implementation
3. Verify cancellation rationale
4. Document lessons learned

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=cancelled
```

## Cancellation Impact

When cancelling:
1. **Dependency Updates**
   - Notify dependent tasks
   - Update project scope
   - Recalculate timelines

2. **Clean-up Actions**
   - Remove related branches
   - Archive any work done
   - Update documentation
   - Close related issues

3. **Learning Capture**
   - Document why cancelled
   - Note what was learned
   - Update estimation models
   - Prevent future duplicates

## Historical Preservation

- Keep for reference
- Tag with cancellation reason
- Link to replacement if any
- Maintain audit trail
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/to-deferred.toml">description=&quot;To Deferred&quot;
prompt = &quot;&quot;&quot;
Defer a task for later consideration.

Arguments: $ARGUMENTS (task ID)

## Deferring a Task

This status indicates a task is valid but not currently actionable or prioritized.

## Valid Reasons for Deferral

- Waiting for external dependencies
- Reprioritized for future sprint
- Blocked by technical limitations
- Resource constraints
- Strategic timing considerations

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=deferred
```

## Deferral Management

When deferring:
1. **Document Reason**
   - Capture why it&apos;s being deferred
   - Set reactivation criteria
   - Note any partial work completed

2. **Impact Analysis**
   - Check dependent tasks
   - Update project timeline
   - Notify affected stakeholders

3. **Future Planning**
   - Set review reminders
   - Tag for specific milestone
   - Preserve context for reactivation
   - Link to blocking issues

## Smart Tracking

- Monitor deferral duration
- Alert when criteria met
- Prevent scope creep
- Regular review cycles
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/to-done.toml">description=&quot;To Done&quot;
prompt = &quot;&quot;&quot;
Mark a task as completed.

Arguments: $ARGUMENTS (task ID)

## Completing a Task

This command validates task completion and updates project state intelligently.

## Pre-Completion Checks

1. Verify test strategy was followed
2. Check if all subtasks are complete
3. Validate acceptance criteria met
4. Ensure code is committed

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=done
```

## Post-Completion Actions

1. **Update Dependencies**
   - Identify newly unblocked tasks
   - Update sprint progress
   - Recalculate project timeline

2. **Documentation**
   - Generate completion summary
   - Update CLAUDE.md with learnings
   - Log implementation approach

3. **Next Steps**
   - Show newly available tasks
   - Suggest logical next task
   - Update velocity metrics

## Celebration &amp; Learning

- Show impact of completion
- Display unblocked work
- Recognize achievement
- Capture lessons learned
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/to-in-progress.toml">description=&quot;To In Progress&quot;
prompt = &quot;&quot;&quot;
Start working on a task by setting its status to in-progress.

Arguments: $ARGUMENTS (task ID)

## Starting Work on Task

This command does more than just change status - it prepares your environment for productive work.

## Pre-Start Checks

1. Verify dependencies are met
2. Check if another task is already in-progress
3. Ensure task details are complete
4. Validate test strategy exists

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=in-progress
```

## Environment Setup

After setting to in-progress:
1. Create/checkout appropriate git branch
2. Open relevant documentation
3. Set up test watchers if applicable
4. Display task details and acceptance criteria
5. Show similar completed tasks for reference

## Smart Suggestions

- Estimated completion time based on complexity
- Related files from similar tasks
- Potential blockers to watch for
- Recommended first steps
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/to-pending.toml">description=&quot;To Pending&quot;
prompt = &quot;&quot;&quot;
Set a task&apos;s status to pending.

Arguments: $ARGUMENTS (task ID)

## Setting Task to Pending

This moves a task back to the pending state, useful for:
- Resetting erroneously started tasks
- Deferring work that was prematurely begun
- Reorganizing sprint priorities

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=pending
```

## Validation

Before setting to pending:
- Warn if task is currently in-progress
- Check if this will block other tasks
- Suggest documenting why it&apos;s being reset
- Preserve any work already done

## Smart Actions

After setting to pending:
- Update sprint planning if needed
- Notify about freed resources
- Suggest priority reassessment
- Log the status change with context
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/to-review.toml">description=&quot;To Review&quot;
prompt = &quot;&quot;&quot;
Set a task&apos;s status to review.

Arguments: $ARGUMENTS (task ID)

## Marking Task for Review

This status indicates work is complete but needs verification before final approval.

## When to Use Review Status

- Code complete but needs peer review
- Implementation done but needs testing
- Documentation written but needs proofreading
- Design complete but needs stakeholder approval

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=review
```

## Review Preparation

When setting to review:
1. **Generate Review Checklist**
   - Link to PR/MR if applicable
   - Highlight key changes
   - Note areas needing attention
   - Include test results

2. **Documentation**
   - Update task with review notes
   - Link relevant artifacts
   - Specify reviewers if known

3. **Smart Actions**
   - Create review reminders
   - Track review duration
   - Suggest reviewers based on expertise
   - Prepare rollback plan if needed
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/update-single-task.toml">description=&quot;Update Single Task&quot;
prompt = &quot;&quot;&quot;
Update a single specific task with new information.

Arguments: $ARGUMENTS

Parse task ID and update details.

## Single Task Update

Precisely update one task with AI assistance to maintain consistency.

## Argument Parsing

Natural language updates:
- &quot;5: add caching requirement&quot;
- &quot;update 5 to include error handling&quot;
- &quot;task 5 needs rate limiting&quot;
- &quot;5 change priority to high&quot;

## Execution

```bash
task-master update-task --id=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Types

### 1. **Content Updates**
- Enhance description
- Add requirements
- Clarify details
- Update acceptance criteria

### 2. **Metadata Updates**
- Change priority
- Adjust time estimates
- Update complexity
- Modify dependencies

### 3. **Strategic Updates**
- Revise approach
- Change test strategy
- Update implementation notes
- Adjust subtask needs

## AI-Powered Updates

The AI:
1. **Understands Context**
   - Reads current task state
   - Identifies update intent
   - Maintains consistency
   - Preserves important info

2. **Applies Changes**
   - Updates relevant fields
   - Keeps style consistent
   - Adds without removing
   - Enhances clarity

3. **Validates Results**
   - Checks coherence
   - Verifies completeness
   - Maintains relationships
   - Suggests related updates

## Example Updates

```
/taskmaster:update/single 5: add rate limiting
‚Üí Updating Task #5: &quot;Implement API endpoints&quot;

Current: Basic CRUD endpoints
Adding: Rate limiting requirements

Updated sections:
‚úì Description: Added rate limiting mention
‚úì Details: Added specific limits (100/min)
‚úì Test Strategy: Added rate limit tests
‚úì Complexity: Increased from 5 to 6
‚úì Time Estimate: Increased by 2 hours

Suggestion: Also update task #6 (API Gateway) for consistency?
```

## Smart Features

1. **Incremental Updates**
   - Adds without overwriting
   - Preserves work history
   - Tracks what changed
   - Shows diff view

2. **Consistency Checks**
   - Related task alignment
   - Subtask compatibility
   - Dependency validity
   - Timeline impact

3. **Update History**
   - Timestamp changes
   - Track who/what updated
   - Reason for update
   - Previous versions

## Field-Specific Updates

Quick syntax for specific fields:
- &quot;5 priority:high&quot; ‚Üí Update priority only
- &quot;5 add-time:4h&quot; ‚Üí Add to time estimate
- &quot;5 status:review&quot; ‚Üí Change status
- &quot;5 depends:3,4&quot; ‚Üí Add dependencies

## Post-Update

- Show updated task
- Highlight changes
- Check related tasks
- Update suggestions
- Timeline adjustments
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/update-task.toml">description=&quot;Update Task&quot;
prompt = &quot;&quot;&quot;
Update tasks with intelligent field detection and bulk operations.

Arguments: $ARGUMENTS

## Intelligent Task Updates

Parse arguments to determine update intent and execute smartly.

### 1. **Natural Language Processing**

Understand update requests like:
- &quot;mark 23 as done&quot; ‚Üí Update status to done
- &quot;increase priority of 45&quot; ‚Üí Set priority to high
- &quot;add dependency on 12 to task 34&quot; ‚Üí Add dependency
- &quot;tasks 20-25 need review&quot; ‚Üí Bulk status update
- &quot;all API tasks high priority&quot; ‚Üí Pattern-based update

### 2. **Smart Field Detection**

Automatically detect what to update:
- Status keywords: done, complete, start, pause, review
- Priority changes: urgent, high, low, deprioritize
- Dependency updates: depends on, blocks, after
- Assignment: assign to, owner, responsible
- Time: estimate, spent, deadline

### 3. **Bulk Operations**

Support for multiple task updates:
```
Examples:
- &quot;complete tasks 12, 15, 18&quot;
- &quot;all pending auth tasks to in-progress&quot;
- &quot;increase priority for tasks blocking 45&quot;
- &quot;defer all documentation tasks&quot;
```

### 4. **Contextual Validation**

Before updating, check:
- Status transitions are valid
- Dependencies don&apos;t create cycles
- Priority changes make sense
- Bulk updates won&apos;t break project flow

Show preview:
```
Update Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Tasks to update: #23, #24, #25
Change: status ‚Üí in-progress
Impact: Will unblock tasks #30, #31
Warning: Task #24 has unmet dependencies
```

### 5. **Smart Suggestions**

Based on update:
- Completing task? ‚Üí Show newly unblocked tasks
- Changing priority? ‚Üí Show impact on sprint
- Adding dependency? ‚Üí Check for conflicts
- Bulk update? ‚Üí Show summary of changes

### 6. **Workflow Integration**

After updates:
- Auto-update dependent task states
- Trigger status recalculation
- Update sprint/milestone progress
- Log changes with context

Result: Flexible, intelligent task updates with safety checks.
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/update-tasks-from-id.toml">description=&quot;Update Tasks From ID&quot;
prompt = &quot;&quot;&quot;
Update multiple tasks starting from a specific ID.

Arguments: $ARGUMENTS

Parse starting task ID and update context.

## Bulk Task Updates

Update multiple related tasks based on new requirements or context changes.

## Argument Parsing

- &quot;from 5: add security requirements&quot;
- &quot;5 onwards: update API endpoints&quot;
- &quot;starting at 5: change to use new framework&quot;

## Execution

```bash
task-master update --from=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Process

### 1. **Task Selection**
Starting from specified ID:
- Include the task itself
- Include all dependent tasks
- Include related subtasks
- Smart boundary detection

### 2. **Context Application**
AI analyzes the update context and:
- Identifies what needs changing
- Maintains consistency
- Preserves completed work
- Updates related information

### 3. **Intelligent Updates**
- Modify descriptions appropriately
- Update test strategies
- Adjust time estimates
- Revise dependencies if needed

## Smart Features

1. **Scope Detection**
   - Find natural task groupings
   - Identify related features
   - Stop at logical boundaries
   - Avoid over-updating

2. **Consistency Maintenance**
   - Keep naming conventions
   - Preserve relationships
   - Update cross-references
   - Maintain task flow

3. **Change Preview**
   ```
   Bulk Update Preview
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Starting from: Task #5
   Tasks to update: 8 tasks + 12 subtasks

   Context: &quot;add security requirements&quot;

   Changes will include:
   - Add security sections to descriptions
   - Update test strategies for security
   - Add security-related subtasks where needed
   - Adjust time estimates (+20% average)

   Continue? (y/n)
   ```

## Example Updates

```
/taskmaster:update-tasks-from-id 5: change database to PostgreSQL
‚Üí Analyzing impact starting from task #5
‚Üí Found 6 related tasks to update
‚Üí Updates will maintain consistency
‚Üí Preview changes? (y/n)

Applied updates:
‚úì Task #5: Updated connection logic references
‚úì Task #6: Changed migration approach
‚úì Task #7: Updated query syntax notes
‚úì Task #8: Revised testing strategy
‚úì Task #9: Updated deployment steps
‚úì Task #12: Changed backup procedures
```

## Safety Features

- Preview all changes
- Selective confirmation
- Rollback capability
- Change logging
- Validation checks

## Post-Update

- Summary of changes
- Consistency verification
- Suggest review tasks
- Update timeline if needed
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/validate-dependencies.toml">description=&quot;Validate Dependencies&quot;
prompt = &quot;&quot;&quot;
Validate all task dependencies for issues.

## Dependency Validation

Comprehensive check for dependency problems across the entire project.

## Execution

```bash
task-master validate-dependencies
```

## Validation Checks

1. **Circular Dependencies**
   - A depends on B, B depends on A
   - Complex circular chains
   - Self-dependencies

2. **Missing Dependencies**
   - References to non-existent tasks
   - Deleted task references
   - Invalid task IDs

3. **Logical Issues**
   - Completed tasks depending on pending
   - Cancelled tasks in dependency chains
   - Impossible sequences

4. **Complexity Warnings**
   - Over-complex dependency chains
   - Too many dependencies per task
   - Bottleneck tasks

## Smart Analysis

The validation provides:
- Visual dependency graph
- Critical path analysis
- Bottleneck identification
- Suggested optimizations

## Report Format

```
Dependency Validation Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ No circular dependencies found
‚ö†Ô∏è  2 warnings found:
   - Task #23 has 7 dependencies (consider breaking down)
   - Task #45 blocks 5 other tasks (potential bottleneck)
‚ùå 1 error found:
   - Task #67 depends on deleted task #66

Critical Path: #1 ‚Üí #5 ‚Üí #23 ‚Üí #45 ‚Üí #50 (15 days)
```

## Actionable Output

For each issue found:
- Clear description
- Impact assessment
- Suggested fix
- Command to resolve

## Next Steps

After validation:
- Run `/taskmaster:fix-dependencies` to auto-fix
- Manually adjust problematic dependencies
- Rerun to verify fixes
&quot;&quot;&quot;</file><file path="be/.gemini/commands/tm/view-models.toml">description=&quot;View Models&quot;
prompt = &quot;&quot;&quot;
View current AI model configuration.

## Model Configuration Display

Shows the currently configured AI providers and models for Task Master.

## Execution

```bash
task-master models
```

## Information Displayed

1. **Main Provider**
   - Model ID and name
   - API key status (configured/missing)
   - Usage: Primary task generation

2. **Research Provider**
   - Model ID and name
   - API key status
   - Usage: Enhanced research mode

3. **Fallback Provider**
   - Model ID and name
   - API key status
   - Usage: Backup when main fails

## Visual Status

```
Task Master AI Model Configuration
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Main:     ‚úÖ claude-3-5-sonnet (configured)
Research: ‚úÖ perplexity-sonar (configured)
Fallback: ‚ö†Ô∏è  Not configured (optional)

Available Models:
- claude-3-5-sonnet
- gpt-4-turbo
- gpt-3.5-turbo
- perplexity-sonar
```

## Next Actions

Based on configuration:
- If missing API keys ‚Üí Suggest setup
- If no research model ‚Üí Explain benefits
- If all configured ‚Üí Show usage tips
&quot;&quot;&quot;</file><file path="be/.github/workflows/align-code-style.yaml">name: Enforce code style (pnpm)
on:
  push:
    branches:
      - &quot;**&quot;
  pull_request:
  workflow_dispatch:
permissions:
  contents: write
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true
jobs:
  style:
    if: ${{ github.actor != &apos;github-actions[bot]&apos; }}
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Ensure pnpm only
        shell: bash
        run: |
          set -euo pipefail
          if [ -f yarn.lock ]; then
            echo &quot;yarn.lock found. Use pnpm.&quot;
            exit 1
          fi
          pm=&quot;$(jq -r &apos;.packageManager // &quot;&quot;&apos; package.json 2&gt;/dev/null || echo &quot;&quot;)&quot;
          case &quot;$pm&quot; in
            yarn@*) echo &apos;packageManager is Yarn. Set it to pnpm.&apos;; exit 1 ;;
          esac
      - name: Setup pnpm (latest)
        uses: pnpm/action-setup@v4
        with:
          version: latest
          run_install: false
      - name: Setup Node.js with pnpm cache
        uses: actions/setup-node@v4
        with:
          node-version: &quot;lts/*&quot;
          cache: pnpm
          cache-dependency-path: pnpm-lock.yaml
      - name: Install dependencies
        run: pnpm install --frozen-lockfile --prefer-offline
      - name: Migrate Biome config (best-effort)
        run: pnpm biome migrate --write || true
      - name: Sort package.json
        run: pnpm dlx sort-package-json
      - name: Format with Biome
        run: |
          if pnpm biome --version &gt;/dev/null 2&gt;&amp;1; then
            pnpm biome check --write .
          else
            pnpm run -s format
          fi
        continue-on-error: true
      - name: Lint
        run: |
          if pnpm biome --version &gt;/dev/null 2&gt;&amp;1; then
            pnpm biome ci .
          else
            pnpm run -s lint
          fi
        continue-on-error: true
      - name: Fail if there are uncommitted changes on PRs
        if: ${{ github.event_name == &apos;pull_request&apos; }}
        shell: bash
        run: |
          if ! git diff --quiet; then
            echo &quot;Code style violations detected. Run the formatter locally.&quot;
            git status --porcelain
            exit 1
          fi
        continue-on-error: true
      - name: Auto-commit changes (push events only)
        if: ${{ github.event_name == &apos;push&apos; }}
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: &quot;chore: sort package.json, format, and lint (CI) [skip ci]&quot;
          commit_user_name: &quot;github-actions[bot]&quot;
          commit_user_email: &quot;github-actions[bot]@users.noreply.github.com&quot;
          add_options: &quot;-A&quot;
      - name: Assert clean working tree after auto-commit
        if: ${{ github.event_name == &apos;push&apos; }}
        run: git diff --quiet || true</file><file path="be/.github/workflows/delete-all-workflows-history.yaml">name: Delete workflows history
on:
  workflow_dispatch:
    inputs:
      dry_run:
        description: &quot;List runs without deleting&quot;
        required: false
        default: &quot;false&quot;
  schedule:
    - cron: &quot;0 3 */2 * *&quot;
permissions:
  actions: write
  contents: read
concurrency:
  group: purge-workflow-history
  cancel-in-progress: false
jobs:
  purge:
    name: Delete all completed workflow runs
    runs-on: ubuntu-latest
    steps:
      - name: Purge completed runs (streaming + backoff)
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const owner = context.repo.owner;
            const repo = context.repo.repo;
            const currentRunId = context.runId;
            const dryRun = (core.getInput(&apos;dry_run&apos;) || &apos;false&apos;).toLowerCase() === &apos;true&apos;;
            const sleep = (ms) =&gt; new Promise(res =&gt; setTimeout(res, ms));
            async function deleteWithRetry(run) {
              const maxAttempts = 6;
              let delay = 1000; // start 1s, exponential backoff
              for (let attempt = 1; attempt &lt;= maxAttempts; attempt++) {
                try {
                  if (dryRun) {
                    core.info(`[dry-run] would delete run ${run.id} (${run.name} #${run.run_number}) created ${run.created_at}`);
                    return true;
                  }
                  await github.rest.actions.deleteWorkflowRun({ owner, repo, run_id: run.id });
                  core.info(`deleted run ${run.id} (${run.name} #${run.run_number})`);
                  return true;
                } catch (err) {
                  const status = err.status || 0;
                  const msg = err.message || String(err);
                  // Retry only on throttling or transient server errors
                  const retriable = status === 429 || status === 502 || status === 503 || status === 504 ||
                                    (status === 403 &amp;&amp; /rate|secondary rate/i.test(msg));
                  if (!retriable || attempt === maxAttempts) {
                    core.warning(`failed to delete run ${run.id} (${run.name} #${run.run_number}) [status=${status}]: ${msg}`);
                    return false;
                  }
                  core.info(`rate-limited; backing off ${delay}ms (attempt ${attempt}/${maxAttempts})`);
                  await sleep(delay);
                  delay = Math.min(delay * 2, 30000);
                }
              }
              return false;
            }
            let deleted = 0, skipped = 0, failed = 0;
            // Stream pages to avoid loading everything into memory
            const iterator = github.paginate.iterator(
              github.rest.actions.listWorkflowRunsForRepo,
              {
                owner, repo,
                per_page: 100,
                status: &apos;completed&apos; // only completed runs are eligible for deletion
              }
            );
            for await (const { data: runs } of iterator) {
              for (const run of runs) {
                // Extra safety: never delete this job&apos;s run; skip any non-completed just in case
                if (run.id === currentRunId || run.status !== &apos;completed&apos;) {
                  skipped++;
                  continue;
                }
                const ok = await deleteWithRetry(run);
                ok ? deleted++ : failed++;
              }
            }
            const summary = `Deleted=${deleted}, Skipped=${skipped}, Failed=${failed}, DryRun=${dryRun}`;
            if (failed &gt; 0) core.warning(summary); else core.notice(summary);</file><file path="be/.github/workflows/run-tests-on-push.yaml">name: Run unit tests (pnpm)
on:
  push:
    branches:
      - main
  workflow_dispatch:
permissions:
  contents: read
jobs:
  Running-Tests:
    runs-on: ubuntu-latest
    env:
      CI: true
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Ensure pnpm is the only package manager
        shell: bash
        run: |
          set -euo pipefail
          if [ -f yarn.lock ]; then
            echo &quot; yarn.lock found. Remove it and migrate to pnpm.&quot;
            exit 1
          fi
          if jq -e &apos;.packageManager | startswith(&quot;yarn@&quot;)&apos; package.json &gt;/dev/null 2&gt;&amp;1; then
            echo &apos; packageManager is set to Yarn. Use pnpm instead.&apos;
            exit 1
          fi
      - name: Setup pnpm (latest)
        uses: pnpm/action-setup@v4
        with:
          version: latest
          run_install: false
      - name: Setup Node.js (LTS) with pnpm cache
        uses: actions/setup-node@v4
        with:
          node-version: &apos;lts/*&apos;
          cache: pnpm
          cache-dependency-path: pnpm-lock.yaml
      - name: Print tool versions
        run: |
          node -v
          pnpm -v
      - name: Install dependencies
        run: pnpm install --frozen-lockfile
      - name: Run tests with coverage
        run: |
          pnpm test -- \
            --coverage \
            --coverageReporters=json-summary \
            --coverageReporters=text-summary \
            --coverageReporters=lcov \
            --coverageDirectory=coverage
      - name: Upload coverage artifact
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: coverage-${{ github.run_id }}
          path: coverage/**
          retention-days: 14</file><file path="be/.github/workflows/weekly-npm-updates.yaml">name: Weekly dependencies Updates (pnpm)
on:
  schedule:
    - cron: &quot;0 3 * * 1&quot;
  workflow_dispatch:
permissions:
  contents: write
  pull-requests: write
  issues: write
concurrency:
  group: ${{ github.workflow }}
  cancel-in-progress: true
jobs:
  update-deps:
    runs-on: ubuntu-latest
    env:
      HUSKY: &quot;0&quot;
    steps:
      - uses: actions/checkout@v4
      - name: Verify no Yarn config present
        shell: bash
        run: |
          set -euo pipefail
          if [ -f yarn.lock ]; then
            echo &quot; yarn.lock found. Remove it and migrate to pnpm.&quot;
            exit 1
          fi
          if jq -e &apos;.packageManager | startswith(&quot;yarn@&quot;)&apos; package.json &gt;/dev/null 2&gt;&amp;1; then
            echo &apos; packageManager is Yarn. Set it to pnpm.&apos;
            exit 1
          fi
      - name: Setup pnpm (latest)
        uses: pnpm/action-setup@v4
        with:
          version: latest
          run_install: false
      - name: Setup Node.js with pnpm cache
        uses: actions/setup-node@v4
        with:
          node-version: &quot;lts/*&quot;
          cache: pnpm
          cache-dependency-path: pnpm-lock.yaml
      - name: Print tool versions
        run: |
          node -v
          pnpm -v
      - name: Update dependencies (minor/patch only; block zod major)
        shell: bash
        run: |
          set -euo pipefail
          pnpm dlx npm-check-updates@latest -u --target minor --reject &apos;zod&apos;
          pnpm install --no-frozen-lockfile
      - name: Create PR with changes
        uses: peter-evans/create-pull-request@v7
        env:
          HUSKY: &quot;0&quot;
        with:
          branch: chore/weekly-pnpm-updates
          title: &quot;chore: weekly dependency updates (pnpm, minor/patch)&quot;
          commit-message: &quot;chore: weekly dependency updates (pnpm, minor/patch)&quot;
          body: |
            Automated weekly dependency refresh via pnpm.
            - Enforced pnpm@latest with caching.
            - Ran npm-check-updates with --target minor and --reject zod to avoid zod@4 while peers require zod^3.
            - Updated lockfile with pnpm install.
            - Guardrails fail the run if Yarn config/usage is detected.
          labels: dependencies
          signoff: false
          delete-branch: true</file><file path="be/.github/copilot-instructions.md">---
applyTo: &quot;**/*.{ts,tsx,js,jsx}&quot;
---

# Project Context
Ultracite enforces strict type safety, accessibility standards, and consistent code quality for JavaScript/TypeScript projects using Biome&apos;s lightning-fast formatter and linter.

## Key Principles
- Zero configuration required
- Subsecond performance
- Maximum type safety
- AI-friendly code generation

## Before Writing Code
1. Analyze existing patterns in the codebase
2. Consider edge cases and error scenarios
3. Follow the rules below strictly
4. Validate accessibility requirements

## Rules

### Accessibility (a11y)
- Don&apos;t use `accessKey` attribute on any HTML element.
- Don&apos;t set `aria-hidden=&quot;true&quot;` on focusable elements.
- Don&apos;t add ARIA roles, states, and properties to elements that don&apos;t support them.
- Don&apos;t use distracting elements like `&lt;marquee&gt;` or `&lt;blink&gt;`.
- Only use the `scope` prop on `&lt;th&gt;` elements.
- Don&apos;t assign non-interactive ARIA roles to interactive HTML elements.
- Make sure label elements have text content and are associated with an input.
- Don&apos;t assign interactive ARIA roles to non-interactive HTML elements.
- Don&apos;t assign `tabIndex` to non-interactive HTML elements.
- Don&apos;t use positive integers for `tabIndex` property.
- Don&apos;t include &quot;image&quot;, &quot;picture&quot;, or &quot;photo&quot; in img alt prop.
- Don&apos;t use explicit role property that&apos;s the same as the implicit/default role.
- Make static elements with click handlers use a valid role attribute.
- Always include a `title` element for SVG elements.
- Give all elements requiring alt text meaningful information for screen readers.
- Make sure anchors have content that&apos;s accessible to screen readers.
- Assign `tabIndex` to non-interactive HTML elements with `aria-activedescendant`.
- Include all required ARIA attributes for elements with ARIA roles.
- Make sure ARIA properties are valid for the element&apos;s supported roles.
- Always include a `type` attribute for button elements.
- Make elements with interactive roles and handlers focusable.
- Give heading elements content that&apos;s accessible to screen readers (not hidden with `aria-hidden`).
- Always include a `lang` attribute on the html element.
- Always include a `title` attribute for iframe elements.
- Accompany `onClick` with at least one of: `onKeyUp`, `onKeyDown`, or `onKeyPress`.
- Accompany `onMouseOver`/`onMouseOut` with `onFocus`/`onBlur`.
- Include caption tracks for audio and video elements.
- Use semantic elements instead of role attributes in JSX.
- Make sure all anchors are valid and navigable.
- Ensure all ARIA properties (`aria-*`) are valid.
- Use valid, non-abstract ARIA roles for elements with ARIA roles.
- Use valid ARIA state and property values.
- Use valid values for the `autocomplete` attribute on input elements.
- Use correct ISO language/country codes for the `lang` attribute.

### Code Complexity and Quality
- Don&apos;t use consecutive spaces in regular expression literals.
- Don&apos;t use the `arguments` object.
- Don&apos;t use primitive type aliases or misleading types.
- Don&apos;t use the comma operator.
- Don&apos;t use empty type parameters in type aliases and interfaces.
- Don&apos;t write functions that exceed a given Cognitive Complexity score.
- Don&apos;t nest describe() blocks too deeply in test files.
- Don&apos;t use unnecessary boolean casts.
- Don&apos;t use unnecessary callbacks with flatMap.
- Use for...of statements instead of Array.forEach.
- Don&apos;t create classes that only have static members (like a static namespace).
- Don&apos;t use this and super in static contexts.
- Don&apos;t use unnecessary catch clauses.
- Don&apos;t use unnecessary constructors.
- Don&apos;t use unnecessary continue statements.
- Don&apos;t export empty modules that don&apos;t change anything.
- Don&apos;t use unnecessary escape sequences in regular expression literals.
- Don&apos;t use unnecessary fragments.
- Don&apos;t use unnecessary labels.
- Don&apos;t use unnecessary nested block statements.
- Don&apos;t rename imports, exports, and destructured assignments to the same name.
- Don&apos;t use unnecessary string or template literal concatenation.
- Don&apos;t use String.raw in template literals when there are no escape sequences.
- Don&apos;t use useless case statements in switch statements.
- Don&apos;t use ternary operators when simpler alternatives exist.
- Don&apos;t use useless `this` aliasing.
- Don&apos;t use any or unknown as type constraints.
- Don&apos;t initialize variables to undefined.
- Don&apos;t use the void operators (they&apos;re not familiar).
- Use arrow functions instead of function expressions.
- Use Date.now() to get milliseconds since the Unix Epoch.
- Use .flatMap() instead of map().flat() when possible.
- Use literal property access instead of computed property access.
- Don&apos;t use parseInt() or Number.parseInt() when binary, octal, or hexadecimal literals work.
- Use concise optional chaining instead of chained logical expressions.
- Use regular expression literals instead of the RegExp constructor when possible.
- Don&apos;t use number literal object member names that aren&apos;t base 10 or use underscore separators.
- Remove redundant terms from logical expressions.
- Use while loops instead of for loops when you don&apos;t need initializer and update expressions.
- Don&apos;t pass children as props.
- Don&apos;t reassign const variables.
- Don&apos;t use constant expressions in conditions.
- Don&apos;t use `Math.min` and `Math.max` to clamp values when the result is constant.
- Don&apos;t return a value from a constructor.
- Don&apos;t use empty character classes in regular expression literals.
- Don&apos;t use empty destructuring patterns.
- Don&apos;t call global object properties as functions.
- Don&apos;t declare functions and vars that are accessible outside their block.
- Make sure builtins are correctly instantiated.
- Don&apos;t use super() incorrectly inside classes. Also check that super() is called in classes that extend other constructors.
- Don&apos;t use variables and function parameters before they&apos;re declared.
- Don&apos;t use 8 and 9 escape sequences in string literals.
- Don&apos;t use literal numbers that lose precision.

### React and JSX Best Practices
- Don&apos;t use the return value of React.render.
- Make sure all dependencies are correctly specified in React hooks.
- Make sure all React hooks are called from the top level of component functions.
- Don&apos;t forget key props in iterators and collection literals.
- Don&apos;t destructure props inside JSX components in Solid projects.
- Don&apos;t define React components inside other components.
- Don&apos;t use event handlers on non-interactive elements.
- Don&apos;t assign to React component props.
- Don&apos;t use both `children` and `dangerouslySetInnerHTML` props on the same element.
- Don&apos;t use dangerous JSX props.
- Don&apos;t use Array index in keys.
- Don&apos;t insert comments as text nodes.
- Don&apos;t assign JSX properties multiple times.
- Don&apos;t add extra closing tags for components without children.
- Use `&lt;&gt;...&lt;/&gt;` instead of `&lt;Fragment&gt;...&lt;/Fragment&gt;`.
- Watch out for possible &quot;wrong&quot; semicolons inside JSX elements.

### Correctness and Safety
- Don&apos;t assign a value to itself.
- Don&apos;t return a value from a setter.
- Don&apos;t compare expressions that modify string case with non-compliant values.
- Don&apos;t use lexical declarations in switch clauses.
- Don&apos;t use variables that haven&apos;t been declared in the document.
- Don&apos;t write unreachable code.
- Make sure super() is called exactly once on every code path in a class constructor before this is accessed if the class has a superclass.
- Don&apos;t use control flow statements in finally blocks.
- Don&apos;t use optional chaining where undefined values aren&apos;t allowed.
- Don&apos;t have unused function parameters.
- Don&apos;t have unused imports.
- Don&apos;t have unused labels.
- Don&apos;t have unused private class members.
- Don&apos;t have unused variables.
- Make sure void (self-closing) elements don&apos;t have children.
- Don&apos;t return a value from a function with the return type &apos;void&apos;
- Use isNaN() when checking for NaN.
- Make sure &quot;for&quot; loop update clauses move the counter in the right direction.
- Make sure typeof expressions are compared to valid values.
- Make sure generator functions contain yield.
- Don&apos;t use await inside loops.
- Don&apos;t use bitwise operators.
- Don&apos;t use expressions where the operation doesn&apos;t change the value.
- Make sure Promise-like statements are handled appropriately.
- Don&apos;t use __dirname and __filename in the global scope.
- Prevent import cycles.
- Don&apos;t use configured elements.
- Don&apos;t hardcode sensitive data like API keys and tokens.
- Don&apos;t let variable declarations shadow variables from outer scopes.
- Don&apos;t use the TypeScript directive @ts-ignore.
- Prevent duplicate polyfills from Polyfill.io.
- Don&apos;t use useless backreferences in regular expressions that always match empty strings.
- Don&apos;t use unnecessary escapes in string literals.
- Don&apos;t use useless undefined.
- Make sure getters and setters for the same property are next to each other in class and object definitions.
- Make sure object literals are declared consistently (defaults to explicit definitions).
- Use static Response methods instead of new Response() constructor when possible.
- Make sure switch-case statements are exhaustive.
- Make sure the `preconnect` attribute is used when using Google Fonts.
- Use `Array#{indexOf,lastIndexOf}()` instead of `Array#{findIndex,findLastIndex}()` when looking for the index of an item.
- Make sure iterable callbacks return consistent values.
- Use `with { type: &quot;json&quot; }` for JSON module imports.
- Use numeric separators in numeric literals.
- Use object spread instead of `Object.assign()` when constructing new objects.
- Always use the radix argument when using `parseInt()`.
- Make sure JSDoc comment lines start with a single asterisk, except for the first one.
- Include a description parameter for `Symbol()`.
- Don&apos;t use spread (`...`) syntax on accumulators.
- Don&apos;t use the `delete` operator.
- Don&apos;t access namespace imports dynamically.
- Don&apos;t use namespace imports.
- Declare regex literals at the top level.
- Don&apos;t use `target=&quot;_blank&quot;` without `rel=&quot;noopener&quot;`.

### TypeScript Best Practices
- Don&apos;t use TypeScript enums.
- Don&apos;t export imported variables.
- Don&apos;t add type annotations to variables, parameters, and class properties that are initialized with literal expressions.
- Don&apos;t use TypeScript namespaces.
- Don&apos;t use non-null assertions with the `!` postfix operator.
- Don&apos;t use parameter properties in class constructors.
- Don&apos;t use user-defined types.
- Use `as const` instead of literal types and type annotations.
- Use either `T[]` or `Array&lt;T&gt;` consistently.
- Initialize each enum member value explicitly.
- Use `export type` for types.
- Use `import type` for types.
- Make sure all enum members are literal values.
- Don&apos;t use TypeScript const enum.
- Don&apos;t declare empty interfaces.
- Don&apos;t let variables evolve into any type through reassignments.
- Don&apos;t use the any type.
- Don&apos;t misuse the non-null assertion operator (!) in TypeScript files.
- Don&apos;t use implicit any type on variable declarations.
- Don&apos;t merge interfaces and classes unsafely.
- Don&apos;t use overload signatures that aren&apos;t next to each other.
- Use the namespace keyword instead of the module keyword to declare TypeScript namespaces.

### Style and Consistency
- Don&apos;t use global `eval()`.
- Don&apos;t use callbacks in asynchronous tests and hooks.
- Don&apos;t use negation in `if` statements that have `else` clauses.
- Don&apos;t use nested ternary expressions.
- Don&apos;t reassign function parameters.
- This rule lets you specify global variable names you don&apos;t want to use in your application.
- Don&apos;t use specified modules when loaded by import or require.
- Don&apos;t use constants whose value is the upper-case version of their name.
- Use `String.slice()` instead of `String.substr()` and `String.substring()`.
- Don&apos;t use template literals if you don&apos;t need interpolation or special-character handling.
- Don&apos;t use `else` blocks when the `if` block breaks early.
- Don&apos;t use yoda expressions.
- Don&apos;t use Array constructors.
- Use `at()` instead of integer index access.
- Follow curly brace conventions.
- Use `else if` instead of nested `if` statements in `else` clauses.
- Use single `if` statements instead of nested `if` clauses.
- Use `new` for all builtins except `String`, `Number`, and `Boolean`.
- Use consistent accessibility modifiers on class properties and methods.
- Use `const` declarations for variables that are only assigned once.
- Put default function parameters and optional function parameters last.
- Include a `default` clause in switch statements.
- Use the `**` operator instead of `Math.pow`.
- Use `for-of` loops when you need the index to extract an item from the iterated array.
- Use `node:assert/strict` over `node:assert`.
- Use the `node:` protocol for Node.js builtin modules.
- Use Number properties instead of global ones.
- Use assignment operator shorthand where possible.
- Use function types instead of object types with call signatures.
- Use template literals over string concatenation.
- Use `new` when throwing an error.
- Don&apos;t throw non-Error values.
- Use `String.trimStart()` and `String.trimEnd()` over `String.trimLeft()` and `String.trimRight()`.
- Use standard constants instead of approximated literals.
- Don&apos;t assign values in expressions.
- Don&apos;t use async functions as Promise executors.
- Don&apos;t reassign exceptions in catch clauses.
- Don&apos;t reassign class members.
- Don&apos;t compare against -0.
- Don&apos;t use labeled statements that aren&apos;t loops.
- Don&apos;t use void type outside of generic or return types.
- Don&apos;t use console.
- Don&apos;t use control characters and escape sequences that match control characters in regular expression literals.
- Don&apos;t use debugger.
- Don&apos;t assign directly to document.cookie.
- Use `===` and `!==`.
- Don&apos;t use duplicate case labels.
- Don&apos;t use duplicate class members.
- Don&apos;t use duplicate conditions in if-else-if chains.
- Don&apos;t use two keys with the same name inside objects.
- Don&apos;t use duplicate function parameter names.
- Don&apos;t have duplicate hooks in describe blocks.
- Don&apos;t use empty block statements and static blocks.
- Don&apos;t let switch clauses fall through.
- Don&apos;t reassign function declarations.
- Don&apos;t allow assignments to native objects and read-only global variables.
- Use Number.isFinite instead of global isFinite.
- Use Number.isNaN instead of global isNaN.
- Don&apos;t assign to imported bindings.
- Don&apos;t use irregular whitespace characters.
- Don&apos;t use labels that share a name with a variable.
- Don&apos;t use characters made with multiple code points in character class syntax.
- Make sure to use new and constructor properly.
- Don&apos;t use shorthand assign when the variable appears on both sides.
- Don&apos;t use octal escape sequences in string literals.
- Don&apos;t use Object.prototype builtins directly.
- Don&apos;t redeclare variables, functions, classes, and types in the same scope.
- Don&apos;t have redundant &quot;use strict&quot;.
- Don&apos;t compare things where both sides are exactly the same.
- Don&apos;t let identifiers shadow restricted names.
- Don&apos;t use sparse arrays (arrays with holes).
- Don&apos;t use template literal placeholder syntax in regular strings.
- Don&apos;t use the then property.
- Don&apos;t use unsafe negation.
- Don&apos;t use var.
- Don&apos;t use with statements in non-strict contexts.
- Make sure async functions actually use await.
- Make sure default clauses in switch statements come last.
- Make sure to pass a message value when creating a built-in error.
- Make sure get methods always return a value.
- Use a recommended display strategy with Google Fonts.
- Make sure for-in loops include an if statement.
- Use Array.isArray() instead of instanceof Array.
- Make sure to use the digits argument with Number#toFixed().
- Make sure to use the &quot;use strict&quot; directive in script files.

### Next.js Specific Rules
- Don&apos;t use `&lt;img&gt;` elements in Next.js projects.
- Don&apos;t use `&lt;head&gt;` elements in Next.js projects.
- Don&apos;t import next/document outside of pages/_document.jsx in Next.js projects.
- Don&apos;t use the next/head module in pages/_document.js on Next.js projects.

### Testing Best Practices
- Don&apos;t use export or module.exports in test files.
- Don&apos;t use focused tests.
- Make sure the assertion function, like expect, is placed inside an it() function call.
- Don&apos;t use disabled tests.

## Common Tasks
- `npx ultracite init` - Initialize Ultracite in your project
- `npx ultracite fix` - Format and fix code automatically
- `npx ultracite check` - Check for issues without fixing

## Example: Error Handling
```typescript
// ‚úÖ Good: Comprehensive error handling
try {
  const result = await fetchData();
  return { success: true, data: result };
} catch (error) {
  console.error(&apos;API call failed:&apos;, error);
  return { success: false, error: error.message };
}

// ‚ùå Bad: Swallowing errors
try {
  return await fetchData();
} catch (e) {
  console.log(e);
}
```</file><file path="be/.taskmaster/templates/example_prd_rpg.txt">&lt;rpg-method&gt;
# Repository Planning Graph (RPG) Method - PRD Template

This template teaches you (AI or human) how to create structured, dependency-aware PRDs using the RPG methodology from Microsoft Research. The key insight: separate WHAT (functional) from HOW (structural), then connect them with explicit dependencies.

## Core Principles

1. **Dual-Semantics**: Think functional (capabilities) AND structural (code organization) separately, then map them
2. **Explicit Dependencies**: Never assume - always state what depends on what
3. **Topological Order**: Build foundation first, then layers on top
4. **Progressive Refinement**: Start broad, refine iteratively

## How to Use This Template

- Follow the instructions in each `&lt;instruction&gt;` block
- Look at `&lt;example&gt;` blocks to see good vs bad patterns
- Fill in the content sections with your project details
- The AI reading this will learn the RPG method by following along
- Task Master will parse the resulting PRD into dependency-aware tasks

## Recommended Tools for Creating PRDs

When using this template to **create** a PRD (not parse it), use **code-context-aware AI assistants** for best results:

**Why?** The AI needs to understand your existing codebase to make good architectural decisions about modules, dependencies, and integration points.

**Recommended tools:**
- **Claude Code** (claude-code CLI) - Best for structured reasoning and large contexts
- **Cursor/Windsurf** - IDE integration with full codebase context
- **Gemini CLI** (gemini-cli) - Massive context window for large codebases
- **Codex/Grok CLI** - Strong code generation with context awareness

**Note:** Once your PRD is created, `task-master parse-prd` works with any configured AI model - it just needs to read the PRD text itself, not your codebase.
&lt;/rpg-method&gt;

---

&lt;overview&gt;
&lt;instruction&gt;
Start with the problem, not the solution. Be specific about:
- What pain point exists?
- Who experiences it?
- Why existing solutions don&apos;t work?
- What success looks like (measurable outcomes)?

Keep this section focused - don&apos;t jump into implementation details yet.
&lt;/instruction&gt;

## Problem Statement
[Describe the core problem. Be concrete about user pain points.]

## Target Users
[Define personas, their workflows, and what they&apos;re trying to achieve.]

## Success Metrics
[Quantifiable outcomes. Examples: &quot;80% task completion via autopilot&quot;, &quot;&lt; 5% manual intervention rate&quot;]

&lt;/overview&gt;

---

&lt;functional-decomposition&gt;
&lt;instruction&gt;
Now think about CAPABILITIES (what the system DOES), not code structure yet.

Step 1: Identify high-level capability domains
- Think: &quot;What major things does this system do?&quot;
- Examples: Data Management, Core Processing, Presentation Layer

Step 2: For each capability, enumerate specific features
- Use explore-exploit strategy:
  * Exploit: What features are REQUIRED for core value?
  * Explore: What features make this domain COMPLETE?

Step 3: For each feature, define:
- Description: What it does in one sentence
- Inputs: What data/context it needs
- Outputs: What it produces/returns
- Behavior: Key logic or transformations

&lt;example type=&quot;good&quot;&gt;
Capability: Data Validation
  Feature: Schema validation
    - Description: Validate JSON payloads against defined schemas
    - Inputs: JSON object, schema definition
    - Outputs: Validation result (pass/fail) + error details
    - Behavior: Iterate fields, check types, enforce constraints

  Feature: Business rule validation
    - Description: Apply domain-specific validation rules
    - Inputs: Validated data object, rule set
    - Outputs: Boolean + list of violated rules
    - Behavior: Execute rules sequentially, short-circuit on failure
&lt;/example&gt;

&lt;example type=&quot;bad&quot;&gt;
Capability: validation.js
  (Problem: This is a FILE, not a CAPABILITY. Mixing structure into functional thinking.)

Capability: Validation
  Feature: Make sure data is good
  (Problem: Too vague. No inputs/outputs. Not actionable.)
&lt;/example&gt;
&lt;/instruction&gt;

## Capability Tree

### Capability: [Name]
[Brief description of what this capability domain covers]

#### Feature: [Name]
- **Description**: [One sentence]
- **Inputs**: [What it needs]
- **Outputs**: [What it produces]
- **Behavior**: [Key logic]

#### Feature: [Name]
- **Description**:
- **Inputs**:
- **Outputs**:
- **Behavior**:

### Capability: [Name]
...

&lt;/functional-decomposition&gt;

---

&lt;structural-decomposition&gt;
&lt;instruction&gt;
NOW think about code organization. Map capabilities to actual file/folder structure.

Rules:
1. Each capability maps to a module (folder or file)
2. Features within a capability map to functions/classes
3. Use clear module boundaries - each module has ONE responsibility
4. Define what each module exports (public interface)

The goal: Create a clear mapping between &quot;what it does&quot; (functional) and &quot;where it lives&quot; (structural).

&lt;example type=&quot;good&quot;&gt;
Capability: Data Validation
  ‚Üí Maps to: src/validation/
    ‚îú‚îÄ‚îÄ schema-validator.js      (Schema validation feature)
    ‚îú‚îÄ‚îÄ rule-validator.js         (Business rule validation feature)
    ‚îî‚îÄ‚îÄ index.js                  (Public exports)

Exports:
  - validateSchema(data, schema)
  - validateRules(data, rules)
&lt;/example&gt;

&lt;example type=&quot;bad&quot;&gt;
Capability: Data Validation
  ‚Üí Maps to: src/utils.js
  (Problem: &quot;utils&quot; is not a clear module boundary. Where do I find validation logic?)

Capability: Data Validation
  ‚Üí Maps to: src/validation/everything.js
  (Problem: One giant file. Features should map to separate files for maintainability.)
&lt;/example&gt;
&lt;/instruction&gt;

## Repository Structure

```
project-root/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ [module-name]/       # Maps to: [Capability Name]
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [file].js        # Maps to: [Feature Name]
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js         # Public exports
‚îÇ   ‚îî‚îÄ‚îÄ [module-name]/
‚îú‚îÄ‚îÄ tests/
‚îî‚îÄ‚îÄ docs/
```

## Module Definitions

### Module: [Name]
- **Maps to capability**: [Capability from functional decomposition]
- **Responsibility**: [Single clear purpose]
- **File structure**:
  ```
  module-name/
  ‚îú‚îÄ‚îÄ feature1.js
  ‚îú‚îÄ‚îÄ feature2.js
  ‚îî‚îÄ‚îÄ index.js
  ```
- **Exports**:
  - `functionName()` - [what it does]
  - `ClassName` - [what it does]

&lt;/structural-decomposition&gt;

---

&lt;dependency-graph&gt;
&lt;instruction&gt;
This is THE CRITICAL SECTION for Task Master parsing.

Define explicit dependencies between modules. This creates the topological order for task execution.

Rules:
1. List modules in dependency order (foundation first)
2. For each module, state what it depends on
3. Foundation modules should have NO dependencies
4. Every non-foundation module should depend on at least one other module
5. Think: &quot;What must EXIST before I can build this module?&quot;

&lt;example type=&quot;good&quot;&gt;
Foundation Layer (no dependencies):
  - error-handling: No dependencies
  - config-manager: No dependencies
  - base-types: No dependencies

Data Layer:
  - schema-validator: Depends on [base-types, error-handling]
  - data-ingestion: Depends on [schema-validator, config-manager]

Core Layer:
  - algorithm-engine: Depends on [base-types, error-handling]
  - pipeline-orchestrator: Depends on [algorithm-engine, data-ingestion]
&lt;/example&gt;

&lt;example type=&quot;bad&quot;&gt;
- validation: Depends on API
- API: Depends on validation
(Problem: Circular dependency. This will cause build/runtime issues.)

- user-auth: Depends on everything
(Problem: Too many dependencies. Should be more focused.)
&lt;/example&gt;
&lt;/instruction&gt;

## Dependency Chain

### Foundation Layer (Phase 0)
No dependencies - these are built first.

- **[Module Name]**: [What it provides]
- **[Module Name]**: [What it provides]

### [Layer Name] (Phase 1)
- **[Module Name]**: Depends on [[module-from-phase-0], [module-from-phase-0]]
- **[Module Name]**: Depends on [[module-from-phase-0]]

### [Layer Name] (Phase 2)
- **[Module Name]**: Depends on [[module-from-phase-1], [module-from-foundation]]

[Continue building up layers...]

&lt;/dependency-graph&gt;

---

&lt;implementation-roadmap&gt;
&lt;instruction&gt;
Turn the dependency graph into concrete development phases.

Each phase should:
1. Have clear entry criteria (what must exist before starting)
2. Contain tasks that can be parallelized (no inter-dependencies within phase)
3. Have clear exit criteria (how do we know phase is complete?)
4. Build toward something USABLE (not just infrastructure)

Phase ordering follows topological sort of dependency graph.

&lt;example type=&quot;good&quot;&gt;
Phase 0: Foundation
  Entry: Clean repository
  Tasks:
    - Implement error handling utilities
    - Create base type definitions
    - Setup configuration system
  Exit: Other modules can import foundation without errors

Phase 1: Data Layer
  Entry: Phase 0 complete
  Tasks:
    - Implement schema validator (uses: base types, error handling)
    - Build data ingestion pipeline (uses: validator, config)
  Exit: End-to-end data flow from input to validated output
&lt;/example&gt;

&lt;example type=&quot;bad&quot;&gt;
Phase 1: Build Everything
  Tasks:
    - API
    - Database
    - UI
    - Tests
  (Problem: No clear focus. Too broad. Dependencies not considered.)
&lt;/example&gt;
&lt;/instruction&gt;

## Development Phases

### Phase 0: [Foundation Name]
**Goal**: [What foundational capability this establishes]

**Entry Criteria**: [What must be true before starting]

**Tasks**:
- [ ] [Task name] (depends on: [none or list])
  - Acceptance criteria: [How we know it&apos;s done]
  - Test strategy: [What tests prove it works]

- [ ] [Task name] (depends on: [none or list])

**Exit Criteria**: [Observable outcome that proves phase complete]

**Delivers**: [What can users/developers do after this phase?]

---

### Phase 1: [Layer Name]
**Goal**:

**Entry Criteria**: Phase 0 complete

**Tasks**:
- [ ] [Task name] (depends on: [[tasks-from-phase-0]])
- [ ] [Task name] (depends on: [[tasks-from-phase-0]])

**Exit Criteria**:

**Delivers**:

---

[Continue with more phases...]

&lt;/implementation-roadmap&gt;

---

&lt;test-strategy&gt;
&lt;instruction&gt;
Define how testing will be integrated throughout development (TDD approach).

Specify:
1. Test pyramid ratios (unit vs integration vs e2e)
2. Coverage requirements
3. Critical test scenarios
4. Test generation guidelines for Surgical Test Generator

This section guides the AI when generating tests during the RED phase of TDD.

&lt;example type=&quot;good&quot;&gt;
Critical Test Scenarios for Data Validation module:
  - Happy path: Valid data passes all checks
  - Edge cases: Empty strings, null values, boundary numbers
  - Error cases: Invalid types, missing required fields
  - Integration: Validator works with ingestion pipeline
&lt;/example&gt;
&lt;/instruction&gt;

## Test Pyramid

```
        /\
       /E2E\       ‚Üê [X]% (End-to-end, slow, comprehensive)
      /------\
     /Integration\ ‚Üê [Y]% (Module interactions)
    /------------\
   /  Unit Tests  \ ‚Üê [Z]% (Fast, isolated, deterministic)
  /----------------\
```

## Coverage Requirements
- Line coverage: [X]% minimum
- Branch coverage: [X]% minimum
- Function coverage: [X]% minimum
- Statement coverage: [X]% minimum

## Critical Test Scenarios

### [Module/Feature Name]
**Happy path**:
- [Scenario description]
- Expected: [What should happen]

**Edge cases**:
- [Scenario description]
- Expected: [What should happen]

**Error cases**:
- [Scenario description]
- Expected: [How system handles failure]

**Integration points**:
- [What interactions to test]
- Expected: [End-to-end behavior]

## Test Generation Guidelines
[Specific instructions for Surgical Test Generator about what to focus on, what patterns to follow, project-specific test conventions]

&lt;/test-strategy&gt;

---

&lt;architecture&gt;
&lt;instruction&gt;
Describe technical architecture, data models, and key design decisions.

Keep this section AFTER functional/structural decomposition - implementation details come after understanding structure.
&lt;/instruction&gt;

## System Components
[Major architectural pieces and their responsibilities]

## Data Models
[Core data structures, schemas, database design]

## Technology Stack
[Languages, frameworks, key libraries]

**Decision: [Technology/Pattern]**
- **Rationale**: [Why chosen]
- **Trade-offs**: [What we&apos;re giving up]
- **Alternatives considered**: [What else we looked at]

&lt;/architecture&gt;

---

&lt;risks&gt;
&lt;instruction&gt;
Identify risks that could derail development and how to mitigate them.

Categories:
- Technical risks (complexity, unknowns)
- Dependency risks (blocking issues)
- Scope risks (creep, underestimation)
&lt;/instruction&gt;

## Technical Risks
**Risk**: [Description]
- **Impact**: [High/Medium/Low - effect on project]
- **Likelihood**: [High/Medium/Low]
- **Mitigation**: [How to address]
- **Fallback**: [Plan B if mitigation fails]

## Dependency Risks
[External dependencies, blocking issues]

## Scope Risks
[Scope creep, underestimation, unclear requirements]

&lt;/risks&gt;

---

&lt;appendix&gt;
## References
[Papers, documentation, similar systems]

## Glossary
[Domain-specific terms]

## Open Questions
[Things to resolve during development]
&lt;/appendix&gt;

---

&lt;task-master-integration&gt;
# How Task Master Uses This PRD

When you run `task-master parse-prd &lt;file&gt;.txt`, the parser:

1. **Extracts capabilities** ‚Üí Main tasks
   - Each `### Capability:` becomes a top-level task

2. **Extracts features** ‚Üí Subtasks
   - Each `#### Feature:` becomes a subtask under its capability

3. **Parses dependencies** ‚Üí Task dependencies
   - `Depends on: [X, Y]` sets task.dependencies = [&quot;X&quot;, &quot;Y&quot;]

4. **Orders by phases** ‚Üí Task priorities
   - Phase 0 tasks = highest priority
   - Phase N tasks = lower priority, properly sequenced

5. **Uses test strategy** ‚Üí Test generation context
   - Feeds test scenarios to Surgical Test Generator during implementation

**Result**: A dependency-aware task graph that can be executed in topological order.

## Why RPG Structure Matters

Traditional flat PRDs lead to:
- ‚ùå Unclear task dependencies
- ‚ùå Arbitrary task ordering
- ‚ùå Circular dependencies discovered late
- ‚ùå Poorly scoped tasks

RPG-structured PRDs provide:
- ‚úÖ Explicit dependency chains
- ‚úÖ Topological execution order
- ‚úÖ Clear module boundaries
- ‚úÖ Validated task graph before implementation

## Tips for Best Results

1. **Spend time on dependency graph** - This is the most valuable section for Task Master
2. **Keep features atomic** - Each feature should be independently testable
3. **Progressive refinement** - Start broad, use `task-master expand` to break down complex tasks
4. **Use research mode** - `task-master parse-prd --research` leverages AI for better task generation
&lt;/task-master-integration&gt;</file><file path="be/.taskmaster/templates/example_prd.txt">&lt;context&gt;
# Overview  
[Provide a high-level overview of your product here. Explain what problem it solves, who it&apos;s for, and why it&apos;s valuable.]

# Core Features  
[List and describe the main features of your product. For each feature, include:
- What it does
- Why it&apos;s important
- How it works at a high level]

# User Experience  
[Describe the user journey and experience. Include:
- User personas
- Key user flows
- UI/UX considerations]
&lt;/context&gt;
&lt;PRD&gt;
# Technical Architecture  
[Outline the technical implementation details:
- System components
- Data models
- APIs and integrations
- Infrastructure requirements]

# Development Roadmap  
[Break down the development process into phases:
- MVP requirements
- Future enhancements
- Do not think about timelines whatsoever -- all that matters is scope and detailing exactly what needs to be build in each phase so it can later be cut up into tasks]

# Logical Dependency Chain
[Define the logical order of development:
- Which features need to be built first (foundation)
- Getting as quickly as possible to something usable/visible front end that works
- Properly pacing and scoping each feature so it is atomic but can also be built upon and improved as development approaches]

# Risks and Mitigations  
[Identify potential risks and how they&apos;ll be addressed:
- Technical challenges
- Figuring out the MVP that we can build upon
- Resource constraints]

# Appendix  
[Include any additional information:
- Research findings
- Technical specifications]
&lt;/PRD&gt;</file><file path="be/.taskmaster/CLAUDE.md"># Task Master AI - Agent Integration Guide

## Essential Commands

### Core Workflow Commands

```bash
# Project Setup
task-master init                                    # Initialize Task Master in current project
task-master parse-prd .taskmaster/docs/prd.md       # Generate tasks from PRD document
task-master models --setup                        # Configure AI models interactively

# Daily Development Workflow
task-master list                                   # Show all tasks with status
task-master next                                   # Get next available task to work on
task-master show &lt;id&gt;                             # View detailed task information (e.g., task-master show 1.2)
task-master set-status --id=&lt;id&gt; --status=done    # Mark task complete

# Task Management
task-master add-task --prompt=&quot;description&quot; --research        # Add new task with AI assistance
task-master expand --id=&lt;id&gt; --research --force              # Break task into subtasks
task-master update-task --id=&lt;id&gt; --prompt=&quot;changes&quot;         # Update specific task
task-master update --from=&lt;id&gt; --prompt=&quot;changes&quot;            # Update multiple tasks from ID onwards
task-master update-subtask --id=&lt;id&gt; --prompt=&quot;notes&quot;        # Add implementation notes to subtask

# Analysis &amp; Planning
task-master analyze-complexity --research          # Analyze task complexity
task-master complexity-report                      # View complexity analysis
task-master expand --all --research               # Expand all eligible tasks

# Dependencies &amp; Organization
task-master add-dependency --id=&lt;id&gt; --depends-on=&lt;id&gt;       # Add task dependency
task-master move --from=&lt;id&gt; --to=&lt;id&gt;                       # Reorganize task hierarchy
task-master validate-dependencies                            # Check for dependency issues
task-master generate                                         # Update task markdown files (usually auto-called)
```

## Key Files &amp; Project Structure

### Core Files

- `.taskmaster/tasks/tasks.json` - Main task data file (auto-managed)
- `.taskmaster/config.json` - AI model configuration (use `task-master models` to modify)
- `.taskmaster/docs/prd.md` - Product Requirements Document for parsing (`.md` extension recommended for better editor support)
- `.taskmaster/tasks/*.txt` - Individual task files (auto-generated from tasks.json)
- `.env` - API keys for CLI usage

**PRD File Format:** While both `.txt` and `.md` extensions work, **`.md` is recommended** because:

- Markdown syntax highlighting in editors improves readability
- Proper rendering when previewing in VS Code, GitHub, or other tools
- Better collaboration through formatted documentation

### Claude Code Integration Files

- `CLAUDE.md` - Auto-loaded context for Claude Code (this file)
- `.claude/settings.json` - Claude Code tool allowlist and preferences
- `.claude/commands/` - Custom slash commands for repeated workflows
- `.mcp.json` - MCP server configuration (project-specific)

### Directory Structure

```
project/
‚îú‚îÄ‚îÄ .taskmaster/
‚îÇ   ‚îú‚îÄ‚îÄ tasks/              # Task files directory
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks.json      # Main task database
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task-1.md      # Individual task files
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task-2.md
‚îÇ   ‚îú‚îÄ‚îÄ docs/              # Documentation directory
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prd.md         # Product requirements (.md recommended)
‚îÇ   ‚îú‚îÄ‚îÄ reports/           # Analysis reports directory
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task-complexity-report.json
‚îÇ   ‚îú‚îÄ‚îÄ templates/         # Template files
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ example_prd.md  # Example PRD template (.md recommended)
‚îÇ   ‚îî‚îÄ‚îÄ config.json        # AI models &amp; settings
‚îú‚îÄ‚îÄ .claude/
‚îÇ   ‚îú‚îÄ‚îÄ settings.json      # Claude Code configuration
‚îÇ   ‚îî‚îÄ‚îÄ commands/         # Custom slash commands
‚îú‚îÄ‚îÄ .env                  # API keys
‚îú‚îÄ‚îÄ .mcp.json            # MCP configuration
‚îî‚îÄ‚îÄ CLAUDE.md            # This file - auto-loaded by Claude Code
```

## MCP Integration

Task Master provides an MCP server that Claude Code can connect to. Configure in `.mcp.json`:

```json
{
  &quot;mcpServers&quot;: {
    &quot;task-master-ai&quot;: {
      &quot;command&quot;: &quot;npx&quot;,
      &quot;args&quot;: [&quot;-y&quot;, &quot;task-master-ai&quot;],
      &quot;env&quot;: {
        &quot;TASK_MASTER_TOOLS&quot;: &quot;core&quot;,
        &quot;ANTHROPIC_API_KEY&quot;: &quot;your_key_here&quot;,
        &quot;PERPLEXITY_API_KEY&quot;: &quot;your_key_here&quot;,
        &quot;OPENAI_API_KEY&quot;: &quot;OPENAI_API_KEY_HERE&quot;,
        &quot;GOOGLE_API_KEY&quot;: &quot;GOOGLE_API_KEY_HERE&quot;,
        &quot;XAI_API_KEY&quot;: &quot;XAI_API_KEY_HERE&quot;,
        &quot;OPENROUTER_API_KEY&quot;: &quot;OPENROUTER_API_KEY_HERE&quot;,
        &quot;MISTRAL_API_KEY&quot;: &quot;MISTRAL_API_KEY_HERE&quot;,
        &quot;AZURE_OPENAI_API_KEY&quot;: &quot;AZURE_OPENAI_API_KEY_HERE&quot;,
        &quot;OLLAMA_API_KEY&quot;: &quot;OLLAMA_API_KEY_HERE&quot;
      }
    }
  }
}
```

### MCP Tool Tiers

Default: `core` (7 tools). Set via `TASK_MASTER_TOOLS` env var.

| Tier       | Count | Tools                                                                                                                                  |
| ---------- | ----- | -------------------------------------------------------------------------------------------------------------------------------------- |
| `core`     | 7     | `get_tasks`, `next_task`, `get_task`, `set_task_status`, `update_subtask`, `parse_prd`, `expand_task`                                  |
| `standard` | 14    | core + `initialize_project`, `analyze_project_complexity`, `expand_all`, `add_subtask`, `remove_task`, `add_task`, `complexity_report` |
| `all`      | 44+   | standard + dependencies, tags, research, autopilot, scoping, models, rules                                                             |

**Upgrade when tool unavailable:** Edit MCP config, change `TASK_MASTER_TOOLS` from `&quot;core&quot;` to `&quot;standard&quot;` or `&quot;all&quot;`, restart MCP.

### Essential MCP Tools

```javascript
help; // = shows available taskmaster commands
// Project setup
initialize_project; // = task-master init
parse_prd; // = task-master parse-prd

// Daily workflow
get_tasks; // = task-master list
next_task; // = task-master next
get_task; // = task-master show &lt;id&gt;
set_task_status; // = task-master set-status

// Task management
add_task; // = task-master add-task
expand_task; // = task-master expand
update_task; // = task-master update-task
update_subtask; // = task-master update-subtask
update; // = task-master update

// Analysis
analyze_project_complexity; // = task-master analyze-complexity
complexity_report; // = task-master complexity-report
```

## Claude Code Workflow Integration

### Standard Development Workflow

#### 1. Project Initialization

```bash
# Initialize Task Master
task-master init

# Create or obtain PRD, then parse it (use .md extension for better editor support)
task-master parse-prd .taskmaster/docs/prd.md

# Analyze complexity and expand tasks
task-master analyze-complexity --research
task-master expand --all --research
```

If tasks already exist, another PRD can be parsed (with new information only!) using parse-prd with --append flag. This will add the generated tasks to the existing list of tasks..

#### 2. Daily Development Loop

```bash
# Start each session
task-master next                           # Find next available task
task-master show &lt;id&gt;                     # Review task details

# During implementation, check in code context into the tasks and subtasks
task-master update-subtask --id=&lt;id&gt; --prompt=&quot;implementation notes...&quot;

# Complete tasks
task-master set-status --id=&lt;id&gt; --status=done
```

#### 3. Multi-Claude Workflows

For complex projects, use multiple Claude Code sessions:

```bash
# Terminal 1: Main implementation
cd project &amp;&amp; claude

# Terminal 2: Testing and validation
cd project-test-worktree &amp;&amp; claude

# Terminal 3: Documentation updates
cd project-docs-worktree &amp;&amp; claude
```

### Custom Slash Commands

Create `.claude/commands/taskmaster-next.md`:

```markdown
Find the next available Task Master task and show its details.

Steps:

1. Run `task-master next` to get the next task
2. If a task is available, run `task-master show &lt;id&gt;` for full details
3. Provide a summary of what needs to be implemented
4. Suggest the first implementation step
```

Create `.claude/commands/taskmaster-complete.md`:

```markdown
Complete a Task Master task: $ARGUMENTS

Steps:

1. Review the current task with `task-master show $ARGUMENTS`
2. Verify all implementation is complete
3. Run any tests related to this task
4. Mark as complete: `task-master set-status --id=$ARGUMENTS --status=done`
5. Show the next available task with `task-master next`
```

## Tool Allowlist Recommendations

Add to `.claude/settings.json`:

```json
{
  &quot;allowedTools&quot;: [&quot;Edit&quot;, &quot;Bash(task-master *)&quot;, &quot;Bash(git commit:*)&quot;, &quot;Bash(git add:*)&quot;, &quot;Bash(npm run *)&quot;, &quot;mcp__task_master_ai__*&quot;]
}
```

## Configuration &amp; Setup

### API Keys Required

At least **one** of these API keys must be configured:

- `ANTHROPIC_API_KEY` (Claude models) - **Recommended**
- `PERPLEXITY_API_KEY` (Research features) - **Highly recommended**
- `OPENAI_API_KEY` (GPT models)
- `GOOGLE_API_KEY` (Gemini models)
- `MISTRAL_API_KEY` (Mistral models)
- `OPENROUTER_API_KEY` (Multiple models)
- `XAI_API_KEY` (Grok models)

An API key is required for any provider used across any of the 3 roles defined in the `models` command.

### Model Configuration

```bash
# Interactive setup (recommended)
task-master models --setup

# Set specific models
task-master models --set-main claude-3-5-sonnet-20241022
task-master models --set-research perplexity-llama-3.1-sonar-large-128k-online
task-master models --set-fallback gpt-4o-mini
```

## Task Structure &amp; IDs

### Task ID Format

- Main tasks: `1`, `2`, `3`, etc.
- Subtasks: `1.1`, `1.2`, `2.1`, etc.
- Sub-subtasks: `1.1.1`, `1.1.2`, etc.

### Task Status Values

- `pending` - Ready to work on
- `in-progress` - Currently being worked on
- `done` - Completed and verified
- `deferred` - Postponed
- `cancelled` - No longer needed
- `blocked` - Waiting on external factors

### Task Fields

```json
{
  &quot;id&quot;: &quot;1.2&quot;,
  &quot;title&quot;: &quot;Implement user authentication&quot;,
  &quot;description&quot;: &quot;Set up JWT-based auth system&quot;,
  &quot;status&quot;: &quot;pending&quot;,
  &quot;priority&quot;: &quot;high&quot;,
  &quot;dependencies&quot;: [&quot;1.1&quot;],
  &quot;details&quot;: &quot;Use bcrypt for hashing, JWT for tokens...&quot;,
  &quot;testStrategy&quot;: &quot;Unit tests for auth functions, integration tests for login flow&quot;,
  &quot;subtasks&quot;: []
}
```

## Claude Code Best Practices with Task Master

### Context Management

- Use `/clear` between different tasks to maintain focus
- This CLAUDE.md file is automatically loaded for context
- Use `task-master show &lt;id&gt;` to pull specific task context when needed

### Iterative Implementation

1. `task-master show &lt;subtask-id&gt;` - Understand requirements
2. Explore codebase and plan implementation
3. `task-master update-subtask --id=&lt;id&gt; --prompt=&quot;detailed plan&quot;` - Log plan
4. `task-master set-status --id=&lt;id&gt; --status=in-progress` - Start work
5. Implement code following logged plan
6. `task-master update-subtask --id=&lt;id&gt; --prompt=&quot;what worked/didn&apos;t work&quot;` - Log progress
7. `task-master set-status --id=&lt;id&gt; --status=done` - Complete task

### Complex Workflows with Checklists

For large migrations or multi-step processes:

1. Create a markdown PRD file describing the new changes: `touch task-migration-checklist.md` (prds can be .txt or .md)
2. Use Taskmaster to parse the new prd with `task-master parse-prd --append` (also available in MCP)
3. Use Taskmaster to expand the newly generated tasks into subtasks. Consdier using `analyze-complexity` with the correct --to and --from IDs (the new ids) to identify the ideal subtask amounts for each task. Then expand them.
4. Work through items systematically, checking them off as completed
5. Use `task-master update-subtask` to log progress on each task/subtask and/or updating/researching them before/during implementation if getting stuck

### Git Integration

Task Master works well with `gh` CLI:

```bash
# Create PR for completed task
gh pr create --title &quot;Complete task 1.2: User authentication&quot; --body &quot;Implements JWT auth system as specified in task 1.2&quot;

# Reference task in commits
git commit -m &quot;feat: implement JWT auth (task 1.2)&quot;
```

### Parallel Development with Git Worktrees

```bash
# Create worktrees for parallel task development
git worktree add ../project-auth feature/auth-system
git worktree add ../project-api feature/api-refactor

# Run Claude Code in each worktree
cd ../project-auth &amp;&amp; claude    # Terminal 1: Auth work
cd ../project-api &amp;&amp; claude     # Terminal 2: API work
```

## Troubleshooting

### AI Commands Failing

```bash
# Check API keys are configured
cat .env                           # For CLI usage

# Verify model configuration
task-master models

# Test with different model
task-master models --set-fallback gpt-4o-mini
```

### MCP Connection Issues

- Check `.mcp.json` configuration
- Verify Node.js installation
- Use `--mcp-debug` flag when starting Claude Code
- Use CLI as fallback if MCP unavailable

### Task File Sync Issues

```bash
# Regenerate task files from tasks.json
task-master generate

# Fix dependency issues
task-master fix-dependencies
```

DO NOT RE-INITIALIZE. That will not do anything beyond re-adding the same Taskmaster core files.

## Important Notes

### AI-Powered Operations

These commands make AI calls and may take up to a minute:

- `parse_prd` / `task-master parse-prd`
- `analyze_project_complexity` / `task-master analyze-complexity`
- `expand_task` / `task-master expand`
- `expand_all` / `task-master expand --all`
- `add_task` / `task-master add-task`
- `update` / `task-master update`
- `update_task` / `task-master update-task`
- `update_subtask` / `task-master update-subtask`

### File Management

- Never manually edit `tasks.json` - use commands instead
- Never manually edit `.taskmaster/config.json` - use `task-master models`
- Task markdown files in `tasks/` are auto-generated
- Run `task-master generate` after manual changes to tasks.json

### Claude Code Session Management

- Use `/clear` frequently to maintain focused context
- Create custom slash commands for repeated Task Master workflows
- Configure tool allowlist to streamline permissions
- Use headless mode for automation: `claude -p &quot;task-master next&quot;`

### Multi-Task Updates

- Use `update --from=&lt;id&gt;` to update multiple future tasks
- Use `update-task --id=&lt;id&gt;` for single task updates
- Use `update-subtask --id=&lt;id&gt;` for implementation logging

### Research Mode

- Add `--research` flag for research-based AI enhancement
- Requires a research model API key like Perplexity (`PERPLEXITY_API_KEY`) in environment
- Provides more informed task creation and updates
- Recommended for complex technical tasks

---

# Project Context

Ultracite enforces strict type safety, accessibility standards, and consistent code quality for JavaScript/TypeScript projects using Biome&apos;s lightning-fast formatter and linter.

## Key Principles

- Zero configuration required
- Subsecond performance
- Maximum type safety
- AI-friendly code generation

## Before Writing Code

1. Analyze existing patterns in the codebase
2. Consider edge cases and error scenarios
3. Follow the rules below strictly
4. Validate accessibility requirements

## Rules

### Accessibility (a11y)

- Don&apos;t use `accessKey` attribute on any HTML element.
- Don&apos;t set `aria-hidden=&quot;true&quot;` on focusable elements.
- Don&apos;t add ARIA roles, states, and properties to elements that don&apos;t support them.
- Don&apos;t use distracting elements like `&lt;marquee&gt;` or `&lt;blink&gt;`.
- Only use the `scope` prop on `&lt;th&gt;` elements.
- Don&apos;t assign non-interactive ARIA roles to interactive HTML elements.
- Make sure label elements have text content and are associated with an input.
- Don&apos;t assign interactive ARIA roles to non-interactive HTML elements.
- Don&apos;t assign `tabIndex` to non-interactive HTML elements.
- Don&apos;t use positive integers for `tabIndex` property.
- Don&apos;t include &quot;image&quot;, &quot;picture&quot;, or &quot;photo&quot; in img alt prop.
- Don&apos;t use explicit role property that&apos;s the same as the implicit/default role.
- Make static elements with click handlers use a valid role attribute.
- Always include a `title` element for SVG elements.
- Give all elements requiring alt text meaningful information for screen readers.
- Make sure anchors have content that&apos;s accessible to screen readers.
- Assign `tabIndex` to non-interactive HTML elements with `aria-activedescendant`.
- Include all required ARIA attributes for elements with ARIA roles.
- Make sure ARIA properties are valid for the element&apos;s supported roles.
- Always include a `type` attribute for button elements.
- Make elements with interactive roles and handlers focusable.
- Give heading elements content that&apos;s accessible to screen readers (not hidden with `aria-hidden`).
- Always include a `lang` attribute on the html element.
- Always include a `title` attribute for iframe elements.
- Accompany `onClick` with at least one of: `onKeyUp`, `onKeyDown`, or `onKeyPress`.
- Accompany `onMouseOver`/`onMouseOut` with `onFocus`/`onBlur`.
- Include caption tracks for audio and video elements.
- Use semantic elements instead of role attributes in JSX.
- Make sure all anchors are valid and navigable.
- Ensure all ARIA properties (`aria-*`) are valid.
- Use valid, non-abstract ARIA roles for elements with ARIA roles.
- Use valid ARIA state and property values.
- Use valid values for the `autocomplete` attribute on input elements.
- Use correct ISO language/country codes for the `lang` attribute.

### Code Complexity and Quality

- Don&apos;t use consecutive spaces in regular expression literals.
- Don&apos;t use the `arguments` object.
- Don&apos;t use primitive type aliases or misleading types.
- Don&apos;t use the comma operator.
- Don&apos;t use empty type parameters in type aliases and interfaces.
- Don&apos;t write functions that exceed a given Cognitive Complexity score.
- Don&apos;t nest describe() blocks too deeply in test files.
- Don&apos;t use unnecessary boolean casts.
- Don&apos;t use unnecessary callbacks with flatMap.
- Use for...of statements instead of Array.forEach.
- Don&apos;t create classes that only have static members (like a static namespace).
- Don&apos;t use this and super in static contexts.
- Don&apos;t use unnecessary catch clauses.
- Don&apos;t use unnecessary constructors.
- Don&apos;t use unnecessary continue statements.
- Don&apos;t export empty modules that don&apos;t change anything.
- Don&apos;t use unnecessary escape sequences in regular expression literals.
- Don&apos;t use unnecessary fragments.
- Don&apos;t use unnecessary labels.
- Don&apos;t use unnecessary nested block statements.
- Don&apos;t rename imports, exports, and destructured assignments to the same name.
- Don&apos;t use unnecessary string or template literal concatenation.
- Don&apos;t use String.raw in template literals when there are no escape sequences.
- Don&apos;t use useless case statements in switch statements.
- Don&apos;t use ternary operators when simpler alternatives exist.
- Don&apos;t use useless `this` aliasing.
- Don&apos;t use any or unknown as type constraints.
- Don&apos;t initialize variables to undefined.
- Don&apos;t use the void operators (they&apos;re not familiar).
- Use arrow functions instead of function expressions.
- Use Date.now() to get milliseconds since the Unix Epoch.
- Use .flatMap() instead of map().flat() when possible.
- Use literal property access instead of computed property access.
- Don&apos;t use parseInt() or Number.parseInt() when binary, octal, or hexadecimal literals work.
- Use concise optional chaining instead of chained logical expressions.
- Use regular expression literals instead of the RegExp constructor when possible.
- Don&apos;t use number literal object member names that aren&apos;t base 10 or use underscore separators.
- Remove redundant terms from logical expressions.
- Use while loops instead of for loops when you don&apos;t need initializer and update expressions.
- Don&apos;t pass children as props.
- Don&apos;t reassign const variables.
- Don&apos;t use constant expressions in conditions.
- Don&apos;t use `Math.min` and `Math.max` to clamp values when the result is constant.
- Don&apos;t return a value from a constructor.
- Don&apos;t use empty character classes in regular expression literals.
- Don&apos;t use empty destructuring patterns.
- Don&apos;t call global object properties as functions.
- Don&apos;t declare functions and vars that are accessible outside their block.
- Make sure builtins are correctly instantiated.
- Don&apos;t use super() incorrectly inside classes. Also check that super() is called in classes that extend other constructors.
- Don&apos;t use variables and function parameters before they&apos;re declared.
- Don&apos;t use 8 and 9 escape sequences in string literals.
- Don&apos;t use literal numbers that lose precision.

### React and JSX Best Practices

- Don&apos;t use the return value of React.render.
- Make sure all dependencies are correctly specified in React hooks.
- Make sure all React hooks are called from the top level of component functions.
- Don&apos;t forget key props in iterators and collection literals.
- Don&apos;t destructure props inside JSX components in Solid projects.
- Don&apos;t define React components inside other components.
- Don&apos;t use event handlers on non-interactive elements.
- Don&apos;t assign to React component props.
- Don&apos;t use both `children` and `dangerouslySetInnerHTML` props on the same element.
- Don&apos;t use dangerous JSX props.
- Don&apos;t use Array index in keys.
- Don&apos;t insert comments as text nodes.
- Don&apos;t assign JSX properties multiple times.
- Don&apos;t add extra closing tags for components without children.
- Use `&lt;&gt;...&lt;/&gt;` instead of `&lt;Fragment&gt;...&lt;/Fragment&gt;`.
- Watch out for possible &quot;wrong&quot; semicolons inside JSX elements.

### Correctness and Safety

- Don&apos;t assign a value to itself.
- Don&apos;t return a value from a setter.
- Don&apos;t compare expressions that modify string case with non-compliant values.
- Don&apos;t use lexical declarations in switch clauses.
- Don&apos;t use variables that haven&apos;t been declared in the document.
- Don&apos;t write unreachable code.
- Make sure super() is called exactly once on every code path in a class constructor before this is accessed if the class has a superclass.
- Don&apos;t use control flow statements in finally blocks.
- Don&apos;t use optional chaining where undefined values aren&apos;t allowed.
- Don&apos;t have unused function parameters.
- Don&apos;t have unused imports.
- Don&apos;t have unused labels.
- Don&apos;t have unused private class members.
- Don&apos;t have unused variables.
- Make sure void (self-closing) elements don&apos;t have children.
- Don&apos;t return a value from a function with the return type &apos;void&apos;
- Use isNaN() when checking for NaN.
- Make sure &quot;for&quot; loop update clauses move the counter in the right direction.
- Make sure typeof expressions are compared to valid values.
- Make sure generator functions contain yield.
- Don&apos;t use await inside loops.
- Don&apos;t use bitwise operators.
- Don&apos;t use expressions where the operation doesn&apos;t change the value.
- Make sure Promise-like statements are handled appropriately.
- Don&apos;t use **dirname and **filename in the global scope.
- Prevent import cycles.
- Don&apos;t use configured elements.
- Don&apos;t hardcode sensitive data like API keys and tokens.
- Don&apos;t let variable declarations shadow variables from outer scopes.
- Don&apos;t use the TypeScript directive @ts-ignore.
- Prevent duplicate polyfills from Polyfill.io.
- Don&apos;t use useless backreferences in regular expressions that always match empty strings.
- Don&apos;t use unnecessary escapes in string literals.
- Don&apos;t use useless undefined.
- Make sure getters and setters for the same property are next to each other in class and object definitions.
- Make sure object literals are declared consistently (defaults to explicit definitions).
- Use static Response methods instead of new Response() constructor when possible.
- Make sure switch-case statements are exhaustive.
- Make sure the `preconnect` attribute is used when using Google Fonts.
- Use `Array#{indexOf,lastIndexOf}()` instead of `Array#{findIndex,findLastIndex}()` when looking for the index of an item.
- Make sure iterable callbacks return consistent values.
- Use `with { type: &quot;json&quot; }` for JSON module imports.
- Use numeric separators in numeric literals.
- Use object spread instead of `Object.assign()` when constructing new objects.
- Always use the radix argument when using `parseInt()`.
- Make sure JSDoc comment lines start with a single asterisk, except for the first one.
- Include a description parameter for `Symbol()`.
- Don&apos;t use spread (`...`) syntax on accumulators.
- Don&apos;t use the `delete` operator.
- Don&apos;t access namespace imports dynamically.
- Don&apos;t use namespace imports.
- Declare regex literals at the top level.
- Don&apos;t use `target=&quot;_blank&quot;` without `rel=&quot;noopener&quot;`.

### TypeScript Best Practices

- Don&apos;t use TypeScript enums.
- Don&apos;t export imported variables.
- Don&apos;t add type annotations to variables, parameters, and class properties that are initialized with literal expressions.
- Don&apos;t use TypeScript namespaces.
- Don&apos;t use non-null assertions with the `!` postfix operator.
- Don&apos;t use parameter properties in class constructors.
- Don&apos;t use user-defined types.
- Use `as const` instead of literal types and type annotations.
- Use either `T[]` or `Array&lt;T&gt;` consistently.
- Initialize each enum member value explicitly.
- Use `export type` for types.
- Use `import type` for types.
- Make sure all enum members are literal values.
- Don&apos;t use TypeScript const enum.
- Don&apos;t declare empty interfaces.
- Don&apos;t let variables evolve into any type through reassignments.
- Don&apos;t use the any type.
- Don&apos;t misuse the non-null assertion operator (!) in TypeScript files.
- Don&apos;t use implicit any type on variable declarations.
- Don&apos;t merge interfaces and classes unsafely.
- Don&apos;t use overload signatures that aren&apos;t next to each other.
- Use the namespace keyword instead of the module keyword to declare TypeScript namespaces.

### Style and Consistency

- Don&apos;t use global `eval()`.
- Don&apos;t use callbacks in asynchronous tests and hooks.
- Don&apos;t use negation in `if` statements that have `else` clauses.
- Don&apos;t use nested ternary expressions.
- Don&apos;t reassign function parameters.
- This rule lets you specify global variable names you don&apos;t want to use in your application.
- Don&apos;t use specified modules when loaded by import or require.
- Don&apos;t use constants whose value is the upper-case version of their name.
- Use `String.slice()` instead of `String.substr()` and `String.substring()`.
- Don&apos;t use template literals if you don&apos;t need interpolation or special-character handling.
- Don&apos;t use `else` blocks when the `if` block breaks early.
- Don&apos;t use yoda expressions.
- Don&apos;t use Array constructors.
- Use `at()` instead of integer index access.
- Follow curly brace conventions.
- Use `else if` instead of nested `if` statements in `else` clauses.
- Use single `if` statements instead of nested `if` clauses.
- Use `new` for all builtins except `String`, `Number`, and `Boolean`.
- Use consistent accessibility modifiers on class properties and methods.
- Use `const` declarations for variables that are only assigned once.
- Put default function parameters and optional function parameters last.
- Include a `default` clause in switch statements.
- Use the `**` operator instead of `Math.pow`.
- Use `for-of` loops when you need the index to extract an item from the iterated array.
- Use `node:assert/strict` over `node:assert`.
- Use the `node:` protocol for Node.js builtin modules.
- Use Number properties instead of global ones.
- Use assignment operator shorthand where possible.
- Use function types instead of object types with call signatures.
- Use template literals over string concatenation.
- Use `new` when throwing an error.
- Don&apos;t throw non-Error values.
- Use `String.trimStart()` and `String.trimEnd()` over `String.trimLeft()` and `String.trimRight()`.
- Use standard constants instead of approximated literals.
- Don&apos;t assign values in expressions.
- Don&apos;t use async functions as Promise executors.
- Don&apos;t reassign exceptions in catch clauses.
- Don&apos;t reassign class members.
- Don&apos;t compare against -0.
- Don&apos;t use labeled statements that aren&apos;t loops.
- Don&apos;t use void type outside of generic or return types.
- Don&apos;t use console.
- Don&apos;t use control characters and escape sequences that match control characters in regular expression literals.
- Don&apos;t use debugger.
- Don&apos;t assign directly to document.cookie.
- Use `===` and `!==`.
- Don&apos;t use duplicate case labels.
- Don&apos;t use duplicate class members.
- Don&apos;t use duplicate conditions in if-else-if chains.
- Don&apos;t use two keys with the same name inside objects.
- Don&apos;t use duplicate function parameter names.
- Don&apos;t have duplicate hooks in describe blocks.
- Don&apos;t use empty block statements and static blocks.
- Don&apos;t let switch clauses fall through.
- Don&apos;t reassign function declarations.
- Don&apos;t allow assignments to native objects and read-only global variables.
- Use Number.isFinite instead of global isFinite.
- Use Number.isNaN instead of global isNaN.
- Don&apos;t assign to imported bindings.
- Don&apos;t use irregular whitespace characters.
- Don&apos;t use labels that share a name with a variable.
- Don&apos;t use characters made with multiple code points in character class syntax.
- Make sure to use new and constructor properly.
- Don&apos;t use shorthand assign when the variable appears on both sides.
- Don&apos;t use octal escape sequences in string literals.
- Don&apos;t use Object.prototype builtins directly.
- Don&apos;t redeclare variables, functions, classes, and types in the same scope.
- Don&apos;t have redundant &quot;use strict&quot;.
- Don&apos;t compare things where both sides are exactly the same.
- Don&apos;t let identifiers shadow restricted names.
- Don&apos;t use sparse arrays (arrays with holes).
- Don&apos;t use template literal placeholder syntax in regular strings.
- Don&apos;t use the then property.
- Don&apos;t use unsafe negation.
- Don&apos;t use var.
- Don&apos;t use with statements in non-strict contexts.
- Make sure async functions actually use await.
- Make sure default clauses in switch statements come last.
- Make sure to pass a message value when creating a built-in error.
- Make sure get methods always return a value.
- Use a recommended display strategy with Google Fonts.
- Make sure for-in loops include an if statement.
- Use Array.isArray() instead of instanceof Array.
- Make sure to use the digits argument with Number#toFixed().
- Make sure to use the &quot;use strict&quot; directive in script files.

### Next.js Specific Rules

- Don&apos;t use `&lt;img&gt;` elements in Next.js projects.
- Don&apos;t use `&lt;head&gt;` elements in Next.js projects.
- Don&apos;t import next/document outside of pages/\_document.jsx in Next.js projects.
- Don&apos;t use the next/head module in pages/\_document.js on Next.js projects.

### Testing Best Practices

- Don&apos;t use export or module.exports in test files.
- Don&apos;t use focused tests.
- Make sure the assertion function, like expect, is placed inside an it() function call.
- Don&apos;t use disabled tests.

## Common Tasks

- `npx ultracite init` - Initialize Ultracite in your project
- `npx ultracite fix` - Format and fix code automatically
- `npx ultracite check` - Check for issues without fixing

## Example: Error Handling

```typescript
// ‚úÖ Good: Comprehensive error handling
try {
  const result = await fetchData();
  return { success: true, data: result };
} catch (error) {
  console.error(&quot;API call failed:&quot;, error);
  return { success: false, error: error.message };
}

// ‚ùå Bad: Swallowing errors
try {
  return await fetchData();
} catch (e) {
  console.log(e);
}
```

_This guide ensures Claude Code has immediate access to Task Master&apos;s essential functionality for agentic development workflows._</file><file path="be/ai-agents/sessions/index.ts"></file><file path="be/ai-agents/sessions/session-factory.ts">import type { Session, AgentInputItem } from &quot;@openai/agents&quot;;
import { MemorySession } from &quot;@openai/agents&quot;;
export type SessionType = &quot;memory&quot;;
export type CompactionStrategy = &quot;none&quot; | &quot;responses&quot;;
export interface CompactionConfig {
  maxItems?: number;
  summaryModel?: string;
}
export interface CreateSessionOptions {
  userId: string;
  agentName: string;
  taskId?: string;
  sessionType?: SessionType;
  compaction?: CompactionStrategy;
  compactionConfig?: CompactionConfig;
}
export function createAgentSession(options: CreateSessionOptions): Session
function createCompactionWrapper(baseSession: Session, config?: CompactionConfig): Session
export async function getSessionInfo(session: Session): Promise&lt;</file><file path="be/ai-agents/agent-handoff-descriptions.ts">import { RECOMMENDED_PROMPT_PREFIX } from &quot;@openai/agents-core/extensions&quot;;</file><file path="be/ai-agents/agents-instructions.ts">import { RECOMMENDED_PROMPT_PREFIX } from &quot;@openai/agents-core/extensions&quot;;</file><file path="be/ai-agents/AGENTS.md"># AI Agents Module

OpenAI Agents SDK implementation for calendar assistant orchestration.

## Architecture

```
ORCHESTRATOR_AGENT (GPT-4-1-MINI router)
‚îú‚îÄ‚îÄ DIRECT_TOOLS (pure functions, no AI overhead)
‚îÇ   ‚îú‚îÄ‚îÄ validate_user_direct, get_timezone_direct
‚îÇ   ‚îú‚îÄ‚îÄ pre_create_validation (combined validation)
‚îÇ   ‚îî‚îÄ‚îÄ insert_event_direct, analyze_gaps_direct
‚îú‚îÄ‚îÄ HANDOFF_AGENTS (multi-step workflows)
‚îÇ   ‚îú‚îÄ‚îÄ createEventHandoff, updateEventHandoff
‚îÇ   ‚îî‚îÄ‚îÄ deleteEventHandoff, registerUserHandoff
‚îî‚îÄ‚îÄ AGENTS (atomic single-purpose)
    ‚îú‚îÄ‚îÄ parseEventText (GPT-5-MINI for NLP)
    ‚îî‚îÄ‚îÄ updateEvent, deleteEvent (GPT-4-1-NANO)
```

## Model Tiers

| Tier            | Model        | Use Case                 |
| --------------- | ------------ | ------------------------ |
| `FAST_MODEL`    | GPT-4-1-NANO | Simple tool-calling      |
| `MEDIUM_MODEL`  | GPT-4-1-MINI | Multi-tool orchestration |
| `CURRENT_MODEL` | GPT-5-MINI   | Complex NLP/reasoning    |

## Where to Look

| Task            | File                                             |
| --------------- | ------------------------------------------------ |
| Add tool        | `tool-registry.ts` (AGENT_TOOLS or DIRECT_TOOLS) |
| Add agent       | `agents.ts` + `agents-instructions.ts`           |
| Tool parameters | `tool-schemas.ts` (Zod schemas)                  |
| Tool execution  | `tool-execution.ts`                              |
| Safety checks   | `guardrails.ts`                                  |

## Conventions

- Tools get email from `runContext.context.email` (AgentContext type)
- Use DIRECT_TOOLS for DB/validation ops (faster, cheaper)
- Agent tools use `asTool()` to expose agents as callable tools
- Guardrails check for injection, mass deletion attempts

## Key Patterns

```typescript
// Direct tool (no AI, pure function)
DIRECT_TOOLS.validate_user_direct;

// Agent as tool (callable from other agents)
AGENTS.parseEventText.asTool({ toolName: &quot;parse_event_text&quot; });

// Context extraction
const email = runContext?.context?.email;
```

## Anti-Patterns

| Forbidden                       | Why                      |
| ------------------------------- | ------------------------ |
| AI agents for simple DB lookups | Use DIRECT_TOOLS instead |
| Skip guardrail checks           | Security risk            |
| CURRENT_MODEL for simple tools  | Cost/latency overhead    |
| Hardcoded email in tools        | Use AgentContext         |</file><file path="be/ai-agents/agents.ts">import { AGENT_TOOLS, DIRECT_TOOLS } from &quot;./tool-registry&quot;;
import { CURRENT_MODEL, MODELS } from &quot;@/config&quot;;
import { AGENT_INSTRUCTIONS } from &quot;./agents-instructions&quot;;
import { Agent } from &quot;@openai/agents&quot;;
import { HANDOFF_DESCRIPTIONS } from &quot;./agent-handoff-descriptions&quot;;
import { calendarSafetyGuardrail } from &quot;./guardrails&quot;;</file><file path="be/ai-agents/direct-utilities.ts">import { MODELS } from &quot;@/config/constants/ai&quot;
import { env } from &quot;@/config&quot;
import OpenAI from &quot;openai&quot;
import type { calendar_v3 } from &quot;googleapis&quot;
import isEmail from &quot;validator/lib/isEmail&quot;
import {
  validateUserHandler,
  getTimezoneHandler,
  selectCalendarHandler,
  checkConflictsHandler,
  preCreateValidationHandler,
  type ValidateUserResult,
  type TimezoneResult,
  type SelectCalendarResult,
  type ConflictCheckResult,
  type PreCreateValidationResult,
} from &quot;@/shared&quot;
‚ãÆ----
type Event = calendar_v3.Schema$Event
export async function validateUserDirect(email: string): Promise&lt;ValidateUserResult&gt;
export async function getUserDefaultTimezoneDirect(email: string): Promise&lt;TimezoneResult&gt;
export async function selectCalendarByRules(
  email: string,
  eventInfo: { summary?: string | null; description?: string | null; location?: string | null },
): Promise&lt;SelectCalendarResult&gt;
export async function checkConflictsDirect(params: {
  email: string
  calendarId: string
  start: calendar_v3.Schema$EventDateTime
  end: calendar_v3.Schema$EventDateTime
}): Promise&lt;ConflictCheckResult&gt;
export async function preCreateValidation(
  email: string,
  eventData: Partial&lt;Event&gt;,
): Promise&lt;PreCreateValidationResult&gt;
import { formatEventData as formatEvent } from &quot;./utils&quot;
export type ValidateEventResult = {
  valid: boolean
  event?: Event &amp; { email: string }
  error?: string
}
export function validateEventDataDirect(
  eventData: Partial&lt;Event&gt; &amp; { email: string },
): ValidateEventResult
‚ãÆ----
export async function summarizeEvents(
  events: calendar_v3.Schema$Event[],
): Promise&lt;string&gt;
function createFallbackEventSummary(events: calendar_v3.Schema$Event[]): string</file><file path="be/ai-agents/guardrails.ts">import { Agent, InputGuardrail, InputGuardrailTripwireTriggered, run } from &quot;@openai/agents&quot;;
import { MODELS } from &quot;@/config&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { z } from &quot;zod&quot;;
‚ãÆ----
type ConversationMessage = {
  role?: string;
  type?: string;
  content?: string | Array&lt;{ text?: string; type?: string }&gt;;
  output?: { text?: string } | string;
  name?: string;
};
const extractUserRequestForGuardrail = (input: string | ConversationMessage[]): string =&gt;
‚ãÆ----
export const preCheckInput = (input: string):
‚ãÆ----
const createGuardrailResult = (guardrailName: string, tripwireTriggered: boolean, outputInfo: unknown) =&gt; (</file><file path="be/ai-agents/index.ts"></file><file path="be/ai-agents/insights-generator.ts">import type { InsightsMetrics } from &quot;@/utils/ai/insights-calculator&quot;;
import { MODELS } from &quot;@/config&quot;;
import OpenAI from &quot;openai&quot;;
import { env } from &quot;@/config/env&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { z } from &quot;zod&quot;;
‚ãÆ----
export type InsightIconName = (typeof INSIGHT_ICONS)[number];
export type InsightColor = (typeof INSIGHT_COLORS)[number];
‚ãÆ----
export type AIInsight = z.infer&lt;typeof InsightSchema&gt;;
export type AIInsightsResponse = z.infer&lt;typeof InsightsResponseSchema&gt;;
‚ãÆ----
export async function generateInsights(metrics: InsightsMetrics, periodStart: string, periodEnd: string): Promise&lt;AIInsightsResponse&gt;
export async function generateInsightsWithRetry(metrics: InsightsMetrics, periodStart: string, periodEnd: string, maxRetries = 3): Promise&lt;AIInsightsResponse&gt;
function sleep(ms: number): Promise&lt;void&gt;</file><file path="be/ai-agents/tool-descriptions.ts"></file><file path="be/ai-agents/tool-execution.ts">import { ACTION, SUPABASE } from &quot;@/config&quot;;
import {
  eventsHandler,
  initUserSupabaseCalendarWithTokensAndUpdateTokens,
} from &quot;@/utils/calendar&quot;;
import { fetchCredentialsByEmail, generateGoogleAuthUrl } from &quot;@/utils/auth&quot;;
import { formatEventData, parseToolArguments } from &quot;./utils&quot;;
import { asyncHandler } from &quot;@/utils/http&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
import { getEvents } from &quot;@/utils/calendar/get-events&quot;;
import isEmail from &quot;validator/lib/isEmail&quot;;
type Event = calendar_v3.Schema$Event;
function isValidDateTime(dt: string): boolean
/**
 * Applies the user&apos;s default calendar timezone to timed events that don&apos;t have a timezone specified.
 * All-day events (using date instead of dateTime) don&apos;t require a timezone.
 */
async function applyDefaultTimezoneIfNeeded(
  event: Partial&lt;Event&gt;,
  email: string,
): Promise&lt;Partial&lt;Event&gt;&gt;
‚ãÆ----
// If not a timed event or already has timezone, return as-is
‚ãÆ----
// Fetch user&apos;s default calendar timezone
‚ãÆ----
const computeDefaultTimeMax = (timeMin: string): string =&gt;
‚ãÆ----
const slimEvent = (
        event: calendar_v3.Schema$Event,
        calendarId?: string | null,
) =&gt; (</file><file path="be/ai-agents/tool-registry.ts">import { PARAMETERS_TOOLS, makeEventTime } from &quot;./tool-schemas&quot;;
import {
  analyzeGapsForUser,
  fillGap,
  formatGapsForDisplay,
} from &quot;@/utils/calendar/gap-recovery&quot;;
import {
  checkConflictsDirect,
  getUserDefaultTimezoneDirect,
  preCreateValidation,
  selectCalendarByRules,
  summarizeEvents,
  validateUserDirect,
} from &quot;./direct-utilities&quot;;
import {
  checkEventConflictsAllCalendars,
  getCalendarDefaultReminders,
  updateCalendarDefaultReminders,
  updateEventReminders,
  getUserReminderPreferences,
  saveUserReminderPreferences,
  getUserIdByEmail,
  resolveRemindersForEvent,
} from &quot;@/utils/calendar&quot;;
import { EXECUTION_TOOLS } from &quot;./tool-execution&quot;;
import { TOOLS_DESCRIPTION } from &quot;./tool-descriptions&quot;;
import { tool } from &quot;@openai/agents&quot;;
import { z } from &quot;zod&quot;;
import { type AgentContext, stringifyError } from &quot;@/shared/types&quot;;
import { getEmailFromContext } from &quot;@/shared/adapters/openai-adapter&quot;;
‚ãÆ----
gapId: &quot;&quot;, // Not needed for direct fill
‚ãÆ----
// Format gaps for display - no email needed</file><file path="be/ai-agents/tool-schemas.ts">import { TIMEZONE } from &quot;@/config&quot;;
import validator from &quot;validator&quot;;
import { z } from &quot;zod&quot;;
‚ãÆ----
const requiredString = (description: string, message = &quot;Required.&quot;)
‚ãÆ----
// Email schema - only used for registration where user provides email
‚ãÆ----
export const makeEventTime = ()
const makeFullEventParams = ()
‚ãÆ----
// Filter out empty values in start time object
‚ãÆ----
// Return null if all fields are empty/null
‚ãÆ----
// Filter out empty values in end time object
‚ãÆ----
// Return null if all fields are empty/null
‚ãÆ----
// DELETE event - no email needed
‚ãÆ----
// Gap analysis parameters</file><file path="be/ai-agents/utils.ts">import { TIMEZONE } from &quot;@/config&quot;
import { isEmpty, isNil, isPlainObject, omitBy } from &quot;lodash-es&quot;
import type { calendar_v3 } from &quot;googleapis&quot;
‚ãÆ----
type Event = calendar_v3.Schema$Event
type EDT = calendar_v3.Schema$EventDateTime
‚ãÆ----
export function deepClean&lt;T&gt;(obj: T): T
‚ãÆ----
const clean = (val: unknown): unknown =&gt;
‚ãÆ----
/**
 * @description Normalizes a Google Calendar EventDateTime object by removing empty values
 * and ensuring mutual exclusivity between date (all-day) and dateTime (timed) fields.
 * When dateTime is present, date is removed; when only date is present, dateTime and timeZone are removed.
 *
 * @param {Partial&lt;EDT&gt;} input - The raw EventDateTime object with optional date, dateTime, timeZone
 * @returns {EDT} A normalized EventDateTime with empty values removed and proper field exclusivity
 *
 * @example
 * // Timed event - keeps dateTime and removes date
 * normalizeEventDateTime({ dateTime: &apos;2024-01-15T10:00:00&apos;, date: &apos;&apos;, timeZone: &apos;America/New_York&apos; })
 * // Result: { dateTime: &apos;2024-01-15T10:00:00&apos;, timeZone: &apos;America/New_York&apos; }
 *
 * @example
 * // All-day event - keeps date, removes dateTime and timeZone
 * normalizeEventDateTime({ date: &apos;2024-01-15&apos;, dateTime: &apos;&apos;, timeZone: &apos;UTC&apos; })
 * // Result: { date: &apos;2024-01-15&apos; }
 */
export function normalizeEventDateTime(input: Partial&lt;EDT&gt;): EDT
/**
 * @description Validates that required fields are present for creating/updating a calendar event.
 * Throws descriptive errors if validation fails. Required fields: summary, start (date or dateTime),
 * and end (date or dateTime).
 *
 * @param {string | null | undefined} summary - The event title/summary
 * @param {EDT} start - The event start time (must have either date or dateTime)
 * @param {EDT} end - The event end time (must have either date or dateTime)
 * @returns {void}
 * @throws {Error} &apos;Event summary is required.&apos; if summary is null/undefined/empty
 * @throws {Error} &apos;Event start is required.&apos; if start has neither date nor dateTime
 * @throws {Error} &apos;Event end is required.&apos; if end has neither date nor dateTime
 *
 * @example
 * // Valid timed event
 * validateEventRequired(
 *   &apos;Team Meeting&apos;,
 *   { dateTime: &apos;2024-01-15T10:00:00&apos;, timeZone: &apos;UTC&apos; },
 *   { dateTime: &apos;2024-01-15T11:00:00&apos;, timeZone: &apos;UTC&apos; }
 * ); // No error thrown
 *
 * @example
 * // Missing summary throws error
 * validateEventRequired(null, start, end);
 * // Throws: Error(&apos;Event summary is required.&apos;)
 */
export function validateEventRequired(
  summary: string | null | undefined,
  start: EDT,
  end: EDT,
): void
/**
 * @description Validates and resolves the timezone for an event&apos;s start and end times.
 * Ensures timed events have a valid timezone from the allowed list, and that start/end
 * timezones match. For all-day events, timezone is not required.
 *
 * @param {EDT} start - The event start time with optional timeZone
 * @param {EDT} end - The event end time with optional timeZone
 * @returns {string | undefined} The resolved timezone string, or undefined for all-day events
 * @throws {Error} &apos;Event timeZone is required for timed events.&apos; if timed event lacks timezone
 * @throws {Error} &apos;Invalid timeZone: {tz}. Allowed: ...&apos; if timezone not in allowed list
 * @throws {Error} &apos;Start and end time zones must match.&apos; if timezones differ
 *
 * @example
 * // Valid matching timezones
 * const tz = validateAndResolveTimezone(
 *   { dateTime: &apos;2024-01-15T10:00:00&apos;, timeZone: &apos;America/New_York&apos; },
 *   { dateTime: &apos;2024-01-15T11:00:00&apos;, timeZone: &apos;America/New_York&apos; }
 * );
 * // Result: &apos;America/New_York&apos;
 *
 * @example
 * // All-day event (no timezone needed)
 * const tz = validateAndResolveTimezone(
 *   { date: &apos;2024-01-15&apos; },
 *   { date: &apos;2024-01-16&apos; }
 * );
 * // Result: undefined
 */
export function validateAndResolveTimezone(
  start: EDT,
  end: EDT,
): string | undefined
/**
 * @description Applies a timezone to start and end EventDateTime objects in place.
 * Only sets timezone on timed events (those with dateTime); all-day events (with date only)
 * are left unchanged.
 *
 * @param {EDT} start - The event start time object (modified in place)
 * @param {EDT} end - The event end time object (modified in place)
 * @param {string | undefined} timezone - The IANA timezone to apply (e.g., &apos;America/New_York&apos;)
 * @returns {void}
 *
 * @example
 * const start = { dateTime: &apos;2024-01-15T10:00:00&apos; };
 * const end = { dateTime: &apos;2024-01-15T11:00:00&apos; };
 * applyTimezone(start, end, &apos;Europe/London&apos;);
 * // start.timeZone === &apos;Europe/London&apos;
 * // end.timeZone === &apos;Europe/London&apos;
 *
 * @example
 * // All-day events are not modified
 * const start = { date: &apos;2024-01-15&apos; };
 * const end = { date: &apos;2024-01-16&apos; };
 * applyTimezone(start, end, &apos;Europe/London&apos;);
 * // start.timeZone === undefined (unchanged)
 */
export function applyTimezone(
  start: EDT,
  end: EDT,
  timezone: string | undefined,
): void
/**
 * @description Builds a Google Calendar Event object from cleaned event parameters and
 * normalized start/end times. Extracts only the fields supported by the Google Calendar API.
 *
 * @param {Partial&lt;Event&gt;} cleaned - The cleaned event parameters (summary, description, location, etc.)
 * @param {EDT} start - The normalized start EventDateTime
 * @param {EDT} end - The normalized end EventDateTime
 * @returns {Event} A properly structured Google Calendar Event object
 *
 * @example
 * const event = buildEvent(
 *   { summary: &apos;Team Meeting&apos;, location: &apos;Conference Room A&apos; },
 *   { dateTime: &apos;2024-01-15T10:00:00&apos;, timeZone: &apos;UTC&apos; },
 *   { dateTime: &apos;2024-01-15T11:00:00&apos;, timeZone: &apos;UTC&apos; }
 * );
 * // Result: {
 * //   summary: &apos;Team Meeting&apos;,
 * //   location: &apos;Conference Room A&apos;,
 * //   start: { dateTime: &apos;2024-01-15T10:00:00&apos;, timeZone: &apos;UTC&apos; },
 * //   end: { dateTime: &apos;2024-01-15T11:00:00&apos;, timeZone: &apos;UTC&apos; },
 * //   description: undefined,
 * //   attendees: undefined,
 * //   ...
 * // }
 */
export function buildEvent(
  cleaned: Partial&lt;Event&gt;,
  start: EDT,
  end: EDT,
): Event
/**
 * @description Main function for formatting and validating calendar event data before API submission.
 * Performs deep cleaning, datetime normalization, validation, timezone resolution, and builds
 * the final Event object. This is the primary entry point for processing user event input.
 *
 * @param {Partial&lt;Event&gt;} params - Raw event parameters from user input or AI parsing
 * @returns {Event} A validated, cleaned, and properly formatted Google Calendar Event
 * @throws {Error} If validation fails (missing summary, start, end, or invalid timezone)
 *
 * @example
 * // Full event formatting pipeline
 * const rawEvent = {
 *   summary: &apos;Team Standup&apos;,
 *   description: &apos;&apos;,  // Will be removed by deepClean
 *   location: null,   // Will be removed by deepClean
 *   start: { dateTime: &apos;2024-01-15T09:00:00&apos;, timeZone: &apos;America/New_York&apos; },
 *   end: { dateTime: &apos;2024-01-15T09:30:00&apos;, timeZone: &apos;America/New_York&apos; }
 * };
 * const event = formatEventData(rawEvent);
 * // Result: Cleaned, validated event ready for Google Calendar API
 *
 * @example
 * // Throws on missing required fields
 * formatEventData({ description: &apos;No summary provided&apos; });
 * // Throws: Error(&apos;Event summary is required.&apos;)
 */
export const formatEventData = (params: Partial&lt;Event&gt;): Event =&gt;
/**
 * @description Removes null, undefined, and empty string values from a flat object.
 * A simpler, non-recursive version of deepClean for single-level objects.
 *
 * @template T - The object type extending Record&lt;string, unknown&gt;
 * @param {T} obj - The object to clean
 * @returns {T} A new object with null/undefined/empty string values removed
 *
 * @example
 * const obj = { a: &apos;value&apos;, b: null, c: &apos;&apos;, d: 0 };
 * const cleaned = cleanObject(obj);
 * // Result: { a: &apos;value&apos;, d: 0 }  // Note: 0 is kept, only null/undefined/&apos;&apos; removed
 *
 * @private
 */
const cleanObject = &lt;T extends Record&lt;string, unknown&gt;&gt;(obj: T): T
/**
 * @description Cleans an EventDateTime-like object by converting empty strings to null and
 * returning undefined if neither date nor dateTime is present. Used during tool argument
 * parsing to normalize datetime inputs from various sources.
 *
 * @param {Object | null | undefined} dt - The datetime object to clean
 * @param {string | null} [dt.date] - The all-day date value
 * @param {string | null} [dt.dateTime] - The timed event datetime value
 * @param {string | null} [dt.timeZone] - The timezone identifier
 * @returns {{date?: string | null, dateTime?: string | null, timeZone?: string | null} | undefined}
 *   The cleaned datetime object, or undefined if no valid date/dateTime
 *
 * @example
 * cleanEventDateTime({ date: &apos;&apos;, dateTime: &apos;2024-01-15T10:00:00&apos;, timeZone: &apos;&apos; })
 * // Result: { date: null, dateTime: &apos;2024-01-15T10:00:00&apos;, timeZone: null }
 *
 * @example
 * cleanEventDateTime({ date: &apos;&apos;, dateTime: &apos;&apos; })
 * // Result: undefined (neither date nor dateTime present)
 *
 * @example
 * cleanEventDateTime(null)
 * // Result: undefined
 *
 * @private
 */
function cleanEventDateTime(
/**
 * @description Parses and normalizes tool arguments from various input formats used by AI agents.
 * Handles multiple nesting patterns (input string, fullEventParameters, eventParameters) and
 * extracts email, calendarId, eventId, and event-like properties. Robust against malformed inputs.
 *
 * @param {unknown} raw - The raw tool arguments, which may be:
 *   - An object with an &apos;input&apos; string property containing JSON
 *   - An object with &apos;fullEventParameters&apos; or &apos;eventParameters&apos; nesting
 *   - A flat object with event properties directly
 * @returns {{email: string | undefined, calendarId: string | null, eventId: string | undefined, eventLike: Partial&lt;Event&gt;}}
 *   An object containing:
 *   - email: The user&apos;s email address if found
 *   - calendarId: The calendar ID (null if not found or invalid)
 *   - eventId: The event ID if found (for updates/deletes)
 *   - eventLike: Cleaned partial Event object with extracted properties
 *
 * @example
 * // Parse nested input from AI tool call
 * const result = parseToolArguments({
 *   input: &apos;{&quot;email&quot;: &quot;user@example.com&quot;, &quot;eventParameters&quot;: {&quot;summary&quot;: &quot;Meeting&quot;}}&apos;
 * });
 * // Result: {
 * //   email: &apos;user@example.com&apos;,
 *
 *
 *
 *
 *
 * @example
 *
 * const result = parseToolArguments({
 *   email: &apos;user@example.com&apos;,
 *   calendarId: &apos;primary&apos;,
 *   summary: &apos;Team Sync&apos;,
 *   start: { dateTime: &apos;2024-01-15T10:00:00&apos; }
 * });
 *
 * @example
 *
 * parseToolArguments({ calendarId: &apos;/&apos; }).calendarId
 * parseToolArguments({ calendarId: &apos;  &apos; }).calendarId
 */
export function parseToolArguments(raw: unknown)
‚ãÆ----
const cleanString = (val: unknown): string | undefined</file><file path="be/config/clients/google-oauth.ts">import { REDIRECT_URI, env } from &quot;../env&quot;;
import { google } from &quot;googleapis&quot;;</file><file path="be/config/clients/index.ts"></file><file path="be/config/clients/lemonsqueezy.ts">import { lemonSqueezySetup } from &quot;@lemonsqueezy/lemonsqueezy.js&quot;
import { env } from &quot;@/config/env&quot;
‚ãÆ----
export const initializeLemonSqueezy = (): void =&gt;
export const isLemonSqueezyEnabled = (): boolean
export const getLemonSqueezyStoreId = (): string | undefined
‚ãÆ----
export type LemonSqueezyWebhookEvent = (typeof LEMONSQUEEZY_CONFIG.WEBHOOK_EVENTS)[number]
export interface CreateCheckoutParams {
  userId: string
  userEmail: string
  userName?: string
  planSlug: &quot;starter&quot; | &quot;pro&quot; | &quot;executive&quot;
  interval: &quot;monthly&quot; | &quot;yearly&quot;
  successUrl?: string
  cancelUrl?: string
}
export interface CreateCreditPackCheckoutParams {
  userId: string
  userEmail: string
  credits: number
  planSlug: &quot;starter&quot; | &quot;pro&quot; | &quot;executive&quot;
  successUrl?: string
  cancelUrl?: string
}
export interface SubscriptionInfo {
  id: string
  status: string
  planName: string
  planSlug: string
  interval: string
  currentPeriodStart: Date
  currentPeriodEnd: Date
  trialStart: Date | null
  trialEnd: Date | null
  cancelAtPeriodEnd: boolean
  canceledAt: Date | null
}
export interface BillingPortalParams {
  customerId: string
  returnUrl?: string
}</file><file path="be/config/clients/openai.ts">import { setDefaultOpenAIKey, setTracingExportApiKey } from &quot;@openai/agents&quot;;
import { env } from &quot;../env&quot;;
export function initializeOpenAI(): void</file><file path="be/config/clients/redis.ts">import Redis from &quot;ioredis&quot;;
import { logger } from &quot;@/utils/logger&quot;;
‚ãÆ----
export const isRedisConnected = (): boolean =&gt;
export const disconnectRedis = async (): Promise&lt;void&gt; =&gt;</file><file path="be/config/clients/supabase.ts">import type { Database } from &quot;@/database.types&quot;;
import { createClient } from &quot;@supabase/supabase-js&quot;;
import { env } from &quot;../env&quot;;</file><file path="be/config/constants/ai.ts">export enum MODELS {
  GPT_5 = &quot;gpt-5&quot;,
  GPT_5_MINI = &quot;gpt-5-mini&quot;,
  GPT_5_NANO = &quot;gpt-5-nano&quot;,
  O3 = &quot;o3&quot;,
  O3_PRO = &quot;o3-pro&quot;,
  O3_MINI = &quot;o3-mini&quot;,
  O4_MINI = &quot;o4-mini&quot;,
  O1 = &quot;o1&quot;,
  O1_PRO = &quot;o1-pro&quot;,
  O3_DEEP_RESEARCH = &quot;o3-deep-research&quot;,
  O4_MINI_DEEP_RESEARCH = &quot;o4-mini-deep-research&quot;,
  GPT_5_CHAT_LATEST = &quot;gpt-5-chat-latest&quot;,
  CHATGPT_4O_LATEST = &quot;chatgpt-4o-latest&quot;,
  GPT_4_1 = &quot;gpt-4.1&quot;,
  GPT_4_1_MINI = &quot;gpt-4.1-mini&quot;,
  GPT_4_1_NANO = &quot;gpt-4.1-nano&quot;,
  GPT_4O = &quot;gpt-4o&quot;,
  GPT_4O_MINI = &quot;gpt-4o-mini&quot;,
  GPT_4O_AUDIO_PREVIEW = &quot;gpt-4o-audio-preview&quot;,
  GPT_4O_MINI_AUDIO_PREVIEW = &quot;gpt-4o-mini-audio-preview&quot;,
  GPT_4O_REALTIME_PREVIEW = &quot;gpt-4o-realtime-preview&quot;,
  GPT_4O_MINI_REALTIME_PREVIEW = &quot;gpt-4o-mini-realtime-preview&quot;,
  GPT_4O_MINI_TTS = &quot;gpt-4o-mini-tts&quot;,
  TTS_1 = &quot;tts-1&quot;,
  TTS_1_HD = &quot;tts-1-hd&quot;,
  GPT_4O_TRANSCRIBE = &quot;gpt-4o-transcribe&quot;,
  GPT_4O_MINI_TRANSCRIBE = &quot;gpt-4o-mini-transcribe&quot;,
  WHISPER_1 = &quot;whisper-1&quot;,
  GPT_4O_SEARCH_PREVIEW = &quot;gpt-4o-search-preview&quot;,
  GPT_4O_MINI_SEARCH_PREVIEW = &quot;gpt-4o-mini-search-preview&quot;,
  COMPUTER_USE_PREVIEW = &quot;computer-use-preview&quot;,
  CODEX_MINI_LATEST = &quot;codex-mini-latest&quot;,
  GPT_IMAGE_1 = &quot;gpt-image-1&quot;,
  DALL_E_3 = &quot;dall-e-3&quot;,
  DALL_E_2 = &quot;dall-e-2&quot;,
  TEXT_EMBEDDING_3_SMALL = &quot;text-embedding-3-small&quot;,
  TEXT_EMBEDDING_3_LARGE = &quot;text-embedding-3-large&quot;,
  TEXT_EMBEDDING_ADA_002 = &quot;text-embedding-ada-002&quot;,
  OMNI_MODERATION_LATEST = &quot;omni-moderation-latest&quot;,
  TEXT_MODERATION_LATEST = &quot;text-moderation-latest&quot;,
  GPT_OSS_120B = &quot;gpt-oss-120b&quot;,
  GPT_OSS_20B = &quot;gpt-oss-20b&quot;,
  GPT_4_TURBO = &quot;gpt-4-turbo&quot;,
  GPT_4 = &quot;gpt-4&quot;,
  GPT_3_5_TURBO = &quot;gpt-3.5-turbo&quot;,
  BABBAGE_002 = &quot;babbage-002&quot;,
  DAVINCI_002 = &quot;davinci-002&quot;,
}</file><file path="be/config/constants/google.ts">export enum GOOGLE_CALENDAR_SCOPES {
  OPEN_ID = &quot;openid&quot;,
  EMAIL = &quot;email&quot;,
  PROFILE = &quot;profile&quot;,
  APP_CREATED = &quot;https://www.googleapis.com/auth/calendar.app.created&quot;,
  EVENTS = &quot;https://www.googleapis.com/auth/calendar.events&quot;,
  FULL_ACCESS = &quot;https://www.googleapis.com/auth/calendar&quot;,
  READONLY = &quot;https://www.googleapis.com/auth/calendar.readonly&quot;,
  CALENDAR_LIST = &quot;https://www.googleapis.com/auth/calendar.calendarlist&quot;,
  CALENDAR_LIST_READONLY = &quot;https://www.googleapis.com/auth/calendar.calendarlist.readonly&quot;,
  EVENTS_OWNED_READONLY = &quot;https://www.googleapis.com/auth/calendar.events.owned.readonly&quot;,
  EVENTS_OWNED = &quot;https://www.googleapis.com/auth/calendar.events.owned&quot;,
  FREEBUSY = &quot;https://www.googleapis.com/auth/calendar.freebusy&quot;,
}</file><file path="be/config/constants/http.ts">export enum STATUS_RESPONSE {
  SUCCESS = 200,
  CREATED = 201,
  NO_CONTENT = 204,
  BAD_REQUEST = 400,
  UNAUTHORIZED = 401,
  FORBIDDEN = 403,
  NOT_FOUND = 404,
  CONFLICT = 409,
  TOO_MANY_REQUESTS = 429,
  INTERNAL_SERVER_ERROR = 500,
  SERVICE_UNAVAILABLE = 503,
}
export enum ROUTES {
  USERS = &quot;/api/users&quot;,
  CALENDAR = &quot;/api/calendars&quot;,
  CALENDAR_LIST = &quot;/api/calendars/list&quot;,
  EVENTS = &quot;/api/events&quot;,
  GAPS = &quot;/api/gaps&quot;,
  ACL = &quot;/api/acl&quot;,
  CHANNELS = &quot;/api/channels&quot;,
  TELEGRAM_USERS = &quot;/api/telegram-users&quot;,
  WHATSAPP = &quot;/api/whatsapp&quot;,
  CHAT = &quot;/api/chat&quot;,
  PAYMENTS = &quot;/api/payments&quot;,
  CONTACT = &quot;/api/contact&quot;,
  WEBHOOKS = &quot;/webhooks&quot;,
  VOICE = &quot;/api/voice&quot;,
  ADMIN = &quot;/api/admin&quot;,
  CRON = &quot;/api/cron&quot;,
  TELEGRAM = &quot;/api/telegram&quot;,
  SLACK = &quot;/api/slack&quot;,
  RISC = &quot;/api/google/risc&quot;,
}
export enum PROVIDERS {
  GOOGLE = &quot;google&quot;,
  GITHUB = &quot;github&quot;,
  LINKEDIN = &quot;linkedin&quot;,
}
export enum ACTION {
  GET = &quot;get&quot;,
  INSERT = &quot;insert&quot;,
  PATCH = &quot;patch&quot;,
  UPDATE = &quot;update&quot;,
  DELETE = &quot;delete&quot;,
}</file><file path="be/config/constants/index.ts"></file><file path="be/config/constants/sql.ts"></file><file path="be/config/constants/timezone.ts">export enum TIMEZONE {
  DEFAULT = &quot;Etc/UTC&quot;,
  AFRICA_ABIDJAN = &quot;Africa/Abidjan&quot;,
  AFRICA_ACCRA = &quot;Africa/Accra&quot;,
  AFRICA_ADDIS_ABABA = &quot;Africa/Addis_Ababa&quot;,
  AFRICA_ALGIERS = &quot;Africa/Algiers&quot;,
  AFRICA_ASMARA = &quot;Africa/Asmara&quot;,
  AFRICA_ASMERA = &quot;Africa/Asmera&quot;,
  AFRICA_BAMAKO = &quot;Africa/Bamako&quot;,
  AFRICA_BANGUI = &quot;Africa/Bangui&quot;,
  AFRICA_BANJUL = &quot;Africa/Banjul&quot;,
  AFRICA_BISSAU = &quot;Africa/Bissau&quot;,
  AFRICA_BLANTYRE = &quot;Africa/Blantyre&quot;,
  AFRICA_BRAZZAVILLE = &quot;Africa/Brazzaville&quot;,
  AFRICA_BUJUMBURA = &quot;Africa/Bujumbura&quot;,
  AFRICA_CAIRO = &quot;Africa/Cairo&quot;,
  AFRICA_CASABLANCA = &quot;Africa/Casablanca&quot;,
  AFRICA_CEUTA = &quot;Africa/Ceuta&quot;,
  AFRICA_CONAKRY = &quot;Africa/Conakry&quot;,
  AFRICA_DAKAR = &quot;Africa/Dakar&quot;,
  AFRICA_DAR_ES_SALAAM = &quot;Africa/Dar_es_Salaam&quot;,
  AFRICA_DJIBOUTI = &quot;Africa/Djibouti&quot;,
  AFRICA_DOUALA = &quot;Africa/Douala&quot;,
  AFRICA_EL_AAIUN = &quot;Africa/El_Aaiun&quot;,
  AFRICA_FREETOWN = &quot;Africa/Freetown&quot;,
  AFRICA_GABORONE = &quot;Africa/Gaborone&quot;,
  AFRICA_HARARE = &quot;Africa/Harare&quot;,
  AFRICA_JOHANNESBURG = &quot;Africa/Johannesburg&quot;,
  AFRICA_JUBA = &quot;Africa/Juba&quot;,
  AFRICA_KAMPALA = &quot;Africa/Kampala&quot;,
  AFRICA_KHARTOUM = &quot;Africa/Khartoum&quot;,
  AFRICA_KIGALI = &quot;Africa/Kigali&quot;,
  AFRICA_KINSHASA = &quot;Africa/Kinshasa&quot;,
  AFRICA_LAGOS = &quot;Africa/Lagos&quot;,
  AFRICA_LIBREVILLE = &quot;Africa/Libreville&quot;,
  AFRICA_LOME = &quot;Africa/Lome&quot;,
  AFRICA_LUANDA = &quot;Africa/Luanda&quot;,
  AFRICA_LUBUMBASHI = &quot;Africa/Lubumbashi&quot;,
  AFRICA_LUSAKA = &quot;Africa/Lusaka&quot;,
  AFRICA_MALABO = &quot;Africa/Malabo&quot;,
  AFRICA_MAPUTO = &quot;Africa/Maputo&quot;,
  AFRICA_MASERU = &quot;Africa/Maseru&quot;,
  AFRICA_MBABANE = &quot;Africa/Mbabane&quot;,
  AFRICA_MOGADISHU = &quot;Africa/Mogadishu&quot;,
  AFRICA_MONROVIA = &quot;Africa/Monrovia&quot;,
  AFRICA_NAIROBI = &quot;Africa/Nairobi&quot;,
  AFRICA_NDJAMENA = &quot;Africa/Ndjamena&quot;,
  AFRICA_NIAMEY = &quot;Africa/Niamey&quot;,
  AFRICA_NOUAKCHOTT = &quot;Africa/Nouakchott&quot;,
  AFRICA_OUAGADOUGOU = &quot;Africa/Ouagadougou&quot;,
  AFRICA_PORTO_NOVO = &quot;Africa/Porto-Novo&quot;,
  AFRICA_SAO_TOME = &quot;Africa/Sao_Tome&quot;,
  AFRICA_TIMBUKTU = &quot;Africa/Timbuktu&quot;,
  AFRICA_TRIPOLI = &quot;Africa/Tripoli&quot;,
  AFRICA_TUNIS = &quot;Africa/Tunis&quot;,
  AFRICA_WINDHOEK = &quot;Africa/Windhoek&quot;,
  AMERICA_ADAK = &quot;America/Adak&quot;,
  AMERICA_ANCHORAGE = &quot;America/Anchorage&quot;,
  AMERICA_ANGUILLA = &quot;America/Anguilla&quot;,
  AMERICA_ANTIGUA = &quot;America/Antigua&quot;,
  AMERICA_ARAGUAINA = &quot;America/Araguaina&quot;,
  AMERICA_ARGENTINA_BUENOS_AIRES = &quot;America/Argentina/Buenos_Aires&quot;,
  AMERICA_ARGENTINA_CATAMARCA = &quot;America/Argentina/Catamarca&quot;,
  AMERICA_ARGENTINA_COMODRIVADAVIA = &quot;America/Argentina/ComodRivadavia&quot;,
  AMERICA_ARGENTINA_CORDOBA = &quot;America/Argentina/Cordoba&quot;,
  AMERICA_ARGENTINA_JUJUY = &quot;America/Argentina/Jujuy&quot;,
  AMERICA_ARGENTINA_LA_RIOJA = &quot;America/Argentina/La_Rioja&quot;,
  AMERICA_ARGENTINA_MENDOZA = &quot;America/Argentina/Mendoza&quot;,
  AMERICA_ARGENTINA_RIO_GALLEGOS = &quot;America/Argentina/Rio_Gallegos&quot;,
  AMERICA_ARGENTINA_SALTA = &quot;America/Argentina/Salta&quot;,
  AMERICA_ARGENTINA_SAN_JUAN = &quot;America/Argentina/San_Juan&quot;,
  AMERICA_ARGENTINA_SAN_LUIS = &quot;America/Argentina/San_Luis&quot;,
  AMERICA_ARGENTINA_TUCUMAN = &quot;America/Argentina/Tucuman&quot;,
  AMERICA_ARGENTINA_USHUAIA = &quot;America/Argentina/Ushuaia&quot;,
  AMERICA_ARUBA = &quot;America/Aruba&quot;,
  AMERICA_ASUNCION = &quot;America/Asuncion&quot;,
  AMERICA_ATIKOKAN = &quot;America/Atikokan&quot;,
  AMERICA_ATKA = &quot;America/Atka&quot;,
  AMERICA_BAHIA = &quot;America/Bahia&quot;,
  AMERICA_BAHIA_BANDERAS = &quot;America/Bahia_Banderas&quot;,
  AMERICA_BARBADOS = &quot;America/Barbados&quot;,
  AMERICA_BELEM = &quot;America/Belem&quot;,
  AMERICA_BELIZE = &quot;America/Belize&quot;,
  AMERICA_BLANC_SABLON = &quot;America/Blanc-Sablon&quot;,
  AMERICA_BOA_VISTA = &quot;America/Boa_Vista&quot;,
  AMERICA_BOGOTA = &quot;America/Bogota&quot;,
  AMERICA_BOISE = &quot;America/Boise&quot;,
  AMERICA_BUENOS_AIRES = &quot;America/Buenos_Aires&quot;,
  AMERICA_CAMBRIDGE_BAY = &quot;America/Cambridge_Bay&quot;,
  AMERICA_CAMPO_GRANDE = &quot;America/Campo_Grande&quot;,
  AMERICA_CANCUN = &quot;America/Cancun&quot;,
  AMERICA_CARACAS = &quot;America/Caracas&quot;,
  AMERICA_CATAMARCA = &quot;America/Catamarca&quot;,
  AMERICA_CAYENNE = &quot;America/Cayenne&quot;,
  AMERICA_CAYMAN = &quot;America/Cayman&quot;,
  AMERICA_CHICAGO = &quot;America/Chicago&quot;,
  AMERICA_CHIHUAHUA = &quot;America/Chihuahua&quot;,
  AMERICA_CIUDAD_JUAREZ = &quot;America/Ciudad_Juarez&quot;,
  AMERICA_CORAL_HARBOUR = &quot;America/Coral_Harbour&quot;,
  AMERICA_CORDOBA = &quot;America/Cordoba&quot;,
  AMERICA_COSTA_RICA = &quot;America/Costa_Rica&quot;,
  AMERICA_COYHAIQUE = &quot;America/Coyhaique&quot;,
  AMERICA_CRESTON = &quot;America/Creston&quot;,
  AMERICA_CUIABA = &quot;America/Cuiaba&quot;,
  AMERICA_CURACAO = &quot;America/Curacao&quot;,
  AMERICA_DANMARKSHAVN = &quot;America/Danmarkshavn&quot;,
  AMERICA_DAWSON = &quot;America/Dawson&quot;,
  AMERICA_DAWSON_CREEK = &quot;America/Dawson_Creek&quot;,
  AMERICA_DENVER = &quot;America/Denver&quot;,
  AMERICA_DETROIT = &quot;America/Detroit&quot;,
  AMERICA_DOMINICA = &quot;America/Dominica&quot;,
  AMERICA_EDMONTON = &quot;America/Edmonton&quot;,
  AMERICA_EIRUNEPE = &quot;America/Eirunepe&quot;,
  AMERICA_EL_SALVADOR = &quot;America/El_Salvador&quot;,
  AMERICA_ENSENADA = &quot;America/Ensenada&quot;,
  AMERICA_FORT_NELSON = &quot;America/Fort_Nelson&quot;,
  AMERICA_FORT_WAYNE = &quot;America/Fort_Wayne&quot;,
  AMERICA_FORTALEZA = &quot;America/Fortaleza&quot;,
  AMERICA_GLACE_BAY = &quot;America/Glace_Bay&quot;,
  AMERICA_GODTHAB = &quot;America/Godthab&quot;,
  AMERICA_GOOSE_BAY = &quot;America/Goose_Bay&quot;,
  AMERICA_GRAND_TURK = &quot;America/Grand_Turk&quot;,
  AMERICA_GRENADA = &quot;America/Grenada&quot;,
  AMERICA_GUADELOUPE = &quot;America/Guadeloupe&quot;,
  AMERICA_GUATEMALA = &quot;America/Guatemala&quot;,
  AMERICA_GUAYAQUIL = &quot;America/Guayaquil&quot;,
  AMERICA_GUYANA = &quot;America/Guyana&quot;,
  AMERICA_HALIFAX = &quot;America/Halifax&quot;,
  AMERICA_HAVANA = &quot;America/Havana&quot;,
  AMERICA_HERMOSILLO = &quot;America/Hermosillo&quot;,
  AMERICA_INDIANA_INDIANAPOLIS = &quot;America/Indiana/Indianapolis&quot;,
  AMERICA_INDIANA_KNOX = &quot;America/Indiana/Knox&quot;,
  AMERICA_INDIANA_MARENGO = &quot;America/Indiana/Marengo&quot;,
  AMERICA_INDIANA_PETERSBURG = &quot;America/Indiana/Petersburg&quot;,
  AMERICA_INDIANA_TELL_CITY = &quot;America/Indiana/Tell_City&quot;,
  AMERICA_INDIANA_VEVAY = &quot;America/Indiana/Vevay&quot;,
  AMERICA_INDIANA_VINCENNES = &quot;America/Indiana/Vincennes&quot;,
  AMERICA_INDIANA_WINAMAC = &quot;America/Indiana/Winamac&quot;,
  AMERICA_INDIANAPOLIS = &quot;America/Indianapolis&quot;,
  AMERICA_INUVIK = &quot;America/Inuvik&quot;,
  AMERICA_IQALUIT = &quot;America/Iqaluit&quot;,
  AMERICA_JAMAICA = &quot;America/Jamaica&quot;,
  AMERICA_JUJUY = &quot;America/Jujuy&quot;,
  AMERICA_JUNEAU = &quot;America/Juneau&quot;,
  AMERICA_KENTUCKY_LOUISVILLE = &quot;America/Kentucky/Louisville&quot;,
  AMERICA_KENTUCKY_MONTICELLO = &quot;America/Kentucky/Monticello&quot;,
  AMERICA_KNOX_IN = &quot;America/Knox_IN&quot;,
  AMERICA_KRALENDIJK = &quot;America/Kralendijk&quot;,
  AMERICA_LA_PAZ = &quot;America/La_Paz&quot;,
  AMERICA_LIMA = &quot;America/Lima&quot;,
  AMERICA_LOS_ANGELES = &quot;America/Los_Angeles&quot;,
  AMERICA_LOUISVILLE = &quot;America/Louisville&quot;,
  AMERICA_LOWER_PRINCES = &quot;America/Lower_Princes&quot;,
  AMERICA_MACEIO = &quot;America/Maceio&quot;,
  AMERICA_MANAGUA = &quot;America/Managua&quot;,
  AMERICA_MANAUS = &quot;America/Manaus&quot;,
  AMERICA_MARIGOT = &quot;America/Marigot&quot;,
  AMERICA_MARTINIQUE = &quot;America/Martinique&quot;,
  AMERICA_MATAMOROS = &quot;America/Matamoros&quot;,
  AMERICA_MAZATLAN = &quot;America/Mazatlan&quot;,
  AMERICA_MENDOZA = &quot;America/Mendoza&quot;,
  AMERICA_MENOMINEE = &quot;America/Menominee&quot;,
  AMERICA_MERIDA = &quot;America/Merida&quot;,
  AMERICA_METLAKATLA = &quot;America/Metlakatla&quot;,
  AMERICA_MEXICO_CITY = &quot;America/Mexico_City&quot;,
  AMERICA_MIQUELON = &quot;America/Miquelon&quot;,
  AMERICA_MONCTON = &quot;America/Moncton&quot;,
  AMERICA_MONTERREY = &quot;America/Monterrey&quot;,
  AMERICA_MONTEVIDEO = &quot;America/Montevideo&quot;,
  AMERICA_MONTREAL = &quot;America/Montreal&quot;,
  AMERICA_MONTSERRAT = &quot;America/Montserrat&quot;,
  AMERICA_NASSAU = &quot;America/Nassau&quot;,
  AMERICA_NEW_YORK = &quot;America/New_York&quot;,
  AMERICA_NIPIGON = &quot;America/Nipigon&quot;,
  AMERICA_NOME = &quot;America/Nome&quot;,
  AMERICA_NORONHA = &quot;America/Noronha&quot;,
  AMERICA_NORTH_DAKOTA_BEULAH = &quot;America/North_Dakota/Beulah&quot;,
  AMERICA_NORTH_DAKOTA_CENTER = &quot;America/North_Dakota/Center&quot;,
  AMERICA_NORTH_DAKOTA_NEW_SALEM = &quot;America/North_Dakota/New_Salem&quot;,
  AMERICA_NUUK = &quot;America/Nuuk&quot;,
  AMERICA_OJINAGA = &quot;America/Ojinaga&quot;,
  AMERICA_PANAMA = &quot;America/Panama&quot;,
  AMERICA_PANGNIRTUNG = &quot;America/Pangnirtung&quot;,
  AMERICA_PARAMARIBO = &quot;America/Paramaribo&quot;,
  AMERICA_PHOENIX = &quot;America/Phoenix&quot;,
  AMERICA_PORT_AU_PRINCE = &quot;America/Port-au-Prince&quot;,
  AMERICA_PORT_OF_SPAIN = &quot;America/Port_of_Spain&quot;,
  AMERICA_PORTO_ACRE = &quot;America/Porto_Acre&quot;,
  AMERICA_PORTO_VELHO = &quot;America/Porto_Velho&quot;,
  AMERICA_PUERTO_RICO = &quot;America/Puerto_Rico&quot;,
  AMERICA_PUNTA_ARENAS = &quot;America/Punta_Arenas&quot;,
  AMERICA_RAINY_RIVER = &quot;America/Rainy_River&quot;,
  AMERICA_RANKIN_INLET = &quot;America/Rankin_Inlet&quot;,
  AMERICA_RECIFE = &quot;America/Recife&quot;,
  AMERICA_REGINA = &quot;America/Regina&quot;,
  AMERICA_RESOLUTE = &quot;America/Resolute&quot;,
  AMERICA_RIO_BRANCO = &quot;America/Rio_Branco&quot;,
  AMERICA_ROSARIO = &quot;America/Rosario&quot;,
  AMERICA_SANTA_ISABEL = &quot;America/Santa_Isabel&quot;,
  AMERICA_SANTAREM = &quot;America/Santarem&quot;,
  AMERICA_SANTIAGO = &quot;America/Santiago&quot;,
  AMERICA_SANTO_DOMINGO = &quot;America/Santo_Domingo&quot;,
  AMERICA_SAO_PAULO = &quot;America/Sao_Paulo&quot;,
  AMERICA_SCORESBYSUND = &quot;America/Scoresbysund&quot;,
  AMERICA_SHIPROCK = &quot;America/Shiprock&quot;,
  AMERICA_SITKA = &quot;America/Sitka&quot;,
  AMERICA_ST_BARTHELEMY = &quot;America/St_Barthelemy&quot;,
  AMERICA_ST_JOHNS = &quot;America/St_Johns&quot;,
  AMERICA_ST_KITTS = &quot;America/St_Kitts&quot;,
  AMERICA_ST_LUCIA = &quot;America/St_Lucia&quot;,
  AMERICA_ST_THOMAS = &quot;America/St_Thomas&quot;,
  AMERICA_ST_VINCENT = &quot;America/St_Vincent&quot;,
  AMERICA_SWIFT_CURRENT = &quot;America/Swift_Current&quot;,
  AMERICA_TEGUCIGALPA = &quot;America/Tegucigalpa&quot;,
  AMERICA_THULE = &quot;America/Thule&quot;,
  AMERICA_THUNDER_BAY = &quot;America/Thunder_Bay&quot;,
  AMERICA_TIJUANA = &quot;America/Tijuana&quot;,
  AMERICA_TORONTO = &quot;America/Toronto&quot;,
  AMERICA_TORTOLA = &quot;America/Tortola&quot;,
  AMERICA_VANCOUVER = &quot;America/Vancouver&quot;,
  AMERICA_VIRGIN = &quot;America/Virgin&quot;,
  AMERICA_WHITEHORSE = &quot;America/Whitehorse&quot;,
  AMERICA_WINNIPEG = &quot;America/Winnipeg&quot;,
  AMERICA_YAKUTAT = &quot;America/Yakutat&quot;,
  AMERICA_YELLOWKNIFE = &quot;America/Yellowknife&quot;,
  ANTARCTICA_CASEY = &quot;Antarctica/Casey&quot;,
  ANTARCTICA_DAVIS = &quot;Antarctica/Davis&quot;,
  ANTARCTICA_DUMONTDURVILLE = &quot;Antarctica/DumontDUrville&quot;,
  ANTARCTICA_MACQUARIE = &quot;Antarctica/Macquarie&quot;,
  ANTARCTICA_MAWSON = &quot;Antarctica/Mawson&quot;,
  ANTARCTICA_MCMURDO = &quot;Antarctica/McMurdo&quot;,
  ANTARCTICA_PALMER = &quot;Antarctica/Palmer&quot;,
  ANTARCTICA_ROTHERA = &quot;Antarctica/Rothera&quot;,
  ANTARCTICA_SOUTH_POLE = &quot;Antarctica/South_Pole&quot;,
  ANTARCTICA_SYOWA = &quot;Antarctica/Syowa&quot;,
  ANTARCTICA_TROLL = &quot;Antarctica/Troll&quot;,
  ANTARCTICA_VOSTOK = &quot;Antarctica/Vostok&quot;,
  ARCTIC_LONGYEARBYEN = &quot;Arctic/Longyearbyen&quot;,
  ASIA_ADEN = &quot;Asia/Aden&quot;,
  ASIA_ALMATY = &quot;Asia/Almaty&quot;,
  ASIA_AMMAN = &quot;Asia/Amman&quot;,
  ASIA_ANADYR = &quot;Asia/Anadyr&quot;,
  ASIA_AQTAU = &quot;Asia/Aqtau&quot;,
  ASIA_AQTOBE = &quot;Asia/Aqtobe&quot;,
  ASIA_ASHGABAT = &quot;Asia/Ashgabat&quot;,
  ASIA_ASHKHABAD = &quot;Asia/Ashkhabad&quot;,
  ASIA_ATYRAU = &quot;Asia/Atyrau&quot;,
  ASIA_BAGHDAD = &quot;Asia/Baghdad&quot;,
  ASIA_BAHRAIN = &quot;Asia/Bahrain&quot;,
  ASIA_BAKU = &quot;Asia/Baku&quot;,
  ASIA_BANGKOK = &quot;Asia/Bangkok&quot;,
  ASIA_BARNAUL = &quot;Asia/Barnaul&quot;,
  ASIA_BEIRUT = &quot;Asia/Beirut&quot;,
  ASIA_BISHKEK = &quot;Asia/Bishkek&quot;,
  ASIA_BRUNEI = &quot;Asia/Brunei&quot;,
  ASIA_CALCUTTA = &quot;Asia/Calcutta&quot;,
  ASIA_CHITA = &quot;Asia/Chita&quot;,
  ASIA_CHOIBALSAN = &quot;Asia/Choibalsan&quot;,
  ASIA_CHONGQING = &quot;Asia/Chongqing&quot;,
  ASIA_CHUNGKING = &quot;Asia/Chungking&quot;,
  ASIA_COLOMBO = &quot;Asia/Colombo&quot;,
  ASIA_DACCA = &quot;Asia/Dacca&quot;,
  ASIA_DAMASCUS = &quot;Asia/Damascus&quot;,
  ASIA_DHAKA = &quot;Asia/Dhaka&quot;,
  ASIA_DILI = &quot;Asia/Dili&quot;,
  ASIA_DUBAI = &quot;Asia/Dubai&quot;,
  ASIA_DUSHANBE = &quot;Asia/Dushanbe&quot;,
  ASIA_FAMAGUSTA = &quot;Asia/Famagusta&quot;,
  ASIA_GAZA = &quot;Asia/Gaza&quot;,
  ASIA_HARBIN = &quot;Asia/Harbin&quot;,
  ASIA_HEBRON = &quot;Asia/Hebron&quot;,
  ASIA_HO_CHI_MINH = &quot;Asia/Ho_Chi_Minh&quot;,
  ASIA_HONG_KONG = &quot;Asia/Hong_Kong&quot;,
  ASIA_HOVD = &quot;Asia/Hovd&quot;,
  ASIA_IRKUTSK = &quot;Asia/Irkutsk&quot;,
  ASIA_ISTANBUL = &quot;Asia/Istanbul&quot;,
  ASIA_JAKARTA = &quot;Asia/Jakarta&quot;,
  ASIA_JAYAPURA = &quot;Asia/Jayapura&quot;,
  ASIA_JERUSALEM = &quot;Asia/Jerusalem&quot;,
  ASIA_KABUL = &quot;Asia/Kabul&quot;,
  ASIA_KAMCHATKA = &quot;Asia/Kamchatka&quot;,
  ASIA_KARACHI = &quot;Asia/Karachi&quot;,
  ASIA_KASHGAR = &quot;Asia/Kashgar&quot;,
  ASIA_KATHMANDU = &quot;Asia/Kathmandu&quot;,
  ASIA_KATMANDU = &quot;Asia/Katmandu&quot;,
  ASIA_KHANDYGA = &quot;Asia/Khandyga&quot;,
  ASIA_KOLKATA = &quot;Asia/Kolkata&quot;,
  ASIA_KRASNOYARSK = &quot;Asia/Krasnoyarsk&quot;,
  ASIA_KUALA_LUMPUR = &quot;Asia/Kuala_Lumpur&quot;,
  ASIA_KUCHING = &quot;Asia/Kuching&quot;,
  ASIA_KUWAIT = &quot;Asia/Kuwait&quot;,
  ASIA_MACAO = &quot;Asia/Macao&quot;,
  ASIA_MACAU = &quot;Asia/Macau&quot;,
  ASIA_MAGADAN = &quot;Asia/Magadan&quot;,
  ASIA_MAKASSAR = &quot;Asia/Makassar&quot;,
  ASIA_MANILA = &quot;Asia/Manila&quot;,
  ASIA_MUSCAT = &quot;Asia/Muscat&quot;,
  ASIA_NICOSIA = &quot;Asia/Nicosia&quot;,
  ASIA_NOVOKUZNETSK = &quot;Asia/Novokuznetsk&quot;,
  ASIA_NOVOSIBIRSK = &quot;Asia/Novosibirsk&quot;,
  ASIA_OMSK = &quot;Asia/Omsk&quot;,
  ASIA_ORAL = &quot;Asia/Oral&quot;,
  ASIA_PHNOM_PENH = &quot;Asia/Phnom_Penh&quot;,
  ASIA_PONTIANAK = &quot;Asia/Pontianak&quot;,
  ASIA_PYONGYANG = &quot;Asia/Pyongyang&quot;,
  ASIA_QATAR = &quot;Asia/Qatar&quot;,
  ASIA_QOSTANAY = &quot;Asia/Qostanay&quot;,
  ASIA_QYZYLORDA = &quot;Asia/Qyzylorda&quot;,
  ASIA_RANGOON = &quot;Asia/Rangoon&quot;,
  ASIA_RIYADH = &quot;Asia/Riyadh&quot;,
  ASIA_SAIGON = &quot;Asia/Saigon&quot;,
  ASIA_SAKHALIN = &quot;Asia/Sakhalin&quot;,
  ASIA_SAMARKAND = &quot;Asia/Samarkand&quot;,
  ASIA_SEOUL = &quot;Asia/Seoul&quot;,
  ASIA_SHANGHAI = &quot;Asia/Shanghai&quot;,
  ASIA_SINGAPORE = &quot;Asia/Singapore&quot;,
  ASIA_SREDNEKOLYMSK = &quot;Asia/Srednekolymsk&quot;,
  ASIA_TAIPEI = &quot;Asia/Taipei&quot;,
  ASIA_TASHKENT = &quot;Asia/Tashkent&quot;,
  ASIA_TBILISI = &quot;Asia/Tbilisi&quot;,
  ASIA_TEHRAN = &quot;Asia/Tehran&quot;,
  ASIA_TEL_AVIV = &quot;Asia/Tel_Aviv&quot;,
  ASIA_THIMBU = &quot;Asia/Thimbu&quot;,
  ASIA_THIMPHU = &quot;Asia/Thimphu&quot;,
  ASIA_TOKYO = &quot;Asia/Tokyo&quot;,
  ASIA_TOMSK = &quot;Asia/Tomsk&quot;,
  ASIA_UJUNG_PANDANG = &quot;Asia/Ujung_Pandang&quot;,
  ASIA_ULAANBAATAR = &quot;Asia/Ulaanbaatar&quot;,
  ASIA_ULAN_BATOR = &quot;Asia/Ulan_Bator&quot;,
  ASIA_URUMQI = &quot;Asia/Urumqi&quot;,
  ASIA_UST_NERA = &quot;Asia/Ust-Nera&quot;,
  ASIA_VIENTIANE = &quot;Asia/Vientiane&quot;,
  ASIA_VLADIVOSTOK = &quot;Asia/Vladivostok&quot;,
  ASIA_YAKUTSK = &quot;Asia/Yakutsk&quot;,
  ASIA_YANGON = &quot;Asia/Yangon&quot;,
  ASIA_YEKATERINBURG = &quot;Asia/Yekaterinburg&quot;,
  ASIA_YEREVAN = &quot;Asia/Yerevan&quot;,
  ATLANTIC_AZORES = &quot;Atlantic/Azores&quot;,
  ATLANTIC_BERMUDA = &quot;Atlantic/Bermuda&quot;,
  ATLANTIC_CANARY = &quot;Atlantic/Canary&quot;,
  ATLANTIC_CAPE_VERDE = &quot;Atlantic/Cape_Verde&quot;,
  ATLANTIC_FAEROE = &quot;Atlantic/Faeroe&quot;,
  ATLANTIC_FAROE = &quot;Atlantic/Faroe&quot;,
  ATLANTIC_JAN_MAYEN = &quot;Atlantic/Jan_Mayen&quot;,
  ATLANTIC_MADEIRA = &quot;Atlantic/Madeira&quot;,
  ATLANTIC_REYKJAVIK = &quot;Atlantic/Reykjavik&quot;,
  ATLANTIC_SOUTH_GEORGIA = &quot;Atlantic/South_Georgia&quot;,
  ATLANTIC_ST_HELENA = &quot;Atlantic/St_Helena&quot;,
  ATLANTIC_STANLEY = &quot;Atlantic/Stanley&quot;,
  AUSTRALIA_ACT = &quot;Australia/ACT&quot;,
  AUSTRALIA_ADELAIDE = &quot;Australia/Adelaide&quot;,
  AUSTRALIA_BRISBANE = &quot;Australia/Brisbane&quot;,
  AUSTRALIA_BROKEN_HILL = &quot;Australia/Broken_Hill&quot;,
  AUSTRALIA_CANBERRA = &quot;Australia/Canberra&quot;,
  AUSTRALIA_CURRIE = &quot;Australia/Currie&quot;,
  AUSTRALIA_DARWIN = &quot;Australia/Darwin&quot;,
  AUSTRALIA_EUCLA = &quot;Australia/Eucla&quot;,
  AUSTRALIA_HOBART = &quot;Australia/Hobart&quot;,
  AUSTRALIA_LHI = &quot;Australia/LHI&quot;,
  AUSTRALIA_LINDEMAN = &quot;Australia/Lindeman&quot;,
  AUSTRALIA_LORD_HOWE = &quot;Australia/Lord_Howe&quot;,
  AUSTRALIA_MELBOURNE = &quot;Australia/Melbourne&quot;,
  AUSTRALIA_NORTH = &quot;Australia/North&quot;,
  AUSTRALIA_NSW = &quot;Australia/NSW&quot;,
  AUSTRALIA_PERTH = &quot;Australia/Perth&quot;,
  AUSTRALIA_QUEENSLAND = &quot;Australia/Queensland&quot;,
  AUSTRALIA_SOUTH = &quot;Australia/South&quot;,
  AUSTRALIA_SYDNEY = &quot;Australia/Sydney&quot;,
  AUSTRALIA_TASMANIA = &quot;Australia/Tasmania&quot;,
  AUSTRALIA_VICTORIA = &quot;Australia/Victoria&quot;,
  AUSTRALIA_WEST = &quot;Australia/West&quot;,
  AUSTRALIA_YANCOWINNA = &quot;Australia/Yancowinna&quot;,
  BRAZIL_ACRE = &quot;Brazil/Acre&quot;,
  BRAZIL_DENORONHA = &quot;Brazil/DeNoronha&quot;,
  BRAZIL_EAST = &quot;Brazil/East&quot;,
  BRAZIL_WEST = &quot;Brazil/West&quot;,
  CANADA_ATLANTIC = &quot;Canada/Atlantic&quot;,
  CANADA_CENTRAL = &quot;Canada/Central&quot;,
  CANADA_EASTERN = &quot;Canada/Eastern&quot;,
  CANADA_MOUNTAIN = &quot;Canada/Mountain&quot;,
  CANADA_NEWFOUNDLAND = &quot;Canada/Newfoundland&quot;,
  CANADA_PACIFIC = &quot;Canada/Pacific&quot;,
  CANADA_SASKATCHEWAN = &quot;Canada/Saskatchewan&quot;,
  CANADA_YUKON = &quot;Canada/Yukon&quot;,
  CET = &quot;CET&quot;,
  CHILE_CONTINENTAL = &quot;Chile/Continental&quot;,
  CHILE_EASTERISLAND = &quot;Chile/EasterIsland&quot;,
}</file><file path="be/config/env.ts">import dotenv from &quot;dotenv&quot;;
import path from &quot;node:path&quot;;
‚ãÆ----
const getOptional = (key: string): string | undefined
const getRequired = (key: string): string
‚ãÆ----
get baseUrl(): string
‚ãÆ----
// ============================================================================
// URLs Configuration
// ============================================================================
‚ãÆ----
get api(): string
get authCallback(): string
get frontend(): string
‚ãÆ----
// In production, use hardcoded URL. In dev, use localhost.
‚ãÆ----
// ============================================================================
// Supabase Configuration
// ============================================================================
‚ãÆ----
get isEnabled(): boolean
‚ãÆ----
get useWebhook(): boolean</file><file path="be/config/index.ts"></file><file path="be/controllers/google-calendar/acl-controller.ts">import type { Request, Response } from &quot;express&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;</file><file path="be/controllers/google-calendar/calendar-controller.ts">import type { Request, Response } from &quot;express&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import type { calendar_v3 } from &quot;googleapis&quot;
import { updateUserSupabaseCalendarCategories } from &quot;@/utils/calendar/update-categories&quot;</file><file path="be/controllers/google-calendar/calendar-list-controller.ts">import type { Request, Response } from &quot;express&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;</file><file path="be/controllers/google-calendar/channels-controller.ts">import type { Request, Response } from &quot;express&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;</file><file path="be/controllers/google-calendar/events-controller.ts">import { ACTION, REQUEST_CONFIG_BASE, STATUS_RESPONSE } from &quot;@/config&quot;;
import type { Request, Response } from &quot;express&quot;;
import { eventsHandler, formatDate } from &quot;@/utils&quot;;
import { getCachedInsights, setCachedInsights } from &quot;@/utils/cache/insights-cache&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { calculateInsightsMetrics } from &quot;@/utils/ai/insights-calculator&quot;;
import { quickAddWithOrchestrator } from &quot;@/utils/ai/quick-add-orchestrator&quot;;
import { fetchCredentialsByEmail } from &quot;@/utils/auth/get-user-calendar-tokens&quot;;
import { generateInsightsWithRetry } from &quot;@/ai-agents/insights-generator&quot;;
import { getEvents } from &quot;@/utils/calendar/get-events&quot;;
import { initUserSupabaseCalendarWithTokensAndUpdateTokens } from &quot;@/utils/calendar/init&quot;;
import { findRescheduleSuggestions, applyReschedule } from &quot;@/utils/calendar/reschedule&quot;;</file><file path="be/controllers/users/auth-controller.ts">import type { Request, Response } from &quot;express&quot;
import { PROVIDERS, STATUS_RESPONSE, SUPABASE } from &quot;@/config&quot;
import {
  clearAuthCookies,
  setAuthCookies,
} from &quot;@/utils/auth/cookie-utils&quot;
import { supabaseThirdPartySignInOrSignUp } from &quot;@/utils/auth&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;</file><file path="be/controllers/users/google-integration-controller.ts">import type { Request, Response } from &quot;express&quot;;
import {
  ACCESS_TOKEN_COOKIE,
  REFRESH_TOKEN_COOKIE,
  setAuthCookies,
} from &quot;@/utils/auth/cookie-utils&quot;;
import {
  OAUTH2CLIENT,
  PROVIDERS,
  STATUS_RESPONSE,
  SUPABASE,
  env,
} from &quot;@/config&quot;;
import { generateGoogleAuthUrl } from &quot;@/utils/auth&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { msToIso } from &quot;@/utils/date/timestamp-utils&quot;;
import { syncUserCalendarsAfterOAuth } from &quot;@/utils/calendar/sync-calendars-after-oauth&quot;;
import {
  refreshSupabaseSession,
  validateSupabaseToken,
} from &quot;@/utils/auth/supabase-token&quot;;
async function checkExistingSessionAndRedirect(
  res: Response,
  accessToken: string,
  refreshToken: string | undefined,
  frontendUrl: string,
): Promise&lt;boolean&gt;</file><file path="be/controllers/users/index.ts"></file><file path="be/controllers/users/profile-controller.ts">import type { Request, Response } from &quot;express&quot;
import { STATUS_RESPONSE, SUPABASE } from &quot;@/config&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { webConversation } from &quot;@/utils/conversation/WebConversationAdapter&quot;
import { unifiedContextStore } from &quot;@/shared/context&quot;</file><file path="be/controllers/admin-controller.ts">import type { Request, Response } from &quot;express&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { parsePaginationParams, parseSortParams } from &quot;@/utils/http/pagination&quot;;
import { requireUserId } from &quot;@/utils/auth/require-user&quot;;
‚ãÆ----
import type { AdminRequest } from &quot;@/middlewares/admin-auth&quot;;
import type { AdminUserListParams, UserRole, UserStatus } from &quot;@/types&quot;;</file><file path="be/controllers/agent-profiles-controller.ts">import type { Request, Response } from &quot;express&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import { requireUserId } from &quot;@/utils/auth/require-user&quot;
‚ãÆ----
import {
  AGENT_PROFILES,
  getAgentProfile,
  getProfilesForTier,
  DEFAULT_AGENT_PROFILE_ID,
  type AgentTier,
} from &quot;@/shared/orchestrator/agent-profiles&quot;
interface AgentProfileDTO {
  id: string
  displayName: string
  tagline: string
  description: string
  tier: AgentTier
  capabilities: string[]
  provider: string
  voice: {
    style: string
    speed: number
  }
}
function toDTO(profileId: string): AgentProfileDTO</file><file path="be/controllers/chat-controller.ts">import { InputGuardrailTripwireTriggered, run } from &quot;@openai/agents&quot;;
import type { Request, Response } from &quot;express&quot;;
import { webConversation } from &quot;@/utils/conversation/WebConversationAdapter&quot;;
import {
  generateConversationTitle,
  summarizeMessages,
} from &quot;@/telegram-bot/utils/summarize&quot;;
import {
  getWebRelevantContext,
  storeWebEmbeddingAsync,
  deleteAllWebEmbeddings,
} from &quot;@/utils/web-embeddings&quot;;
import { unifiedContextStore } from &quot;@/shared/context&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import type { AgentContext } from &quot;@/ai-agents/tool-registry&quot;;
import { ORCHESTRATOR_AGENT } from &quot;@/ai-agents&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import { createAgentSession } from &quot;@/ai-agents/sessions&quot;;
import { getAllyBrainPreference } from &quot;@/services/user-preferences-service&quot;;
‚ãÆ----
type ChatRequest = {
  message: string;
  history?: Array&lt;{ role: &quot;user&quot; | &quot;assistant&quot;; content: string }&gt;;
};
type PromptParams = {
  message: string;
  conversationContext: string;
  semanticContext: string;
  userEmail: string;
  userId: string;
};
async function buildChatPromptWithContext(
  params: PromptParams,
): Promise&lt;string&gt;
‚ãÆ----
type ContinueConversationRequest = {
  message: string;
};</file><file path="be/controllers/chat-stream-controller.ts">import type { Request, Response } from &quot;express&quot;;
import {
  endSSEStream,
  setupSSEHeaders,
  startHeartbeat,
  writeAgentSwitch,
  writeDone,
  writeError,
  writeTextDelta,
  writeTitleGenerated,
  writeToolComplete,
  writeToolStart,
} from &quot;@/utils/sse&quot;;
import { generateConversationTitle, summarizeMessages } from &quot;@/telegram-bot/utils/summarize&quot;;
import { getWebRelevantContext, storeWebEmbeddingAsync } from &quot;@/utils/web-embeddings&quot;;
import type { AgentContext } from &quot;@/ai-agents/tool-registry&quot;;
import { ORCHESTRATOR_AGENT } from &quot;@/ai-agents&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import { createAgentSession } from &quot;@/ai-agents/sessions&quot;;
import { getAllyBrainPreference } from &quot;@/services/user-preferences-service&quot;;
import { run, type RunRawModelStreamEvent, type RunAgentUpdatedStreamEvent, type RunItemStreamEvent } from &quot;@openai/agents&quot;;
import { sendR } from &quot;@/utils/http&quot;;
import { webConversation } from &quot;@/utils/conversation/WebConversationAdapter&quot;;
import { unifiedContextStore } from &quot;@/shared/context&quot;;
import { createTextAgent, runTextAgent, type TextAgentConfig } from &quot;@/shared/orchestrator&quot;;
import { getAgentProfile, DEFAULT_AGENT_PROFILE_ID } from &quot;@/shared/orchestrator&quot;;
import type { ImageContent } from &quot;@/shared/llm&quot;;
‚ãÆ----
type StreamChatRequest = {
  message: string;
  profileId?: string;
  images?: ImageContent[];
};
type PromptParams = {
  message: string;
  conversationContext: string;
  semanticContext: string;
  userEmail: string;
  userId: string;
  hasImages?: boolean;
  imageCount?: number;
};
async function buildChatPromptWithContext(params: PromptParams): Promise&lt;string&gt;
async function handleOpenAIStreaming(res: Response, userId: string, userEmail: string, conversationId: string, fullPrompt: string): Promise&lt;string&gt;
async function handleMultiProviderStreaming(res: Response, agentConfig: TextAgentConfig, fullPrompt: string, userEmail: string, images?: ImageContent[]): Promise&lt;string&gt;
async function handleStreamingResponse(
  res: Response,
  userId: string,
  userEmail: string,
  message: string,
  conversationId: string,
  isNewConversation: boolean,
  fullPrompt: string,
  profileId: string = DEFAULT_AGENT_PROFILE_ID,
  images?: ImageContent[]
): Promise&lt;void&gt;
const streamChat = async (req: Request&lt;unknown, unknown, StreamChatRequest&gt;, res: Response): Promise&lt;void&gt; =&gt;
const streamContinueConversation = async (req: Request&lt;</file><file path="be/controllers/contact-controller.ts">import type { Request, Response } from &quot;express&quot;;
import { STATUS_RESPONSE, env } from &quot;@/config&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { Resend } from &quot;resend&quot;;
import { isEmail } from &quot;validator&quot;;
import { logger } from &quot;@/utils/logger&quot;;
‚ãÆ----
type MulterFile = {
  fieldname: string;
  originalname: string;
  encoding: string;
  mimetype: string;
  buffer: Buffer;
  size: number;
};
type ContactFormRequest = {
  name: string;
  email: string;
  subject: string;
  message: string;
};
type ResendInboundEmailPayload = {
  type: &quot;email.received&quot;;
  created_at: string;
  data: {
    email_id: string;
    from: string;
    to: string[];
    subject: string;
    text?: string;
    html?: string;
    attachments?: Array&lt;{
      filename: string;
      content_type: string;
      content: string;
    }&gt;;
    headers: Record&lt;string, string&gt;;
  };
};
type EmailTemplateData = {
  name: string;
  email: string;
  subject: string;
  message: string;
  attachmentCount: number;
};
const buildEmailHtml = (data: EmailTemplateData)
const validateContactForm = (formData: ContactFormRequest): string | null =&gt;
‚ãÆ----
const verifyWebhookSignature = (req: Request): boolean =&gt;</file><file path="be/controllers/cron-controller.ts">import type { Request, Response } from &quot;express&quot;;
import { STATUS_RESPONSE, env, SUPABASE } from &quot;@/config&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { Resend } from &quot;resend&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { userRepository } from &quot;@/utils/repositories/UserRepository&quot;;
import { initUserSupabaseCalendarWithTokensAndUpdateTokens } from &quot;@/utils/calendar/init&quot;;
import { fetchAllCalendarEvents, formatSingleEvent, type FormattedEvent } from &quot;@/utils/calendar/get-events&quot;;
import type { DailyBriefingPreference } from &quot;@/services/user-preferences-service&quot;;
‚ãÆ----
type UserWithBriefingPreference = {
  id: string;
  email: string;
  display_name: string | null;
  first_name: string | null;
  preferences: {
    daily_briefing?: DailyBriefingPreference;
  } | null;
};
type BriefingResult = {
  userId: string;
  email: string;
  status: &quot;sent&quot; | &quot;skipped&quot; | &quot;error&quot;;
  reason?: string;
};
function isWithinTimeWindow(
  targetTime: string,
  timezone: string,
  windowMinutes: number = 5
): boolean
function getTodayInTimezone(timezone: string): string
function getDayBoundsInTimezone(timezone: string):
function getTimezoneOffsetMinutes(timezone: string): number
function buildBriefingEmailHtml(
  userName: string,
  dateStr: string,
  events: FormattedEvent[]
): string
/**
 * Build plain text version of the briefing email
 */
function buildBriefingEmailText(
  userName: string,
  dateStr: string,
  events: FormattedEvent[]
): string
function getGreeting(): string
async function updateLastSentDate(userId: string, date: string): Promise&lt;void&gt;
async function processUserBriefing(user: UserWithBriefingPreference): Promise&lt;BriefingResult&gt;</file><file path="be/controllers/payment-controller.ts">import type { Request, Response } from &quot;express&quot;
import crypto from &quot;node:crypto&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { STATUS_RESPONSE, env } from &quot;@/config&quot;
import { requireUserId, requireUser } from &quot;@/utils/auth&quot;
import {
  isLemonSqueezyEnabled,
  LEMONSQUEEZY_CONFIG,
} from &quot;@/config/clients/lemonsqueezy&quot;
import {
  getActivePlans,
  getUserSubscription,
  checkUserAccess,
  createCheckoutSession,
  createCreditPackCheckout,
  getCustomerPortalUrl,
  cancelSubscription,
  updateSubscriptionFromWebhook,
  isWebhookEventProcessed,
  recordWebhookEvent,
  handleOrderCreated,
  handleSubscriptionCreated,
  handleSubscriptionPaymentSuccess,
  handleSubscriptionPaymentFailed,
  processMoneyBackRefund,
  ensureFreePlan,
  upgradeSubscriptionPlan,
  getBillingOverview,
  type PlanSlug,
} from &quot;@/services/lemonsqueezy-service&quot;
‚ãÆ----
function verifyWebhookSignature(rawBody: Buffer, signature: string, secret: string): boolean
export const handleWebhook = async (req: Request, res: Response): Promise&lt;void&gt; =&gt;</file><file path="be/controllers/risc-controller.ts">import type { Request, Response } from &quot;express&quot;;
import { STATUS_RESPONSE, env } from &quot;@/config&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { verifyRiscToken } from &quot;@/utils/auth/risc-jwt-verifier&quot;;
import { processRiscEvents } from &quot;@/utils/auth/risc-event-handlers&quot;;</file><file path="be/controllers/user-preferences-controller.ts">import type { Request, Response } from &quot;express&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import { requireUserId } from &quot;@/utils/auth/require-user&quot;;
‚ãÆ----
import type { PreferenceKey } from &quot;@/services/user-preferences-service&quot;;</file><file path="be/controllers/voice-controller.ts">import type { Request, Response } from &quot;express&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { transcribeAudio } from &quot;@/utils/ai/voice-transcription&quot;
import {
  generateSpeech,
  isValidVoice,
  DEFAULT_VOICE,
  type TTSVoice,
} from &quot;@/utils/ai/text-to-speech&quot;
import { getVoicePreference } from &quot;@/services/user-preferences-service&quot;
import {
  DEFAULT_AGENT_PROFILE_ID,
  getProfilesForTier,
  formatProfileForClient,
  type AgentTier,
} from &quot;@/shared/orchestrator&quot;</file><file path="be/controllers/whatsapp-controller.ts">import type { Request, Response } from &quot;express&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import { verifyWebhookSubscription } from &quot;@/whatsapp-bot/services/webhook-security&quot;
import { handleIncomingMessage } from &quot;@/whatsapp-bot/handlers/message-handler&quot;
import { isWhatsAppConfigured, getWhatsAppStatus } from &quot;@/whatsapp-bot/init-whatsapp&quot;
import type {
  WhatsAppWebhookPayload,
  WhatsAppIncomingMessage,
  WhatsAppContact,
  WhatsAppMessageStatus,
} from &quot;@/whatsapp-bot/types&quot;
const verifyWebhook = (req: Request, res: Response): void =&gt;
const handleWebhook = async (req: Request, res: Response): Promise&lt;void&gt; =&gt;
const processMessage = async (
  message: WhatsAppIncomingMessage,
  contact?: WhatsAppContact
): Promise&lt;void&gt; =&gt;
const handleMessageStatus = (status: WhatsAppMessageStatus): void =&gt;
const getStatus = (_req: Request, res: Response): void =&gt;</file><file path="be/middlewares/admin-auth.ts">import type { NextFunction, Request, Response } from &quot;express&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { SUPABASE, STATUS_RESPONSE } from &quot;@/config&quot;;
import type { UserRole } from &quot;@/types&quot;;
export const adminAuth = (allowedRoles: UserRole[] = [&quot;admin&quot;]) =&gt;
export interface AdminRequest extends Request {
  userRole?: UserRole;
}</file><file path="be/middlewares/admin-validation.ts">import { z } from &quot;zod&quot;;
‚ãÆ----
export type UpdateUserStatusInput = z.infer&lt;typeof updateUserStatusSchema&gt;;
export type GrantCreditsInput = z.infer&lt;typeof grantCreditsSchema&gt;;
export type UpdateUserRoleInput = z.infer&lt;typeof updateUserRoleSchema&gt;;
export type AdminUserListQuery = z.infer&lt;typeof adminUserListQuerySchema&gt;;
export type AdminPaymentHistoryQuery = z.infer&lt;
  typeof adminPaymentHistoryQuerySchema
&gt;;
export type AdminAuditLogQuery = z.infer&lt;typeof adminAuditLogQuerySchema&gt;;</file><file path="be/middlewares/auth-handler.ts">import type { NextFunction, Request, Response } from &quot;express&quot;;
import { STATUS_RESPONSE, SUPABASE } from &quot;@/config&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;</file><file path="be/middlewares/calendar-client.ts">import type { NextFunction, Request, Response } from &quot;express&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { fetchCredentialsByEmail } from &quot;@/utils/auth&quot;
import { initUserSupabaseCalendarWithTokensAndUpdateTokens } from &quot;@/utils/calendar&quot;</file><file path="be/middlewares/error-handler.ts">import type { NextFunction, Request, Response } from &quot;express&quot;;
import { sendErrorResponse } from &quot;@/utils/http&quot;;
import type { HttpError } from &quot;@/utils/http&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
const getErrorStatus = (err: Error): number =&gt;
const errorHandler = (err: Error, _req: Request, res: Response, _next: NextFunction) =&gt;</file><file path="be/middlewares/google-token-refresh.ts">import type { NextFunction, Request, Response } from &quot;express&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { deactivateGoogleTokens, persistGoogleTokens, refreshGoogleAccessToken } from &quot;@/utils/auth/google-token&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
export type GoogleTokenRefreshOptions = {
  force?: boolean;
};
export const googleTokenRefresh = (options: GoogleTokenRefreshOptions =</file><file path="be/middlewares/google-token-validation.ts">import type { NextFunction, Request, Response } from &quot;express&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;
import { checkTokenExpiry, fetchGoogleTokensByEmail, type TokenExpiryStatus } from &quot;@/utils/auth/google-token&quot;
import type { TokensProps } from &quot;@/types&quot;
export type GoogleTokenValidationResult = {
  tokens: TokensProps
} &amp; TokenExpiryStatus</file><file path="be/middlewares/rate-limiter.ts">import rateLimit from &quot;express-rate-limit&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import { sendR } from &quot;@/utils/http&quot;;</file><file path="be/middlewares/security-audit.ts">import type { Request, Response, NextFunction } from &quot;express&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import crypto from &quot;node:crypto&quot;;
export interface SecurityAuditEvent {
  timestamp: string;
  requestId: string;
  eventType: &quot;AUTH&quot; | &quot;ACCESS&quot; | &quot;MODIFICATION&quot; | &quot;ERROR&quot; | &quot;SECURITY&quot;;
  action: string;
  userId?: string;
  userEmail?: string;
  ip: string;
  userAgent: string;
  method: string;
  path: string;
  statusCode?: number;
  duration?: number;
  details?: Record&lt;string, unknown&gt;;
}
export const generateRequestId = (): string =&gt;
export const getClientIp = (req: Request): string =&gt;
export const logSecurityEvent = (event: SecurityAuditEvent): void =&gt;
const maskEmail = (email: string): string =&gt;
export const securityAuditMiddleware = (req: Request, res: Response, next: NextFunction): void =&gt;
const getEventType = (req: Request, res: Response): SecurityAuditEvent[&quot;eventType&quot;] =&gt;
const getActionFromRoute = (req: Request): string =&gt;
const shouldLogEvent = (req: Request, res: Response): boolean =&gt;
export const logAuthEvent = (
  req: Request,
  action: string,
  success: boolean,
  details?: Record&lt;string, unknown&gt;
): void =&gt;
‚ãÆ----
interface Request {
      requestId?: string;
    }</file><file path="be/middlewares/supabase-auth.ts">import { ACCESS_TOKEN_COOKIE, REFRESH_TOKEN_COOKIE, setAuthCookies } from &quot;@/utils/auth/cookie-utils&quot;;
import type { NextFunction, Request, Response } from &quot;express&quot;;
import { reqResAsyncHandler, sendR } from &quot;@/utils/http&quot;;
import { refreshSupabaseSession, validateSupabaseToken } from &quot;@/utils/auth/supabase-token&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import type { User } from &quot;@supabase/supabase-js&quot;;
‚ãÆ----
export type SupabaseAuthOptions = {
  autoRefresh?: boolean;
};
export const supabaseAuth = (options: SupabaseAuthOptions =
‚ãÆ----
interface Request {
      user?: User;
    }</file><file path="be/middlewares/validation.ts">import { z, ZodError, type ZodSchema } from &quot;zod&quot;;
import type { Request, Response, NextFunction } from &quot;express&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import { sendR } from &quot;@/utils/http&quot;;
‚ãÆ----
type ValidationTarget = &quot;body&quot; | &quot;query&quot; | &quot;params&quot;;
export const validate =
&lt;T extends ZodSchema&gt;(schema: T, target: ValidationTarget = &quot;body&quot;)
export const sanitizeString = (input: string): string =&gt;
‚ãÆ----
.replace(/[&lt;&gt;]/g, &quot;&quot;) // Remove angle brackets
.replace(/javascript:/gi, &quot;&quot;) // Remove javascript: protocol
.replace(/on\w+=/gi, &quot;&quot;) // Remove event handlers
‚ãÆ----
/**
 * Creates a sanitizing string schema
 */
export const sanitizedString = (options?:
// ============================================
// Gap Recovery Validation Schemas
// ============================================
‚ãÆ----
export type GapAnalysisQuery = z.infer&lt;typeof gapAnalysisQuerySchema&gt;;
export type FillGapBody = z.infer&lt;typeof fillGapSchema&gt;;
export type SkipGapBody = z.infer&lt;typeof skipGapSchema&gt;;
export type UpdateGapSettingsBody = z.infer&lt;typeof updateGapSettingsSchema&gt;;
‚ãÆ----
export type AllyBrainBody = z.infer&lt;typeof allyBrainSchema&gt;;
export type ContextualSchedulingBody = z.infer&lt;
  typeof contextualSchedulingSchema
&gt;;
‚ãÆ----
export type ReminderPreferencesBody = z.infer&lt;typeof reminderPreferencesSchema&gt;;
‚ãÆ----
export type UpdateCalendarRemindersBody = z.infer&lt;
  typeof updateCalendarRemindersSchema
&gt;;
‚ãÆ----
export type VoicePreferenceBody = z.infer&lt;typeof voicePreferenceSchema&gt;;
‚ãÆ----
export type DailyBriefingBody = z.infer&lt;typeof dailyBriefingSchema&gt;;</file><file path="be/migrations/20260108_lemonsqueezy_migration.sql">ALTER TABLE plans
ADD COLUMN IF NOT EXISTS lemonsqueezy_product_id TEXT,
ADD COLUMN IF NOT EXISTS lemonsqueezy_variant_id_monthly TEXT,
ADD COLUMN IF NOT EXISTS lemonsqueezy_variant_id_yearly TEXT;
COMMENT ON COLUMN plans.lemonsqueezy_product_id IS &apos;LemonSqueezy product ID for this plan&apos;;
COMMENT ON COLUMN plans.lemonsqueezy_variant_id_monthly IS &apos;LemonSqueezy variant ID for monthly billing&apos;;
COMMENT ON COLUMN plans.lemonsqueezy_variant_id_yearly IS &apos;LemonSqueezy variant ID for yearly billing&apos;;
ALTER TABLE subscriptions
ADD COLUMN IF NOT EXISTS lemonsqueezy_customer_id TEXT,
ADD COLUMN IF NOT EXISTS lemonsqueezy_subscription_id TEXT,
ADD COLUMN IF NOT EXISTS lemonsqueezy_variant_id TEXT;
CREATE INDEX IF NOT EXISTS idx_subscriptions_lemonsqueezy_customer_id
ON subscriptions(lemonsqueezy_customer_id) WHERE lemonsqueezy_customer_id IS NOT NULL;
CREATE INDEX IF NOT EXISTS idx_subscriptions_lemonsqueezy_subscription_id
ON subscriptions(lemonsqueezy_subscription_id) WHERE lemonsqueezy_subscription_id IS NOT NULL;
COMMENT ON COLUMN subscriptions.lemonsqueezy_customer_id IS &apos;LemonSqueezy customer ID&apos;;
COMMENT ON COLUMN subscriptions.lemonsqueezy_subscription_id IS &apos;LemonSqueezy subscription ID&apos;;
COMMENT ON COLUMN subscriptions.lemonsqueezy_variant_id IS &apos;LemonSqueezy variant ID for the current subscription&apos;;
ALTER TABLE credit_packs
ADD COLUMN IF NOT EXISTS lemonsqueezy_order_id TEXT;
CREATE INDEX IF NOT EXISTS idx_credit_packs_lemonsqueezy_order_id
ON credit_packs(lemonsqueezy_order_id) WHERE lemonsqueezy_order_id IS NOT NULL;
COMMENT ON COLUMN credit_packs.lemonsqueezy_order_id IS &apos;LemonSqueezy order ID for credit pack purchase&apos;;
ALTER TABLE payment_history
ADD COLUMN IF NOT EXISTS lemonsqueezy_order_id TEXT,
ADD COLUMN IF NOT EXISTS lemonsqueezy_subscription_id TEXT;
CREATE INDEX IF NOT EXISTS idx_payment_history_lemonsqueezy_order_id
ON payment_history(lemonsqueezy_order_id) WHERE lemonsqueezy_order_id IS NOT NULL;
CREATE INDEX IF NOT EXISTS idx_payment_history_lemonsqueezy_subscription_id
ON payment_history(lemonsqueezy_subscription_id) WHERE lemonsqueezy_subscription_id IS NOT NULL;
COMMENT ON COLUMN payment_history.lemonsqueezy_order_id IS &apos;LemonSqueezy order ID for this payment&apos;;
COMMENT ON COLUMN payment_history.lemonsqueezy_subscription_id IS &apos;LemonSqueezy subscription ID for recurring payments&apos;;
CREATE TABLE IF NOT EXISTS lemonsqueezy_webhook_events (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    event_id TEXT NOT NULL UNIQUE,
    event_type TEXT NOT NULL,
    payload JSONB NOT NULL,
    processed BOOLEAN DEFAULT FALSE,
    processed_at TIMESTAMPTZ,
    error_message TEXT,
    retry_count INTEGER DEFAULT 0,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX IF NOT EXISTS idx_lemonsqueezy_webhook_events_event_id
ON lemonsqueezy_webhook_events(event_id);
CREATE INDEX IF NOT EXISTS idx_lemonsqueezy_webhook_events_processed
ON lemonsqueezy_webhook_events(processed) WHERE processed = FALSE;
CREATE INDEX IF NOT EXISTS idx_lemonsqueezy_webhook_events_event_type
ON lemonsqueezy_webhook_events(event_type);
COMMENT ON TABLE lemonsqueezy_webhook_events IS &apos;Stores LemonSqueezy webhook events for idempotency and debugging&apos;;</file><file path="be/migrations/20260109_admin_rbac.sql">DO $$ BEGIN
    CREATE TYPE user_role AS ENUM (&apos;user&apos;, &apos;admin&apos;, &apos;moderator&apos;, &apos;support&apos;);
EXCEPTION
    WHEN duplicate_object THEN null;
END $$;
ALTER TABLE users ADD COLUMN IF NOT EXISTS role user_role DEFAULT &apos;user&apos; NOT NULL;
CREATE INDEX IF NOT EXISTS idx_users_role ON users(role);
COMMENT ON COLUMN users.role IS &apos;User role for RBAC: user (default), admin, moderator, support&apos;;
ALTER TABLE audit_logs ADD COLUMN IF NOT EXISTS admin_user_id UUID REFERENCES users(id);
ALTER TABLE audit_logs ADD COLUMN IF NOT EXISTS admin_action_type TEXT;
CREATE INDEX IF NOT EXISTS idx_audit_logs_admin_user_id
ON audit_logs(admin_user_id)
WHERE admin_user_id IS NOT NULL;
CREATE INDEX IF NOT EXISTS idx_audit_logs_admin_action
ON audit_logs(admin_action_type)
WHERE admin_action_type IS NOT NULL;
COMMENT ON COLUMN audit_logs.admin_user_id IS &apos;ID of admin who performed the action&apos;;
COMMENT ON COLUMN audit_logs.admin_action_type IS &apos;Type of admin action: user_status_change, subscription_update, credits_grant, password_reset, role_change&apos;;
DROP POLICY IF EXISTS admin_read_all_users ON users;
DROP POLICY IF EXISTS admin_update_users ON users;
DROP POLICY IF EXISTS admin_read_all_subscriptions ON subscriptions;
DROP POLICY IF EXISTS admin_update_subscriptions ON subscriptions;
DROP POLICY IF EXISTS admin_read_all_payment_history ON payment_history;
DROP POLICY IF EXISTS admin_read_all_audit_logs ON audit_logs;
DROP POLICY IF EXISTS admin_insert_audit_logs ON audit_logs;
CREATE POLICY admin_read_all_users ON users
FOR SELECT
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_update_users ON users
FOR UPDATE
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
)
WITH CHECK (
  (id != auth.uid()) OR
  (id = auth.uid() AND role = (SELECT role FROM users WHERE id = auth.uid()))
);
CREATE POLICY admin_read_all_subscriptions ON subscriptions
FOR SELECT
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_update_subscriptions ON subscriptions
FOR UPDATE
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_read_all_payment_history ON payment_history
FOR SELECT
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_read_all_audit_logs ON audit_logs
FOR SELECT
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_insert_audit_logs ON audit_logs
FOR INSERT
TO authenticated
WITH CHECK (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
DROP VIEW IF EXISTS v_admin_dashboard_stats;
DROP VIEW IF EXISTS v_subscription_distribution;
DROP VIEW IF EXISTS v_admin_user_list;
CREATE VIEW v_admin_dashboard_stats AS
SELECT
  (SELECT COUNT(*) FROM users WHERE deactivated_at IS NULL) as total_users,
  (SELECT COUNT(*) FROM users WHERE status = &apos;active&apos; AND deactivated_at IS NULL) as active_users,
  (SELECT COUNT(*) FROM users WHERE created_at &gt; NOW() - INTERVAL &apos;24 hours&apos; AND deactivated_at IS NULL) as new_users_today,
  (SELECT COUNT(*) FROM users WHERE created_at &gt; NOW() - INTERVAL &apos;7 days&apos; AND deactivated_at IS NULL) as new_users_week,
  (SELECT COUNT(*) FROM users WHERE created_at &gt; NOW() - INTERVAL &apos;30 days&apos; AND deactivated_at IS NULL) as new_users_month,
  (SELECT COUNT(*) FROM subscriptions WHERE status IN (&apos;active&apos;, &apos;trialing&apos;)) as active_subscriptions,
  (SELECT COALESCE(SUM(amount_cents), 0) FROM payment_history WHERE status = &apos;succeeded&apos;) as total_revenue_cents,
  (SELECT COALESCE(SUM(amount_cents), 0) FROM payment_history WHERE status = &apos;succeeded&apos; AND created_at &gt; NOW() - INTERVAL &apos;30 days&apos;) as mrr_cents;
CREATE VIEW v_subscription_distribution AS
SELECT
  p.slug as plan_slug,
  p.name as plan_name,
  COUNT(s.id) as subscriber_count,
  ROUND(
    COUNT(s.id)::numeric /
    NULLIF((SELECT COUNT(*) FROM subscriptions WHERE status IN (&apos;active&apos;, &apos;trialing&apos;)), 0) * 100,
    2
  ) as percentage
FROM plans p
LEFT JOIN subscriptions s ON s.plan_id = p.id AND s.status IN (&apos;active&apos;, &apos;trialing&apos;)
WHERE p.is_active = true
GROUP BY p.slug, p.name, p.display_order
ORDER BY p.display_order ASC;
CREATE VIEW v_admin_user_list AS
SELECT
  u.id,
  u.email,
  u.first_name,
  u.last_name,
  u.display_name,
  u.avatar_url,
  u.status,
  u.role,
  u.timezone,
  u.locale,
  u.email_verified,
  u.created_at,
  u.updated_at,
  s.id as subscription_id,
  s.status as subscription_status,
  s.interval as subscription_interval,
  s.current_period_end,
  s.ai_interactions_used,
  s.credits_remaining,
  p.name as plan_name,
  p.slug as plan_slug,
  EXISTS(SELECT 1 FROM oauth_tokens ot WHERE ot.user_id = u.id AND ot.is_valid = true) as has_oauth_connected
FROM users u
LEFT JOIN subscriptions s ON s.user_id = u.id AND s.status IN (&apos;active&apos;, &apos;trialing&apos;, &apos;past_due&apos;, &apos;paused&apos;)
LEFT JOIN plans p ON p.id = s.plan_id
WHERE u.deactivated_at IS NULL
ORDER BY u.created_at DESC;
GRANT SELECT ON v_admin_dashboard_stats TO authenticated;
GRANT SELECT ON v_subscription_distribution TO authenticated;
GRANT SELECT ON v_admin_user_list TO authenticated;</file><file path="be/migrations/20260109_set_admin_user.sql"></file><file path="be/mocks/google-calendar.ts">import { jest } from &quot;@jest/globals&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
type AnyFn = (...args: any[]) =&gt; any;
‚ãÆ----
export const createMockCalendarClient = () =&gt;
export const createMockCalendarErrors = () =&gt; (
export const createMockGoogleApiError = (errorType: keyof ReturnType&lt;typeof createMockCalendarErrors&gt;) =&gt;
export const createMockEvent = (overrides: Partial&lt;calendar_v3.Schema$Event&gt; =
export const createMockEventsList = (events: calendar_v3.Schema$Event[] = [mockCalendarEvent]): calendar_v3.Schema$Events =&gt; (
‚ãÆ----
export const createMockOAuth2Client = () =&gt; (</file><file path="be/mocks/openai-agents.ts">import { jest } from &quot;@jest/globals&quot;;
type AnyFn = (...args: any[]) =&gt; any;
export type MockAgentMessage = {
  role: &quot;user&quot; | &quot;assistant&quot; | &quot;system&quot;;
  content: string;
};
export type MockAgentToolCall = {
  id: string;
  type: &quot;function&quot;;
  function: {
    name: string;
    arguments: string;
  };
};
export type MockAgentResponse = {
  id: string;
  object: &quot;thread.run&quot;;
  created_at: number;
  status: &quot;completed&quot; | &quot;requires_action&quot; | &quot;failed&quot; | &quot;in_progress&quot;;
  model: string;
  instructions?: string;
  tools?: any[];
  metadata?: Record&lt;string, any&gt;;
  messages?: MockAgentMessage[];
  toolCalls?: MockAgentToolCall[];
  response?: string;
};
export type MockAgentConfig = {
  name: string;
  instructions?: string;
  model?: string;
  modelSettings?: {
    toolChoice?: &quot;auto&quot; | &quot;required&quot; | &quot;none&quot;;
    parallelToolCalls?: boolean;
  };
  handoffDescription?: string;
  tools?: any[];
};
export const createMockAgentResponse = (overrides: Partial&lt;MockAgentResponse&gt; =
‚ãÆ----
export class MockAgent
‚ãÆ----
constructor(config: MockAgentConfig)
setMockResponse(response: MockAgentResponse)
async run(params:
async invoke(params:
async *stream(params:
‚ãÆ----
export const createMockAgent = (config: MockAgentConfig, mockResponse?: MockAgentResponse): MockAgent =&gt;
‚ãÆ----
export const createMockAgentError = (errorType: keyof typeof mockAgentErrors) =&gt;
‚ãÆ----
export const resetMockAgentTools = () =&gt;</file><file path="be/mocks/supabase.ts">import type { Database } from &quot;@/database.types&quot;;
import { jest } from &quot;@jest/globals&quot;;
‚ãÆ----
export const createMockSupabaseErrors = () =&gt; (
export const createMockSupabaseError = (errorType: keyof ReturnType&lt;typeof createMockSupabaseErrors&gt;) =&gt;
class InMemoryDataStore
‚ãÆ----
constructor()
reset()
getTable(tableName: string): any[]
setTable(tableName: string, data: any[])
insert(tableName: string, record: any): any
update(tableName: string, updates: any, filter: (record: any) =&gt; boolean): any[]
delete(tableName: string, filter: (record: any) =&gt; boolean): any[]
select(tableName: string, columns: string = &quot;*&quot;): any[]
‚ãÆ----
const createMockQueryBuilder = (tableName: string, dataStore: InMemoryDataStore) =&gt;
‚ãÆ----
const applyFilters = (data: any[]) =&gt;
const executeQuery = () =&gt;
‚ãÆ----
const filterFn = (record: any) =&gt;
‚ãÆ----
export const createMockSupabaseClient = (dataStore?: InMemoryDataStore) =&gt;
export const resetMockDataStore = (client: ReturnType&lt;typeof createMockSupabaseClient&gt;) =&gt;</file><file path="be/postman/AI-Google-Calendar-Assistant.postman_collection.json">{
	&quot;info&quot;: {
		&quot;_postman_id&quot;: &quot;ai-google-calendar-assistant-collection&quot;,
		&quot;name&quot;: &quot;AI Google Calendar Assistant API&quot;,
		&quot;description&quot;: &quot;Complete API collection for the AI Google Calendar Assistant application.\n\n## Authentication\n\nMost endpoints require two levels of authentication:\n1. **Supabase Auth**: Bearer token in `Authorization` header\n2. **Google Calendar**: User must have authorized Google Calendar access\n\n## Getting Started\n\n1. Use the `/api/users/signin` or `/api/users/signup` endpoints to get your Supabase tokens\n2. Set the `access_token` environment variable with the returned session token\n3. Authorize Google Calendar via `/api/users/callback`\n4. You&apos;re ready to use all calendar and event endpoints!\n\n## Response Format\n\nAll responses follow this structure:\n```json\n{\n  \&quot;status\&quot;: \&quot;success\&quot; | \&quot;error\&quot;,\n  \&quot;message\&quot;: \&quot;Description\&quot;,\n  \&quot;data\&quot;: {}\n}\n```&quot;,
		&quot;schema&quot;: &quot;https://schema.getpostman.com/json/collection/v2.1.0/collection.json&quot;
	},
	&quot;auth&quot;: {
		&quot;type&quot;: &quot;bearer&quot;,
		&quot;bearer&quot;: [
			{
				&quot;key&quot;: &quot;token&quot;,
				&quot;value&quot;: &quot;{{access_token}}&quot;,
				&quot;type&quot;: &quot;string&quot;
			}
		]
	},
	&quot;variable&quot;: [
		{
			&quot;key&quot;: &quot;base_url&quot;,
			&quot;value&quot;: &quot;http://localhost:3000/api&quot;,
			&quot;type&quot;: &quot;string&quot;
		}
	],
	&quot;item&quot;: [
		{
			&quot;name&quot;: &quot;Users (Authentication)&quot;,
			&quot;description&quot;: &quot;User authentication and management endpoints.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Sign Up&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;email\&quot;: \&quot;user@example.com\&quot;,\n    \&quot;password\&quot;: \&quot;yourSecurePassword123\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/signup&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;signup&quot;]
						},
						&quot;description&quot;: &quot;Register a new user with email and password.\n\n**No authentication required**&quot;
					},
					&quot;response&quot;: [
						{
							&quot;name&quot;: &quot;Success&quot;,
							&quot;originalRequest&quot;: {
								&quot;method&quot;: &quot;POST&quot;,
								&quot;body&quot;: {
									&quot;mode&quot;: &quot;raw&quot;,
									&quot;raw&quot;: &quot;{\n    \&quot;email\&quot;: \&quot;user@example.com\&quot;,\n    \&quot;password\&quot;: \&quot;yourSecurePassword123\&quot;\n}&quot;
								},
								&quot;url&quot;: {
									&quot;raw&quot;: &quot;{{base_url}}/users/signup&quot;,
									&quot;host&quot;: [&quot;{{base_url}}&quot;],
									&quot;path&quot;: [&quot;users&quot;, &quot;signup&quot;]
								}
							},
							&quot;status&quot;: &quot;OK&quot;,
							&quot;code&quot;: 200,
							&quot;_postman_previewlanguage&quot;: &quot;json&quot;,
							&quot;body&quot;: &quot;{\n    \&quot;status\&quot;: \&quot;success\&quot;,\n    \&quot;message\&quot;: \&quot;User signed up successfully\&quot;,\n    \&quot;data\&quot;: {\n        \&quot;user\&quot;: {\n            \&quot;id\&quot;: \&quot;uuid-here\&quot;,\n            \&quot;email\&quot;: \&quot;user@example.com\&quot;\n        },\n        \&quot;session\&quot;: {\n            \&quot;access_token\&quot;: \&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\&quot;,\n            \&quot;refresh_token\&quot;: \&quot;refresh-token-here\&quot;,\n            \&quot;expires_in\&quot;: 3600\n        }\n    }\n}&quot;
						}
					]
				},
				{
					&quot;name&quot;: &quot;Sign In&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;email\&quot;: \&quot;user@example.com\&quot;,\n    \&quot;password\&quot;: \&quot;yourSecurePassword123\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/signin&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;signin&quot;]
						},
						&quot;description&quot;: &quot;Sign in an existing user with email and password.\n\n**No authentication required**&quot;
					},
					&quot;response&quot;: [
						{
							&quot;name&quot;: &quot;Success&quot;,
							&quot;originalRequest&quot;: {
								&quot;method&quot;: &quot;POST&quot;,
								&quot;body&quot;: {
									&quot;mode&quot;: &quot;raw&quot;,
									&quot;raw&quot;: &quot;{\n    \&quot;email\&quot;: \&quot;user@example.com\&quot;,\n    \&quot;password\&quot;: \&quot;yourSecurePassword123\&quot;\n}&quot;
								},
								&quot;url&quot;: {
									&quot;raw&quot;: &quot;{{base_url}}/users/signin&quot;,
									&quot;host&quot;: [&quot;{{base_url}}&quot;],
									&quot;path&quot;: [&quot;users&quot;, &quot;signin&quot;]
								}
							},
							&quot;status&quot;: &quot;OK&quot;,
							&quot;code&quot;: 200,
							&quot;_postman_previewlanguage&quot;: &quot;json&quot;,
							&quot;body&quot;: &quot;{\n    \&quot;status\&quot;: \&quot;success\&quot;,\n    \&quot;message\&quot;: \&quot;User signed in successfully\&quot;,\n    \&quot;data\&quot;: {\n        \&quot;user\&quot;: {\n            \&quot;id\&quot;: \&quot;uuid-here\&quot;,\n            \&quot;email\&quot;: \&quot;user@example.com\&quot;\n        },\n        \&quot;session\&quot;: {\n            \&quot;access_token\&quot;: \&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\&quot;,\n            \&quot;refresh_token\&quot;: \&quot;refresh-token-here\&quot;,\n            \&quot;expires_in\&quot;: 3600\n        }\n    }\n}&quot;
						}
					]
				},
				{
					&quot;name&quot;: &quot;Verify Email OTP&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;email\&quot;: \&quot;user@example.com\&quot;,\n    \&quot;token\&quot;: \&quot;123456\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/verify-user-by-email-otp&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;verify-user-by-email-otp&quot;]
						},
						&quot;description&quot;: &quot;Verify user&apos;s email using the OTP token sent to their email.\n\n**No authentication required**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Google OAuth URL&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/callback&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;callback&quot;]
						},
						&quot;description&quot;: &quot;Get the Google OAuth authorization URL for Google Calendar access.\n\n**No authentication required**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Sign Up with Google&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/signup/google&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;signup&quot;, &quot;google&quot;]
						},
						&quot;description&quot;: &quot;Initiate Google OAuth sign up flow.\n\n**No authentication required**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Sign Up with GitHub&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/signup/github&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;signup&quot;, &quot;github&quot;]
						},
						&quot;description&quot;: &quot;Initiate GitHub OAuth sign up flow.\n\n**No authentication required**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Current User&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/get-user&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;get-user&quot;]
						},
						&quot;description&quot;: &quot;Get the currently authenticated user&apos;s information.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Check Session&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/session&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;session&quot;]
						},
						&quot;description&quot;: &quot;Check if the current session is valid.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get User by ID&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{user_id}}&quot;,
									&quot;description&quot;: &quot;User UUID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get user information by their ID.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Refresh Token&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;refresh_token\&quot;: \&quot;{{refresh_token}}\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/refresh&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;refresh&quot;]
						},
						&quot;description&quot;: &quot;Refresh the Supabase session using a refresh token.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Logout&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/logout&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;logout&quot;]
						},
						&quot;description&quot;: &quot;Logout the current user session.\n\n**No authentication required**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Deactivate User&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;DELETE&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;email\&quot;: \&quot;user@example.com\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;]
						},
						&quot;description&quot;: &quot;Deactivate the authenticated user&apos;s account.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;User Preferences&quot;,
			&quot;description&quot;: &quot;Manage user assistant preferences.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Get All Preferences&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/preferences&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;preferences&quot;]
						},
						&quot;description&quot;: &quot;Get all assistant preferences for the authenticated user.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: [
						{
							&quot;name&quot;: &quot;Success&quot;,
							&quot;originalRequest&quot;: {
								&quot;method&quot;: &quot;GET&quot;,
								&quot;url&quot;: {
									&quot;raw&quot;: &quot;{{base_url}}/users/preferences&quot;,
									&quot;host&quot;: [&quot;{{base_url}}&quot;],
									&quot;path&quot;: [&quot;users&quot;, &quot;preferences&quot;]
								}
							},
							&quot;status&quot;: &quot;OK&quot;,
							&quot;code&quot;: 200,
							&quot;_postman_previewlanguage&quot;: &quot;json&quot;,
							&quot;body&quot;: &quot;{\n    \&quot;status\&quot;: \&quot;success\&quot;,\n    \&quot;message\&quot;: \&quot;Preferences fetched successfully\&quot;,\n    \&quot;data\&quot;: {\n        \&quot;ally_brain\&quot;: {\n            \&quot;enabled\&quot;: true,\n            \&quot;level\&quot;: \&quot;standard\&quot;\n        },\n        \&quot;contextual_scheduling\&quot;: {\n            \&quot;enabled\&quot;: true,\n            \&quot;work_hours_start\&quot;: \&quot;09:00\&quot;,\n            \&quot;work_hours_end\&quot;: \&quot;17:00\&quot;\n        }\n    }\n}&quot;
						}
					]
				},
				{
					&quot;name&quot;: &quot;Get Preference by Key&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/preferences/:key&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;preferences&quot;, &quot;:key&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;key&quot;,
									&quot;value&quot;: &quot;ally_brain&quot;,
									&quot;description&quot;: &quot;Preference key (ally_brain, contextual_scheduling)&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get a specific preference by key.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update Ally Brain Preference&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PUT&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;enabled\&quot;: true,\n    \&quot;level\&quot;: \&quot;advanced\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/preferences/ally_brain&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;preferences&quot;, &quot;ally_brain&quot;]
						},
						&quot;description&quot;: &quot;Update the ally_brain preference.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update Contextual Scheduling Preference&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PUT&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;enabled\&quot;: true,\n    \&quot;work_hours_start\&quot;: \&quot;09:00\&quot;,\n    \&quot;work_hours_end\&quot;: \&quot;18:00\&quot;,\n    \&quot;timezone\&quot;: \&quot;America/New_York\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/preferences/contextual_scheduling&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;preferences&quot;, &quot;contextual_scheduling&quot;]
						},
						&quot;description&quot;: &quot;Update the contextual_scheduling preference.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Google Integration&quot;,
			&quot;description&quot;: &quot;Manage Google Calendar integration status.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Get Google Calendar Integration Status&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/integrations/google-calendar&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;integrations&quot;, &quot;google-calendar&quot;]
						},
						&quot;description&quot;: &quot;Check the status of Google Calendar integration.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: [
						{
							&quot;name&quot;: &quot;Connected&quot;,
							&quot;originalRequest&quot;: {
								&quot;method&quot;: &quot;GET&quot;,
								&quot;url&quot;: {
									&quot;raw&quot;: &quot;{{base_url}}/users/integrations/google-calendar&quot;,
									&quot;host&quot;: [&quot;{{base_url}}&quot;],
									&quot;path&quot;: [&quot;users&quot;, &quot;integrations&quot;, &quot;google-calendar&quot;]
								}
							},
							&quot;status&quot;: &quot;OK&quot;,
							&quot;code&quot;: 200,
							&quot;_postman_previewlanguage&quot;: &quot;json&quot;,
							&quot;body&quot;: &quot;{\n    \&quot;status\&quot;: \&quot;success\&quot;,\n    \&quot;message\&quot;: \&quot;Integration status fetched\&quot;,\n    \&quot;data\&quot;: {\n        \&quot;connected\&quot;: true,\n        \&quot;email\&quot;: \&quot;user@gmail.com\&quot;,\n        \&quot;expiresAt\&quot;: \&quot;2024-01-20T10:30:00.000Z\&quot;\n    }\n}&quot;
						}
					]
				},
				{
					&quot;name&quot;: &quot;Disconnect Google Calendar&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/users/integrations/google-calendar/disconnect&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;users&quot;, &quot;integrations&quot;, &quot;google-calendar&quot;, &quot;disconnect&quot;]
						},
						&quot;description&quot;: &quot;Disconnect Google Calendar integration.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Calendars&quot;,
			&quot;description&quot;: &quot;Calendar management endpoints. All endpoints require Supabase authentication AND Google Calendar authorization.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Get All Calendars&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;]
						},
						&quot;description&quot;: &quot;Get all calendars for the authenticated user.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Dry Calendar Info&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/dry-calendar-info&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;dry-calendar-info&quot;]
						},
						&quot;description&quot;: &quot;Get token expiry information without making Google API calls.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Calendar by ID&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;primary&quot;,
									&quot;description&quot;: &quot;Calendar ID (use &apos;primary&apos; for main calendar)&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get a specific calendar by its ID.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Create Calendar&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;summary\&quot;: \&quot;Work Calendar\&quot;,\n    \&quot;description\&quot;: \&quot;Calendar for work-related events\&quot;,\n    \&quot;location\&quot;: \&quot;Office\&quot;,\n    \&quot;timeZone\&quot;: \&quot;America/New_York\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;]
						},
						&quot;description&quot;: &quot;Create a new secondary calendar.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update Calendar (Partial)&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PATCH&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;summary\&quot;: \&quot;Updated Calendar Name\&quot;,\n    \&quot;description\&quot;: \&quot;Updated description\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{calendar_id}}&quot;,
									&quot;description&quot;: &quot;Calendar ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Partially update a calendar&apos;s metadata.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update Calendar (Full)&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PUT&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;summary\&quot;: \&quot;Full Updated Calendar\&quot;,\n    \&quot;description\&quot;: \&quot;Full updated description\&quot;,\n    \&quot;location\&quot;: \&quot;New Location\&quot;,\n    \&quot;timeZone\&quot;: \&quot;Europe/London\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{calendar_id}}&quot;,
									&quot;description&quot;: &quot;Calendar ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Fully update a calendar&apos;s metadata.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Delete Calendar&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;DELETE&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/:id/delete&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;:id&quot;, &quot;delete&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{calendar_id}}&quot;,
									&quot;description&quot;: &quot;Calendar ID (cannot delete &apos;primary&apos;)&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Delete a secondary calendar.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Clear Calendar Events&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;DELETE&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;primary&quot;,
									&quot;description&quot;: &quot;Calendar ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Clear all events in a calendar.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Free/Busy Info&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/freebusy?timeMin=2024-01-15T00:00:00Z&amp;timeMax=2024-01-22T00:00:00Z&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;freebusy&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;timeMin&quot;,
									&quot;value&quot;: &quot;2024-01-15T00:00:00Z&quot;,
									&quot;description&quot;: &quot;Start of time range (ISO 8601)&quot;
								},
								{
									&quot;key&quot;: &quot;timeMax&quot;,
									&quot;value&quot;: &quot;2024-01-22T00:00:00Z&quot;,
									&quot;description&quot;: &quot;End of time range (ISO 8601)&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get free/busy information for calendars within a time range.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Calendar Colors&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/colors&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;colors&quot;]
						},
						&quot;description&quot;: &quot;Get all available calendar and event colors.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Calendar Color by ID&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/colors/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;colors&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;1&quot;,
									&quot;description&quot;: &quot;Color ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get a specific calendar color by ID.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get All Timezones&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/timezones&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;timezones&quot;]
						},
						&quot;description&quot;: &quot;Get all available calendar timezones.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Timezone by ID&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/timezones/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;timezones&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;America/New_York&quot;,
									&quot;description&quot;: &quot;Timezone ID (IANA format)&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get a specific timezone by ID.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get All Calendar Settings&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/settings/all&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;settings&quot;, &quot;all&quot;]
						},
						&quot;description&quot;: &quot;Get all calendar settings for the user.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Calendar Settings&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/settings&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;settings&quot;]
						},
						&quot;description&quot;: &quot;Get calendar settings.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Calendar Settings by ID&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/settings/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;settings&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;timezone&quot;,
									&quot;description&quot;: &quot;Setting ID (e.g., &apos;timezone&apos;, &apos;dateFieldOrder&apos;)&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get a specific calendar setting by ID.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Calendar List&quot;,
			&quot;description&quot;: &quot;Manage calendars on the user&apos;s calendar list.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;List Calendars on User&apos;s List&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/list?minAccessRole=owner&amp;showDeleted=false&amp;showHidden=false&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;list&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;minAccessRole&quot;,
									&quot;value&quot;: &quot;owner&quot;,
									&quot;description&quot;: &quot;Minimum access role: freeBusyReader, reader, writer, owner&quot;
								},
								{
									&quot;key&quot;: &quot;showDeleted&quot;,
									&quot;value&quot;: &quot;false&quot;
								},
								{
									&quot;key&quot;: &quot;showHidden&quot;,
									&quot;value&quot;: &quot;false&quot;
								}
							]
						},
						&quot;description&quot;: &quot;List all calendars on the user&apos;s calendar list.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Add Calendar to User&apos;s List&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;id\&quot;: \&quot;calendar-id@group.calendar.google.com\&quot;,\n    \&quot;colorId\&quot;: \&quot;1\&quot;,\n    \&quot;hidden\&quot;: false,\n    \&quot;selected\&quot;: true,\n    \&quot;summaryOverride\&quot;: \&quot;My Custom Name\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/list&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;list&quot;]
						},
						&quot;description&quot;: &quot;Add an existing calendar to the user&apos;s calendar list.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Calendar from User&apos;s List&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/list/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;list&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;primary&quot;,
									&quot;description&quot;: &quot;Calendar ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get a specific calendar from the user&apos;s calendar list.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update Calendar List Entry (Partial)&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PATCH&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;colorId\&quot;: \&quot;2\&quot;,\n    \&quot;summaryOverride\&quot;: \&quot;New Display Name\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/list/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;list&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{calendar_id}}&quot;,
									&quot;description&quot;: &quot;Calendar ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Partially update a calendar&apos;s entry in the user&apos;s list.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update Calendar List Entry (Full)&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PUT&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;colorId\&quot;: \&quot;3\&quot;,\n    \&quot;hidden\&quot;: false,\n    \&quot;selected\&quot;: true,\n    \&quot;summaryOverride\&quot;: \&quot;Full Update Name\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/list/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;list&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{calendar_id}}&quot;,
									&quot;description&quot;: &quot;Calendar ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Fully update a calendar&apos;s entry in the user&apos;s list.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Remove Calendar from User&apos;s List&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;DELETE&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/list/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;list&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{calendar_id}}&quot;,
									&quot;description&quot;: &quot;Calendar ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Remove a calendar from the user&apos;s calendar list.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Watch Calendar List Changes&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;id\&quot;: \&quot;unique-channel-id\&quot;,\n    \&quot;type\&quot;: \&quot;web_hook\&quot;,\n    \&quot;address\&quot;: \&quot;https://your-webhook-url.com/callback\&quot;,\n    \&quot;token\&quot;: \&quot;optional-token\&quot;,\n    \&quot;expiration\&quot;: 1704067200000\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/calendars/list/watch&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;calendars&quot;, &quot;list&quot;, &quot;watch&quot;]
						},
						&quot;description&quot;: &quot;Watch for changes to the user&apos;s calendar list.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Events&quot;,
			&quot;description&quot;: &quot;Calendar event management endpoints.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Get All Events&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events?calendarId=primary&amp;timeMin=2024-01-01T00:00:00Z&amp;timeMax=2024-12-31T23:59:59Z&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;,
									&quot;description&quot;: &quot;Calendar ID (default: &apos;primary&apos;)&quot;
								},
								{
									&quot;key&quot;: &quot;timeMin&quot;,
									&quot;value&quot;: &quot;2024-01-01T00:00:00Z&quot;,
									&quot;description&quot;: &quot;Lower bound for event start time (ISO 8601)&quot;
								},
								{
									&quot;key&quot;: &quot;timeMax&quot;,
									&quot;value&quot;: &quot;2024-12-31T23:59:59Z&quot;,
									&quot;description&quot;: &quot;Upper bound for event start time (ISO 8601)&quot;
								},
								{
									&quot;key&quot;: &quot;singleEvents&quot;,
									&quot;value&quot;: &quot;true&quot;,
									&quot;description&quot;: &quot;Expand recurring events&quot;,
									&quot;disabled&quot;: true
								},
								{
									&quot;key&quot;: &quot;orderBy&quot;,
									&quot;value&quot;: &quot;startTime&quot;,
									&quot;description&quot;: &quot;Order by: startTime or updated&quot;,
									&quot;disabled&quot;: true
								}
							]
						},
						&quot;description&quot;: &quot;Get all events from a calendar within a time range.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Event by ID&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/:id?calendarId=primary&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;:id&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								}
							],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{event_id}}&quot;,
									&quot;description&quot;: &quot;Event ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get a specific event by its ID.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Event Analytics&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/analytics?timeMin=2024-01-01T00:00:00Z&amp;timeMax=2024-01-31T23:59:59Z&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;analytics&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;timeMin&quot;,
									&quot;value&quot;: &quot;2024-01-01T00:00:00Z&quot;,
									&quot;description&quot;: &quot;Start of analysis period (ISO 8601)&quot;
								},
								{
									&quot;key&quot;: &quot;timeMax&quot;,
									&quot;value&quot;: &quot;2024-01-31T23:59:59Z&quot;,
									&quot;description&quot;: &quot;End of analysis period (ISO 8601)&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get analytics for events within a date range.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get AI-Powered Insights&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/insights?timeMin=2024-01-01T00:00:00Z&amp;timeMax=2024-01-31T23:59:59Z&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;insights&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;timeMin&quot;,
									&quot;value&quot;: &quot;2024-01-01T00:00:00Z&quot;,
									&quot;description&quot;: &quot;Start of period (ISO 8601)&quot;
								},
								{
									&quot;key&quot;: &quot;timeMax&quot;,
									&quot;value&quot;: &quot;2024-01-31T23:59:59Z&quot;,
									&quot;description&quot;: &quot;End of period (ISO 8601)&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get AI-powered insights for calendar events.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: [
						{
							&quot;name&quot;: &quot;Success&quot;,
							&quot;originalRequest&quot;: {
								&quot;method&quot;: &quot;GET&quot;,
								&quot;url&quot;: {
									&quot;raw&quot;: &quot;{{base_url}}/events/insights?timeMin=2024-01-01T00:00:00Z&amp;timeMax=2024-01-31T23:59:59Z&quot;,
									&quot;host&quot;: [&quot;{{base_url}}&quot;],
									&quot;path&quot;: [&quot;events&quot;, &quot;insights&quot;]
								}
							},
							&quot;status&quot;: &quot;OK&quot;,
							&quot;code&quot;: 200,
							&quot;_postman_previewlanguage&quot;: &quot;json&quot;,
							&quot;body&quot;: &quot;{\n    \&quot;status\&quot;: \&quot;success\&quot;,\n    \&quot;message\&quot;: \&quot;Insights generated successfully\&quot;,\n    \&quot;data\&quot;: {\n        \&quot;summary\&quot;: \&quot;You had 45 meetings this month...\&quot;,\n        \&quot;recommendations\&quot;: [\n            \&quot;Consider blocking focus time in the mornings\&quot;,\n            \&quot;You have back-to-back meetings on Tuesdays\&quot;\n        ],\n        \&quot;patterns\&quot;: {\n            \&quot;busiestDay\&quot;: \&quot;Tuesday\&quot;,\n            \&quot;averageMeetingDuration\&quot;: 45\n        }\n    }\n}&quot;
						}
					]
				},
				{
					&quot;name&quot;: &quot;Create Event&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;summary\&quot;: \&quot;Team Meeting\&quot;,\n    \&quot;description\&quot;: \&quot;Weekly team sync to discuss progress\&quot;,\n    \&quot;location\&quot;: \&quot;Conference Room A\&quot;,\n    \&quot;start\&quot;: {\n        \&quot;dateTime\&quot;: \&quot;2024-01-20T10:00:00\&quot;,\n        \&quot;timeZone\&quot;: \&quot;America/New_York\&quot;\n    },\n    \&quot;end\&quot;: {\n        \&quot;dateTime\&quot;: \&quot;2024-01-20T11:00:00\&quot;,\n        \&quot;timeZone\&quot;: \&quot;America/New_York\&quot;\n    },\n    \&quot;attendees\&quot;: [\n        {\n            \&quot;email\&quot;: \&quot;colleague@example.com\&quot;\n        }\n    ],\n    \&quot;reminders\&quot;: {\n        \&quot;useDefault\&quot;: false,\n        \&quot;overrides\&quot;: [\n            {\n                \&quot;method\&quot;: \&quot;popup\&quot;,\n                \&quot;minutes\&quot;: 15\n            }\n        ]\n    }\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events?calendarId=primary&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Create a new calendar event.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Quick Add Event&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;text\&quot;: \&quot;Meeting with John tomorrow at 3pm for 1 hour\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/quick-add?calendarId=primary&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;quick-add&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Quick add an event using natural language text.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update Event&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PATCH&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;summary\&quot;: \&quot;Updated Meeting Title\&quot;,\n    \&quot;description\&quot;: \&quot;Updated description\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/:id?calendarId=primary&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;:id&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								}
							],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{event_id}}&quot;,
									&quot;description&quot;: &quot;Event ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Update an existing event.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Delete Event&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;DELETE&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/:id?calendarId=primary&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;:id&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								}
							],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{event_id}}&quot;,
									&quot;description&quot;: &quot;Event ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Delete an event from the calendar.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Move Event to Another Calendar&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;eventId\&quot;: \&quot;event-id-to-move\&quot;,\n    \&quot;destination\&quot;: \&quot;destination-calendar-id@group.calendar.google.com\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/move?calendarId=primary&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;move&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;,
									&quot;description&quot;: &quot;Source calendar ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Move an event from one calendar to another.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Import Event&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;iCalUID\&quot;: \&quot;unique-ical-uid@example.com\&quot;,\n    \&quot;summary\&quot;: \&quot;Imported Event\&quot;,\n    \&quot;start\&quot;: {\n        \&quot;dateTime\&quot;: \&quot;2024-01-25T10:00:00\&quot;,\n        \&quot;timeZone\&quot;: \&quot;America/New_York\&quot;\n    },\n    \&quot;end\&quot;: {\n        \&quot;dateTime\&quot;: \&quot;2024-01-25T11:00:00\&quot;,\n        \&quot;timeZone\&quot;: \&quot;America/New_York\&quot;\n    }\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/import?calendarId=primary&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;import&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Import an event (creates a private copy).\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Recurring Event Instances&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/:id/instances?calendarId=primary&amp;timeMin=2024-01-01T00:00:00Z&amp;timeMax=2024-03-31T23:59:59Z&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;:id&quot;, &quot;instances&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								},
								{
									&quot;key&quot;: &quot;timeMin&quot;,
									&quot;value&quot;: &quot;2024-01-01T00:00:00Z&quot;
								},
								{
									&quot;key&quot;: &quot;timeMax&quot;,
									&quot;value&quot;: &quot;2024-03-31T23:59:59Z&quot;
								}
							],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{event_id}}&quot;,
									&quot;description&quot;: &quot;Recurring event ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get all instances of a recurring event within a time range.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Watch Events&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;id\&quot;: \&quot;unique-channel-id-for-events\&quot;,\n    \&quot;type\&quot;: \&quot;web_hook\&quot;,\n    \&quot;address\&quot;: \&quot;https://your-webhook-url.com/events-callback\&quot;,\n    \&quot;token\&quot;: \&quot;optional-verification-token\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/events/watch?calendarId=primary&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;events&quot;, &quot;watch&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Watch for changes to events in a calendar.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Gap Recovery&quot;,
			&quot;description&quot;: &quot;AI-powered gap analysis and recovery for calendar scheduling.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Get Gaps (Analyze Calendar)&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/gaps?startDate=2024-01-15&amp;endDate=2024-01-22&amp;minGapMinutes=30&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;gaps&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;startDate&quot;,
									&quot;value&quot;: &quot;2024-01-15&quot;,
									&quot;description&quot;: &quot;Start date for gap analysis (YYYY-MM-DD)&quot;
								},
								{
									&quot;key&quot;: &quot;endDate&quot;,
									&quot;value&quot;: &quot;2024-01-22&quot;,
									&quot;description&quot;: &quot;End date for gap analysis (YYYY-MM-DD)&quot;
								},
								{
									&quot;key&quot;: &quot;minGapMinutes&quot;,
									&quot;value&quot;: &quot;30&quot;,
									&quot;description&quot;: &quot;Minimum gap duration to detect (optional)&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Analyze calendar for scheduling gaps.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: [
						{
							&quot;name&quot;: &quot;Success&quot;,
							&quot;originalRequest&quot;: {
								&quot;method&quot;: &quot;GET&quot;,
								&quot;url&quot;: {
									&quot;raw&quot;: &quot;{{base_url}}/gaps?startDate=2024-01-15&amp;endDate=2024-01-22&quot;,
									&quot;host&quot;: [&quot;{{base_url}}&quot;],
									&quot;path&quot;: [&quot;gaps&quot;]
								}
							},
							&quot;status&quot;: &quot;OK&quot;,
							&quot;code&quot;: 200,
							&quot;_postman_previewlanguage&quot;: &quot;json&quot;,
							&quot;body&quot;: &quot;{\n    \&quot;status\&quot;: \&quot;success\&quot;,\n    \&quot;message\&quot;: \&quot;Gaps analyzed successfully\&quot;,\n    \&quot;data\&quot;: {\n        \&quot;gaps\&quot;: [\n            {\n                \&quot;id\&quot;: \&quot;gap-1\&quot;,\n                \&quot;start\&quot;: \&quot;2024-01-15T12:00:00Z\&quot;,\n                \&quot;end\&quot;: \&quot;2024-01-15T14:00:00Z\&quot;,\n                \&quot;duration\&quot;: 120,\n                \&quot;suggestions\&quot;: [\&quot;Lunch break\&quot;, \&quot;Focus time\&quot;]\n            }\n        ],\n        \&quot;totalGaps\&quot;: 5,\n        \&quot;totalGapMinutes\&quot;: 480\n    }\n}&quot;
						}
					]
				},
				{
					&quot;name&quot;: &quot;Get Gaps Formatted&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/gaps/formatted?startDate=2024-01-15&amp;endDate=2024-01-22&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;gaps&quot;, &quot;formatted&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;startDate&quot;,
									&quot;value&quot;: &quot;2024-01-15&quot;
								},
								{
									&quot;key&quot;: &quot;endDate&quot;,
									&quot;value&quot;: &quot;2024-01-22&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get gaps formatted for display in chat interfaces.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Fill Gap&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;summary\&quot;: \&quot;Focus Time\&quot;,\n    \&quot;description\&quot;: \&quot;Deep work session\&quot;,\n    \&quot;calendarId\&quot;: \&quot;primary\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/gaps/:gapId/fill&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;gaps&quot;, &quot;:gapId&quot;, &quot;fill&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;gapId&quot;,
									&quot;value&quot;: &quot;gap-1&quot;,
									&quot;description&quot;: &quot;Gap ID to fill&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Fill a gap with a new event.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Skip Gap&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;reason\&quot;: \&quot;Need this time for personal errands\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/gaps/:gapId/skip&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;gaps&quot;, &quot;:gapId&quot;, &quot;skip&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;gapId&quot;,
									&quot;value&quot;: &quot;gap-1&quot;,
									&quot;description&quot;: &quot;Gap ID to skip&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Skip a specific gap (mark as intentionally unused).\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Dismiss All Gaps&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/gaps/dismiss-all&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;gaps&quot;, &quot;dismiss-all&quot;]
						},
						&quot;description&quot;: &quot;Dismiss all pending gaps.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Gap Recovery Settings&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/gaps/settings&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;gaps&quot;, &quot;settings&quot;]
						},
						&quot;description&quot;: &quot;Get gap recovery feature settings.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update Gap Recovery Settings&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PATCH&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;enabled\&quot;: true,\n    \&quot;minGapMinutes\&quot;: 30,\n    \&quot;workHoursStart\&quot;: \&quot;09:00\&quot;,\n    \&quot;workHoursEnd\&quot;: \&quot;17:00\&quot;,\n    \&quot;excludeWeekends\&quot;: true\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/gaps/settings&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;gaps&quot;, &quot;settings&quot;]
						},
						&quot;description&quot;: &quot;Update gap recovery settings.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Disable Gap Analysis&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/gaps/disable&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;gaps&quot;, &quot;disable&quot;]
						},
						&quot;description&quot;: &quot;Disable gap analysis feature.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Chat (AI Assistant)&quot;,
			&quot;description&quot;: &quot;AI-powered chat interface using OpenAI Agents SDK.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Send Chat Message&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;message\&quot;: \&quot;Schedule a meeting with the team tomorrow at 2pm\&quot;,\n    \&quot;conversationId\&quot;: \&quot;optional-conversation-id\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/chat&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;chat&quot;]
						},
						&quot;description&quot;: &quot;Send a message to the AI assistant for calendar management.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: [
						{
							&quot;name&quot;: &quot;Success&quot;,
							&quot;originalRequest&quot;: {
								&quot;method&quot;: &quot;POST&quot;,
								&quot;body&quot;: {
									&quot;mode&quot;: &quot;raw&quot;,
									&quot;raw&quot;: &quot;{\n    \&quot;message\&quot;: \&quot;Schedule a meeting with the team tomorrow at 2pm\&quot;\n}&quot;
								},
								&quot;url&quot;: {
									&quot;raw&quot;: &quot;{{base_url}}/chat&quot;,
									&quot;host&quot;: [&quot;{{base_url}}&quot;],
									&quot;path&quot;: [&quot;chat&quot;]
								}
							},
							&quot;status&quot;: &quot;OK&quot;,
							&quot;code&quot;: 200,
							&quot;_postman_previewlanguage&quot;: &quot;json&quot;,
							&quot;body&quot;: &quot;{\n    \&quot;status\&quot;: \&quot;success\&quot;,\n    \&quot;message\&quot;: \&quot;Message processed\&quot;,\n    \&quot;data\&quot;: {\n        \&quot;response\&quot;: \&quot;I&apos;ve scheduled a team meeting for tomorrow at 2:00 PM. The event has been added to your primary calendar.\&quot;,\n        \&quot;conversationId\&quot;: \&quot;conv-123\&quot;,\n        \&quot;actions\&quot;: [\n            {\n                \&quot;type\&quot;: \&quot;event_created\&quot;,\n                \&quot;eventId\&quot;: \&quot;event-456\&quot;\n            }\n        ]\n    }\n}&quot;
						}
					]
				},
				{
					&quot;name&quot;: &quot;Get Conversations&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/chat/conversations?limit=20&amp;offset=0&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;chat&quot;, &quot;conversations&quot;],
							&quot;query&quot;: [
								{
									&quot;key&quot;: &quot;limit&quot;,
									&quot;value&quot;: &quot;20&quot;,
									&quot;description&quot;: &quot;Number of conversations to return&quot;
								},
								{
									&quot;key&quot;: &quot;offset&quot;,
									&quot;value&quot;: &quot;0&quot;,
									&quot;description&quot;: &quot;Pagination offset&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get list of user&apos;s conversations.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Start New Conversation&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/chat/conversations/new&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;chat&quot;, &quot;conversations&quot;, &quot;new&quot;]
						},
						&quot;description&quot;: &quot;Start a new conversation (closes current active conversation).\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Conversation by ID&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/chat/conversations/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;chat&quot;, &quot;conversations&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{conversation_id}}&quot;,
									&quot;description&quot;: &quot;Conversation ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get a specific conversation by ID.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Continue Conversation&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;message\&quot;: \&quot;Actually, make it 3pm instead\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/chat/conversations/:id/messages&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;chat&quot;, &quot;conversations&quot;, &quot;:id&quot;, &quot;messages&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{conversation_id}}&quot;,
									&quot;description&quot;: &quot;Conversation ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Send a message to continue an existing conversation.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Delete Conversation&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;DELETE&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/chat/conversations/:id&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;chat&quot;, &quot;conversations&quot;, &quot;:id&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;id&quot;,
									&quot;value&quot;: &quot;{{conversation_id}}&quot;,
									&quot;description&quot;: &quot;Conversation ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Delete a conversation.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Voice&quot;,
			&quot;description&quot;: &quot;Voice transcription endpoints.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Transcribe Audio&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;formdata&quot;,
							&quot;formdata&quot;: [
								{
									&quot;key&quot;: &quot;audio&quot;,
									&quot;type&quot;: &quot;file&quot;,
									&quot;description&quot;: &quot;Audio file (webm, mp3, mp4, m4a, wav, ogg, flac - max 25MB)&quot;
								}
							]
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/voice/transcribe&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;voice&quot;, &quot;transcribe&quot;]
						},
						&quot;description&quot;: &quot;Transcribe audio to text using OpenAI Whisper.\n\n**Authentication: Required (Bearer Token)**\n\n### Supported Formats\nwebm, mp3, mp4, m4a, wav, ogg, flac\n\n### Max File Size\n25MB&quot;
					},
					&quot;response&quot;: [
						{
							&quot;name&quot;: &quot;Success&quot;,
							&quot;originalRequest&quot;: {
								&quot;method&quot;: &quot;POST&quot;,
								&quot;url&quot;: {
									&quot;raw&quot;: &quot;{{base_url}}/voice/transcribe&quot;,
									&quot;host&quot;: [&quot;{{base_url}}&quot;],
									&quot;path&quot;: [&quot;voice&quot;, &quot;transcribe&quot;]
								}
							},
							&quot;status&quot;: &quot;OK&quot;,
							&quot;code&quot;: 200,
							&quot;_postman_previewlanguage&quot;: &quot;json&quot;,
							&quot;body&quot;: &quot;{\n    \&quot;status\&quot;: \&quot;success\&quot;,\n    \&quot;message\&quot;: \&quot;Audio transcribed successfully\&quot;,\n    \&quot;data\&quot;: {\n        \&quot;text\&quot;: \&quot;Schedule a meeting with John tomorrow at 3pm\&quot;,\n        \&quot;language\&quot;: \&quot;en\&quot;,\n        \&quot;duration\&quot;: 3.5\n    }\n}&quot;
						}
					]
				}
			]
		},
		{
			&quot;name&quot;: &quot;Payments&quot;,
			&quot;description&quot;: &quot;Stripe payment and subscription management.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Get Stripe Status&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/status&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;status&quot;]
						},
						&quot;description&quot;: &quot;Check if Stripe is configured and get publishable key.\n\n**No authentication required**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get Plans&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/plans&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;plans&quot;]
						},
						&quot;description&quot;: &quot;Get all available subscription plans.\n\n**No authentication required**&quot;
					},
					&quot;response&quot;: [
						{
							&quot;name&quot;: &quot;Success&quot;,
							&quot;originalRequest&quot;: {
								&quot;method&quot;: &quot;GET&quot;,
								&quot;url&quot;: {
									&quot;raw&quot;: &quot;{{base_url}}/payments/plans&quot;,
									&quot;host&quot;: [&quot;{{base_url}}&quot;],
									&quot;path&quot;: [&quot;payments&quot;, &quot;plans&quot;]
								}
							},
							&quot;status&quot;: &quot;OK&quot;,
							&quot;code&quot;: 200,
							&quot;_postman_previewlanguage&quot;: &quot;json&quot;,
							&quot;body&quot;: &quot;{\n    \&quot;status\&quot;: \&quot;success\&quot;,\n    \&quot;message\&quot;: \&quot;Plans fetched successfully\&quot;,\n    \&quot;data\&quot;: [\n        {\n            \&quot;slug\&quot;: \&quot;starter\&quot;,\n            \&quot;name\&quot;: \&quot;Starter\&quot;,\n            \&quot;price\&quot;: {\n                \&quot;monthly\&quot;: 0,\n                \&quot;yearly\&quot;: 0\n            },\n            \&quot;features\&quot;: [\&quot;Basic features\&quot;],\n            \&quot;limits\&quot;: {\n                \&quot;credits\&quot;: 100\n            }\n        },\n        {\n            \&quot;slug\&quot;: \&quot;pro\&quot;,\n            \&quot;name\&quot;: \&quot;Pro\&quot;,\n            \&quot;price\&quot;: {\n                \&quot;monthly\&quot;: 9.99,\n                \&quot;yearly\&quot;: 99.99\n            },\n            \&quot;features\&quot;: [\&quot;All features\&quot;, \&quot;Priority support\&quot;],\n            \&quot;limits\&quot;: {\n                \&quot;credits\&quot;: 1000\n            }\n        }\n    ]\n}&quot;
						}
					]
				},
				{
					&quot;name&quot;: &quot;Get Subscription Status&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/subscription&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;subscription&quot;]
						},
						&quot;description&quot;: &quot;Get current user&apos;s subscription status.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Initialize Free Plan&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/initialize-free&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;initialize-free&quot;]
						},
						&quot;description&quot;: &quot;Initialize free starter plan for user.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Create Subscription Checkout&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;planSlug\&quot;: \&quot;pro\&quot;,\n    \&quot;interval\&quot;: \&quot;monthly\&quot;,\n    \&quot;successUrl\&quot;: \&quot;https://yourapp.com/success\&quot;,\n    \&quot;cancelUrl\&quot;: \&quot;https://yourapp.com/cancel\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/checkout&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;checkout&quot;]
						},
						&quot;description&quot;: &quot;Create Stripe checkout session for subscription.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Create Credit Pack Checkout&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;credits\&quot;: 500,\n    \&quot;planSlug\&quot;: \&quot;pro\&quot;,\n    \&quot;successUrl\&quot;: \&quot;https://yourapp.com/success\&quot;,\n    \&quot;cancelUrl\&quot;: \&quot;https://yourapp.com/cancel\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/checkout/credits&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;checkout&quot;, &quot;credits&quot;]
						},
						&quot;description&quot;: &quot;Create Stripe checkout session for credit pack.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Create Portal Session&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;returnUrl\&quot;: \&quot;https://yourapp.com/settings\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/portal&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;portal&quot;]
						},
						&quot;description&quot;: &quot;Create Stripe billing portal session.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Cancel Subscription&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;reason\&quot;: \&quot;No longer need the service\&quot;,\n    \&quot;immediate\&quot;: false\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/cancel&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;cancel&quot;]
						},
						&quot;description&quot;: &quot;Cancel subscription.\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Request Refund&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;reason\&quot;: \&quot;Service did not meet expectations\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/refund&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;refund&quot;]
						},
						&quot;description&quot;: &quot;Request money-back refund (within 30-day guarantee).\n\n**Authentication: Required (Bearer Token)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Stripe Webhook&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							},
							{
								&quot;key&quot;: &quot;Stripe-Signature&quot;,
								&quot;value&quot;: &quot;{{stripe_signature}}&quot;,
								&quot;description&quot;: &quot;Stripe webhook signature&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/payments/webhook&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;payments&quot;, &quot;webhook&quot;]
						},
						&quot;description&quot;: &quot;Handle Stripe webhook events.\n\n**No authentication required** (verified via Stripe signature)&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;ACL (Access Control)&quot;,
			&quot;description&quot;: &quot;Access Control List management for calendars.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;List ACL Rules&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/acl/:calendarId&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;acl&quot;, &quot;:calendarId&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;,
									&quot;description&quot;: &quot;Calendar ID&quot;
								}
							]
						},
						&quot;description&quot;: &quot;List all access control rules for a calendar.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Get ACL Rule&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/acl/:calendarId/:ruleId&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;acl&quot;, &quot;:calendarId&quot;, &quot;:ruleId&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								},
								{
									&quot;key&quot;: &quot;ruleId&quot;,
									&quot;value&quot;: &quot;user:someone@example.com&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Get a specific ACL rule.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Create ACL Rule&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;role\&quot;: \&quot;reader\&quot;,\n    \&quot;scope\&quot;: {\n        \&quot;type\&quot;: \&quot;user\&quot;,\n        \&quot;value\&quot;: \&quot;newuser@example.com\&quot;\n    }\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/acl/:calendarId&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;acl&quot;, &quot;:calendarId&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Create a new ACL rule to grant access.\n\n**Authentication: Required (Bearer Token + Google Calendar)**\n\n### Roles\n- none, freeBusyReader, reader, writer, owner&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update ACL Rule (Partial)&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PATCH&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;role\&quot;: \&quot;writer\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/acl/:calendarId/:ruleId&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;acl&quot;, &quot;:calendarId&quot;, &quot;:ruleId&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								},
								{
									&quot;key&quot;: &quot;ruleId&quot;,
									&quot;value&quot;: &quot;user:someone@example.com&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Partially update an ACL rule.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Update ACL Rule (Full)&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;PUT&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;role\&quot;: \&quot;writer\&quot;,\n    \&quot;scope\&quot;: {\n        \&quot;type\&quot;: \&quot;user\&quot;,\n        \&quot;value\&quot;: \&quot;someone@example.com\&quot;\n    }\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/acl/:calendarId/:ruleId&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;acl&quot;, &quot;:calendarId&quot;, &quot;:ruleId&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								},
								{
									&quot;key&quot;: &quot;ruleId&quot;,
									&quot;value&quot;: &quot;user:someone@example.com&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Fully update an ACL rule.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Delete ACL Rule&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;DELETE&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/acl/:calendarId/:ruleId&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;acl&quot;, &quot;:calendarId&quot;, &quot;:ruleId&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								},
								{
									&quot;key&quot;: &quot;ruleId&quot;,
									&quot;value&quot;: &quot;user:someone@example.com&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Delete an ACL rule (revoke access).\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				},
				{
					&quot;name&quot;: &quot;Watch ACL Changes&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;id\&quot;: \&quot;unique-acl-channel-id\&quot;,\n    \&quot;type\&quot;: \&quot;web_hook\&quot;,\n    \&quot;address\&quot;: \&quot;https://your-webhook-url.com/acl-callback\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/acl/:calendarId/watch&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;acl&quot;, &quot;:calendarId&quot;, &quot;watch&quot;],
							&quot;variable&quot;: [
								{
									&quot;key&quot;: &quot;calendarId&quot;,
									&quot;value&quot;: &quot;primary&quot;
								}
							]
						},
						&quot;description&quot;: &quot;Watch for changes to ACL rules.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Channels&quot;,
			&quot;description&quot;: &quot;Manage push notification channels.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Stop Channel&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;id\&quot;: \&quot;channel-id-to-stop\&quot;,\n    \&quot;resourceId\&quot;: \&quot;resource-id-from-watch-response\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/channels/stop&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;channels&quot;, &quot;stop&quot;]
						},
						&quot;description&quot;: &quot;Stop watching resources through a channel.\n\n**Authentication: Required (Bearer Token + Google Calendar)**&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Contact&quot;,
			&quot;description&quot;: &quot;Contact form submission.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Submit Contact Form&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;formdata&quot;,
							&quot;formdata&quot;: [
								{
									&quot;key&quot;: &quot;name&quot;,
									&quot;value&quot;: &quot;John Doe&quot;,
									&quot;type&quot;: &quot;text&quot;
								},
								{
									&quot;key&quot;: &quot;email&quot;,
									&quot;value&quot;: &quot;john@example.com&quot;,
									&quot;type&quot;: &quot;text&quot;
								},
								{
									&quot;key&quot;: &quot;subject&quot;,
									&quot;value&quot;: &quot;Question about the service&quot;,
									&quot;type&quot;: &quot;text&quot;
								},
								{
									&quot;key&quot;: &quot;message&quot;,
									&quot;value&quot;: &quot;I have a question about your calendar assistant...&quot;,
									&quot;type&quot;: &quot;text&quot;
								},
								{
									&quot;key&quot;: &quot;attachments&quot;,
									&quot;type&quot;: &quot;file&quot;,
									&quot;description&quot;: &quot;Optional attachments (max 5 files, 10MB each)&quot;
								}
							]
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/contact&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;contact&quot;]
						},
						&quot;description&quot;: &quot;Submit a contact form with optional attachments.\n\n**No authentication required**\n\n### Allowed File Types\njpeg, png, gif, webp, pdf, txt, doc, docx, xls, xlsx, zip, csv\n\n### Limits\n- Max 5 files\n- Max 10MB per file&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;Webhooks&quot;,
			&quot;description&quot;: &quot;External service webhooks.&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Resend Inbound Email&quot;,
					&quot;request&quot;: {
						&quot;auth&quot;: {
							&quot;type&quot;: &quot;noauth&quot;
						},
						&quot;method&quot;: &quot;POST&quot;,
						&quot;header&quot;: [
							{
								&quot;key&quot;: &quot;Content-Type&quot;,
								&quot;value&quot;: &quot;application/json&quot;
							}
						],
						&quot;body&quot;: {
							&quot;mode&quot;: &quot;raw&quot;,
							&quot;raw&quot;: &quot;{\n    \&quot;from\&quot;: \&quot;sender@example.com\&quot;,\n    \&quot;to\&quot;: \&quot;support@yourapp.com\&quot;,\n    \&quot;subject\&quot;: \&quot;Email subject\&quot;,\n    \&quot;text\&quot;: \&quot;Email body text\&quot;,\n    \&quot;html\&quot;: \&quot;&lt;p&gt;Email body HTML&lt;/p&gt;\&quot;\n}&quot;,
							&quot;options&quot;: {
								&quot;raw&quot;: {
									&quot;language&quot;: &quot;json&quot;
								}
							}
						},
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;http://localhost:3000/webhooks/resend/inbound&quot;,
							&quot;protocol&quot;: &quot;http&quot;,
							&quot;host&quot;: [&quot;localhost&quot;],
							&quot;port&quot;: &quot;3000&quot;,
							&quot;path&quot;: [&quot;webhooks&quot;, &quot;resend&quot;, &quot;inbound&quot;]
						},
						&quot;description&quot;: &quot;Handle inbound emails from Resend.\n\n**No authentication required** (webhook endpoint)&quot;
					},
					&quot;response&quot;: []
				}
			]
		},
		{
			&quot;name&quot;: &quot;WhatsApp&quot;,
			&quot;description&quot;: &quot;WhatsApp integration (under development).&quot;,
			&quot;item&quot;: [
				{
					&quot;name&quot;: &quot;Get WhatsApp Notifications&quot;,
					&quot;request&quot;: {
						&quot;method&quot;: &quot;GET&quot;,
						&quot;header&quot;: [],
						&quot;url&quot;: {
							&quot;raw&quot;: &quot;{{base_url}}/whatsapp&quot;,
							&quot;host&quot;: [&quot;{{base_url}}&quot;],
							&quot;path&quot;: [&quot;whatsapp&quot;]
						},
						&quot;description&quot;: &quot;Get WhatsApp notifications.\n\n**Authentication: Required (Bearer Token)**\n\n*Note: This feature is under development.*&quot;
					},
					&quot;response&quot;: []
				}
			]
		}
	]
}</file><file path="be/postman/AI-Google-Calendar-Assistant.postman_environment.json">{
  &quot;id&quot;: &quot;ai-google-calendar-environment&quot;,
  &quot;name&quot;: &quot;AI Google Calendar Assistant - Local&quot;,
  &quot;values&quot;: [
    {
      &quot;key&quot;: &quot;base_url&quot;,
      &quot;value&quot;: &quot;http://localhost:3000/api&quot;,
      &quot;type&quot;: &quot;default&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;Base URL for the API. Change port if needed.&quot;
    },
    {
      &quot;key&quot;: &quot;access_token&quot;,
      &quot;value&quot;: &quot;&quot;,
      &quot;type&quot;: &quot;secret&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;Supabase access token from sign in response (session.access_token)&quot;
    },
    {
      &quot;key&quot;: &quot;refresh_token&quot;,
      &quot;value&quot;: &quot;&quot;,
      &quot;type&quot;: &quot;secret&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;Supabase refresh token from sign in response (session.refresh_token)&quot;
    },
    {
      &quot;key&quot;: &quot;user_email&quot;,
      &quot;value&quot;: &quot;&quot;,
      &quot;type&quot;: &quot;default&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;User email for testing&quot;
    },
    {
      &quot;key&quot;: &quot;user_password&quot;,
      &quot;value&quot;: &quot;&quot;,
      &quot;type&quot;: &quot;secret&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;User password for testing&quot;
    },
    {
      &quot;key&quot;: &quot;user_id&quot;,
      &quot;value&quot;: &quot;&quot;,
      &quot;type&quot;: &quot;default&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;User UUID for testing user-specific operations&quot;
    },
    {
      &quot;key&quot;: &quot;calendar_id&quot;,
      &quot;value&quot;: &quot;primary&quot;,
      &quot;type&quot;: &quot;default&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;Default calendar ID to use (use &apos;primary&apos; for main calendar)&quot;
    },
    {
      &quot;key&quot;: &quot;event_id&quot;,
      &quot;value&quot;: &quot;&quot;,
      &quot;type&quot;: &quot;default&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;Event ID for testing specific event operations&quot;
    },
    {
      &quot;key&quot;: &quot;conversation_id&quot;,
      &quot;value&quot;: &quot;&quot;,
      &quot;type&quot;: &quot;default&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;Conversation ID for chat operations&quot;
    },
    {
      &quot;key&quot;: &quot;gap_id&quot;,
      &quot;value&quot;: &quot;&quot;,
      &quot;type&quot;: &quot;default&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;Gap ID for gap recovery operations&quot;
    },
    {
      &quot;key&quot;: &quot;stripe_signature&quot;,
      &quot;value&quot;: &quot;&quot;,
      &quot;type&quot;: &quot;secret&quot;,
      &quot;enabled&quot;: true,
      &quot;description&quot;: &quot;Stripe webhook signature for testing webhooks&quot;
    }
  ],
  &quot;_postman_variable_scope&quot;: &quot;environment&quot;
}</file><file path="be/routes/google-calendar/acl-route.ts">import express, { type NextFunction, type Request, type Response } from &quot;express&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import aclController from &quot;@/controllers/google-calendar/acl-controller&quot;
import { googleTokenRefresh } from &quot;@/middlewares/google-token-refresh&quot;
import { googleTokenValidation } from &quot;@/middlewares/google-token-validation&quot;
import { withCalendarClient } from &quot;@/middlewares/calendar-client&quot;
import { logger } from &quot;@/utils/logger&quot;
import { sendR } from &quot;@/utils/http&quot;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;</file><file path="be/routes/google-calendar/calendar-list-route.ts">import express, { type NextFunction, type Request, type Response } from &quot;express&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import calendarListController from &quot;@/controllers/google-calendar/calendar-list-controller&quot;
import { googleTokenRefresh } from &quot;@/middlewares/google-token-refresh&quot;
import { googleTokenValidation } from &quot;@/middlewares/google-token-validation&quot;
import { withCalendarClient } from &quot;@/middlewares/calendar-client&quot;
import { logger } from &quot;@/utils/logger&quot;
import { sendR } from &quot;@/utils/http&quot;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;</file><file path="be/routes/google-calendar/calendar-route.ts">import express, { type NextFunction, type Request, type Response } from &quot;express&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import calendarController from &quot;@/controllers/google-calendar/calendar-controller&quot;
import { googleTokenRefresh } from &quot;@/middlewares/google-token-refresh&quot;
import { googleTokenValidation } from &quot;@/middlewares/google-token-validation&quot;
import { withCalendarClient } from &quot;@/middlewares/calendar-client&quot;
import { logger } from &quot;@/utils/logger&quot;
import { sendR } from &quot;@/utils/http&quot;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;</file><file path="be/routes/google-calendar/channels-route.ts">import channelsController from &quot;@/controllers/google-calendar/channels-controller&quot;
import express from &quot;express&quot;
import { googleTokenRefresh } from &quot;@/middlewares/google-token-refresh&quot;
import { googleTokenValidation } from &quot;@/middlewares/google-token-validation&quot;
import { withCalendarClient } from &quot;@/middlewares/calendar-client&quot;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;</file><file path="be/routes/google-calendar/chat-route.ts">import { NextFunction, Request, Response, Router } from &quot;express&quot;;
import { STATUS_RESPONSE } from &quot;@/config/constants&quot;;
import { chatController } from &quot;@/controllers/chat-controller&quot;;
import { chatStreamController } from &quot;@/controllers/chat-stream-controller&quot;;
import { googleTokenRefresh } from &quot;@/middlewares/google-token-refresh&quot;;
import { googleTokenValidation } from &quot;@/middlewares/google-token-validation&quot;;
import { aiChatRateLimiter, aiChatBurstLimiter } from &quot;@/middlewares/rate-limiter&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { sendR } from &quot;@/utils&quot;;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;;</file><file path="be/routes/google-calendar/events-route.ts">import express, { NextFunction, Request, Response } from &quot;express&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import eventsController from &quot;@/controllers/google-calendar/events-controller&quot;;
import { googleTokenRefresh } from &quot;@/middlewares/google-token-refresh&quot;;
import { googleTokenValidation } from &quot;@/middlewares/google-token-validation&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { sendR } from &quot;@/utils/http&quot;;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;;</file><file path="be/routes/admin-route.ts">import express from &quot;express&quot;;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;;
import { adminAuth } from &quot;@/middlewares/admin-auth&quot;;
import {
  getDashboardStats,
  getSubscriptionDistribution,
  getUsers,
  getUserById,
  updateUserStatus,
  updateUserRole,
  grantCredits,
  sendPasswordReset,
  getPaymentHistory,
  getSubscriptions,
  getAuditLogs,
  getRevenueTrends,
  getSubscriptionTrends,
  getAdminMe,
} from &quot;@/controllers/admin-controller&quot;;</file><file path="be/routes/contact-route.ts">import express from &quot;express&quot;;
import multer from &quot;multer&quot;;
import { contactController } from &quot;@/controllers/contact-controller&quot;;
import { apiRateLimiter } from &quot;@/middlewares/rate-limiter&quot;;
‚ãÆ----
const fileFilter = (
  _req: Express.Request,
  file: Express.Multer.File,
  callback: multer.FileFilterCallback
) =&gt;</file><file path="be/routes/cron-route.ts">import express from &quot;express&quot;;
import { cronController } from &quot;@/controllers/cron-controller&quot;;</file><file path="be/routes/payment-route.ts">import express from &quot;express&quot;
import {
  getPaymentStatus,
  getPlans,
  getSubscriptionStatus,
  initializeFreePlan,
  createSubscriptionCheckout,
  createCreditPackCheckoutSession,
  createPortalSession,
  cancelUserSubscription,
  requestRefund,
  upgradeSubscription,
  handleWebhook,
  getBillingInfo,
} from &quot;@/controllers/payment-controller&quot;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;</file><file path="be/routes/risc-route.ts">import express from &quot;express&quot;;
import { riscController } from &quot;@/controllers/risc-controller&quot;;</file><file path="be/routes/slack-route.ts">import express from &quot;express&quot;
import { env, STATUS_RESPONSE, SUPABASE } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import { getSlackReceiver } from &quot;@/slack-bot/init-bot&quot;
import {
  generateInstallUrl,
  exchangeCodeForToken,
  deactivateWorkspace,
} from &quot;@/slack-bot/services/oauth-service&quot;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;
import { sendR } from &quot;@/utils/http&quot;</file><file path="be/routes/telegram-route.ts">import express from &quot;express&quot;
import { webhookCallback } from &quot;grammy&quot;
import { env, STATUS_RESPONSE } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import { getBot } from &quot;@/telegram-bot/init-bot&quot;</file><file path="be/routes/users-route.ts">import express, {
  type NextFunction,
  type Request,
  type Response,
} from &quot;express&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { sendR } from &quot;@/utils/http&quot;;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;;
import {
  authRateLimiter,
  otpRateLimiter,
  refreshRateLimiter,
} from &quot;@/middlewares/rate-limiter&quot;;
import {
  validate,
  signUpSchema,
  signInSchema,
  otpVerificationSchema,
  allyBrainSchema,
  contextualSchedulingSchema,
  preferenceKeyParamSchema,
  reminderPreferencesSchema,
  voicePreferenceSchema,
  dailyBriefingSchema,
} from &quot;@/middlewares/validation&quot;;
import { authController } from &quot;@/controllers/users/auth-controller&quot;;
import { profileController } from &quot;@/controllers/users/profile-controller&quot;;
import { googleIntegrationController } from &quot;@/controllers/users/google-integration-controller&quot;;
import { userPreferencesController } from &quot;@/controllers/user-preferences-controller&quot;;
import { agentProfilesController } from &quot;@/controllers/agent-profiles-controller&quot;;</file><file path="be/routes/voice-route.ts">import express from &quot;express&quot;;
import multer from &quot;multer&quot;;
import voiceController from &quot;@/controllers/voice-controller&quot;;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;;</file><file path="be/routes/webhooks-route.ts">import express from &quot;express&quot;;
import { contactController } from &quot;@/controllers/contact-controller&quot;;</file><file path="be/routes/whatsapp-route.ts">import express from &quot;express&quot;
import { whatsAppController } from &quot;@/controllers/whatsapp-controller&quot;
import { webhookSignatureMiddleware } from &quot;@/whatsapp-bot/services/webhook-security&quot;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;</file><file path="be/services/admin-service.ts">import { SUPABASE } from &quot;@/config&quot;;
import {
  ACTIVE_SUBSCRIPTION_STATUSES,
  MODIFIABLE_SUBSCRIPTION_STATUSES,
} from &quot;@/utils/db/subscription-status&quot;;
import type {
  AdminUser,
  AdminDashboardStats,
  SubscriptionDistribution,
  AdminUserListParams,
  AdminUserListResponse,
  AdminAuditLogEntry,
  AdminPayment,
  UserRole,
  UserStatus,
} from &quot;@/types&quot;;
export const getDashboardStats = async (): Promise&lt;AdminDashboardStats&gt; =&gt;
export const getSubscriptionDistribution = async (): Promise&lt;
  SubscriptionDistribution[]
&gt; =&gt; {
  try {
    const { data: subscriptions, error: subError } = await SUPABASE.from(&quot;subscriptions&quot;)
      .select(&quot;plan_id&quot;)
      .in(&quot;status&quot;, [...ACTIVE_SUBSCRIPTION_STATUSES]);
export const getUserList = async (
  params: AdminUserListParams
): Promise&lt;AdminUserListResponse&gt; =&gt;
export const getUserById = async (userId: string): Promise&lt;AdminUser | null&gt; =&gt;
export const updateUserStatus = async (
  userId: string,
  newStatus: UserStatus,
  adminUserId: string,
  reason?: string
): Promise&lt;void&gt; =&gt;
export const updateUserRole = async (
  userId: string,
  newRole: UserRole,
  adminUserId: string,
  reason?: string
): Promise&lt;void&gt; =&gt;
export const grantCredits = async (
  userId: string,
  credits: number,
  adminUserId: string,
  reason: string
): Promise&lt;void&gt; =&gt;
export const getPaymentHistory = async (_params: {
  page?: number;
  limit?: number;
  userId?: string;
  status?: string;
}): Promise&lt;
export const getAuditLogs = async (_params: {
  page?: number;
  limit?: number;
  adminUserId?: string;
  actionType?: string;
}): Promise&lt;
export const logAdminAction = async (_params: {
  adminUserId: string;
  action: string;
  resourceType: string;
  resourceId: string;
  oldValues?: Record&lt;string, unknown&gt;;
  newValues?: Record&lt;string, unknown&gt;;
  ipAddress?: string;
  userAgent?: string;
}): Promise&lt;void&gt; =&gt;
export const sendPasswordResetEmail = async (
  userEmail: string,
  adminUserId: string
): Promise&lt;void&gt; =&gt;
export interface RevenueTrendPoint {
  month: string;
  revenue: number;
  subscriptions: number;
}
export interface SubscriptionTrendPoint {
  date: string;
  newSubscriptions: number;
  cancelledSubscriptions: number;
  totalActive: number;
}
export const getRevenueTrends = async (months: number = 6): Promise&lt;RevenueTrendPoint[]&gt; =&gt;
export const getSubscriptionTrends = async (days: number = 7): Promise&lt;SubscriptionTrendPoint[]&gt; =&gt;
export const getAdminUserInfo = async (userId: string): Promise&lt;AdminUser | null&gt; =&gt;</file><file path="be/services/lemonsqueezy-service.ts">import {
  createCheckout,
  getSubscription,
  updateSubscription,
  cancelSubscription as lsCancelSubscription,
  getCustomer,
  listCustomers,
  listSubscriptionInvoices,
  type Checkout,
  type Subscription,
  type Customer,
  type SubscriptionInvoice,
} from &quot;@lemonsqueezy/lemonsqueezy.js&quot;;
import { SUPABASE, env } from &quot;@/config&quot;;
import { initializeLemonSqueezy, LEMONSQUEEZY_CONFIG } from &quot;@/config/clients/lemonsqueezy&quot;;
import { ACTIVE_SUBSCRIPTION_STATUSES, VALID_SUBSCRIPTION_STATUSES } from &quot;@/utils/db/subscription-status&quot;;
export type PlanSlug = &quot;starter&quot; | &quot;pro&quot; | &quot;executive&quot;;
export type PlanInterval = &quot;monthly&quot; | &quot;yearly&quot; | &quot;one_time&quot;;
export type SubscriptionStatus = &quot;trialing&quot; | &quot;active&quot; | &quot;paused&quot; | &quot;past_due&quot; | &quot;unpaid&quot; | &quot;canceled&quot; | &quot;incomplete&quot; | &quot;incomplete_expired&quot;;
type LemonSqueezyStatus = &quot;on_trial&quot; | &quot;active&quot; | &quot;paused&quot; | &quot;past_due&quot; | &quot;unpaid&quot; | &quot;cancelled&quot; | &quot;expired&quot;;
const mapLemonSqueezyStatusToDb = (lsStatus: string): SubscriptionStatus =&gt;
export interface Plan {
  id: string;
  name: string;
  slug: PlanSlug;
  description: string | null;
  lemonsqueezy_product_id: string | null;
  lemonsqueezy_variant_id_monthly: string | null;
  lemonsqueezy_variant_id_yearly: string | null;
  price_monthly_cents: number;
  price_yearly_cents: number;
  price_per_use_cents: number;
  ai_interactions_monthly: number | null;
  action_pack_size: number | null;
  features: string[];
  is_active: boolean;
  is_popular: boolean;
  is_highlighted: boolean;
}
export interface UserSubscription {
  id: string;
  user_id: string;
  plan_id: string;
  lemonsqueezy_customer_id: string | null;
  lemonsqueezy_subscription_id: string | null;
  lemonsqueezy_variant_id: string | null;
  status: SubscriptionStatus;
  interval: PlanInterval;
  trial_start: string | null;
  trial_end: string | null;
  current_period_start: string | null;
  current_period_end: string | null;
  first_payment_at: string | null;
  money_back_eligible_until: string | null;
  cancel_at_period_end: boolean;
  canceled_at: string | null;
  cancellation_reason: string | null;
  ai_interactions_used: number;
  credits_remaining: number;
  created_at: string;
  updated_at: string;
}
export interface CreditPack {
  id: string;
  user_id: string;
  lemonsqueezy_order_id: string | null;
  credits_purchased: number;
  credits_remaining: number;
  price_cents: number;
  status: string;
  purchased_at: string | null;
  expires_at: string | null;
  created_at: string;
  updated_at: string;
}
export interface UserAccess {
  has_access: boolean;
  subscription_status: SubscriptionStatus | null;
  plan_name: string | null;
  plan_slug: string | null;
  interactions_remaining: number | null;
  credits_remaining: number;
  trial_days_left: number | null;
  money_back_eligible: boolean;
}
export interface CreateCheckoutSessionParams {
  userId: string;
  userEmail: string;
  userName?: string;
  planSlug: PlanSlug;
  interval: &quot;monthly&quot; | &quot;yearly&quot;;
  successUrl?: string;
  cancelUrl?: string;
}
export interface CreateCreditPackCheckoutParams {
  userId: string;
  userEmail: string;
  credits: number;
  planSlug: PlanSlug;
  successUrl?: string;
  cancelUrl?: string;
}
‚ãÆ----
export const getActivePlans = async (): Promise&lt;Plan[]&gt; =&gt;
export const getPlanBySlug = async (slug: PlanSlug): Promise&lt;Plan | null&gt; =&gt;
export const getPlanById = async (planId: string): Promise&lt;Plan | null&gt; =&gt;
export const getUserSubscription = async (userId: string): Promise&lt;UserSubscription | null&gt; =&gt;
export const getSubscriptionByLemonSqueezyId = async (lsSubscriptionId: string): Promise&lt;UserSubscription | null&gt; =&gt;
export const checkUserAccess = async (userId: string): Promise&lt;UserAccess&gt; =&gt;
export const createSubscriptionRecord = async (params: {
  userId: string;
  planId: string;
  lemonSqueezyCustomerId?: string;
  lemonSqueezySubscriptionId?: string;
  lemonSqueezyVariantId?: string;
  status?: SubscriptionStatus;
  interval?: PlanInterval;
  trialDays?: number;
}): Promise&lt;UserSubscription&gt; =&gt;
export const updateSubscriptionFromWebhook = async (lsSubscription: {
  id: string;
  customerId: string;
  variantId: string;
  status: string;
  trialEndsAt: string | null;
  renewsAt: string | null;
  endsAt: string | null;
  createdAt: string;
  cancelledAt?: string | null;
}): Promise&lt;UserSubscription | null&gt; =&gt;
export const cancelSubscription = async (subscriptionId: string, reason?: string, cancelImmediately = false): Promise&lt;UserSubscription | null&gt; =&gt;
export const createCheckoutSession = async (params: CreateCheckoutSessionParams): Promise&lt;
export const createCreditPackCheckout = async (_params: CreateCreditPackCheckoutParams): Promise&lt;
export const getCustomerPortalUrl = async (customerId: string): Promise&lt;string&gt; =&gt;
export const isWebhookEventProcessed = async (eventId: string): Promise&lt;boolean&gt; =&gt;
export const recordWebhookEvent = async (eventId: string, eventType: string, payload: object, processed = false, errorMessage?: string): Promise&lt;void&gt; =&gt;
export const handleOrderCreated = async (order: {
  id: string;
  customerId: string;
  userEmail: string;
  status: string;
  totalFormatted: string;
  customData?: Record&lt;string, string&gt;;
}): Promise&lt;void&gt; =&gt;
export const handleSubscriptionCreated = async (subscription: {
  id: string;
  customerId: string;
  variantId: string;
  status: string;
  trialEndsAt: string | null;
  renewsAt: string | null;
  endsAt: string | null;
  createdAt: string;
  customData?: Record&lt;string, string&gt;;
}): Promise&lt;void&gt; =&gt;
export const handleSubscriptionPaymentSuccess = async (subscription:
export const handleSubscriptionPaymentFailed = async (subscriptionId: string): Promise&lt;void&gt; =&gt;
export const recordUsage = async (userId: string, _actionType: string, quantity = 1): Promise&lt;boolean&gt; =&gt;
export const processMoneyBackRefund = async (subscriptionId: string, reason?: string): Promise&lt;
export const ensureFreePlan = async (userId: string): Promise&lt;UserSubscription | null&gt; =&gt;
export interface UpgradeSubscriptionParams {
  userId: string;
  newPlanSlug: PlanSlug;
  newInterval: &quot;monthly&quot; | &quot;yearly&quot;;
}
export const upgradeSubscriptionPlan = async (params: UpgradeSubscriptionParams): Promise&lt;
export type TransactionStatus = &quot;succeeded&quot; | &quot;pending&quot; | &quot;failed&quot;;
export type CardBrand = &quot;visa&quot; | &quot;mastercard&quot; | &quot;amex&quot; | &quot;discover&quot; | &quot;unknown&quot;;
export interface PaymentMethodInfo {
  id: string;
  brand: CardBrand;
  last4: string;
  expiryMonth: number;
  expiryYear: number;
  isDefault: boolean;
}
export interface TransactionInfo {
  id: string;
  date: string;
  description: string;
  amount: number;
  currency: string;
  status: TransactionStatus;
  invoiceUrl: string | null;
}
export interface BillingOverview {
  paymentMethod: PaymentMethodInfo | null;
  transactions: TransactionInfo[];
}
export const getBillingOverview = async (userId: string): Promise&lt;BillingOverview&gt; =&gt;</file><file path="be/services/user-preferences-service.ts">import { SUPABASE } from &quot;@/config&quot;;
import type { Json } from &quot;@/database.types&quot;;
export type PreferenceKey =
  | &quot;ally_brain&quot;
  | &quot;contextual_scheduling&quot;
  | &quot;reminder_defaults&quot;
  | &quot;voice_preference&quot;
  | &quot;agent_profile&quot;
  | &quot;daily_briefing&quot;;
export interface AllyBrainPreference {
  enabled: boolean;
  instructions: string;
}
export interface ContextualSchedulingPreference {
  enabled: boolean;
}
export interface EventReminder {
  method: &quot;email&quot; | &quot;popup&quot;;
  minutes: number;
}
export interface ReminderDefaultsPreference {
  enabled: boolean;
  defaultReminders: EventReminder[];
  useCalendarDefaults: boolean;
}
export interface VoicePreference {
  enabled: boolean;
  voice: &quot;alloy&quot; | &quot;echo&quot; | &quot;fable&quot; | &quot;onyx&quot; | &quot;nova&quot; | &quot;shimmer&quot;;
}
export interface AgentProfilePreference {
  profileId: string;
}
export interface DailyBriefingPreference {
  enabled: boolean;
  time: string;
  timezone: string;
  lastSentDate?: string;
}
export type PreferenceValue =
  | AllyBrainPreference
  | ContextualSchedulingPreference
  | ReminderDefaultsPreference
  | VoicePreference
  | AgentProfilePreference
  | DailyBriefingPreference;
export interface PreferenceResult&lt;T&gt; {
  value: T;
  updatedAt?: string;
  isDefault: boolean;
}
‚ãÆ----
export function isValidPreferenceKey(key: string): key is PreferenceKey
type UserPreferences = Record&lt;string, Json&gt;;
async function getUserPreferences(userId: string): Promise&lt;UserPreferences&gt;
async function setUserPreferences(
  userId: string,
  preferences: UserPreferences
): Promise&lt;void&gt;
export async function getPreference&lt;T extends PreferenceValue&gt;(
  userId: string,
  key: PreferenceKey
): Promise&lt;T | null&gt;
export async function getPreferenceWithMeta&lt;T extends PreferenceValue&gt;(
  userId: string,
  key: PreferenceKey
): Promise&lt;PreferenceResult&lt;T&gt;&gt;
export async function getAllPreferences(
  userId: string,
  _category: string = &quot;assistant&quot;
): Promise&lt;Record&lt;string, PreferenceResult&lt;PreferenceValue&gt;&gt;&gt;
export async function updatePreference&lt;T extends PreferenceValue&gt;(
  userId: string,
  key: PreferenceKey,
  value: T,
  _category: string = &quot;assistant&quot;
): Promise&lt;PreferenceResult&lt;T&gt;&gt;
export async function getAllyBrainPreference(
  userId: string
): Promise&lt;AllyBrainPreference | null&gt;
export async function getContextualSchedulingPreference(
  userId: string
): Promise&lt;ContextualSchedulingPreference | null&gt;
export async function getReminderDefaultsPreference(
  userId: string
): Promise&lt;ReminderDefaultsPreference | null&gt;
export async function getVoicePreference(
  userId: string
): Promise&lt;VoicePreference | null&gt;
export async function getAgentProfilePreference(
  userId: string
): Promise&lt;AgentProfilePreference | null&gt;
export async function getDailyBriefingPreference(
  userId: string
): Promise&lt;DailyBriefingPreference | null&gt;</file><file path="be/shared/adapters/index.ts"></file><file path="be/shared/adapters/openai-adapter.ts">import { tool, type RunContext } from &quot;@openai/agents&quot;
import { z } from &quot;zod&quot;
import {
  getEventSchema,
  insertEventSchema,
  updateEventSchema,
  deleteEventSchema,
  checkConflictsSchema,
  preCreateValidationSchema,
} from &quot;@/shared/tools/schemas/event-schemas&quot;
import { selectCalendarSchema } from &quot;@/shared/tools/schemas/calendar-schemas&quot;
import {
  analyzeGapsSchema,
  fillGapSchema,
  formatGapsDisplaySchema,
} from &quot;@/shared/tools/schemas/gap-schemas&quot;
import {
  type HandlerContext,
  getEventHandler,
  insertEventHandler,
  updateEventHandler,
  deleteEventHandler,
  validateUserHandler,
  getTimezoneHandler,
  selectCalendarHandler,
  checkConflictsHandler,
  preCreateValidationHandler,
  analyzeGapsHandler,
  fillGapHandler,
  formatGapsHandler,
} from &quot;@/shared/tools/handlers&quot;
import { type AgentContext, stringifyError } from &quot;@/shared/types&quot;
‚ãÆ----
export function getEmailFromContext(
  runContext: RunContext&lt;AgentContext&gt; | undefined,
  toolName: string,
): string
function createHandlerContext(email: string): HandlerContext</file><file path="be/shared/context/entity-tracker.ts">import type { calendar_v3 } from &quot;googleapis&quot;
import {
  unifiedContextStore,
  type Modality,
  type EventReference,
  type CalendarReference,
} from &quot;./unified-context-store&quot;
export type TrackedEvent = {
  eventId: string
  calendarId: string
  summary: string
  start: string
  end: string
}
export type TrackedCalendar = {
  calendarId: string
  calendarName: string
  isPrimary: boolean
}
function extractEventData(
  event: calendar_v3.Schema$Event,
  calendarId: string
): TrackedEvent | null
‚ãÆ----
async trackEvent(
    userId: string,
    event: calendar_v3.Schema$Event,
    calendarId: string,
    modality: Modality
): Promise&lt;void&gt;
async trackCalendar(
    userId: string,
    calendar: TrackedCalendar,
    modality: Modality
): Promise&lt;void&gt;
async resolveEventReference(userId: string): Promise&lt;EventReference | null&gt;
async resolveCalendarReference(
    userId: string
): Promise&lt;CalendarReference | null&gt;
async hasRecentEvent(userId: string, maxAgeMs = 30 * 60 * 1000): Promise&lt;boolean&gt;
async hasRecentCalendar(
    userId: string,
    maxAgeMs = 30 * 60 * 1000
): Promise&lt;boolean&gt;</file><file path="be/shared/context/index.ts"></file><file path="be/shared/context/unified-context-store.ts">import { redisClient, isRedisConnected } from &quot;@/config/clients/redis&quot;
import { logger } from &quot;@/utils/logger&quot;
export type Modality = &quot;chat&quot; | &quot;voice&quot; | &quot;telegram&quot; | &quot;whatsapp&quot; | &quot;api&quot;
export type EventReference = {
  eventId: string
  calendarId: string
  summary: string
  start: string
  end: string
  storedAt: string
  modality: Modality
}
export type CalendarReference = {
  calendarId: string
  calendarName: string
  isPrimary: boolean
  storedAt: string
  modality: Modality
}
export type ConversationContext = {
  conversationId?: string
  currentTopic?: string
  pendingAction?: {
    type: &quot;create_event&quot; | &quot;update_event&quot; | &quot;delete_event&quot; | &quot;fill_gap&quot;
    payload: Record&lt;string, unknown&gt;
    expiresAt: string
  }
  lastInteraction: string
  modality: Modality
}
export type UserPreferencesContext = {
  timezone: string
  locale: string
  defaultCalendarId?: string
  voiceEnabled: boolean
}
export type ContextSnapshot = {
  userId: string
  lastEvent?: EventReference
  lastCalendar?: CalendarReference
  conversation?: ConversationContext
  preferences?: UserPreferencesContext
  modality: Modality
  fetchedAt: string
}
‚ãÆ----
async setLastEvent(
    userId: string,
    event: Omit&lt;EventReference, &quot;storedAt&quot;&gt;,
    modality: Modality
): Promise&lt;void&gt;
async getLastEvent(userId: string): Promise&lt;EventReference | null&gt;
async clearLastEvent(userId: string): Promise&lt;void&gt;
async setLastCalendar(
    userId: string,
    calendar: Omit&lt;CalendarReference, &quot;storedAt&quot;&gt;,
    modality: Modality
): Promise&lt;void&gt;
async getLastCalendar(userId: string): Promise&lt;CalendarReference | null&gt;
async setConversation(
    userId: string,
    context: Omit&lt;ConversationContext, &quot;lastInteraction&quot;&gt;,
    modality: Modality
): Promise&lt;void&gt;
async getConversation(userId: string): Promise&lt;ConversationContext | null&gt;
async setPendingAction(
    userId: string,
    action: NonNullable&lt;ConversationContext[&quot;pendingAction&quot;]&gt;,
    modality: Modality
): Promise&lt;void&gt;
async clearPendingAction(userId: string): Promise&lt;void&gt;
async setPreferences(
    userId: string,
    preferences: UserPreferencesContext
): Promise&lt;void&gt;
async getPreferences(userId: string): Promise&lt;UserPreferencesContext | null&gt;
async setModality(userId: string, modality: Modality): Promise&lt;void&gt;
async getModality(userId: string): Promise&lt;Modality | null&gt;
async getSnapshot(userId: string): Promise&lt;ContextSnapshot&gt;
async clearAll(userId: string): Promise&lt;void&gt;
async touch(userId: string): Promise&lt;void&gt;</file><file path="be/shared/llm/providers/anthropic-provider.ts">import Anthropic from &quot;@anthropic-ai/sdk&quot;
import type {
  LLMProvider,
  ChatParams,
  ChatResponse,
  StreamChunk,
  ProviderConfig,
  Message,
  MessageContent,
  ToolDefinition,
  JsonSchema,
  JsonSchemaProperty,
} from &quot;../types&quot;
type AnthropicContent = string | Anthropic.ContentBlockParam[]
function convertContent(content: MessageContent): AnthropicContent
function getStringContent(content: MessageContent): string
function convertMessages(messages: Message[]): Anthropic.MessageParam[]
function convertJsonSchemaProperty(prop: JsonSchemaProperty): Anthropic.Tool.InputSchema
function convertJsonSchema(schema: JsonSchema): Anthropic.Tool.InputSchema
function convertTools(tools: ToolDefinition[]): Anthropic.Tool[]
function getSystemPrompt(messages: Message[], systemPrompt?: string): string | undefined
export function createAnthropicProvider(config: ProviderConfig): LLMProvider
‚ãÆ----
async chat(params: ChatParams): Promise&lt;ChatResponse&gt;
async *stream(params: ChatParams): AsyncIterable&lt;StreamChunk&gt;</file><file path="be/shared/llm/providers/google-provider.ts">import {
  GoogleGenerativeAI,
  SchemaType,
  type Content,
  type Part,
  type FunctionDeclarationSchema,
  type FunctionDeclarationSchemaProperty,
  type Tool,
} from &quot;@google/generative-ai&quot;
import type {
  LLMProvider,
  ChatParams,
  ChatResponse,
  StreamChunk,
  ProviderConfig,
  Message,
  MessageContent,
  ToolDefinition,
  JsonSchema,
  JsonSchemaProperty,
} from &quot;../types&quot;
function getStringContent(content: MessageContent): string
function convertContentToParts(content: MessageContent): Part[]
function convertMessages(messages: Message[]): Content[]
function convertProperty(prop: JsonSchemaProperty): FunctionDeclarationSchemaProperty
function convertJsonSchemaToGoogleSchema(schema: JsonSchema): FunctionDeclarationSchema
function convertTools(tools: ToolDefinition[]): Tool[]
function getSystemInstruction(messages: Message[], systemPrompt?: string): string | undefined
export function createGoogleProvider(config: ProviderConfig): LLMProvider
‚ãÆ----
async chat(params: ChatParams): Promise&lt;ChatResponse&gt;
async *stream(params: ChatParams): AsyncIterable&lt;StreamChunk&gt;</file><file path="be/shared/llm/providers/openai-provider.ts">import OpenAI from &quot;openai&quot;
import type {
  LLMProvider,
  ChatParams,
  ChatResponse,
  StreamChunk,
  ProviderConfig,
  Message,
  MessageContent,
  ToolDefinition,
} from &quot;../types&quot;
type OpenAIContent = string | OpenAI.ChatCompletionContentPart[]
function convertContent(content: MessageContent): OpenAIContent
function getStringContent(content: MessageContent): string
function convertMessages(
  messages: Message[],
  systemPrompt?: string
): OpenAI.ChatCompletionMessageParam[]
function convertTools(
  tools: ToolDefinition[]
): OpenAI.ChatCompletionTool[]
export function createOpenAIProvider(config: ProviderConfig): LLMProvider
‚ãÆ----
async chat(params: ChatParams): Promise&lt;ChatResponse&gt;
async *stream(params: ChatParams): AsyncIterable&lt;StreamChunk&gt;</file><file path="be/shared/llm/index.ts"></file><file path="be/shared/llm/provider-factory.ts">import type { AgentProfile } from &quot;@/shared/orchestrator/agent-profiles&quot;
import { getModelSpec } from &quot;@/shared/orchestrator/model-registry&quot;
import type { LLMProvider, ProviderConfig } from &quot;./types&quot;
import { createOpenAIProvider } from &quot;./providers/openai-provider&quot;
import { createGoogleProvider } from &quot;./providers/google-provider&quot;
import { createAnthropicProvider } from &quot;./providers/anthropic-provider&quot;
function getApiKey(provider: string): string
export function createProviderFromProfile(profile: AgentProfile): LLMProvider
export function isOpenAIProvider(profile: AgentProfile): boolean</file><file path="be/shared/llm/types.ts">export type MessageRole = &quot;system&quot; | &quot;user&quot; | &quot;assistant&quot; | &quot;tool&quot;
export interface ImageContent {
  type: &quot;image&quot;
  data: string
  mimeType: &quot;image/png&quot; | &quot;image/jpeg&quot; | &quot;image/webp&quot; | &quot;image/gif&quot;
}
export interface TextContent {
  type: &quot;text&quot;
  text: string
}
export type MessageContent = string | (TextContent | ImageContent)[]
export interface Message {
  role: MessageRole
  content: MessageContent
  name?: string
  toolCallId?: string
  toolCalls?: ToolCall[]
}
export interface ToolCall {
  id: string
  name: string
  arguments: string
}
export interface JsonSchemaProperty {
  type: &quot;string&quot; | &quot;number&quot; | &quot;integer&quot; | &quot;boolean&quot; | &quot;array&quot; | &quot;object&quot;
  description?: string
  items?: JsonSchemaProperty
  properties?: Record&lt;string, JsonSchemaProperty&gt;
  required?: string[]
  nullable?: boolean
}
export interface JsonSchema {
  type: &quot;object&quot;
  properties: Record&lt;string, JsonSchemaProperty&gt;
  required?: string[]
  description?: string
}
export interface ToolDefinition {
  name: string
  description: string
  parameters: JsonSchema
}
export interface ChatParams {
  messages: Message[]
  tools?: ToolDefinition[]
  systemPrompt?: string
  temperature?: number
  maxTokens?: number
}
export interface ChatResponse {
  content: string
  toolCalls?: ToolCall[]
  finishReason: &quot;stop&quot; | &quot;tool_calls&quot; | &quot;length&quot; | &quot;error&quot;
}
export interface StreamChunk {
  type: &quot;text_delta&quot; | &quot;tool_call_start&quot; | &quot;tool_call_delta&quot; | &quot;done&quot; | &quot;error&quot;
  content?: string
  toolCall?: Partial&lt;ToolCall&gt;
  error?: string
}
export interface LLMProvider {
  readonly name: string
  readonly supportsTools: boolean
  readonly supportsStreaming: boolean
  chat(params: ChatParams): Promise&lt;ChatResponse&gt;
  stream(params: ChatParams): AsyncIterable&lt;StreamChunk&gt;
}
‚ãÆ----
chat(params: ChatParams): Promise&lt;ChatResponse&gt;
stream(params: ChatParams): AsyncIterable&lt;StreamChunk&gt;
‚ãÆ----
export interface ProviderConfig {
  apiKey: string
  modelId: string
  temperature?: number
  maxTokens?: number
}</file><file path="be/shared/orchestrator/agent-profiles.ts">export type AgentTier = &quot;free&quot; | &quot;pro&quot; | &quot;enterprise&quot;
export type AgentCapability =
  | &quot;calendar_read&quot;
  | &quot;calendar_write&quot;
  | &quot;gap_analysis&quot;
  | &quot;smart_scheduling&quot;
  | &quot;multi_calendar&quot;
  | &quot;voice&quot;
export type VoiceStyle = &quot;alloy&quot; | &quot;echo&quot; | &quot;fable&quot; | &quot;onyx&quot; | &quot;nova&quot; | &quot;shimmer&quot;
export interface AgentProfile {
  id: string
  displayName: string
  tagline: string
  description: string
  tier: AgentTier
  capabilities: AgentCapability[]
  modelConfig: {
    provider: &quot;openai&quot; | &quot;google&quot; | &quot;anthropic&quot;
    tier: &quot;fast&quot; | &quot;balanced&quot; | &quot;powerful&quot;
  }
  voice: {
    style: VoiceStyle
    speed: number
  }
  personality: {
    conciseness: number
    casualness: number
    notes: string
  }
  version: &quot;v1&quot;
}
‚ãÆ----
export function getAgentProfile(profileId: string): AgentProfile
export function getProfilesForTier(tier: AgentTier): AgentProfile[]</file><file path="be/shared/orchestrator/index.ts"></file><file path="be/shared/orchestrator/model-registry.ts">import type { AgentProfile } from &quot;./agent-profiles&quot;
export type ModelProvider = &quot;openai&quot; | &quot;google&quot; | &quot;anthropic&quot;
export type ModelTier = &quot;fast&quot; | &quot;balanced&quot; | &quot;powerful&quot;
export interface ModelSpec {
  provider: ModelProvider
  modelId: string
  maxTokens: number
  temperature: number
  supportsTools: boolean
}
‚ãÆ----
export function getModelSpec(profile: AgentProfile): ModelSpec</file><file path="be/shared/orchestrator/orchestrator-factory.ts">import type { AgentProfile } from &quot;./agent-profiles&quot;
import { getAgentProfile, DEFAULT_AGENT_PROFILE_ID } from &quot;./agent-profiles&quot;
export interface AgentProfileResponse {
  id: string
  displayName: string
  tagline: string
  description: string
  tier: string
  supportsVoice: boolean
}
export function formatProfileForClient(profile: AgentProfile): AgentProfileResponse</file><file path="be/shared/orchestrator/text-agent-factory.ts">import {
  run,
  type RunRawModelStreamEvent,
  type RunAgentUpdatedStreamEvent,
  type RunItemStreamEvent,
} from &quot;@openai/agents&quot;
import type { Agent as OpenAIAgent } from &quot;@openai/agents&quot;
import type { AgentProfile } from &quot;./agent-profiles&quot;
import { getAgentProfile, DEFAULT_AGENT_PROFILE_ID } from &quot;./agent-profiles&quot;
import { isOpenAIProvider, createProviderFromProfile } from &quot;@/shared/llm&quot;
import type { LLMProvider, Message, MessageContent, ToolDefinition, ImageContent, TextContent } from &quot;@/shared/llm&quot;
import { buildBasePrompt } from &quot;@/shared/prompts&quot;
import { executeTools } from &quot;@/shared/tools/tool-executor&quot;
export type Modality = &quot;chat&quot; | &quot;telegram&quot; | &quot;whatsapp&quot;
export interface TextAgentConfig {
  profile: AgentProfile
  systemPrompt: string
  provider: LLMProvider | null
  useNativeAgentSDK: boolean
}
export interface CreateTextAgentOptions {
  profileId?: string
  modality: Modality
}
export interface StreamEvent {
  type: &quot;text_delta&quot; | &quot;tool_start&quot; | &quot;tool_complete&quot; | &quot;agent_switch&quot; | &quot;done&quot; | &quot;error&quot;
  content?: string
  fullContent?: string
  toolName?: string
  fromAgent?: string
  toAgent?: string
  error?: string
}
export interface RunTextAgentOptions {
  prompt: string
  images?: ImageContent[]
  context?: Record&lt;string, unknown&gt;
  tools?: ToolDefinition[]
  onEvent: (event: StreamEvent) =&gt; void | Promise&lt;void&gt;
}
function buildSystemPrompt(profile: AgentProfile, modality: Modality): string
export function createTextAgent(options: CreateTextAgentOptions): TextAgentConfig
async function runWithAgentSDK(
  agent: OpenAIAgent,
  prompt: string,
  context: Record&lt;string, unknown&gt;,
  options: RunTextAgentOptions
): Promise&lt;string&gt;
‚ãÆ----
function buildUserContent(prompt: string, images?: ImageContent[]): MessageContent
async function runWithProvider(
  provider: LLMProvider,
  systemPrompt: string,
  options: RunTextAgentOptions &amp; { email?: string }
): Promise&lt;string&gt;
export async function runTextAgent(
  config: TextAgentConfig,
  options: RunTextAgentOptions &amp; {
    openaiAgent?: OpenAIAgent
    email?: string
  }
): Promise&lt;string&gt;
export function supportsTools(config: TextAgentConfig): boolean</file><file path="be/shared/projections/calendar-projections.ts">import type { ProjectionMode } from &quot;@/shared/types&quot;
‚ãÆ----
export interface CalendarProjectionVoiceLite {
  name: string
  primary: boolean
}
export interface CalendarProjectionChatStandard {
  id: string
  name: string
  primary: boolean
  backgroundColor?: string
  foregroundColor?: string
}
export interface CalendarProjectionFull {
  id: string
  name: string
  summary?: string
  description?: string
  primary: boolean
  backgroundColor?: string
  foregroundColor?: string
  accessRole?: string
  timeZone?: string
  selected?: boolean
  hidden?: boolean
}
interface RawCalendarEntry {
  id?: string | null
  summary?: string | null
  description?: string | null
  primary?: boolean | null
  backgroundColor?: string | null
  foregroundColor?: string | null
  accessRole?: string | null
  timeZone?: string | null
  selected?: boolean | null
  hidden?: boolean | null
}
export function projectCalendarVoiceLite(
  calendar: RawCalendarEntry,
): CalendarProjectionVoiceLite
export function projectCalendarChatStandard(
  calendar: RawCalendarEntry,
): CalendarProjectionChatStandard
export function projectCalendarFull(
  calendar: RawCalendarEntry,
): CalendarProjectionFull
export function projectCalendar(
  calendar: RawCalendarEntry,
  mode: ProjectionMode,
):
  | CalendarProjectionVoiceLite
  | CalendarProjectionChatStandard
  | CalendarProjectionFull {
switch (mode)
export function projectCalendars&lt;M extends ProjectionMode&gt;(
export function formatCalendarsForVoice(
  calendars: CalendarProjectionVoiceLite[],
): string</file><file path="be/shared/projections/event-projections.ts">import type { calendar_v3 } from &quot;googleapis&quot;
import type { ProjectionMode } from &quot;@/shared/types&quot;
type Event = calendar_v3.Schema$Event
‚ãÆ----
export interface EventProjectionVoiceLite {
  summary: string
  startTime: string
  endTime: string
  isAllDay: boolean
  location?: string
}
export interface EventProjectionChatStandard {
  id: string
  summary: string
  description?: string
  startTime: string
  endTime: string
  isAllDay: boolean
  location?: string
  calendarName?: string
  htmlLink?: string
  attendeeCount?: number
  hasReminders: boolean
}
export interface EventProjectionFull {
  id: string
  summary: string
  description?: string
  startTime: string
  endTime: string
  startDate?: string
  endDate?: string
  isAllDay: boolean
  location?: string
  calendarId?: string
  calendarName?: string
  htmlLink?: string
  attendees?: Array&lt;{
    email: string
    displayName?: string
    responseStatus?: string
    organizer?: boolean
  }&gt;
  reminders?: {
    useDefault: boolean
    overrides?: Array&lt;{ method: string; minutes: number }&gt;
  }
  recurrence?: string[]
  status?: string
  visibility?: string
  colorId?: string
  conferenceData?: {
    conferenceId?: string
    entryPoints?: Array&lt;{ entryPointType: string; uri: string }&gt;
  }
}
function formatEventTime(event: Event):
export function projectEventVoiceLite(event: Event): EventProjectionVoiceLite
export function projectEventChatStandard(
  event: Event,
  calendarName?: string,
): EventProjectionChatStandard
export function projectEventFull(
  event: Event,
  calendarId?: string,
  calendarName?: string,
): EventProjectionFull
export function projectEvent(
  event: Event,
  mode: ProjectionMode,
  calendarId?: string,
  calendarName?: string,
): EventProjectionVoiceLite | EventProjectionChatStandard | EventProjectionFull
export function projectEvents&lt;M extends ProjectionMode&gt;(
  events: Event[],
  mode: M,
  calendarId?: string,
  calendarName?: string,
): M extends &quot;VOICE_LITE&quot;
  ? EventProjectionVoiceLite[]
  : M extends &quot;CHAT_STANDARD&quot;
    ? EventProjectionChatStandard[]
    : EventProjectionFull[] {
return events.map((e)
export function formatEventForVoice(event: EventProjectionVoiceLite): string
export function formatEventsForVoice(
  events: EventProjectionVoiceLite[],
): string
function formatTimeForSpeech(isoTime: string): string</file><file path="be/shared/projections/index.ts"></file><file path="be/shared/prompts/base-prompts.ts">export function buildBasePrompt(options: {
  modality: &quot;voice&quot; | &quot;chat&quot; | &quot;telegram&quot; | &quot;whatsapp&quot;
  conciseness: number
  responseStyle?: keyof typeof RESPONSE_STYLE
}): string
export function buildOrchestratorPrompt(options: {
  modality: &quot;voice&quot; | &quot;chat&quot; | &quot;telegram&quot;
}): string</file><file path="be/shared/prompts/index.ts"></file><file path="be/shared/tools/handlers/direct-handlers.ts">import { fetchCredentialsByEmail } from &quot;@/utils/auth&quot;
import {
  checkEventConflicts,
  initUserSupabaseCalendarWithTokensAndUpdateTokens,
} from &quot;@/utils/calendar&quot;
import { userRepository } from &quot;@/utils/repositories/UserRepository&quot;
import { MODELS, SUPABASE, env } from &quot;@/config&quot;
import OpenAI from &quot;openai&quot;
import isEmail from &quot;validator/lib/isEmail&quot;
import type { calendar_v3 } from &quot;googleapis&quot;
import type {
  SelectCalendarParams,
  CheckConflictsParams,
  PreCreateValidationParams,
} from &quot;../schemas&quot;
import {
  type HandlerContext,
  type ConflictCheckResult,
  categorizeError,
} from &quot;@/shared/types&quot;
type Event = calendar_v3.Schema$Event
‚ãÆ----
export type ValidateUserResult = {
  exists: boolean
  user?: Record&lt;string, unknown&gt;
  error?: string
}
export type TimezoneResult = {
  timezone: string
  error?: string
}
export type SelectCalendarResult = {
  calendarId: string
  calendarName: string
  matchReason?: string
}
export type PreCreateValidationResult = {
  valid: boolean
  timezone: string
  calendarId: string
  calendarName: string
  conflicts: ConflictCheckResult
  error?: string
}
export async function validateUserHandler(
  ctx: HandlerContext,
): Promise&lt;ValidateUserResult&gt;
export async function getTimezoneHandler(
  ctx: HandlerContext,
): Promise&lt;TimezoneResult&gt;
export interface UserCalendar {
  calendar_id: string
  calendar_name: string
}
export async function getCalendarCategoriesByEmail(
  email: string,
): Promise&lt;UserCalendar[]&gt;
export async function selectCalendarHandler(
  params: SelectCalendarParams,
  ctx: HandlerContext,
): Promise&lt;SelectCalendarResult&gt;
export async function checkConflictsHandler(
  params: CheckConflictsParams,
  ctx: HandlerContext,
): Promise&lt;ConflictCheckResult&gt;
export async function preCreateValidationHandler(
  params: PreCreateValidationParams,
  ctx: HandlerContext,
): Promise&lt;PreCreateValidationResult&gt;</file><file path="be/shared/tools/handlers/event-handlers.ts">import { ACTION } from &quot;@/config&quot;
import {
  eventsHandler,
  initUserSupabaseCalendarWithTokensAndUpdateTokens,
} from &quot;@/utils/calendar&quot;
import { fetchCredentialsByEmail } from &quot;@/utils/auth&quot;
import { getEvents } from &quot;@/utils/calendar/get-events&quot;
import isEmail from &quot;validator/lib/isEmail&quot;
import type { calendar_v3 } from &quot;googleapis&quot;
import type {
  GetEventParams,
  InsertEventParams,
  UpdateEventParams,
  DeleteEventParams,
  EventTime,
} from &quot;../schemas&quot;
import type { HandlerContext } from &quot;@/shared/types&quot;
type Event = calendar_v3.Schema$Event
‚ãÆ----
function isValidDateTime(dt: string): boolean
async function applyDefaultTimezoneIfNeeded(
  event: Partial&lt;Event&gt;,
  email: string,
): Promise&lt;Partial&lt;Event&gt;&gt;
function formatEventData(eventLike: Partial&lt;Event&gt;): Event
function convertEventTime(time: EventTime | null): Event[&quot;start&quot;] | undefined
‚ãÆ----
export async function getEventHandler(
  params: GetEventParams,
  ctx: HandlerContext,
): Promise&lt;unknown&gt;
‚ãÆ----
const computeDefaultTimeMax = (timeMin: string): string =&gt;
‚ãÆ----
export async function insertEventHandler(
  params: InsertEventParams,
  ctx: HandlerContext,
): Promise&lt;unknown&gt;
export async function updateEventHandler(
  params: UpdateEventParams,
  ctx: HandlerContext,
): Promise&lt;unknown&gt;
export async function deleteEventHandler(
  params: DeleteEventParams,
  ctx: HandlerContext,
): Promise&lt;unknown&gt;</file><file path="be/shared/tools/handlers/gap-handlers.ts">import {
  analyzeGapsForUser,
  fillGap as fillGapInternal,
  formatGapsForDisplay,
} from &quot;@/utils/calendar/gap-recovery&quot;
import type {
  AnalyzeGapsParams,
  FillGapParams,
  FormatGapsDisplayParams,
} from &quot;../schemas&quot;
import type { HandlerContext } from &quot;@/shared/types&quot;
‚ãÆ----
export type GapCandidateDTO = {
  id: string
  start: string
  end: string
  durationMinutes: number
  durationFormatted: string
  precedingEventSummary: string
  precedingEventLink: string | null
  followingEventSummary: string
  followingEventLink: string | null
  suggestion: string | null
  confidence: number
}
export type AnalyzeGapsResult = {
  gaps: GapCandidateDTO[]
  count: number
  error?: string
}
export type FillGapResult = {
  success: boolean
  eventId?: string
  error?: string
}
export type FormatGapsResult = {
  formatted: string
  error?: string
}
export async function analyzeGapsHandler(
  params: AnalyzeGapsParams,
  ctx: HandlerContext,
): Promise&lt;AnalyzeGapsResult&gt;
export async function fillGapHandler(
  params: FillGapParams,
  ctx: HandlerContext,
): Promise&lt;FillGapResult&gt;
export function formatGapsHandler(
  params: FormatGapsDisplayParams,
): FormatGapsResult</file><file path="be/shared/tools/handlers/index.ts"></file><file path="be/shared/tools/schemas/calendar-schemas.ts">import { z } from &quot;zod&quot;
import validator from &quot;validator&quot;
‚ãÆ----
export type RegisterUserParams = z.infer&lt;typeof registerUserSchema&gt;
export type SelectCalendarParams = z.infer&lt;typeof selectCalendarSchema&gt;</file><file path="be/shared/tools/schemas/event-schemas.ts">import { z } from &quot;zod&quot;
import { TIMEZONE } from &quot;@/config&quot;
‚ãÆ----
export const requiredString = (description: string, message = &quot;Required.&quot;)
‚ãÆ----
export const makeEventTime = ()
‚ãÆ----
const cleanEmptyToNull = (val: string | null | undefined)
const cleanEventTime = (val: z.infer&lt;typeof eventTimeSchema&gt; | null) =&gt;
‚ãÆ----
export type EventTime = z.infer&lt;typeof eventTimeSchema&gt;
export type GetEventParams = z.infer&lt;typeof getEventSchema&gt;
export type InsertEventParams = z.infer&lt;typeof insertEventSchema&gt;
export type UpdateEventParams = z.infer&lt;typeof updateEventSchema&gt;
export type DeleteEventParams = z.infer&lt;typeof deleteEventSchema&gt;
export type CheckConflictsParams = z.infer&lt;typeof checkConflictsSchema&gt;
export type CheckConflictsAllCalendarsParams = z.infer&lt;
  typeof checkConflictsAllCalendarsSchema
&gt;
export type PreCreateValidationParams = z.infer&lt;
  typeof preCreateValidationSchema
&gt;</file><file path="be/shared/tools/schemas/gap-schemas.ts">import { z } from &quot;zod&quot;
‚ãÆ----
export type AnalyzeGapsParams = z.infer&lt;typeof analyzeGapsSchema&gt;
export type FillGapParams = z.infer&lt;typeof fillGapSchema&gt;
export type FormatGapsDisplayParams = z.infer&lt;typeof formatGapsDisplaySchema&gt;</file><file path="be/shared/tools/schemas/index.ts"></file><file path="be/shared/tools/schemas/reminder-schemas.ts">import { z } from &quot;zod&quot;
‚ãÆ----
export type EventReminder = z.infer&lt;typeof eventReminderSchema&gt;
export type EventReminders = z.infer&lt;typeof eventRemindersSchema&gt;
export type SetEventRemindersParams = z.infer&lt;typeof setEventRemindersSchema&gt;
export type GetCalendarDefaultRemindersParams = z.infer&lt;
  typeof getCalendarDefaultRemindersSchema
&gt;
export type UpdateCalendarDefaultRemindersParams = z.infer&lt;
  typeof updateCalendarDefaultRemindersSchema
&gt;
export type UserReminderPreferencesParams = z.infer&lt;
  typeof updateUserReminderPreferencesSchema
&gt;</file><file path="be/shared/tools/tool-executor.ts">import type { ToolCall } from &quot;@/shared/llm/types&quot;
import type { HandlerContext } from &quot;./handlers&quot;
import {
  getEventHandler,
  insertEventHandler,
  updateEventHandler,
  deleteEventHandler,
  validateUserHandler,
  getTimezoneHandler,
  selectCalendarHandler,
  checkConflictsHandler,
  preCreateValidationHandler,
  analyzeGapsHandler,
  fillGapHandler,
  formatGapsHandler,
} from &quot;./handlers&quot;
export interface ToolExecutorContext extends HandlerContext {}
export interface ToolExecutionResult {
  toolCallId: string
  name: string
  result: unknown
  error?: string
}
type ParamsAndCtxHandler = (params: unknown, ctx: ToolExecutorContext) =&gt; Promise&lt;unknown&gt;
type CtxOnlyHandler = (ctx: ToolExecutorContext) =&gt; Promise&lt;unknown&gt;
type SyncHandler = (params: unknown) =&gt; unknown
‚ãÆ----
export async function executeTool(
  toolCall: ToolCall,
  ctx: ToolExecutorContext
): Promise&lt;ToolExecutionResult&gt;
export async function executeTools(
  toolCalls: ToolCall[],
  ctx: ToolExecutorContext
): Promise&lt;ToolExecutionResult[]&gt;
export function getAvailableToolNames(): string[]
export function isToolAvailable(name: string): boolean</file><file path="be/shared/types/index.ts">export interface HandlerContext {
  email: string
}
export interface AgentContext {
  email: string
}
export type ProjectionMode = &quot;VOICE_LITE&quot; | &quot;CHAT_STANDARD&quot; | &quot;FULL&quot;
export type Modality = &quot;chat&quot; | &quot;voice&quot; | &quot;telegram&quot; | &quot;whatsapp&quot; | &quot;api&quot;
export interface ConflictingEvent {
  id: string
  summary: string
  start: string
  end: string
  calendarId: string
  calendarName: string
}
export interface ConflictCheckResult {
  hasConflicts: boolean
  conflictingEvents: ConflictingEvent[]
  error?: string
}
export function stringifyError(error: unknown): string
export function categorizeError(error: unknown):</file><file path="be/shared/index.ts"></file><file path="be/slack-bot/handlers/agent-handler.ts">import { InputGuardrailTripwireTriggered } from &quot;@openai/agents&quot;
import { ORCHESTRATOR_AGENT } from &quot;@/ai-agents&quot;
import { activateAgent } from &quot;@/utils/ai&quot;
import { logger } from &quot;@/utils/logger&quot;
import { unifiedContextStore } from &quot;@/shared/context&quot;
import {
  createTextAgent,
  runTextAgent,
} from &quot;@/shared/orchestrator/text-agent-factory&quot;
import { getAgentProfile } from &quot;@/shared/orchestrator/agent-profiles&quot;
import { slackConversation, buildContextPrompt } from &quot;../utils/conversation-history&quot;
import { getSession, updateSession } from &quot;../utils/session&quot;
import { summarizeMessages } from &quot;../utils/summarize&quot;
interface AgentRequestParams {
  message: string
  email: string
  slackUserId: string
  teamId: string
}
‚ãÆ----
const buildSlackPrompt = (
  email: string,
  message: string,
  conversationContext?: string,
  languageCode?: string
): string =&gt;
export const handleAgentRequest = async (params: AgentRequestParams): Promise&lt;string&gt; =&gt;
const handleConflictResponse = (
  slackUserId: string,
  teamId: string,
  output: string
): string =&gt;
export const handleConfirmation = async (
  slackUserId: string,
  teamId: string,
  email: string
): Promise&lt;string&gt; =&gt;
export const handleCancellation = (slackUserId: string, teamId: string): string =&gt;</file><file path="be/slack-bot/handlers/commands.ts">import type { AllMiddlewareArgs, SlackCommandMiddlewareArgs } from &quot;@slack/bolt&quot;;
import { SlackResponseBuilder } from &quot;../utils/response-builder&quot;;
import { getSession } from &quot;../utils/session&quot;;
import { handleAgentRequest } from &quot;./agent-handler&quot;;
import { handleSlackAuth } from &quot;../middleware/auth-handler&quot;;
import { logger } from &quot;@/utils/logger&quot;;
type CommandArgs = SlackCommandMiddlewareArgs &amp; AllMiddlewareArgs;
const requireAuth = async (args: CommandArgs): Promise&lt;
export const handleHelpCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleTodayCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleTomorrowCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleWeekCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleMonthCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleFreeCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleBusyCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleStatusCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleCreateCommand = async (args: CommandArgs, eventDescription: string): Promise&lt;void&gt; =&gt;
export const handleUpdateCommand = async (args: CommandArgs, updateDescription: string): Promise&lt;void&gt; =&gt;
export const handleDeleteCommand = async (args: CommandArgs, deleteDescription: string): Promise&lt;void&gt; =&gt;
export const handleSearchCommand = async (args: CommandArgs, searchQuery: string): Promise&lt;void&gt; =&gt;
export const handleAnalyticsCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleCalendarsCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleSettingsCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;
export const handleFeedbackCommand = async (args: CommandArgs, feedbackMessage: string): Promise&lt;void&gt; =&gt;
export const parseAndRouteCommand = async (args: CommandArgs): Promise&lt;void&gt; =&gt;</file><file path="be/slack-bot/handlers/message-handler.ts">import type { AllMiddlewareArgs, SlackEventMiddlewareArgs } from &quot;@slack/bolt&quot;;
import { getSession, isDuplicateMessage } from &quot;../utils/session&quot;;
import { handleAgentRequest, handleCancellation, handleConfirmation } from &quot;./agent-handler&quot;;
import { checkRateLimit } from &quot;../middleware/rate-limiter&quot;;
import { handleSlackAuth } from &quot;../middleware/auth-handler&quot;;
import { logger } from &quot;@/utils/logger&quot;;
‚ãÆ----
async function addTypingIndicator(
  client: MessageArgs[&quot;client&quot;],
  channel: string,
  timestamp: string
): Promise&lt;void&gt;
async function removeTypingIndicator(
  client: MessageArgs[&quot;client&quot;],
  channel: string,
  timestamp: string
): Promise&lt;void&gt;
type MessageArgs = SlackEventMiddlewareArgs&lt;&quot;message&quot;&gt; &amp; AllMiddlewareArgs;
type AppMentionArgs = SlackEventMiddlewareArgs&lt;&quot;app_mention&quot;&gt; &amp; AllMiddlewareArgs;
export const handleSlackMessage = async (args: MessageArgs): Promise&lt;void&gt; =&gt;
export const handleAppMention = async (args: AppMentionArgs): Promise&lt;void&gt; =&gt;</file><file path="be/slack-bot/middleware/auth-handler.ts">import type { WebClient } from &quot;@slack/web-api&quot;
import { SUPABASE } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import { getSession, updateSession, type SlackSessionData } from &quot;../utils/session&quot;
import { getSlackUserEmail } from &quot;../utils/user-resolver&quot;
import validator from &quot;validator&quot;
‚ãÆ----
interface AuthResult {
  success: boolean
  session: SlackSessionData
  needsAuth: boolean
  authMessage?: string
}
const sendEmailOtp = async (email: string): Promise&lt;
const verifyEmailOtp = async (
  email: string,
  token: string
): Promise&lt;
const isOtpCode = (text: string): boolean =&gt;
const extractEmailFromSlackFormat = (text: string): string =&gt;
export const handleSlackAuth = async (
  client: WebClient,
  slackUserId: string,
  teamId: string,
  messageText?: string
): Promise&lt;AuthResult&gt; =&gt;
const linkSlackUser = async (
  client: WebClient,
  slackUserId: string,
  teamId: string,
  email: string,
  session: SlackSessionData
): Promise&lt;void&gt; =&gt;
const linkSlackUserDirect = async (
  client: WebClient,
  slackUserId: string,
  teamId: string,
  email: string,
  userId: string,
  session: SlackSessionData
): Promise&lt;void&gt; =&gt;</file><file path="be/slack-bot/middleware/rate-limiter.ts">import { logger } from &quot;@/utils/logger&quot;
interface RateLimitEntry {
  count: number
  resetAt: number
}
‚ãÆ----
const getRateLimitKey = (userId: string, type: &quot;message&quot; | &quot;auth&quot;): string =&gt;
export const checkRateLimit = (
  userId: string,
  type: &quot;message&quot; | &quot;auth&quot; = &quot;message&quot;
):
export const resetRateLimit = (userId: string, type: &quot;message&quot; | &quot;auth&quot; = &quot;message&quot;): void =&gt;</file><file path="be/slack-bot/services/oauth-service.ts">import { WebClient } from &quot;@slack/web-api&quot;
import { env, SUPABASE } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import type { Database } from &quot;@/database.types&quot;
‚ãÆ----
type SlackWorkspaceRow = Database[&quot;public&quot;][&quot;Tables&quot;][&quot;slack_workspaces&quot;][&quot;Row&quot;]
type SlackWorkspaceInsert = Database[&quot;public&quot;][&quot;Tables&quot;][&quot;slack_workspaces&quot;][&quot;Insert&quot;]
type SlackWorkspaceUpdate = Database[&quot;public&quot;][&quot;Tables&quot;][&quot;slack_workspaces&quot;][&quot;Update&quot;]
export interface SlackWorkspace {
  id: string
  team_id: string
  team_name: string | null
  bot_token: string
  bot_user_id: string | null
  app_id: string | null
  scope: string | null
  is_active: boolean | null
}
export interface OAuthExchangeResult {
  success: boolean
  workspace?: SlackWorkspace
  error?: string
}
export const generateInstallUrl = (state?: string): string =&gt;
export const exchangeCodeForToken = async (
  code: string
): Promise&lt;OAuthExchangeResult&gt; =&gt;
const saveWorkspaceToken = async (
  data: SlackWorkspaceInsert
): Promise&lt;SlackWorkspace | null&gt; =&gt;
const toSlackWorkspace = (row: SlackWorkspaceRow): SlackWorkspace =&gt; (
export const getWorkspaceToken = async (
  teamId: string
): Promise&lt;string | null&gt; =&gt;
export const deactivateWorkspace = async (teamId: string): Promise&lt;boolean&gt; =&gt;
export const getAllActiveWorkspaces = async (): Promise&lt;SlackWorkspace[]&gt; =&gt;</file><file path="be/slack-bot/utils/conversation-history.ts">import { SUPABASE } from &quot;@/config/clients/supabase&quot;
import { logger } from &quot;@/utils/logger&quot;
import type { userAndAiMessageProps } from &quot;@/types&quot;
import { isToday } from &quot;@/utils/date/date-helpers&quot;
‚ãÆ----
type ConversationContext = {
  messages: userAndAiMessageProps[]
  summary?: string
  lastUpdated: string
}
const calculateContextLength = (messages: userAndAiMessageProps[]): number =&gt;
const slackIdToNumber = (slackUserId: string, teamId: string): number =&gt;
export const getUserIdFromSlack = async (slackUserId: string): Promise&lt;string | null&gt; =&gt;
export const getTodayConversationState = async (
  slackUserId: string,
  teamId: string
): Promise&lt;
const getConversationMessages = async (
  conversationId: string
): Promise&lt;userAndAiMessageProps[]&gt; =&gt;
export const createConversationState = async (
  slackUserId: string,
  teamId: string,
  initialMessage?: userAndAiMessageProps
): Promise&lt;
export const getOrCreateTodayContext = async (
  slackUserId: string,
  teamId: string
): Promise&lt;
export const addMessageToContext = async (
  slackUserId: string,
  teamId: string,
  message: userAndAiMessageProps,
  summarizeFn: (messages: userAndAiMessageProps[]) =&gt; Promise&lt;string&gt;
): Promise&lt;ConversationContext&gt; =&gt;
‚ãÆ----
export const buildContextPrompt = (context: ConversationContext): string =&gt;</file><file path="be/slack-bot/utils/response-builder.ts">import type {
  KnownBlock,
  SectionBlock,
  HeaderBlock,
  DividerBlock,
  ContextBlock,
} from &quot;@slack/web-api&quot;
export class SlackResponseBuilder
‚ãÆ----
header(emoji: string, text: string): this
section(text: string, accessory?: SectionBlock[&quot;accessory&quot;]): this
bulletList(items: string[]): this
numberedList(items: string[]): this
divider(): this
context(elements: string[]): this
footer(text: string): this
field(label: string, value: string): this
eventCard(event: {
    title: string
    date?: string
    time?: string
    location?: string
    calendar?: string
}): this
error(message: string): this
success(message: string): this
warning(message: string): this
info(message: string): this
build():
static create(): SlackResponseBuilder
‚ãÆ----
export const formatEventList = (
  events: Array&lt;{
    summary?: string
    start?: { dateTime?: string; date?: string }
    end?: { dateTime?: string; date?: string }
    location?: string
  }&gt;
):
const formatDateTime = (isoString: string): string =&gt;</file><file path="be/slack-bot/utils/session.ts">import type { SupportedLocale } from &quot;@/telegram-bot/i18n&quot;
export interface SlackSessionData {
  slackUserId: string
  slackTeamId: string
  email?: string
  userId?: string
  firstName?: string
  username?: string
  codeLang?: SupportedLocale
  messageCount: number
  lastProcessedTs?: string
  isProcessing: boolean
  pendingConfirmation?: {
    eventData: unknown
    conflictingEvents: unknown[]
  }
  pendingEmailVerification?: {
    email: string
    expiresAt: number
  }
  lastActivity: number
}
‚ãÆ----
const getSessionKey = (slackUserId: string, teamId: string): string =&gt;
export const getSession = (slackUserId: string, teamId: string): SlackSessionData =&gt;
export const updateSession = (
  slackUserId: string,
  teamId: string,
  updates: Partial&lt;SlackSessionData&gt;
): SlackSessionData =&gt;
export const resetSession = (slackUserId: string, teamId: string): void =&gt;
export const isDuplicateMessage = (
  slackUserId: string,
  teamId: string,
  ts: string
): boolean =&gt;
export const cleanupExpiredSessions = (): void =&gt;</file><file path="be/slack-bot/utils/summarize.ts">import { MODELS } from &quot;@/config/constants/ai&quot;
import OpenAI from &quot;openai&quot;
import { env } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import type { userAndAiMessageProps } from &quot;@/types&quot;
‚ãÆ----
const formatMessagesForSummary = (messages: userAndAiMessageProps[]): string =&gt;
export const summarizeMessages = async (messages: userAndAiMessageProps[]): Promise&lt;string&gt; =&gt;
const createFallbackSummary = (messages: userAndAiMessageProps[]): string =&gt;</file><file path="be/slack-bot/utils/user-resolver.ts">import type { WebClient } from &quot;@slack/web-api&quot;
import { logger } from &quot;@/utils/logger&quot;
‚ãÆ----
export const getSlackUserEmail = async (
  client: WebClient,
  userId: string
): Promise&lt;string | null&gt; =&gt;
export const clearUserEmailCache = (): void =&gt;</file><file path="be/slack-bot/index.ts"></file><file path="be/slack-bot/init-bot.ts">import {
  App,
  ExpressReceiver,
  type SlackEventMiddlewareArgs,
  type AllMiddlewareArgs,
} from &quot;@slack/bolt&quot;
import { WebClient } from &quot;@slack/web-api&quot;
import { env } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import { handleSlackMessage, handleAppMention } from &quot;./handlers/message-handler&quot;
import { parseAndRouteCommand } from &quot;./handlers/commands&quot;
import { getWorkspaceToken } from &quot;./services/oauth-service&quot;
‚ãÆ----
export const getSlackApp = (): App | null =&gt;
export const getSlackReceiver = (): ExpressReceiver | null =&gt;
export const getClientForTeam = async (teamId: string): Promise&lt;WebClient | null&gt; =&gt;
export const clearClientCache = (teamId?: string): void =&gt;
const initializeApp = ():
‚ãÆ----
const authorizeFn = async (
‚ãÆ----
export const initSlackBot = (): ExpressReceiver | null =&gt;</file><file path="be/supabase/migrations/20260109000000_admin_rbac.sql">DO $$ BEGIN
    CREATE TYPE user_role AS ENUM (&apos;user&apos;, &apos;admin&apos;, &apos;moderator&apos;, &apos;support&apos;);
EXCEPTION
    WHEN duplicate_object THEN null;
END $$;
ALTER TABLE users ADD COLUMN IF NOT EXISTS role user_role DEFAULT &apos;user&apos; NOT NULL;
CREATE INDEX IF NOT EXISTS idx_users_role ON users(role);
COMMENT ON COLUMN users.role IS &apos;User role for RBAC: user (default), admin, moderator, support&apos;;
ALTER TABLE audit_logs ADD COLUMN IF NOT EXISTS admin_user_id UUID REFERENCES users(id);
ALTER TABLE audit_logs ADD COLUMN IF NOT EXISTS admin_action_type TEXT;
CREATE INDEX IF NOT EXISTS idx_audit_logs_admin_user_id
ON audit_logs(admin_user_id)
WHERE admin_user_id IS NOT NULL;
CREATE INDEX IF NOT EXISTS idx_audit_logs_admin_action
ON audit_logs(admin_action_type)
WHERE admin_action_type IS NOT NULL;
COMMENT ON COLUMN audit_logs.admin_user_id IS &apos;ID of admin who performed the action&apos;;
COMMENT ON COLUMN audit_logs.admin_action_type IS &apos;Type of admin action: user_status_change, subscription_update, credits_grant, password_reset, role_change&apos;;
DROP POLICY IF EXISTS admin_read_all_users ON users;
DROP POLICY IF EXISTS admin_update_users ON users;
DROP POLICY IF EXISTS admin_read_all_subscriptions ON subscriptions;
DROP POLICY IF EXISTS admin_update_subscriptions ON subscriptions;
DROP POLICY IF EXISTS admin_read_all_payment_history ON payment_history;
DROP POLICY IF EXISTS admin_read_all_audit_logs ON audit_logs;
DROP POLICY IF EXISTS admin_insert_audit_logs ON audit_logs;
CREATE POLICY admin_read_all_users ON users
FOR SELECT
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_update_users ON users
FOR UPDATE
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
)
WITH CHECK (
  (id != auth.uid()) OR
  (id = auth.uid() AND role = (SELECT role FROM users WHERE id = auth.uid()))
);
CREATE POLICY admin_read_all_subscriptions ON subscriptions
FOR SELECT
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_update_subscriptions ON subscriptions
FOR UPDATE
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_read_all_payment_history ON payment_history
FOR SELECT
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_read_all_audit_logs ON audit_logs
FOR SELECT
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
CREATE POLICY admin_insert_audit_logs ON audit_logs
FOR INSERT
TO authenticated
WITH CHECK (
  EXISTS (
    SELECT 1 FROM users u
    WHERE u.id = auth.uid()
    AND u.role = &apos;admin&apos;
  )
);
DROP VIEW IF EXISTS v_admin_dashboard_stats;
DROP VIEW IF EXISTS v_subscription_distribution;
DROP VIEW IF EXISTS v_admin_user_list;
CREATE VIEW v_admin_dashboard_stats AS
SELECT
  (SELECT COUNT(*) FROM users WHERE deactivated_at IS NULL) as total_users,
  (SELECT COUNT(*) FROM users WHERE status = &apos;active&apos; AND deactivated_at IS NULL) as active_users,
  (SELECT COUNT(*) FROM users WHERE created_at &gt; NOW() - INTERVAL &apos;24 hours&apos; AND deactivated_at IS NULL) as new_users_today,
  (SELECT COUNT(*) FROM users WHERE created_at &gt; NOW() - INTERVAL &apos;7 days&apos; AND deactivated_at IS NULL) as new_users_week,
  (SELECT COUNT(*) FROM users WHERE created_at &gt; NOW() - INTERVAL &apos;30 days&apos; AND deactivated_at IS NULL) as new_users_month,
  (SELECT COUNT(*) FROM subscriptions WHERE status IN (&apos;active&apos;, &apos;trialing&apos;)) as active_subscriptions,
  (SELECT COALESCE(SUM(amount_cents), 0) FROM payment_history WHERE status = &apos;succeeded&apos;) as total_revenue_cents,
  (SELECT COALESCE(SUM(amount_cents), 0) FROM payment_history WHERE status = &apos;succeeded&apos; AND created_at &gt; NOW() - INTERVAL &apos;30 days&apos;) as mrr_cents;
CREATE VIEW v_subscription_distribution AS
SELECT
  p.slug as plan_slug,
  p.name as plan_name,
  COUNT(s.id) as subscriber_count,
  ROUND(
    COUNT(s.id)::numeric /
    NULLIF((SELECT COUNT(*) FROM subscriptions WHERE status IN (&apos;active&apos;, &apos;trialing&apos;)), 0) * 100,
    2
  ) as percentage
FROM plans p
LEFT JOIN subscriptions s ON s.plan_id = p.id AND s.status IN (&apos;active&apos;, &apos;trialing&apos;)
WHERE p.is_active = true
GROUP BY p.slug, p.name, p.display_order
ORDER BY p.display_order ASC;
CREATE VIEW v_admin_user_list AS
SELECT
  u.id,
  u.email,
  u.first_name,
  u.last_name,
  u.display_name,
  u.avatar_url,
  u.status,
  u.role,
  u.timezone,
  u.locale,
  u.email_verified,
  u.created_at,
  u.updated_at,
  s.id as subscription_id,
  s.status as subscription_status,
  s.interval as subscription_interval,
  s.current_period_end,
  s.ai_interactions_used,
  s.credits_remaining,
  p.name as plan_name,
  p.slug as plan_slug,
  EXISTS(SELECT 1 FROM oauth_tokens ot WHERE ot.user_id = u.id AND ot.is_valid = true) as has_oauth_connected
FROM users u
LEFT JOIN subscriptions s ON s.user_id = u.id AND s.status IN (&apos;active&apos;, &apos;trialing&apos;, &apos;past_due&apos;, &apos;paused&apos;)
LEFT JOIN plans p ON p.id = s.plan_id
WHERE u.deactivated_at IS NULL
ORDER BY u.created_at DESC;
GRANT SELECT ON v_admin_dashboard_stats TO authenticated;
GRANT SELECT ON v_subscription_distribution TO authenticated;
GRANT SELECT ON v_admin_user_list TO authenticated;</file><file path="be/supabase/migrations/20260110100000_simplify_schema.sql">ALTER TABLE users ADD COLUMN IF NOT EXISTS preferences JSONB DEFAULT &apos;{}&apos;;
DO $$
DECLARE
  r RECORD;
BEGIN
  FOR r IN SELECT user_id, preference_key, preference_value FROM user_preferences
  LOOP
    UPDATE users
    SET preferences = preferences || jsonb_build_object(r.preference_key, r.preference_value)
    WHERE id = r.user_id;
  END LOOP;
END $$;
DROP TABLE IF EXISTS agent_sessions CASCADE;
DROP TABLE IF EXISTS conversation_embeddings CASCADE;
DROP TABLE IF EXISTS conversation_summaries CASCADE;
DROP TABLE IF EXISTS user_preferences CASCADE;
DROP TABLE IF EXISTS gap_candidates CASCADE;
DROP TABLE IF EXISTS gap_recovery_settings CASCADE;
DROP TABLE IF EXISTS credit_packs CASCADE;
DROP TABLE IF EXISTS usage_records CASCADE;
DROP TABLE IF EXISTS payment_history CASCADE;
DROP TABLE IF EXISTS audit_logs CASCADE;
DROP FUNCTION IF EXISTS match_user_preference_embeddings CASCADE;
DROP FUNCTION IF EXISTS record_usage CASCADE;</file><file path="be/supabase/migrations/20260112180000_add_slack_users.sql">CREATE TABLE IF NOT EXISTS slack_users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    slack_user_id TEXT NOT NULL UNIQUE,
    slack_team_id TEXT NOT NULL,
    slack_username TEXT,
    first_name TEXT,
    is_linked BOOLEAN DEFAULT false,
    pending_email TEXT,
    last_activity_at TIMESTAMPTZ DEFAULT NOW(),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX IF NOT EXISTS idx_slack_users_user_id ON slack_users(user_id);
CREATE INDEX IF NOT EXISTS idx_slack_users_slack_user_id ON slack_users(slack_user_id);
CREATE INDEX IF NOT EXISTS idx_slack_users_team_id ON slack_users(slack_team_id);
ALTER TABLE slack_users ENABLE ROW LEVEL SECURITY;
CREATE POLICY &quot;Users can view their own slack links&quot;
    ON slack_users FOR SELECT
    USING (auth.uid() = user_id);
CREATE POLICY &quot;Users can update their own slack links&quot;
    ON slack_users FOR UPDATE
    USING (auth.uid() = user_id);
CREATE POLICY &quot;Service role has full access to slack_users&quot;
    ON slack_users FOR ALL
    USING (auth.jwt() -&gt;&gt; &apos;role&apos; = &apos;service_role&apos;);
CREATE OR REPLACE FUNCTION update_slack_users_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
DROP TRIGGER IF EXISTS trigger_slack_users_updated_at ON slack_users;
CREATE TRIGGER trigger_slack_users_updated_at
    BEFORE UPDATE ON slack_users
    FOR EACH ROW
    EXECUTE FUNCTION update_slack_users_updated_at();</file><file path="be/supabase/migrations/20260113000000_add_slack_workspaces.sql">CREATE TABLE IF NOT EXISTS slack_workspaces (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  team_id TEXT NOT NULL UNIQUE,
  team_name TEXT,
  bot_token TEXT NOT NULL,
  bot_user_id TEXT,
  app_id TEXT,
  scope TEXT,
  authed_user_id TEXT,
  enterprise_id TEXT,
  enterprise_name TEXT,
  is_enterprise_install BOOLEAN DEFAULT FALSE,
  installed_at TIMESTAMPTZ DEFAULT NOW(),
  installed_by_user_id TEXT,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX IF NOT EXISTS idx_slack_workspaces_team_id ON slack_workspaces(team_id);
CREATE INDEX IF NOT EXISTS idx_slack_workspaces_is_active ON slack_workspaces(is_active);
ALTER TABLE slack_workspaces ENABLE ROW LEVEL SECURITY;
CREATE POLICY &quot;Service role has full access to slack_workspaces&quot;
ON slack_workspaces FOR ALL
USING (auth.role() = &apos;service_role&apos;);
CREATE OR REPLACE FUNCTION update_slack_workspaces_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;
DROP TRIGGER IF EXISTS trigger_slack_workspaces_updated_at ON slack_workspaces;
CREATE TRIGGER trigger_slack_workspaces_updated_at
BEFORE UPDATE ON slack_workspaces
FOR EACH ROW
EXECUTE FUNCTION update_slack_workspaces_updated_at();</file><file path="be/supabase/migrations/20260113020000_add_slack_webhooks.sql">ALTER TABLE slack_workspaces
ADD COLUMN IF NOT EXISTS webhook_url TEXT,
ADD COLUMN IF NOT EXISTS webhook_channel TEXT,
ADD COLUMN IF NOT EXISTS webhook_channel_id TEXT,
ADD COLUMN IF NOT EXISTS webhook_configuration_url TEXT;
COMMENT ON COLUMN slack_workspaces.webhook_url IS &apos;Incoming webhook URL for posting messages to Slack&apos;;
COMMENT ON COLUMN slack_workspaces.webhook_channel IS &apos;Default channel name for webhook messages&apos;;
COMMENT ON COLUMN slack_workspaces.webhook_channel_id IS &apos;Default channel ID for webhook messages&apos;;
COMMENT ON COLUMN slack_workspaces.webhook_configuration_url IS &apos;URL to configure the webhook in Slack&apos;;</file><file path="be/supabase/.gitignore"># Supabase
.branches
.temp

# dotenvx
.env.keys
.env.local
.env.*.local

# Supabase
.branches
.temp

# dotenvx
.env.keys
.env.local
.env.*.local

# Supabase
.branches
.temp

# dotenvx
.env.keys
.env.local
.env.*.local</file><file path="be/supabase/config.toml"># For detailed configuration reference documentation, visit:
# https://supabase.com/docs/guides/local-development/cli/config
# A string used to distinguish different Supabase projects on the same host. Defaults to the
# working directory name when running `supabase init`.
project_id = &quot;AI-Calendar-Agent&quot;

[api]
enabled = true
# Port to use for the API URL.
port = 54321
# Schemas to expose in your API. Tables, views and stored procedures in this schema will get API
# endpoints. `public` and `graphql_public` schemas are included by default.
schemas = [&quot;public&quot;, &quot;graphql_public&quot;]
# Extra schemas to add to the search_path of every request.
extra_search_path = [&quot;public&quot;, &quot;extensions&quot;]
# The maximum number of rows returns from a view, table, or stored procedure. Limits payload size
# for accidental or malicious requests.
max_rows = 1000

[api.tls]
# Enable HTTPS endpoints locally using a self-signed certificate.
enabled = false

[db]
# Port to use for the local database URL.
port = 54322
# Port used by db diff command to initialize the shadow database.
shadow_port = 54320
# The database major version to use. This has to be the same as your remote database&apos;s. Run `SHOW
# server_version;` on the remote database to check.
major_version = 17

[db.pooler]
enabled = false
# Port to use for the local connection pooler.
port = 54329
# Specifies when a server connection can be reused by other clients.
# Configure one of the supported pooler modes: `transaction`, `session`.
pool_mode = &quot;transaction&quot;
# How many server connections to allow per user/database pair.
default_pool_size = 20
# Maximum number of client connections allowed.
max_client_conn = 100

# [db.vault]
# secret_key = &quot;env(SECRET_VALUE)&quot;

[db.migrations]
# If disabled, migrations will be skipped during a db push or reset.
enabled = true
# Specifies an ordered list of schema files that describe your database.
# Supports glob patterns relative to supabase directory: &quot;./schemas/*.sql&quot;
schema_paths = []

[db.seed]
# If enabled, seeds the database after migrations during a db reset.
enabled = true
# Specifies an ordered list of seed files to load during db reset.
# Supports glob patterns relative to supabase directory: &quot;./seeds/*.sql&quot;
sql_paths = [&quot;./seed.sql&quot;]

[db.network_restrictions]
# Enable management of network restrictions.
enabled = false
# List of IPv4 CIDR blocks allowed to connect to the database.
# Defaults to allow all IPv4 connections. Set empty array to block all IPs.
allowed_cidrs = [&quot;0.0.0.0/0&quot;]
# List of IPv6 CIDR blocks allowed to connect to the database.
# Defaults to allow all IPv6 connections. Set empty array to block all IPs.
allowed_cidrs_v6 = [&quot;::/0&quot;]

[realtime]
enabled = true
# Bind realtime via either IPv4 or IPv6. (default: IPv4)
# ip_version = &quot;IPv6&quot;
# The maximum length in bytes of HTTP request headers. (default: 4096)
# max_header_length = 4096

[studio]
enabled = true
# Port to use for Supabase Studio.
port = 54323
# External URL of the API server that frontend connects to.
api_url = &quot;http://127.0.0.1&quot;
# OpenAI API Key to use for Supabase AI in the Supabase Studio.
openai_api_key = &quot;env(OPENAI_API_KEY)&quot;

# Email testing server. Emails sent with the local dev setup are not actually sent - rather, they
# are monitored, and you can view the emails that would have been sent from the web interface.
[inbucket]
enabled = true
# Port to use for the email testing server web interface.
port = 54324
# Uncomment to expose additional ports for testing user applications that send emails.
# smtp_port = 54325
# pop3_port = 54326
# admin_email = &quot;admin@email.com&quot;
# sender_name = &quot;Admin&quot;

[storage]
enabled = true
# The maximum file size allowed (e.g. &quot;5MB&quot;, &quot;500KB&quot;).
file_size_limit = &quot;50MiB&quot;

# Image transformation API is available to Supabase Pro plan.
# [storage.image_transformation]
# enabled = true

# Uncomment to configure local storage buckets
# [storage.buckets.images]
# public = false
# file_size_limit = &quot;50MiB&quot;
# allowed_mime_types = [&quot;image/png&quot;, &quot;image/jpeg&quot;]
# objects_path = &quot;./images&quot;

[auth]
enabled = true
# The base URL of your website. Used as an allow-list for redirects and for constructing URLs used
# in emails.
site_url = &quot;http://127.0.0.1:3000&quot;
# A list of *exact* URLs that auth providers are permitted to redirect to post authentication.
additional_redirect_urls = [&quot;https://127.0.0.1:3000&quot;]
# How long tokens are valid for, in seconds. Defaults to 3600 (1 hour), maximum 604,800 (1 week).
jwt_expiry = 3600
# Path to JWT signing key. DO NOT commit your signing keys file to git.
# signing_keys_path = &quot;./signing_keys.json&quot;
# If disabled, the refresh token will never expire.
enable_refresh_token_rotation = true
# Allows refresh tokens to be reused after expiry, up to the specified interval in seconds.
# Requires enable_refresh_token_rotation = true.
refresh_token_reuse_interval = 10
# Allow/disallow new user signups to your project.
enable_signup = true
# Allow/disallow anonymous sign-ins to your project.
enable_anonymous_sign_ins = false
# Allow/disallow testing manual linking of accounts
enable_manual_linking = false
# Passwords shorter than this value will be rejected as weak. Minimum 6, recommended 8 or more.
minimum_password_length = 6
# Passwords that do not meet the following requirements will be rejected as weak. Supported values
# are: `letters_digits`, `lower_upper_letters_digits`, `lower_upper_letters_digits_symbols`
password_requirements = &quot;&quot;

[auth.rate_limit]
# Number of emails that can be sent per hour. Requires auth.email.smtp to be enabled.
email_sent = 2
# Number of SMS messages that can be sent per hour. Requires auth.sms to be enabled.
sms_sent = 30
# Number of anonymous sign-ins that can be made per hour per IP address. Requires enable_anonymous_sign_ins = true.
anonymous_users = 30
# Number of sessions that can be refreshed in a 5 minute interval per IP address.
token_refresh = 150
# Number of sign up and sign-in requests that can be made in a 5 minute interval per IP address (excludes anonymous users).
sign_in_sign_ups = 30
# Number of OTP / Magic link verifications that can be made in a 5 minute interval per IP address.
token_verifications = 30
# Number of Web3 logins that can be made in a 5 minute interval per IP address.
web3 = 30

# Configure one of the supported captcha providers: `hcaptcha`, `turnstile`.
# [auth.captcha]
# enabled = true
# provider = &quot;hcaptcha&quot;
# secret = &quot;&quot;

[auth.email]
# Allow/disallow new user signups via email to your project.
enable_signup = true
# If enabled, a user will be required to confirm any email change on both the old, and new email
# addresses. If disabled, only the new email is required to confirm.
double_confirm_changes = true
# If enabled, users need to confirm their email address before signing in.
enable_confirmations = false
# If enabled, users will need to reauthenticate or have logged in recently to change their password.
secure_password_change = false
# Controls the minimum amount of time that must pass before sending another signup confirmation or password reset email.
max_frequency = &quot;1s&quot;
# Number of characters used in the email OTP.
otp_length = 6
# Number of seconds before the email OTP expires (defaults to 1 hour).
otp_expiry = 3600

# Use a production-ready SMTP server
# [auth.email.smtp]
# enabled = true
# host = &quot;smtp.sendgrid.net&quot;
# port = 587
# user = &quot;apikey&quot;
# pass = &quot;env(SENDGRID_API_KEY)&quot;
# admin_email = &quot;admin@email.com&quot;
# sender_name = &quot;Admin&quot;

# Uncomment to customize email template
# [auth.email.template.invite]
# subject = &quot;You have been invited&quot;
# content_path = &quot;./supabase/templates/invite.html&quot;

[auth.sms]
# Allow/disallow new user signups via SMS to your project.
enable_signup = false
# If enabled, users need to confirm their phone number before signing in.
enable_confirmations = false
# Template for sending OTP to users
template = &quot;Your code is {{ .Code }}&quot;
# Controls the minimum amount of time that must pass before sending another sms otp.
max_frequency = &quot;5s&quot;

# Use pre-defined map of phone number to OTP for testing.
# [auth.sms.test_otp]
# 4152127777 = &quot;123456&quot;

# Configure logged in session timeouts.
# [auth.sessions]
# Force log out after the specified duration.
# timebox = &quot;24h&quot;
# Force log out if the user has been inactive longer than the specified duration.
# inactivity_timeout = &quot;8h&quot;

# This hook runs before a new user is created and allows developers to reject the request based on the incoming user object.
# [auth.hook.before_user_created]
# enabled = true
# uri = &quot;pg-functions://postgres/auth/before-user-created-hook&quot;

# This hook runs before a token is issued and allows you to add additional claims based on the authentication method used.
# [auth.hook.custom_access_token]
# enabled = true
# uri = &quot;pg-functions://&lt;database&gt;/&lt;schema&gt;/&lt;hook_name&gt;&quot;

# Configure one of the supported SMS providers: `twilio`, `twilio_verify`, `messagebird`, `textlocal`, `vonage`.
[auth.sms.twilio]
enabled = false
account_sid = &quot;&quot;
message_service_sid = &quot;&quot;
# DO NOT commit your Twilio auth token to git. Use environment variable substitution instead:
auth_token = &quot;env(SUPABASE_AUTH_SMS_TWILIO_AUTH_TOKEN)&quot;

# Multi-factor-authentication is available to Supabase Pro plan.
[auth.mfa]
# Control how many MFA factors can be enrolled at once per user.
max_enrolled_factors = 10

# Control MFA via App Authenticator (TOTP)
[auth.mfa.totp]
enroll_enabled = false
verify_enabled = false

# Configure MFA via Phone Messaging
[auth.mfa.phone]
enroll_enabled = false
verify_enabled = false
otp_length = 6
template = &quot;Your code is {{ .Code }}&quot;
max_frequency = &quot;5s&quot;

# Configure MFA via WebAuthn
# [auth.mfa.web_authn]
# enroll_enabled = true
# verify_enabled = true

# Use an external OAuth provider. The full list of providers are: `apple`, `azure`, `bitbucket`,
# `discord`, `facebook`, `github`, `gitlab`, `google`, `keycloak`, `linkedin_oidc`, `notion`, `twitch`,
# `twitter`, `slack`, `spotify`, `workos`, `zoom`.
[auth.external.apple]
enabled = false
client_id = &quot;&quot;
# DO NOT commit your OAuth provider secret to git. Use environment variable substitution instead:
secret = &quot;env(SUPABASE_AUTH_EXTERNAL_APPLE_SECRET)&quot;
# Overrides the default auth redirectUrl.
redirect_uri = &quot;&quot;
# Overrides the default auth provider URL. Used to support self-hosted gitlab, single-tenant Azure,
# or any other third-party OIDC providers.
url = &quot;&quot;
# If enabled, the nonce check will be skipped. Required for local sign in with Google auth.
skip_nonce_check = false

# Allow Solana wallet holders to sign in to your project via the Sign in with Solana (SIWS, EIP-4361) standard.
# You can configure &quot;web3&quot; rate limit in the [auth.rate_limit] section and set up [auth.captcha] if self-hosting.
[auth.web3.solana]
enabled = false

# Use Firebase Auth as a third-party provider alongside Supabase Auth.
[auth.third_party.firebase]
enabled = false
# project_id = &quot;my-firebase-project&quot;

# Use Auth0 as a third-party provider alongside Supabase Auth.
[auth.third_party.auth0]
enabled = false
# tenant = &quot;my-auth0-tenant&quot;
# tenant_region = &quot;us&quot;

# Use AWS Cognito (Amplify) as a third-party provider alongside Supabase Auth.
[auth.third_party.aws_cognito]
enabled = false
# user_pool_id = &quot;my-user-pool-id&quot;
# user_pool_region = &quot;us-east-1&quot;

# Use Clerk as a third-party provider alongside Supabase Auth.
[auth.third_party.clerk]
enabled = false
# Obtain from https://clerk.com/setup/supabase
# domain = &quot;example.clerk.accounts.dev&quot;

[edge_runtime]
enabled = true
# Configure one of the supported request policies: `oneshot`, `per_worker`.
# Use `oneshot` for hot reload, or `per_worker` for load testing.
policy = &quot;oneshot&quot;
# Port to attach the Chrome inspector for debugging edge functions.
inspector_port = 8083
# The Deno major version to use.
deno_version = 1

# [edge_runtime.secrets]
# secret_key = &quot;env(SECRET_VALUE)&quot;

[analytics]
enabled = true
port = 54327
# Configure one of the supported backends: `postgres`, `bigquery`.
backend = &quot;postgres&quot;

# Experimental features may be deprecated any time
[experimental]
# Configures Postgres storage engine to use OrioleDB (S3)
orioledb_version = &quot;&quot;
# Configures S3 bucket URL, eg. &lt;bucket_name&gt;.s3-&lt;region&gt;.amazonaws.com
s3_host = &quot;env(S3_HOST)&quot;
# Configures S3 bucket region, eg. us-east-1
s3_region = &quot;env(S3_REGION)&quot;
# Configures AWS_ACCESS_KEY_ID for S3 bucket
s3_access_key = &quot;env(S3_ACCESS_KEY)&quot;
# Configures AWS_SECRET_ACCESS_KEY for S3 bucket
s3_secret_key = &quot;env(S3_SECRET_KEY)&quot;</file><file path="be/telegram-bot/handlers/agent-handler.ts">import { InputGuardrailTripwireTriggered } from &quot;@openai/agents&quot;
import { ORCHESTRATOR_AGENT } from &quot;@/ai-agents&quot;
import { activateAgent } from &quot;@/utils/ai&quot;
import { logger } from &quot;@/utils/logger&quot;
import type { GlobalContext } from &quot;./bot-config&quot;
import { getTranslatorFromLanguageCode } from &quot;../i18n&quot;
import {
  buildAgentPromptWithContext,
  buildConfirmationPrompt,
  summarizeMessages,
  storeEmbeddingAsync,
  getRelevantContext,
  telegramConversation,
  startTypingIndicator,
} from &quot;../utils&quot;
import type { ImageContent } from &quot;@/shared/llm&quot;
import { getAllyBrainForTelegram } from &quot;../utils/ally-brain&quot;
import { getSelectedAgentProfileForTelegram } from &quot;../utils/agent-profile&quot;
import { unifiedContextStore } from &quot;@/shared/context&quot;
import {
  createTextAgent,
  runTextAgent,
} from &quot;@/shared/orchestrator/text-agent-factory&quot;
import { getAgentProfile } from &quot;@/shared/orchestrator/agent-profiles&quot;
‚ãÆ----
export interface AgentRequestOptions {
  images?: ImageContent[]
}
export const handleAgentRequest = async (
  ctx: GlobalContext,
  message: string,
  options?: AgentRequestOptions
): Promise&lt;void&gt; =&gt;
export const handleConfirmation = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleCancellation = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleConflictResponse = async (
  ctx: GlobalContext,
  output: string
): Promise&lt;void&gt; =&gt;</file><file path="be/telegram-bot/handlers/bot-config.ts">import { Bot, session } from &quot;grammy&quot;
import type { BotError, Context, SessionFlavor } from &quot;grammy&quot;
import {
  authRateLimiter,
  messageRateLimiter,
} from &quot;../middleware/rate-limiter&quot;
import type { SessionData } from &quot;@/types&quot;
import { authTgHandler } from &quot;../middleware/auth-tg-handler&quot;
import { autoRetry } from &quot;@grammyjs/auto-retry&quot;
import { env } from &quot;@/config&quot;
import { googleTokenTgHandler } from &quot;../middleware/google-token-tg-handler&quot;
import { logger } from &quot;@/utils/logger&quot;
import { sessionExpiryMiddleware } from &quot;../middleware/session-expiry&quot;
export type GlobalContext = SessionFlavor&lt;SessionData&gt; &amp; Context
‚ãÆ----
export const createBot = (): Bot&lt;GlobalContext&gt; =&gt;
export const configureSession = (bot: Bot&lt;GlobalContext&gt;): void =&gt;
export const configureMiddleware = (bot: Bot&lt;GlobalContext&gt;): void =&gt;
‚ãÆ----
export const registerBotCommands = async (
  bot: Bot&lt;GlobalContext&gt;
): Promise&lt;void&gt; =&gt;</file><file path="be/telegram-bot/handlers/callback-handlers.ts">import type { Bot } from &quot;grammy&quot;
import type { GlobalContext } from &quot;./bot-config&quot;
import { generateGoogleAuthUrl } from &quot;@/utils/auth&quot;
import {
  getTranslatorFromLanguageCode,
  SUPPORTED_LOCALES,
  type SupportedLocale,
} from &quot;../i18n&quot;
import {
  handleLanguageSelection,
  handleBrainToggle,
  handleBrainEditStart,
  handleBrainClear,
  handleProfileSelection,
} from &quot;../utils/commands&quot;
‚ãÆ----
export const registerCallbackHandlers = (bot: Bot&lt;GlobalContext&gt;): void =&gt;</file><file path="be/telegram-bot/handlers/message-handler.ts">import type { Bot } from &quot;grammy&quot;;
import { InputFile } from &quot;grammy&quot;;
import type { GlobalContext } from &quot;./bot-config&quot;;
import { getTranslatorFromLanguageCode } from &quot;../i18n&quot;;
import {
  COMMANDS,
  CONFIRM_RESPONSES,
  CANCEL_RESPONSES,
  isDuplicateMessage,
  handlePendingEmailChange,
  initiateEmailChange,
  startTypingIndicator,
} from &quot;../utils&quot;;
import {
  handleExitCommand,
  handleUsageCommand,
  handleStartCommand,
  handleHelpCommand,
  handleTodayCommand,
  handleTomorrowCommand,
  handleWeekCommand,
  handleMonthCommand,
  handleFreeCommand,
  handleBusyCommand,
  handleQuickCommand,
  handleCancelCommand,
  handleRemindCommand,
  handleStatusCommand,
  handleSettingsCommand,
  handleFeedbackCommand,
  handleAnalyticsCommand,
  handleCalendarsCommand,
  handleSearchCommand,
  handleCreateCommand,
  handleUpdateCommand,
  handleDeleteCommand,
  handleChangeEmailCommand,
  handleLanguageCommand,
  handleAboutMeCommand,
  handleBrainCommand,
  handleBrainInstructionsInput,
  handleAsTextCommand,
  handleAsVoiceCommand,
  handleProfileCommand,
  handleWebsiteCommand,
  handleRescheduleCommand,
} from &quot;../utils/commands&quot;;
import {
  handleAgentRequest,
  handleConfirmation,
  handleCancellation,
} from &quot;./agent-handler&quot;;
import { transcribeAudio } from &quot;@/utils/ai/voice-transcription&quot;;
import { generateSpeechForTelegram } from &quot;@/utils/ai/text-to-speech&quot;;
import { getVoicePreferenceForTelegram } from &quot;../utils/ally-brain&quot;;
import { processPhoto, MAX_IMAGES } from &quot;../utils/image-handler&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import type { ImageContent } from &quot;@/shared/llm&quot;;
‚ãÆ----
type MessageActionType = (typeof MessageAction)[keyof typeof MessageAction];
const classifyConfirmationResponse = (text: string): MessageActionType =&gt;
const handlePendingConfirmation = async (
  ctx: GlobalContext,
  text: string,
): Promise&lt;void&gt; =&gt;
type CommandHandler = (ctx: GlobalContext) =&gt; Promise&lt;void&gt;;
‚ãÆ----
type AgentCommand = {
  handler: CommandHandler;
  prompt: string;
};
‚ãÆ----
const handleSessionStates = async (
  ctx: GlobalContext,
  text: string,
): Promise&lt;boolean&gt; =&gt;
interface MessageOptions {
  respondWithVoice?: boolean;
  images?: ImageContent[];
}
const handleFreeTextMessage = async (
  ctx: GlobalContext,
  text: string,
  options: MessageOptions = {},
): Promise&lt;void&gt; =&gt;
const handleAgentRequestWithVoice = async (
  ctx: GlobalContext,
  text: string,
  options: MessageOptions = {},
): Promise&lt;void&gt; =&gt;
const handleVoiceMessage = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const registerMessageHandler = (bot: Bot&lt;GlobalContext&gt;): void =&gt;
‚ãÆ----
// Start typing indicator
‚ãÆ----
// Process the photo</file><file path="be/telegram-bot/i18n/locales/ar.ts">export type TranslationKey = keyof typeof ar;</file><file path="be/telegram-bot/i18n/locales/de.ts">export type TranslationKey = keyof typeof de;</file><file path="be/telegram-bot/i18n/locales/en.ts">export type TranslationKey = keyof typeof en;</file><file path="be/telegram-bot/i18n/locales/fr.ts">export type TranslationKey = keyof typeof fr;</file><file path="be/telegram-bot/i18n/locales/he.ts"></file><file path="be/telegram-bot/i18n/locales/ru.ts"></file><file path="be/telegram-bot/i18n/config.ts">import type { TranslationKey } from &quot;./locales/en&quot;;
import { ar } from &quot;./locales/ar&quot;;
import { de } from &quot;./locales/de&quot;;
import { en } from &quot;./locales/en&quot;;
import { fr } from &quot;./locales/fr&quot;;
import { he } from &quot;./locales/he&quot;;
import { ru } from &quot;./locales/ru&quot;;
type TranslationResource = Record&lt;TranslationKey, string&gt;;
‚ãÆ----
export type SupportedLocale = keyof typeof LOCALE_CONFIG;
export type TextDirection = &quot;ltr&quot; | &quot;rtl&quot;;
‚ãÆ----
export function getDirection(locale: SupportedLocale): TextDirection
export function getLocaleFromLanguageCode(
  languageCode: string | undefined
): SupportedLocale</file><file path="be/telegram-bot/i18n/index.ts"></file><file path="be/telegram-bot/i18n/translator.ts">import i18next, { type i18n, type TFunction } from &quot;i18next&quot;
import {
  type SupportedLocale,
  type TextDirection,
  SUPPORTED_LOCALES,
  DEFAULT_LOCALE,
  I18N_RESOURCES,
  getDirection,
  getLocaleFromLanguageCode,
} from &quot;./config&quot;
‚ãÆ----
export async function initI18n(): Promise&lt;i18n&gt;
export function initI18nSync(): i18n
export function getI18nInstance(): i18n
export interface I18nTranslator {
  t: TFunction
  locale: SupportedLocale
  direction: TextDirection
}
export function getTranslator(locale: SupportedLocale): I18nTranslator
export function getTranslatorFromLanguageCode(languageCode: string | undefined): I18nTranslator
export function createTranslator(locale: SupportedLocale): I18nTranslator</file><file path="be/telegram-bot/i18n/types.ts">import type { TFunction } from &quot;i18next&quot;
import type { SupportedLocale, TextDirection } from &quot;./config&quot;
‚ãÆ----
export interface I18nTranslator {
  t: TFunction
  locale: SupportedLocale
  direction: TextDirection
}
export type TranslationSection = {
  emoji: string
  title: string
  items: string[]
}</file><file path="be/telegram-bot/middleware/auth-tg-handler.ts">import { AuditEventType, auditLogger } from &quot;@/utils/audit-logger&quot;;
import type { GlobalContext } from &quot;../init-bot&quot;;
import type { MiddlewareFn } from &quot;grammy&quot;;
import { SUPABASE } from &quot;@/config&quot;;
import { getTranslatorFromLanguageCode } from &quot;../i18n&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { resetRateLimit } from &quot;./rate-limiter&quot;;
import validator from &quot;validator&quot;;
‚ãÆ----
const sendEmailOtp = async (email: string): Promise&lt;
const verifyEmailOtp = async (email: string, token: string): Promise&lt;
const isOtpCode = (text: string): boolean =&gt;
export const authTgHandler: MiddlewareFn&lt;GlobalContext&gt; = async (ctx, next) =&gt;</file><file path="be/telegram-bot/middleware/google-token-tg-handler.ts">import { AuditEventType, auditLogger } from &quot;@/utils/audit-logger&quot;;
import {
  checkTokenExpiry,
  deactivateGoogleTokens,
  fetchGoogleTokensByEmail,
  generateGoogleAuthUrl,
  persistGoogleTokens,
  refreshGoogleAccessToken,
} from &quot;@/utils/auth&quot;;
import type { GlobalContext } from &quot;../init-bot&quot;;
import { InlineKeyboard } from &quot;grammy&quot;;
import type { MiddlewareFn } from &quot;grammy&quot;;
import type { TokensProps } from &quot;@/types&quot;;
import { getTranslatorFromLanguageCode } from &quot;../i18n&quot;;
import { logger } from &quot;@/utils/logger&quot;;
type TelegramTokenValidationResult = {
  tokens: TokensProps;
  isExpired: boolean;
  isNearExpiry: boolean;
  expiresInMs: number | null;
};
const validateGoogleTokens = async (ctx: GlobalContext, email: string, langCode?: string): Promise&lt;TelegramTokenValidationResult | null&gt; =&gt;
const refreshGoogleTokensIfNeeded = async (
  ctx: GlobalContext,
  validation: TelegramTokenValidationResult,
  langCode?: string
): Promise&lt;TelegramTokenValidationResult | null&gt; =&gt;
export const googleTokenTgHandler: MiddlewareFn&lt;GlobalContext&gt; = async (ctx, next) =&gt;</file><file path="be/telegram-bot/middleware/rate-limiter.ts">import { isRedisConnected, redisClient } from &quot;@/config&quot;;
import type { GlobalContext } from &quot;../init-bot&quot;;
import type { MiddlewareFn } from &quot;grammy&quot;;
import { auditLogger } from &quot;@/utils/audit-logger&quot;;
import { logger } from &quot;@/utils/logger&quot;;
‚ãÆ----
type RateLimitType = keyof typeof RATE_LIMITS;
type RateLimitResult = {
  allowed: boolean;
  remaining: number;
  resetInMs: number;
};
const checkRateLimit = async (userId: number, type: RateLimitType): Promise&lt;RateLimitResult&gt; =&gt;
export const resetRateLimit = async (userId: number, type: RateLimitType): Promise&lt;void&gt; =&gt;
export const authRateLimiter: MiddlewareFn&lt;GlobalContext&gt; = async (ctx, next) =&gt;
export const messageRateLimiter: MiddlewareFn&lt;GlobalContext&gt; = async (ctx, next) =&gt;</file><file path="be/telegram-bot/middleware/session-expiry.ts">import type { MiddlewareFn } from &quot;grammy&quot;;
import type { GlobalContext } from &quot;../init-bot&quot;;
import { auditLogger } from &quot;@/utils/audit-logger&quot;;
‚ãÆ----
export const sessionExpiryMiddleware: MiddlewareFn&lt;GlobalContext&gt; = async (ctx, next) =&gt;</file><file path="be/telegram-bot/response-system/adapters/index.ts"></file><file path="be/telegram-bot/response-system/adapters/telegram-adapter.ts">import type {
  ChannelAdapter,
  BaseMessage,
  TextDirection,
  BodySection,
  ListItem,
  MessageHeader,
  MessageFooter,
  ResponseConfig,
} from &quot;../core/types&quot;;
import { escapeHtml } from &quot;../core/html-escaper&quot;;
import { applyRtl } from &quot;../core/rtl-handler&quot;;
import { defaultConfig } from &quot;../core/config&quot;;
export class TelegramAdapter implements ChannelAdapter
‚ãÆ----
constructor(config?: Partial&lt;ResponseConfig&gt;)
format(message: BaseMessage): string
private formatHeader(header: MessageHeader): string
private formatBody(body: string | BodySection[]): string
private formatSection(section: BodySection): string
private formatList(items: ListItem[]): string
private formatListItem(item: ListItem, index: number): string
/**
   * Format the message footer
   */
private formatFooter(footer: MessageFooter): string
bold(text: string): string
italic(text: string): string
code(text: string): string
link(href: string, text: string): string
escapeHtml(text: string): string
applyDirection(text: string, direction: TextDirection): string
getLineSeparator(): string
getSectionSeparator(): string
‚ãÆ----
export function createTelegramAdapter(
  config?: Partial&lt;ResponseConfig&gt;
): TelegramAdapter</file><file path="be/telegram-bot/response-system/core/config.ts">import type { ResponseConfig } from &quot;./types&quot;;
‚ãÆ----
export function mergeConfig(partial?: Partial&lt;ResponseConfig&gt;): ResponseConfig</file><file path="be/telegram-bot/response-system/core/html-escaper.ts">export function escapeHtml(text: string): string
export function escapeHtmlPreserving(
  text: string,
  allowedTags: string[] = []
): string
‚ãÆ----
// First, escape everything
‚ãÆ----
// Then restore allowed tags
‚ãÆ----
// Match opening tags (with or without attributes)
‚ãÆ----
export function containsUnsafeHtml(text: string): boolean
/**
 * Sanitize and escape user input for safe inclusion in responses.
 * This is the main function to use for any user-provided content.
 *
 * @param userInput - Raw user input
 * @returns Sanitized and escaped string
 */
export function sanitizeUserInput(userInput: string): string
‚ãÆ----
// Trim whitespace
‚ãÆ----
// Escape HTML
‚ãÆ----
// Normalize excessive whitespace (but preserve single newlines for readability)
sanitized = sanitized.replace(/[ \t]+/g, &quot; &quot;); // Collapse spaces/tabs
‚ãÆ----
export function unescapeHtml(text: string): string</file><file path="be/telegram-bot/response-system/core/index.ts"></file><file path="be/telegram-bot/response-system/core/response-builder.ts">import type {
  BaseMessage,
  MessageHeader,
  MessageFooter,
  BodySection,
  ListItem,
  MessageType,
  TextDirection,
  ResponseConfig,
  BuilderResult,
  CalendarEvent,
  DaySchedule,
  WeekSchedule,
  Channel,
  BulletStyle,
  ChannelAdapter,
} from &quot;./types&quot;;
import { TelegramAdapter } from &quot;../adapters/telegram-adapter&quot;;
import { defaultConfig, mergeConfig, TYPE_EMOJIS } from &quot;./config&quot;;
import { sanitizeUserInput } from &quot;./html-escaper&quot;;
export class ResponseBuilder
‚ãÆ----
constructor(channel: Channel, config?: Partial&lt;ResponseConfig&gt;)
private createAdapter(): ChannelAdapter
static telegram(config?: Partial&lt;ResponseConfig&gt;): ResponseBuilder
static whatsapp(config?: Partial&lt;ResponseConfig&gt;): ResponseBuilder
static web(config?: Partial&lt;ResponseConfig&gt;): ResponseBuilder
type(messageType: MessageType): this
header(emoji: string, title: string, subtitle?: string): this
headerFrom(header: MessageHeader): this
text(content: string): this
section(emoji: string, title: string, content: string | ListItem[]): this
sectionFrom(section: BodySection): this
list(items: ListItem[], title?: string, emoji?: string): this
bulletList(items: string[], bullet: BulletStyle = &quot;dot&quot;): this
numberedList(items: string[]): this
separator(): this
spacing(): this
/**
   * Set footer with tip and/or closing
   */
footer(tip?: string, closing?: string): this
/**
   * Set footer with next steps
   */
footerWithSteps(tip: string, nextSteps: string[]): this
/**
   * Set footer from object
   */
footerFrom(footer: MessageFooter): this
/**
   * Set text direction
   */
direction(dir: TextDirection): this
// ============================================
// Calendar-Specific Builders
// ============================================
/**
   * Add a single event to the body
   */
event(event: CalendarEvent): this
daySchedule(schedule: DaySchedule): this
weekSchedule(schedule: WeekSchedule): this
success(title: string, detail?: string): this
/**
   * Quick error message
   */
error(title: string, suggestion?: string): this
warning(title: string, detail?: string): this
/**
   * Quick info message
   */
info(title: string, detail?: string): this
// ============================================
// User Input Handling
// ============================================
/**
   * Add sanitized user input to the message
   * Automatically escapes HTML
   */
userInput(content: string): this
/**
   * Quote user text (for error messages showing what user said)
   */
quote(text: string): this
// ============================================
// Build Methods
// ============================================
/**
   * Build the final message
   */
build(): BuilderResult
/**
   * Build and return just the string content
   */
toString(): string
// ============================================
// Private Helper Methods
// ============================================
private getParseMode(): string | undefined
private formatEventTime(event: CalendarEvent): string
private formatTime(date: Date): string
private formatDate(date: Date | string): string
private getEventEmoji(event: CalendarEvent): string</file><file path="be/telegram-bot/response-system/core/rtl-handler.ts">import type { TextDirection, RtlStrategy } from &quot;./types&quot;;
‚ãÆ----
export function containsRtl(text: string): boolean
export function containsHebrew(text: string): boolean
export function containsArabic(text: string): boolean
export function isRtlText(text: string): boolean
export function detectDirection(text: string): TextDirection
export function applyUnicodeDirection(
  text: string,
  direction: TextDirection
): string
export function applyLineBasedDirection(
  text: string,
  direction: TextDirection
): string
export function applyRtl(
  text: string,
  direction: TextDirection,
  strategy: RtlStrategy
): string
‚ãÆ----
// If no RTL content and direction is auto/ltr, skip processing
‚ãÆ----
export function isolateDirection(
  text: string,
  direction: TextDirection
): string
export function formatLabelValue(
  label: string,
  value: string,
  labelDirection: TextDirection = &quot;ltr&quot;
): string
export function formatInlineLabelValue(label: string, value: string): string</file><file path="be/telegram-bot/response-system/core/types.ts">export type TextDirection = &quot;ltr&quot; | &quot;rtl&quot; | &quot;auto&quot;;
export type RtlStrategy = &quot;line-based&quot; | &quot;unicode-markers&quot; | &quot;both&quot;;
export type Channel = &quot;telegram&quot; | &quot;whatsapp&quot; | &quot;web&quot;;
export type EmojiStyle = &quot;minimal&quot; | &quot;friendly&quot; | &quot;expressive&quot;;
export interface ResponseConfig {
  defaultDirection: TextDirection;
  rtlStrategy: RtlStrategy;
  emojiStyle: EmojiStyle;
  autoEscapeHtml: boolean;
}
export type MessageType =
  | &quot;success&quot;
  | &quot;error&quot;
  | &quot;warning&quot;
  | &quot;info&quot;
  | &quot;list&quot;
  | &quot;calendar&quot;
  | &quot;notification&quot;
  | &quot;confirmation&quot;
  | &quot;help&quot;;
export interface MessageHeader {
  emoji?: string;
  title: string;
  subtitle?: string;
}
export interface MessageFooter {
  tip?: string;
  nextSteps?: string[];
  closing?: string;
}
export type BulletStyle = &quot;dot&quot; | &quot;dash&quot; | &quot;number&quot; | &quot;emoji&quot; | &quot;none&quot;;
export interface ListItem {
  bullet?: BulletStyle;
  bulletEmoji?: string;
  text: string;
  detail?: string;
  emphasis?: boolean;
}
export interface BodySection {
  emoji?: string;
  title?: string;
  content: string | ListItem[];
  separator?: boolean;
}
export interface BaseMessage {
  type: MessageType;
  header: MessageHeader;
  body: string | BodySection[];
  footer?: MessageFooter;
  direction?: TextDirection;
}
export interface CalendarEvent {
  id?: string;
  summary: string;
  start: Date | string;
  end: Date | string;
  location?: string;
  calendarName?: string;
  isAllDay?: boolean;
}
export interface DaySchedule {
  date: Date | string;
  events: CalendarEvent[];
  totalHours?: number;
}
export interface WeekSchedule {
  weekStart: Date | string;
  days: DaySchedule[];
  summary?: {
    totalEvents: number;
    totalHours: number;
    busiestDay?: string;
  };
}
export interface ChannelAdapter {
  readonly channel: Channel;
  format(message: BaseMessage): string;
  bold(text: string): string;
  italic(text: string): string;
  code(text: string): string;
  link(href: string, text: string): string;
  escapeHtml(text: string): string;
  applyDirection(text: string, direction: TextDirection): string;
  getLineSeparator(): string;
  getSectionSeparator(): string;
}
‚ãÆ----
format(message: BaseMessage): string;
bold(text: string): string;
italic(text: string): string;
code(text: string): string;
link(href: string, text: string): string;
escapeHtml(text: string): string;
applyDirection(text: string, direction: TextDirection): string;
getLineSeparator(): string;
getSectionSeparator(): string;
‚ãÆ----
export interface ResponseBuilderOptions {
  channel: Channel;
  config?: Partial&lt;ResponseConfig&gt;;
}
export interface BuilderResult {
  content: string;
  parseMode?: string;
  message: BaseMessage;
}</file><file path="be/telegram-bot/response-system/templates/calendar.ts">import { ResponseBuilder } from &quot;../core/response-builder&quot;;
import type { CalendarEvent, DaySchedule, WeekSchedule } from &quot;../core/types&quot;;
export function weeklyCalendarTemplate(schedule: WeekSchedule, userName?: string): ResponseBuilder
export function todayScheduleTemplate(schedule: DaySchedule, userName?: string): ResponseBuilder
export function tomorrowScheduleTemplate(schedule: DaySchedule, userName?: string): ResponseBuilder
export function eventListTemplate(events: CalendarEvent[], title: string, emoji: string = &quot;üìã&quot;): ResponseBuilder
export function freeTimeTemplate(slots: Array&lt;
export function busyTimeTemplate(events: CalendarEvent[], period: string = &quot;today&quot;): ResponseBuilder
export function monthlyOverviewTemplate(totalEvents: number, totalHours: number, busiestWeek?: string): ResponseBuilder
function formatEventDateTime(event: CalendarEvent): string
function formatEventTime(event: CalendarEvent): string
function formatTime(date: Date): string</file><file path="be/telegram-bot/response-system/templates/index.ts"></file><file path="be/telegram-bot/response-system/templates/notifications.ts">import { ResponseBuilder } from &quot;../core/response-builder&quot;;
import { sanitizeUserInput } from &quot;../core/html-escaper&quot;;
export function eventCreatedTemplate(
  eventName: string,
  dateTime: string,
  calendarName?: string
): ResponseBuilder
export function eventUpdatedTemplate(
  eventName: string,
  changes: string
): ResponseBuilder
export function eventDeletedTemplate(eventName: string): ResponseBuilder
export function successTemplate(
  message: string,
  detail?: string
): ResponseBuilder
export function eventNotFoundTemplate(
  searchTerm: string,
  suggestions?: string[]
): ResponseBuilder
export function connectionErrorTemplate(): ResponseBuilder
export function permissionErrorTemplate(): ResponseBuilder
export function timeConflictTemplate(
  eventName: string,
  conflictingEvents: string[]
): ResponseBuilder
export function errorTemplate(
  message: string,
  suggestion?: string
): ResponseBuilder
export function welcomeTemplate(userName?: string): ResponseBuilder
export function sessionEndedTemplate(): ResponseBuilder
export function helpTemplate(): ResponseBuilder
export function statusTemplate(
  isConnected: boolean,
  email?: string
): ResponseBuilder
export function settingsTemplate(): ResponseBuilder
export function feedbackTemplate(): ResponseBuilder
export function loadingTemplate(action: string): ResponseBuilder
export function confirmationTemplate(
  action: string,
  details: string
): ResponseBuilder</file><file path="be/telegram-bot/response-system/index.ts"></file><file path="be/telegram-bot/utils/agent-profile.ts">import { logger } from &quot;@/utils/logger&quot;
import { telegramConversation } from &quot;@/utils/conversation/TelegramConversationAdapter&quot;
import {
  AGENT_PROFILES,
  DEFAULT_AGENT_PROFILE_ID,
  getAgentProfile,
  type AgentProfile,
} from &quot;@/shared/orchestrator/agent-profiles&quot;
import {
  getPreference,
  updatePreference,
  type AgentProfilePreference,
} from &quot;@/services/user-preferences-service&quot;
const getUserIdFromTelegram = (telegramUserId: number)
export const getSelectedAgentProfileForTelegram = async (
  telegramUserId: number
): Promise&lt;string&gt; =&gt;
export const getAgentProfileForTelegram = async (
  telegramUserId: number
): Promise&lt;AgentProfile&gt; =&gt;
export const setSelectedAgentProfileForTelegram = async (
  telegramUserId: number,
  profileId: string
): Promise&lt;boolean&gt; =&gt;
export const getAllAgentProfiles = (): AgentProfile[] =&gt;
export const getProviderIcon = (
  provider: &quot;openai&quot; | &quot;google&quot; | &quot;anthropic&quot;
): string =&gt;
export const getTierBadge = (tier: &quot;free&quot; | &quot;pro&quot; | &quot;enterprise&quot;): string =&gt;</file><file path="be/telegram-bot/utils/ally-brain.ts">import { logger } from &quot;@/utils/logger&quot;;
import { telegramConversation } from &quot;@/utils/conversation/TelegramConversationAdapter&quot;;
import {
  getPreference,
  updatePreference,
  type AllyBrainPreference,
  type VoicePreference,
  PREFERENCE_DEFAULTS,
} from &quot;@/services/user-preferences-service&quot;;
const getUserIdFromTelegram = (telegramUserId: number)
‚ãÆ----
export const getAllyBrainForTelegram = async (
  telegramUserId: number,
): Promise&lt;AllyBrainPreference | null&gt; =&gt;
export const updateAllyBrainForTelegram = async (
  telegramUserId: number,
  value: AllyBrainPreference,
): Promise&lt;boolean&gt; =&gt;
export const toggleAllyBrainEnabled = async (
  telegramUserId: number,
  enabled: boolean,
): Promise&lt;boolean&gt; =&gt;
export type InstructionUpdateMode = &quot;replace&quot; | &quot;append&quot;;
export const updateAllyBrainInstructions = async (
  telegramUserId: number,
  instructions: string,
  mode: InstructionUpdateMode = &quot;replace&quot;,
): Promise&lt;boolean&gt; =&gt;
export const clearAllyBrainInstructions = async (
  telegramUserId: number,
): Promise&lt;boolean&gt; =&gt;
export const getVoicePreferenceForTelegram = async (
  telegramUserId: number,
): Promise&lt;VoicePreference&gt; =&gt;</file><file path="be/telegram-bot/utils/commands.ts">import { SUPPORTED_LOCALES, createTranslator, getTranslatorFromLanguageCode } from &quot;../i18n&quot;;
import type { GlobalContext } from &quot;../init-bot&quot;;
import { InlineKeyboard, InputFile } from &quot;grammy&quot;;
import { ORCHESTRATOR_AGENT } from &quot;@/ai-agents&quot;;
import { ResponseBuilder } from &quot;../response-system&quot;;
import { env } from &quot;@/config&quot;;
import type { SupportedLocale } from &quot;../i18n&quot;;
import { gatherUserKnowledge } from &quot;./user-knowledge&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { resetSession } from &quot;./session&quot;;
import { telegramConversation } from &quot;@/utils/conversation/TelegramConversationAdapter&quot;;
import { generateSpeechForTelegram } from &quot;@/utils/ai/text-to-speech&quot;;
import { getVoicePreferenceForTelegram } from &quot;./ally-brain&quot;;
import {
  getSelectedAgentProfileForTelegram,
  getAllAgentProfiles,
  getProviderIcon,
  getTierBadge,
  setSelectedAgentProfileForTelegram,
} from &quot;./agent-profile&quot;;
import { getAgentProfile, AGENT_PROFILES } from &quot;@/shared/orchestrator/agent-profiles&quot;;
const getUserIdFromTelegram = (telegramUserId: number)
const buildSectionsFromKeys = (
  builder: ReturnType&lt;typeof ResponseBuilder.telegram&gt;,
  t: (key: string) =&gt; string,
  sectionKeys: { key: string; emoji: string; itemCount: number }[]
): ReturnType&lt;typeof ResponseBuilder.telegram&gt; =&gt;
export const handleUsageCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleStartCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleHelpCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleExitCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleTodayCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleTomorrowCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleWeekCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleMonthCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleFreeCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleBusyCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleQuickCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleCreateCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleUpdateCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleDeleteCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleCancelCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleSearchCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleRemindCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleAnalyticsCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleCalendarsCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleStatusCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleSettingsCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleChangeEmailCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleFeedbackCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleLanguageCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleLanguageSelection = async (ctx: GlobalContext, locale: SupportedLocale): Promise&lt;void&gt; =&gt;
const buildProfileItems = (knowledge: import(&quot;./user-knowledge&quot;).UserKnowledge): string[] =&gt;
const buildActivityItems = (knowledge: import(&quot;./user-knowledge&quot;).UserKnowledge): string[] =&gt;
export const handleAboutMeCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleBrainCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleBrainToggle = async (ctx: GlobalContext, enable: boolean): Promise&lt;void&gt; =&gt;
export const handleBrainEditStart = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleBrainEditModeSelect = async (ctx: GlobalContext, mode: &quot;append&quot; | &quot;replace&quot;): Promise&lt;void&gt; =&gt;
export const handleBrainInstructionsInput = async (ctx: GlobalContext, instructions: string): Promise&lt;boolean&gt; =&gt;
export const handleBrainClear = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleAsTextCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleAsVoiceCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleProfileCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleWebsiteCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleProfileSelection = async (
  ctx: GlobalContext,
  profileId: string
): Promise&lt;void&gt; =&gt;
export const handleRescheduleCommand = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;
export const handleRescheduleSelection = async (
  ctx: GlobalContext,
  suggestionIndex: number
): Promise&lt;void&gt; =&gt;
export const handleRescheduleCancellation = async (ctx: GlobalContext): Promise&lt;void&gt; =&gt;</file><file path="be/telegram-bot/utils/constants.ts">export type ConfirmResponse = (typeof CONFIRM_RESPONSES)[number];
export type CancelResponse = (typeof CANCEL_RESPONSES)[number];</file><file path="be/telegram-bot/utils/conversation-history.ts">import type { Database } from &quot;@/database.types&quot;;
import { SUPABASE } from &quot;@/config/clients/supabase&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import type { userAndAiMessageProps } from &quot;@/types&quot;;
import { getStartOfDay, isToday } from &quot;@/utils/date/date-helpers&quot;;
‚ãÆ----
type MessageRole = Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;];
type ConversationContext = {
  messages: userAndAiMessageProps[];
  summary?: string;
  lastUpdated: string;
};
type ConversationRow = {
  id: string;
  user_id: string;
  external_chat_id: number | null;
  message_count: number | null;
  summary: string | null;
  is_active: boolean | null;
  created_at: string;
  updated_at: string;
  last_message_at: string | null;
};
const calculateContextLength = (messages: userAndAiMessageProps[]): number =&gt;
const mapRoleToDb = (role: &quot;user&quot; | &quot;assistant&quot; | &quot;system&quot;): MessageRole =&gt;
const condenseSummary = async (
  existingSummary: string,
  newSummary: string,
  summarizeFn: (messages: userAndAiMessageProps[]) =&gt; Promise&lt;string&gt;
): Promise&lt;string&gt; =&gt;
export const getUserIdFromTelegram = async (telegramUserId: number): Promise&lt;string | null&gt; =&gt;
export const getTodayConversationState = async (chatId: number): Promise&lt;ConversationRow | null&gt; =&gt;
const getConversationMessages = async (conversationId: string): Promise&lt;userAndAiMessageProps[]&gt; =&gt;
export const createConversationState = async (
  chatId: number,
  telegramUserId: number,
  initialMessage?: userAndAiMessageProps
): Promise&lt;
export const updateConversationState = async (conversationId: string, context: ConversationContext, messageCount: number): Promise&lt;boolean&gt; =&gt;
export const storeSummary = async (
  conversationId: string,
  _userId: string,
  summaryText: string,
  _messageCount: number,
  _firstSequence: number,
  _lastSequence: number
): Promise&lt;boolean&gt; =&gt;
export const markAsSummarized = async (conversationId: string, summary: string): Promise&lt;boolean&gt; =&gt;
export const getOrCreateTodayContext = async (
  chatId: number,
  telegramUserId: number
): Promise&lt;
export const addMessageToContext = async (
  chatId: number,
  telegramUserId: number,
  message: userAndAiMessageProps,
  summarizeFn: (messages: userAndAiMessageProps[]) =&gt; Promise&lt;string&gt;
): Promise&lt;ConversationContext&gt; =&gt;
‚ãÆ----
export const buildContextPrompt = (context: ConversationContext): string =&gt;
export const getConversationContext = async (chatId: number, telegramUserId: number): Promise&lt;ConversationContext&gt; =&gt;</file><file path="be/telegram-bot/utils/email-change.ts">import type { GlobalContext } from &quot;../init-bot&quot;;
import { SUPABASE } from &quot;@/config&quot;;
import { isEmail } from &quot;validator&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { auditLogger } from &quot;@/utils/audit-logger&quot;;
‚ãÆ----
const sendEmailOtp = async (email: string): Promise&lt;
const verifyEmailOtp = async (email: string, token: string): Promise&lt;
export const isOtpCode = (text: string): boolean =&gt;
export const initiateEmailChange = async (ctx: GlobalContext, newEmail: string): Promise&lt;void&gt; =&gt;
export const handlePendingEmailChange = async (ctx: GlobalContext, text: string): Promise&lt;boolean&gt; =&gt;
export const cancelEmailChange = (ctx: GlobalContext): void =&gt;</file><file path="be/telegram-bot/utils/embeddings.ts">import { logger } from &quot;@/utils/logger&quot;;
type EmbeddingMetadata = {
  role: &quot;user&quot; | &quot;assistant&quot;;
  chatId: number;
  timestamp: string;
};
type SimilarConversation = {
  content: string;
  id: number;
  metadata: EmbeddingMetadata | null;
  similarity: number;
};
export const generateEmbedding = async (_text: string): Promise&lt;number[]&gt; =&gt;
export const storeConversationEmbedding = async (
  _chatId: number,
  _telegramUserId: number,
  _content: string,
  _role: &quot;user&quot; | &quot;assistant&quot;,
  _messageId?: string,
  _conversationId?: string
): Promise&lt;boolean&gt; =&gt;
export const searchSimilarConversations = async (
  _userId: number,
  _query: string,
  _options?: {
    threshold?: number;
    limit?: number;
  }
): Promise&lt;SimilarConversation[]&gt; =&gt;
export const buildSemanticContext = (conversations: SimilarConversation[]): string =&gt;
// Store embedding in background (non-blocking) - stubbed
export const storeEmbeddingAsync = (
  _chatId: number,
  _telegramUserId: number,
  _content: string,
  _role: &quot;user&quot; | &quot;assistant&quot;,
  _messageId?: string,
  _conversationId?: string
): void =&gt;
export const getRelevantContext = async (
  _userId: number,
  _query: string,
  _options?: {
    threshold?: number;
    limit?: number;
  }
): Promise&lt;string&gt; =&gt;</file><file path="be/telegram-bot/utils/image-handler.ts">import type { Api } from &quot;grammy&quot;;
import type { PhotoSize } from &quot;grammy/types&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import type { ImageContent } from &quot;@/shared/llm&quot;;
‚ãÆ----
type SupportedMimeType = (typeof SUPPORTED_MIME_TYPES)[number];
function getMimeTypeFromPath(filePath: string): SupportedMimeType
async function downloadFileAsBase64(
  api: Api,
  fileId: string
): Promise&lt;
function getBestPhoto(photos: PhotoSize[]): PhotoSize
export interface ProcessedImages {
  images: ImageContent[];
  skippedCount: number;
  errorCount: number;
}
export async function processPhotos(
  api: Api,
  photoArrays: PhotoSize[][]
): Promise&lt;ProcessedImages&gt;
export async function processPhoto(
  api: Api,
  photoArray: PhotoSize[]
): Promise&lt;ImageContent | null&gt;</file><file path="be/telegram-bot/utils/index.ts"></file><file path="be/telegram-bot/utils/prompts.ts">import { logger } from &quot;@/utils/logger&quot;;
import type { AllyBrainPreference } from &quot;./ally-brain&quot;;
‚ãÆ----
const truncateContext = (context: string, maxLength: number): string =&gt;
export const buildAgentPrompt = (
  email: string | undefined,
  message: string
): string =&gt;
type BuildPromptOptions = {
  allyBrain?: AllyBrainPreference | null;
  languageCode?: string;
  personalityNotes?: string;
};
export const buildAgentPromptWithContext = (
  email: string | undefined,
  message: string,
  conversationContext?: string,
  options?: BuildPromptOptions
): string =&gt;
export const buildConfirmationPrompt = (
  firstName: string,
  email: string | undefined,
  eventData: unknown
): string =&gt;</file><file path="be/telegram-bot/utils/session.ts">import type { Context, SessionFlavor } from &quot;grammy&quot;;
import type { SessionData } from &quot;@/types&quot;;
import { logger } from &quot;@/utils/logger&quot;;
type BotContext = SessionFlavor&lt;SessionData&gt; &amp; Context;
export const isDuplicateMessage = (ctx: BotContext, msgId: number): boolean =&gt;
export const resetSession = (ctx: BotContext): void =&gt;</file><file path="be/telegram-bot/utils/summarize.ts">import { MODELS } from &quot;@/config/constants/ai&quot;;
import OpenAI from &quot;openai&quot;;
import { env } from &quot;@/config&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import type { userAndAiMessageProps } from &quot;@/types&quot;;
‚ãÆ----
const formatMessagesForSummary = (messages: userAndAiMessageProps[]): string =&gt;
export const summarizeMessages = async (messages: userAndAiMessageProps[]): Promise&lt;string&gt; =&gt;
const createFallbackSummary = (messages: userAndAiMessageProps[]): string =&gt;
‚ãÆ----
export const generateConversationTitle = async (firstUserMessage: string): Promise&lt;string&gt; =&gt;</file><file path="be/telegram-bot/utils/typing-indicator.ts">import type { GlobalContext } from &quot;../handlers/bot-config&quot;;
import { logger } from &quot;@/utils/logger&quot;;
‚ãÆ----
export function startTypingIndicator(ctx: GlobalContext): () =&gt; void
‚ãÆ----
const sendTyping = async () =&gt;</file><file path="be/telegram-bot/utils/user-knowledge.ts">import { SUPABASE } from &quot;@/config&quot;;
import { logger } from &quot;@/utils/logger&quot;;
‚ãÆ----
export type UserKnowledge = {
  profile: {
    email: string;
    displayName: string | null;
    firstName: string | null;
    timezone: string | null;
    locale: string | null;
    createdAt: string;
    lastLoginAt: string | null;
  };
  telegram: {
    username: string | null;
    languageCode: string | null;
    lastActivityAt: string | null;
  };
  calendars: {
    total: number;
    names: string[];
    primaryCalendar: string | null;
  };
  activity: {
    totalConversations: number;
    totalMessages: number;
    lastConversationAt: string | null;
    conversationSummaries: string[];
  };
  preferences: {
    gapRecoveryEnabled: boolean | null;
    minGapMinutes: number | null;
    maxGapMinutes: number | null;
    customPreferences: Record&lt;string, unknown&gt;;
  };
};
const fetchUserProfile = (email: string)
const fetchTelegramInfo = (telegramUserId: number)
const fetchUserCalendars = (userId: string)
const fetchConversations = (userId: string)
const fetchConversationSummaries = (userId: string)
const fetchGapRecoverySettings = (_userId: string)
const fetchUserPreferences = (userId: string)
type BuildKnowledgeParams = {
  user: {
    id: string;
    email: string;
    display_name: string | null;
    first_name: string | null;
    timezone: string | null;
    locale: string | null;
    created_at: string;
    last_login_at: string | null;
  };
  telegram: {
    telegram_username: string | null;
    language_code: string | null;
    last_activity_at: string | null;
  } | null;
  calendars:
    | { calendar_name: string | null; is_primary: boolean | null }[]
    | null;
  conversations:
    | {
        id: string;
        message_count: number | null;
        last_message_at: string | null;
      }[]
    | null;
  summaries: { summary: string | null }[] | null;
  gapSettings: {
    is_enabled: boolean | null;
    min_gap_minutes: number | null;
    max_gap_minutes: number | null;
  } | null;
  preferences: { preferences: Record&lt;string, unknown&gt; | null } | null;
};
const buildKnowledgeObject = (params: BuildKnowledgeParams): UserKnowledge =&gt;
export const gatherUserKnowledge = async (
  email: string,
  telegramUserId: number
): Promise&lt;UserKnowledge | null&gt; =&gt;
const formatProfileSection = (knowledge: UserKnowledge): string[] =&gt;
const formatCalendarsSection = (knowledge: UserKnowledge): string[] =&gt;
const formatActivitySection = (knowledge: UserKnowledge): string[] =&gt;
const formatPreferencesSection = (knowledge: UserKnowledge): string[] =&gt;
export const formatUserKnowledgeForAI = (knowledge: UserKnowledge): string =&gt;</file><file path="be/telegram-bot/AGENTS.md"># Telegram Bot Module

Grammy v1.38 bot with multi-language support and RTL handling.

## Response System Architecture

```
ResponseBuilder (fluent API)
‚îú‚îÄ‚îÄ Templates (event, error, list, etc.)
‚îú‚îÄ‚îÄ RTL Handler (Hebrew/Arabic detection)
‚îú‚îÄ‚îÄ HTML Escaper (Telegram MarkdownV2)
‚îî‚îÄ‚îÄ Adapters (telegram, web)
```

## Where to Look

| Task                | File                                       |
| ------------------- | ------------------------------------------ |
| Add command         | `utils/commands.ts`                        |
| Add translation     | `i18n/locales/*.json`                      |
| Response formatting | `response-system/core/response-builder.ts` |
| RTL issues          | `response-system/core/rtl-handler.ts`      |
| HTML escaping       | `response-system/core/html-escaper.ts`     |

## Key Files (Large)

- `utils/commands.ts` (1133 lines) - All command handlers
- `init-bot.ts` (667 lines) - Bot initialization
- `response-system/core/response-builder.ts` (457 lines) - Response builder

## Conventions

- i18next for translations (`i18n/locales/he.json`, `en.json`)
- Always use `ResponseBuilder` for bot responses
- Use `escapeHtml()` for user input in Telegram messages
- Use `applyRtl()` for RTL language formatting

## Key Patterns

```typescript
// RTL detection
import { containsHebrew, applyRtl } from &quot;./response-system/core/rtl-handler&quot;;
if (containsHebrew(text)) {
  text = applyRtl(text);
}

// Safe HTML escaping
import { escapeHtml } from &quot;./response-system/core/html-escaper&quot;;
const safe = escapeHtml(userInput);

// Response building
const response = new ResponseBuilder()
  .addHeader(&quot;Event Created&quot;)
  .addField(&quot;Title&quot;, event.summary)
  .build();
```

## Anti-Patterns

| Forbidden                  | Why                           |
| -------------------------- | ----------------------------- |
| Raw user input in messages | XSS risk - use `escapeHtml()` |
| Hardcoded Hebrew/English   | Use i18n translations         |
| Manual response building   | Use ResponseBuilder           |
| Skip RTL handling          | Breaks Hebrew display         |</file><file path="be/telegram-bot/init-bot.ts">import { run, type RunnerHandle } from &quot;@grammyjs/runner&quot;
import type { Bot } from &quot;grammy&quot;
import { env } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import {
  createBot,
  configureSession,
  configureMiddleware,
  registerBotCommands,
  type GlobalContext,
} from &quot;./handlers/bot-config&quot;
import { registerCallbackHandlers } from &quot;./handlers/callback-handlers&quot;
import { registerMessageHandler } from &quot;./handlers/message-handler&quot;
‚ãÆ----
export const getBot = (): Bot&lt;GlobalContext&gt; | null =&gt;
const initializeBot = (): Bot&lt;GlobalContext&gt; =&gt;
const setupWebhook = async (botInstance: Bot&lt;GlobalContext&gt;): Promise&lt;void&gt; =&gt;
const startPolling = async (botInstance: Bot&lt;GlobalContext&gt;): Promise&lt;void&gt; =&gt;
export const startTelegramBot = async (): Promise&lt;void&gt; =&gt;
‚ãÆ----
const stopBot = async (): Promise&lt;void&gt; =&gt;</file><file path="be/tests/ai-agents/agent-utils.test.ts">import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
‚ãÆ----
import { parseToolArguments, formatEventData } from &quot;../../ai-agents/utils&quot;;
import { TIMEZONE } from &quot;@/config&quot;;</file><file path="be/tests/ai-agents/tool-execution.test.ts">import { jest, describe, it, expect, beforeEach } from &quot;@jest/globals&quot;;
import { mockFn } from &quot;../test-utils&quot;;
‚ãÆ----
import { EXECUTION_TOOLS } from &quot;@/ai-agents/tool-execution&quot;;</file><file path="be/tests/controllers/google-calendar/events-controller.test.ts">import { jest, describe, it, expect, beforeEach } from &quot;@jest/globals&quot;;
import type { Request, Response, NextFunction } from &quot;express&quot;;
import { mockFn } from &quot;../../test-utils&quot;;
‚ãÆ----
import eventsController from &quot;@/controllers/google-calendar/events-controller&quot;;</file><file path="be/tests/controllers/users/auth-controller.test.ts">import { jest, describe, it, expect, beforeEach } from &quot;@jest/globals&quot;;
import type { Request, Response, NextFunction } from &quot;express&quot;;
import { mockFn } from &quot;../../test-utils&quot;;
‚ãÆ----
import { authController } from &quot;@/controllers/users/auth-controller&quot;;</file><file path="be/tests/controllers/chat-controller.test.ts">import { jest, describe, it, expect, beforeEach } from &quot;@jest/globals&quot;;
import type { Request, Response, NextFunction } from &quot;express&quot;;
import { mockFn, type AnyFn } from &quot;../test-utils&quot;;
‚ãÆ----
import { chatController } from &quot;@/controllers/chat-controller&quot;;</file><file path="be/tests/controllers/payment-controller.test.ts">import { jest, describe, it, expect, beforeEach } from &quot;@jest/globals&quot;;
import type { Request, Response, NextFunction } from &quot;express&quot;;
import crypto from &quot;node:crypto&quot;;
import { mockFn } from &quot;../test-utils&quot;;
‚ãÆ----
import {
  getPaymentStatus,
  getPlans,
  getSubscriptionStatus,
  initializeFreePlan,
  createSubscriptionCheckout,
  createCreditPackCheckoutSession,
  createPortalSession,
  cancelUserSubscription,
  requestRefund,
  handleWebhook,
} from &quot;@/controllers/payment-controller&quot;;
‚ãÆ----
const createSignature = (body: Buffer, secret: string): string =&gt;</file><file path="be/tests/infrastructure/google-calendar-mock.test.ts">import { beforeEach, describe, expect, it } from &quot;@jest/globals&quot;;
import {
  createMockCalendarClient,
  createMockCalendarErrors,
  createMockEvent,
  createMockEventsList,
  createMockGoogleApiError,
  createMockOAuth2Client,
  mockAllDayEvent,
  mockCalendarEvent,
  mockDateUtils,
  mockEventsList,
  mockRecurringEvent,
} from &quot;../../mocks/google-calendar&quot;;
‚ãÆ----
requestBody: { summary: &quot;&quot; }, // Invalid: empty summary</file><file path="be/tests/infrastructure/openai-agents-mock.test.ts">import {
  MockAgent,
  createMockAgent,
  createMockAgentError,
  createMockAgentResponse,
  mockAgentErrors,
  mockAgentFactory,
  mockAgentResponses,
  mockAgentTools,
  mockAuthAgentResponses,
  mockEventAgentResponses,
  resetMockAgentTools,
} from &quot;../../mocks/openai-agents&quot;;
import { beforeEach, describe, expect, it } from &quot;@jest/globals&quot;;</file><file path="be/tests/middlewares/admin-auth.test.ts">import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
import type { NextFunction, Request, Response } from &quot;express&quot;;
import { mockFn } from &quot;../test-utils&quot;;
‚ãÆ----
import { adminAuth, type AdminRequest } from &quot;../../middlewares/admin-auth&quot;;</file><file path="be/tests/middlewares/auth-handler.test.ts">import type { NextFunction, Request, Response } from &quot;express&quot;;
import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
import { mockFn } from &quot;../test-utils&quot;;
import { authHandler } from &quot;../../middlewares/auth-handler&quot;;</file><file path="be/tests/middlewares/error-handler.test.ts">import type { NextFunction, Request, Response } from &quot;express&quot;;
import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
import { mockFn } from &quot;../test-utils&quot;;
import errorHandler from &quot;../../middlewares/error-handler&quot;;</file><file path="be/tests/middlewares/supabase-auth.test.ts">import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
import type { NextFunction, Request, Response } from &quot;express&quot;;
import { mockFn } from &quot;../test-utils&quot;;
‚ãÆ----
import { supabaseAuth } from &quot;../../middlewares/supabase-auth&quot;;</file><file path="be/tests/services/admin-service.test.ts">import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
import { mockFn } from &quot;../test-utils&quot;;
‚ãÆ----
import {
  getDashboardStats,
  getSubscriptionDistribution,
  getUserList,
  getUserById,
  updateUserStatus,
  updateUserRole,
  grantCredits,
  getPaymentHistory,
  getAuditLogs,
  logAdminAction,
  sendPasswordResetEmail,
} from &quot;../../services/admin-service&quot;;</file><file path="be/tests/services/lemonsqueezy-service.test.ts">import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
import { mockFn } from &quot;../test-utils&quot;;
‚ãÆ----
import {
  getActivePlans,
  getPlanBySlug,
  getPlanById,
  getUserSubscription,
  getSubscriptionByLemonSqueezyId,
  checkUserAccess,
  createSubscriptionRecord,
  updateSubscriptionFromWebhook,
  cancelSubscription,
  createCheckoutSession,
  createCreditPackCheckout,
  getCustomerPortalUrl,
  isWebhookEventProcessed,
  recordWebhookEvent,
  handleOrderCreated,
  handleSubscriptionCreated,
  handleSubscriptionPaymentSuccess,
  handleSubscriptionPaymentFailed,
  recordUsage,
  processMoneyBackRefund,
  ensureFreePlan,
} from &quot;../../services/lemonsqueezy-service&quot;;</file><file path="be/tests/utils/auth/google-token.test.ts">import { jest, describe, it, expect, beforeEach } from &quot;@jest/globals&quot;;
import { mockFn } from &quot;../../test-utils&quot;;
‚ãÆ----
class MockOAuth2
‚ãÆ----
import {
  generateGoogleAuthUrl,
  checkTokenExpiry,
  fetchGoogleTokensByEmail,
  refreshGoogleAccessToken,
  persistGoogleTokens,
  deactivateGoogleTokens,
  getUserIdByEmail,
  NEAR_EXPIRY_BUFFER_MS,
} from &quot;@/utils/auth/google-token&quot;;</file><file path="be/tests/utils/async-handlers.test.ts">import type { NextFunction, Request, Response } from &quot;express&quot;;
import { asyncHandler, reqResAsyncHandler } from &quot;../../utils/http/async-handlers&quot;;
import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
import { mockFn, type AnyFn } from &quot;../test-utils&quot;;</file><file path="be/tests/utils/error-template.test.ts">import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
import type { Response } from &quot;express&quot;;
import errorTemplate from &quot;../../utils/http/error-template&quot;;</file><file path="be/tests/utils/format-date.test.ts">import { describe, expect, it } from &quot;@jest/globals&quot;;
import formatDate from &quot;../../utils/date/format-date&quot;;</file><file path="be/tests/utils/get-event-duration-string.test.ts">import { describe, expect, it } from &quot;@jest/globals&quot;;
import { getEventDurationString } from &quot;../../utils/calendar/duration&quot;;</file><file path="be/tests/utils/send-response.test.ts">import { beforeEach, describe, expect, it, jest } from &quot;@jest/globals&quot;;
import { mockFn, type AnyFn } from &quot;../test-utils&quot;;
import type { Response } from &quot;express&quot;;
import sendR from &quot;../../utils/send-response&quot;;</file><file path="be/tests/README.md"># Test Directory Structure

This directory contains organized tests following the application&apos;s architectural layers.

## Directory Structure

```
__tests__/
‚îú‚îÄ‚îÄ domain/          # Domain layer tests (Business logic, entities)
‚îú‚îÄ‚îÄ application/     # Application layer tests (Use cases, services)
‚îú‚îÄ‚îÄ infrastructure/  # Infrastructure layer tests (External integrations)
‚îî‚îÄ‚îÄ controller/      # Controller layer tests (HTTP handlers, routes)
```

## Coverage Targets

Each layer has specific coverage requirements enforced by Jest:

| Layer            | Coverage Target | Description                                    |
|------------------|----------------|------------------------------------------------|
| **Domain**       | 95%+           | Core business logic and domain entities        |
| **Application**  | 90%+           | Use cases and application services             |
| **Infrastructure** | 75%+        | External integrations (DB, APIs, etc.)         |
| **Controller**   | 80%+           | HTTP controllers and route handlers            |
| **Global**       | 75%+           | Default for any code not in above categories   |

## Running Tests

```bash
# Run all tests
pnpm test

# Run tests with coverage
pnpm test:coverage

# Run tests for specific layer
pnpm test -- __tests__/domain
pnpm test -- __tests__/application
pnpm test -- __tests__/infrastructure
pnpm test -- __tests__/controller

# Watch mode
pnpm test:watch
```

## Test File Naming

- Test files should use the `.test.ts` extension
- Name tests after the file being tested: `user-service.test.ts`
- Place tests in the appropriate layer directory

## Best Practices

1. **Domain tests** should focus on business logic without external dependencies
2. **Application tests** should test use cases with mocked dependencies
3. **Infrastructure tests** may use real integrations or sophisticated mocks
4. **Controller tests** should test HTTP request/response handling

## Coverage Reports

After running tests with coverage, view the report at:
- HTML report: `coverage/index.html`
- Terminal output: Displayed after test run
- JSON summary: `coverage/coverage-summary.json`</file><file path="be/tests/setup.ts">import { jest } from &quot;@jest/globals&quot;;</file><file path="be/tests/test-utils.ts">import { jest } from &quot;@jest/globals&quot;;
import type { Request, Response, NextFunction } from &quot;express&quot;;
import type { User } from &quot;@supabase/supabase-js&quot;;
type AnyFn = (...args: any[]) =&gt; any;
const mockFn = ()
export const createMockRequest = (overrides: Partial&lt;Request&gt; =
export const createMockResponse = ():
export const createMockNext = (): jest.Mock&lt;AnyFn&gt; =&gt;
export const createMockUser = (overrides: Partial&lt;User&gt; =
export const createMockAdminUser = (overrides: Partial&lt;User&gt; =
export const createMockSupabase = () =&gt;
export const createMockLemonSqueezy = () =&gt;
export const flushPromises = ()</file><file path="be/utils/ai/activate-agent.ts">import { type Agent, run, type Session } from &quot;@openai/agents&quot;;
import { AGENTS } from &quot;@/ai-agents&quot;;
import { createAgentSession, type CreateSessionOptions } from &quot;@/ai-agents/sessions&quot;;
import type { AgentContext } from &quot;@/ai-agents/tool-registry&quot;;
import type { AGENTS_LIST } from &quot;@/types&quot;;
import { asyncHandler } from &quot;../http/async-handlers&quot;;
import { logger } from &quot;../logger&quot;;
export interface ActivateAgentOptions {
  session?: Session | CreateSessionOptions;
  email?: string;
  context?: Record&lt;string, unknown&gt;;
}
type AnyAgent = Agent&lt;any, any&gt;;
‚ãÆ----
// If session config object is passed, create the session
‚ãÆ----
export async function runWorkerWithSession(agent: Agent, prompt: string, sessionConfig: CreateSessionOptions): Promise&lt;string&gt;</file><file path="be/utils/ai/index.ts"></file><file path="be/utils/ai/insights-calculator.ts">import type { calendar_v3 } from &quot;googleapis&quot;
export interface InsightsMetrics {
  totalEvents: number
  recurringEventsCount: number
  allDayEventsCount: number
  totalHours: number
  averageEventDurationMinutes: number
  busiestDay: { day: string; hours: number } | null
  quietestDay: { day: string; hours: number } | null
  dayDistribution: Record&lt;string, number&gt;
  peakHours: { morning: number; afternoon: number; evening: number }
  earliestStart: string | null
  latestEnd: string | null
  weekendHours: number
  weekdayHours: number
  freeDaysCount: number
  overloadedDaysCount: number
  longestEvent: { title: string; hours: number } | null
  shortestEvent: { title: string; minutes: number } | null
  backToBackCount: number
  averageGapMinutes: number
  multiAttendeeHours: number
  soloEventHours: number
  calendarBreakdown: { name: string; hours: number; eventCount: number }[]
  totalDays: number
}
‚ãÆ----
export function calculateInsightsMetrics(
  events: calendar_v3.Schema$Event[],
  calendarMap: Record&lt;string, { name: string; color: string }&gt;
): InsightsMetrics
function formatDayName(dateStr: string): string
function formatTime(date: Date): string</file><file path="be/utils/ai/quick-add-orchestrator.ts">import { run } from &quot;@openai/agents&quot;
import { HANDOFF_AGENTS, type AgentContext } from &quot;@/ai-agents&quot;
import type { calendar_v3 } from &quot;googleapis&quot;
‚ãÆ----
export type ParsedEventData = {
  summary: string
  date?: string
  time?: string
  duration?: string
  location?: string
  description?: string
  start?: { dateTime?: string; date?: string; timeZone?: string }
  end?: { dateTime?: string; date?: string; timeZone?: string }
}
export type ConflictData = {
  id: string
  summary: string
  start: string
  end: string
  calendarName: string
}
export type QuickAddOrchestratorResult = {
  success: boolean
  event?: calendar_v3.Schema$Event
  parsed?: ParsedEventData
  calendarId?: string
  calendarName?: string
  eventUrl?: string
  conflicts?: ConflictData[]
  error?: string
  requiresConfirmation?: boolean
}
type ConflictJsonData = {
  eventData?: ParsedEventData
  conflictingEvents?: ConflictData[]
}
type ToolOutputData = {
  id?: string
  summary?: string
  htmlLink?: string
  calendarId?: string
  calendarName?: string
}
type RunResultItem = {
  type: string
  output?: string
}
function parseConflictResponse(output: string):
/**
 * @description Formats a duration in minutes into a human-readable string.
 * Converts minutes to hours and minutes format for durations &gt;= 60 minutes,
 * or displays just minutes for shorter durations.
 *
 * @param {number} durationMinutes - The duration in minutes to format
 * @returns {string} Human-readable duration string (e.g., &quot;2 hours&quot;, &quot;1h 30m&quot;, &quot;45 minutes&quot;)
 *
 * @example
 * formatDuration(120);
 * formatDuration(90);
 * formatDuration(45);
 * formatDuration(60);
 */
function formatDuration(durationMinutes: number): string
function extractDateTimeFromEvent(eventStart: calendar_v3.Schema$EventDateTime):
function extractParsedFromEvent(event?: calendar_v3.Schema$Event): ParsedEventData
/**
 * @description Checks if the agent output indicates an authentication or authorization error.
 * Detects common phrases indicating the user needs to authorize their Google account
 * or complete OAuth flow before calendar operations can proceed.
 *
 * @param {string} output - The agent&apos;s output string to analyze
 * @returns {boolean} True if authentication-related error indicators are found, false otherwise
 *
 * @example
 * hasAuthError(&quot;Please authorize access to your Google Calendar&quot;);
 * hasAuthError(&quot;Event created successfully&quot;);
 */
function hasAuthError(output: string): boolean
function hasError(output: string): boolean
function hasSuccess(output: string): boolean
function tryParseToolOutput(output: string): ToolOutputData | null
function extractEventAndCalendarFromResults(items: RunResultItem[]):
export async function quickAddWithOrchestrator(
  email: string,
  text: string,
  options?: { forceCreate?: boolean }
): Promise&lt;QuickAddOrchestratorResult&gt;</file><file path="be/utils/ai/text-to-speech.ts">import OpenAI from &quot;openai&quot;;
import { env } from &quot;@/config&quot;;
import { logger } from &quot;@/utils/logger&quot;;
‚ãÆ----
export type TTSVoice = (typeof TTS_VOICES)[number];
‚ãÆ----
export type TTSResult = {
  success: boolean;
  audioBuffer?: Buffer;
  error?: string;
};
export async function generateSpeech(
  text: string,
  voice: TTSVoice = DEFAULT_VOICE,
): Promise&lt;TTSResult&gt;
export async function generateSpeechForTelegram(
  text: string,
  voice: TTSVoice = DEFAULT_VOICE,
): Promise&lt;TTSResult&gt;
export function isValidVoice(voice: string): voice is TTSVoice</file><file path="be/utils/ai/voice-transcription.ts">import OpenAI from &quot;openai&quot;
import { env } from &quot;@/config&quot;
import { Readable } from &quot;node:stream&quot;
‚ãÆ----
export type TranscriptionResult = {
  success: boolean
  text?: string
  error?: string
}
export async function transcribeAudio(
  audioBuffer: Buffer,
  mimeType = &quot;audio/webm&quot;
): Promise&lt;TranscriptionResult&gt;
function getExtensionFromMimeType(mimeType: string): string</file><file path="be/utils/auth/cookie-utils.ts">import type { CookieOptions, Response } from &quot;express&quot;;
import { env } from &quot;@/config&quot;;
import { logger } from &quot;../logger&quot;;
‚ãÆ----
export const setAuthCookies = (res: Response, accessToken: string, refreshToken: string, user?: object) =&gt;
export const clearAuthCookies = (res: Response) =&gt;</file><file path="be/utils/auth/get-user-calendar-tokens.ts">import type { TokensProps } from &quot;@/types&quot;
import { asyncHandler } from &quot;../http/async-handlers&quot;
import { userRepository } from &quot;../repositories/UserRepository&quot;</file><file path="be/utils/auth/google-token.ts">import { OAUTH2CLIENT, REDIRECT_URI, SCOPES, env } from &quot;@/config&quot;
import type { TokensProps } from &quot;@/types&quot;
import { google } from &quot;googleapis&quot;
import { isoToMs } from &quot;../date/timestamp-utils&quot;
import { userRepository } from &quot;../repositories/UserRepository&quot;
‚ãÆ----
const createFreshOAuth2Client = ()
export const generateGoogleAuthUrl = (
  options: { forceConsent?: boolean } = {}
): string =&gt;
‚ãÆ----
export type TokenExpiryStatus = {
  isExpired: boolean
  isNearExpiry: boolean
  expiresInMs: number | null
}
export type RefreshedGoogleToken = {
  accessToken: string
  expiryDate: number
}
export const checkTokenExpiry = (
  expiryDate: number | string | null | undefined
): TokenExpiryStatus =&gt;
export const fetchGoogleTokensByEmail = (
  email: string
): Promise&lt;
export const refreshGoogleAccessToken = async (
  tokens: TokensProps
): Promise&lt;RefreshedGoogleToken&gt; =&gt;
export const persistGoogleTokens = async (
  email: string,
  refreshedTokens: RefreshedGoogleToken
): Promise&lt;void&gt; =&gt;
export const deactivateGoogleTokens = async (email: string): Promise&lt;void&gt; =&gt;
export const getUserIdByEmail = (email: string): Promise&lt;string | null&gt;</file><file path="be/utils/auth/index.ts"></file><file path="be/utils/auth/ownership-validation.ts">import type { Request, Response } from &quot;express&quot;
import { SUPABASE } from &quot;@/config/clients&quot;
import { STATUS_RESPONSE } from &quot;@/config&quot;
import sendR from &quot;@/utils/send-response&quot;
import { logger } from &quot;@/utils/logger&quot;
export type OwnedResourceType = &quot;conversation&quot; | &quot;user_calendar&quot; | &quot;telegram_user&quot; | &quot;whatsapp_user&quot;
type ValidTableName = &quot;conversations&quot; | &quot;user_calendars&quot; | &quot;telegram_users&quot; | &quot;whatsapp_users&quot;
‚ãÆ----
export interface OwnershipValidationResult {
  isOwner: boolean
  error?: string
}
export async function validateResourceOwnership(
  userId: string,
  resourceType: OwnedResourceType,
  resourceId: string
): Promise&lt;OwnershipValidationResult&gt;
export async function requireOwnership(
  req: Request,
  res: Response,
  resourceType: OwnedResourceType,
  resourceId: string
): Promise&lt;boolean&gt;
export async function requireConversationOwnership(req: Request, res: Response, conversationId: string): Promise&lt;boolean&gt;
export function requireEmailOwnership(req: Request, res: Response, email: string): boolean
export function requireUserIdOwnership(req: Request, res: Response, targetUserId: string): boolean</file><file path="be/utils/auth/require-user.ts">import type { Request, Response } from &quot;express&quot;;
import type { User } from &quot;@supabase/supabase-js&quot;;
import { STATUS_RESPONSE } from &quot;@/config&quot;;
import sendR from &quot;@/utils/send-response&quot;;
export interface UserExtractionResult {
  success: true;
  userId: string;
  userEmail: string;
  user: User;
}
export interface UserExtractionError {
  success: false;
  handled: true;
}
export type UserResult = UserExtractionResult | UserExtractionError;
export interface UserIdResult {
  success: true;
  userId: string;
  user: User;
}
export type UserIdExtractionResult = UserIdResult | UserExtractionError;
export function requireUserId(
  req: Request,
  res: Response
): UserIdExtractionResult
export function requireUser(req: Request, res: Response): UserResult
export function getUserId(req: Request): string | undefined
export function getUserEmail(req: Request): string | undefined
export function isAuthenticated(req: Request): boolean
export function hasUserEmail(req: Request): boolean</file><file path="be/utils/auth/risc-event-handlers.ts">import { logger } from &quot;@/utils/logger&quot;;
import { userRepository } from &quot;@/utils/repositories/UserRepository&quot;;
import {
  RISC_EVENT_TYPES,
  type RiscSecurityEventToken,
  type RiscEventResult,
  type RiscEventData,
} from &quot;./risc-types&quot;;
import { extractGoogleSubjectId } from &quot;./risc-jwt-verifier&quot;;
export async function processRiscEvents(
  payload: RiscSecurityEventToken
): Promise&lt;RiscEventResult[]&gt;
async function processRiscEvent(
  eventType: string,
  eventData: RiscEventData,
  googleSubjectId: string | null
): Promise&lt;RiscEventResult&gt;
async function handleTokensRevoked(
  googleSubjectId: string | null,
  _eventData: RiscEventData
): Promise&lt;RiscEventResult&gt;
async function handleTokenRevoked(
  googleSubjectId: string | null,
  eventData: RiscEventData
): Promise&lt;RiscEventResult&gt;
async function handleSessionsRevoked(
  googleSubjectId: string | null,
  _eventData: RiscEventData
): Promise&lt;RiscEventResult&gt;
async function handleAccountDisabled(
  googleSubjectId: string | null,
  eventData: RiscEventData
): Promise&lt;RiscEventResult&gt;
async function handleAccountEnabled(
  googleSubjectId: string | null,
  _eventData: RiscEventData
): Promise&lt;RiscEventResult&gt;
async function handleCredentialChangeRequired(
  googleSubjectId: string | null,
  _eventData: RiscEventData
): Promise&lt;RiscEventResult&gt;
async function handleAccountPurged(
  googleSubjectId: string | null,
  _eventData: RiscEventData
): Promise&lt;RiscEventResult&gt;
async function handleVerification(
  eventData: RiscEventData
): Promise&lt;RiscEventResult&gt;</file><file path="be/utils/auth/risc-jwt-verifier.ts">import { logger } from &quot;@/utils/logger&quot;;
import type {
  GoogleJwks,
  GoogleJwk,
  JwtHeader,
  RiscSecurityEventToken,
} from &quot;./risc-types&quot;;
‚ãÆ----
async function fetchGooglePublicKeys(): Promise&lt;GoogleJwks&gt;
function base64UrlDecode(str: string): string
function base64UrlDecodeToBuffer(str: string): Buffer
function parseJwtUnverified(token: string):
function findKeyById(keys: GoogleJwks, kid: string): GoogleJwk | undefined
function jwkToPem(jwk: GoogleJwk): string
‚ãÆ----
const encodeInteger = (buf: Buffer): Buffer =&gt;
‚ãÆ----
function encodeLength(len: number): Buffer
function verifySignature(
  token: string,
  pem: string,
  algorithm: string
): boolean
export type VerifyRiscTokenResult = {
  valid: boolean;
  payload?: RiscSecurityEventToken;
  error?: string;
};
export async function verifyRiscToken(
  token: string,
  expectedAudience: string
): Promise&lt;VerifyRiscTokenResult&gt;
export function extractGoogleSubjectId(
  payload: RiscSecurityEventToken
): string | null
export function clearKeyCache(): void</file><file path="be/utils/auth/risc-types.ts">export type RiscSecurityEventToken = {
  iss: string;
  aud: string;
  iat: number;
  jti: string;
  events: RiscEvents;
};
export type RiscEvents = {
  [eventType: string]: RiscEventData;
};
export type RiscEventData = {
  subject?: {
    subject_type: &quot;iss-sub&quot;;
    iss: string;
    sub: string;
  };
  reason?: string;
  token_identifier_alg?: string;
  token_identifier?: string;
  event_timestamp?: number;
};
‚ãÆ----
export type RiscEventType = (typeof RISC_EVENT_TYPES)[keyof typeof RISC_EVENT_TYPES];
export type RiscEventResult = {
  success: boolean;
  eventType: string;
  googleSubjectId?: string;
  action: string;
  error?: string;
};
export type GoogleJwks = {
  keys: GoogleJwk[];
};
export type GoogleJwk = {
  kty: string;
  alg: string;
  use: string;
  kid: string;
  n: string;
  e: string;
};
export type JwtHeader = {
  alg: string;
  typ: string;
  kid: string;
};</file><file path="be/utils/auth/supabase-token.ts">import { SUPABASE } from &quot;@/config&quot;;
import type { User } from &quot;@supabase/supabase-js&quot;;
import { logger } from &quot;../logger&quot;;
export type SupabaseSessionResult = {
  user: User | null;
  accessToken: string | null;
  error: string | null;
  needsRefresh: boolean;
};
export type RefreshedSupabaseSession = {
  user: User;
  accessToken: string;
  refreshToken: string;
};
export const validateSupabaseToken = async (token: string): Promise&lt;SupabaseSessionResult&gt; =&gt;
export const refreshSupabaseSession = async (refreshToken: string): Promise&lt;RefreshedSupabaseSession&gt; =&gt;
export const setSupabaseSession = async (accessToken: string, refreshToken: string): Promise&lt;RefreshedSupabaseSession&gt; =&gt;</file><file path="be/utils/auth/third-party-signin.ts">import { PROVIDERS, REDIRECT_URI, SCOPES_STRING, STATUS_RESPONSE, SUPABASE } from &quot;@/config&quot;;
import type { AuthError } from &quot;@supabase/supabase-js&quot;;
import type { Response } from &quot;express&quot;;
import { logger } from &quot;../logger&quot;;
import sendR from &quot;@/utils/send-response&quot;;
type OAuthResult = {
  url: string | null;
  error: AuthError | null;
};
export async function initiateOAuthFlow(provider: PROVIDERS, options:
export function redirectToOAuth(res: Response, url: string): void
export function sendOAuthError(res: Response, error: AuthError): void
export async function supabaseThirdPartySignInOrSignUp(res: Response, provider: PROVIDERS): Promise&lt;void&gt;</file><file path="be/utils/auth/update-tokens-of-user.ts">import { SUPABASE } from &quot;@/config&quot;
import type { TokensProps } from &quot;@/types&quot;
import { asyncHandler } from &quot;../http/async-handlers&quot;
import { logger } from &quot;../logger&quot;
const msToIso = (ms: number | null | undefined): string | null =&gt;</file><file path="be/utils/cache/gap-recovery-cache.ts">import { isRedisConnected, redisClient } from &quot;@/config&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import type { GapCandidateDTO, GapRecoverySettings } from &quot;@/types&quot;;
import { DEFAULT_GAP_RECOVERY_SETTINGS } from &quot;@/utils/calendar/gap-recovery&quot;;
‚ãÆ----
export type CachedGaps = {
  gaps: GapCandidateDTO[];
  analyzedAt: string;
};
function getGapsCacheKey(userId: string): string
function getSettingsCacheKey(userId: string): string
export async function getCachedGaps(
  userId: string
): Promise&lt;CachedGaps | null&gt;
export async function setCachedGaps(
  userId: string,
  gaps: GapCandidateDTO[]
): Promise&lt;void&gt;
export async function getGapFromCache(
  userId: string,
  gapId: string
): Promise&lt;GapCandidateDTO | null&gt;
export async function removeGapFromCache(
  userId: string,
  gapId: string
): Promise&lt;boolean&gt;
export async function invalidateGapsCache(userId: string): Promise&lt;void&gt;
export async function getUserSettings(
  userId: string
): Promise&lt;GapRecoverySettings&gt;
export async function saveUserSettings(
  userId: string,
  settings: GapRecoverySettings
): Promise&lt;void&gt;
export async function invalidateUserSettings(userId: string): Promise&lt;void&gt;</file><file path="be/utils/cache/insights-cache.ts">import { isRedisConnected, redisClient } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import type { AIInsight } from &quot;@/ai-agents/insights-generator&quot;
‚ãÆ----
export interface CachedInsights {
  insights: AIInsight[]
  generatedAt: string
  periodStart: string
  periodEnd: string
}
function getCacheKey(userId: string, timeMin: string, timeMax: string): string
export async function getCachedInsights(
  userId: string,
  timeMin: string,
  timeMax: string
): Promise&lt;CachedInsights | null&gt;
export async function setCachedInsights(
  userId: string,
  timeMin: string,
  timeMax: string,
  data: CachedInsights
): Promise&lt;void&gt;
export async function invalidateCachedInsights(
  userId: string,
  timeMin: string,
  timeMax: string
): Promise&lt;void&gt;</file><file path="be/utils/calendar/check-conflicts.ts">import { asyncHandler } from &quot;@/utils/http&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
import { fetchCredentialsByEmail } from &quot;@/utils/auth&quot;;
import { formatDate } from &quot;@/utils/date&quot;;
import { initUserSupabaseCalendarWithTokensAndUpdateTokens } from &quot;./init&quot;;
import type { ConflictingEvent, ConflictCheckResult } from &quot;@/shared/types&quot;;
‚ãÆ----
export type ConflictCheckParams = {
  email: string;
  calendarId: string;
  startTime: string;
  endTime: string;
};
export type ConflictCheckAllCalendarsParams = {
  email: string;
  startTime: string;
  endTime: string;
  excludeEventId?: string;
};</file><file path="be/utils/calendar/delete-event.ts">import { REQUEST_CONFIG_BASE } from &quot;@/config&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
type DeleteEventParams = {
  calendarEvents: calendar_v3.Resource$Events;
  eventData?: calendar_v3.Schema$Event | Record&lt;string, string&gt;;
  extra?: Record&lt;string, unknown&gt;;
  req?: { body?: Record&lt;string, unknown&gt;; query?: Record&lt;string, unknown&gt; } | null;
};
function normalizeCalendarId(id: unknown): string | null
export async function deleteEvent(</file><file path="be/utils/calendar/duration.ts">export function getEventDurationString(startISO?: string | null, endISO?: string | null): string | null</file><file path="be/utils/calendar/ensure-calendars-synced.ts">import type { Database } from &quot;@/database.types&quot;;
import { SUPABASE } from &quot;@/config&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
import { logger } from &quot;../logger&quot;;
type UserCalendarInsert =
  Database[&quot;public&quot;][&quot;Tables&quot;][&quot;user_calendars&quot;][&quot;Insert&quot;];
export const ensureCalendarsSynced = async (
  calendar: calendar_v3.Calendar,
  userId: string
): Promise&lt;void&gt; =&gt;</file><file path="be/utils/calendar/events.ts">import { ACTION, STATUS_RESPONSE } from &quot;@/config&quot;;
import type { AuthedRequest } from &quot;@/types&quot;;
import type { Request } from &quot;express&quot;;
import { asyncHandler } from &quot;../http/async-handlers&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
import { deleteEvent } from &quot;./delete-event&quot;;
import { throwHttpError } from &quot;../http/error-template&quot;;
import { fetchCredentialsByEmail } from &quot;../auth/get-user-calendar-tokens&quot;;
import { getEvents } from &quot;./get-events&quot;;
import { initUserSupabaseCalendarWithTokensAndUpdateTokens } from &quot;./init&quot;;
import { insertEvent } from &quot;./insert-event&quot;;
import { patchEvent } from &quot;./patch-event&quot;;
import { updateEvent } from &quot;./update-event&quot;;</file><file path="be/utils/calendar/gap-recovery.ts">import type {
  DayOfWeek,
  FillGapRequest,
  GapAnalysisOptions,
  GapBoundaryEvent,
  GapCandidate,
  GapCandidateDTO,
  GapRecoverySettings,
  InferenceType,
  InferredContext,
} from &quot;@/types&quot;;
import { asyncHandler } from &quot;../http/async-handlers&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
import { fetchCalendarEvents } from &quot;./get-events&quot;;
import { fetchCredentialsByEmail } from &quot;../auth/get-user-calendar-tokens&quot;;
import { initUserSupabaseCalendarWithTokensAndUpdateTokens } from &quot;./init&quot;;
import { randomUUID } from &quot;node:crypto&quot;;
import {
  getCombinedPatternsForLanguages,
  matchTravelPatternMultilingual,
  isWorkRelatedEvent,
  type TravelPatternSet,
} from &quot;./travel-patterns-i18n&quot;;
‚ãÆ----
function formatDuration(durationMs: number): string
function getDayOfWeek(date: Date): DayOfWeek
function matchTravelPattern(
  summary: string,
  type: &quot;arrival&quot; | &quot;departure&quot;,
  patterns: TravelPatternSet = DEFAULT_PATTERNS
):
function calculateTravelSandwichConfidence(
  arrivalLocation: string | null,
  departureLocation: string | null
): number
function detectTravelSandwich(
  precedingEvent: calendar_v3.Schema$Event,
  followingEvent: calendar_v3.Schema$Event,
  patterns: TravelPatternSet = DEFAULT_PATTERNS
): InferredContext | null
type DetectWorkSessionParams = {
  gapStart: Date;
  gapEnd: Date;
  precedingEvent: calendar_v3.Schema$Event;
  followingEvent: calendar_v3.Schema$Event;
  patterns?: TravelPatternSet;
};
function detectWorkSession({
  gapStart,
  gapEnd,
  precedingEvent,
  followingEvent,
  patterns = DEFAULT_PATTERNS,
}: DetectWorkSessionParams): InferredContext | null
function detectMealBreak(
  gapStart: Date,
  gapDurationMs: number
): InferredContext | null
function createStandardGapContext(
  precedingEvent: calendar_v3.Schema$Event,
  followingEvent: calendar_v3.Schema$Event,
  durationMs: number
): InferredContext
type InferGapContextParams = {
  gapStart: Date;
  gapEnd: Date;
  precedingEvent: calendar_v3.Schema$Event;
  followingEvent: calendar_v3.Schema$Event;
  durationMs: number;
  patterns?: TravelPatternSet;
};
function inferGapContext({
  gapStart,
  gapEnd,
  precedingEvent,
  followingEvent,
  durationMs,
  patterns = DEFAULT_PATTERNS,
}: InferGapContextParams): InferredContext | null
function createGapBoundaryEvent(
  event: calendar_v3.Schema$Event,
  timestamp: Date,
  calendarId: string
): GapBoundaryEvent
function getEventEndTime(event: calendar_v3.Schema$Event): Date | null
function getEventStartTime(event: calendar_v3.Schema$Event): Date | null
function gapCandidateToDTO(gap: GapCandidate): GapCandidateDTO
type AnalyzeGapsParams = {
  email: string;
  startDate: Date;
  endDate: Date;
  calendarId?: string;
  settings?: Partial&lt;GapRecoverySettings&gt;;
  options?: GapAnalysisOptions;
};
‚ãÆ----
userId: &quot;&quot;, // Will be set by the caller
‚ãÆ----
type AnalyzeGapsForUserParams = {
  email: string;
  lookbackDays?: number;
  calendarId?: string;
  settings?: Partial&lt;GapRecoverySettings&gt;;
};
‚ãÆ----
type FillGapParams = {
  email: string;
  gapId: string;
  gapStart: Date;
  gapEnd: Date;
  calendarId: string;
  eventDetails: FillGapRequest;
};
‚ãÆ----
export const formatGapsForDisplay = (gaps: GapCandidateDTO[]): string =&gt;</file><file path="be/utils/calendar/get-events.ts">import { REQUEST_CONFIG_BASE } from &quot;@/config&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
import formatDate from &quot;@/utils/date/format-date&quot;;
import { getEventDurationString } from &quot;@/utils/calendar/duration&quot;;
type ListExtra = Partial&lt;calendar_v3.Params$Resource$Events$List&gt; &amp; {
  includeCalendarName?: boolean;
  email?: string;
  customEvents?: boolean;
};
type GetEventsParams = {
  calendarEvents: calendar_v3.Resource$Events;
  req?: { body?: Record&lt;string, unknown&gt;; query?: Record&lt;string, unknown&gt; } | null;
  extra?: Record&lt;string, unknown&gt;;
};
export type FormattedEvent = {
  eventId: string;
  summary: string;
  description: string | null;
  location: string | null;
  durationOfEvent: string | null;
  start: string | null;
  end: string | null;
};
export type CustomEventsResponse = {
  type: &quot;custom&quot;;
  calendarId: string | undefined;
  totalNumberOfEventsFound: number;
  totalEventsFound: FormattedEvent[];
};
export type StandardEventsResponse = {
  type: &quot;standard&quot;;
  data: calendar_v3.Schema$Events;
};
export type GetEventsResponse = CustomEventsResponse | StandardEventsResponse;
function buildListParams(rawExtra: ListExtra):
export async function fetchCalendarEvents(
  calendarEvents: calendar_v3.Resource$Events,
  params: calendar_v3.Params$Resource$Events$List
): Promise&lt;calendar_v3.Schema$Events&gt;
‚ãÆ----
export async function fetchAllCalendarEvents(
  calendarEvents: calendar_v3.Resource$Events,
  params: calendar_v3.Params$Resource$Events$List,
  maxPages = DEFAULT_MAX_PAGINATION_PAGES
): Promise&lt;calendar_v3.Schema$Events&gt;
export function formatSingleEvent(event: calendar_v3.Schema$Event): FormattedEvent
export function formatCustomEventsResponse(events: calendar_v3.Schema$Event[], calendarId: string | undefined): CustomEventsResponse
export async function getEvents(</file><file path="be/utils/calendar/index.ts"></file><file path="be/utils/calendar/init.ts">import { REDIRECT_URI, env } from &quot;@/config&quot;;
import { calendar_v3, google } from &quot;googleapis&quot;;
import type { OAuth2Client, Credentials } from &quot;google-auth-library&quot;;
import type { TokensProps } from &quot;@/types&quot;;
import { logger } from &quot;../logger&quot;;
import { updateUserSupabaseTokens } from &quot;../auth/update-tokens-of-user&quot;;
export const createOAuth2Client = (): OAuth2Client =&gt;
type RefreshedToken = { token: string | null | undefined; expiry_date?: number | null };
export const refreshAccessToken = async (client: OAuth2Client): Promise&lt;RefreshedToken | null&gt; =&gt;
export const createCalendarClient = (auth: OAuth2Client): calendar_v3.Calendar =&gt;
const persistRefreshedTokens = async (oldTokens: TokensProps, newTokens: RefreshedToken | null): Promise&lt;void&gt; =&gt;
const toGoogleCredentials = (tokens: TokensProps): Credentials =&gt; (
export const initUserSupabaseCalendarWithTokensAndUpdateTokens = async (tokens: TokensProps): Promise&lt;calendar_v3.Calendar&gt; =&gt;</file><file path="be/utils/calendar/insert-event.ts">import { REQUEST_CONFIG_BASE } from &quot;@/config&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
type InsertEventParams = {
  calendarEvents: calendar_v3.Resource$Events;
  eventData?: calendar_v3.Schema$Event | Record&lt;string, string&gt;;
  extra?: Record&lt;string, unknown&gt;;
};
function generateMeetConferenceData(): calendar_v3.Schema$ConferenceData
export async function insertEvent(</file><file path="be/utils/calendar/patch-event.ts">import { REQUEST_CONFIG_BASE } from &quot;@/config&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
type PatchEventParams = {
  calendarEvents: calendar_v3.Resource$Events;
  eventData?: calendar_v3.Schema$Event | Record&lt;string, string&gt;;
  extra?: Record&lt;string, unknown&gt;;
};
function normalizeCalendarId(id: unknown): string | null
/**
 * Patch an event in the calendar (partial update - only updates provided fields)
 *
 * @param {PatchEventParams} params - The parameters for patching an event.
 * @returns {Promise&lt;calendar_v3.Schema$Event&gt;} The patched event.
 * @description Patches an event in the calendar - only the fields provided are updated,
 * other fields are preserved. This is the preferred method for partial updates.
 */
export async function patchEvent(</file><file path="be/utils/calendar/reminders.ts">import type { calendar_v3 } from &quot;googleapis&quot;;
import { SUPABASE } from &quot;@/config&quot;;
import { fetchCredentialsByEmail } from &quot;@/utils/auth&quot;;
import { initUserSupabaseCalendarWithTokensAndUpdateTokens } from &quot;./init&quot;;
import {
  getPreference,
  updatePreference,
  type ReminderDefaultsPreference,
} from &quot;@/services/user-preferences-service&quot;;
export interface EventReminder {
  method: &quot;email&quot; | &quot;popup&quot;;
  minutes: number;
}
export interface EventReminders {
  useDefault: boolean;
  overrides: EventReminder[];
}
export interface ReminderPreferences {
  enabled: boolean;
  defaultReminders: EventReminder[];
  useCalendarDefaults: boolean;
}
export async function getUserReminderPreferences(
  userId: string,
): Promise&lt;ReminderPreferences | null&gt;
export async function getUserIdByEmail(email: string): Promise&lt;string | null&gt;
export async function getCalendarDefaultReminders(
  email: string,
  calendarId = &quot;primary&quot;,
): Promise&lt;
export async function updateCalendarDefaultReminders(
  email: string,
  calendarId: string,
  defaultReminders: EventReminder[],
): Promise&lt;calendar_v3.Schema$CalendarListEntry&gt;
export async function updateEventReminders(
  email: string,
  calendarId: string,
  eventId: string,
  reminders: EventReminders,
): Promise&lt;calendar_v3.Schema$Event&gt;
export function resolveRemindersForEvent(
  userPreferences: ReminderPreferences | null,
  explicitReminders?: EventReminders | null,
): EventReminders | undefined
export async function saveUserReminderPreferences(
  userId: string,
  preferences: ReminderPreferences,
): Promise&lt;void&gt;</file><file path="be/utils/calendar/reschedule.ts">import { asyncHandler } from &quot;@/utils/http&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
import { fetchCredentialsByEmail } from &quot;@/utils/auth&quot;;
import { formatDate } from &quot;@/utils/date&quot;;
import { initUserSupabaseCalendarWithTokensAndUpdateTokens } from &quot;./init&quot;;
import type { ConflictingEvent } from &quot;@/shared/types&quot;;
export interface RescheduleSuggestion {
  start: string;
  end: string;
  startFormatted: string;
  endFormatted: string;
  dayOfWeek: string;
  score: number;
  reason: string;
}
export interface RescheduleParams {
  email: string;
  eventId: string;
  calendarId?: string;
  preferredTimeOfDay?: &quot;morning&quot; | &quot;afternoon&quot; | &quot;evening&quot; | &quot;any&quot;;
  daysToSearch?: number;
  excludeWeekends?: boolean;
}
export interface RescheduleResult {
  success: boolean;
  event?: {
    id: string;
    summary: string;
    start: string;
    end: string;
    duration: number;
  };
  suggestions: RescheduleSuggestion[];
  conflicts?: ConflictingEvent[];
  error?: string;
}
‚ãÆ----
// Search window: from tomorrow to daysToSearch days
‚ãÆ----
// Get all events in search window across all calendars
‚ãÆ----
// Skip calendars that fail
‚ãÆ----
// Sort busy slots by start time
‚ãÆ----
// Find free slots
‚ãÆ----
// Skip weekends if requested
‚ãÆ----
// Check each hour in the preferred time range
‚ãÆ----
// Check if this slot conflicts with any busy time
‚ãÆ----
// Calculate score based on various factors
‚ãÆ----
// Prefer earlier days
‚ãÆ----
// Prefer preferred time of day
‚ãÆ----
// Only take the best slot per day
‚ãÆ----
// Sort by score (highest first)
‚ãÆ----
// Limit to top 5
‚ãÆ----
export interface ApplyRescheduleParams {
  email: string;
  eventId: string;
  calendarId?: string;
  newStart: string;
  newEnd: string;
}
export interface ApplyRescheduleResult {
  success: boolean;
  event?: calendar_v3.Schema$Event;
  error?: string;
}
/**
 * @description Applies a reschedule suggestion by updating the event&apos;s start and end times.
 * Patches the event in Google Calendar with the new time slot.
 * @param {ApplyRescheduleParams} params - Parameters for applying the reschedule.
 * @param {string} params.email - The user&apos;s email address for authentication.
 * @param {string} params.eventId - The ID of the event to reschedule.
 * @param {string} [params.calendarId=&quot;primary&quot;] - The calendar containing the event.
 * @param {string} params.newStart - The new start time in ISO 8601 format.
 * @param {string} params.newEnd - The new end time in ISO 8601 format.
 * @returns {Promise&lt;ApplyRescheduleResult&gt;} Result indicating success and the updated event or error message.
 * @example
 * const result = await applyReschedule({
 *   email: &quot;user@example.com&quot;,
 *   eventId: &quot;event123&quot;,
 *   newStart: &quot;2025-01-16T10:00:00Z&quot;,
 *   newEnd: &quot;2025-01-16T11:00:00Z&quot;
 * });
 * if (result.success) {
 *   console.log(&quot;Event rescheduled to:&quot;, result.event?.start);
 * }
 */</file><file path="be/utils/calendar/sync-calendars-after-oauth.ts">import { Database } from &quot;@/database.types&quot;
import { SUPABASE, REDIRECT_URI, env } from &quot;@/config&quot;
import { google, calendar_v3 } from &quot;googleapis&quot;
import { logger } from &quot;../logger&quot;
type UserCalendarInsert = Database[&quot;public&quot;][&quot;Tables&quot;][&quot;user_calendars&quot;][&quot;Insert&quot;]
export const syncUserCalendarsAfterOAuth = async (
  userId: string,
  accessToken: string,
  refreshToken?: string,
): Promise&lt;void&gt; =&gt;</file><file path="be/utils/calendar/travel-patterns-i18n.ts">import type { SupportedEventLanguage } from &quot;@/types&quot;;
export type TravelPatternSet = {
  arrival: RegExp[];
  departure: RegExp[];
  workKeywords: string[];
};
‚ãÆ----
export function getCombinedPatternsForLanguages(
  languages: SupportedEventLanguage[]
): TravelPatternSet
export function matchTravelPatternMultilingual(
  summary: string,
  type: &quot;arrival&quot; | &quot;departure&quot;,
  patterns: TravelPatternSet
):
export function isWorkRelatedEvent(
  summary: string,
  patterns: TravelPatternSet
): boolean</file><file path="be/utils/calendar/update-categories.ts">import { Database } from &quot;@/database.types&quot;;
import { SUPABASE } from &quot;@/config/clients/supabase&quot;;
import { calendar_v3 } from &quot;googleapis&quot;;
import { logger } from &quot;../logger&quot;;
type UserCalendarInsert = Database[&quot;public&quot;][&quot;Tables&quot;][&quot;user_calendars&quot;][&quot;Insert&quot;];
export const updateUserSupabaseCalendarCategories = async (calendar: calendar_v3.Calendar, email: string, userId: string): Promise&lt;void&gt; =&gt;</file><file path="be/utils/calendar/update-event.ts">import { REQUEST_CONFIG_BASE } from &quot;@/config&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
type UpdateEventParams = {
  calendarEvents: calendar_v3.Resource$Events;
  eventData?: calendar_v3.Schema$Event | Record&lt;string, string&gt;;
  extra?: Record&lt;string, unknown&gt;;
  req?: { query?: Record&lt;string, unknown&gt; } | null;
};
function normalizeCalendarId(id: unknown): string | null
export async function updateEvent(</file><file path="be/utils/conversation/ConversationService.ts">import { SUPABASE } from &quot;@/config/clients/supabase&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import { isToday } from &quot;@/utils/date/date-helpers&quot;;
import type { userAndAiMessageProps } from &quot;@/types&quot;;
import type { Database } from &quot;@/database.types&quot;;
import type {
  ConversationConfig,
  ConversationContext,
  ConversationListItem,
  ConversationSource,
  FullConversation,
  MessageRole,
  SummarizeFn,
  TelegramConversationRow,
  WebConversationRow,
} from &quot;./types&quot;;
import { DEFAULT_CONVERSATION_CONFIG } from &quot;./types&quot;;
type ConversationInsert =
  Database[&quot;public&quot;][&quot;Tables&quot;][&quot;conversations&quot;][&quot;Insert&quot;];
‚ãÆ----
const mapRoleToDb = (role: &quot;user&quot; | &quot;assistant&quot; | &quot;system&quot;): MessageRole
const calculateContextLength = (messages: userAndAiMessageProps[]): number
type StoreSummaryParams = {
  conversationId: string;
  userId: string;
  summaryText: string;
  messageCount: number;
  firstSequence: number;
  lastSequence: number;
};
type AddMessageParams = {
  stateId: string;
  userId: string;
  context: ConversationContext;
  message: userAndAiMessageProps;
  summarizeFn: SummarizeFn;
};
export class ConversationService
‚ãÆ----
constructor(
    source: ConversationSource,
    config: Partial&lt;ConversationConfig&gt; = {},
)
async getConversationMessages(
    conversationId: string,
): Promise&lt;userAndAiMessageProps[]&gt;
async getTodayConversation(
    identifier: string | number,
): Promise&lt;WebConversationRow | TelegramConversationRow | null&gt;
async createConversation(
    userId: string,
    externalChatId?: number,
    initialMessage?: userAndAiMessageProps,
): Promise&lt;
async updateConversationState(
    conversationId: string,
    context: ConversationContext,
    messageCount: number,
): Promise&lt;boolean&gt;
async updateTitle(conversationId: string, title: string): Promise&lt;boolean&gt;
async storeSummary(params: StoreSummaryParams): Promise&lt;boolean&gt;
async markAsSummarized(
    conversationId: string,
    summary: string,
): Promise&lt;boolean&gt;
async condenseSummary(
    existingSummary: string,
    newSummary: string,
    summarizeFn: SummarizeFn,
): Promise&lt;string&gt;
async addMessageAndMaybeSummarize(
    params: AddMessageParams,
): Promise&lt;ConversationContext&gt;
‚ãÆ----
// Use nextSequence as the actual message count (represents total messages in DB)
// Not context.messages.length which can be reduced after summarization
‚ãÆ----
/**
   * @description Builds a formatted prompt string from conversation context for AI consumption.
   * Combines the conversation summary (if available) and recent message history into a
   * single prompt string, respecting configured display length limits.
   * @param {ConversationContext} context - The conversation context containing summary and messages.
   * @returns {string} A formatted string containing the summary and message history, truncated to maxContextPromptLength.
   * @example
   * const prompt = service.buildContextPrompt({
   *   summary: &quot;User has been asking about calendar events...&quot;,
   *   messages: [{ role: &quot;user&quot;, content: &quot;What&apos;s next?&quot; }],
   *   lastUpdated: new Date().toISOString()
   * });
   *
   */
buildContextPrompt(context: ConversationContext): string
async getConversationList(
    userId: string,
    options?: { limit?: number; offset?: number; search?: string },
): Promise&lt;ConversationListItem[]&gt;
/**
   * @description Retrieves a full conversation by ID including all its messages.
   * Validates that the conversation belongs to the specified user and source.
   * @param {string} conversationId - The unique identifier of the conversation.
   * @param {string} userId - The UUID of the user who owns the conversation.
   * @returns {Promise&lt;FullConversation | null&gt;} The full conversation with messages, or null if not found or access denied.
   * @example
   * const conversation = await service.getConversationById(&quot;conv-123&quot;, &quot;user-456&quot;);
   * if (conversation) {
   *   console.log(`Found ${conversation.messages.length} messages`);
   * }
   */
async getConversationById(
    conversationId: string,
    userId: string,
): Promise&lt;FullConversation | null&gt;
async loadConversationIntoContext(
    conversationId: string,
    userId: string,
): Promise&lt;
async deleteConversation(
    conversationId: string,
    userId: string,
): Promise&lt;boolean&gt;
async closeActiveConversation(userId: string): Promise&lt;boolean&gt;
async deleteAllConversations(userId: string): Promise&lt;</file><file path="be/utils/conversation/TelegramConversationAdapter.ts">import { SUPABASE } from &quot;@/config/clients/supabase&quot;
import { logger } from &quot;@/utils/logger&quot;
import type { userAndAiMessageProps } from &quot;@/types&quot;
import type { ConversationContext, SummarizeFn } from &quot;./types&quot;
import { ConversationService } from &quot;./ConversationService&quot;
‚ãÆ----
export class TelegramConversationAdapter
‚ãÆ----
constructor()
async getUserIdFromTelegram(telegramUserId: number): Promise&lt;string | null&gt;
async ensureTelegramUserExists(
    telegramUserId: number,
    chatId: number
): Promise&lt;string | null&gt;
getTodayConversationState(chatId: number)
async createConversationState(
    chatId: number,
    telegramUserId: number,
    initialMessage?: userAndAiMessageProps
): Promise&lt;
updateConversationState(
    conversationId: string,
    context: ConversationContext,
    messageCount: number
): Promise&lt;boolean&gt;
storeSummary(params: {
    conversationId: string
    userId: string
    summaryText: string
    messageCount: number
    firstSequence: number
    lastSequence: number
}): Promise&lt;boolean&gt;
markAsSummarized(
    conversationId: string,
    summary: string
): Promise&lt;boolean&gt;
async getOrCreateTodayContext(
    chatId: number,
    telegramUserId: number
): Promise&lt;
/**
   * @description Adds a message to the current conversation context and handles automatic summarization.
   * Gets or creates today&apos;s conversation context, then adds the message using the service&apos;s
   * summarization logic when thresholds are exceeded.
   * @param {number} chatId - The Telegram chat ID.
   * @param {number} telegramUserId - The Telegram user ID.
   * @param {userAndAiMessageProps} message - The message to add (user or assistant).
   * @param {SummarizeFn} summarizeFn - Function to call for AI-based summarization when needed.
   * @returns {Promise&lt;ConversationContext&gt;} The updated conversation context.
   * @example
   * const context = await adapter.addMessageToContext(
   *   987654321,
   *   123456789,
   *   { role: &quot;user&quot;, content: &quot;What events do I have today?&quot; },
   *   async (msgs) =&gt; await aiSummarize(msgs)
   * );
   */
async addMessageToContext(
    chatId: number,
    telegramUserId: number,
    message: userAndAiMessageProps,
    summarizeFn: SummarizeFn
): Promise&lt;ConversationContext&gt;
buildContextPrompt(context: ConversationContext): string
async getConversationContext(
    chatId: number,
    telegramUserId: number
): Promise&lt;ConversationContext&gt;</file><file path="be/utils/conversation/types.ts">import type { userAndAiMessageProps } from &quot;@/types&quot;
import type { Database } from &quot;@/database.types&quot;
export type MessageRole = Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;]
export type ConversationSource = &quot;web&quot; | &quot;telegram&quot; | &quot;whatsapp&quot; | &quot;api&quot;
export type ConversationContext = {
  messages: userAndAiMessageProps[]
  summary?: string
  title?: string
  lastUpdated: string
}
export type BaseConversationRow = {
  id: string
  user_id: string
  message_count: number | null
  summary: string | null
  is_active: boolean | null
  created_at: string
  updated_at: string
  last_message_at: string | null
}
export type WebConversationRow = BaseConversationRow &amp; {
  title: string | null
}
export type TelegramConversationRow = BaseConversationRow &amp; {
  external_chat_id: number | null
}
export type SummarizeFn = (messages: userAndAiMessageProps[]) =&gt; Promise&lt;string&gt;
export type ConversationListItem = {
  id: string
  title: string
  messageCount: number
  lastUpdated: string
  createdAt: string
}
export type FullConversation = {
  id: string
  userId: string
  messages: userAndAiMessageProps[]
  summary?: string
  title?: string
  messageCount: number
  lastUpdated: string
  createdAt: string
}
export type ConversationConfig = {
  maxContextLength: number
  maxSummaryLength: number
  maxMessagesBeforeSummarize: number
  maxContextPromptLength: number
  maxSummaryDisplayLength: number
  maxMessagesDisplayLength: number
}</file><file path="be/utils/conversation/WebConversationAdapter.ts">import type { ConversationContext, ConversationListItem, FullConversation, SummarizeFn } from &quot;./types&quot;;
import { ConversationService } from &quot;./ConversationService&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import type { userAndAiMessageProps } from &quot;@/types&quot;;
‚ãÆ----
export class WebConversationAdapter
‚ãÆ----
constructor()
getTodayConversationState(userId: string)
createConversationState(userId: string, initialMessage?: userAndAiMessageProps): Promise&lt;
updateConversationState(conversationId: string, context: ConversationContext, messageCount: number): Promise&lt;boolean&gt;
updateConversationTitle(conversationId: string, title: string): Promise&lt;boolean&gt;
storeSummary(params: {
    conversationId: string;
    userId: string;
    summaryText: string;
    messageCount: number;
    firstSequence: number;
    lastSequence: number;
}): Promise&lt;boolean&gt;
markAsSummarized(conversationId: string, summary: string): Promise&lt;boolean&gt;
async getOrCreateTodayContext(userId: string): Promise&lt;
/**
   * @description Adds a message to the current today&apos;s conversation context and handles automatic summarization.
   * Gets or creates today&apos;s conversation context, then adds the message using the service&apos;s
   * summarization logic when thresholds are exceeded.
   * @param {string} userId - The UUID of the user.
   * @param {userAndAiMessageProps} message - The message to add (user or assistant).
   * @param {SummarizeFn} summarizeFn - Function to call for AI-based summarization when needed.
   * @returns {Promise&lt;ConversationContext&gt;} The updated conversation context.
   * @example
   * const context = await adapter.addMessageToContext(
   *   &quot;user-uuid-123&quot;,
   *   { role: &quot;user&quot;, content: &quot;What events do I have today?&quot; },
   *   async (msgs) =&gt; await aiSummarize(msgs)
   * );
   */
async addMessageToContext(userId: string, message: userAndAiMessageProps, summarizeFn: SummarizeFn): Promise&lt;ConversationContext&gt;
async addMessageToConversation(
    conversationId: string,
    userId: string,
    message: userAndAiMessageProps,
    summarizeFn: SummarizeFn
): Promise&lt;ConversationContext&gt;
buildContextPrompt(context: ConversationContext): string
async getConversationContext(userId: string): Promise&lt;ConversationContext&gt;
getConversationList(userId: string, options?:
getConversationById(conversationId: string, userId: string): Promise&lt;FullConversation | null&gt;
loadConversationIntoContext(conversationId: string, userId: string): Promise&lt;
deleteConversation(conversationId: string, userId: string): Promise&lt;boolean&gt;
deleteAllConversations(userId: string): Promise&lt;
closeActiveConversation(userId: string): Promise&lt;boolean&gt;</file><file path="be/utils/date/date-helpers.ts">import { startOfDay, isToday as dateFnsIsToday, parseISO } from &quot;date-fns&quot;
export const getStartOfDay = (date: Date = new Date()): Date
export const isToday = (dateString: string): boolean</file><file path="be/utils/date/format-date.ts">import { isValid, parseISO } from &quot;date-fns&quot;
import { logger } from &quot;../logger&quot;
const formatDate = (
  date: Date | string | null | undefined,
  withTime = false,
  desiredLanguage = &quot;he-IL&quot;,
): string =&gt;</file><file path="be/utils/date/index.ts"></file><file path="be/utils/date/timestamp-utils.ts">import { parseISO, formatISO } from &quot;date-fns&quot;
export const isoToMs = (isoString: string | null | undefined): number | null =&gt;
export const msToIso = (ms: number): string
export const nowIso = (): string
export const nowMs = (): number</file><file path="be/utils/db/index.ts"></file><file path="be/utils/db/subscription-status.ts">export type SubscriptionStatus =
  (typeof SUBSCRIPTION_STATUSES)[keyof typeof SUBSCRIPTION_STATUSES];
‚ãÆ----
export const isActiveSubscription = (status: string): boolean =&gt;
export const isModifiableSubscription = (status: string): boolean =&gt;
export const isValidSubscription = (status: string): boolean =&gt;</file><file path="be/utils/http/async-handlers.ts">import type { NextFunction, Request, Response } from &quot;express&quot;;
export const reqResAsyncHandler =
&lt;H extends (req: Request, res: Response, next: NextFunction)
export const asyncHandler =
&lt;A extends unknown[], R&gt;(fn: (...args: A)</file><file path="be/utils/http/error-template.ts">import type { Response } from &quot;express&quot;;
import { logger } from &quot;../logger&quot;;
export type HttpError = Error &amp; { cause: { status: number } };
export const createHttpError = (message: string, status: number): HttpError =&gt;
export const sendErrorResponse = (res: Response, status: number, message: string): void =&gt;
export const throwHttpError = (message: string, status: number): never =&gt;
const errorTemplate = (message: string, status: number, res?: Response): never =&gt;</file><file path="be/utils/http/index.ts"></file><file path="be/utils/http/pagination.ts">import type { Request } from &quot;express&quot;;
export interface PaginationParams {
  page: number;
  limit: number;
  offset: number;
}
export interface PaginationResult&lt;T&gt; {
  data: T[];
  total: number;
  page: number;
  totalPages: number;
  hasNext: boolean;
  hasPrev: boolean;
}
export interface PaginationDefaults {
  page: number;
  limit: number;
  maxLimit: number;
}
‚ãÆ----
export function parsePaginationParams(
  query: Request[&quot;query&quot;],
  defaults: Partial&lt;PaginationDefaults&gt; = {}
): PaginationParams
export function calculatePaginationMeta(
  total: number,
  page: number,
  limit: number
): Omit&lt;PaginationResult&lt;never&gt;, &quot;data&quot;&gt;
export function createPaginatedResponse&lt;T&gt;(
  data: T[],
  total: number,
  params: PaginationParams
): PaginationResult&lt;T&gt;
export function parseSortParams&lt;T extends string&gt;(
  query: Request[&quot;query&quot;],
  allowedFields: readonly T[],
  defaultField: T,
  defaultOrder: &quot;asc&quot; | &quot;desc&quot; = &quot;desc&quot;
):</file><file path="be/utils/repositories/UserRepository.ts">import { SUPABASE } from &quot;@/config/clients/supabase&quot;
import type { TokensProps } from &quot;@/types&quot;
import { logger } from &quot;@/utils/logger&quot;
import { isoToMs, msToIso } from &quot;@/utils/date/timestamp-utils&quot;
‚ãÆ----
type UserRow = {
  id: string
  email: string
  timezone: string | null
  display_name: string | null
  first_name: string | null
  last_name: string | null
  avatar_url: string | null
  status: string | null
}
type OAuthRow = {
  access_token: string
  refresh_token: string | null
  token_type: string | null
  id_token: string | null
  scope: string | null
  expires_at: string | null
  refresh_token_expires_at: string | null
  is_valid: boolean | null
  provider: string
}
const normalizeEmail = (email: string): string
const combineUserAndOAuthToTokensProps = (
  user: UserRow,
  oauthToken: OAuthRow
): TokensProps =&gt; (
export class UserRepository
‚ãÆ----
async findUserByEmail(email: string): Promise&lt;UserRow | null&gt;
async findUserIdByEmail(email: string): Promise&lt;string | null&gt;
async findGoogleOAuthToken(userId: string): Promise&lt;OAuthRow | null&gt;
async findUserWithGoogleTokens(
    email: string
): Promise&lt;
async findUserWithGoogleTokensOrThrow(email: string): Promise&lt;TokensProps&gt;
async validateUserExists(email: string): Promise&lt;
async updateGoogleTokens(
    userId: string,
    accessToken: string,
    expiryDate: number
): Promise&lt;void&gt;
async deactivateGoogleTokens(userId: string): Promise&lt;void&gt;
async updateUserTimezone(email: string, timezone: string): Promise&lt;void&gt;
async findUserByGoogleSubjectId(
    googleSubjectId: string
): Promise&lt;
async revokeTokensByGoogleSubjectId(
    googleSubjectId: string
): Promise&lt;
async setGoogleSubjectId(
    userId: string,
    googleSubjectId: string
): Promise&lt;void&gt;
async suspendUserByGoogleSubjectId(
    googleSubjectId: string
): Promise&lt;</file><file path="be/utils/security/index.ts"></file><file path="be/utils/security/llm-output-validation.ts">import { z } from &quot;zod&quot;
import { logger } from &quot;@/utils/logger&quot;
export interface ValidationResult&lt;T&gt; {
  success: boolean
  data?: T
  error?: string
  rawOutput?: unknown
}
export function validateLLMJson&lt;T&gt;(
  output: unknown,
  schema: z.ZodSchema&lt;T&gt;
): ValidationResult&lt;T&gt;
export function sanitizeLLMTextOutput(output: string): string
/**
 * @description Attempts to extract and parse JSON data from an LLM response string.
 * Handles multiple formats: markdown code blocks (```json ... ```), raw JSON objects,
 * and JSON arrays. Returns null if no valid JSON can be extracted.
 *
 * @param {string} response - The LLM response string that may contain JSON
 * @returns {unknown | null} The parsed JSON data, or null if extraction/parsing fails
 *
 * @example
 * // Extract from markdown code block
 * const response = &apos;Here is the data:\n```json\n{&quot;name&quot;: &quot;John&quot;}\n```&apos;;
 * const data = extractJsonFromLLMResponse(response);
 * // Result: { name: &apos;John&apos; }
 *
 * @example
 * // Extract raw JSON object from text
 * const response = &apos;The event details are {&quot;title&quot;: &quot;Meeting&quot;, &quot;time&quot;: &quot;10:00&quot;}&apos;;
 * const data = extractJsonFromLLMResponse(response);
 * // Result: { title: &apos;Meeting&apos;, time: &apos;10:00&apos; }
 *
 * @example
 * // Extract JSON array
 * const response = &apos;Events: [{&quot;id&quot;: 1}, {&quot;id&quot;: 2}]&apos;;
 * const data = extractJsonFromLLMResponse(response);
 * // Result: [{ id: 1 }, { id: 2 }]
 *
 * @example
 * // Returns null for invalid JSON
 * const response = &apos;No JSON here&apos;;
 * const data = extractJsonFromLLMResponse(response);
 * // Result: null
 */
export function extractJsonFromLLMResponse(response: string): unknown | null</file><file path="be/utils/security/pii-masking.ts">import { logger } from &quot;@/utils/logger&quot;
‚ãÆ----
export interface PIIMaskingResult {
  masked: string
  foundTypes: string[]
  originalLength: number
  maskedLength: number
}
export function maskPII(input: string, options?:
export function containsPII(input: string): boolean
export function maskEmailPartially(email: string): string
export function maskPhonePartially(phone: string): string</file><file path="be/utils/security/ssrf-protection.ts">import { logger } from &quot;@/utils/logger&quot;
import { URL } from &quot;node:url&quot;
import { isIP } from &quot;node:net&quot;
‚ãÆ----
export interface SSRFValidationResult {
  safe: boolean
  reason?: string
  normalizedUrl?: string
}
function isPrivateIPv4(ip: string): boolean
function isPrivateIPv6(ip: string): boolean
export function validateUrlForSSRF(urlString: string, options?: {
  allowPrivateIPs?: boolean
  allowedDomains?: Set&lt;string&gt;
  strictMode?: boolean
}): SSRFValidationResult
export async function safeFetch(
  urlString: string,
  options?: RequestInit &amp; { ssrfOptions?: Parameters&lt;typeof validateUrlForSSRF&gt;[1] }
): Promise&lt;Response&gt;
export function isAllowedDomain(hostname: string): boolean
export function addAllowedDomain(hostname: string): void</file><file path="be/utils/audit-logger.ts">import { env } from &quot;@/config&quot;;
import path from &quot;path&quot;;
import winston from &quot;winston&quot;;
‚ãÆ----
export type AuditEventTypeValue = (typeof AuditEventType)[keyof typeof AuditEventType];
export type AuditLogEntry = {
  timestamp: string;
  event_type: AuditEventTypeValue;
  telegram_user_id: number;
  metadata: Record&lt;string, unknown&gt;;
};
const getDate = ()</file><file path="be/utils/compression.ts">import { promisify } from &quot;node:util&quot;
import { gzip, gunzip } from &quot;node:zlib&quot;
‚ãÆ----
export async function compressString(data: string): Promise&lt;string&gt;
export async function decompressString(data: string): Promise&lt;string&gt;
export async function compressJSON&lt;T&gt;(obj: T): Promise&lt;string&gt;
export async function decompressJSON&lt;T&gt;(data: string): Promise&lt;T&gt;</file><file path="be/utils/index.ts"></file><file path="be/utils/logger.ts">import { env } from &quot;@/config&quot;;
import path from &quot;path&quot;;
import winston from &quot;winston&quot;;
const getDate = () =&gt;</file><file path="be/utils/send-response.ts">import type { Response } from &quot;express&quot;;
‚ãÆ----
const sendR = (res: Response, status: number, message: string, data?: unknown) =&gt;</file><file path="be/utils/sse.ts">import type { Response } from &quot;express&quot;;
export type SSEEventType =
  | &quot;text_delta&quot;
  | &quot;tool_start&quot;
  | &quot;tool_complete&quot;
  | &quot;agent_switch&quot;
  | &quot;title_generated&quot;
  | &quot;done&quot;
  | &quot;error&quot;
  | &quot;heartbeat&quot;;
export interface SSEEvent&lt;T = unknown&gt; {
  type: SSEEventType;
  data: T;
  timestamp: string;
}
export interface TextDeltaData {
  delta: string;
  fullText?: string;
}
export interface ToolStartData {
  tool: string;
  agent: string;
  args?: Record&lt;string, unknown&gt;;
}
export interface ToolCompleteData {
  tool: string;
  result: &quot;success&quot; | &quot;error&quot;;
  output?: string;
}
export interface AgentSwitchData {
  from: string;
  to: string;
}
export interface DoneData {
  conversationId: string;
  fullResponse: string;
  usage?: {
    totalTokens?: number;
    inputTokens?: number;
    outputTokens?: number;
  };
}
export interface ErrorData {
  message: string;
  code: string;
}
export interface TitleGeneratedData {
  conversationId: string;
  title: string;
}
export function setupSSEHeaders(res: Response): void
export function writeSSEEvent&lt;T&gt;(
  res: Response,
  eventType: SSEEventType,
  data: T,
): void
export function writeTextDelta(
  res: Response,
  delta: string,
  fullText?: string,
): void
export function writeToolStart(
  res: Response,
  tool: string,
  agent: string,
  args?: Record&lt;string, unknown&gt;,
): void
export function writeToolComplete(
  res: Response,
  tool: string,
  result: &quot;success&quot; | &quot;error&quot;,
  output?: string,
): void
export function writeAgentSwitch(
  res: Response,
  from: string,
  to: string,
): void
export function writeDone(
  res: Response,
  conversationId: string,
  fullResponse: string,
  usage?: DoneData[&quot;usage&quot;],
): void
export function writeError(
  res: Response,
  message: string,
  code = &quot;STREAM_ERROR&quot;,
): void
export function writeTitleGenerated(
  res: Response,
  conversationId: string,
  title: string,
): void
export function writeHeartbeat(res: Response): void
export function startHeartbeat(res: Response, intervalMs = 15000): () =&gt; void
export function endSSEStream(res: Response): void</file><file path="be/utils/web-conversation-history.ts">import { SUPABASE } from &quot;@/config/clients/supabase&quot;;
import { logger } from &quot;./logger&quot;;
import type { userAndAiMessageProps } from &quot;@/types&quot;;
import type { Database } from &quot;@/database.types&quot;;
import { getStartOfDay, isToday } from &quot;@/utils/date/date-helpers&quot;;
‚ãÆ----
type MessageRole = Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;];
type ConversationContext = {
  messages: userAndAiMessageProps[];
  summary?: string;
  title?: string;
  lastUpdated: string;
};
type WebConversationRow = {
  id: string;
  user_id: string;
  message_count: number | null;
  summary: string | null;
  title: string | null;
  is_active: boolean | null;
  created_at: string;
  updated_at: string;
  last_message_at: string | null;
};
const calculateContextLength = (messages: userAndAiMessageProps[]): number =&gt;
const mapRoleToDb = (role: &quot;user&quot; | &quot;assistant&quot; | &quot;system&quot;): MessageRole =&gt;
const getConversationMessages = async (conversationId: string): Promise&lt;userAndAiMessageProps[]&gt; =&gt;
export const getWebTodayConversationState = async (userId: string): Promise&lt;WebConversationRow | null&gt; =&gt;
export const createWebConversationState = async (
  userId: string,
  initialMessage?: userAndAiMessageProps
): Promise&lt;
export const updateWebConversationState = async (
  conversationId: string,
  context: ConversationContext,
  messageCount: number
): Promise&lt;boolean&gt; =&gt;
export const updateWebConversationTitle = async (conversationId: string, title: string): Promise&lt;boolean&gt; =&gt;
export const storeWebSummary = async (
  conversationId: string,
  _userId: string,
  summaryText: string,
  _messageCount: number,
  _firstSequence: number,
  _lastSequence: number
): Promise&lt;boolean&gt; =&gt;
export const markWebAsSummarized = async (conversationId: string, summary: string): Promise&lt;boolean&gt; =&gt;
export const getOrCreateWebTodayContext = async (
  userId: string
): Promise&lt;
/**
 * @description Adds a new message to the user&apos;s conversation and handles automatic summarization.
 * Persists the message to the database and triggers summarization if the context
 * length exceeds the maximum threshold, keeping only the most recent messages.
 * @param {string} userId - The unique identifier of the user
 * @param {userAndAiMessageProps} message - The message to add (user or assistant)
 * @param {(messages: userAndAiMessageProps[]) =&gt; Promise&lt;string&gt;} summarizeFn - Function to generate summaries from messages
 * @returns {Promise&lt;ConversationContext&gt;} The updated conversation context with the new message
 * @example
 * const context = await addWebMessageToContext(
 *   &quot;user-123&quot;,
 *   { role: &quot;assistant&quot;, content: &quot;Here are your meetings...&quot; },
 *   async (msgs) =&gt; generateSummary(msgs)
 * );
 */
export const addWebMessageToContext = async (
  userId: string,
  message: userAndAiMessageProps,
  summarizeFn: (messages: userAndAiMessageProps[]) =&gt; Promise&lt;string&gt;
): Promise&lt;ConversationContext&gt; =&gt;
export const buildWebContextPrompt = (context: ConversationContext): string =&gt;
export const getWebConversationContext = async (userId: string): Promise&lt;ConversationContext&gt; =&gt;
export type ConversationListItem = {
  id: string;
  title: string;
  messageCount: number;
  lastUpdated: string;
  createdAt: string;
};
export type FullConversation = {
  id: string;
  userId: string;
  messages: userAndAiMessageProps[];
  summary?: string;
  messageCount: number;
  lastUpdated: string;
  createdAt: string;
};
const getConversationTitle = (conversation: WebConversationRow, messages: userAndAiMessageProps[]): string =&gt;
export const getWebConversationList = async (
  userId: string,
  options?: { limit?: number; offset?: number; search?: string }
): Promise&lt;ConversationListItem[]&gt; =&gt;
/**
 * @description Retrieves a complete conversation by its ID.
 * Fetches all conversation metadata and messages for display or continuation.
 * Validates that the conversation belongs to the specified user.
 * @param {string} conversationId - The unique identifier of the conversation
 * @param {string} userId - The unique identifier of the user (for authorization)
 * @returns {Promise&lt;FullConversation | null&gt;} The complete conversation with all messages, or null if not found
 * @example
 * const conversation = await getWebConversationById(&quot;conv-123&quot;, &quot;user-456&quot;);
 * if (conversation) {
 *   console.log(`Found ${conversation.messages.length} messages`);
 * }
 */
export const getWebConversationById = async (
  conversationId: string,
  userId: string
): Promise&lt;FullConversation | null&gt; =&gt;
export const loadWebConversationIntoContext = async (
  conversationId: string,
  userId: string
): Promise&lt;
export const deleteWebConversation = async (conversationId: string, userId: string): Promise&lt;boolean&gt; =&gt;</file><file path="be/utils/web-embeddings.ts">import { logger } from &quot;./logger&quot;;
type WebEmbeddingMetadata = {
  role: &quot;user&quot; | &quot;assistant&quot;;
  userId: string;
  timestamp: string;
  source: &quot;web&quot;;
};
type SimilarConversation = {
  content: string;
  id: number;
  metadata: WebEmbeddingMetadata | null;
  similarity: number;
};
export const generateEmbedding = async (_text: string): Promise&lt;number[]&gt; =&gt;
export const storeWebConversationEmbedding = async (
  _userId: string,
  _content: string,
  _role: &quot;user&quot; | &quot;assistant&quot;,
  _messageId?: number
): Promise&lt;boolean&gt; =&gt;
export const searchWebSimilarConversations = async (
  _userId: string,
  _query: string,
  _options?: {
    threshold?: number;
    limit?: number;
  }
): Promise&lt;SimilarConversation[]&gt; =&gt;
export const buildWebSemanticContext = (conversations: SimilarConversation[]): string =&gt;
export const storeWebEmbeddingAsync = (
  _userId: string,
  _content: string,
  _role: &quot;user&quot; | &quot;assistant&quot;,
  _messageId?: number
): void =&gt;
export const getWebRelevantContext = async (
  _userId: string,
  _query: string,
  _options?: {
    threshold?: number;
    limit?: number;
  }
): Promise&lt;string&gt; =&gt;
/**
 * @description Deletes all embedding vectors for a specific user.
 * Currently stubbed as the embedding functionality is disabled.
 * When re-enabled, this would remove all stored embeddings for data cleanup or GDPR compliance.
 * @param {string} _userId - The unique identifier of the user whose embeddings to delete (currently unused)
 * @returns {Promise&lt;{ success: boolean; deletedCount: number }&gt;} Success status and count of deleted embeddings (always 0 when stubbed)
 * @example
 * const result = await deleteAllWebEmbeddings(&quot;user-123&quot;);
 *
 */
export const deleteAllWebEmbeddings = async (
  _userId: string
): Promise&lt;</file><file path="be/whatsapp-bot/handlers/message-handler.ts">import { InputGuardrailTripwireTriggered } from &quot;@openai/agents&quot;
import { ORCHESTRATOR_AGENT } from &quot;@/ai-agents&quot;
import { activateAgent } from &quot;@/utils/ai&quot;
import { logger } from &quot;@/utils/logger&quot;
import { transcribeAudio } from &quot;@/utils/ai/voice-transcription&quot;
import { generateSpeechForTelegram } from &quot;@/utils/ai/text-to-speech&quot;
import { sendTextMessage, sendAudioMessage, markAsRead } from &quot;../services/send-message&quot;
import { downloadVoiceMessage } from &quot;../services/media&quot;
import { uploadMedia } from &quot;../services/media&quot;
import { htmlToWhatsApp, formatErrorForWhatsApp } from &quot;../utils/format-response&quot;
import { whatsAppConversation, getUserIdFromWhatsApp } from &quot;../utils/conversation-history&quot;
import { buildAgentPromptWithContext, summarizeMessages } from &quot;../utils/prompts&quot;
import { storeEmbeddingAsync, getRelevantContext } from &quot;../utils/embeddings&quot;
import { getAllyBrainForWhatsApp, getVoicePreferenceForWhatsApp } from &quot;../utils/ally-brain&quot;
import { getSelectedAgentProfileForWhatsApp } from &quot;../utils/agent-profile&quot;
import { unifiedContextStore } from &quot;@/shared/context&quot;
import { createTextAgent, runTextAgent } from &quot;@/shared/orchestrator/text-agent-factory&quot;
import { getAgentProfile } from &quot;@/shared/orchestrator/agent-profiles&quot;
import type { ProcessedMessage, WhatsAppIncomingMessage, WhatsAppContact } from &quot;../types&quot;
‚ãÆ----
const cleanupProcessedMessages = (): void =&gt;
const isDuplicateMessage = (messageId: string): boolean =&gt;
export const processIncomingMessage = (
  message: WhatsAppIncomingMessage,
  contact?: WhatsAppContact
): ProcessedMessage =&gt;
export const handleTextMessage = async (
  processed: ProcessedMessage,
  respondWithVoice = false
): Promise&lt;void&gt; =&gt;
‚ãÆ----
// Store assistant response
‚ãÆ----
formattedResponse.replace(/[*_~`]/g, &quot;&quot;), // Remove formatting for TTS
‚ãÆ----
// Upload audio to WhatsApp
‚ãÆ----
// Fall back to text response
‚ãÆ----
/**
 * Handles a voice message from a user
 */
export const handleVoiceMessage = async (processed: ProcessedMessage): Promise&lt;void&gt; =&gt;
‚ãÆ----
// Mark message as read
‚ãÆ----
// Download voice message
‚ãÆ----
// Transcribe audio
‚ãÆ----
// Process the transcribed text as a regular message, but respond with voice
‚ãÆ----
true // Respond with voice
‚ãÆ----
/**
 * Handles an interactive button reply
 */
export const handleButtonReply = async (processed: ProcessedMessage): Promise&lt;void&gt; =&gt;
‚ãÆ----
// TODO: Implement button reply handling for confirmations, etc.
‚ãÆ----
/**
 * Main message handler that routes messages to appropriate handlers
 */
export const handleIncomingMessage = async (
  message: WhatsAppIncomingMessage,
  contact?: WhatsAppContact
): Promise&lt;void&gt; =&gt;
‚ãÆ----
// Check for duplicate messages
‚ãÆ----
// For now, acknowledge but don&apos;t process media files</file><file path="be/whatsapp-bot/services/media.ts">import { env } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import type { WhatsAppMediaUrlResponse, WhatsAppMediaUploadResponse } from &quot;../types&quot;
type MediaDownloadResult = {
  success: boolean
  buffer?: Buffer
  mimeType?: string
  error?: string
}
type MediaUploadResult = {
  success: boolean
  mediaId?: string
  error?: string
}
export const getMediaUrl = async (
  mediaId: string
): Promise&lt;
export const downloadMedia = async (mediaId: string): Promise&lt;MediaDownloadResult&gt; =&gt;
export const downloadVoiceMessage = async (
  mediaId: string
): Promise&lt;
export const uploadMedia = async (
  buffer: Buffer,
  mimeType: string,
  filename?: string
): Promise&lt;MediaUploadResult&gt; =&gt;
export const deleteMedia = async (mediaId: string): Promise&lt;boolean&gt; =&gt;</file><file path="be/whatsapp-bot/services/send-message.ts">import { env } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import type {
  WhatsAppOutgoingMessage,
  WhatsAppSendMessageResponse,
  WhatsAppAPIError,
  WhatsAppOutgoingInteractive,
  SendMessageOptions,
  SendMediaOptions,
} from &quot;../types&quot;
‚ãÆ----
type SendResult = {
  success: boolean
  messageId?: string
  error?: string
}
const sendMessage = async (
  message: WhatsAppOutgoingMessage
): Promise&lt;SendResult&gt; =&gt;
export const sendTextMessage = async (
  to: string,
  text: string,
  options: SendMessageOptions = {}
): Promise&lt;SendResult&gt; =&gt;
export const sendAudioMessage = async (
  to: string,
  audioId: string,
  options: SendMessageOptions = {}
): Promise&lt;SendResult&gt; =&gt;
export const sendAudioFromUrl = async (
  to: string,
  audioUrl: string,
  options: SendMessageOptions = {}
): Promise&lt;SendResult&gt; =&gt;
export const sendImageMessage = async (
  to: string,
  imageIdOrUrl: string,
  options: SendMediaOptions = {}
): Promise&lt;SendResult&gt; =&gt;
export const sendDocumentMessage = async (
  to: string,
  documentIdOrUrl: string,
  options: SendMediaOptions = {}
): Promise&lt;SendResult&gt; =&gt;
export const sendButtonMessage = async (
  to: string,
  bodyText: string,
  buttons: Array&lt;{ id: string; title: string }&gt;,
  options: SendMessageOptions &amp; { headerText?: string; footerText?: string } = {}
): Promise&lt;SendResult&gt; =&gt;
export const sendListMessage = async (
  to: string,
  bodyText: string,
  buttonText: string,
  sections: Array&lt;{
    title?: string
    rows: Array&lt;{ id: string; title: string; description?: string }&gt;
  }&gt;,
  options: SendMessageOptions &amp; { headerText?: string; footerText?: string } = {}
): Promise&lt;SendResult&gt; =&gt;
export const sendReaction = async (
  to: string,
  messageId: string,
  emoji: string
): Promise&lt;SendResult&gt; =&gt;
export const markAsRead = async (messageId: string): Promise&lt;boolean&gt; =&gt;
export const sendTypingIndicator = async (messageId: string): Promise&lt;void&gt; =&gt;</file><file path="be/whatsapp-bot/services/webhook-security.ts">import crypto from &quot;node:crypto&quot;
import type { Request, Response, NextFunction } from &quot;express&quot;
import { env } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
‚ãÆ----
export const verifyWebhookSignature = (
  payload: string | Buffer,
  signature: string,
  appSecret: string
): boolean =&gt;
export const webhookSignatureMiddleware = (
  req: Request,
  res: Response,
  next: NextFunction
): void =&gt;
export const verifyWebhookSubscription = (
  mode: string | undefined,
  token: string | undefined,
  challenge: string | undefined
):</file><file path="be/whatsapp-bot/types/index.ts">export type WhatsAppWebhookPayload = {
  object: &quot;whatsapp_business_account&quot;
  entry: WhatsAppWebhookEntry[]
}
export type WhatsAppWebhookEntry = {
  id: string
  changes: WhatsAppWebhookChange[]
}
export type WhatsAppWebhookChange = {
  value: WhatsAppWebhookValue
  field: &quot;messages&quot;
}
export type WhatsAppWebhookValue = {
  messaging_product: &quot;whatsapp&quot;
  metadata: WhatsAppMetadata
  contacts?: WhatsAppContact[]
  messages?: WhatsAppIncomingMessage[]
  statuses?: WhatsAppMessageStatus[]
  errors?: WhatsAppError[]
}
export type WhatsAppMetadata = {
  display_phone_number: string
  phone_number_id: string
}
export type WhatsAppContact = {
  profile: {
    name: string
  }
  wa_id: string
}
export type WhatsAppIncomingMessage = {
  from: string
  id: string
  timestamp: string
  type: WhatsAppMessageType
  text?: WhatsAppTextContent
  image?: WhatsAppMediaContent
  audio?: WhatsAppMediaContent
  video?: WhatsAppMediaContent
  document?: WhatsAppMediaContent
  sticker?: WhatsAppMediaContent
  location?: WhatsAppLocationContent
  contacts?: WhatsAppContactContent[]
  interactive?: WhatsAppInteractiveContent
  button?: WhatsAppButtonContent
  context?: WhatsAppMessageContext
  errors?: WhatsAppError[]
}
export type WhatsAppMessageType =
  | &quot;text&quot;
  | &quot;image&quot;
  | &quot;audio&quot;
  | &quot;video&quot;
  | &quot;document&quot;
  | &quot;sticker&quot;
  | &quot;location&quot;
  | &quot;contacts&quot;
  | &quot;interactive&quot;
  | &quot;button&quot;
  | &quot;reaction&quot;
  | &quot;order&quot;
  | &quot;system&quot;
  | &quot;unknown&quot;
export type WhatsAppTextContent = {
  body: string
}
export type WhatsAppMediaContent = {
  id: string
  mime_type: string
  sha256?: string
  caption?: string
  filename?: string
  voice?: boolean
}
export type WhatsAppLocationContent = {
  latitude: number
  longitude: number
  name?: string
  address?: string
}
export type WhatsAppContactContent = {
  name: {
    formatted_name: string
    first_name?: string
    last_name?: string
  }
  phones?: Array&lt;{
    phone: string
    type?: string
    wa_id?: string
  }&gt;
}
export type WhatsAppInteractiveContent = {
  type: &quot;button_reply&quot; | &quot;list_reply&quot;
  button_reply?: {
    id: string
    title: string
  }
  list_reply?: {
    id: string
    title: string
    description?: string
  }
}
export type WhatsAppButtonContent = {
  text: string
  payload: string
}
export type WhatsAppMessageContext = {
  from: string
  id: string
}
export type WhatsAppMessageStatus = {
  id: string
  status: &quot;sent&quot; | &quot;delivered&quot; | &quot;read&quot; | &quot;failed&quot;
  timestamp: string
  recipient_id: string
  conversation?: {
    id: string
    origin: {
      type: &quot;user_initiated&quot; | &quot;business_initiated&quot; | &quot;referral_conversion&quot;
    }
    expiration_timestamp?: string
  }
  pricing?: {
    billable: boolean
    pricing_model: string
    category: string
  }
  errors?: WhatsAppError[]
}
export type WhatsAppOutgoingMessage = {
  messaging_product: &quot;whatsapp&quot;
  recipient_type: &quot;individual&quot;
  to: string
  type: &quot;text&quot; | &quot;image&quot; | &quot;audio&quot; | &quot;video&quot; | &quot;document&quot; | &quot;sticker&quot; | &quot;location&quot; | &quot;contacts&quot; | &quot;interactive&quot; | &quot;template&quot; | &quot;reaction&quot;
  text?: WhatsAppOutgoingText
  image?: WhatsAppOutgoingMedia
  audio?: WhatsAppOutgoingMedia
  video?: WhatsAppOutgoingMedia
  document?: WhatsAppOutgoingDocument
  sticker?: WhatsAppOutgoingMedia
  location?: WhatsAppOutgoingLocation
  contacts?: WhatsAppOutgoingContact[]
  interactive?: WhatsAppOutgoingInteractive
  template?: WhatsAppOutgoingTemplate
  reaction?: WhatsAppOutgoingReaction
  context?: {
    message_id: string
  }
}
export type WhatsAppOutgoingText = {
  body: string
  preview_url?: boolean
}
export type WhatsAppOutgoingMedia = {
  id?: string
  link?: string
  caption?: string
}
export type WhatsAppOutgoingDocument = WhatsAppOutgoingMedia &amp; {
  filename?: string
}
export type WhatsAppOutgoingLocation = {
  latitude: number
  longitude: number
  name?: string
  address?: string
}
export type WhatsAppOutgoingContact = {
  name: {
    formatted_name: string
    first_name?: string
    last_name?: string
  }
  phones?: Array&lt;{
    phone: string
    type?: &quot;HOME&quot; | &quot;WORK&quot; | &quot;CELL&quot; | &quot;MAIN&quot; | &quot;IPHONE&quot;
    wa_id?: string
  }&gt;
}
export type WhatsAppOutgoingInteractive = {
  type: &quot;button&quot; | &quot;list&quot; | &quot;product&quot; | &quot;product_list&quot;
  header?: {
    type: &quot;text&quot; | &quot;image&quot; | &quot;video&quot; | &quot;document&quot;
    text?: string
    image?: WhatsAppOutgoingMedia
    video?: WhatsAppOutgoingMedia
    document?: WhatsAppOutgoingDocument
  }
  body: {
    text: string
  }
  footer?: {
    text: string
  }
  action: WhatsAppInteractiveAction
}
export type WhatsAppInteractiveAction = {
  buttons?: Array&lt;{
    type: &quot;reply&quot;
    reply: {
      id: string
      title: string
    }
  }&gt;
  button?: string
  sections?: Array&lt;{
    title?: string
    rows: Array&lt;{
      id: string
      title: string
      description?: string
    }&gt;
  }&gt;
}
export type WhatsAppOutgoingTemplate = {
  name: string
  language: {
    code: string
  }
  components?: WhatsAppTemplateComponent[]
}
export type WhatsAppTemplateComponent = {
  type: &quot;header&quot; | &quot;body&quot; | &quot;button&quot;
  parameters?: Array&lt;{
    type: &quot;text&quot; | &quot;currency&quot; | &quot;date_time&quot; | &quot;image&quot; | &quot;document&quot; | &quot;video&quot;
    text?: string
    currency?: {
      fallback_value: string
      code: string
      amount_1000: number
    }
    date_time?: {
      fallback_value: string
    }
    image?: WhatsAppOutgoingMedia
    document?: WhatsAppOutgoingDocument
    video?: WhatsAppOutgoingMedia
  }&gt;
  sub_type?: &quot;quick_reply&quot; | &quot;url&quot;
  index?: number
}
export type WhatsAppOutgoingReaction = {
  message_id: string
  emoji: string
}
export type WhatsAppSendMessageResponse = {
  messaging_product: &quot;whatsapp&quot;
  contacts: Array&lt;{
    input: string
    wa_id: string
  }&gt;
  messages: Array&lt;{
    id: string
  }&gt;
}
export type WhatsAppMediaUploadResponse = {
  id: string
}
export type WhatsAppMediaUrlResponse = {
  url: string
  mime_type: string
  sha256: string
  file_size: number
  id: string
  messaging_product: &quot;whatsapp&quot;
}
export type WhatsAppError = {
  code: number
  title: string
  message?: string
  error_data?: {
    details: string
  }
  href?: string
}
export type WhatsAppAPIError = {
  error: {
    message: string
    type: string
    code: number
    error_subcode?: number
    fbtrace_id: string
  }
}
export type WhatsAppSession = {
  phoneNumber: string
  userId?: string
  isLinked: boolean
  language: string
  isProcessing: boolean
  pendingConfirmation?: {
    eventData: unknown
    conflictingEvents: unknown[]
  }
  lastActivity: Date
}
export type ProcessedMessage = {
  from: string
  messageId: string
  timestamp: Date
  type: WhatsAppMessageType
  text?: string
  mediaId?: string
  mediaMimeType?: string
  contactName?: string
  isVoice?: boolean
  replyToMessageId?: string
}
export type SendMessageOptions = {
  replyToMessageId?: string
  previewUrl?: boolean
}
export type SendMediaOptions = SendMessageOptions &amp; {
  caption?: string
  filename?: string
}</file><file path="be/whatsapp-bot/utils/agent-profile.ts">import { logger } from &quot;@/utils/logger&quot;
import { getUserIdFromWhatsApp } from &quot;./conversation-history&quot;
import { DEFAULT_AGENT_PROFILE_ID } from &quot;@/shared/orchestrator/agent-profiles&quot;
import {
  getPreference,
  updatePreference,
  type AgentProfilePreference,
} from &quot;@/services/user-preferences-service&quot;
export const getSelectedAgentProfileForWhatsApp = async (
  phoneNumber: string
): Promise&lt;string&gt; =&gt;
export const updateSelectedAgentProfileForWhatsApp = async (
  phoneNumber: string,
  profileId: string
): Promise&lt;boolean&gt; =&gt;</file><file path="be/whatsapp-bot/utils/ally-brain.ts">import { logger } from &quot;@/utils/logger&quot;
import { getUserIdFromWhatsApp } from &quot;./conversation-history&quot;
import {
  getPreference,
  updatePreference,
  type AllyBrainPreference,
  type VoicePreference,
  PREFERENCE_DEFAULTS,
} from &quot;@/services/user-preferences-service&quot;
‚ãÆ----
export const getAllyBrainForWhatsApp = async (
  phoneNumber: string
): Promise&lt;AllyBrainPreference | null&gt; =&gt;
export const updateAllyBrainForWhatsApp = async (
  phoneNumber: string,
  value: AllyBrainPreference
): Promise&lt;boolean&gt; =&gt;
export const getVoicePreferenceForWhatsApp = async (
  phoneNumber: string
): Promise&lt;VoicePreference&gt; =&gt;
export const updateVoicePreferenceForWhatsApp = async (
  phoneNumber: string,
  value: VoicePreference
): Promise&lt;boolean&gt; =&gt;</file><file path="be/whatsapp-bot/utils/conversation-history.ts">import type { Database } from &quot;@/database.types&quot;
import { SUPABASE } from &quot;@/config/clients/supabase&quot;
import { logger } from &quot;@/utils/logger&quot;
import type { userAndAiMessageProps } from &quot;@/types&quot;
import { isToday } from &quot;@/utils/date/date-helpers&quot;
‚ãÆ----
type MessageRole = Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;]
type ConversationContext = {
  messages: userAndAiMessageProps[]
  summary?: string
  lastUpdated: string
}
type ConversationRow = {
  id: string
  user_id: string
  external_chat_id: number | null
  message_count: number | null
  summary: string | null
  is_active: boolean | null
  created_at: string
  updated_at: string
  last_message_at: string | null
}
type WhatsAppUserRow = Database[&quot;public&quot;][&quot;Tables&quot;][&quot;whatsapp_users&quot;][&quot;Row&quot;]
const calculateContextLength = (messages: userAndAiMessageProps[]): number =&gt;
const mapRoleToDb = (role: &quot;user&quot; | &quot;assistant&quot; | &quot;system&quot;): MessageRole =&gt;
const condenseSummary = async (
  existingSummary: string,
  newSummary: string,
  summarizeFn: (messages: userAndAiMessageProps[]) =&gt; Promise&lt;string&gt;
): Promise&lt;string&gt; =&gt;
export const getUserIdFromWhatsApp = async (phoneNumber: string): Promise&lt;string | null&gt; =&gt;
export const getOrCreateWhatsAppUser = async (
  phoneNumber: string,
  displayName?: string
): Promise&lt;WhatsAppUserRow | null&gt; =&gt;
const phoneToNumericId = (phone: string): number =&gt;
‚ãÆ----
// Use last 15 digits to avoid overflow (JavaScript safe integer limit)
‚ãÆ----
/**
 * Gets today&apos;s conversation for a WhatsApp user
 */
export const getTodayConversationState = async (
  phoneNumber: string
): Promise&lt;ConversationRow | null&gt; =&gt;
const getConversationMessages = async (
  conversationId: string
): Promise&lt;userAndAiMessageProps[]&gt; =&gt;
export const createConversationState = async (
  phoneNumber: string,
  displayName?: string,
  initialMessage?: userAndAiMessageProps
): Promise&lt;
export const updateConversationState = async (
  conversationId: string,
  context: ConversationContext,
  messageCount: number
): Promise&lt;boolean&gt; =&gt;
export const storeSummary = async (
  conversationId: string,
  _userId: string,
  summaryText: string,
  _messageCount: number,
  _firstSequence: number,
  _lastSequence: number
): Promise&lt;boolean&gt; =&gt;
export const markAsSummarized = async (
  conversationId: string,
  summary: string
): Promise&lt;boolean&gt; =&gt;
export const getOrCreateTodayContext = async (
  phoneNumber: string,
  displayName?: string
): Promise&lt;
/**
 * Adds a message to the conversation context
 */
export const addMessageToContext = async (
  phoneNumber: string,
  displayName: string | undefined,
  message: userAndAiMessageProps,
  summarizeFn: (messages: userAndAiMessageProps[]) =&gt; Promise&lt;string&gt;
): Promise&lt;ConversationContext&gt; =&gt;
‚ãÆ----
export const buildContextPrompt = (context: ConversationContext): string =&gt;
export const getConversationContext = async (
  phoneNumber: string,
  displayName?: string
): Promise&lt;ConversationContext&gt; =&gt;</file><file path="be/whatsapp-bot/utils/embeddings.ts">import { logger } from &quot;@/utils/logger&quot;
type EmbeddingMetadata = {
  role: &quot;user&quot; | &quot;assistant&quot;
  phoneNumber: string
  timestamp: string
}
type SimilarConversation = {
  content: string
  id: string
  metadata: EmbeddingMetadata | null
  similarity: number
}
export const generateEmbedding = async (_text: string): Promise&lt;number[]&gt; =&gt;
export const storeConversationEmbedding = async (
  _phoneNumber: string,
  _content: string,
  _role: &quot;user&quot; | &quot;assistant&quot;,
  _messageId?: string,
  _conversationId?: string
): Promise&lt;boolean&gt; =&gt;
export const searchSimilarConversations = async (
  _phoneNumber: string,
  _query: string,
  _options?: {
    threshold?: number
    limit?: number
  }
): Promise&lt;SimilarConversation[]&gt; =&gt;
export const buildSemanticContext = (conversations: SimilarConversation[]): string =&gt;
/**
 * Stores embedding in background (non-blocking) - stubbed
 */
export const storeEmbeddingAsync = (
  _phoneNumber: string,
  _content: string,
  _role: &quot;user&quot; | &quot;assistant&quot;,
  _messageId?: string,
  _conversationId?: string
): void =&gt;
export const getRelevantContext = async (
  _phoneNumber: string,
  _query: string,
  _options?: {
    threshold?: number
    limit?: number
  }
): Promise&lt;string&gt; =&gt;</file><file path="be/whatsapp-bot/utils/format-response.ts">export const htmlToWhatsApp = (html: string): string =&gt;
‚ãÆ----
// Decode HTML entities
‚ãÆ----
// Clean up excessive newlines
‚ãÆ----
const decodeHtmlEntities = (text: string): string =&gt;
export const escapeWhatsApp = (text: string): string =&gt;
/**
 * Formats a calendar event for WhatsApp display
 */
export const formatEventForWhatsApp = (event: {
  title: string
  startTime: string
  endTime?: string
  location?: string
  description?: string
}): string =&gt;
export const formatEventsListForWhatsApp = (
  events: Array&lt;{
    title: string
    time: string
    duration?: string
  }&gt;,
  header?: string
): string =&gt;
export const formatErrorForWhatsApp = (message: string): string =&gt;
export const formatSuccessForWhatsApp = (message: string): string =&gt;
export const truncateForWhatsApp = (text: string, maxLength = 4096): string =&gt;</file><file path="be/whatsapp-bot/utils/index.ts"></file><file path="be/whatsapp-bot/utils/prompts.ts">import { MODELS } from &quot;@/config/constants/ai&quot;
import OpenAI from &quot;openai&quot;
import { env } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
import type { userAndAiMessageProps } from &quot;@/types&quot;
import type { AllyBrainPreference } from &quot;./ally-brain&quot;
‚ãÆ----
const truncateContext = (context: string, maxLength: number): string =&gt;
type BuildPromptOptions = {
  allyBrain?: AllyBrainPreference | null
  languageCode?: string
  personalityNotes?: string
}
export const buildAgentPromptWithContext = (
  email: string | undefined,
  message: string,
  conversationContext?: string,
  options?: BuildPromptOptions
): string =&gt;
export const buildConfirmationPrompt = (
  displayName: string,
  email: string | undefined,
  eventData: unknown
): string =&gt;
‚ãÆ----
const formatMessagesForSummary = (messages: userAndAiMessageProps[]): string =&gt;
export const summarizeMessages = async (messages: userAndAiMessageProps[]): Promise&lt;string&gt; =&gt;
const createFallbackSummary = (messages: userAndAiMessageProps[]): string =&gt;
‚ãÆ----
export const generateConversationTitle = async (firstUserMessage: string): Promise&lt;string&gt; =&gt;</file><file path="be/whatsapp-bot/init-whatsapp.ts">import { env } from &quot;@/config&quot;
import { logger } from &quot;@/utils/logger&quot;
export const isWhatsAppConfigured = (): boolean =&gt;
export const initWhatsApp = (): void =&gt;
export const getWhatsAppStatus = ():</file><file path="be/.biomeignore">coverage/
coverage/lcov-report/
dist/
build/
node_modules/</file><file path="be/.dockerignore"># Node.js dependencies
node_modules
.pnpm-store
**/npm-debug.log
**/yarn-error.log
**/pnpm-debug.log

# Build outputs (we rebuild in Docker)
dist
build
coverage
.nyc_output

# Local environment &amp; config files
.env
.env.*
!.env.example
.DS_Store
Thumbs.db

# Logs &amp; temp files
logs
**/*.log
**/*.gz
**/*.tgz
**/.tmp
**/.cache

# Testing
*.test.ts
*.spec.ts
__tests__
jest.config.*

# Git &amp; Editor files
.git
.gitignore
.idea
.vscode
*.swp
*.swo

# TypeScript build info
*.tsbuildinfo

# Misc
.eslintcache
biome.json

# Old dockerfile (deprecated - use Dockerfile instead)
dockerfile</file><file path="be/.env.example"># Required secrets
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
OPEN_API_KEY=sk-your-openai-api-key
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Optional: Telegram Bot (for Ally Telegram integration)
# TELEGRAM_BOT_ACCESS_TOKEN=your_telegram_bot_token

# Optional: Slack Bot (for Ally Slack integration)
# SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
# SLACK_SIGNING_SECRET=your_slack_signing_secret
# SLACK_APP_TOKEN=xapp-your-slack-app-level-token</file><file path="be/.gitignore"># =============================================================================
# SECURITY &amp; CREDENTIALS
# =============================================================================
# Environment variables and secrets
.env
.env.*
!.env.example
.env.local
.env.*.local
.env.production
.env.development
.env.test

# Credentials and keys
credentials.json
*.pem
*.key
*.p12
*.pfx
*.crt
*.cer
*.der
secrets/
*.secret
*.token
service-account*.json
google-credentials.json
oauth-credentials.json

# API keys and tokens
**/api-keys.txt
**/tokens.txt
**/.secrets

# =============================================================================
# DEPENDENCIES
# =============================================================================
node_modules/
.pnp
.pnp.js
.yarn/
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz

# Python (if any)
.venv/
venv/
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
.pytest_cache/
.coverage

# =============================================================================
# BUILD &amp; DISTRIBUTION
# =============================================================================
dist/
build/
out/
.next/
*.tsbuildinfo
*.log
logs/
*.log.*

# Archives
*.zip
*.tar
*.tar.gz
*.rar
app.zip

# =============================================================================
# TESTING &amp; COVERAGE
# =============================================================================
coverage/
.nyc_output/
*.lcov
.jest/
test-results/
playwright-report/

# =============================================================================
# RUNTIME &amp; TEMPORARY FILES
# =============================================================================
*.swp
*.swo
*~
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db
desktop.ini

# =============================================================================
# EDITOR &amp; IDE
# =============================================================================
.vscode/
!.vscode/settings.json
!.vscode/tasks.json
!.vscode/launch.json
!.vscode/extensions.json
!postman/*
.idea/
*.iml
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
*.sublime-project
*.sublime-workspace

# =============================================================================
# AI &amp; DEVELOPMENT TOOLS
# =============================================================================
.mcp.json

# =============================================================================
# CONFIGURATION FILES
# =============================================================================
# Ignore all JSON files except essential ones
*.json
!nodemon.json
!package.json
!tsconfig.json
!tsconfig.*.json
!pnpm-lock.yaml
!package-lock.json
!yarn.lock
!.eslintrc.json
!biome.jsonc

# --- POSTMAN FIX: Allow JSONs inside the postman folder ---
!postman/*.json

# Supabase
supabase/.temp
supabase/.branches
supabase/.env.local

# Docker
docker-compose.override.yml

# =============================================================================
# PLATFORM SPECIFIC
# =============================================================================
# AWS
.aws/
*.aws

# Vercel
.vercel

# Serverless
.serverless/
.serverless_nextjs/

# =============================================================================
# MISC
# =============================================================================
# Compiled JavaScript (TypeScript project)
*.js
!jest.config.js
*.config.js
*.config.cjs
*.config.mjs

# Binary files
supabase.exe
*.exe
*.dll
*.dylib
*.so

# Database
*.db
*.sqlite
*.sqlite3

# Backup files
*.bak
*.backup
*.old

# Logs
logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
dev-debug.log</file><file path="be/.rules"># Project Context
Ultracite enforces strict type safety, accessibility standards, and consistent code quality for JavaScript/TypeScript projects using Biome&apos;s lightning-fast formatter and linter.

## Key Principles
- Zero configuration required
- Subsecond performance
- Maximum type safety
- AI-friendly code generation

## Before Writing Code
1. Analyze existing patterns in the codebase
2. Consider edge cases and error scenarios
3. Follow the rules below strictly
4. Validate accessibility requirements

## Rules

### Accessibility (a11y)
- Don&apos;t use `accessKey` attribute on any HTML element.
- Don&apos;t set `aria-hidden=&quot;true&quot;` on focusable elements.
- Don&apos;t add ARIA roles, states, and properties to elements that don&apos;t support them.
- Don&apos;t use distracting elements like `&lt;marquee&gt;` or `&lt;blink&gt;`.
- Only use the `scope` prop on `&lt;th&gt;` elements.
- Don&apos;t assign non-interactive ARIA roles to interactive HTML elements.
- Make sure label elements have text content and are associated with an input.
- Don&apos;t assign interactive ARIA roles to non-interactive HTML elements.
- Don&apos;t assign `tabIndex` to non-interactive HTML elements.
- Don&apos;t use positive integers for `tabIndex` property.
- Don&apos;t include &quot;image&quot;, &quot;picture&quot;, or &quot;photo&quot; in img alt prop.
- Don&apos;t use explicit role property that&apos;s the same as the implicit/default role.
- Make static elements with click handlers use a valid role attribute.
- Always include a `title` element for SVG elements.
- Give all elements requiring alt text meaningful information for screen readers.
- Make sure anchors have content that&apos;s accessible to screen readers.
- Assign `tabIndex` to non-interactive HTML elements with `aria-activedescendant`.
- Include all required ARIA attributes for elements with ARIA roles.
- Make sure ARIA properties are valid for the element&apos;s supported roles.
- Always include a `type` attribute for button elements.
- Make elements with interactive roles and handlers focusable.
- Give heading elements content that&apos;s accessible to screen readers (not hidden with `aria-hidden`).
- Always include a `lang` attribute on the html element.
- Always include a `title` attribute for iframe elements.
- Accompany `onClick` with at least one of: `onKeyUp`, `onKeyDown`, or `onKeyPress`.
- Accompany `onMouseOver`/`onMouseOut` with `onFocus`/`onBlur`.
- Include caption tracks for audio and video elements.
- Use semantic elements instead of role attributes in JSX.
- Make sure all anchors are valid and navigable.
- Ensure all ARIA properties (`aria-*`) are valid.
- Use valid, non-abstract ARIA roles for elements with ARIA roles.
- Use valid ARIA state and property values.
- Use valid values for the `autocomplete` attribute on input elements.
- Use correct ISO language/country codes for the `lang` attribute.

### Code Complexity and Quality
- Don&apos;t use consecutive spaces in regular expression literals.
- Don&apos;t use the `arguments` object.
- Don&apos;t use primitive type aliases or misleading types.
- Don&apos;t use the comma operator.
- Don&apos;t use empty type parameters in type aliases and interfaces.
- Don&apos;t write functions that exceed a given Cognitive Complexity score.
- Don&apos;t nest describe() blocks too deeply in test files.
- Don&apos;t use unnecessary boolean casts.
- Don&apos;t use unnecessary callbacks with flatMap.
- Use for...of statements instead of Array.forEach.
- Don&apos;t create classes that only have static members (like a static namespace).
- Don&apos;t use this and super in static contexts.
- Don&apos;t use unnecessary catch clauses.
- Don&apos;t use unnecessary constructors.
- Don&apos;t use unnecessary continue statements.
- Don&apos;t export empty modules that don&apos;t change anything.
- Don&apos;t use unnecessary escape sequences in regular expression literals.
- Don&apos;t use unnecessary fragments.
- Don&apos;t use unnecessary labels.
- Don&apos;t use unnecessary nested block statements.
- Don&apos;t rename imports, exports, and destructured assignments to the same name.
- Don&apos;t use unnecessary string or template literal concatenation.
- Don&apos;t use String.raw in template literals when there are no escape sequences.
- Don&apos;t use useless case statements in switch statements.
- Don&apos;t use ternary operators when simpler alternatives exist.
- Don&apos;t use useless `this` aliasing.
- Don&apos;t use any or unknown as type constraints.
- Don&apos;t initialize variables to undefined.
- Don&apos;t use the void operators (they&apos;re not familiar).
- Use arrow functions instead of function expressions.
- Use Date.now() to get milliseconds since the Unix Epoch.
- Use .flatMap() instead of map().flat() when possible.
- Use literal property access instead of computed property access.
- Don&apos;t use parseInt() or Number.parseInt() when binary, octal, or hexadecimal literals work.
- Use concise optional chaining instead of chained logical expressions.
- Use regular expression literals instead of the RegExp constructor when possible.
- Don&apos;t use number literal object member names that aren&apos;t base 10 or use underscore separators.
- Remove redundant terms from logical expressions.
- Use while loops instead of for loops when you don&apos;t need initializer and update expressions.
- Don&apos;t pass children as props.
- Don&apos;t reassign const variables.
- Don&apos;t use constant expressions in conditions.
- Don&apos;t use `Math.min` and `Math.max` to clamp values when the result is constant.
- Don&apos;t return a value from a constructor.
- Don&apos;t use empty character classes in regular expression literals.
- Don&apos;t use empty destructuring patterns.
- Don&apos;t call global object properties as functions.
- Don&apos;t declare functions and vars that are accessible outside their block.
- Make sure builtins are correctly instantiated.
- Don&apos;t use super() incorrectly inside classes. Also check that super() is called in classes that extend other constructors.
- Don&apos;t use variables and function parameters before they&apos;re declared.
- Don&apos;t use 8 and 9 escape sequences in string literals.
- Don&apos;t use literal numbers that lose precision.

### React and JSX Best Practices
- Don&apos;t use the return value of React.render.
- Make sure all dependencies are correctly specified in React hooks.
- Make sure all React hooks are called from the top level of component functions.
- Don&apos;t forget key props in iterators and collection literals.
- Don&apos;t destructure props inside JSX components in Solid projects.
- Don&apos;t define React components inside other components.
- Don&apos;t use event handlers on non-interactive elements.
- Don&apos;t assign to React component props.
- Don&apos;t use both `children` and `dangerouslySetInnerHTML` props on the same element.
- Don&apos;t use dangerous JSX props.
- Don&apos;t use Array index in keys.
- Don&apos;t insert comments as text nodes.
- Don&apos;t assign JSX properties multiple times.
- Don&apos;t add extra closing tags for components without children.
- Use `&lt;&gt;...&lt;/&gt;` instead of `&lt;Fragment&gt;...&lt;/Fragment&gt;`.
- Watch out for possible &quot;wrong&quot; semicolons inside JSX elements.

### Correctness and Safety
- Don&apos;t assign a value to itself.
- Don&apos;t return a value from a setter.
- Don&apos;t compare expressions that modify string case with non-compliant values.
- Don&apos;t use lexical declarations in switch clauses.
- Don&apos;t use variables that haven&apos;t been declared in the document.
- Don&apos;t write unreachable code.
- Make sure super() is called exactly once on every code path in a class constructor before this is accessed if the class has a superclass.
- Don&apos;t use control flow statements in finally blocks.
- Don&apos;t use optional chaining where undefined values aren&apos;t allowed.
- Don&apos;t have unused function parameters.
- Don&apos;t have unused imports.
- Don&apos;t have unused labels.
- Don&apos;t have unused private class members.
- Don&apos;t have unused variables.
- Make sure void (self-closing) elements don&apos;t have children.
- Don&apos;t return a value from a function with the return type &apos;void&apos;
- Use isNaN() when checking for NaN.
- Make sure &quot;for&quot; loop update clauses move the counter in the right direction.
- Make sure typeof expressions are compared to valid values.
- Make sure generator functions contain yield.
- Don&apos;t use await inside loops.
- Don&apos;t use bitwise operators.
- Don&apos;t use expressions where the operation doesn&apos;t change the value.
- Make sure Promise-like statements are handled appropriately.
- Don&apos;t use __dirname and __filename in the global scope.
- Prevent import cycles.
- Don&apos;t use configured elements.
- Don&apos;t hardcode sensitive data like API keys and tokens.
- Don&apos;t let variable declarations shadow variables from outer scopes.
- Don&apos;t use the TypeScript directive @ts-ignore.
- Prevent duplicate polyfills from Polyfill.io.
- Don&apos;t use useless backreferences in regular expressions that always match empty strings.
- Don&apos;t use unnecessary escapes in string literals.
- Don&apos;t use useless undefined.
- Make sure getters and setters for the same property are next to each other in class and object definitions.
- Make sure object literals are declared consistently (defaults to explicit definitions).
- Use static Response methods instead of new Response() constructor when possible.
- Make sure switch-case statements are exhaustive.
- Make sure the `preconnect` attribute is used when using Google Fonts.
- Use `Array#{indexOf,lastIndexOf}()` instead of `Array#{findIndex,findLastIndex}()` when looking for the index of an item.
- Make sure iterable callbacks return consistent values.
- Use `with { type: &quot;json&quot; }` for JSON module imports.
- Use numeric separators in numeric literals.
- Use object spread instead of `Object.assign()` when constructing new objects.
- Always use the radix argument when using `parseInt()`.
- Make sure JSDoc comment lines start with a single asterisk, except for the first one.
- Include a description parameter for `Symbol()`.
- Don&apos;t use spread (`...`) syntax on accumulators.
- Don&apos;t use the `delete` operator.
- Don&apos;t access namespace imports dynamically.
- Don&apos;t use namespace imports.
- Declare regex literals at the top level.
- Don&apos;t use `target=&quot;_blank&quot;` without `rel=&quot;noopener&quot;`.

### TypeScript Best Practices
- Don&apos;t use TypeScript enums.
- Don&apos;t export imported variables.
- Don&apos;t add type annotations to variables, parameters, and class properties that are initialized with literal expressions.
- Don&apos;t use TypeScript namespaces.
- Don&apos;t use non-null assertions with the `!` postfix operator.
- Don&apos;t use parameter properties in class constructors.
- Don&apos;t use user-defined types.
- Use `as const` instead of literal types and type annotations.
- Use either `T[]` or `Array&lt;T&gt;` consistently.
- Initialize each enum member value explicitly.
- Use `export type` for types.
- Use `import type` for types.
- Make sure all enum members are literal values.
- Don&apos;t use TypeScript const enum.
- Don&apos;t declare empty interfaces.
- Don&apos;t let variables evolve into any type through reassignments.
- Don&apos;t use the any type.
- Don&apos;t misuse the non-null assertion operator (!) in TypeScript files.
- Don&apos;t use implicit any type on variable declarations.
- Don&apos;t merge interfaces and classes unsafely.
- Don&apos;t use overload signatures that aren&apos;t next to each other.
- Use the namespace keyword instead of the module keyword to declare TypeScript namespaces.

### Style and Consistency
- Don&apos;t use global `eval()`.
- Don&apos;t use callbacks in asynchronous tests and hooks.
- Don&apos;t use negation in `if` statements that have `else` clauses.
- Don&apos;t use nested ternary expressions.
- Don&apos;t reassign function parameters.
- This rule lets you specify global variable names you don&apos;t want to use in your application.
- Don&apos;t use specified modules when loaded by import or require.
- Don&apos;t use constants whose value is the upper-case version of their name.
- Use `String.slice()` instead of `String.substr()` and `String.substring()`.
- Don&apos;t use template literals if you don&apos;t need interpolation or special-character handling.
- Don&apos;t use `else` blocks when the `if` block breaks early.
- Don&apos;t use yoda expressions.
- Don&apos;t use Array constructors.
- Use `at()` instead of integer index access.
- Follow curly brace conventions.
- Use `else if` instead of nested `if` statements in `else` clauses.
- Use single `if` statements instead of nested `if` clauses.
- Use `new` for all builtins except `String`, `Number`, and `Boolean`.
- Use consistent accessibility modifiers on class properties and methods.
- Use `const` declarations for variables that are only assigned once.
- Put default function parameters and optional function parameters last.
- Include a `default` clause in switch statements.
- Use the `**` operator instead of `Math.pow`.
- Use `for-of` loops when you need the index to extract an item from the iterated array.
- Use `node:assert/strict` over `node:assert`.
- Use the `node:` protocol for Node.js builtin modules.
- Use Number properties instead of global ones.
- Use assignment operator shorthand where possible.
- Use function types instead of object types with call signatures.
- Use template literals over string concatenation.
- Use `new` when throwing an error.
- Don&apos;t throw non-Error values.
- Use `String.trimStart()` and `String.trimEnd()` over `String.trimLeft()` and `String.trimRight()`.
- Use standard constants instead of approximated literals.
- Don&apos;t assign values in expressions.
- Don&apos;t use async functions as Promise executors.
- Don&apos;t reassign exceptions in catch clauses.
- Don&apos;t reassign class members.
- Don&apos;t compare against -0.
- Don&apos;t use labeled statements that aren&apos;t loops.
- Don&apos;t use void type outside of generic or return types.
- Don&apos;t use console.
- Don&apos;t use control characters and escape sequences that match control characters in regular expression literals.
- Don&apos;t use debugger.
- Don&apos;t assign directly to document.cookie.
- Use `===` and `!==`.
- Don&apos;t use duplicate case labels.
- Don&apos;t use duplicate class members.
- Don&apos;t use duplicate conditions in if-else-if chains.
- Don&apos;t use two keys with the same name inside objects.
- Don&apos;t use duplicate function parameter names.
- Don&apos;t have duplicate hooks in describe blocks.
- Don&apos;t use empty block statements and static blocks.
- Don&apos;t let switch clauses fall through.
- Don&apos;t reassign function declarations.
- Don&apos;t allow assignments to native objects and read-only global variables.
- Use Number.isFinite instead of global isFinite.
- Use Number.isNaN instead of global isNaN.
- Don&apos;t assign to imported bindings.
- Don&apos;t use irregular whitespace characters.
- Don&apos;t use labels that share a name with a variable.
- Don&apos;t use characters made with multiple code points in character class syntax.
- Make sure to use new and constructor properly.
- Don&apos;t use shorthand assign when the variable appears on both sides.
- Don&apos;t use octal escape sequences in string literals.
- Don&apos;t use Object.prototype builtins directly.
- Don&apos;t redeclare variables, functions, classes, and types in the same scope.
- Don&apos;t have redundant &quot;use strict&quot;.
- Don&apos;t compare things where both sides are exactly the same.
- Don&apos;t let identifiers shadow restricted names.
- Don&apos;t use sparse arrays (arrays with holes).
- Don&apos;t use template literal placeholder syntax in regular strings.
- Don&apos;t use the then property.
- Don&apos;t use unsafe negation.
- Don&apos;t use var.
- Don&apos;t use with statements in non-strict contexts.
- Make sure async functions actually use await.
- Make sure default clauses in switch statements come last.
- Make sure to pass a message value when creating a built-in error.
- Make sure get methods always return a value.
- Use a recommended display strategy with Google Fonts.
- Make sure for-in loops include an if statement.
- Use Array.isArray() instead of instanceof Array.
- Make sure to use the digits argument with Number#toFixed().
- Make sure to use the &quot;use strict&quot; directive in script files.

### Next.js Specific Rules
- Don&apos;t use `&lt;img&gt;` elements in Next.js projects.
- Don&apos;t use `&lt;head&gt;` elements in Next.js projects.
- Don&apos;t import next/document outside of pages/_document.jsx in Next.js projects.
- Don&apos;t use the next/head module in pages/_document.js on Next.js projects.

### Testing Best Practices
- Don&apos;t use export or module.exports in test files.
- Don&apos;t use focused tests.
- Make sure the assertion function, like expect, is placed inside an it() function call.
- Don&apos;t use disabled tests.

## Common Tasks
- `npx ultracite init` - Initialize Ultracite in your project
- `npx ultracite fix` - Format and fix code automatically
- `npx ultracite check` - Check for issues without fixing

## Example: Error Handling
```typescript
// ‚úÖ Good: Comprehensive error handling
try {
  const result = await fetchData();
  return { success: true, data: result };
} catch (error) {
  console.error(&apos;API call failed:&apos;, error);
  return { success: false, error: error.message };
}

// ‚ùå Bad: Swallowing errors
try {
  return await fetchData();
} catch (e) {
  console.log(e);
}
```</file><file path="be/app-runner.yaml">version: 1.0
runtime: nodejs22
build:
  commands:
    - corepack enable
    - pnpm install --frozen-lockfile
    - pnpm build
run:
  command: node dist/app.js
  network:
    port: 8080
  env:
    - name: NODE_ENV
      value: &quot;production&quot;
    - name: PORT
      value: &quot;8080&quot;
  health_check:
    protocol: HTTP
    path: /api/cron/health
    interval: 10
    timeout: 5
    healthy_threshold: 1
    unhealthy_threshold: 3</file><file path="be/app.ts">import { ROUTES, STATUS_RESPONSE, env } from &quot;@/config&quot;;
import aclRoute from &quot;@/routes/google-calendar/acl-route&quot;;
import adminRoute from &quot;@/routes/admin-route&quot;;
import { apiRateLimiter } from &quot;@/middlewares/rate-limiter&quot;;
import calendarListRoute from &quot;@/routes/google-calendar/calendar-list-route&quot;;
import calendarRoute from &quot;@/routes/google-calendar/calendar-route&quot;;
import channelsRoute from &quot;@/routes/google-calendar/channels-route&quot;;
import chatRoute from &quot;@/routes/google-calendar/chat-route&quot;;
import contactRoute from &quot;@/routes/contact-route&quot;;
import cookieParser from &quot;cookie-parser&quot;;
import cors from &quot;cors&quot;;
import cronRoute from &quot;@/routes/cron-route&quot;;
import errorHandler from &quot;@/middlewares/error-handler&quot;;
import eventsRoute from &quot;@/routes/google-calendar/events-route&quot;;
import express from &quot;express&quot;;
import helmet from &quot;helmet&quot;;
import { initWhatsApp } from &quot;@/whatsapp-bot/init-whatsapp&quot;;
import { logger } from &quot;@/utils/logger&quot;;
import morgan from &quot;morgan&quot;;
import path from &quot;node:path&quot;;
import paymentRoute from &quot;@/routes/payment-route&quot;;
import riscRoute from &quot;@/routes/risc-route&quot;;
import { securityAuditMiddleware } from &quot;@/middlewares/security-audit&quot;;
import { sendR } from &quot;@/utils/http&quot;;
import { initSlackBot } from &quot;@/slack-bot&quot;;
import slackRoute from &quot;@/routes/slack-route&quot;;
import { startTelegramBot } from &quot;@/telegram-bot/init-bot&quot;;
import telegramRoute from &quot;@/routes/telegram-route&quot;;
import usersRoute from &quot;@/routes/users-route&quot;;
import voiceRoute from &quot;@/routes/voice-route&quot;;
import webhooksRoute from &quot;@/routes/webhooks-route&quot;;
import whatsAppRoute from &quot;@/routes/whatsapp-route&quot;;</file><file path="be/apprunner.yaml">version: 1.0
runtime: nodejs18
build:
  commands:
    build:
      - npm ci
      - npm run build
run:
  command: npm start
  network:
    port: 8080
    env: PORT
  env:
    - name: NODE_ENV
      value: &quot;production&quot;</file><file path="be/biome.jsonc">{
  &quot;$schema&quot;: &quot;./node_modules/@biomejs/biome/configuration_schema.json&quot;,
  &quot;extends&quot;: [
    &quot;ultracite&quot;
  ],
  &quot;files&quot;: {
    &quot;includes&quot;: [
      &quot;**/*.ts&quot;
    ]
  },
  &quot;formatter&quot;: {
    &quot;lineWidth&quot;: 80
  },
  &quot;linter&quot;: {
    &quot;rules&quot;: {
      &quot;style&quot;: {
        &quot;noEnum&quot;: &quot;off&quot;
      },
      &quot;complexity&quot;: {
        &quot;noExcessiveLinesPerFunction&quot;: &quot;off&quot;
      },
      &quot;suspicious&quot;: {
        &quot;noConsole&quot;: {
          &quot;level&quot;: &quot;error&quot;,
          &quot;options&quot;: {
            &quot;allow&quot;: [
              &quot;error&quot;,
              &quot;log&quot;
            ]
          }
        }
      }
    }
  }
}</file><file path="be/database.types.ts">export type Json =
  | string
  | number
  | boolean
  | null
  | { [key: string]: Json | undefined }
  | Json[]
export type Database = {
  __InternalSupabase: {
    PostgrestVersion: &quot;13.0.4&quot;
  }
  public: {
    Tables: {
      conversation_messages: {
        Row: {
          completion_tokens: number | null
          content: string
          conversation_id: string
          created_at: string
          id: string
          metadata: Json | null
          prompt_tokens: number | null
          role: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;]
          sequence_number: number
          tool_call_id: string | null
          tool_calls: Json | null
        }
        Insert: {
          completion_tokens?: number | null
          content: string
          conversation_id: string
          created_at?: string
          id?: string
          metadata?: Json | null
          prompt_tokens?: number | null
          role: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;]
          sequence_number: number
          tool_call_id?: string | null
          tool_calls?: Json | null
        }
        Update: {
          completion_tokens?: number | null
          content?: string
          conversation_id?: string
          created_at?: string
          id?: string
          metadata?: Json | null
          prompt_tokens?: number | null
          role?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;]
          sequence_number?: number
          tool_call_id?: string | null
          tool_calls?: Json | null
        }
        Relationships: [
          {
            foreignKeyName: &quot;conversation_messages_conversation_id_fkey&quot;
            columns: [&quot;conversation_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;conversations&quot;
            referencedColumns: [&quot;id&quot;]
          },
        ]
      }
      conversations: {
        Row: {
          archived_at: string | null
          created_at: string
          external_chat_id: number | null
          id: string
          is_active: boolean | null
          last_message_at: string | null
          message_count: number | null
          source: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
          summary: string | null
          title: string | null
          updated_at: string
          user_id: string
        }
        Insert: {
          archived_at?: string | null
          created_at?: string
          external_chat_id?: number | null
          id?: string
          is_active?: boolean | null
          last_message_at?: string | null
          message_count?: number | null
          source: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
          summary?: string | null
          title?: string | null
          updated_at?: string
          user_id: string
        }
        Update: {
          archived_at?: string | null
          created_at?: string
          external_chat_id?: number | null
          id?: string
          is_active?: boolean | null
          last_message_at?: string | null
          message_count?: number | null
          source?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
          summary?: string | null
          title?: string | null
          updated_at?: string
          user_id?: string
        }
        Relationships: []
      }
      lemonsqueezy_webhook_events: {
        Row: {
          created_at: string | null
          error_message: string | null
          event_id: string
          event_type: string
          id: string
          payload: Json
          processed: boolean | null
          processed_at: string | null
          retry_count: number | null
        }
        Insert: {
          created_at?: string | null
          error_message?: string | null
          event_id: string
          event_type: string
          id?: string
          payload: Json
          processed?: boolean | null
          processed_at?: string | null
          retry_count?: number | null
        }
        Update: {
          created_at?: string | null
          error_message?: string | null
          event_id?: string
          event_type?: string
          id?: string
          payload?: Json
          processed?: boolean | null
          processed_at?: string | null
          retry_count?: number | null
        }
        Relationships: []
      }
      oauth_tokens: {
        Row: {
          access_token: string
          created_at: string
          expires_at: string | null
          id: string
          id_token: string | null
          is_valid: boolean | null
          last_refreshed_at: string | null
          provider: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;oauth_provider&quot;]
          provider_user_id: string | null
          refresh_error_count: number | null
          refresh_token: string | null
          refresh_token_expires_at: string | null
          scope: string | null
          token_type: string | null
          updated_at: string
          user_id: string
        }
        Insert: {
          access_token: string
          created_at?: string
          expires_at?: string | null
          id?: string
          id_token?: string | null
          is_valid?: boolean | null
          last_refreshed_at?: string | null
          provider: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;oauth_provider&quot;]
          provider_user_id?: string | null
          refresh_error_count?: number | null
          refresh_token?: string | null
          refresh_token_expires_at?: string | null
          scope?: string | null
          token_type?: string | null
          updated_at?: string
          user_id: string
        }
        Update: {
          access_token?: string
          created_at?: string
          expires_at?: string | null
          id?: string
          id_token?: string | null
          is_valid?: boolean | null
          last_refreshed_at?: string | null
          provider?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;oauth_provider&quot;]
          provider_user_id?: string | null
          refresh_error_count?: number | null
          refresh_token?: string | null
          refresh_token_expires_at?: string | null
          scope?: string | null
          token_type?: string | null
          updated_at?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: &quot;oauth_tokens_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;oauth_tokens_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;oauth_tokens_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;oauth_tokens_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      plans: {
        Row: {
          action_pack_size: number | null
          ai_interactions_monthly: number | null
          created_at: string | null
          description: string | null
          display_order: number | null
          features: Json | null
          id: string
          is_active: boolean | null
          is_highlighted: boolean | null
          is_popular: boolean | null
          lemonsqueezy_product_id: string | null
          lemonsqueezy_variant_id_monthly: string | null
          lemonsqueezy_variant_id_yearly: string | null
          name: string
          price_monthly_cents: number | null
          price_per_use_cents: number | null
          price_yearly_cents: number | null
          slug: string
          stripe_price_id_monthly: string | null
          stripe_price_id_yearly: string | null
          stripe_product_id: string | null
          updated_at: string | null
        }
        Insert: {
          action_pack_size?: number | null
          ai_interactions_monthly?: number | null
          created_at?: string | null
          description?: string | null
          display_order?: number | null
          features?: Json | null
          id?: string
          is_active?: boolean | null
          is_highlighted?: boolean | null
          is_popular?: boolean | null
          lemonsqueezy_product_id?: string | null
          lemonsqueezy_variant_id_monthly?: string | null
          lemonsqueezy_variant_id_yearly?: string | null
          name: string
          price_monthly_cents?: number | null
          price_per_use_cents?: number | null
          price_yearly_cents?: number | null
          slug: string
          stripe_price_id_monthly?: string | null
          stripe_price_id_yearly?: string | null
          stripe_product_id?: string | null
          updated_at?: string | null
        }
        Update: {
          action_pack_size?: number | null
          ai_interactions_monthly?: number | null
          created_at?: string | null
          description?: string | null
          display_order?: number | null
          features?: Json | null
          id?: string
          is_active?: boolean | null
          is_highlighted?: boolean | null
          is_popular?: boolean | null
          lemonsqueezy_product_id?: string | null
          lemonsqueezy_variant_id_monthly?: string | null
          lemonsqueezy_variant_id_yearly?: string | null
          name?: string
          price_monthly_cents?: number | null
          price_per_use_cents?: number | null
          price_yearly_cents?: number | null
          slug?: string
          stripe_price_id_monthly?: string | null
          stripe_price_id_yearly?: string | null
          stripe_product_id?: string | null
          updated_at?: string | null
        }
        Relationships: []
      }
      slack_users: {
        Row: {
          created_at: string | null
          first_name: string | null
          id: string
          is_linked: boolean | null
          last_activity_at: string | null
          pending_email: string | null
          slack_team_id: string
          slack_user_id: string
          slack_username: string | null
          updated_at: string | null
          user_id: string | null
        }
        Insert: {
          created_at?: string | null
          first_name?: string | null
          id?: string
          is_linked?: boolean | null
          last_activity_at?: string | null
          pending_email?: string | null
          slack_team_id: string
          slack_user_id: string
          slack_username?: string | null
          updated_at?: string | null
          user_id?: string | null
        }
        Update: {
          created_at?: string | null
          first_name?: string | null
          id?: string
          is_linked?: boolean | null
          last_activity_at?: string | null
          pending_email?: string | null
          slack_team_id?: string
          slack_user_id?: string
          slack_username?: string | null
          updated_at?: string | null
          user_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: &quot;slack_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;slack_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;slack_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;slack_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      slack_workspaces: {
        Row: {
          app_id: string | null
          authed_user_id: string | null
          bot_token: string
          bot_user_id: string | null
          created_at: string | null
          enterprise_id: string | null
          enterprise_name: string | null
          id: string
          installed_at: string | null
          installed_by_user_id: string | null
          is_active: boolean | null
          is_enterprise_install: boolean | null
          scope: string | null
          team_id: string
          team_name: string | null
          updated_at: string | null
          webhook_channel: string | null
          webhook_channel_id: string | null
          webhook_configuration_url: string | null
          webhook_url: string | null
        }
        Insert: {
          app_id?: string | null
          authed_user_id?: string | null
          bot_token: string
          bot_user_id?: string | null
          created_at?: string | null
          enterprise_id?: string | null
          enterprise_name?: string | null
          id?: string
          installed_at?: string | null
          installed_by_user_id?: string | null
          is_active?: boolean | null
          is_enterprise_install?: boolean | null
          scope?: string | null
          team_id: string
          team_name?: string | null
          updated_at?: string | null
          webhook_channel?: string | null
          webhook_channel_id?: string | null
          webhook_configuration_url?: string | null
          webhook_url?: string | null
        }
        Update: {
          app_id?: string | null
          authed_user_id?: string | null
          bot_token?: string
          bot_user_id?: string | null
          created_at?: string | null
          enterprise_id?: string | null
          enterprise_name?: string | null
          id?: string
          installed_at?: string | null
          installed_by_user_id?: string | null
          is_active?: boolean | null
          is_enterprise_install?: boolean | null
          scope?: string | null
          team_id?: string
          team_name?: string | null
          updated_at?: string | null
          webhook_channel?: string | null
          webhook_channel_id?: string | null
          webhook_configuration_url?: string | null
          webhook_url?: string | null
        }
        Relationships: []
      }
      subscriptions: {
        Row: {
          ai_interactions_used: number | null
          cancel_at_period_end: boolean | null
          canceled_at: string | null
          cancellation_reason: string | null
          created_at: string | null
          credits_remaining: number | null
          current_period_end: string | null
          current_period_start: string | null
          first_payment_at: string | null
          id: string
          interval: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;] | null
          lemonsqueezy_customer_id: string | null
          lemonsqueezy_subscription_id: string | null
          lemonsqueezy_variant_id: string | null
          metadata: Json | null
          money_back_eligible_until: string | null
          plan_id: string
          status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;] | null
          stripe_customer_id: string | null
          stripe_price_id: string | null
          stripe_subscription_id: string | null
          trial_end: string | null
          trial_start: string | null
          updated_at: string | null
          user_id: string
        }
        Insert: {
          ai_interactions_used?: number | null
          cancel_at_period_end?: boolean | null
          canceled_at?: string | null
          cancellation_reason?: string | null
          created_at?: string | null
          credits_remaining?: number | null
          current_period_end?: string | null
          current_period_start?: string | null
          first_payment_at?: string | null
          id?: string
          interval?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;] | null
          lemonsqueezy_customer_id?: string | null
          lemonsqueezy_subscription_id?: string | null
          lemonsqueezy_variant_id?: string | null
          metadata?: Json | null
          money_back_eligible_until?: string | null
          plan_id: string
          status?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;] | null
          stripe_customer_id?: string | null
          stripe_price_id?: string | null
          stripe_subscription_id?: string | null
          trial_end?: string | null
          trial_start?: string | null
          updated_at?: string | null
          user_id: string
        }
        Update: {
          ai_interactions_used?: number | null
          cancel_at_period_end?: boolean | null
          canceled_at?: string | null
          cancellation_reason?: string | null
          created_at?: string | null
          credits_remaining?: number | null
          current_period_end?: string | null
          current_period_start?: string | null
          first_payment_at?: string | null
          id?: string
          interval?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;] | null
          lemonsqueezy_customer_id?: string | null
          lemonsqueezy_subscription_id?: string | null
          lemonsqueezy_variant_id?: string | null
          metadata?: Json | null
          money_back_eligible_until?: string | null
          plan_id?: string
          status?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;] | null
          stripe_customer_id?: string | null
          stripe_price_id?: string | null
          stripe_subscription_id?: string | null
          trial_end?: string | null
          trial_start?: string | null
          updated_at?: string | null
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: &quot;subscriptions_plan_id_fkey&quot;
            columns: [&quot;plan_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;plans&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      telegram_users: {
        Row: {
          created_at: string
          first_name: string | null
          id: string
          is_bot: boolean | null
          is_linked: boolean | null
          language_code: string | null
          last_activity_at: string | null
          pending_email: string | null
          telegram_chat_id: number | null
          telegram_user_id: number
          telegram_username: string | null
          updated_at: string
          user_id: string | null
        }
        Insert: {
          created_at?: string
          first_name?: string | null
          id?: string
          is_bot?: boolean | null
          is_linked?: boolean | null
          language_code?: string | null
          last_activity_at?: string | null
          pending_email?: string | null
          telegram_chat_id?: number | null
          telegram_user_id: number
          telegram_username?: string | null
          updated_at?: string
          user_id?: string | null
        }
        Update: {
          created_at?: string
          first_name?: string | null
          id?: string
          is_bot?: boolean | null
          is_linked?: boolean | null
          language_code?: string | null
          last_activity_at?: string | null
          pending_email?: string | null
          telegram_chat_id?: number | null
          telegram_user_id?: number
          telegram_username?: string | null
          updated_at?: string
          user_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: &quot;telegram_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;telegram_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;telegram_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;telegram_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      user_calendars: {
        Row: {
          access_role:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;calendar_access_role&quot;]
            | null
          background_color: string | null
          calendar_id: string
          calendar_name: string | null
          created_at: string
          default_reminders: Json | null
          foreground_color: string | null
          id: string
          is_primary: boolean | null
          is_visible: boolean | null
          last_synced_at: string | null
          notification_enabled: boolean | null
          sync_token: string | null
          timezone: string | null
          updated_at: string
          user_id: string
        }
        Insert: {
          access_role?:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;calendar_access_role&quot;]
            | null
          background_color?: string | null
          calendar_id: string
          calendar_name?: string | null
          created_at?: string
          default_reminders?: Json | null
          foreground_color?: string | null
          id?: string
          is_primary?: boolean | null
          is_visible?: boolean | null
          last_synced_at?: string | null
          notification_enabled?: boolean | null
          sync_token?: string | null
          timezone?: string | null
          updated_at?: string
          user_id: string
        }
        Update: {
          access_role?:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;calendar_access_role&quot;]
            | null
          background_color?: string | null
          calendar_id?: string
          calendar_name?: string | null
          created_at?: string
          default_reminders?: Json | null
          foreground_color?: string | null
          id?: string
          is_primary?: boolean | null
          is_visible?: boolean | null
          last_synced_at?: string | null
          notification_enabled?: boolean | null
          sync_token?: string | null
          timezone?: string | null
          updated_at?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: &quot;user_calendars_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;user_calendars_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;user_calendars_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;user_calendars_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      users: {
        Row: {
          avatar_url: string | null
          created_at: string
          deactivated_at: string | null
          display_name: string | null
          email: string
          email_verified: boolean | null
          first_name: string | null
          id: string
          last_login_at: string | null
          last_name: string | null
          locale: string | null
          preferences: Json | null
          role: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_role&quot;]
          status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_status&quot;] | null
          timezone: string | null
          updated_at: string
        }
        Insert: {
          avatar_url?: string | null
          created_at?: string
          deactivated_at?: string | null
          display_name?: string | null
          email: string
          email_verified?: boolean | null
          first_name?: string | null
          id?: string
          last_login_at?: string | null
          last_name?: string | null
          locale?: string | null
          preferences?: Json | null
          role?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_role&quot;]
          status?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_status&quot;] | null
          timezone?: string | null
          updated_at?: string
        }
        Update: {
          avatar_url?: string | null
          created_at?: string
          deactivated_at?: string | null
          display_name?: string | null
          email?: string
          email_verified?: boolean | null
          first_name?: string | null
          id?: string
          last_login_at?: string | null
          last_name?: string | null
          locale?: string | null
          preferences?: Json | null
          role?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_role&quot;]
          status?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_status&quot;] | null
          timezone?: string | null
          updated_at?: string
        }
        Relationships: []
      }
      whatsapp_users: {
        Row: {
          created_at: string | null
          first_message_at: string | null
          id: string
          is_linked: boolean | null
          language_code: string | null
          last_activity_at: string | null
          message_count: number | null
          onboarding_step: string | null
          pending_email: string | null
          updated_at: string | null
          user_id: string | null
          whatsapp_name: string | null
          whatsapp_phone: string
        }
        Insert: {
          created_at?: string | null
          first_message_at?: string | null
          id?: string
          is_linked?: boolean | null
          language_code?: string | null
          last_activity_at?: string | null
          message_count?: number | null
          onboarding_step?: string | null
          pending_email?: string | null
          updated_at?: string | null
          user_id?: string | null
          whatsapp_name?: string | null
          whatsapp_phone: string
        }
        Update: {
          created_at?: string | null
          first_message_at?: string | null
          id?: string
          is_linked?: boolean | null
          language_code?: string | null
          last_activity_at?: string | null
          message_count?: number | null
          onboarding_step?: string | null
          pending_email?: string | null
          updated_at?: string | null
          user_id?: string | null
          whatsapp_name?: string | null
          whatsapp_phone?: string
        }
        Relationships: [
          {
            foreignKeyName: &quot;whatsapp_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;whatsapp_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;whatsapp_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;whatsapp_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
    }
    Views: {
      v_active_subscriptions: {
        Row: {
          ai_interactions_limit: number | null
          ai_interactions_remaining: number | null
          ai_interactions_used: number | null
          cancel_at_period_end: boolean | null
          canceled_at: string | null
          current_period_end: string | null
          current_period_start: string | null
          display_name: string | null
          email: string | null
          first_payment_at: string | null
          interval: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;] | null
          money_back_eligible_until: string | null
          plan_name: string | null
          plan_slug: string | null
          status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;] | null
          stripe_customer_id: string | null
          stripe_subscription_id: string | null
          subscription_created_at: string | null
          subscription_id: string | null
          trial_end: string | null
          trial_start: string | null
          user_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      v_active_users_with_calendar: {
        Row: {
          display_name: string | null
          email: string | null
          primary_calendar_id: string | null
          primary_calendar_name: string | null
          timezone: string | null
          token_expires_at: string | null
          token_valid: boolean | null
          user_id: string | null
        }
        Relationships: []
      }
      v_admin_user_list: {
        Row: {
          ai_interactions_used: number | null
          avatar_url: string | null
          created_at: string | null
          credits_remaining: number | null
          current_period_end: string | null
          display_name: string | null
          email: string | null
          email_verified: boolean | null
          first_name: string | null
          has_oauth_connected: boolean | null
          id: string | null
          last_name: string | null
          locale: string | null
          plan_name: string | null
          plan_slug: string | null
          role: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_role&quot;] | null
          status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_status&quot;] | null
          subscription_id: string | null
          subscription_interval:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;]
            | null
          subscription_status:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;]
            | null
          timezone: string | null
          updated_at: string | null
        }
        Relationships: []
      }
      v_subscription_distribution: {
        Row: {
          percentage: number | null
          plan_name: string | null
          plan_slug: string | null
          subscriber_count: number | null
        }
        Relationships: []
      }
      v_user_conversation_stats: {
        Row: {
          email: string | null
          last_conversation_at: string | null
          telegram_conversations: number | null
          total_conversations: number | null
          total_messages: number | null
          user_id: string | null
          web_conversations: number | null
        }
        Relationships: []
      }
    }
    Functions: {
      check_trial_expirations: { Args: never; Returns: number }
      check_user_access: {
        Args: { p_user_id: string }
        Returns: {
          credits_remaining: number
          has_access: boolean
          interactions_remaining: number
          money_back_eligible: boolean
          plan_name: string
          subscription_status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;]
          trial_days_left: number
        }[]
      }
      cleanup_expired_sessions: { Args: never; Returns: number }
      cleanup_expired_sessions_v2: { Args: never; Returns: number }
      cleanup_old_pending_gaps:
        | { Args: never; Returns: number }
        | { Args: { days_old?: number }; Returns: number }
      cleanup_old_pending_gaps_v2: {
        Args: { days_old?: number }
        Returns: number
      }
      get_or_create_conversation:
        | {
            Args: {
              p_external_chat_id?: number
              p_source: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
              p_user_id: string
            }
            Returns: string
          }
        | {
            Args: {
              p_source?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
              p_telegram_chat_id?: number
              p_user_id: string
            }
            Returns: string
          }
      match_conversation_embeddings: {
        Args: {
          match_count?: number
          match_threshold?: number
          match_user_id?: number
          query_embedding: string
        }
        Returns: {
          content: string
          id: string
          metadata: Json
          similarity: number
        }[]
      }
      match_conversation_embeddings_v2: {
        Args: {
          match_count?: number
          match_threshold?: number
          match_user_id: string
          query_embedding: string
        }
        Returns: {
          content: string
          id: string
          metadata: Json
          similarity: number
        }[]
      }
      match_conversation_embeddings_web:
        | {
            Args: {
              match_count?: number
              p_user_id?: string
              query_embedding: string
            }
            Returns: {
              content: string
              id: string
              similarity: number
            }[]
          }
        | {
            Args: {
              match_count?: number
              match_threshold?: number
              match_user_email: string
              query_embedding: string
            }
            Returns: {
              content: string
              id: number
              metadata: Json
              similarity: number
            }[]
          }
      match_event_embeddings: {
        Args: {
          match_count?: number
          match_threshold?: number
          match_user_id: string
          query_embedding: string
        }
        Returns: {
          content: string
          id: number
          metadata: Json
          similarity: number
        }[]
      }
      reset_subscription_usage: {
        Args: { p_subscription_id: string }
        Returns: undefined
      }
      show_limit: { Args: never; Returns: number }
      show_trgm: { Args: { &quot;&quot;: string }; Returns: string[] }
    }
    Enums: {
      calendar_access_role: &quot;owner&quot; | &quot;writer&quot; | &quot;reader&quot; | &quot;freeBusyReader&quot;
      conversation_source: &quot;web&quot; | &quot;telegram&quot; | &quot;whatsapp&quot; | &quot;api&quot;
      gap_resolution_status:
        | &quot;pending&quot;
        | &quot;filled&quot;
        | &quot;skipped&quot;
        | &quot;dismissed&quot;
        | &quot;expired&quot;
      message_role: &quot;user&quot; | &quot;assistant&quot; | &quot;system&quot; | &quot;tool&quot;
      oauth_provider: &quot;google&quot; | &quot;github&quot; | &quot;telegram&quot; | &quot;whatsapp&quot;
      payment_status:
        | &quot;pending&quot;
        | &quot;succeeded&quot;
        | &quot;failed&quot;
        | &quot;refunded&quot;
        | &quot;partially_refunded&quot;
        | &quot;disputed&quot;
      plan_interval: &quot;monthly&quot; | &quot;yearly&quot; | &quot;one_time&quot;
      subscription_status:
        | &quot;trialing&quot;
        | &quot;active&quot;
        | &quot;past_due&quot;
        | &quot;canceled&quot;
        | &quot;unpaid&quot;
        | &quot;incomplete&quot;
        | &quot;incomplete_expired&quot;
        | &quot;paused&quot;
      user_role: &quot;user&quot; | &quot;admin&quot; | &quot;moderator&quot; | &quot;support&quot;
      user_status: &quot;active&quot; | &quot;inactive&quot; | &quot;suspended&quot; | &quot;pending_verification&quot;
    }
    CompositeTypes: {
      [_ in never]: never
    }
  }
}
type DatabaseWithoutInternals = Omit&lt;Database, &quot;__InternalSupabase&quot;&gt;
type DefaultSchema = DatabaseWithoutInternals[Extract&lt;keyof Database, &quot;public&quot;&gt;]
export type Tables&lt;
  DefaultSchemaTableNameOrOptions extends
    | keyof (DefaultSchema[&quot;Tables&quot;] &amp; DefaultSchema[&quot;Views&quot;])
    | { schema: keyof DatabaseWithoutInternals },
  TableName extends DefaultSchemaTableNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof (DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;] &amp;
        DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Views&quot;])
    : never = never,
&gt; = DefaultSchemaTableNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? (DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;] &amp;
      DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Views&quot;])[TableName] extends {
      Row: infer R
    }
    ? R
    : never
  : DefaultSchemaTableNameOrOptions extends keyof (DefaultSchema[&quot;Tables&quot;] &amp;
        DefaultSchema[&quot;Views&quot;])
    ? (DefaultSchema[&quot;Tables&quot;] &amp;
        DefaultSchema[&quot;Views&quot;])[DefaultSchemaTableNameOrOptions] extends {
        Row: infer R
      }
      ? R
      : never
    : never
export type TablesInsert&lt;
  DefaultSchemaTableNameOrOptions extends
    | keyof DefaultSchema[&quot;Tables&quot;]
    | { schema: keyof DatabaseWithoutInternals },
  TableName extends DefaultSchemaTableNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;]
    : never = never,
&gt; = DefaultSchemaTableNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;][TableName] extends {
      Insert: infer I
    }
    ? I
    : never
  : DefaultSchemaTableNameOrOptions extends keyof DefaultSchema[&quot;Tables&quot;]
    ? DefaultSchema[&quot;Tables&quot;][DefaultSchemaTableNameOrOptions] extends {
        Insert: infer I
      }
      ? I
      : never
    : never
export type TablesUpdate&lt;
  DefaultSchemaTableNameOrOptions extends
    | keyof DefaultSchema[&quot;Tables&quot;]
    | { schema: keyof DatabaseWithoutInternals },
  TableName extends DefaultSchemaTableNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;]
    : never = never,
&gt; = DefaultSchemaTableNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;][TableName] extends {
      Update: infer U
    }
    ? U
    : never
  : DefaultSchemaTableNameOrOptions extends keyof DefaultSchema[&quot;Tables&quot;]
    ? DefaultSchema[&quot;Tables&quot;][DefaultSchemaTableNameOrOptions] extends {
        Update: infer U
      }
      ? U
      : never
    : never
export type Enums&lt;
  DefaultSchemaEnumNameOrOptions extends
    | keyof DefaultSchema[&quot;Enums&quot;]
    | { schema: keyof DatabaseWithoutInternals },
  EnumName extends DefaultSchemaEnumNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[DefaultSchemaEnumNameOrOptions[&quot;schema&quot;]][&quot;Enums&quot;]
    : never = never,
&gt; = DefaultSchemaEnumNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[DefaultSchemaEnumNameOrOptions[&quot;schema&quot;]][&quot;Enums&quot;][EnumName]
  : DefaultSchemaEnumNameOrOptions extends keyof DefaultSchema[&quot;Enums&quot;]
    ? DefaultSchema[&quot;Enums&quot;][DefaultSchemaEnumNameOrOptions]
    : never
export type CompositeTypes&lt;
  PublicCompositeTypeNameOrOptions extends
    | keyof DefaultSchema[&quot;CompositeTypes&quot;]
    | { schema: keyof DatabaseWithoutInternals },
  CompositeTypeName extends PublicCompositeTypeNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[PublicCompositeTypeNameOrOptions[&quot;schema&quot;]][&quot;CompositeTypes&quot;]
    : never = never,
&gt; = PublicCompositeTypeNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[PublicCompositeTypeNameOrOptions[&quot;schema&quot;]][&quot;CompositeTypes&quot;][CompositeTypeName]
  : PublicCompositeTypeNameOrOptions extends keyof DefaultSchema[&quot;CompositeTypes&quot;]
    ? DefaultSchema[&quot;CompositeTypes&quot;][PublicCompositeTypeNameOrOptions]
    : never</file><file path="be/Dockerfile"># Backend Dockerfile - Multi-Stage Build for Express + TypeScript
# Optimized for App Runner deployment with minimal production image
# syntax=docker/dockerfile:1

# =============================================================================
# Stage 1: Base - Common setup for all stages
# =============================================================================
ARG NODE_VERSION=22
FROM node:${NODE_VERSION}-slim AS base

# Configure pnpm
ENV PNPM_HOME=&quot;/pnpm&quot;
ENV PATH=&quot;$PNPM_HOME:$PATH&quot;

# Install system dependencies
# ca-certificates: enables TLS/SSL for secure HTTPS connections
# curl: useful for health checks
RUN apt-get update -qq &amp;&amp; \
    apt-get install --no-install-recommends -y \
        ca-certificates \
        curl &amp;&amp; \
    rm -rf /var/lib/apt/lists/* &amp;&amp; \
    npm install -g pnpm@10

WORKDIR /app

# =============================================================================
# Stage 2: Dependencies - Install all dependencies
# =============================================================================
FROM base AS deps

# Copy package files for dependency installation
COPY package.json pnpm-lock.yaml ./

# Install all dependencies (including devDependencies for TypeScript build)
RUN pnpm install --frozen-lockfile

# =============================================================================
# Stage 3: Builder - Compile TypeScript to JavaScript
# =============================================================================
FROM base AS builder

WORKDIR /app

# Copy dependencies from deps stage
COPY --from=deps /app/node_modules ./node_modules

# Copy TypeScript configuration
COPY tsconfig.json ./

# Copy source code
# The shared folder is inside /be/shared, so it&apos;s included automatically
COPY . .

# Build TypeScript to JavaScript
# Output goes to /app/dist
RUN pnpm build

# =============================================================================
# Stage 4: Production Dependencies - Install only production deps
# =============================================================================
FROM base AS prod-deps

WORKDIR /app

# Copy package files
COPY package.json pnpm-lock.yaml ./

# Install only production dependencies
RUN pnpm install --frozen-lockfile --prod

# =============================================================================
# Stage 5: Runner - Minimal production image
# =============================================================================
FROM node:${NODE_VERSION}-slim AS runner

WORKDIR /app

# Install only runtime dependencies
RUN apt-get update -qq &amp;&amp; \
    apt-get install --no-install-recommends -y \
        ca-certificates \
        curl &amp;&amp; \
    rm -rf /var/lib/apt/lists/*

# Set production environment
ENV NODE_ENV=production

# Memory tuning: Limit V8 heap to ~1.5GB (adjust based on container size)
# For 2GB container, use 1536. For 1GB container, use 768.
ENV NODE_OPTIONS=&quot;--max-old-space-size=1536&quot;

# Create non-privileged user for security
ARG UID=10001
RUN adduser \
    --disabled-password \
    --gecos &quot;&quot; \
    --home &quot;/app&quot; \
    --shell &quot;/sbin/nologin&quot; \
    --uid &quot;${UID}&quot; \
    appuser

# Copy production dependencies from prod-deps stage
COPY --from=prod-deps --chown=appuser:appuser /app/node_modules ./node_modules

# Copy package.json for reference
COPY --from=prod-deps --chown=appuser:appuser /app/package.json ./

# Copy compiled JavaScript from builder stage
COPY --from=builder --chown=appuser:appuser /app/dist ./dist

# Copy any public/static assets if they exist
# Using a conditional pattern to avoid errors if directory doesn&apos;t exist
COPY --from=builder --chown=appuser:appuser /app/public ./public 2&gt;/dev/null || true

# Switch to non-privileged user
USER appuser

# Expose the port Express runs on
EXPOSE 8080

# Set port environment variable
ENV PORT=8080

# Health check endpoint
HEALTHCHECK --interval=30s --timeout=10s --start-period=10s --retries=3 \
    CMD curl -f http://localhost:8080/api/cron/health || exit 1

# Start the server
CMD [&quot;node&quot;, &quot;dist/app.js&quot;]</file><file path="be/expressd.d.ts">import type { User } from &quot;@supabase/supabase-js&quot;
import type { GoogleTokenValidationResult } from &quot;./middlewares/google-token-validation&quot;
import type { calendar_v3 } from &quot;googleapis&quot;
import type { TokensProps } from &quot;./types&quot;
‚ãÆ----
interface Request {
      user?: User
      googleTokenValidation?: GoogleTokenValidationResult
      validatedQuery?: Record&lt;string, unknown&gt;
      calendar?: calendar_v3.Calendar
      tokenData?: TokensProps
    }</file><file path="be/livekit.toml">[project]
subdomain = &quot;ai-google-calendar-project-mljh2s1n&quot;

[agent]
name = &quot;calendar-voice-assistant&quot;</file><file path="be/package.json">{
  &quot;name&quot;: &quot;ai-google-calendar-assistant&quot;,
  &quot;displayName&quot;: &quot;Google AI Personal Assistant&quot;,
  &quot;version&quot;: &quot;1.0.139&quot;,
  &quot;type&quot;: &quot;commonjs&quot;,
  &quot;main&quot;: &quot;app.js&quot;,
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;tsc &amp;&amp; tsc-alias&quot;,
    &quot;check&quot;: &quot;npx ultracite check&quot;,
    &quot;dev&quot;: &quot;bun --watch app.ts&quot;,
    &quot;fix&quot;: &quot;npx ultracite fix --unsafe&quot;,
    &quot;format&quot;: &quot;npx biome check --write . &amp;&amp; npx biome fix --write .&quot;,
    &quot;sort&quot;: &quot;npx sort-package-json&quot;,
    &quot;start&quot;: &quot;node dist/app.js&quot;,
    &quot;test&quot;: &quot;bun run jest&quot;,
    &quot;test:ci&quot;: &quot;bun run jest --ci --coverage --maxWorkers=2&quot;,
    &quot;test:coverage&quot;: &quot;bun run jest --coverage&quot;,
    &quot;test:watch&quot;: &quot;bun run jest --watch&quot;,
    &quot;update:db:types&quot;: &quot;npx supabase gen types typescript --project-id vdwjfekcsnurtjsieojv --schema public &gt; database.types.ts&quot;
  },
  &quot;dependencies&quot;: {
    &quot;@anthropic-ai/sdk&quot;: &quot;^0.71.2&quot;,
    &quot;@google/generative-ai&quot;: &quot;^0.24.1&quot;,
    &quot;@grammyjs/auto-retry&quot;: &quot;^2.0.2&quot;,
    &quot;@grammyjs/commands&quot;: &quot;^1.2.0&quot;,
    &quot;@grammyjs/conversations&quot;: &quot;^2.1.0&quot;,
    &quot;@grammyjs/menu&quot;: &quot;^1.3.1&quot;,
    &quot;@grammyjs/runner&quot;: &quot;^2.0.3&quot;,
    &quot;@jest/globals&quot;: &quot;^30.2.0&quot;,
    &quot;@lemonsqueezy/lemonsqueezy.js&quot;: &quot;^4.0.0&quot;,
    &quot;@openai/agents&quot;: &quot;^0.3.7&quot;,
    &quot;@openai/agents-core&quot;: &quot;^0.3.7&quot;,
    &quot;@slack/bolt&quot;: &quot;^4.6.0&quot;,
    &quot;@supabase/supabase-js&quot;: &quot;^2.80.0&quot;,
    &quot;@types/cookie-parser&quot;: &quot;^1.4.10&quot;,
    &quot;@types/cors&quot;: &quot;^2.8.19&quot;,
    &quot;@types/express&quot;: &quot;^5.0.5&quot;,
    &quot;@types/jsonwebtoken&quot;: &quot;^9.0.10&quot;,
    &quot;@types/lodash-es&quot;: &quot;^4.17.12&quot;,
    &quot;@types/morgan&quot;: &quot;^1.9.10&quot;,
    &quot;@types/multer&quot;: &quot;^2.0.0&quot;,
    &quot;@types/node&quot;: &quot;^24.10.0&quot;,
    &quot;@types/validator&quot;: &quot;^13.15.4&quot;,
    &quot;cookie-parser&quot;: &quot;^1.4.7&quot;,
    &quot;cors&quot;: &quot;^2.8.5&quot;,
    &quot;date-fns&quot;: &quot;^4.1.0&quot;,
    &quot;dotenv&quot;: &quot;^16.6.1&quot;,
    &quot;express&quot;: &quot;^5.1.0&quot;,
    &quot;express-rate-limit&quot;: &quot;^7.5.0&quot;,
    &quot;googleapis&quot;: &quot;^105.0.0&quot;,
    &quot;grammy&quot;: &quot;^1.38.3&quot;,
    &quot;helmet&quot;: &quot;^8.0.0&quot;,
    &quot;i18next&quot;: &quot;^25.7.3&quot;,
    &quot;ioredis&quot;: &quot;^5.4.1&quot;,
    &quot;jsonwebtoken&quot;: &quot;^9.0.2&quot;,
    &quot;lodash-es&quot;: &quot;^4.17.22&quot;,
    &quot;morgan&quot;: &quot;^1.10.1&quot;,
    &quot;multer&quot;: &quot;^2.0.2&quot;,
    &quot;openai&quot;: &quot;^4.77.0&quot;,
    &quot;resend&quot;: &quot;^6.6.0&quot;,
    &quot;sharp&quot;: &quot;^0.34.5&quot;,
    &quot;supabase&quot;: &quot;^2.58.3&quot;,
    &quot;ts-node&quot;: &quot;^10.9.2&quot;,
    &quot;tsc-alias&quot;: &quot;^1.8.16&quot;,
    &quot;tsconfig-paths&quot;: &quot;^4.2.0&quot;,
    &quot;tslib&quot;: &quot;^2.8.1&quot;,
    &quot;typescript&quot;: &quot;^5.9.3&quot;,
    &quot;validator&quot;: &quot;^13.15.22&quot;,
    &quot;winston&quot;: &quot;^3.19.0&quot;,
    &quot;zod&quot;: &quot;^3.25.67&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@biomejs/biome&quot;: &quot;^2.2.6&quot;,
    &quot;@eslint/js&quot;: &quot;^9.39.1&quot;,
    &quot;@types/jest&quot;: &quot;^30.0.0&quot;,
    &quot;@types/supertest&quot;: &quot;^6.0.3&quot;,
    &quot;babel-jest&quot;: &quot;^30.2.0&quot;,
    &quot;globals&quot;: &quot;^16.5.0&quot;,
    &quot;jest&quot;: &quot;^30.2.0&quot;,
    &quot;lint-staged&quot;: &quot;^16.2.6&quot;,
    &quot;nodemon&quot;: &quot;^3.1.10&quot;,
    &quot;supertest&quot;: &quot;^7.1.4&quot;,
    &quot;ts-jest&quot;: &quot;^29.4.5&quot;,
    &quot;typescript-eslint&quot;: &quot;^8.46.3&quot;,
    &quot;ultracite&quot;: &quot;^5.6.4&quot;
  },
  &quot;pnpm&quot;: {
    &quot;onlyBuiltDependencies&quot;: [
      &quot;esbuild&quot;,
      &quot;supabase&quot;,
      &quot;unrs-resolver&quot;
    ]
  }
}</file><file path="be/README.md"># AI Google Calendar Assistant - Backend

&gt; Express + TypeScript backend service powering AI-driven calendar automation with multi-agent orchestration, multi-platform bot integrations, and SaaS-ready infrastructure.

[![TypeScript](https://img.shields.io/badge/TypeScript-5.9+-blue.svg)](https://www.typescriptlang.org/)
[![Express](https://img.shields.io/badge/Express-5.1.0-green.svg)](https://expressjs.com/)
[![Bun](https://img.shields.io/badge/Bun-Runtime-orange.svg)](https://bun.sh/)
[![OpenAI Agents](https://img.shields.io/badge/OpenAI-Agents_v0.3.7-412991.svg)](https://openai.com/)
[![Jest](https://img.shields.io/badge/Jest-30.2.0-C21325.svg)](https://jestjs.io/)

---

## Table of Contents

- [Quick Reference for AI Agents](#quick-reference-for-ai-agents)
- [Overview](#overview)
- [Architecture](#architecture)
- [Shared Layer](#shared-layer)
- [AI Agent System](#ai-agent-system)
- [API Reference](#api-reference)
- [Middleware](#middleware)
- [Project Structure](#project-structure)
- [Coding Conventions](#coding-conventions)
- [Testing](#testing)
- [Environment Variables](#environment-variables)
- [Commands](#commands)
- [External Services](#external-services)
- [Security](#security)

---

## Quick Reference for AI Agents

&gt; **CRITICAL**: Read this section before making any changes.

### Path Alias

```typescript
// ALWAYS use @/ path alias for imports
import { something } from &quot;@/utils/calendar&quot;  // CORRECT
import { something } from &quot;../utils/calendar&quot; // WRONG - Never use relative imports
```

### Module System

- **CommonJS**: This project uses `&quot;type&quot;: &quot;commonjs&quot;` in package.json
- All imports/exports work with CommonJS resolution

### Code Style (MANDATORY)

| Rule | Standard |
|------|----------|
| Semicolons | **NO** semicolons |
| Quotes | **Double quotes** `&quot;` |
| Line Width | 80 characters max |
| Formatter | Biome |
| Linter | Ultracite + Biome |

### Response Format (MANDATORY)

All API responses MUST use `sendR()` helper:

```typescript
import { sendR } from &quot;@/utils/send-response&quot;

// Success response
sendR(res, 200, &quot;Operation successful&quot;, data)

// Error response
sendR(res, 400, &quot;Error message&quot;, null)

// Response shape: { status: &quot;success&quot;|&quot;error&quot;, message: string, data: T | null }
```

### Route Handler Pattern (MANDATORY)

```typescript
import { reqResAsyncHandler } from &quot;@/utils/http&quot;

// ALWAYS wrap async route handlers
router.get(&quot;/endpoint&quot;, reqResAsyncHandler(async (req, res) =&gt; {
  // Your logic here
  sendR(res, 200, &quot;Success&quot;, data)
}))
```

---

## Overview

This backend service provides:

- **AI Agent Orchestration**: Multi-agent system using OpenAI Agents SDK for intelligent calendar management
- **Multi-Modal Architecture**: Chat, Voice, and Telegram share the same tool handlers via the Shared Layer
- **Google Calendar Integration**: Full CRUD operations, conflict detection, gap recovery
- **Multi-Platform Bots**: Telegram bot (production), Slack bot (production), and WhatsApp bot (in development)
- **SaaS Infrastructure**: Multi-tenant architecture with Lemon Squeezy payment integration
- **Real-time Features**: Voice transcription, streaming chat responses (SSE), webhooks

---

## Architecture

### High-Level Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                              BACKEND ARCHITECTURE                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                           REQUEST LAYER                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ HTTP  ‚îÇ ‚îÇ  SSE  ‚îÇ ‚îÇTelegram‚îÇ ‚îÇ Slack ‚îÇ ‚îÇWhatsApp‚îÇ ‚îÇLiveKit‚îÇ         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇRoutes ‚îÇ ‚îÇStream ‚îÇ ‚îÇ  Bot   ‚îÇ ‚îÇ  Bot  ‚îÇ ‚îÇ  Bot   ‚îÇ ‚îÇ Voice ‚îÇ         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ            ‚îÇ            ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ                   ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                         ‚îÇ           ‚îÇ           ‚îÇ                               ‚îÇ
‚îÇ                         ‚ñº           ‚ñº           ‚ñº                               ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                         MIDDLEWARE CHAIN                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   CORS ‚Üí Helmet ‚Üí Rate Limit ‚Üí Auth ‚Üí Google Token ‚Üí Calendar Client    ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                     ‚îÇ                                           ‚îÇ
‚îÇ                                     ‚ñº                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                          SHARED LAYER                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Tool Handlers ‚îÇ  ‚îÇ   Adapters    ‚îÇ  ‚îÇ Context Store ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ (Pure Logic)  ‚îÇ  ‚îÇ OpenAI/LiveKit‚îÇ  ‚îÇ    (Redis)    ‚îÇ               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                     ‚îÇ                                           ‚îÇ
‚îÇ                                     ‚ñº                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                       AI AGENT ORCHESTRATOR                             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Direct      ‚îÇ  ‚îÇ Agent       ‚îÇ  ‚îÇ Handoff     ‚îÇ  ‚îÇ Guardrails  ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Tools       ‚îÇ  ‚îÇ Tools       ‚îÇ  ‚îÇ Agents      ‚îÇ  ‚îÇ &amp; Safety    ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                     ‚îÇ                                           ‚îÇ
‚îÇ                                     ‚ñº                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                        EXTERNAL SERVICES                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Supabase  ‚îÇ  ‚îÇ  Google   ‚îÇ  ‚îÇ  OpenAI   ‚îÇ  ‚îÇ   Redis   ‚îÇ            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  + Auth   ‚îÇ  ‚îÇ Calendar  ‚îÇ  ‚îÇ  Agents   ‚îÇ  ‚îÇ  Context  ‚îÇ            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Request Flow

```
User Request
     ‚îÇ
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Entry Point   ‚îÇ  app.ts (Express server)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Middleware    ‚îÇ  auth, validation, rate-limiting
‚îÇ   Chain         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Controller    ‚îÇ  Handle HTTP request
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Shared Layer   ‚îÇ  Tool handlers (pure business logic)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   AI Agent      ‚îÇ  OpenAI Agents SDK orchestration
‚îÇ   (if needed)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   External      ‚îÇ  Google Calendar, Supabase, etc.
‚îÇ   Services      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Response      ‚îÇ  sendR() formatted JSON or SSE stream
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Shared Layer

The **Shared Layer** (`be/shared/`) is the architectural hub enabling code reuse across all interaction modalities.

### Design Principles

1. **Framework Agnostic**: Tool handlers contain pure business logic with no SDK dependencies
2. **Single Source of Truth**: One implementation shared by Chat, Voice, and Telegram
3. **Adapter Pattern**: SDK-specific wrappers adapt handlers for OpenAI and LiveKit
4. **Testability**: Pure functions are easy to unit test in isolation

### Shared Layer Architecture

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ              SHARED LAYER                   ‚îÇ
                    ‚îÇ             (be/shared/)                    ‚îÇ
                    ‚îÇ                                             ‚îÇ
                    ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
                    ‚îÇ   ‚îÇ         Tool Handlers               ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   (Pure business logic)             ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ event-handlers.ts               ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ direct-handlers.ts              ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ gap-handlers.ts                 ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
                    ‚îÇ                     ‚îÇ                       ‚îÇ
                    ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
                    ‚îÇ   ‚îÇ                                   ‚îÇ     ‚îÇ
                    ‚îÇ   ‚ñº                                   ‚ñº     ‚îÇ
                    ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
                    ‚îÇ ‚îÇ OpenAI        ‚îÇ     ‚îÇ LiveKit       ‚îÇ     ‚îÇ
                    ‚îÇ ‚îÇ Adapter       ‚îÇ     ‚îÇ Adapter       ‚îÇ     ‚îÇ
                    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
                    ‚îÇ                                             ‚îÇ
                    ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
                    ‚îÇ   ‚îÇ   Unified Context Store (Redis)     ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ Cross-modal state persistence   ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ Entity tracking &amp; resolution    ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ Conversation context            ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ                 ‚îÇ           ‚îÇ           ‚îÇ                 ‚îÇ
              ‚ñº                 ‚ñº           ‚ñº           ‚ñº                 ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Chat    ‚îÇ     ‚îÇ   Voice   ‚îÇ ‚îÇ  Telegram ‚îÇ ‚îÇ   Slack   ‚îÇ ‚îÇ WhatsApp  ‚îÇ
        ‚îÇ  (Web)    ‚îÇ     ‚îÇ (LiveKit) ‚îÇ ‚îÇ   (Bot)   ‚îÇ ‚îÇ   (Bot)   ‚îÇ ‚îÇ   (Bot)   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Tool Handlers (`shared/tools/handlers/`)

Pure business logic functions. Framework-agnostic, testable, reusable across modalities.

#### Event Handlers (`event-handlers.ts`)

```typescript
import { getEventHandler, insertEventHandler } from &quot;@/shared/tools/handlers&quot;

// All handlers take (params, context) and return results
const events = await getEventHandler(
  { timeMin, timeMax, calendarId },
  { email: user.email }
)
```

| Function | Purpose | Complexity |
|----------|---------|------------|
| `getEventHandler(params, ctx)` | Retrieve events by time range | O(n) |
| `insertEventHandler(params, ctx)` | Create new calendar event | O(1) |
| `updateEventHandler(params, ctx)` | Update existing event | O(1) |
| `deleteEventHandler(params, ctx)` | Delete event by ID | O(1) |

#### Direct Handlers (`direct-handlers.ts`)

Fast utilities that bypass the LLM (&lt;100ms response time).

| Function | Purpose | Use Case |
|----------|---------|----------|
| `validateUserHandler(ctx)` | Check if user exists | Pre-flight check |
| `getTimezoneHandler(ctx)` | Get user&apos;s timezone | Event creation |
| `selectCalendarHandler(params, ctx)` | AI-powered calendar selection | Multi-calendar users |
| `checkConflictsHandler(params, ctx)` | Check for scheduling conflicts | Before event creation |
| `preCreateValidationHandler(params, ctx)` | Combined pre-creation checks | Event creation flow |

#### Gap Handlers (`gap-handlers.ts`)

Gap recovery feature for detecting untracked time.

| Function | Purpose |
|----------|---------|
| `analyzeGapsHandler(params, ctx)` | Find untracked time gaps between events |
| `fillGapHandler(params, ctx)` | Create event to fill detected gap |
| `formatGapsHandler(params)` | Format gaps for display in UI |

### Adapters (`shared/adapters/`)

SDK-specific wrappers that adapt handlers for specific frameworks.

#### OpenAI Adapter (`openai-adapter.ts`)

```typescript
import { SHARED_TOOLS, getEmailFromContext } from &quot;@/shared/adapters/openai-adapter&quot;

// Use SHARED_TOOLS when creating OpenAI agents
const agent = new Agent({
  tools: SHARED_TOOLS,
  // ...
})
```

#### LiveKit Adapter (`livekit-adapter.ts`)

```typescript
import { LIVEKIT_TOOL_DEFINITIONS, getLiveKitToolByName } from &quot;@/shared/adapters/livekit-adapter&quot;

// Use for LiveKit Agents SDK voice integration
const tools = getAllLiveKitTools()
```

### Context Store (`shared/context/`)

Redis-backed cross-modal state persistence enabling sophisticated features.

```typescript
import { unifiedContextStore } from &quot;@/shared/context/unified-context-store&quot;

// Store last referenced event (for pronoun resolution)
await unifiedContextStore.setLastEvent(userId, event, &quot;chat&quot;)

// Retrieve for pronoun resolution (&quot;it&quot;, &quot;that meeting&quot;, &quot;the event&quot;)
const lastEvent = await unifiedContextStore.getLastEvent(userId)

// Track conversation context across modalities
await unifiedContextStore.setConversation(userId, conversationContext)
```

**Features:**
- Cross-modal entity tracking
- Pronoun resolution (&quot;that meeting&quot; ‚Üí last referenced event)
- Session state persistence across Chat, Voice, Telegram
- TTL-based automatic cleanup

### Orchestrator (`shared/orchestrator/`)

Agent profile management and factory functions.

```typescript
import { getAgentProfile, createTextAgent } from &quot;@/shared/orchestrator&quot;

// Get profile by ID
const profile = getAgentProfile(&quot;ally-pro&quot;)

// Create agent with profile
const agent = await createTextAgent({
  profileId: &quot;ally-pro&quot;,
  email: user.email,
})
```

---

## AI Agent System

### Agent Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       AI AGENT SYSTEM                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ   User Message                                                      ‚îÇ
‚îÇ        ‚îÇ                                                            ‚îÇ
‚îÇ        ‚ñº                                                            ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ   Guardrails    ‚îÇ  Safety checks (prompt injection, etc.)       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ                                                        ‚îÇ
‚îÇ            ‚ñº                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ  Orchestrator   ‚îÇ  Main agent with tool selection               ‚îÇ
‚îÇ   ‚îÇ     Agent       ‚îÇ                                               ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ                                                        ‚îÇ
‚îÇ            ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ            ‚ñº                  ‚ñº                  ‚ñº                  ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   ‚îÇ  Direct Tools   ‚îÇ ‚îÇ  Agent Tools    ‚îÇ ‚îÇ Handoff Agents  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  (Fast &lt;100ms)  ‚îÇ ‚îÇ  (AI-powered)   ‚îÇ ‚îÇ (Multi-step)    ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ                 ‚îÇ ‚îÇ                 ‚îÇ ‚îÇ                 ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ ‚Ä¢ validate_user ‚îÇ ‚îÇ ‚Ä¢ get_event     ‚îÇ ‚îÇ ‚Ä¢ create_event  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ ‚Ä¢ get_timezone  ‚îÇ ‚îÇ ‚Ä¢ update_event  ‚îÇ ‚îÇ ‚Ä¢ complex_flow  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ ‚Ä¢ check_conflict‚îÇ ‚îÇ ‚Ä¢ delete_event  ‚îÇ ‚îÇ                 ‚îÇ       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ            ‚îÇ                  ‚îÇ                  ‚îÇ                  ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îÇ                               ‚îÇ                                     ‚îÇ
‚îÇ                               ‚ñº                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ            Tool Handlers (Shared Layer)                     ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                               ‚îÇ                                     ‚îÇ
‚îÇ                               ‚ñº                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ    Response     ‚îÇ  Streaming (SSE) or JSON                      ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Agent Tiers

| Tier | Model | Cost | Use Case |
|------|-------|------|----------|
| `FAST_MODEL` | GPT-4-1-NANO | $ | Simple tool-calling, basic operations |
| `MEDIUM_MODEL` | GPT-4-1-MINI | $$ | Multi-tool orchestration, moderate complexity |
| `CURRENT_MODEL` | GPT-5-MINI | $$$ | Complex reasoning, advanced NLP parsing |

### Tool Registry

Tools are organized into two categories in `ai-agents/tool-registry.ts`:

#### DIRECT_TOOLS (Fast, no AI overhead)

Execute immediately without LLM invocation. Ideal for validation and pre-checks.

| Tool | Description | Response Time |
|------|-------------|---------------|
| `validate_user_direct` | Check user exists in database | &lt;50ms |
| `get_timezone_direct` | Get user&apos;s timezone setting | &lt;50ms |
| `select_calendar_direct` | AI-selected calendar for operation | &lt;100ms |
| `check_conflicts_direct` | Check for scheduling conflicts | &lt;100ms |
| `pre_create_validation` | Combined validation checks | &lt;100ms |
| `insert_event_direct` | Fast event creation | &lt;200ms |
| `get_event_direct` | Retrieve events by criteria | &lt;200ms |

#### AGENT_TOOLS (AI-powered)

Require LLM reasoning for parameter extraction or complex decisions.

| Tool | Description | Complexity |
|------|-------------|------------|
| `generate_google_auth_url` | Create OAuth URL for calendar connection | Simple |
| `register_user_via_db` | Register new user in database | Simple |
| `get_event` | Smart event retrieval with NLP | Medium |
| `update_event` | Event modification with conflict check | Medium |
| `delete_event` | Event removal with confirmation | Medium |

### Adding New Tools

1. **Define schema** in `ai-agents/tool-schemas.ts`:

```typescript
export const myToolSchema = z.object({
  param1: z.string().describe(&quot;Description for AI&quot;),
  param2: z.number().optional().describe(&quot;Optional numeric value&quot;),
})
```

2. **Create handler** in `shared/tools/handlers/`:

```typescript
export async function myToolHandler(
  params: z.infer&lt;typeof myToolSchema&gt;,
  ctx: HandlerContext
): Promise&lt;MyToolResult&gt; {
  // Pure business logic here - no SDK dependencies
  const result = await performOperation(params, ctx.email)
  return { success: true, data: result }
}
```

3. **Register in adapters**:

```typescript
// In shared/adapters/openai-adapter.ts
export const MY_TOOL = tool({
  name: &quot;my_tool&quot;,
  description: &quot;What this tool does for the AI&quot;,
  parameters: myToolSchema,
  execute: async (params, context) =&gt; {
    const email = getEmailFromContext(context, &quot;my_tool&quot;)
    return await myToolHandler(params, { email })
  },
})
```

4. **Add to registry** in `ai-agents/tool-registry.ts`:

```typescript
export const DIRECT_TOOLS = [
  // ... existing tools
  MY_TOOL,
]
```

### Guardrails System

Safety checks executed before AI processing:

```typescript
import { runGuardrails } from &quot;@/ai-agents/guardrails&quot;

// Check for malicious input
const { safe, reason } = await runGuardrails(userMessage)
if (!safe) {
  return sendR(res, 400, reason, null)
}
```

**Protected Against:**
- Prompt injection attempts
- Mass deletion requests
- SQL injection patterns
- Excessive operation requests

---

## API Reference

### Authentication (`/api/users`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `POST` | `/signup` | Register with email/password | None |
| `POST` | `/signin` | Sign in with email/password | None |
| `GET` | `/signup/google` | OAuth with Google | None |
| `GET` | `/callback` | OAuth callback handler | None |
| `POST` | `/logout` | Clear session | JWT |
| `GET` | `/get-user` | Get current user | JWT |
| `GET` | `/session` | Check session validity | JWT |
| `POST` | `/refresh` | Refresh access token | Refresh Token |
| `DELETE` | `/` | Deactivate account (GDPR) | JWT |

### Calendar (`/api/calendar`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `GET` | `/` | List all user calendars | JWT + Google |
| `POST` | `/` | Create secondary calendar | JWT + Google |
| `GET` | `/:id` | Get calendar by ID | JWT + Google |
| `PATCH` | `/:id` | Partial update calendar | JWT + Google |
| `PUT` | `/:id` | Full update calendar | JWT + Google |
| `DELETE` | `/:id` | Clear all events in calendar | JWT + Google |
| `GET` | `/freebusy` | Get free/busy information | JWT + Google |
| `GET` | `/colors` | Get available calendar colors | JWT + Google |
| `GET` | `/timezones` | Get supported timezones | JWT |

### Events (`/api/events`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `GET` | `/` | List events with filters | JWT + Google |
| `POST` | `/` | Create event | JWT + Google |
| `GET` | `/:id` | Get event by ID | JWT + Google |
| `PATCH` | `/:id` | Update event | JWT + Google |
| `DELETE` | `/:id` | Delete event | JWT + Google |
| `POST` | `/quick-add` | Natural language event create | JWT + Google |
| `GET` | `/analytics` | Get calendar analytics | JWT + Google |
| `POST` | `/watch` | Setup event change webhook | JWT + Google |

### Chat (`/api/chat`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `POST` | `/stream` | Stream chat response (SSE) | JWT + Google |
| `POST` | `/` | Non-streaming chat | JWT + Google |
| `GET` | `/conversations` | List conversations | JWT |
| `GET` | `/conversations/:id` | Get conversation | JWT |
| `DELETE` | `/conversations/:id` | Delete conversation | JWT |
| `PATCH` | `/conversations/:id` | Update conversation title | JWT |

### Voice (`/api/voice`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `POST` | `/transcribe` | Transcribe audio file | JWT |
| `POST` | `/stream` | Real-time voice streaming | JWT |
| `GET` | `/token` | Get LiveKit room token | JWT |

### Admin (`/api/admin`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `GET` | `/users` | List all users (paginated) | Admin JWT |
| `GET` | `/users/:id` | Get user details | Admin JWT |
| `POST` | `/users/:id/credits` | Grant credits to user | Admin JWT |
| `GET` | `/audit-logs` | Get audit logs (paginated) | Admin JWT |
| `GET` | `/payments` | Get payment history | Admin JWT |
| `GET` | `/subscriptions` | Get subscription stats | Admin JWT |

### Payments (`/api/payments`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `POST` | `/webhook` | Lemon Squeezy webhook | Webhook Secret |
| `GET` | `/subscription` | Get user subscription | JWT |
| `POST` | `/checkout` | Create checkout session | JWT |
| `POST` | `/cancel` | Cancel subscription | JWT |

### Telegram (`/api/telegram`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `POST` | `/webhook` | Telegram bot webhook endpoint | Bot Token |

### Slack (`/api/slack`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `POST` | `/events` | Slack events webhook | Signing Secret |
| `POST` | `/commands` | Slash commands handler | Signing Secret |
| `POST` | `/interactions` | Interactive components | Signing Secret |

### Google RISC (`/api/risc`)

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `POST` | `/events` | Google Cross-Account Protection events | JWT (Google) |

---

## Middleware

### Middleware Chain Order

```typescript
// Order matters! Applied in sequence:
app.use(cors())                    // 1. CORS headers
app.use(helmet())                  // 2. Security headers
app.use(rateLimiter)               // 3. Rate limiting
app.use(express.json())            // 4. Parse JSON body
app.use(authHandler)               // 5. Extract JWT
app.use(supabaseAuth)              // 6. Validate with Supabase
app.use(googleTokenValidation)     // 7. Check Google tokens
app.use(googleTokenRefresh)        // 8. Auto-refresh if needed
app.use(calendarClient)            // 9. Attach calendar to request
```

### Authentication Middleware

```typescript
import { authHandler } from &quot;@/middlewares/auth-handler&quot;
import { supabaseAuth } from &quot;@/middlewares/supabase-auth&quot;
import { googleTokenValidation } from &quot;@/middlewares/google-token-validation&quot;
import { googleTokenRefresh } from &quot;@/middlewares/google-token-refresh&quot;

// Apply to protected routes
router.use(authHandler)           // Extract JWT from header/cookie
router.use(supabaseAuth)          // Validate with Supabase
router.use(googleTokenValidation) // Check Google tokens exist
router.use(googleTokenRefresh)    // Auto-refresh expired tokens
```

### Request Type Extensions

```typescript
// Authenticated request with user
interface AuthenticatedRequest extends Request {
  user: {
    id: string
    email: string
  }
}

// Request with calendar client attached
interface CalendarRequest extends AuthenticatedRequest {
  calendar: calendar_v3.Calendar
  googleTokens: {
    accessToken: string
    refreshToken: string
  }
}
```

---

## Project Structure

```
be/
‚îú‚îÄ‚îÄ ai-agents/                   # OpenAI Agent System
‚îÇ   ‚îú‚îÄ‚îÄ sessions/                # Session persistence (Supabase)
‚îÇ   ‚îú‚îÄ‚îÄ agents.ts                # Agent definitions &amp; orchestration
‚îÇ   ‚îú‚îÄ‚îÄ agents-instructions.ts   # System prompts and instructions
‚îÇ   ‚îú‚îÄ‚îÄ tool-registry.ts         # Tool definitions (AGENT_TOOLS, DIRECT_TOOLS)
‚îÇ   ‚îú‚îÄ‚îÄ tool-schemas.ts          # Zod schemas for tool parameters
‚îÇ   ‚îú‚îÄ‚îÄ tool-execution.ts        # Tool execution logic
‚îÇ   ‚îú‚îÄ‚îÄ tool-descriptions.ts     # Tool descriptions for LLM context
‚îÇ   ‚îú‚îÄ‚îÄ direct-utilities.ts      # Fast non-AI tools
‚îÇ   ‚îú‚îÄ‚îÄ guardrails.ts            # Safety checks (prompt injection)
‚îÇ   ‚îú‚îÄ‚îÄ insights-generator.ts    # Analytics insights generation
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts                 # Agent utilities
‚îÇ
‚îú‚îÄ‚îÄ shared/                      # Cross-Modal Shared Layer
‚îÇ   ‚îú‚îÄ‚îÄ types/                   # Core interfaces
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts             # HandlerContext, AgentContext, Modality
‚îÇ   ‚îú‚îÄ‚îÄ tools/                   # Framework-agnostic tools
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # Pure business logic handlers
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ event-handlers.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ direct-handlers.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gap-handlers.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/             # Zod schemas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tool-executor.ts     # Provider-agnostic execution
‚îÇ   ‚îú‚îÄ‚îÄ adapters/                # SDK-specific wrappers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai-adapter.ts    # @openai/agents wrapper
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ livekit-adapter.ts   # @livekit/agents wrapper
‚îÇ   ‚îú‚îÄ‚îÄ context/                 # Cross-modal context (Redis)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unified-context-store.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ entity-tracker.ts    # Pronoun resolution
‚îÇ   ‚îú‚îÄ‚îÄ orchestrator/            # Agent profiles &amp; factories
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent-profiles.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model-registry.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orchestrator-factory.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ text-agent-factory.ts
‚îÇ   ‚îú‚îÄ‚îÄ prompts/                 # Shared prompt templates
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base-prompts.ts
‚îÇ   ‚îî‚îÄ‚îÄ llm/                     # Multi-provider abstraction
‚îÇ
‚îú‚îÄ‚îÄ config/                      # Configuration
‚îÇ   ‚îú‚îÄ‚îÄ clients/                 # External clients
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts          # Supabase client
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redis.ts             # Redis connection
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ google-oauth.ts      # Google auth setup
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai.ts            # OpenAI client
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ lemonsqueezy.ts      # Payment client
‚îÇ   ‚îú‚îÄ‚îÄ constants/               # Application constants
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai.ts                # Model names, tool configs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ google.ts            # Google API constants
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ http.ts              # Status codes, routes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ timezone.ts          # Timezone mappings
‚îÇ   ‚îú‚îÄ‚îÄ env.ts                   # Environment validation
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                 # Config exports
‚îÇ
‚îú‚îÄ‚îÄ controllers/                 # Request handlers
‚îÇ   ‚îú‚îÄ‚îÄ google-calendar/         # Calendar-specific controllers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar-list-controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar-controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events-controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ acl-controller.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ channels-controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ users/                   # User management
‚îÇ   ‚îú‚îÄ‚îÄ chat-controller.ts       # Chat endpoint
‚îÇ   ‚îú‚îÄ‚îÄ chat-stream-controller.ts # SSE streaming
‚îÇ   ‚îú‚îÄ‚îÄ agent-profiles-controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ admin-controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ payment-controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ voice-controller.ts
‚îÇ   ‚îî‚îÄ‚îÄ contact-controller.ts
‚îÇ
‚îú‚îÄ‚îÄ routes/                      # API routes
‚îÇ   ‚îú‚îÄ‚îÄ google-calendar/         # Calendar API routes
‚îÇ   ‚îú‚îÄ‚îÄ users-route.ts           # Auth endpoints
‚îÇ   ‚îú‚îÄ‚îÄ admin-route.ts           # Admin endpoints
‚îÇ   ‚îú‚îÄ‚îÄ payment-route.ts         # Payment endpoints
‚îÇ   ‚îú‚îÄ‚îÄ voice-route.ts           # Voice endpoints
‚îÇ   ‚îî‚îÄ‚îÄ webhooks-route.ts        # Webhook handlers
‚îÇ
‚îú‚îÄ‚îÄ services/                    # Business logic services
‚îÇ   ‚îú‚îÄ‚îÄ admin-service.ts         # Admin operations
‚îÇ   ‚îú‚îÄ‚îÄ lemonsqueezy-service.ts  # Payment integration
‚îÇ   ‚îî‚îÄ‚îÄ user-preferences-service.ts
‚îÇ
‚îú‚îÄ‚îÄ middlewares/                 # Express middleware
‚îÇ   ‚îú‚îÄ‚îÄ auth-handler.ts          # JWT extraction
‚îÇ   ‚îú‚îÄ‚îÄ supabase-auth.ts         # Supabase validation
‚îÇ   ‚îú‚îÄ‚îÄ google-token-validation.ts
‚îÇ   ‚îú‚îÄ‚îÄ google-token-refresh.ts
‚îÇ   ‚îú‚îÄ‚îÄ calendar-client.ts       # Attach calendar to request
‚îÇ   ‚îú‚îÄ‚îÄ rate-limiter.ts          # Request rate limiting
‚îÇ   ‚îú‚îÄ‚îÄ security-audit.ts        # Audit logging
‚îÇ   ‚îî‚îÄ‚îÄ error-handler.ts         # Global error handler
‚îÇ
‚îú‚îÄ‚îÄ telegram-bot/                # Telegram Bot (Grammy)
‚îÇ   ‚îú‚îÄ‚îÄ init-bot.ts              # Bot initialization
‚îÇ   ‚îú‚îÄ‚îÄ handlers/                # Message handlers
‚îÇ   ‚îú‚îÄ‚îÄ commands/                # Slash commands
‚îÇ   ‚îú‚îÄ‚îÄ middleware/              # Telegram middleware
‚îÇ   ‚îî‚îÄ‚îÄ locales/                 # Multi-language support
‚îÇ
‚îú‚îÄ‚îÄ slack-bot/                   # Slack Bot Integration
‚îÇ   ‚îú‚îÄ‚îÄ init-bot.ts              # Bot initialization &amp; event handling
‚îÇ   ‚îú‚îÄ‚îÄ handlers/                # Message &amp; command handlers
‚îÇ   ‚îú‚îÄ‚îÄ middleware/              # Rate limiting, auth verification
‚îÇ   ‚îú‚îÄ‚îÄ utils/                   # Response builder, session management
‚îÇ   ‚îî‚îÄ‚îÄ services/                # User resolver, conversation history
‚îÇ
‚îú‚îÄ‚îÄ whatsapp-bot/                # WhatsApp Bot (in dev)
‚îÇ   ‚îú‚îÄ‚îÄ init-whatsapp.ts
‚îÇ   ‚îî‚îÄ‚îÄ handlers/
‚îÇ
‚îú‚îÄ‚îÄ voice-sidecar/               # LiveKit Voice Agent
‚îÇ   ‚îú‚îÄ‚îÄ main.ts                  # Voice agent entry
‚îÇ   ‚îî‚îÄ‚îÄ handlers/
‚îÇ
‚îú‚îÄ‚îÄ utils/                       # Utilities
‚îÇ   ‚îú‚îÄ‚îÄ calendar/                # Calendar operations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar-service.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ event-operations.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ conflict-checker.ts
‚îÇ   ‚îú‚îÄ‚îÄ auth/                    # Auth utilities
‚îÇ   ‚îú‚îÄ‚îÄ logger.ts                # Winston logging
‚îÇ   ‚îú‚îÄ‚îÄ audit-logger.ts          # Security audit
‚îÇ   ‚îú‚îÄ‚îÄ send-response.ts         # Response formatter (sendR)
‚îÇ   ‚îú‚îÄ‚îÄ http.ts                  # HTTP utilities
‚îÇ   ‚îî‚îÄ‚îÄ sse.ts                   # Server-Sent Events
‚îÇ
‚îú‚îÄ‚îÄ tests/                       # Test suite
‚îÇ   ‚îú‚îÄ‚îÄ controllers/             # Controller tests
‚îÇ   ‚îú‚îÄ‚îÄ services/                # Service tests
‚îÇ   ‚îú‚îÄ‚îÄ utils/                   # Utility tests
‚îÇ   ‚îî‚îÄ‚îÄ mocks/                   # Mock data
‚îÇ
‚îú‚îÄ‚îÄ supabase/                    # Database
‚îÇ   ‚îú‚îÄ‚îÄ migrations/              # Schema migrations
‚îÇ   ‚îî‚îÄ‚îÄ config.toml              # Supabase config
‚îÇ
‚îú‚îÄ‚îÄ app.ts                       # Entry point
‚îú‚îÄ‚îÄ expressd.d.ts                # Express type extensions
‚îú‚îÄ‚îÄ database.types.ts            # Auto-generated Supabase types
‚îî‚îÄ‚îÄ package.json                 # Dependencies
```

---

## Coding Conventions

### File Naming

| Type | Convention | Example |
|------|------------|---------|
| Files | kebab-case | `user-preferences-controller.ts` |
| Classes | PascalCase | `class UserService` |
| Functions | camelCase | `function getUserById()` |
| Constants | SCREAMING_SNAKE_CASE | `const MAX_RETRIES = 3` |
| Types/Interfaces | PascalCase | `interface UserProfile` |

### Import Order

```typescript
// 1. External packages
import { Router } from &quot;express&quot;
import { z } from &quot;zod&quot;

// 2. Internal modules (using @/ alias)
import { SUPABASE } from &quot;@/config/clients&quot;
import { sendR } from &quot;@/utils/send-response&quot;

// 3. Types (use &apos;import type&apos; for type-only imports)
import type { Request, Response } from &quot;express&quot;
import type { UserProfile } from &quot;@/types&quot;
```

### Error Handling

```typescript
// CORRECT: Proper error handling
try {
  const result = await someOperation()
  return result
} catch (error) {
  console.error(&quot;Operation failed:&quot;, error)
  throw error // Re-throw or handle appropriately
}

// WRONG: Empty catch block
try {
  const result = await someOperation()
} catch (error) {
  // Empty - NEVER do this
}
```

### Type Annotations

```typescript
// CORRECT: Explicit return types
function calculateTotal(items: CartItem[]): number {
  return items.reduce((sum, item) =&gt; sum + item.price, 0)
}

// CORRECT: Explicit parameter types
async function getUserById(id: string): Promise&lt;User | null&gt; {
  return await db.users.findUnique({ where: { id } })
}

// WRONG: Implicit any
function processData(data) { // Missing type annotation
  return data.value
}
```

### Anti-Patterns (FORBIDDEN)

```typescript
// FORBIDDEN: Type assertions
const data = response as any
const user = {} as User

// FORBIDDEN: Non-null assertions
const value = possiblyNull!.property

// FORBIDDEN: TypeScript directives
// @ts-ignore
// @ts-expect-error

// FORBIDDEN: Relative imports
import { something } from &quot;../utils/helper&quot;

// FORBIDDEN: Direct res.json()
res.json({ success: true, data })

// ALWAYS use sendR instead
sendR(res, 200, &quot;Success&quot;, data)
```

---

## Testing

### Test Structure

```
be/tests/
‚îú‚îÄ‚îÄ controllers/       # Controller tests
‚îú‚îÄ‚îÄ services/          # Service tests
‚îú‚îÄ‚îÄ utils/             # Utility tests
‚îî‚îÄ‚îÄ mocks/             # Shared mocks
```

### Test Pattern

```typescript
import { describe, it, expect, beforeEach, jest } from &quot;@jest/globals&quot;

describe(&quot;UserService&quot;, () =&gt; {
  beforeEach(() =&gt; {
    jest.clearAllMocks()
  })

  it(&quot;should create a user&quot;, async () =&gt; {
    // Arrange
    const userData = { email: &quot;test@example.com&quot; }

    // Act
    const result = await userService.create(userData)

    // Assert
    expect(result.email).toBe(userData.email)
  })
})
```

### Running Tests

```bash
bun test              # Run all tests
bun test:coverage     # Tests with coverage
bun test:watch        # Watch mode
bun test:ci           # CI mode (no watch, coverage)
```

---

## Environment Variables

### Required

```env
# Supabase
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# OpenAI
OPEN_API_KEY=your_openai_api_key

# Google OAuth
GOOGLE_CLIENT_SECRET=your_google_client_secret
```

### Optional

```env
# Alternative LLM Providers
ANTHROPIC_API_KEY=your_anthropic_api_key

# Telegram Bot
TELEGRAM_BOT_ACCESS_TOKEN=your_telegram_bot_token

# Slack Bot
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_SIGNING_SECRET=your_slack_signing_secret
SLACK_APP_TOKEN=xapp-your-slack-app-level-token

# Payments
LEMON_SQUEEZY_API_KEY=your_api_key
LEMON_SQUEEZY_STORE_ID=your_store_id
LEMON_SQUEEZY_WEBHOOK_SECRET=your_webhook_secret

# Redis (for cross-modal context)
REDIS_URL=redis://localhost:6379

# Server
PORT=3000
NODE_ENV=development
BASE_URL=http://localhost:3000
FE_BASE_URL=http://localhost:4000
```

---

## Commands

```bash
# Development
bun dev              # Dev server with hot reload
bun start            # Production server

# Testing
bun test             # Run tests
bun test:coverage    # Tests with coverage
bun test:watch       # Watch mode

# Code Quality
bun run check        # Lint check (Ultracite)
bun run fix          # Auto-fix lint issues
bun run format       # Format code (Biome)

# Database
bun run update:db:types  # Generate Supabase types

# Utilities
bun run sort         # Sort package.json
```

---

## External Services

| Service | Purpose | Config Location |
|---------|---------|-----------------|
| **Supabase** | PostgreSQL + Auth + RLS | `@/config/clients/supabase.ts` |
| **Google Calendar** | Events, calendars, OAuth | `@/utils/calendar/` |
| **Google RISC** | Cross-Account Protection | `@/routes/risc-route.ts` |
| **OpenAI** | Agent orchestration, LLM | `@/ai-agents/` |
| **Anthropic** | Alternative LLM provider | `@/config/clients/openai.ts` |
| **LiveKit** | Real-time voice rooms | `@/voice-sidecar/` |
| **Lemon Squeezy** | Payments (subscription) | `@/services/lemonsqueezy-service.ts` |
| **Redis** | Cross-modal context store | `@/shared/context/` |
| **Resend** | Email delivery | `@/controllers/contact-controller.ts` |
| **Telegram** | Telegram Bot API (Grammy) | `@/telegram-bot/` |
| **Slack** | Slack Bot API | `@/slack-bot/` |

---

## Security

### Authentication Layers

| Layer | Implementation |
|-------|----------------|
| **JWT Validation** | Supabase Auth tokens |
| **OAuth 2.0** | Secure Google integration |
| **Token Refresh** | Auto-refresh middleware |
| **Session Management** | Secure cookie handling |

### API Security

| Feature | Implementation |
|---------|----------------|
| **Rate Limiting** | Per-endpoint configurable limits |
| **Input Validation** | Zod schemas for all inputs |
| **CORS** | Origin whitelisting |
| **Helmet** | Security headers |
| **Request Size** | 10MB max limit |

### AI Safety

| Feature | Implementation |
|---------|----------------|
| **Guardrails** | Prompt injection detection |
| **Mass Deletion Protection** | Confirmation required |
| **Input Sanitization** | Pre-processing of user input |
| **Audit Logging** | Security event tracking |

### Data Protection

| Feature | Implementation |
|---------|----------------|
| **Row Level Security** | Supabase RLS policies |
| **Password Hashing** | Supabase Auth (bcrypt) |
| **HTTPS Only** | Production enforcement |
| **Secrets Management** | Environment variables |
| **GDPR Compliance** | Account deletion support |

---

## License

MIT License - see [LICENSE](../LICENSE) for details.</file><file path="be/SECURITY.md"># Security Documentation

## Overview

This document outlines the security measures implemented in the AI Google Calendar Assistant backend.

## Security Controls

### Authentication &amp; Authorization

- **Supabase JWT Authentication**: All protected endpoints require valid JWT tokens
- **Google OAuth2**: Calendar API access uses OAuth2 with proper token verification
- **Token Refresh**: Automatic token refresh with secure cookie storage
- **Session Management**: HTTP-only, secure, SameSite cookies

### Rate Limiting

| Endpoint Type | Limit | Window |
|---------------|-------|--------|
| Authentication (`/signin`, `/signup`) | 5 requests | 15 minutes |
| OTP Verification | 3 requests | 5 minutes |
| Token Refresh | 30 requests | 15 minutes |
| General API | 100 requests | 1 minute |

### Input Validation

- **Zod Schemas**: Runtime type checking for all request bodies
- **Email Validation**: Proper email format validation and normalization
- **Password Requirements**: Minimum 8 characters, requires uppercase, lowercase, and number
- **Input Sanitization**: XSS prevention through input sanitization

### Security Headers (Helmet.js)

- X-Content-Type-Options: nosniff
- X-Frame-Options: SAMEORIGIN
- X-XSS-Protection: 1; mode=block
- Strict-Transport-Security (HSTS)
- Cross-Origin-Resource-Policy

### AI Safety Guardrails

- **Pre-check Validation**: Fast regex-based injection detection
- **LLM-based Safety Check**: Semantic analysis for:
  - Mass deletion attempts
  - Prompt injection/jailbreak attempts
  - PII exposure attempts
  - Vague destructive intent
- **Fail-closed Mode**: Requests blocked if safety cannot be verified

### Audit Logging

- Request correlation IDs for tracing
- Security event logging for:
  - Authentication events (login, logout, signup)
  - Failed access attempts
  - Modification operations
  - OAuth callbacks
- PII masking in logs

## Security Checklist

### Critical (CVSS 9.0+)
- [x] Token exposure in OAuth redirect URLs - FIXED
- [x] JWT verification instead of decode only - FIXED
- [x] Telegram email verification via OTP - FIXED
- [x] IDOR on user info endpoint - FIXED

### High (CVSS 7.0-8.9)
- [x] Rate limiting on auth endpoints - IMPLEMENTED
- [x] Security headers (Helmet) - IMPLEMENTED
- [x] Authentication on all routes - IMPLEMENTED
- [x] Input validation with Zod - IMPLEMENTED

### Medium (CVSS 4.0-6.9)
- [x] Security audit logging - IMPLEMENTED
- [x] AI guardrail improvements - IMPLEMENTED
- [x] Error message sanitization - IMPROVED
- [x] Cookie security settings - VERIFIED

## Environment Configuration

Required environment variables:
- `SUPABASE_URL`: Supabase project URL
- `SUPABASE_SERVICE_ROLE_KEY`: Service role key (backend only)
- `GOOGLE_CLIENT_ID`: OAuth client ID
- `GOOGLE_CLIENT_SECRET`: OAuth client secret
- `OPEN_API_KEY`: OpenAI API key

### Production Requirements

1. Set `NODE_ENV=production`
2. Configure CORS origins to actual frontend domain
3. Use HTTPS only
4. Rotate all API keys
5. Enable Supabase RLS policies

## Reporting Security Issues

Please report security vulnerabilities responsibly by contacting the maintainers directly.

---
Last Updated: 2026-01-04</file><file path="be/tsconfig.json">{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;ES2022&quot;,
    &quot;module&quot;: &quot;NodeNext&quot;,
    &quot;moduleResolution&quot;: &quot;NodeNext&quot;,
    &quot;resolveJsonModule&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;isolatedModules&quot;: true,
    &quot;strict&quot;: true,
    &quot;skipLibCheck&quot;: true,
    &quot;experimentalDecorators&quot;: true,
    &quot;emitDecoratorMetadata&quot;: true,
    &quot;baseUrl&quot;: &quot;.&quot;,
    &quot;outDir&quot;: &quot;./dist&quot;,
    &quot;rootDir&quot;: &quot;.&quot;,
    &quot;paths&quot;: {
      &quot;@/*&quot;: [
        &quot;*&quot;
      ]
    },
    &quot;strictNullChecks&quot;: true
  },
  &quot;include&quot;: [&quot;./**/*.ts&quot;],
  &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;dist&quot;]
}</file><file path="be/types.ts">import type { AGENTS, AGENT_TOOLS } from &quot;@/ai-agents&quot;;
import type { User } from &quot;@supabase/supabase-js&quot;;
import type { calendar_v3 } from &quot;googleapis&quot;;
export type EventParametersProps = {
  summary?: string | null | undefined;
  description?: string | null | undefined;
  start?: calendar_v3.Schema$EventDateTime | undefined;
  end?: calendar_v3.Schema$EventDateTime | undefined;
};
export type UpdateCalendarCategoriesProps = {
  calendarName: string | null | undefined;
  calendarId: string | null | undefined;
  calendarColorForEvents: string | null | undefined;
  accessRole: string | null | undefined;
  timeZoneForCalendar: string | null | undefined;
  defaultReminders: calendar_v3.Schema$EventReminder[] | undefined;
};
export type AuthedRequest = Request &amp; { user: User };
export type GoogleIdTokenPayloadProps = {
  iss: string;
  azp: string;
  aud: string;
  sub: string;
  email: string;
  email_verified: boolean;
  at_hash?: string;
  name: string;
  picture: string;
  given_name: string;
  family_name: string;
  iat: number;
  exp: number;
};
export type PendingConflictConfirmation = {
  eventData: {
    summary: string;
    start: { dateTime?: string; date?: string; timeZone?: string };
    end: { dateTime?: string; date?: string; timeZone?: string };
    calendarId: string;
    calendarName: string;
    email: string;
    location?: string;
    description?: string;
  };
  conflictingEvents: Array&lt;{
    id: string;
    summary: string;
    start: string;
    end: string;
    calendarName: string;
  }&gt;;
};
export type PendingEmailChange = {
  newEmail: string;
  expiresAt: number;
};
export type SessionData = {
  chatId: number;
  firstName: string | undefined;
  username: string | undefined;
  userId: number;
  codeLang: string | undefined;
  messageCount: number;
  email: string | undefined;
  lastProcessedMsgId: number;
  agentActive: boolean;
  isProcessing: boolean;
  pendingConfirmation?: PendingConflictConfirmation;
  googleTokens?: TokensProps;
  pendingEmailVerification?: {
    email: string;
    expiresAt: number;
  };
  lastActivity: number;
  pendingEmailChange?: PendingEmailChange;
  awaitingEmailChange?: boolean;
  awaitingBrainInstructions?: boolean;
  brainInstructionsMode?: &quot;append&quot; | &quot;replace&quot;;
  lastAgentResponse?: {
    text: string;
    sentAsVoice: boolean;
    timestamp: number;
  };
  pendingReschedule?: {
    eventId: string;
    eventSummary: string;
    calendarId: string;
    suggestions: Array&lt;{
      start: string;
      end: string;
      startFormatted: string;
      endFormatted: string;
      dayOfWeek: string;
      reason: string;
    }&gt;;
  };
};
export type TokensProps = {
  user_id?: string | null;
  email?: string | null;
  timezone?: string | null;
  display_name?: string | null;
  first_name?: string | null;
  last_name?: string | null;
  avatar_url?: string | null;
  access_token?: string | null;
  refresh_token?: string | null;
  scope?: string | null;
  token_type?: string | null;
  id_token?: string | null;
  expires_at?: string | null;
  expiry_date?: number | null;
  refresh_token_expires_at?: string | null;
  is_valid?: boolean | null;
  provider?: &quot;google&quot; | &quot;github&quot; | &quot;telegram&quot; | &quot;whatsapp&quot; | null;
  is_active?: boolean | null;
};
export type UserRecord = {
  id: string;
  email: string;
  display_name?: string | null;
  first_name?: string | null;
  last_name?: string | null;
  avatar_url?: string | null;
  timezone?: string | null;
  locale?: string | null;
  status?: &quot;active&quot; | &quot;inactive&quot; | &quot;suspended&quot; | &quot;pending_verification&quot; | null;
  email_verified?: boolean | null;
  last_login_at?: string | null;
  created_at: string;
  updated_at: string;
  deactivated_at?: string | null;
};
export type OAuthTokenRecord = {
  id: string;
  user_id: string;
  provider: &quot;google&quot; | &quot;github&quot; | &quot;telegram&quot; | &quot;whatsapp&quot;;
  access_token: string;
  refresh_token?: string | null;
  id_token?: string | null;
  token_type?: string | null;
  scope?: string | null;
  expires_at?: string | null;
  refresh_token_expires_at?: string | null;
  is_valid?: boolean | null;
  last_refreshed_at?: string | null;
  refresh_error_count?: number | null;
  provider_user_id?: string | null;
  created_at: string;
  updated_at: string;
};
export type UserCalendarRecord = {
  id: string;
  user_id: string;
  calendar_id: string;
  calendar_name?: string | null;
  is_primary?: boolean | null;
  is_visible?: boolean | null;
  access_role?: &quot;owner&quot; | &quot;writer&quot; | &quot;reader&quot; | &quot;freeBusyReader&quot; | null;
  timezone?: string | null;
  background_color?: string | null;
  foreground_color?: string | null;
  default_reminders?: unknown | null;
  notification_enabled?: boolean | null;
  sync_token?: string | null;
  last_synced_at?: string | null;
  created_at: string;
  updated_at: string;
};
export type TelegramUserRecord = {
  id: string;
  telegram_user_id: number;
  user_id?: string | null;
  telegram_chat_id?: number | null;
  telegram_username?: string | null;
  first_name?: string | null;
  language_code?: string | null;
  is_bot?: boolean | null;
  is_linked?: boolean | null;
  pending_email?: string | null;
  last_activity_at?: string | null;
  created_at: string;
  updated_at: string;
};
export type ConversationRecord = {
  id: string;
  user_id: string;
  source: &quot;web&quot; | &quot;telegram&quot; | &quot;whatsapp&quot; | &quot;api&quot;;
  external_chat_id?: number | null;
  title?: string | null;
  summary?: string | null;
  is_active?: boolean | null;
  message_count?: number | null;
  last_message_at?: string | null;
  archived_at?: string | null;
  created_at: string;
  updated_at: string;
};
export type ConversationMessageRecord = {
  id: string;
  conversation_id: string;
  role: &quot;user&quot; | &quot;assistant&quot; | &quot;system&quot; | &quot;tool&quot;;
  content: string;
  sequence_number: number;
  tool_calls?: unknown | null;
  tool_call_id?: string | null;
  metadata?: unknown | null;
  prompt_tokens?: number | null;
  completion_tokens?: number | null;
  created_at: string;
};
export type MessageImageData = {
  data: string;
  mimeType: &quot;image/png&quot; | &quot;image/jpeg&quot; | &quot;image/webp&quot; | &quot;image/gif&quot;;
};
export type userAndAiMessageProps = {
  role: &quot;user&quot; | &quot;assistant&quot;;
  content: string | undefined;
  images?: MessageImageData[];
};
export type TOOLS = keyof typeof AGENT_TOOLS;
export type AGENTS_LIST = keyof typeof AGENTS;
export type DayOfWeek =
  | &quot;sunday&quot;
  | &quot;monday&quot;
  | &quot;tuesday&quot;
  | &quot;wednesday&quot;
  | &quot;thursday&quot;
  | &quot;friday&quot;
  | &quot;saturday&quot;;
export type InferenceType =
  | &quot;travel_sandwich&quot;
  | &quot;work_session&quot;
  | &quot;meal_break&quot;
  | &quot;standard_gap&quot;;
export type GapResolution =
  | { status: &quot;pending&quot; }
  | { status: &quot;filled&quot;; eventId: string; filledAt: Date }
  | { status: &quot;skipped&quot;; skippedAt: Date; reason?: string }
  | { status: &quot;dismissed&quot;; dismissedAt: Date };
export type InferredContext = {
  type: InferenceType;
  location: string | null;
  confidence: number;
  suggestion: string;
  metadata?: Record&lt;string, unknown&gt;;
};
export type GapBoundaryEvent = {
  eventId: string;
  summary: string;
  timestamp: Date;
  location: string | null;
  calendarId: string;
  htmlLink: string | null;
};
export type GapCandidate = {
  id: string;
  userId: string;
  start: Date;
  end: Date;
  durationMs: number;
  durationFormatted: string;
  precedingEvent: GapBoundaryEvent;
  followingEvent: GapBoundaryEvent;
  inferredContext: InferredContext | null;
  resolution: GapResolution;
  detectedAt: Date;
  resolvedAt: Date | null;
};
export type SupportedEventLanguage = &quot;en&quot; | &quot;de&quot; | &quot;fr&quot; | &quot;he&quot; | &quot;ar&quot; | &quot;ru&quot;;
export type GapRecoverySettings = {
  autoGapAnalysis: boolean;
  minGapThreshold: number;
  maxGapThreshold: number;
  ignoredDays: DayOfWeek[];
  lookbackDays: number;
  minConfidenceThreshold: number;
  includedCalendars: string[];
  excludedCalendars: string[];
  eventLanguages: SupportedEventLanguage[];
  languageSetupComplete: boolean;
};
export type GapCandidateDTO = {
  id: string;
  start: string;
  end: string;
  durationMinutes: number;
  durationFormatted: string;
  precedingEventSummary: string;
  precedingEventLink: string | null;
  followingEventSummary: string;
  followingEventLink: string | null;
  suggestion: string | null;
  confidence: number;
};
export type GapAnalysisResponse = {
  gaps: GapCandidateDTO[];
  totalCount: number;
  analyzedRange: {
    start: string;
    end: string;
  };
  settings: GapRecoverySettings;
};
export type FillGapRequest = {
  summary: string;
  description?: string;
  location?: string;
  calendarId?: string;
};
export type UpdateGapSettingsRequest = {
  autoGapAnalysis?: boolean;
  minGapThreshold?: number;
  maxGapThreshold?: number;
  ignoredDays?: DayOfWeek[];
  lookbackDays?: number;
  minConfidenceThreshold?: number;
  eventLanguages?: SupportedEventLanguage[];
  languageSetupComplete?: boolean;
};
export type GapAnalysisOptions = {
  settingsOverride?: Partial&lt;GapRecoverySettings&gt;;
  includeSkipped?: boolean;
  forceReanalysis?: boolean;
};
export type GapErrorCode =
  | &quot;GAP_NOT_FOUND&quot;
  | &quot;GAP_ALREADY_RESOLVED&quot;
  | &quot;CALENDAR_ACCESS_DENIED&quot;
  | &quot;EVENT_CREATION_FAILED&quot;
  | &quot;INVALID_TIME_RANGE&quot;
  | &quot;SETTINGS_VALIDATION_FAILED&quot;;
export type UserRole = &quot;user&quot; | &quot;admin&quot; | &quot;moderator&quot; | &quot;support&quot;;
export type UserStatus = &quot;active&quot; | &quot;inactive&quot; | &quot;suspended&quot; | &quot;pending_verification&quot;;
export type AdminUser = {
  id: string;
  email: string;
  first_name: string | null;
  last_name: string | null;
  display_name: string | null;
  avatar_url: string | null;
  status: UserStatus;
  role: UserRole;
  timezone: string | null;
  locale: string | null;
  email_verified: boolean | null;
  created_at: string;
  updated_at: string;
  last_login_at: string | null;
  subscription?: AdminUserSubscription | null;
  oauth_connected?: boolean;
};
export type AdminUserSubscription = {
  id: string;
  plan_name: string;
  plan_slug: string;
  status: string;
  interval: string;
  current_period_end: string | null;
  ai_interactions_used: number;
  credits_remaining: number;
};
export type AdminDashboardStats = {
  totalUsers: number;
  activeUsers: number;
  newUsersToday: number;
  newUsersWeek: number;
  newUsersMonth: number;
  activeSubscriptions: number;
  totalRevenueCents: number;
  mrrCents: number;
};
export type SubscriptionDistribution = {
  planSlug: string;
  planName: string;
  subscriberCount: number;
  percentage: number;
};
export type AdminUserListParams = {
  page?: number;
  limit?: number;
  search?: string;
  status?: UserStatus;
  role?: UserRole;
  sortBy?: &quot;created_at&quot; | &quot;email&quot; | &quot;last_login_at&quot;;
  sortOrder?: &quot;asc&quot; | &quot;desc&quot;;
};
export type AdminUserListResponse = {
  users: AdminUser[];
  total: number;
  page: number;
  totalPages: number;
};
export type AdminAuditLogEntry = {
  id: string;
  action: string;
  admin_user_id: string;
  admin_email?: string;
  resource_type: string;
  resource_id: string;
  old_values: Record&lt;string, unknown&gt; | null;
  new_values: Record&lt;string, unknown&gt; | null;
  ip_address: string;
  user_agent: string;
  created_at: string;
};
export type AdminPayment = {
  id: string;
  user_id: string;
  amount_cents: number;
  currency: string;
  status: string;
  description: string | null;
  created_at: string;
  user_email?: string;
  user_name?: string;
};
export type UpdateUserStatusRequest = {
  status: UserStatus;
  reason?: string;
};
export type GrantCreditsRequest = {
  credits: number;
  reason: string;
};</file><file path="be/Untitled-2025-08-03-0213.excalidraw.svg">&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt;
&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot; &quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;&gt;
&lt;svg version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 16887.31161813197 22531.95463094909&quot; width=&quot;16887.31161813197&quot; height=&quot;22531.95463094909&quot; filter=&quot;invert(93%) hue-rotate(180deg)&quot;&gt;&lt;!-- svg-source:excalidraw --&gt;&lt;metadata&gt;&lt;!-- payload-type:application/vnd.excalidraw+json --&gt;&lt;!-- payload-version:2 --&gt;&lt;!-- payload-start --&gt;eyJ2ZXJzaW9uIjoiMSIsImVuY29kaW5nIjoiYnN0cmluZyIsImNvbXByZXNzZWQiOnRydWUsImVuY29kZWQiOiJ4nOy9WVdcIu2WLXx/flx1MDAwNeP9bsuop2/q5lxm7Pu+P1nDgYKKXCIoYFuj/vs3XHUwMDE3Nlx1MDAwNMRcdTAwMTNcdTAwMTCRkkq+4t47d6ZAXHUwMDEwzVprztX/z/8pXHUwMDE0/mk/31b++a/CP5Wns1KtWm6WXHUwMDFl//lcdTAwMGb6/UOl2ao26nhJdP7datw3zzrvvGy3b1v/9Z//2f1EdNa4ef1UpVa5qdTbLbzv/+HfhcL/dP7EK9UyfbZaXrZLe2rtqe5v61fbrdtcbuOi89HOm95P5rxZqXycSueVJ/yaM+FdxDWzijthuFdcdTAwMWYvP+PlKW6UkVx1MDAxMdPWKYFcdTAwMTe9/3j5sVpuX9JcdTAwMTGEXHUwMDEzkbJGa2+ZUJJ3j3BZqV5cXLbxXHUwMDFl9vGrUv2iRqejXCIrhcBHvXbGS9P9UKvdbFxcV2ZcdTAwMWG1RpNO+//jXHUwMDE1+k/3rE9LZ9dcdTAwMTfNxn29/PGedrNUb92WmrhL3fedV2u1nfZz59twp3FX/+n7joO3K+j/7rRP4UsvLuuVVqvnilx1MDAxYbels2r7uXMvu7+lM7xdKndcdTAwMWZa57dLu1x1MDAxN1xydrm3bq9cdTAwMGU2pnaXtu9P94q7/7y9/t/dU2+WbipL9HDr97Xax6+r9XKFntk/p3La9pxWvfx2Wj3vb+GB43dOWSdcdTAwMWSe3cdcdTAwMGIxOdTJX6836lx1MDAxZKHkXG5cdTAwMGbfMWm7J9CahTC2O0c9L9Vale5DoXOYi1x0avdi7m/LpdePcKu10Jp3XHUwMDA06eP1WrV+3X/mtcbZdeBbblx1MDAxYtW4XHUwMDFl0E/3b4XuM+n84+Pv//1cdTAwMWbBd0/5yFjnXHUwMDA1M1x1MDAxMG3NoFx1MDAwN/k+zlWkubOaXHQttVx1MDAxNNa5fJ+XMnLQXHUwMDFhz41cdTAwMTBMXG6n831cXLtcYjorXGZuqHdcXDGe8+J55DVzXHUwMDFhWs+d0lwi77WzSCpYXHUwMDBiXHUwMDAzy6CY5zbn572MtOPS0O2DXGaKnJ9cdTAwMTeaRzA4RjJm6Fx1MDAwMcqct577XGJnXHJRtIYppUzOj3tcdTAwMTFBXrRR2kqIUM6TV1x1MDAwNt+Ou2dcdTAwMWMunkO/cn49TjuyzFx1MDAxOMa998bnXHUwMDE0WyN8xKXHVUsnpMj75I03XHUwMDExlMZcYmuEgVXJeeet9pFjljnngTaKqXxcdTAwMWaHyERcZlwi67lg0Fx1MDAxOZ9TZ5zhuPNWSMmsxkFy3jrPVOS95FxcXHUwMDE55ulcdTAwMTg5Py5dXHUwMDA0rMOjXHUwMDEzXHUwMDEyoi/yaqxcdTAwMTWRVXh81mkpY1x1MDAxNjTbx1x1MDAwMU5cdTAwMTBcdTAwMWInrXdcdTAwMTJCr/NqLOQ9XCJDYzxcYoOQeYWeM81cIm49LIfA9+e9eM6gNFpcdTAwMWGcXHUwMDAxnXz+jztcdTAwMDVcdTAwMTJcdTAwMDN15U47XHUwMDA2XHUwMDE0yvl5qGmkSG2E0tLiZuT9PFx0rlx1MDAxN87gyVufU+E5XHUwMDE3ePRWcC2ZXHUwMDAyVzJ5r55LMDTNXHUwMDE5rJWUhuf+emkj4ZmWXG5qXHUwMDAznpj780pEXFzAWCnFrTP5P25cItg5XHUwMDEyOme5srmfXHUwMDFk7KWjm69gMYTN/+y1iUCELHDCQlx1MDAwNPJ/vzFcdTAwMTH4gTHgXHTAjPyftzzixiqovFB5XHIuPm1cdTAwMDBWXHUwMDA2YCeMhVxu5JZcXKcjIFx1MDAxNYiO11xcsvyf9zqSRnNcdTAwMDOeLyzPLTyCaZh8xZzRsD2G50RcZnxcdTAwMWWI4yQ+XGbMwVHy3j9cdTAwMDGeXHUwMDA3xGBcZn/gXHUwMDFmPPfnhVx1MDAwMtdcdTAwMTAw21BcdTAwMDPDbV67iU9GXHUwMDAyelx1MDAwM8VcdTAwMDORV7mlV0hYPoczt1x1MDAwMFxcZ/J/v5JcdTAwMTFYXHUwMDEyXHUwMDFjRFx1MDAwYsJgc+OGUC7SRFRcdTAwMWNzTLHcllx1MDAxM+xcdTAwMWGYXHLDXHUwMDBili7Ifcj9eVx1MDAxN1x1MDAxMTl3INvK6LyMg4PlRFBcdTAwMDKpPDDIWp3/81x1MDAxNkzbkeGj25jb+lx0gn1vjfSMqHp+/bE2MtIyXHUwMDEwXHUwMDE3wyTL//1p3v2IP/9/+o7zz21cdTAwMTMu7T3+6HUnW9Wb+1x1MDAxYVx1MDAxY8rNt5fxart53/VcdTAwMTFrpVZ7pnFzU23D6dwkh/HNuey84X9f39dcdTAwMTdBUazRfplZPKwsl+Xt4kN55eXxeCdrXHUwMDA0hYAlYuA3lpDKuY9cdTAwMWL8XHUwMDE2QIF7RszJOGvJW+hSl49cYlxuvEd4U5BPXHUwMDA2esBhKD7e8Vx1MDAxMUDh3kVcbs5cdTAwMDLUSVtcdTAwMGZcdTAwMTTpfsskojKaiMpcXPaIimK4vS5cdTAwMTA6oYiK4rr/1+9cdTAwMTFcdTAwMTVgXHUwMDE5J1xuqWT3XGb+TSGVnndPqchJb5RcdTAwMDL1sEw6p4d9vPNcdTAwMDH4Vlx1MDAxMpIuNOs1XHUwMDE1r+FcdTAwMWFcdTAwMGIjXHUwMDA2XHUwMDA3XG6qpodcdTAwMWVuYHznLXyjjYZl9VrCMVx1MDAxOXY87iNJcVD4bvDcXHUwMDE50+6TXHUwMDA3XHUwMDA0ssP756BcdTAwMTXWe9bPXHKmOt9cdTAwMDd7wcC8cFRcdTAwMTiXoTfQRVx1MDAxMl+tKCxFp9F7PFx1MDAxMFx1MDAxMVx1MDAxOFx1MDAxN5BAL611uINu2PFgukHZ4Ooq36F/vcd7XHJgwSdg8K5wwXboXHKEXHUwMDBiXHRcbuG4Zlx1MDAxMlx1MDAwZZXq5VJTIFx1MDAxYVprh5fxhdL5oVx1MDAwZphbXHUwMDE1XHSwMm1w9zRErff8jIg8+Dp8XHUwMDE2XGJcdTAwMGI3YvjzXHUwMDEwNuqYV1x1MDAwZjMroN89XFxjXG5AXG5cdTAwMGbCaGvxfcozMfR4jkVwl63huFZv++JMU95cdTAwMDDYKXiFXHUwMDEzXHUwMDA0TVx1MDAxMENcdTAwMWZcdTAwMDfuSlx1MDAwNIyA+68sOcS9XFyEqC5w5oPqej70eK9xLE5cImNcdTAwMDA9ffIsdaTxLZ3gpMM1XGY9P6V0XHUwMDA0595DWFxm7lx1MDAxNOs7nvaRhe+Om2tcZszCcP1QzuFcdTAwMGVcdIe75MG8fG+IdOrt8ePeasFgXGLlsONpPF/NnIfwXHUwMDE57nmvXHUwMDFinYxJXHUwMDBlPVxcXHUwMDFhbL9cdTAwMWSuXHUwMDFmsf/c8b6TO9Wfdyrlabe6Wr87v127nF08uFx1MDAwM6Rm5U4wa5GEXHUwMDExsVx1MDAxZd45jyHnW/KJXHUwMDEze4dESe1cdTAwMDWFT1x1MDAxMtxJcVx1MDAwM6tcdTAwMDZ6XHUwMDA1/SGZ6iYrPrhcdTAwMTNcdTAwMTA5itk903VcdTAwMDEn3GlE3Gk1O3eCtVx1MDAwNopcdTAwMTJbXHUwMDBlkifP+n/9Tp68oPifjNGcfy93SjChT1EnXCJC8F41hY6F80NhtSexxYFcdTAwMDP/kXhcdTAwMTXPwVx1MDAxMVx1MDAwYlx1MDAwM1xyXHUwMDFhXG5cdTAwMGJJXHUwMDFl87njvfJcdTAwMGVvwDo8d30piH6SM9zqdvJosLi2XHUwMDEzm+c9Vvf1q1x1MDAwMPhC4sRcdTAwMTm856Gks1x1MDAxN9Rlz+Fev0tcdTAwMDG9rVx1MDAwNEHEQYfeO1x0XG5hYCDxbEGatOh5sK+MRFm8oFx1MDAxNc59+KNcdTAwMTjImFx1MDAwMIuRwk1cdTAwMDB5UI6yY0NFXHUwMDA1wlx1MDAxNnlQTuuA0Fx1MDAxMDHZXHUwMDAz+W8nXHUwMDBmyId9XHUwMDA2c1x1MDAxZk7AlIlgoDnOXHUwMDAxNlx1MDAxZKa9V1I0iyCTcLy86bDE4fxcdTAwMGJcZkZcbk1cXFxiWqF7Y1f4lkg6mFx1MDAxNMgkPZLhgC9JVnFuXHUwMDAyXHUwMDE2XHUwMDAzksV7XHUwMDEzd9zJXGKkXHUwMDEwj1x1MDAxY0hcdTAwMDZcIqGGnt9gPvdcbviMXGIzXHUwMDFjRvCgobInifFcdTAwMWFwNlx1MDAwNUG1Qtue4+FQXHUwMDExJYHgZuBO4EuHXHUwMDFmj+TLSbpcdTAwMTRB6U7XezxuI1x1MDAwYlmXOD3Iplx1MDAxZfp0JdxcdCmkgLZBn1x1MDAxY+/N2lx1MDAwMn4jw6HSjmIkhmU4nI3A6q2EL6aIqPZcdTAwMWWtn8pcdTAwMGY9XHUwMDFjJTZxv1x1MDAwMUFgqrxXM3DWXHUwMDExrKd1xFx1MDAwZbSBxFxmNcjQJdBSrzRcdTAwMTSXm/7D4dSlJbTD0XxcdTAwMDZPLJXmdFx1MDAwZZcgOH/scN/JNJ92blx1MDAxN1x1MDAxZlx1MDAxYstTL0tSPq1cdTAwMTdnz3fKVZ6VaVx1MDAxMrWLXGLVYD2EXHUwMDE1sTqmN6ZcdINcdTAwMWR1kntcdTAwMTSjhlx1MDAxNCaYJqi3iWTHXHUwMDAwwVx1MDAxOYKj9Vx1MDAxMcmOUc1Uj/6HU00+c7vHyzvstL3/sF5cXDf3jev7l9+imjs5qCacJNhcdTAwMDdjwnG6biqrn2rCXHUwMDE38WAj9l9KNVx1MDAwN5LFoZ/+XFzZ1GAyOPTj0kVcdTAwMTaPVcA/hpbJnFx1MDAwNSBcdTAwMDaIRUlYUCYuXHUwMDA0y5nL41x1MDAxY74qLLqEhVBUuJXv01x1MDAwNuRBKVx1MDAwMZBcdTAwMDZcdTAwMDNTRvV8ef8jXHUwMDE5zlxmk5CUSvlcdTAwMDE0Q2NzoJEwf1x1MDAwZbdcdTAwMTY2UnHuXHUwMDAyJP09timGU1x1MDAxMUWhPpxcdTAwMDGeMOycYL2hzVchgCn1nZdwgsOOp4lcdTAwMTlcdTAwMWFwauZcdTAwMWP4blx1MDAwZlxcJWzuUDGgilZQXGZcdGhWuHfqc4ezINVgmXiAeLjc8k9cdTAwMWXutUjJOFx1MDAwM2LlwG7051x1MDAwZecp/yvAqlxmwJ45Zj55OHBCXHUwMDAwXHUwMDE3PqAgXHUwMDA29pNHXHUwMDAzpuJiqS5cdTAwMDAuXHUwMDA3PFx1MDAxOOM+fbxcdTAwMTSM/urjfSdR2tya2nHXU/Ol+lXlvnx2vcVfzlx1MDAwZjJcdTAwMTMlj0tWIM7wR+B3+i5Ivlx1MDAxMSWQ9Fxi1lx1MDAwYlx1MDAxN0zaI7tcdTAwMWPinSi9uSF4TXhcdEetS6W66czeWHCsXG5xwpNGxJOOc/AkIZlTnHUjKT08qavkiVxucbBlKiz/XHUwMDExMbmp3EG510+QXHUwMDA0XHUwMDFiL1x1MDAxY+d9XHSRXHUwMDA0kVx1MDAxYXq8V9yEW+ugXHUwMDE4VFnUY46mXHUwMDEysDpcdTAwMTSm+4rQeW9F7FR+gzmlZSSkJlx1MDAxNFTKwS3vveRX+lx1MDAwNpjUVFxmQU0nQ1x1MDAwZvjK2bzgxjtJgbjeZ9KT8Vx1MDAxNHJ4vO+18lx1MDAxZFx1MDAwNkhcdTAwMTigtbay95J7y+pFhrBGf97N9lbmvl2AxLMme4pbOfyAXHUwMDFhglx1MDAwM9NLUUnwTdZcdTAwMWKAnaK4XHUwMDA355SJ1rCwXHUwMDE5biGnPFx1MDAxYeDaglJYQdXDvWLDeGQk5FnBXHUwMDAyXGLo3nBBXHUwMDFjkinlXHUwMDE0Xlx1MDAwMHlh3lx1MDAwMlx1MDAwNMBCh/K7KUGJIKlcdTAwMDUpXHUwMDA0w9n0XHUwMDFk8DWSKHAjKdhph7LjKXL34SU4x6ArwCzTl1t/bWCQ4EM4Szc8NFx0TZFcdTAwMTG0XHUwMDE4ZIB1ikB7c7m5Y5NT0NRcYmZcdTAwMDTmXHUwMDA09Fx1MDAxY1Dad35cdIBcdTAwMWN+wDTY/fpcdTAwMDN+J/k52z5dvLi6uV5dZ839u9ODs0tzuJo5XHUwMDFmSV5cdTAwMWFovFDSaVx1MDAxNyv1fSc/Vlx1MDAwYpAja72ykINkM5xcIjmw1Fx1MDAxOFx1MDAwMnupcHdcdTAwMDLcpz/P3GVcdTAwMTdcdTAwMTPuM1x1MDAxYe5zkYP7KFx1MDAwZlx1MDAxN9k6XHUwMDFl5j6xfHI/97FUyqVhUf+d3OetnonyXHUwMDA1XHUwMDFl6Ovy9tokXHUwMDEycfk+3mFcbto4YaVllLXI+fWvqMtcdTAwMWRUWVFCpFx1MDAwN/JyJkRfXHUwMDExkoItcFx1MDAwM1xyo1x1MDAwMEiPXHUwMDFi2HOlIGZcdTAwMTlcdTAwMTB+YP9cXKKMK1x1MDAwMzFMsyn008tAssC7Jlx1MDAxN1x1MDAxMCaOkkWMulx1MDAxNnruXk+KXHUwMDEzpnD4w1x1MDAxY1x1MDAxY1xcSpSFZYAmXHUwMDFiOepcdTAwMDOixlx1MDAwMKd7wTM/XHUwMDE2vyVrcHdAL1hfKqkvZ1xuUjj8eINcbqGSz2r48dJQ5auP953AvmdPysszrHpzfS5W75bmXHUwMDBmjm5UXHUwMDAw2NuVp3YvqFPrXHUwMDE5iyjFSn5cdTAwMDR8oySqU8iNsoicKHIyoqE9+KfTcFrgvIBcdTAwMDB2XHUwMDFk4lx1MDAwZlT3ktMjl9orKraXSVDvwt+/XHUwMDBmxHOhcz07Olx1MDAwYuZcclxmdCxYXHUwMDFlR2ejU3vXYWikgup1XHUwMDFm9XeDc0cucVx1MDAwM2ZcdTAwMWH1drVx36o9XHUwMDE3atVWu1Kv1i9cbueNZqFaP2vc0D9+1Uv1cqFx375o0D9vcHtKXHUwMDE30LDuPcYhdqovdJ1wXHUwMDFlyFKDpFx1MDAxMzjFWvXpPfOlm2qNXHUwMDFlm+45i2KtekH3759a5TwmTbiD7epZqfbxcrtx2331XGbHK1XrlWby2Taa1YtqvVTbXHUwMDFk3Vx1MDAxNZbu243tSuv1XHUwMDFhey1cdTAwMDfOYfGDSkdCXHUwMDBmsFx1MDAxOK2T6ePiyp05qKvt+cXbqUMzc7GYxWLAqbFEwTXX8Ip5t4jn1WBcYoNbXHL/l1x1MDAxY1JYeJusStRwfKk4XHUwMDAxRpaQTVx1MDAwNlxmhvFcdTAwMGUmXHUwMDA15F5K5VSstlwii8Hwlp+Jv9lgfEDKP61lmIbd6nFp16w/7K2uV1fay+XfYv232e1cbm47XHUwMDE1XHUwMDA0qVBcclwiXHUwMDFj84S1eTcrXHUwMDEwXHUwMDA3XHUwMDAz6lx1MDAxOPvcKMyKYZ1AO4tcdTAwMGJ5XrOyi7O4wD0qrDagUZtccjym+kXQZGg47sxZXHUwMDA16IfjY9VY2Iwhpz9cdTAwMWF7sFTfK+3Wpu7k+WP5bvqs7nb800bSXHUwMDFlNCtn7VdcdTAwMWTsNVxuXHUwMDE2JFx1MDAwMm5cdTAwMTBcdTAwMDeBlUzxvlxuXHUwMDEyXHUwMDFhXHUwMDA3QVx1MDAxNFx1MDAwME5cdTAwMDWnLjCftFxuIFx1MDAxYdKDineaXHUwMDAxuYj1XHUwMDAzdM2CpaIw6Vx1MDAxOKN693i77Y/gXHUwMDExf8IsNMNm4X+63/X24N/9hP9Nslx1MDAxMCckg6efXGJcdTAwMDbQp5hOjVx1MDAxMVA7XHUwMDBiXHUwMDE4NFx1MDAxZm2712+Yi1x1MDAwMUpxsFxc0q2t0sH0gt+YeihuLVxcnO1XMytcdTAwMDV8OXIlaC6A5yC+sk8pqDaV2ndJO1x1MDAxY+vmsrs6XHUwMDAx/FRcdTAwMTHwlu6xgEdcdTAwMTmCSlx1MDAxYz6CLyepVFNylUcnKvApJZ/oRK9O3H9aJzjFZSj6XHUwMDFmYuYgo+k5Q5hQkFwiPuKc4WiVonmz/HJYOZ0/a6mdm53lKXu58LiVhTlarm1kPLOCmtW7XHUwMDA1uO9cdTAwMTihuI7gQeJsJZ53IHdupYmgTpI6YihrXHUwMDE46GeBXHUwMDFiXHUwMDFhXHUwMDAxQTzlXHUwMDAxXHUwMDFkNGaiXHUwMDBln1WHx+zMsdNccsmt8EHqaGXi193eX8eV1kyN1iVcdTAwMWRcdTAwMDV3nGs24Z2tVcvlWuVcdTAwMTFcdTAwMGY+SFx1MDAxYpXhkVWSyoE9tWl048HfyVx1MDAxYtNPfTSUkZ3dNuaOLnfd3IJd3ZpfX9hu8ufs6KjhnlNcdTAwMTCX0Zwu7VRfMY1QjMORNOT+UaF1N7ndxUeFj1x1MDAxM1+nPFx1MDAxMPOBmmONXHUwMDE3I8dpqpFVWrBkyXG6OYDjXHR3Z2JcdTAwMGV6zcHT59FRMeak5ixUeayESLVcdTAwMTJKUZWZtePMXHUwMDE4+bS8vT1d3Z3ip63yrTi/brdcdTAwMGb2M4GjXHUwMDAxj3OMymd8XHUwMDA3XHUwMDFm+7VBXHUwMDFiXHUwMDE2UVLGc691Ulx1MDAxNyh2XHUwMDBison3UV5fmEByVVGNLtim95a6ybSZaMMntWEmR1TFMbi9IOkhoec6tbOTJnRcdObj9WfjXHUwMDAyjTu4Wpxp4WYwOEpcdTAwMWGqXGKltzSfzjmlx1x1MDAwMlx1MDAxY1x1MDAwN538aOBxevfIPN0vqrX1mbNGyU097K7ohezw6JWJqFxuzEmwXG5cdTAwMWK3eq9cdTAwMDZBSq1cItxQRqOXTKD7m0tHs+mYhr1lVJtcdTAwMWWwXGLUo6go9cmpeCjW2DPcIIhzX1FqYlx1MDAxMHpccsLCp+FRUC5Oc1x1MDAxYvJcdTAwMWRVXFx5+lxyhdZKwfR/O4VcdTAwMWWgXHUwMDEyU3zm4aF0eHzytHB/Xz15MJXZs1x1MDAwMGNMoiOwx3RqXHUwMDBmXHUwMDA1STOX/egonWWUU1x1MDAxMNT0XHUwMDFjj1x1MDAxZH4kXHUwMDFkhPKRdVx1MDAxNKiSkilcdTAwMTNwXHUwMDFkceCIXHUwMDFjR0eVZ3Dg8yRcdTAwMWQmylx1MDAxMFKG/ezwSD2GVDdcdTAwMWbkhLrb/JuER1x0di9GXWU9XG54nLlvtVx1MDAxYjeFj+h98b592YGbSm1cdTAwMDBWMipcdTAwMDI2VPNMjpHqedN35SyzXshocHP26mah4p6nXHUwMDE3XHUwMDFmZ49OjqvF1Z39pdnMuElcdTAwMTOII1xyQyio/N71ZyeFMVx1MDAwZV6nIzrCY8XDsYn9zPmIXHUwMDA2XHUwMDA2SKCuXHUwMDE2sWKFXHUwMDBmSyFcdTAwMDWlO1x1MDAwNIfPauG6hqpcdTAwMTTTTYU/k+ZUT0xFj6mY/TRsWlx1MDAxYbtcdTAwMWRcdTAwMWZjXHUwMDEwNyDGp7azXG5rPXlD324/XHUwMDA2aIRvrp/U72fnbm8v5o5KYu740e1dZnIqvVWR0a4zikDFmlnfYZOK0Z2iwlxy7lmsUj3mVlx1MDAwMnhcdTAwMDUlL6RQXCI+YKarXHKMXG6EhKF+Rlx1MDAxYU/mJ8rwOWXIMWxRcJgg41Uw+6Z8t7gugZtcZm6li7ujY1x1MDAwM5uNOp1rqY2zbVxy8y1pXHUwMDFjXHUwMDAzdSt7XHUwMDAxYy9AnU3Pu76vyGfIJYxcYiln92/XRH1r/7617uXF9dJcdTAwMDM7bWexXHUwMDBiTlx1MDAwYppe6Fx1MDAxZNXqc6P6i/40TTdcdTAwMDGP9ux1NF/XenZTk0xEkubX0NR9XHUwMDEzn+vZXHUwMDFk+KBpXHUwMDA0j9E0XHUwMDFmW9MkkuRcXNZ/c74+h8q7W5mHKoNzULNFKJREXHUwMDEz9FOhjlx1MDAxNjvEdyuMqu5PinhE8neSLE+dWtnCTqWJc1x1MDAwZWs601FnyLtlTFx01/OW78qvpJz1iMJH5bvyXHUwMDE0n1+UzevK1kxtdaNu1VRmXHUwMDFhTPs0lGFU4W1oJUm/glNuhUY9XG6He1x1MDAxYVx1MDAxZtbbrcdR3kcgXHKSXHUwMDFiXHUwMDFhu1x1MDAxOGrW4UzR9lx1MDAwMKfpPaDcXcGa6HeffqtPXHUwMDEzXFxcdTAwMWHKSVx1MDAxYn2SXHUwMDA1eET0VKqHXGatpya+0fchK0EjXHUwMDFkRsNwr1x1MDAxN19m3El9au+8VlnaK1fa6qk4k1x1MDAwNckgglRuyjuj2TSQyPVJOqNmR0tVabh9uE1JKDNUVMZcdTAwMWPNQWPcWVx1MDAxMSiy4TTnn1x1MDAxMWriwvFcdTAwMTeWJ1B6ztxcdTAwMTljP0fS80R9nJNeelx1MDAxYlx1MDAxZVx1MDAxNu5YaipcdTAwMTC011x1MDAxOVx1MDAwZcM26mHh4MTSulx1MDAxY0KdwLK9VqVZ2G7ct8OMlcJcdTAwMTPeXHUwMDE4yklcdTAwMGLaeKDGXCJcdTAwMWJcdTAwMTI66dHA2NzL1OrhXFy5crFg77f31Mz5ReWokkWzPS33sJ3+abg3rn8mXHUwMDE59Jr6sKhcdTAwMDHOS1x1MDAxZVx1MDAxYnT5oddcdTAwMGX0szPeUIrOKMNcdTAwMTGr9d9fZ55LrXVcdTAwMWWCaqxcdTAwMDBcdTAwMTFcck+xNelcdTAwMDRVUfe6MXzUSPV5pZ4p1Sr1cimXYo+HK5py4qNR7o3dzcvL6taUOF9VM1x1MDAwNy/H/v7x4TqTXHUwMDAzXG5OXHUwMDE5qdehsk5z0Vx1MDAxN5ji8FRMRPu88JJXKlTvYC1cdTAwMTXXalx1MDAxYdDORcj7XHUwMDA0N7Wcwd9cdTAwMDE3NSxfKeDfn8/Jpdwmu3Ir3EgtgoWtzKVcdTAwMTe2XHUwMDFh+KW8x9FcdTAwMTiNamtvYqNjPuN7QiMuoT0vlWExJ+pcdTAwMDGFUyU848pCtnjPm77ZXHUwMDE3XHUwMDFkfFx1MDAxNSOq+1P2ZfZwddncrO5cdTAwMWW2n+6najvyMLtnyqWMjOVaM5A/71x1MDAxM4RcdTAwMWSmOlx1MDAxMtRaj2dLsyZcdTAwMTKqT3mbyFx1MDAxOEPrTbVQJjTXnsZcdTAwMTFzIaUzXHUwMDEyuu/yxKR/XHUwMDE4sKcsS87jmVJFn1dMhILQXCK2lS7J4lx1MDAxOeg/7Yz8bsBcdTAwMWYg7VsrJ1x1MDAwN1d8+fhs/nH2avfoVl7V2z5cdTAwMTOBVZbTZkqGsyG62odxNDQq8kq8bqvlNinnioNcdTAwMDDTXHUwMDFjJlx1MDAxY4A4rlxyyLlcdTAwMTFcdTAwMTE8Ie1oeaWCXZ5cYnqqoLs8XGaWJrfp2GSMOM7Fm2z6JNp4mphcdTAwMTLXhHFhsFx1MDAwYpV2oVirXHUwMDE13lx0YbhlWvlcYsAmjKGh9LRcdTAwMDdmLLzTXHUwMDAx5z6iWOvJ7ja7OJzyS8dPbvf0rPYgXHUwMDBlXHUwMDAy07PTXHUwMDEwTcFT7Sy9klxu3iTrQzTvNY+Y9zSzqFx1MDAxM4xNKrq3nWn2XHUwMDEyZoAppnig5oDTo6FpXHUwMDFlqjNH3/Gf1Vx1MDAxM51P01NCUHkwTYCHSCrKXHUwMDBlYppNxzSp8XwsnJrvNlx1MDAwMVx1MDAwM+R91i1cdTAwMWSKXHUwMDFk/nR03TxbW1xcW2Qrgt9kwjQtXVx1MDAwNLtA+86kY7x/XHUwMDAwKmM0vV9762mRXHUwMDFmc1x1MDAwMb9N2FxiN0hJ+H5W8thcYt9Y14aOQNk6zaG03PRntfnmknSfXHUwMDAz05yhJbtGXHUwMDA2JXrQMC9lYXRk/EmNXHUwMDBiqM3Vy69zvf4rjGaKJttcdTAwMDDFJetcdTAwMTQ4j0U3f+icR4NiJ233uLJVvrpcdTAwMTZLTztsYetu6WE1gGIhpuppXHUwMDFhK8BHSCGV6ytcdTAwMDegtoXIS+edhMKaQJWQxJ02rDOTjGaQx1x1MDAxNklPmOpvaHUxh1bTgDRhZTJVQo9FyFSmyi25XHUwMDFkSoxhsJXoXlx0dK/y0Pm6LDxV9LzpXHUwMDFiaWrovEdU7FNcXJ5bvdt7auuN+/by1PaKmjlcdTAwMGbsXHUwMDEyTOWokjY6XHRcdTAwMGaHuzOytE/FrVwijkotuDBcdTAwMDYyUPAz4aij1fHpz1NUx+GlXG7ugmlcdTAwMTZcdTAwMWKrwutTfUszWrVcdTAwMTj5ouVRMtT9s/ptqTi7utncqqzUi/XTp8qmyIZlr1FcdTAwMTeOq2Tadtf8vlx0OqAnolx1MDAxOTPe4S2SXHUwMDA3XHUwMDA0XdDYb1x1MDAxYSHuqLDNXHUwMDA0ylx1MDAwMTRccvlnuMOKbK/VyZ2ZXHUwMDEzMX9cdTAwMTPzXHUwMDFjXHUwMDFkksRcdTAwMWQ8JXxDSFx1MDAxNn9S/YNkXHUwMDA041x1MDAxNE/+bmlcdTAwMGXi2M5t5ax6Xj17XHUwMDA1hTCWgVxccUHzNb1ktHlnXFywLO3cR4NntanKdePweGq55Vx1MDAwZfaOy7y9wOrNPHhcdTAwMDZyT9uNaTKqTMRcXPBL3FXarkj7XHUwMDAzY+1eXHUwMDEzPHt/4qNV9M93cDjPNCV/wnA2oPFROipijG0nXHUwMDFkQzy7bauar+mp59bMaouJMq/szJtseOZ4ZLSiRZNMxSdqv1xuOq47XHUwMDAyXHUwMDEzlux1xnJoXHS0i4QwXHUwMDFh/9XKx6Ypx/BM0cxcdTAwMWOtJLSJ1nfkquP8WWKeqzdDalx1MDAxMulwXHUwMDEyQZpcdTAwMDGbY5h3XHUwMDFhUPjtXHUwMDA0LVx1MDAwMWl7nUO+XHUwMDAyQuH0ubBUXHUwMDBlQ5qMpFx1MDAxMk7S4Fx1MDAxNpruMlx1MDAxNoGXQec+XHUwMDFhSCsun1x1MDAxZExdLTfEyzI/MU9cdTAwMTdzN7flh1x1MDAxY5CmRGQs1JiW4HHWV7NNK74jrY0zNGxZJiOrXHUwMDEzRFx1MDAxYq2qz39cdTAwMWHRaKxcdTAwMTFYbXhAs+Pp1a3w0D2TsdWzY4hoM1x1MDAwN62VZmV+/WamsXncrraW5s5OdjIhXHUwMDFhtVx1MDAwZXH4rrRF1Fxu0TfYXHUwMDAyv2eAI1x1MDAwMJWDXHUwMDA35mJDwz6ijU5HVEaIi1x1MDAxMVx1MDAxNMpgXHUwMDAxQdc8wstcZorAXHUwMDFkrSe3XHUwMDEzQU9cdTAwMTX0lJlcdTAwMTXhcKOAu2WCXHUwMDBiQWDxU2dcdTAwMDM7J7SzZvxcdTAwMDDt9SyGXHUwMDAzXHUwMDFhj2jataaB1Fx1MDAwNmxT9rzpm1x1MDAwMG3QuY9cdTAwMDbQ7u9Kal7ezZpzfbbw0q5eXVx1MDAxNE32VnxcdTAwMDCah6LSXHUwMDA2dytdYuAj1c9FVnjmrLbMTkKOf1xcz0eQXHUwMDE21yC1litcdTAwMTN00pxK57T4XHUwMDE0mVx1MDAwZfvtYZpcdTAwMDHi/rJ7e7k/3XhoN55brf2lnfb2zV1gJn7axCbaJFx1MDAxYnFnXGZgS9FutV5554yAXHUwMDBiJE9RXHUwMDE2XYlAIchcdTAwMWaubPxhnUiLn1x1MDAxNndqfXZcdTAwMTTlXHJJe2B1+keE3Smu9Xjzt1t1PH+ysKA3nlx1MDAxZS+exdXS7tPCznFcdTAwMGVh115FjNPma8WNTlY3akfdo1pZmj+hkizuj1v3XHUwMDFmJu1LnzfuNMtGXHUwMDExXHUwMDE2h8TdilRx7ywyt/FpOuMn7kczj1ubXHUwMDBmrbvaYr26uX96f7q2yTLNUKHxelx1MDAxNFx1MDAxZmNG0rpHr/urIyC9sPpMMmHxjphcInT9XHUwMDE1Ulx1MDAwNU/D/HBcZlx1MDAxYpo99pniiFx1MDAxZibnyzm8XHUwMDE1YWA9uOOh9lIp0odcdTAwMDJR17x2blx1MDAxYzvRZiuls3b1gVwiWfetlFlcdGNZXHUwMDFkkXrio3FV5vdPNjZgvpqzldnz5krleLm4d5VcdTAwMDPOXGaTkfOOWS5cdTAwMTWYXFxcdTAwMWZ385b2XHUwMDBlUtePkiCyXHUwMDEzNPvTWr7yaTRcdTAwMTPWXGLaXHUwMDA3XHUwMDFlTicl63pjhVHWXHQ53lx1MDAwNbznXHUwMDFiL1fb2353sWqcfJHlpdkzvZ5H2rmkaZg0vYdcdTAwMWF1XHUwMDEz2VPOI1x1MDAxMFjPabQ644Gk0kTcRyruq58nb4Z5XGJtPEFcdTAwMTiXd58+XHTMKkgm49+fbVx1MDAxYSDvtcXzx63y7U77pLF7d35y/GLWZTlcdTAwMWJ7s5xFsFx1MDAwNcq6ziaefjeFwSW3ympcdTAwMDV/zZgkeVx1MDAwM45Gyjlavmop9Fx1MDAxOahs/US5+lx1MDAwZlx1MDAxM/O17NxcckbFMm9kUJxluutccn/Uw+o48+2+d4K6UU1cclGfQrV+3vh7XG7WU057NLTtYWfvvlRuvcxcXO6tbanVk92zk7NSRrfMyEjSXHUwMDE2biG4NolcbiBlfGRcZji8XHUwMDE0Lj4w7EOx8XGvrCenl0hcdTAwMWZcdTAwMWJxzfpcdTAwMGZT7fXsqk0t++DS4e1YUqemRT0lXry34+eUbZbaZ5fZ/bHx6KpcZp30aJR6dXONr2q397h7xbb06trKkt3MtFx1MDAwNFx1MDAwNWgtTcSptJZcdTAwMWKq4etcdTAwMWLfTGvBaLmst1x1MDAwMi9cdTAwMWJcdTAwMWaY+jPpL1x1MDAxYqVWb2TXaug0binteFx1MDAwYiG28qn9ZdA95phcdTAwMWPD5PCkveztebz6nGtzu1x1MDAwYlx1MDAxYk9rfmVXs5WGnrrdP1x1MDAwYkRYXHUwMDAyw36IQ3OaiuRcdTAwMTgzrj+2Qi6kpjlcXJLRgvn4ou5cdTAwMThWXHUwMDFiXHUwMDFh4qfE63qGpEpcdTAwMGJcdTAwMDO1p+Aq73CB+MP4XHSL/3Ip9Waeelx1MDAwZqo28/GCh7hSs/QoirNwrWi234i12sBcdTAwMGb75Ea/t1E5mTb7XHQuI1x1MDAwM1x1MDAwZchcdTAwMWONmDaWjUUsdfgljKhGXyyLw+uFWnlpY/POm3Neb4jbpMqnhJmsJzCHXHUwMDE5huNNcJvIh8Pxjlx1MDAwNESMJvxxXHUwMDFk2vhpmI2EXHUwMDAyXHUwMDExXHUwMDAwnjvNXHUwMDAzXHUwMDE0nVshXCJHw4SYNYZmb+RQ/Fx1MDAxZjbmayus+LnGXCLQ8lYpkorfsVx1MDAwN+lcdTAwMDVgVFx1MDAxY8F8PLU4fkGmO1N8WV5tu+tz29y6bm1cdTAwMTbN1MpZXHUwMDE2gFx1MDAwM1x1MDAxN1x1MDAwNYBZ7qSjndbc9lx1MDAwYjqcnc6qLkXTfJRPNlDDNYhcdTAwMTRohIWp5Vx1MDAwNIJcdTAwMDFBh1x1MDAxN6ElfYPBXHUwMDExqHQph6D/MGd0O1x1MDAwN8J5KiVVgbHp/3RcdTAwMWGoU1x1MDAxMY7qQjyTY+iNXHUwMDBlnUDrXHUwMDAxaeBbxnO44jr2Zf/KXHS0u5tcdTAwMDdy5mr3qaHri2flo5aqXHUwMDFlb1x1MDAwNdQ6XHUwMDA1xFxmTao0VMhcIo2BXHUwMDA1S0yqVJ2yfFBcdTAwMWRcdTAwMDd6wJOZQXizdFx1MDAwMFx1MDAwYr313lNcdTAwMTlsUrelMMAwY2hcdTAwMGYyXHUwMDFjXG4zUe1U1d75PIYpS+vdgnNQyFx1MDAwZkiFMMG1gFx1MDAxN/PtfupcdTAwMDBZV2fVg+WzxrW/vZwxm1x1MDAxYnOrx/viPFx1MDAwYoSB2LpcYmfDfWdWvO3Pf3spXCLDXHL14VqnXHUwMDAyXHRw6VjkcPfwRoU3clx1MDAxOXDSgIIk39xRXtZLNlx0p6aK+W6eKlx1MDAxN9xL4FBScumxWJ2aKvFMcJpjOn5cYtbZMFdqXHUwMDE3Llx1MDAxYY1cdTAwMWWDXHUwMDFjQzFq8CCuXHUwMDA0p8xcdTAwMTmplFx1MDAxYotxy2knPlx1MDAxYSRz53tcdTAwMGbwQqdcdTAwMGZ98/qh8lxcXFx5vLlcYmh3XHUwMDFhknmnwCC9XHUwMDAxdVQ8sSmBXHUwMDA2XHUwMDE3Rlx1MDAxYcSA2qU1XHUwMDBm7dDkNtJOcVx1MDAwM3GjIYhcdTAwMDFccucgwlx1MDAxZU6bXHUwMDAzcVIwXHUwMDA3Ks/Kn1x1MDAxZqbieyMo2MRz4j2TuXq4a/pIL25ccvTef//QhFx1MDAwMdJ+Ol3xs0w0Zs5ezvY3/cL5g1x0XHUwMDA1XHUwMDFmQljmZWSp+Z+sn/fJIXXeRVTXYj0zjOvk8lx1MDAxYiFNRLtkhad26J71gd0kXHUwMDAybciijWdaU/DaTpZbpUt6rpUg8EpcdTAwMDRPXHUwMDE5vOh1aoeJXHUwMDEwRoqxLNlcdTAwMWOWRoCsWVx1MDAwNXeMKVx1MDAwNplcdTAwMWKP+Vx1MDAxZn8ujbB4+nB7MPsoymtn57O7MyDjq8VMO6At01wi0uSyKu+4S7STQeNpzKqnplxyYXxcdTAwMTK/4MBFnjthydGCXHUwMDE3XHUwMDFjXGKyTFx1MDAxOOrbOVxyV+o8Oq04c1x1MDAwZVY5XHUwMDE4Y3FcdTAwMDOihkqCtEg2hkq9XHUwMDAzXHUwMDA1K9zfXHUwMDE2mpWL+1opnPdcdTAwMWZPjpp65iNK/ldu+czazlH7Wlx1MDAxNS+brdnFwzPLcpBUXHUwMDFhRSnIj6SZLrZv7Y+3hkVMXHUwMDE56TSEQolcdEn901r++Z5RwamDXHUwMDBlTytUXHUwMDE4IIVP71x1MDAxOVx1MDAxNUzSSLCxXlx1MDAwZlBhj1ezrPXUNJdcdTAwMTfy4eHmaHXJXHUwMDA1Zn6E4MzxiKyD0VShZlx1MDAxM4PqvI40+Cu4JbNcdTAwMDFBl1x1MDAxMpqgraCGUiGcXHLFW3hcdTAwMDSSa2lLK+iuUDE/YVwi6H2CfpCjNFVTW1HY6fLpLdBcdTAwMTJAXHUwMDA2KPDfLs1hLKvWXHUwMDA3YplyYEZKcOlccr6Sj8dIn9RcdTAwMTNcdTAwMWZccpRVL1vmprq1U1nYeGqU9YkvXHUwMDE2j1x1MDAxNvJAmYhcdTAwMTTnhlx1MDAwNnd51o9kWsuIc1rg7Vx1MDAxNVOBXHUwMDA22Vx0ko1UwVx1MDAwZj9ccmRcXNM0q5RccqyDXG5XueF4RnxcZiaoXHUwMDBmXHUwMDEw9qm52ep68VFOrVx1MDAxZu5WXHUwMDE3b5crj3NmN1x1MDAxYpBJXHUwMDEzXHUwMDE54Fx1MDAxMK6S5kP0x1x1MDAxNeGUk4OLXHUwMDFmcGBcdTAwMTFcdTAwMWEtTFxytJw6NWlIhFxyJci0iaRVeNV4brmRk1x1MDAwNFmqnFx1MDAxZuXwy6irWVlcdTAwMTZcdTAwMTZonyzQ7vZcZnlcblx1MDAxNOsxTH5cdTAwMTMkwLl5rLYvXHUwMDA3pVx1MDAwZpSmWIG1kFgprWRjUZE96NxHtLBxYbo6szt3pyrlle351dKpfmpcdTAwMDeUPFx1MDAxZNFMxFxm+CStuYwxzldFl4pFhigr80KzgKJPXHUwMDEwbaSafvxpRKOSXFyosUhpxbCpI8RcdTAwMDVcdTAwMDNcdTAwMTBKOFx1MDAxNeNcXM/l5+7OZneWVlx1MDAxZdu6sT6/1popXa/YbIhGM5m9lXCZXHUwMDA0s/31XFyePDecK+OOwChcdTAwMTRpdCqikWc0/ZO2iIWaXHUwMDA2Jb7B0PpK46zKVa78w8S8lFx1MDAxZNA6lYmS+VCcUcX7mPvFWTLaXHUwMDExO6au2Vx1MDAwNyTgj/vTMJzBl/BWWENhM+/Go8Fo0LmPXHUwMDA2zlx1MDAxZS/vd8sz+1x1MDAwN9vF652V9aOlu/beQ2Cq8iBcdTAwMDeNMS6UsFI6zvtcdTAwMDFcclxcNoLUcM0owMKSZZtcdTAwMTNAXHUwMDFiqaafflx1MDAxYdBoIS9cZnJcdTAwMTjPVPo2XHUwMDFj6kCiXHUwMDE43Lfz2Vx1MDAwMcLOXHUwMDFmLr173rjUUy137+4vtqrXtpZcdTAwMTHORCSFVkBcdTAwMWLHTP9cYnFcdTAwMDcmXHUwMDE3kfNcdTAwMDY5lsZcdTAwMDZmmzBcdTAwMTF5aYxTTsk45E/ALLeIn2VcdTAwMDczJ1x1MDAxNbUyJcdcdTAwMDTTNXGeWtzhaakyPJrxXHUwMDA2M/p4pVxcrWeCM9XzpjGAs+TZj6hcdTAwMWT+ZXn1fK6tt/Z3n9c2XHUwMDBlz6vzp4trOVx1MDAwMM3ZiLY7Wdt5VqxcdTAwMGbQaGByJFx1MDAwNC2+wZ21PFn4Mlx1MDAwMbSRanv504BmpFXUWlx1MDAxYazt1Mk5zN3aTudcdTAwMTVcdTAwMWJv/2y9eufnb2+3xf1huXhywFYvt3imflx1MDAxYlx1MDAwN6ZO44c0mTmtVX8kgjNhIceQVMVcdTAwMTW8OJ5sXHUwMDEzd9pEgtGaZ8uc1jzUcMN5ZKxcdTAwMTDGXHUwMDE4a03PWsThglx1MDAwZXdCavdzXHUwMDA0PUc1iKZcdTAwMWUyxcNcdTAwMWJcdTAwMGKZSHfSaIAwXHKkXHUwMDFhP2CbadTpZEttnG5hp11K2VrofCRpwY2USlBGwPe86ZtgbdC594Ba76XnQTW1ovePhKnPVef3zs+vK1M7Uy/LmVHNMaFcIquJuFJcdTAwMGJhslx1MDAwM0eCv1x1MDAxYe6N9V5yXHUwMDExmOH0h8cq/zBdr3xcdTAwMWXUXHUwMDA0lYOxcFx1MDAxM6lJ9pp/gFx1MDAxYdew5tKPc1x1MDAxYW1zmpdcdTAwMTeOd5dW5zdcdTAwMGaf21x1MDAwZkxfNtR8JlAjXHTUlvbvXG44a7K/vNFcdTAwMDHSXHUwMDE4Xb5cdTAwMDZ5XHUwMDEzgY1m4H2RgH8naDqK4SFI+8w8o1x1MDAxZibl59lcdTAwMDFNUImfiFx1MDAxN4tm6yDljtP2g3EsWZ5p3FTrXHUwMDE3hVajkeKg9U80XHUwMDFhXHUwMDBmJFx1MDAwYpz0aPyy5tFs+YGXzlx1MDAxZuful06XXHUwMDFmXHUwMDE2ry5nrtrZXHUwMDExXGaMJ5KMJldYyaxKdN5cYlx0t1xyJpHDOfM6qdp/fNzmXHUwMDBmU+6Lz9eCeOc87HBwW6mwWvX/+l3pjVE0uW6cIYzZ3dJGqTan7boq3VxcXHUwMDFk2p3dJZdccsJcXMcvXHUwMDEzluYpi4RXxlx1MDAxOO2g9tJoXHUwMDA1m6mT8fTJ8K5RSvlldlxig+GR2itcdTAwMTPe66LFgNImq+CSiTF0yibTu96eR0epl6qna7d6u75Slzt7m4ebXHUwMDBms/WlRjalhvOkpSDPS+B/feva4HZcdTAwMDG84FxcKWWlntDSP6zT1ew6XHLrKWnfa7i2IzYvNbH8gJbXmDFIhk1o6bBeunklNpovzW1x+rR8fO5nt1x1MDAxNq5cdTAwMDJLTVJpqVx1MDAxM1x1MDAxMXdwNqF8mifquSwnWqppKlx1MDAxMa0+mbDSP6zbV6NgpYoysCnr2WInmdg4qr3Tblxmmlx1MDAxM1x1MDAwNkh7/eZkZeNotTR79bC+Wpy+2r5edFx1MDAxOXnpa2iFXHUwMDA2Nlx0XHUwMDFhNdon6EroiIbRWeo4ki4wVNbSVFoq/lbUmWZ0QNK1ozFBVlCzXHUwMDEz1cbmKVH+YYJ+nYeYXHUwMDFhXHUwMDBi95irYLZA+nQ/XHUwMDBilMX0tJH/NSBGXcpCWyO9ZEKMRz/4XHUwMDFmXHUwMDA0sdbK+VP5YvX0dq94tbWwvbJd0acneWIrNFwikjvFXHUwMDFjXHUwMDFlj+pcdTAwMDcxRaqrXHUwMDE0t0JKKWQyOTBBsdEqd+3TKEalXHUwMDA1SnBcdTAwMTdcdTAwMDaxXHUwMDAx8VRLazysXHUwMDFi61x0XY1VcdBcXNvYW5o7VsvNxvH+zcxitqS3XHUwMDE08FjB06Q0YLiivyhcdTAwMTlEP4Kj7qw3tMYv4IhpXHJcdTAwMTCTNIdcdTAwMTLS3mM7uyBGm+5cdTAwMWPIXHUwMDFljoT/qDyVXFw/Tc5zpLyNV5opKULBQppcdTAwMGKQJtFe4ylIIb69iiM/iMF1UFBW5ahA3o9Hu+ifTFx1MDAxMFxc3PA15rdml/3Zyeza8/7D8WI9XHUwMDA3iNFmYGtcdTAwMTWH863jJVVvLXQgqNZcdTAwMTnAWGdcdTAwMDVlcpnJXHUwMDA0xEar3DefXHUwMDA3McVcdTAwMThTOlx1MDAwNcSSXHUwMDFihbtJQaM9af23R19cdTAwMDZI+/Hq8eLBzqOcL19cXD9X71x1MDAwZip3jVx1MDAwM55ccsSUiJxgnZFcdTAwMDU8XlL1XqBcYkeNXHUwMDAyXHUwMDBlmmam2KSgXHUwMDBipVwi0DjJLW1cdTAwMTiWJrRMlcaugDpDXHUwMDExONiC4ZO6rVQ5r2fHMM6FVzDpwYyXjE9v76/b6rjFxn07K8tcdTAwMGZiPNLwXHUwMDFktJEwyS6+2vffXHRi66V1d8uL01XXWL7eP6vftesq+7h/gJiPvFx1MDAwMTWlhVu6P8rivKelksYq/E3YXHUwMDAwQZ2A2GiVu/FpXHUwMDEwI0NLXHUwMDEzYoPbP7xIVXnYXem0XHUwMDE3fJzDic1cdTAwMDZrT2/tXq1NP5Z21vzFrqjLlczSblxmV5FTzFxirqnSun9TXHUwMDE1Z9xGkrrLJcPtXGKIu2bS0YRcdTAwMWbhXGZcdTAwMTW1XHUwMDE5XHUwMDFmSHZcdTAwMDMnaVx1MDAxY5ZwQlx1MDAwYlx1MDAwZkDMk+32Z9Kc6k9K+2Xp7PI+vlhkjOX99vOkjYODK1x1MDAxNmy5XHUwMDExLH2eqqDdJKOfhqDhXHUwMDBlxLq1PiXty81cdTAwMTLbXTs52VtcdTAwMTKHXHUwMDBmXHUwMDBij9vzO4e1TN1jzmpcdTAwMTdJXHUwMDFhXG7uOFx1MDAxNdj2V3XAP/WRpen3XtlAfFxy/p+PiNVcbqlkaEqVsJJWsMK7XHUwMDExQlx1MDAxOeNcXFx1MDAwZVx1MDAxOVx1MDAwN5rwsv8xXHUwMDE2/S47XXNWalx1MDAxZq9jjlx1MDAwZrl3qY2Q3FhYo9FcdTAwMGa5N8zGR+R+Ym1TZ0dEuL5ecFx1MDAxN8F36JRzeFxc/3gta+o/8dFwtvZMdebS8bup5t2iVEur50ePciqLXnOoXHUwMDFij1x1MDAxONTbXHUwMDBiRpvX+qpcdTAwMTI59XLC11x1MDAwMlx1MDAwMfZcdTAwMDZUiyWdMVx1MDAxYexcdTAwMDfTIDSncarcucCcXHUwMDAzwWFcdTAwMWTg0VoqkjWAxe57hqs3XHUwMDAzUzQ/hbD5PPVaXHUwMDFh/ohcdTAwMDRcdTAwMTlcdTAwMGXpN1x1MDAxMYpU/YZJ8FqrkSs4+LqwebAqoeDFXHUwMDBi+prCfK3xXHUwMDE41G58UeRgRlx1MDAxNFVsXHUwMDAxJmKO6HdO/Fx1MDAwZp31aFR783SruXJbXW7Vd1onXHUwMDBi6r7dvJLXmVx0aieGXHUwMDA0hkpNmtTEllBvXHRcXIaoKFxu82tcdTAwMWZAbs2tiLSn5TdcdTAwMGVmVVx1MDAwNIagS1x1MDAxYYWiXHUwMDE5k7RomTHYiq/W7r+HoPqU2q1cXOvXXHUwMDFj83BcdTAwMDdsaJRqj/3tV3vyy5X2btRcdTAwMTQ1t9pcdTAwMDfl/V2Uy9XSTaNe/idwdZqb9MmagC9cdTAwMGbQz+Jtvk12PN24u+NL2pTqW1JcdTAwMTfXj0+fd55+XHUwMDA3P8RvyJdcdTAwMThcIl9JzXnFayWpXHUwMDBmzsPXVJpcdTAwMTmeVGjOXCJcdTAwMGIpwN2QQsfGXHUwMDEy9Sue8pppm1/xPlx1MDAwMjVg/ML6zpQvT+tCXHUwMDAyhkGDW1BcdTAwMTBIa6pcdTAwMWKVsYqZd4LqaK53fElFWK9iXG5cdTAwMTQrkErRtlTcTMj0h9J11S+NLsXkZmul+Xx/O1tcXG7t3/BcdTAwMTl/sDtlplx1MDAxZf75eN///kf4sK9cdTAwMWY+Wd2+KIpS8+Vmt3mz/LJzcjmzu9T7Le/fX2o2gSdcdTAwMTmPu7fb2K5ObZ20l+7LOzNcdTAwMGbnLyuPhzPZjvv2tz+u4IPuXiauXG5fOOr0/0qaPZBcXCHMvYbs07JaTlx1MDAwNCFZwlx1MDAwNVx1MDAwYlx1MDAxOHlmte3stlFOhYKLgsDMUVx1MDAwNYGHL1x1MDAwMemeoFkqmuUo4qKCXHUwMDAzgq5Q5kDJ9InJXHUwMDFjVor5+L7nceGqM6VapV4uNVx1MDAwYk1y6pq/6iWigb/qM5eVs+tWoXr+q16t41x1MDAxOd2fNTt91dVW4bzaLrRcdTAwMWK/6o16pdA4L3Q+XHUwMDEwdmPhMSnFcZLOXGJcdTAwMGLnK19cdTAwMDHYXHUwMDE5jltpXHUwMDBlYLo3nXXBaWR3XHUwMDE4NCbSXHUwMDExvXei0H8jXG7h+1BIuVxyo2HOgy1tnzXsszTOMMr6cKpcdTAwMTb1/Vx0Sk7rXHUwMDE5Iycpe1x0UWKByVx1MDAxMopGi1p4KPCaXHUwMDA1nOKAT+wj+GA0+V4zbmV8X+xcdTAwMTetLP6LzEzmcjKRSpqdp/Fe4XZzq3hqPVx1MDAxOSUuXHUwMDAxOb9XffN7/OJie6GmzubPZvSNrq29rOlmdV38Wbz++PVr41HPuf+/2Fx1MDAxObL46bKPv//3f1x1MDAwNN+dqlx1MDAwNfQzlVCA7uFcdTAwMTJXWCu12jONm5tqXHUwMDFi17lJ55hAmXap2Z6GzFTrXHUwMDE3vaJReX0gWVxmW8e6nt3T9U+xXGLCgvtcYnrqvIJcdTAwMTS7LuEgUS7dknREikLeUlx1MDAxOFxy75pcdTAwMDbRJFx1MDAwNFx1MDAxMIZx+Gmd76iDhdW1p+eXi9mlrZmbPbl/tpp2WkJbz1x1MDAwMVxmXFzRSJrYXHUwMDBlgo/Tolx1MDAxYytOXHSESdDeXGLlk2pBt6tIpu+yUkqoXHUwMDFlzjn+Wr+NrNROXHUwMDFij5nIXliUs5A9XHUwMDFh9Vx1MDAxMcHSSkm+g5dJXHUwMDFirC1cdTAwMDRcYv9vIDwq0Ecq4VxieeFptZCgStJg2kFFcEAsRaadkjZuyidW+PU5dq1wSj1UeNmT90orZUKhSYDmgNCkl1x1MDAxNsrkxo/uXHUwMDFkpSRcdTAwMWO+l6lccmE5/UztaPTJh8Ge52CepahElEqDYGCh431tpUS0XHUwMDA0NXpT6ojDeUiGJ421XHUwMDExlSozXHUwMDA3sqZdbLlW16HDOyzFyZm1XHUwMDE2fp3Ok1usMNpcdTAwMDb9c3Q8pVx1MDAxNixcdTAwMGbTolxckuDShcKTPXGixD5ScLTezVx1MDAxYX+cajVcdTAwMTfvyrZ6yHbUyZVeun5enz+YvftcdTAwMWKp1lSqXCJ0Xk3qwFiRLZBcdTAwMWFOWM/B0MVrk3iS0/xcdTAwMWWzWpo5P3o8Orh9nplvzJd2tjauS6Wz8DlcYq5cdTAwMWRYXHUwMDE1x1x1MDAxZlxmdKGbXGbpnlx1MDAwM6yR8Vxm/3XUmeWV+S5iXHUwMDE1XHUwMDE23CzESjHaSGSgbFxm7Km/QI/4lIwgTFx1MDAxYVx1MDAxNNN56ZNcdTAwMGJcdTAwMWOEjDyNtLfeyc5mxkAz/6d41U+zuSklekFehVx1MDAwN6JoXG55qDiJ6yTdiqV8Naftm+OX8l1vjCGtXHUwMDFhQmr6aVX8XHUwMDFhRsOq7p7U89H5Wv2ydMeW1maq8/Ob64FxiZVarXrb6s/6SsN1ZLWFU01cdTAwMGLn+kdcdTAwMDBTpNxFTpHn5DrLXHUwMDE1XHUwMDEzSs6tolx1MDAxNZtU9VxmJ1M5XHUwMDFkSO9cdTAwMThcdTAwMWLBQ+ZUqU9cdTAwMWTVKk9dXCLr/PzJolx1MDAwZd73+yxcdTAwMWHe/UxcdTAwMWVccu+GmLTXJqVQ1lxymLUhLD6qfKbNYDG7XHUwMDExq1XIkFx0y0LhMrKqvyzjNJhcdTAwMDJcZsJKWstcdTAwMTmByVL5hMW/kmDpROQpk2QptcGSeuR9XHUwMDA0b5fT0HzCVFx1MDAxMcBKKSPHhWTae8u8NV++Q/4vgspcdTAwMWO1j9zS9Gupklx1MDAwZVx1MDAwN4m+Tm++0lZZweKjiT/thoyjwiRweLvSvm/WX0fbl6pv2axCs9K6bdRb4Vx1MDAwNWqcuo1cdTAwMTXcPfBAJz1cdTAwMWKL1dZZr2M0OM02tXq6aK9u7Itjs1j283vnxz5pXFxC0Vx1MDAwZjwzXHUwMDFmeaEl1fNQvLbfujCAsOJEtiWzMrlhivOIZmWBy0vqLlAyXHUwMDEw4aReXHUwMDE5Kz2tS/RcbqbK5inO+mlcdTAwMTHOZti85Ih+XHUwMDE4KonBfVx1MDAwZcU9nUpmn7rBXHUwMDBmwVxiXHUwMDAzfm9Wf9jqXGZcdTAwMGJ+XHUwMDE0n8790vH0XHUwMDAzv1o4XHUwMDAxw4RcdTAwMTO5X7n/XHUwMDFig1x1MDAxZul60Hk1oVx1MDAwMd3jJS5xZLGPzFx1MDAxOVx1MDAxZFx1MDAxNoFaMFx1MDAwN8+OmLRcdTAwMTZMxdJkn4t9nJZPTjd2XHUwMDBmq2Zv4Xpx6vj46aBcdTAwMThcdTAwMWJYUOiNv1BZtqX2XCJpYZFCqS5haTqfhfep8Fx1MDAxNps4py9cbn2ExTZcdTAwMGKdg7zyXGIuMNWyesZlXCLcXGbUj4xntK/ZKmNcdTAwMDI7/SY5pdFa3FZ2QqfJh1wiuFxmmFaaVZhqWlx1MDAxOXNcdTAwMWFqr0c9QOPfmlJcdTAwMWFCab4gpVScWzxefHy6rMxcXKzOtjbvj1x1MDAxN1x1MDAwZduljKRKS1x1MDAxMVx1MDAxOSa9l8IyXHUwMDEze+hcdTAwMWZ5Y1x1MDAxNlFa3ChNtVx0yU1n3NrIUDsmbFx1MDAxY43PXGZcclx1MDAxN4gkjTxV2itwN/xfXHUwMDBlXHL/adHN9qc5XHUwMDE1mLG0Jt4sXHUwMDFlSyg5k97GRqs+aFx1MDAxZNbXUarzl+PF7ZnN9vHJ8dLmM5u6tY97XHUwMDBmfyWlSlNcdTAwMDL6SYj/mFx1MDAxMSrGaf+jXHUwMDAzpbbAXGbLfCCTXHUwMDEzOU9ZMkUzmYDVUiWkL1x1MDAxM8V63DzcmVlY3tq6eJ5duint1JbX7s5DZ9WpJzKCVqbTXZPK+Fx1MDAwMNFcdTAwMDN1gOHyXHUwMDFhTFXg7GyynOiLSFZYkDORLFx1MDAwM1x1MDAxMlx1MDAwNZmQhnuhZKIlnms4vUprSqNpx5JcdTAwMWNrkl9cdTAwMWGxXHUwMDA1vs/OsbiEXHUwMDBmQHM7wnU7yTHSXHUwMDFmkzZp1Fx1MDAxMbe/XHUwMDE3NPt56aUhXHUwMDA058+nl1x1MDAwNtutIeklbbmKaFo0nFVrlE2ExYVgkbPudaOyk8lcdTAwMWNylvRcdTAwMTIsSVx1MDAwNFx1MDAxZadcZqPwuVJskl9cdTAwMTJcZmYz2eDXcUxcdTAwMDd0xlx1MDAwMehcdTAwMTSPr4/MlF6KmfuvTS9cciNZ7Yq8q1x1MDAxY0tbXyzd7J1dqNOT9kYja5/UYM3r+f7vzVqFrzJcdTAwMTNcdTAwMDJb5Wh6sNOwbHGE/Uj+UrzMQeuowjmwaYizzi5ownBB4Y5YWUG3fcFERkgphMc3KZ5rYMdPy1o9Zlx1MDAwN2DwacG9XGbir+TJSVx1MDAxZe86jucsZHzNw7jA70KlXsFjbP+qXHUwMDAzXHUwMDFla/SkXHUwMDBi981aodX4Vb9vVZqFs1K9cFr5VW9CsFrA1Eq58FAt/apfNFx1MDAxYVx1MDAxMKNCXHUwMDAzcHdcdTAwMTlcdTAwMDZwTSzTSm6s03En7yvwe1xifPbj9/tNKPTdg0LsXHUwMDE2XHUwMDE0eu9AIXxcdTAwMDNGg/6DXHUwMDAzw8PQXzJcdTAwMGbwlp4m5Vx1MDAwYi66Mvm24clcdTAwMGJcdTAwMTEpWu6qrLNcXCcjLEKyiOa2walnVunQJk5cdTAwMGUvQEv86YWjud4u10yBfyH4W1xuZlhcdTAwMTHsX4KXlL4u0/POXHUwMDBl9Zzg/zSu4D93V5qR+1u2Wrx/lkvXrerF6uZzVvBfqjWKXHUwMDE3a1enR/JgY8eUL1x1MDAxN1euXHUwMDFmqtnAf+BxXHUwMDA3R0xcdTAwMDdcdTAwMWX3a0lF+O5lXCJcdTAwMTVSs8jQXHUwMDFjZyMtXHUwMDAwKrHXzXlLk0RcdTAwMTglsbRcdTAwMTNcdTAwMDFWofBcdTAwMDaKXHUwMDFikdo7XHUwMDFmbL62XCLyTFx1MDAwYkN75SXnLI/W/zRW8ZydVVDvXHUwMDA0N4LzUFxiVcV36SbXbXtpVXxcdTAwMWTvuFx1MDAxMIul1it6Nit395VWm1x1MDAxOEStQl/SabA+e+9I/r9j6P1cdTAwMGaB33720HelhdiFXHUwMDE2Qtc5XHUwMDFhjnA797C9ZFavffvAi/XHi2X7Uj7KzFx1MDAxMZhUkVAwXHUwMDAzXHUwMDA2rNUkOqiZgotcdTAwMDJbQZRcdTAwMTWORmz57VdxXHUwMDA0XHUwMDBl+nIm/lVcdTAwMWNBQJBVz1x1MDAxNsaYklx1MDAxYpbaeCOY1FCBbKMrY1x1MDAwNuhlXFw5wvzmrNsqrlTuii3XeNiSu7f++Cwrlq/L49rK1EmzadbXz+ZcdTAwMWVv9uyCPVx1MDAxOVx1MDAwMUeoby7ONNjZJXva3LifnlmfNVWpx5EjhO9eJo7AOiuyJJe0ccephGegoLHKXGJcdTAwMWEtSXN/kj27XFyZyOI1xl8pQij2/ymOMFxurf97OEKR5eFcYkx5xZxcboVcdTAwMTc1Y6nhRfLCwS/k+JVX7HVcdTAwMGVZaN1Wzqrn1bNf9cpcdTAwMDOVgp4+XHUwMDE36rhxv+qNZiH+QMaGXHUwMDFmXGaB3n5+0HeZhZ6rLPRd5GjIgbzZXFw8WF7yl1x1MDAwZrfFXHUwMDA3e7SyOCOn5zOTXHUwMDAzXHUwMDAzLdeAds9cZsin7y/RXHUwMDAwOcDXU7RLS2ZCXHUwMDAxylx0OchNXHUwMDBlpDCMit5C3MDp1Fx1MDAxYVxuXHUwMDE4cSdYrCYxXHUwMDEzNSjycaVcdTAwMDZcdTAwMTfF5/ZF9WTusHZ565dLy3pVnp5nhvClvfvHq5Otk0V1eilcdTAwMGZcdTAwMWYu1lx1MDAxNpaWR0Bcco7vJC83/Nz9ys1O63LqavOYrd6PIzVcYt+9TNTAMuqUXHUwMDAx7We050j0zy1kipuIwdeEuFllQ7PbuI3gTEgwXHUwMDBibUSg7nLCXHUwMDBisvNcdTAwMDKRg1x1MDAxN2gmXHUwMDE4dyy5/p1cdTAwMDBQ6NTYgYLx1lxcj2HZ5UKlXahV4Uk3zt84Qavwn7/qXHUwMDFmU8zotTGkXHUwMDA1Q0A3mXT4uMrC+0VcdTAwMTZSrnFEs4pfXHUwMDE2XHUwMDE3tlx1MDAxZuT+UfHs+I6fz2+r2TmVmVx1MDAxNUjBok42h1FWwfRcdTAwMTdcdTAwMGUx2oKhodfeXG5huU/OXHUwMDAyycBcbpyEkSFKYa1QJlfO8t9HXHRocp1jitlQTkGZ9ElcdTAwMWRSUqerzNSrXHUwMDEyMzpyXFxJwcba2uPD9PqhulXHUzuL+vi6tXuYXHUwMDE1vKfavLi6KMumePmwbG/Vac01j0dAXG5cdTAwMWWrbO92vf1kLvisXVu5OuM7l2JcdTAwMWNJQfjuZVwiXHUwMDA10qpIXHUwMDEw4NMquPieijeVl15F3tO8V6lZfLrBXHUwMDA3KVx1MDAxMFx1MDAwMjaBOSaFXHUwMDEwKbzgU7WCP41cdTAwMTioXHUwMDFjxEBIWm1ok4FFgkBcdTAwMTZrNOz3KYxcdTAwMDDPiz+HcSFcdTAwMDYzTVxurL+i5Vx1MDAxOFx1MDAxMoAh+JqYylx1MDAxYbya0UC9L81ezch5vrk6U7m9mC+3Zlx1MDAxYUWXXHUwMDE16ik4SG3znFx1MDAxYu7ik33fkV6LiPagWkErXHRCXHUwMDEzaCbuf976XHUwMDAx5YSQ0olQYVFoTl+3icKCyMu8XHUwMDA1XHUwMDA0RT2uYP/cLK9sXHUwMDFkbm/NXHUwMDE0d1x1MDAwZoyYeSpOvyxMZVx1MDAwNeWLp62Lu7o5ONyvXa4/1ZdcdTAwMWYg9ecjXHUwMDAwe7sjufdcdTAwMGI1/bxerOzu2PrV/fLFOIJ9+O5lXHUwMDAxe5pXSrM0aFx1MDAwNYVgzCYjXHUwMDAwglx1MDAxY3ygtFx1MDAwNo6zUHJA0jBccj9cdFx1MDAwMoxcYutNdqzvLIeyoVx1MDAwMsR/OvHD9NyidVJcdTAwMWE5hkGA17P4+5JcdTAwMDNDkLefXHUwMDA09F3mVyRcdTAwMDdcdTAwMDZ7RMNGYtiIXG6EXGb0O97T+2YjtKXmTuON5Uy4QGKARe5VUFx1MDAxOSyAMqFxoErCzNCcXHUwMDFkg6N5kWu/w1x1MDAwZqsxKtqwicgzXHUwMDBllFO0Rlx1MDAwN9ZcdTAwMTLhRe+Sw7I+XG5cdTAwMTe50VQ58lvLin6PXHUwMDFhrK0tzD9e3lx1MDAxY65tzFx1MDAxZrYuS5fFk7mXw7+xezNVXHLoJ6lcdTAwMDDdwyWucGTtm1dzbm9vt3F0MX1Qnr5erFx1MDAxZC40V/diXHUwMDBmId6+qUDauYfgeM08PITYu17bJF0kaOJcdTAwMWNznnY5W/ubzZuD/anYOXWaN5VU3IO8SEu3jYeaN7U0naF60lH7eVIlvqZ3MyzGWThcdTAwMWGdeMQ9zaPrXHUwMDA0Wlx1MDAxM5lZzcGvaJZcbsDPO5XkaNpS5pZcdTAwMTY/M5plplx1MDAwM1x1MDAwNvhz8ZhcdTAwMWZmgF12jkaTXZ2F+Vx0926mu3iCM1x1MDAwM+RcdTAwMWTHXCLPzY2d3THkYENcdTAwMThOP1x1MDAwN+u9itGQrMG56CEky9NEJE6LsDhzOlx1MDAxMX8xTERKc6twd6GjgVJu1+lmh+nl0tCSrFx1MDAwMM0yJlwiaYTgSVx1MDAwYmudazroT9Ny/3maXHUwMDA1fet041x1MDAwNKfj4IV0XHUwMDBmTUhBk4y+jmZ5U36+WdePXHUwMDBmsr67fNtaUo1TiMxfSLNS1aDzYkJcdTAwMDHGimaB0oD7wYZKKsRS8XP/oDPe0lJn7ZiyLLREJlx1MDAxM8lcdTAwMWGcte49I85pSKqj01HkNlx1MDAwNOZ28EhcbiVcdTAwMWTYiZKAO/5tq23CUpyJZemOaGgnvVaxUWtcdTAwMWYkS1L5XHUwMDFi/F9cdTAwMGLnySStr9KRJpZcdH6s/J9cdTAwMThC9tPMbzE7yVJcZqRDWFx1MDAxOSqG4Tq5kvcjjG6gQJBa8e27d1x1MDAxM1x1MDAxY2thblx1MDAxYynWXHUwMDEwfpModplcdTAwMWI5w1x1MDAxYdxcYjCYYUnJXCJlXWeNqIv3V72ruMfrjIYygGCZQLGbgTNpmKdaOEU5rEBcdTAwMWQ8LDfeI7WisYXWxaLhXHUwMDEzXHJ/fYxdXHKf/jzBosflXHUwMDAw6kHvqmfpeX9cdTAwMWRcdTAwMWMogIDdXHUwMDE44TzpYVxma1rPyaoxq9ut+ev6pmuvn1xcNdnfyLCm0lx1MDAxNYF+XHUwMDEyKjBWXHUwMDE0i1wiWVx1MDAxYadOS42UYFxmJjS51oaGXXV2ydD4bGmM+81ccoKDe1x1MDAwNnppljQ0LNeDtzJG3DVxUi6CV8hcZlx1MDAxY0BJY2lVYFx1MDAxN/3XkKywIGdcIllEzrWgQFx1MDAxNGhUophQS00uMDimXHUwMDExsUFssVxco47Ajlx1MDAxOUi9VmZCsT5rgGeyUyyahNyh/6G6XCKufaqh5Z5JJ6Wy45dsfG3R+c/NUvssZZrJt5KtIVQn3HDUfzWjYV2DKyxcdTAwMDazLljaXGIk2zhHozJkXCJ6baSILFxmsibLxmO9hVx1MDAxZuOdjY+EY551Rlx1MDAxNNh4a1JsnaCI6Fx1MDAwYuDyWy+kyFdZ9MPUfvbzvEtyp3Ra/tDz1Ki2lmTkbaalOqOqI57VXHUwMDE3U3tcdTAwMTV2/shn9ezD8v3R3dzOX0m70lx1MDAxNYF+kiowZrxcdTAwMGKoXHUwMDBmXHUwMDEzSlx1MDAxYputXHUwMDEwRsokw6G1olRXXGZbYWjcqnFcdFx1MDAwMcxEu1x1MDAwNldj9NIuXHUwMDA1KVx1MDAwNpvyRujO4ubkWXmaqaZMpzxcbvRLf9t6wbAkZ+JdoFu4t50p+lSgmYxuaUdQZ6m3k6o/XHUwMDEzRtjwyFBcZszQxFx1MDAxMmpcdJtwrzdcdTAwMTn5TSM8l517QZc1jdtcZs/Yd6z/1+/G1ipcdTAwMDdcdTAwMTctPp1qXFyY1+tZjCHnXHUwMDFhQnTCdVxco2Nb7ypcXK6Wblx1MDAxYfXyP4FcdTAwMDdcdTAwMGXtSuXaltZcdTAwMTb1pJtcdTAwMDZUXHUwMDA1d6538PzuXHUwMDFjtdPiN1RLXGZRraTReFx1MDAxZnXHI1qDXG7xljo+puZ90C3tp7bMWiCJiiVK+02O8jRoM7/J6Va861xiLqmCQXRcdTAwMTRX5KF4oJVcdTAwMTFcco90YLaKyl+7gvtRxSmoaiPeXHUwMDA1XHUwMDFltikx41x1MDAxMWswzFDH3fPCiFjV077d33iZrm2sTl9PXHUwMDFmXHUwMDFlVvdcdTAwMWVLZ5knvlxyXo/e8/1fNfFt4HH/mvG04aeSiSFI0EdNi6g9uFBiNFx1MDAxNO1fhk5ZgXPm2rpkbMbDi5NcZkBcdTAwMDVht1wiWGOkbeQtXHUwMDA11axXVulcXPSAeS+M+zn0YCFHXHUwMDE5OMXKjHah7JdcdTAwMWNcdTAwMTBcdTAwMDLn3uNJjmOB0X5xdWm2uLux/au+tzO3XfhVLy7MrackxL5z4uxcdTAwMTD47KdcdTAwMGJDr2s00ZqZJXe7cju3frI+1fbny0vPfueslbRcdTAwMDLNyln7VfH6TYGEKdC0htxQVjWBr9briGoolDbeXHUwMDA2psTR1FxiuHdwXHUwMDAxqKu7K17d5arKUYcppEQxSC5cdTAwMWO9iSVItVx1MDAwNItZozWBfMD7+kNcdTAwMDGCwUP2IVSb9FGDpDmNXHUwMDA2sd/uPlxmXHUwMDEw9bJcXD3deHxZud81h407XXmSN/c8XHUwMDFi4ClYXHUwMDBlOP2KwTtWzPXHJTlMY8RccoSYW4GfwMBkxlwio5m0xuNcdTAwMGU7XHUwMDE36nySKqLJrFxcSiAozNNEzlPlfCk74lF7M6x9fCBNzCO2Llx1MDAxNfJcdTAwMDQzWlx1MDAxOSPGMFx1MDAxOdFBgp3C6lJKba2wkeU0oc8or2iNx1is9VxynvVoUOzsZeG03qhWinJtdn+l2jzfLz/fZuSywFx1MDAxN0uJRG5xq1h/tItmb0cgtFxu8Eb4XHUwMDE22CjpPI044EJ7mntcdTAwMTKfs9eNdllcdTAwMWVZpqnwnuNbYEkmyp2q3MvZlds4Qe3NwZ7oUP7xY4BcdTAwMDFcdTAwMWNcdTAwMGLJZaaFKl+r2jwq7Jdwy6nvf49mXHUwMDA2XHUwMDE3afn1r7qIXG5cdTAwMGJzu93pP6s0XHUwMDE36FddRoVcIlTsuVXpvrRcdTAwMGJpL0w/XHUwMDE35jqNgr/qKios1XGo9ttv3o6occTK++/w9qXZ/1xcL67N/aqbqLBTKTXPLlx1MDAwYvONZvf1dWo3/FW3UeFtXFxh/JNr+CRedFHhrV2x/7B40YcvgbOoMHNZalx1MDAxN1x1MDAwZWjf99vJcdyHjzduN+7b73dcIi1cdTAwMGVoXHJTknupYbCZXHUwMDFmXHUwMDBiezd5lFlcdTAwMWZlXHUwMDBmXGL06sXoYqEufXe3UMJcdTAwMThcdTAwMWTnbcNioS+LOzPm9PBgbe3+ZPrB3pn60mkjxfSOTSxUXHUwMDE4XHUwMDFlacuBeML7+DjpXHUwMDBl1HkhXHI8LZhF16mSM31nNrpYKPzvSEmnrFx1MDAxNNIx2ntcdTAwMTMgw9JFtPXXXHUwMDFiXHUwMDBmtuxjgPme6OB0JfE9d0MjoSt/PFx1MDAxMvoqXHUwMDFjXHUwMDBiQlu/cnbxMO2u5OF++2n6+aLrU/dcYmzH7H+8MDiy+Nxa3vJq5vps917x1ae71sHh9SiGVz7tbvo1Nd+2pZ2TXHUwMDE1LV9uq+35Rrbjvv3ti1x1MDAxY7jB93XI7lx1MDAwYlx1MDAwMXFinYWU8LH6QpbwuWg5ulx1MDAxM7Tf0/HkYDoqJuNcdTAwMWVKY2gmolEhjscli5iEb1x1MDAwN6m0TMbK/idcdTAwMTTv9SF2NXE1O8Vz2lx1MDAxOGd9sCeSWHuaTeeSNu7Ajo1fvf7Mxvr+3Pbur/rcPjyiwtL6/Mav+i7+t7NbXFyfLdIr80tzq7M7YeeORY5cdTAwMDakcJqPXCKowz5cdTAwMTfZ+WxcdTAwMThzXGLyJUZYvV5roXuphd2NwvuFXHUwMDE2+q/zXHUwMDBikqLGJqPfXZ9fMFqKlWlcdTAwMTT6W6HF89nZ0/XGwkHxma/tz+yXt1tVMfZMQPPI00JuK5nsn9pcdTAwMDdqICPFOVxy3nLx6uLxJFx1MDAwMpwzYm8+1oQxlFx0rH17TvT6wO6t3dcvVm9F005V3H319lJlzjHul9eb7eulnbmZs3KbLy1cdTAwMWRcdTAwMWOw05/EXHUwMDA0wncvI1x1MDAxM1Ak+porw73V/SSYOqtcdTAwMDHv3mtvXHUwMDE5XHUwMDBmrdaEkyO45/i0g/ao0GrNXHRcdTAwMTXITlx1MDAwNdZzhHJcdTAwMWRcdJLXwd496U2qf+dpPVx1MDAwZdy78aNcdTAwMDLF9eLq0Vx1MDAwZTz1meLqXHUwMDFjQVwiiMDR5lxcYfrojVx1MDAxZFxmSmd+M1x1MDAxM1x1MDAxOIJ8ifDv66VcdTAwMTber7TwdqFv1GDE2c0sRICl11x1MDAxZXOiXHUwMDAxzliRJaH1apOWdoqLM/X9SpX5Uqlst1pz2ztmzImAgsdcdTAwMTNpWlx1MDAwNmi0Ul52XHLDW60nXHUwMDAzXHUwMDE1oG22Ulx0/G/MQ1x1MDAwMqAsklGiOEdMYOPbmcDO09qy23Avpv3Y1DeXarWqWWYmsHrUKu63l2rl09maWl16XHUwMDE0p7VSRsRcdTAwMWV43NrugZ2/3Fxcbp43Ni/PK/JirsiexpFcdITvXlx1MDAxNiZAQ1EjiJxhTEBcckx/TMBcdTAwMTlcdTAwMTZx67Q0hiqdXHUwMDAyXHUwMDFkZkLQuEuIm1x1MDAwMJ+w8Uroblx1MDAxOZOIXHUwMDE4PFFNg1tcdTAwMWQox4RcdKQzgc1cdTAwMWNMXHUwMDAwJlx1MDAwMOZZ+1CHXHUwMDE5bneqXceDXCKglN9ep5BgXHUwMDAyM4vF3cLB0u7iXHUwMDE4I/5cdTAwMTCIS/j+75f0LeBu0lx1MDAwN1x1MDAxM1x1MDAwMiRcZrMqe7j/5vKwumbm7sR6bWa/Nbsod5/vbsdcdTAwMWTbtdaRgVvsIJrSilx1MDAwMLbDwFx1MDAxOc48lVxuaN0/0XrcwFx1MDAxZC9pLk0sNDNcdTAwMTTct75cdTAwMWTc+ePq6lx1MDAxNpjV0c1cdTAwMTHfeVx1MDAwNlTYo+vdL5gpPfC4enVhZ6F297B4Wdndl/fr28c7/mZcdTAwMWPBPXz3MoG7UTaiXHLVNEFectU3h1x1MDAxNjJcdTAwMDZeq4WDj2+8XGKBu+SRwadxMYxcdTAwMTZdXHUwMDA2RJYzXHUwMDE1MWEkM51Z1nH2PFx1MDAwMffXp9hVxe1cdTAwMWM1yszTlnFcdTAwMTdsXHUwMDFml0Kl9jApXHUwMDEyP7j641x1MDAwN+6zc6tzu3PvXHUwMDAxf3LuO4n0je3C0uxcdTAwMTjj/Vx1MDAxMNhLdDh1rrLwfpGF7jV+XHUwMDAzXHUwMDAxXHUwMDAwvKc3u0lcdLrOczj3p/uKtdX81uXSzeXWnKpu3stKbcxcdMBblFx1MDAxZpap0+nVb1x1MDAwMr13eJVcdTAwMGKaXHUwMDBir1gsjz6W8I/HXHSTjvPMjv47347+1/XG1qGdOePL96drl0fTp1OPp7XvXHUwMDBl8v81a6nCdy9cdTAwMGL6v1x1MDAwNfmNlFx1MDAwMvLE+ndVwrWn7TWeOlx1MDAxMoxiNlnTmSXIbyGx3ONVKkBcdTAwMTRcItaSN0H/16fYVcXd7OjPNYd7xlx1MDAwMsvr/ulsqk416tzTLKSe3oVxgf+Fud14hD+9bvt74X5cYshcdTAwMDUm9nWD+X+iqnuwXHUwMDA1XHUwMDFjMiFcdTAwMTlcdTAwMWGsOK2gcs5r01x1MDAwZn4g7JFUXHUwMDBld1jCPLjkIFx1MDAxOVx1MDAxM9GGXG6Nj3NS8VhcIrBcdTAwMWLbc1x1MDAxMeimXHUwMDEwylxuaeCe5jFcdTAwMDA/bYLBXthcdTAwMDDkmo/sXHUwMDE5NFxcu5BdMD59iy23xtKYVTc+bsFIR72kSir9JGS0e7RcdTAwMDSYj2zOy2A7UojPeYF3Tlx1MDAxYmOkUYrmXHUwMDExJKfrKVpcdTAwMTjlPXFZIfE+npCPTFNeXHUwMDA25yp7T4nmxUlcdTAwMDA78WJjXHUwMDEzZ5Q8gy9cdTAwMWHpMpi4XHIxh9K/LdzzjrvE5i4pdaToXHUwMDE5WC6EVIFcdTAwMDJIXHUwMDExSVx1MDAwZYRcdTAwMDVcdTAwMWYyeJePtU11ObxcdTAwMTZcdTAwMTGNSfR4VJpcdTAwMWGnJvYw1Vx1MDAxZe5/3lx1MDAxZVqmgF0+OVx1MDAxN/6fzlZv0//rXHUwMDBme+iEXHUwMDE1yknzW73cYc9imCO0u1FeUaXDw/VKce3q8ea8fSvd9l85VytdXHUwMDEx6CehXHUwMDAyX2Fucy3BgStjaLNcdTAwMGL5NUbLbtbzw75pXHUwMDFhvMA4U0rSnm33m1x1MDAxNjdcdTAwMDdcYtCcUmdcdTAwMThNU5a0U9QlzolHTCpJrprDy7jr37aaJyzJ2ZxSxVwiKbhcdTAwMTVcdTAwMWVwXHUwMDA3OO43wjSUTTFOPW3aXG5cdTAwMTYwwtRl7F7rz4N7kk1nmYE1xnNcdTAwMDJVOWmVT7fAXHUwMDA3OVxcUvikYJg2yTE75zJoZjz1XHUwMDFke8uzlFx1MDAxM3+tS7pD6vLah9UqnNfiyjA+XHUwMDBl6Vx1MDAxMMbT75BcdTAwMGW4ptE4pIPrY4dcZpT3r9vFtGRSXHUwMDE41ddnTFx1MDAxYrvI7iqaRCVkcoCAjTr8XdBAPdjv4MZcdTAwMWWD07dWK1ok40V8L8WEgL0+xa76XHUwMDFmfp6AXHUwMDE53GJDg3FcdTAwMDJWQflk/OrDKsCR4TTMZHyG6YyUI6WLKv0khPQrKFJcdTAwMGX3TzCQXHUwMDFm2umAP1xiilx1MDAxM1xchObdOCCwkvC2lbXuN3dcdTAwMTdcdTAwMGVupOklSIxcdTAwMGKq53Ca0jXax3YvxyiSNJQ8YVx1MDAxMC5nKLT99Vx1MDAxNClLWk661EiNtUBKZ12WMu23IW43N8vFpfvZonR7M7pcXDutzq2eplx1MDAxOKexScvR6lx1MDAxMCfBZWkhQrxX/aMux0aAXHUwMDAxza1cdTAwMTHOmXEvulXOXHUwMDFijtdy1OVcdTAwMWPFXHUwMDFl0fdk5jaUPy22p1x1MDAwZeZcdTAwMTbF4eaMXFxni63j+cxFt7tLJ3d301x1MDAwZpd6WZVcdTAwMTd2dvZcdTAwMGZPXHUwMDE2V3u/5bcyc8d3kpdcdTAwMWJ+7n7lZqd1OXW1ecxW78cxM1x1MDAxN757mZwg4yVcdD+EjWlcdTAwMTfv2XrLzFnIvoEv6Fx1MDAxNHc+5Fx1MDAwM00ycyPlQcfZ3SBcdTAwMDdcdTAwMGZWM1x1MDAxMVx1MDAxYy2sdDrfgVx1MDAwN6Gs8Wz8nKC/JC83XHUwMDA05b48LzfYTlxydoMs+J/VgqrlabZ7Yq+WhH7TXGY1z4FMJmRcdTAwMDBcIkuuOFx1MDAxYyklvXZcXFx1MDAwNaruJS05VpZcdTAwMTkmXHUwMDFkp5DSxFx1MDAxMUo1XHUwMDAwpc87QsJYxmR8mlIsXHUwMDEyzWx6XHUwMDFktiNcdTAwMGVcdTAwMWTvwfzjgehFI0pPM2vqfPvxqfhSvXNzemHv71xmRKfqXHUwMDAx/SQ0oHu8xCWOzMvKsyiUor2CvGdcdE/QXHUwMDAwVZKJNlx1MDAxM3nrpPWgwoxcdTAwMDJwXHT5y+RmXHI2nr1uXHUwMDE2pZi9k8Z20pImsLw04syBXHJT1YA0Krly4oui0GExzkbAXGbYXHUwMDEx3Fx1MDAwZVhXbW3C/sLrjfCSN0JJbVx1MDAwMrtLJ0HoXHUwMDExXHUwMDFh39Ps7Fx1MDAwYn6WXHUwMDEwyujg3lKWPtKC0tlC41mMXHUwMDFm/forYtBDyM6Xx6BcdTAwMDc3hVxmJF/KaVx1MDAxZEnqdlx1MDAwNHIwluReTHc6XHUwMDFltYTWJkuiYFx1MDAxY6LOrmlplYXvplx1MDAwMq5cdTAwMTc8XHUwMDA0+G8gd1bTeEWbR/l/XHUwMDFh8zr7NPPSUuBmy+A8XHUwMDA0aH16XHUwMDA0mmuKJlx1MDAwMlx1MDAwNb6OeYFlrCz6u7rdvyiXt5qPeyeLfPHvZF6pekA/XHRccvhcbuaVeYlcdTAwMTWjjiWwKkpn0nJ40PNkXHUwMDA1gNBcdTAwMTEtr1x1MDAwMlx1MDAwMdDC0+7N5LTwTNRrcPtI71lx4Th5h542SlEpUoB70YxcdTAwMWaluJfew09UyT2rX8S+wqKchX0p3M1cYveeWjJcdTAwMThcclxmT9AvSI9XTllN7ItcdTAwMDWM8IR+jc5cdTAwMDKXs9MvyJ6lbVx1MDAwNnnZXHUwMDE3vFx1MDAwNVxuZo5Pqu+vXCJfQ8jOl5Ov+ubiTIOdXbKnzY376Zn1WVOVOmPki2ZM0kY8WnjXM4vonX1cdFx1MDAxZdFmUypcdTAwMWSzViRXZWhcdTAwMWXR7HBahlx1MDAwMYBxoVxuXHUwMDAwqXBcdTAwMDGUe+a0aUBcdTAwMTmfpyX1p/Gvyqf5XHUwMDE3d9oq0IDk5Cl6XFxap/aqXGKpgb7u91ZcdTAwMGL8XHUwMDFl/5p37LF0M+UrXHUwMDFiV+vN4pU5WdjQXHUwMDFifyX/StVcdTAwMDP6SWrAV/CvzLvbKchkXHUwMDE4pzhcdTAwMGKTXHUwMDBlf8pY2O5jobz1jDMrgFx1MDAxY0wxZpNLRLNtNt06WTvRev72oHiyvfm0snVRnFx1MDAwYq5bpXBcdTAwMWNXxlx1MDAxOVx1MDAxYajMIdBgV8lwnIxgujTFXHUwMDE0QWu9SIbjvoh9hVx1MDAwNTlcdTAwMGL70ox3XHUwMDE27EGcmY6X7X3EvnRcdTAwMDSxMkozSZOCJ+TrT5rf8+zkS1x1MDAxYU5bXHUwMDExg1vLXHUwMDA2sS/qe3Y07HHCvlxuv8G+hrCdL2RfWVx1MDAwNv6I9H5/wlx1MDAwMqFo2m1cdTAwMDZBqGYwnuNZWaQ8XHUwMDEzuINcbiTTXHUwMDAzXHUwMDFkXX+Nqfc2Ulxcw/WHOnHt+s5szFxui1x1MDAwMEicXHUwMDAxj3LUXHUwMDE1xVxcg2+qK1x1MDAxMnd3XHUwMDBmdtM+t1x1MDAxNy5nbmpPV+Xj52Oetf5nsL71fH+uuqKp1mrNPM1cdTAwMWQ98fbB0X154eqFTdtsx/1cdTAwMDOscFx1MDAwMLSH715cdTAwMTZoV57Kq1x1MDAxNYW2XHUwMDFkaDXrXHUwMDFidkV1kVGntpq2uCVdq8m0n9Fi+2V2bO+0wjhcdTAwMTNcdTAwMWX2I5PF1e82XTJlnTFs/FwiK3ubs8W/cNjPXHUwMDEwxOtH+9er/IphP6+24fzsdn5q4am0f7NfrsxszGx4XHUwMDEzZ1x1MDAxOO+2oVKrVW9b/WtKgf2ss/rV0rQv3j/rXHUwMDEzum1UZOFrdW57fDNsd383e2ugtcwqXHUwMDFky6Z2LYRcdTAwMDb9l/A54Uw5pVx1MDAxNMvTf1GBzyX5Jy3EQFwi0j/fL4t96H4mj314n+NlQEicMCHWruLSnVjC4Gkvu+GZ2FrX6FRzoX+WMM+ISEH1YetoZ+Nxal5cdTAwMWbUps363UF9dfYw8yTel4fZUqOx+8DuSrdL5/r6drmacVxcz8DjfmJy8NeSgvDdy0RcbjSHQ89pLDRcdTAwMDf8JrreXHUwMDE1db17wZyj5syYUfigXHUwMDA1ikVeelx1MDAxYSBcIoiluqTSg1JcdTAwMGJmmVC0TlDFd4x9kc7/RazgKjsrXHUwMDEwNOtcdTAwMDNGXCKUb9EyfZOb1HhcdTAwMDYyviFgXFxYQbH+3L6s1i9cbo375q/6x5Y8XHUwMDEwXHUwMDAycphcdTAwMGIzpXphsVK7/VV/pN15/zfIXHUwMDEwuI+UglDixlxiXHUwMDBiz4n3vOmPLzBcdTAwMWaMwIl5/7FcdTAwMGLu31xu+HG5hf6rXHUwMDFkXHJZXHUwMDE4bNxcdTAwMDZcdTAwMTfJaJpcdTAwMWMqXHUwMDE4XHUwMDE1weFW9zvRVCVDMFx1MDAwZu6pXHUwMDE4zdDrvt51JuD9Wlr0KuFcdTAwMDDT7O+A96tcdTAwMTmt4qM5XHUwMDAyXHUwMDAy35hn1/NPS9NcXH8+TcM7ylwikp1npCw2fVq4lp5rwdlvWZPf41xu80erL5tcdTAwMTf1Yz11/7BxMr9Vq1x1MDAxY6uXvzJNk65cdTAwMDb0069cdTAwMDDdwyWucGRZmsFcdTAwMDas0JOlUfAvlTFcdTAwMTBcdTAwMWRcYogwsVx1MDAxMp+P6mRcdTAwMWEhinfBXnCnfjNHM3iieqE3R1x1MDAwM6sjpFPSW89heXRoOFx1MDAxMfiOwtuoIJ9cdTAwMTmv1LdccspcYlx1MDAwYnIm2lx1MDAwNtNLg8uFVLpDu/otMNy5iJI1nkmBy51cdTAwMTTJ/FH7W8vB2qDI8LJFeE5GeuMvJFx1MDAxOTKrx28901+Rplx1MDAxOUJ2vrxI5mrO7e3tNo4uplx1MDAwZsrT14u1w4XmaqA5IVx1MDAxY6nRwjnqwVx1MDAxN8YqqLBLRGosU1x1MDAxMayupClLQtlkLDdLpEbIiFx1MDAxZZWkXHUwMDE1hzDeLlcst/Pzr4rUcGrCXHUwMDAySVxut3aybo1ComNfUK2Sz9ax3zUpN7G7MlaRmp3lxd1dvrPL5tdr8/eXJ0/Xdn87a0RlqdYoXqxdnVx1MDAxZcmDjVx1MDAxZFO+XFxcXLl+qPZ+y++lb9q8uLooy6Z4+bBsb9VpzTWPR3Dc+tLe/ePVydbJojq9lIdcdTAwMGZcdTAwMTdrXHUwMDBiS6PYJ70uj2srUyfNpllfP5t7vNmzXHUwMDBi9mRcdTAwMDTHvXjaurirm4PD/drl+lN9+aFRdOfZjvtcdTAwMDdY81x1MDAwMFx1MDAwM1x1MDAxOJaiLNRH0yBG2n3ghKLC/kTIylx1MDAxOFx1MDAwYuqjJWyb4F5cdTAwMDbas6SKPP5cdTAwMDBHXHUwMDE0yrGQ9VMuMkxqXHUwMDBlTm6cVUzkiVn9NO+znp39cPBI41xcuEVLqVx1MDAwMVx1MDAwM4FoTLlcdTAwMTFjmMraLLVahXaj0PFcdTAwMTl+1Uud2E0qXHUwMDBm+t7w1Fx1MDAxMNrRT4N6Lq1cdTAwMTC6stGwocGoMGyItY+oUsNzijbJRMGa5Vx1MDAwNlRcdTAwMDdcdTAwMGbaWviFOlx1MDAxMIqKuPJKePiyxE/jzLQ7NSxSXtM4S1AmXHUwMDFhPtjF8uHWQJz7ilI/x1x1MDAxYTTC1iBPLIpRdaWUKlx1MDAxNNmm+capRkI7wa0xX1kzXFxrtVx1MDAwZqrFJ+PmSnJh4/6y8ejW2n9nMCpVXHUwMDEx6CehXHUwMDAy3eMlLnFk0ajB9qpcdTAwMTCLRsV+91x1MDAxNuVcdTAwMTFcdTAwMTE1xFvwXHUwMDAxTqNVXHUwMDAy41AzRZ+yn0LEJeyMN0AqzZzVLtmf1SEuUlx1MDAxM/mg9nj+bXOyw1KbiX6BXGZFylA0gltvXWI0l1x1MDAxNVQh7GlcdTAwMTKb7Slr+6h8Y5GlfWJOSKFcdTAwMDR3Nlx1MDAxNH1cIlx1MDAwN1x1MDAxNvphqFx1MDAxM0RaXHUwMDE2y3NPLO7rc+xa3NtcdTAwMWP8y3tcdTAwMGJcdTAwMTWPe6Ox8Fx1MDAxM253qmlcdTAwMDXO4nmP4d6wo0prXGaZ1lx1MDAxMErTz7R6LmJEpOpJNO7Kdvl0c2nzYrPMa4tbJ1x1MDAwN0lcdTAwMTWnQybSe1x1MDAxZcaMlvvC97EqNrPmTcVcdTAwMWQ8LE7jPVx1MDAxNJScqSSngmmIwMy4XHUwMDE3joZ/+lCtYMQ1t3DfnICnRVx1MDAwNC2Hhv+0qoC7z3MqOFfwjINcdTAwMWKDuNSp0SvNTGezxNio/WjHsKbJKf1MJUV0lJynXHUwMDFm2FNeyUVcYnpeu23Uni86XHUwMDBmeChcdTAwMWJcdTAwMThYPzWkXHUwMDE0wFOSUnrgvufCJrq1QVx1MDAxOCPaNeZcdTAwMDRFqnVyajOLvIJUgKQpKixWLNSz6UE/nVSCsEs6n4dccvw0W9H8tK2AOVx1MDAwMHv1wVZcImHSy43hslEr0ThcdTAwMDVpRushpYsq/SSE9GusxSgy+Vx1MDAxMkZO4Mk5uC9kXHUwMDBiXHUwMDEzjouI4LUoKSwuS0uhv2+3xNbL8trq8WqTrdiXSmXteWn7ejNcdTAwMWKrMVx1MDAxYVeBa4RjoeNccnGvhlxuT5NcdTAwMWNgY6mkwcYrcmOBXCJNYSbVqVx1MDAxYmAs9pZcdTAwMGZD5XzEXHUwMDE4o85cdTAwMDevjWOToqVcdTAwMDGGqvV5UiOENdDCcNOjlOmWyojObHX5b7VU6bJKP1x0Kf2X8pqN9lalfHiwKfdO51x1MDAwZqbcbMuv7Vx1MDAwNkZRXHUwMDA0d6NrXHUwMDFhXHUwMDBlySzj3NCQ+35rIa2OLCXfJf7rQ0NoJNlVkk+Fd1hcdTAwMTNwgfpLbCaDKNKNRTtsLIIxXHUwMDBlpiWnYcpBqyBcdTAwMDZYXHUwMDA1bz31t7nxsVxu70GOQvG2Wtiu3N1XWvGHObL6mlrlPHbcRLCj3YjFmHojXHUwMDFkPVfRXHUwMDFm1lxin/ZXdDpcdTAwMDPj01x1MDAxZbNcdTAwMTJcdTAwMTKOiIlcdTAwMTW0XGZrdN7UXHUwMDBmpZ3ltery1qqtXHUwMDFj7Fx1MDAxZu7x64dGik6NS6MzOLyBSDiQVc1dXCJOXHUwMDBin1ZcdTAwMDAjPMiqXHUwMDE1YD39ZzZmjc64XHUwMDA0aCczOVx1MDAxYZ1jXHUwMDAzKP9Qo/OrcMxpdv10NXW/fVNrzyh27uaXXHUwMDE1i/HsfqD5eGFwJcfz6s3siTbbm+32/sXDip3npdWMlVx1MDAxY4OP21re8mrm+mz3XvHVp7vWweF1xoqWXHUwMDA0N+gxdIZpgFmPf/ipXG6Rwfd1cIWIXHUwMDE3kXBcdTAwMGXwrFxylYD0iT5cXFx1MDAxYzB9a0FcdTAwMTB5PLr5LrFORzRcctZcdTAwMDJHhFx1MDAxMCa2JnKyPuE3oPshXHUwMDBmdEtcdTAwMGZzxHhcYrold6lhSopD0aDvTEY9K3T/lkQnoHtpfWdue/et1XmMe5uHgFxcP7S/XtZbb/NcdTAwMWbpZlx1MDAxZWyphlWFUPpXUmNcdTAwMDJuZ99cdTAwMWM551x1MDAxOYvwYLlhlppcdTAwMTJcdTAwMTNcdTAwMDaAhntS8ZigubFMKFx1MDAxZdjka20kocm0XHUwMDAy1Dnl+WSRXFy6XHUwMDA1eFxmW4BcXJ4+88ZwXHUwMDFkXHUwMDFjLqmET61cdTAwMWLTXHUwMDEylML4WCBmZHbBxu7Mdzn66ZJKP1x0XHUwMDE57Vx1MDAxZS6B5SOr2cixs1xyOI0nXHUwMDAzXHUwMDFmXHUwMDE4Ns9Kn2wgUlx1MDAxMbd4XHUwMDA3Za3B/bhOLlx1MDAxM8hcdTAwMTRcblx1MDAxZGzaek/J4enSelx1MDAwM8+84zx5SqKzelx1MDAwNdSCXHUwMDAyvV7J5NzfL4qE6tWFnYXa3cPiZWV3X96vb1x1MDAxZu/4m2zmUVlBtpeSW5Z2XHUwMDFj9G+YMkaBP8FngGCBXHUwMDA3JYNcdTAwMWLa4ePMSUF4RVuqkvaRlqRH1KHgKV7sYlx1MDAxYosnXHUwMDA28u0xdlxy5NNcYmrmtKGFX8G+XCJcdTAwMTGf1pNcYnpILj3n/9JcZm+qpNJPUka/wkDmXHUwMDE5+c2kI1x1MDAxN0RSnVx1MDAxNFxy9+t24Vx1MDAxNWIzJ63SXHUwMDFhXHUwMDA2ktatgDYmZ36PKFxu+4lys91cdTAwMDM7f7m53DxvbF6eV+TFXFyRPWW0VdLIiHtmQYmp6r8vb1x1MDAwM1tlXCLmJSXoJYunXHUwMDFlY2SOalx1MDAxNilYXHUwMDBiX81cdTAwMDTzy7RoK7LEL1xmXHKn4WJirNKN1fOnjZVgVmqH51x1MDAxOapGXHUwMDAxlUlcdTAwMWR7Y8krV9z/Vn3v+Fx1MDAxYqt0UaWfpJB+hbXK3H1N6Vx1MDAwZTBNxpV3tDjDxkY+XHUwMDE3ur3XzDjwVOppt5bhOsfPWFxyjrxccvE7pVx1MDAwMiHnznrNvOprzHSayVxi9oxcdTAwMWKQcVx1MDAxZqtcdTAwMGb+sFUqoo5ub4WEXHUwMDE2XHUwMDAwmFx1MDAwM1x1MDAxOWbaXHKtwYc5iDNn8U3BXHUwMDEzS/X6XHUwMDEwu5bq5fO0StL+clxuPlx1MDAwNyxcdTAwMTXXMr1eXHUwMDE2cG0tXFyFf6mpmkpcdTAwMTVV+klcYukoLdWfSDD/vrVcdTAwMTg8OHSwtWCdRZ9SQMjA3VX/QE5cdTAwMDPy6miaplOaalx1MDAxNJPURkRcdTAwMTBNQFx1MDAwMefMeumDbdxw9Sg0QGl+JrWZMJtUezHNPm0vnKdMlU4mXHUwMDFm6UM2WXX/YS5cdTAwMTijXHUwMDBmqkzz/P5Gc5EqqvSTXHUwMDE00q9gNrlm/1x1MDAwYm2dXHUwMDA0v/GWaVx1MDAxZvenu9Rm/JjM4CXsQ5ZcdTAwMTArXHUwMDE3gaBcdTAwMWK4zmByKul2+Vxit4HDL1WSm6TbZVnkaS2pMlxu+Fx1MDAxMHNcXHtsk41cdTAwMDCu1IVNXHUwMDAzbmNjrCe26fUxdm1cdTAwMTP/tG0yUkPFPFx1MDAwZjpd1qWG0J0xNKmVj8+8wNGaplRJpZ+kjH6Facq8kJdMk3bgXHUwMDA3NFXISEPL9lx1MDAwMl7XOJmmcIlufFxi0lx1MDAwMFatWWeujcnCqt9mXCJfbtrT+sPJwu3yTeu4tb28fH7gf6d2509MnElbUmC1jVx1MDAwMJOepiVo309cZiGiXHUwMDFlbqbn1JSinFx1MDAxNqbv1D4/iKfLMCH9mjlHe5+ZUaHxrkLxyElcclx1MDAxYiFcZpVcdTAwMWQlindAiOAmxHefx41gV1jd1clhqcyfW42di9VcdTAwMTa7YTeH1/GSl39WjqfXXHUwMDBl1ta3qjcn96WFjeupy73p4nuByn+nKVlGf2HUXHUwMDBiMFxyblxuLpsxyy0tMox/PnHLhlx1MDAxZI9cdTAwMGJcdTAwMDaChMdNNFFK1etuWSr3hVJY7TskZVx1MDAwNH1Kv1WZXHUwMDFigyuZq/rqt8ZcdTAwMTdccoBcdTAwMTYplI2lfHNBy/Di4qFcdTAwMTbMJSdcdTAwMTd8gCnIlHPSZN+y8sSKLydcdTAwMWJzy3tLO3fPu3f13e2n3d/kM3/ShJmIk3RS80RnbVfXXG68mjSh5f/f3pX1xI1t6/fzK6K+z2XteXgkzFx0M1x1MDAwNEh0JMQ8hHmGo/7vd32GXHUwMDA0u2xve7tcZoHuKrVaraa8yt5ew7fmXHUwMDA0rdzGXHQure9vXHUwMDFiJ49AJvRcdTAwMDd6bSi9Uv3QK0qlXHUwMDE1vvM7vsZcdTAwMTJtyICQISdfg1x1MDAxY+9cdTAwMTJUKkhy0zRcbsOCd2KmXHUwMDE3W/O7iVpilEjWWStXaOOT+zend+7i/vPExMXotmdzZ1x1MDAwZjlcdTAwMGbDXFxcdTAwMWS4zbnl8/Nv59tcdTAwMDc/jq7nV6aX/cfUeNVHi0/Pi1x1MDAwNGPrlOKENMlcdTAwMDWUdfRcdTAwMTBcbvfcK6mdZ1qIfGtm8SX9eZWn/lx1MDAwNSqvMJAwp/Wqk8zSeXrvUjZcdTAwMWGCl6q9b/Zh7Nv4zyV1pbfHR2d+LEy6XHUwMDA3+fHUXHUwMDFld1x1MDAwMuNmXHUwMDE1dkQj4dGn9sC6xMiGM848SU/1vqlB1Fx1MDAxZcZFasJcdTAwMDZYXHUwMDFibb0qq8DGwm5cZlMjNtJcdTAwMWMjzzKH9qz1jOBcdTAwMTjokVx1MDAxOX70h7VeRvZ0lOyFi727XHUwMDE0srbCJER1/1x1MDAwMicwyFx1MDAxYym/5k7Q/ZFYnDvU62s7S5t3XHUwMDBmt6Mjcu3zxPtcdTAwMTOmfjeIwC5cdTAwMTKi5O8xRT5Ef8smaoVcdTAwMTPutHFcdTAwMTjvQ1wi+EqYwaShSy8sQVx1MDAxNyFFXHRmILc7sVx1MDAwNOeNwjxlXHUwMDAyXHUwMDA2xVx1MDAwNlx1MDAwNql1blx1MDAxZvH7kVx1MDAxZPNcdTAwMTFlp1xue1x1MDAwYl5M1b0szUFjmI1cdTAwMTFcdTAwMWM3f/+wf7T5+X5kcoGvrT6c3313y+9PcIhDrVx1MDAxNFx1MDAxOHlOdpZcdTAwMTCR6Fx1MDAxMyTyQlx1MDAxM6lcdTAwMDXZXHUwMDE35n228+lZkJS2XHRsXHUwMDE0RE1lR7F0KUjSs8RKryXGxjBcZtUoXG6SltgmY7w22lxu733BXG5cdE+2UkhVXHUwMDE3S/g3QW9O9lx1MDAxZIucpbFcdTAwMTY7YFUuueI9MrVeXG6hXHUwMDFj8YavRd5ETSEyQeBEXHUwMDE5qWyuXGJFeZ4wQnIokZXKvSxeXHUwMDBl7KL2iWL03jw6XHUwMDFiXGZdkaVXeOG15Fx1MDAwNCFcdTAwMTVvXHUwMDE56sFcdTAwMWTxgrE+S1x1MDAwZoFcdTAwMTIr6EeUN2h9XHUwMDE2dfSqjrrwot/Ii7D/XHUwMDAyL6JSectMr1VcdTAwMDH1kINhRUzkxGu7sHB4OLl8ePnj8Hxs556vSVuhvN9N6FdcdTAwMTJ7Y7FcdTAwMDZpSYN8Y7+qNpwwXHUwMDBmxpBrrTnPXHUwMDA2J1qo6r30U1x1MDAxMvZVKFRiXHUwMDE2XHUwMDA1pzJXZJRxXHUwMDE4WOLIP3fWIKNrMmb3l6pcdTAwMTZYg65sec/mv1NV90h9SkuunsaQXHUwMDFk0sk55WpcdTAwMTJmXHUwMDE1WUaE/Eldel1Ljl5AQpIhNPlcdTAwMDNYXHUwMDA2IHP0elxmi9ewoUU5UrQk4vXav0dcdTAwMGWpYVxcWKG5Q8V0Tl1cdTAwMTPg9l44T89AaMNZV0dO+URyr4WwVlx1MDAxMzWevz9hXHUwMDEzglx1MDAwMXRXnlx0jJrjtbf33tS1+1x1MDAxN6jrUNDH2upknVx1MDAwMX8r22hm5JPGPt80atxcXJ3cn54ue/e4/3197mb1vWtsgb2ozFx1MDAxOEkoW2X7XFyeNTY67bXHRFx1MDAwMmOss4OFeKo0Nlx1MDAxYZKFw95ljVx0n7YkxIONQVjXpFx1MDAwNFlRT1/sV9hYmES3mZ27/H68VP9cdTAwMTG91GC4VFRKjsK2Z2mbXHUwMDA3S++/67PVz7tnXHUwMDE3qyMjhys7h1x1MDAwZo/m0LyV3NRVvFTKjeVknkh8hHc2O2LyWW6sU4nT2NTFMC1ZXHUwMDBlJDdVTqmQZIE85+RGwFx1MDAwYuGybPogT6xcdTAwMTVcXJOHgiiQKiBcdTAwMWTOPbnNLFvf935cdTAwMDRn5J8mOIFlhPRcdTAwMWE5XG7WXHUwMDFhdbM9iY4xi9OLa1/9529fl88nNn4uPKyvLL13k0P8mpCehlvt0PlVMDlcXCdAZ1hcdTAwMWPovVx1MDAxZEx0qkyOw3xcdTAwMTkyJVxiRjOvSnpcdTAwMTU84U+H8mWJgeAqk1x1MDAxZvpcdTAwMTVcdTAwMTU1RmOB/btxXHUwMDExMnLz+Z8mN05Vj89gzFx1MDAwYi6aTe58kpvLrSt27Xsj+mbz5Hb087fDg5OTN3Ou25pcdTAwMWMuXFzimSSkXHUwMDA0viyEQa21aLlcdTAwMTRGckfa/nXyXHSChMI78naEQeu+zkyOqLA4hNpcbpLD4YQ5JMffoeiM/sNEx1x1MDAwNVxu962WiLur5jmFTT3//a7nN1x1MDAwZi/cXHUwMDFhW/l+uyrN+dV7tzjakyPPLJZXkFx1MDAwZtG/blRh4bPxnHH6XHUwMDFizzaZdF2QSE4lXHUwMDAyxtozL5mWRpSNZnEsMaTQLP1cdTAwMTmrf0xBeDTHlKHs5omWXHUwMDE1ia8gPGNcdTAwMWZJeJ7dj42lb2eTTpxtjF6efD+aOpg8mC1ZNVA2Z9N6XGbbQlZVmNzk6GfG4lxcJthwyzDlpGSTJSltkyjjSI9cdTAwMWElyIiVwFx1MDAxMPLAXHUwMDEzpbTkXHUwMDEyiXPL/m1tXHUwMDA23bNrfbvCeHm7QulGXFxlLfO6rGVcbsv8KjWvYlazhrXgb1x1MDAxM1T7PfLr08Hm7e6nzU83V7uXn+5cdTAwMGXOPt1tnl5jk9p/T88vd/fOLk8+bW5f08N8on/+e3pwePVpe/N493Rn8/LT/tnZfnZMV3alXHRSX+RcdTAwMTJz47TUJjtN/1x1MDAwZlx1MDAwZfns9Gm7XHUwMDE5XHUwMDFkNrsz/vVs1t1cdTAwMWVN31x1MDAxZG9M3Ti+OCdGilxuae+SOPByszBygs6X3CtN8MtKlVxyXHQ8KSXyLyWi+NYp51CZUtRKZFxiyVxcYtez4TK3n/ulztQnTFx1MDAxMiVcIuc9M9xcdTAwMTbVkk2sXHUwMDEyiI34NDr+ukoqXGI13k5FrYyxeXlxtewub1x1MDAxNzaXNk5cdTAwMGZXZ5e/ttFAXHUwMDEzzTVcdTAwMTBcdTAwMTlcdTAwMDYnXHUwMDE4qaGyLm8051bpIIlkXGLjjcpcdTAwMWFjVFx1MDAxMHnLLFOl8adao1TiMGlcdTAwMDKjrrjQLD9cXKz2ap9cdTAwMTjrvID/T1x1MDAxNzPho67mhDexzo9p1Fx1MDAwNlx1MDAxOK5M1OXSJVx1MDAxNoiAc88x4EhHXW0s+rLpPShcdTAwMGKvmMu4W+dcdTAwMWNz15RUjCmjPY+72qhEKyVcdTAwMDBeXHUwMDA16nFyP97/SmRtjpCwXHUwMDE1OZzWOmdcYjdcdTAwMWKTT+jhJVx1MDAxMW4njrNcdTAwMGWTgG3twVxulVxiUmupYkK6I98uR/eOijxtJNZcdTAwMDaJ2upcdTAwMTCVTrDz5DNwT6+b2XxjcMpcdTAwMDSkR336J7rBOnpamcRcdTAwMTmrOXNcdTAwMTg5nCVWVLi1bGBkQpqcIcal6OzUYORIhSeYMyU9vVxcbvmA5Mi0JE+ZXHUwMDAyskPkmOnByHmpXHUwMDEyxFx1MDAxM61cdTAwMDFcdTAwMTB3zFxmSM7aRNMtXG5cZsg1dkBqZFDpYVxyWV5MM7Qsv5uyXHUwMDE1vVxuXHUwMDAz/db0XG6WjSDT1Vx1MDAxNXlcdTAwMGJ9NuLq8OTmmKzEwvOfXHUwMDBi8Kgq31x1MDAxZIBJjye3q1Nfls/2z1aml9jRzujSw1avOUzyhrRcdTAwMDfWbJBk2P4hq6Q3PUlcdTAwMGbG3WhvlMt44b9cdTAwMGJcdTAwMDKNSLzRSkpsg3S8bIqg9ollinQouYekc3RxzOpcdTAwMTAkXHJcdTAwMDCSJmNAXHUwMDEysTUxb6mjJrNj1frLbolF6Fx1MDAxNWvetaP2TlBS7tu9XHUwMDAyZqq7/Olcbky9T1cvcZZTbb1cdTAwMDKKqqX3ZDS1JZpET1xildNFvYJNra/glJJsNICMQYogN1x1MDAxNVx1MDAxNUU80dqyp2VcIqSGXHRUyind98hP2I1sJPlfZNdYfXts71x0sHnBjceylb5uMeVcdTAwMTLUXHUwMDFkK+ya1fRHXv/Injxtjf1cYlx1MDAwNlxuzMr8I2uXpFx1MDAxM9rSrlx1MDAxYaxcdTAwMTSpv0NcdTAwMTSmklx1MDAwMNFXjXOeZbLImVx1MDAwN5D0rjWmbYj6M+SaXHUwMDE4xyjiNclcdGyyvtIvh7FcdTAwMDV053S8pF5cdTAwMWJcdTAwMWNhWkWssFFJOiucln3LXHUwMDEwXHUwMDE5ejGIn1x1MDAxNfNcdTAwMTDmXHUwMDA2jIjmcUV8XGLtTSpaq/xcdTAwMWSmSUxCLsxbmc7nrFx1MDAwNXc9QZCH7I2AQDC6mz6CkiXY3YWQvKRHry+fXHUwMDEziD5cdTAwMTKGdYxkxVx1MDAxOG5snqBiXHTKMEnt0V3SYTeQXHUwMDE0mXisXHUwMDE4g9OAifR5ejqdJINcdTAwMTZXYlx1MDAwMq7ri/FIUlx1MDAxM1IjpE6wpYOxvvsrWMd6glU29+1cdP5J5PNwOn50uzQ7tfFt3yx8nf9xvTp+XFyyXFyiXG75OKZcYo2Si4O+v4xn+1x1MDAwYvrQXHUwMDFihpJ15NJwwYvIR4FcdTAwMTFIzkk4mFEqg51ekFx1MDAwZqEnjfpbq1x1MDAxOcroMomOIfLpXHUwMDAw+UxFIFx1MDAxZjSsM+VleXjIVoeo6f0zmUtK/KOQT+/J3SffjCy/4C4yytJcdTAwMTMq4d5Ct0prXHT6xIV4nnCCNk5YaVx1MDAxOWOcR/78k81FwVx1MDAxMFx1MDAxOTWjWM7g5Vx1MDAwMiOuXHUwMDAx6oJ9RJyFPEDDXHUwMDEw+8h5gLknXHUwMDE1uTFClWebXHUwMDFhXHUwMDFm7lxy05aMLs/p/jykIVPTXHUwMDAwXHUwMDE2VilcdTAwMTR88vijiXHXJiHwYUXa1yx1X1jJJFBthMU0XHUwMDA3LmxgOcNxJYSJXHUwMDA08Ygm/Mlkg0JxMkw2IT2t8XKd03nTXHUwMDE5b4nRXHUwMDA2qlx0pVx1MDAxMDzC2lx1MDAxZpPvOrJ084QrXHTCM5NCwnp6iqCHND5dW0PwJz+YvPCu6ulVmZS3pvcnzfrFKDv6srHLjva+jm8tzd/wh3F/VTTrZYloQsmJRnZYKqw/LiSiLcAsSTY9OnlcdTAwMTCiZFx1MDAxOCe2TmFCXHUwMDE4aVx1MDAxMiNKykixkFxyxVx1MDAwZoZcdTAwMThYw6coXHUwMDE49H92XHUwMDFhOsY6Tze3zk5cdTAwMTHYxnaTXHUwMDEy4yyKOyB/22ZBypqcVtd17oZEOrsyo0X6eIXuYp+O6NPW2fWnu92tg7Ozn6X5YJGujGJMOZhcdTAwMTSRWcPxXHUwMDA308Hhu+8mv3txPbOoLr/Y9anel97WiT5cdTAwMTRXU66JnJP/LWCJ8Y6005nagWcxNzpcdTAwMTVzblx0uzFRslx1MDAxYVxu61xmjcTsLiBcdTAwMWU7lPP0/7aV8y9cdTAwMTEoPN1cZok2tjJBXHUwMDBmNY5cdTAwMWGy1tZ2vjRcdTAwMDCBbdVcboT/XHUwMDEy9NHjQ/qdX1x1MDAwYlI/Ta2sLHxcdTAwMWM5XHUwMDBm3nxXK15D9cymOuTMXHUwMDFkyjZUTFx1MDAwYs2Pi5tcdTAwMWJz8nj7eDR3d3Q/bXZPxcL6+65nJkfDJc4qTOk12Unzv2dcdTAwMGJcdTAwMTFcdTAwMDK26CTS0tnqosxSjVx1MDAxMluYaZxNsCtTXGKOjlx1MDAxZVVSl+lcdTAwMTCfU1xu4Vx1MDAxM1x1MDAwMt3ZgbK/XHUwMDFkbYv8Y3aQVHlcdTAwMTRgbO98bEPdspWD8cn7qbuHu4fD+4liXHUwMDE0IKrqS1x0YzLs8qKjvrYvyHytISeaV3ddKozYds1qUp5Y//v0yFlvfGT/YHZpamp/Y/mrndxcdTAwMWVtw/pt1lx1MDAxYrdkfctdQq6gYlx1MDAxY8pd9Fx1MDAxNyRLazR5z3RcdTAwMTZcdTAwMDTLWWCgSYPtxv+3vbujdjaLLE9uOVxcfo41sphcdTAwMGJeMn5fekVehUHDjiBcdTAwMTmVxc3G9LYkJqzWsfzixdLSyvfJXHUwMDFmXHUwMDA3XHUwMDBi++Z+fJs/Xt+OvKBk+sLMot3n62vjXHUwMDE332bHXHUwMDE4+/51+WqGrWS/MHXTu7+Zv9x1K1x1MDAwN9/1orzaZev8IPuF0ePlnplZv7v7su931y8mL3fGR7ezXzhf+fpFf+Vq75rP7Nqj1d7Yj93b7Fx1MDAxN15fLtv18L9mM3i3o1xcXHUwMDEyoZiVmONcIlx1MDAxOLGvzNVcdTAwMGVxXHUwMDA2XHUwMDBmU2D3pHFee1/ffq84VK53ziDN4nNePHmxicNcdTAwMTRFXGZYVFx1MDAwMFx1MDAxNnXkNKa+sydEpZl0+SpcZnjQXHUwMDEy0SqU5Vula2NSlVx1MDAwMpQ+rESMwabNOF6y2pRcdTAwMWS56Fj5ylCCgSl1uZPrWTpcdTAwMDe6NdjEtFx1MDAwM7o2wNV40EDGUsy8pqXIMFxcXHUwMDA3k1YyhVaFJVvaMlx1MDAwNt+msVx1MDAwMZl55EczR/LsbuTb3cZWj1x1MDAxZp0uT228d1x1MDAwM1wiXHUwMDFjcasg/kdXPit2XHUwMDFmXHUwMDFikZBWdojlKFx1MDAxYlx1MDAxOLE9kFx1MDAwNdEm0YBE1mNcdTAwMTB06ThawVx1MDAxM4Vl5iTzXHUwMDE4XHUwMDEwWTKXXHUwMDExQ58y8c1cblx1MDAwM1wirlbvr0YvJ/j41ez0zk+x5I7HVFZ568WZy1k5f3G+3lx1MDAxYlvZP/06vTk785D9wtXO1enU0fL8/YQ7X9yaf7Rs/eBoaEAydP+8XHUwMDAxUWmmQZFOxehcdTAwMWSXmfWGT4GZajV0XHUwMDE1g+KTdlNajrld0mMqWzMtOfthtCRcdTAwMTnh6sY/oY3OJ1x1MDAwNevU5OOXXHUwMDFiNX6yPb+87Fx1MDAxZlx1MDAwZVx1MDAxNu7GV242XHUwMDE2L963mvScfEjrMFx1MDAwYlxuQFtcdTAwMTQnXHUwMDA3KpNwXHUwMDEyM4ZSeK9eR03yJOU+QTxGviX59iV6XHUwMDEy7ie5ReT5I1x1MDAxNpy902c9icZcdTAwMTlms42a5XpSPZjth9XxhZFD933mbKa3OHU5vZnVUd/0xsbc3OmcuZh6vNtcdTAwMWH58Xl2byGnxPZuZ75srM4tnOzeTMtcdTAwMTO/xdzcysZQT2bo/nk92avmqfTPXHUwMDA1dmqm2+Y+jm5TxXKGl1x1MDAxOIJD54LTzXWbPVx1MDAxYr/fXHUwMDEwq+bwbGPilrFHfrp132rNylx1MDAxYkJAXHUwMDBmd4ownmJpiKy/ikdcdOaR1SXvSWLzcPVcdTAwMTSNQXRcdTAwMWIxXsKUxXRMJFqFLFx0nGmNciPs9jGMW15cdTAwMTI4k1x1MDAxOHhpbe2KlVx0OaNcdTAwMTaO7cTkztLiw+XN3I5cXLyeXHUwMDE4ap43dfFcdTAwMWSisqhLwCBAST5IXHUwMDBloWmMVyWlRN4qgni1iXqJUjPMwOZOWLSD5H1ol1x1MDAxOE1M4zgqjH19O04lN6a/xTHJXGbzMdBLLV2tg69cdTAwMThPiIaki7Dc0OZrSjF1mHRMOlx1MDAwMYaQKqt/VkaAXHUwMDEzxazeM8yyzT1rQUjqqFx0gsqeXHUwMDExRsY6ZSb76qT1c72Hcpg4bLipXHKO4HBcdTAwMWPBbkG4mPB1vt9NYFwiXHUwMDBmoSlPtybQOlr7KkSCr6VcdTAwMWJcdTAwMDIwmlnK3NNKune0zDNcdTAwMTTtoPqmmX2aj7JPTcZcdTAwMTW+deBCm+otXHUwMDEznKe11Vx1MDAxMVNs9MqtdmxXLSyvzp7dzS1e8qW7VtOf3jJyoVFcXJVmfaTJXHUwMDE0XCL9noovWcLJMSHpZWhPflx1MDAxNbOlyTZcdTAwMTKEkN6RiFx1MDAxMJIyJYlw7ZHvkWif89p6X1ikI7BxXCLb+T80Wu/UaKGrUlwiyCTSUkuvc3aBuC0hlKzR6Ucqzta3Q1x1MDAxMN8kXHUwMDEy68pcdTAwMDTxXHUwMDA2ofB8dy95m1x0priRmVTQpLW6kviYzFx1MDAxNnmhiu5ReC5ykWTBXHTsM09cdTAwMTZcdTAwMDPhPOZVbdi8mrvx6aXV3Vx1MDAxNqv5yH9wrL74UnFMQkNcdTAwMWKJxMrUvoZcdTAwMWPHXHUwMDEz+lx1MDAxZMFcckFcdTAwMDJPVrLWcnFF2l9wL1F3q4zP10r2SKxcdTAwMTLJNbkuRkt0XHUwMDBl1NLzZLlcdTAwMTRTymFcdTAwMDSW4303KIRPLFo56ezIwJJWqSPYJni+8OFNk1TVRSjGkr5cdTAwMDavNzZN7uzhxN1s395MLFx1MDAxY11+N+zLeu/h6L2bJoy31l5cdEx0zir236aJXHUwMDE416HQWGN0RvXw8iamiXDlpipb2FwiRcI0etC9JOjGSiZcdTAwMDIpj05sklx1MDAwZU1AXFzKzFx0/Vx1MDAxYVx1MDAxMIVAXHUwMDExqZGhaXr3pkn6XHUwMDA0ezHJlzJa5Fx1MDAxM5yoXHUwMDFhJ3DPsIXLKFevWCV3iUCzXHUwMDFh5lxuXHUwMDE5rvL5TcJdXHUwMDA0451cdTAwMTHakZqm/6xV+yh4cVhjhO1gos8jYJilbtGh51xy2aT6VVx1MDAxNZWMjVx1MDAwZua2k7unJUdGi7w3XWs1JZlcdTAwMTGHcW0oXXaS2/7uMnJBPEZroXPBkXqrtSOC01x1MDAxNU4rdMuRWWN9S/vIXHUwMDFi5djYQcZJY1dNfVs9tvyhXHUwMDA3kyjTsznR113mZYL5XHUwMDFjgpHpxHjt2jfSxjAtfnTD5HV1XHUwMDE1NHEnRt9ERPpcdTAwMTZ6Z+uL3m2uLIiH0bO5ezV9dPz4vlx1MDAwYuU8k4SIXHUwMDA0yTNyXHUwMDE0TFx1MDAxNrJcdTAwMThcdTAwMWFNjERHp2tv/GBZjP7v/J6Xa9FgoMD72ENVNmnaXHUwMDEw7iU4LF26/0Hz4thPJVx1MDAxZIpD6uzS0Oy8ttlBfzXqf9NZlMblXHUwMDFjXHUwMDA0JVx1MDAwMeh12juOXHUwMDAygvqVS1WsgU+BKWq1ZmKMsMTIXHUwMDE2W1x1MDAwMrNLKfEhm0gunJSYNkD2ktf3KrVRmktRSvM1XHUwMDEzIc9DV9nj0cX8nDz48sNsPlx1MDAxZd8u3dycZTyO6o5cdTAwMDFBXHUwMDA2NfFcbiBCXHUwMDEzcuWFLIFBXHUwMDEzpCNcdTAwMGJvYccz1f4vXHUwMDAzf7FcdTAwMDBCWHKaOZZAXGZ7g57+b9uegeW/6nnoWV0qZrnRtthcdTAwMDWEv1x1MDAwNVx1MDAwMomE76TwQjdcdCTGqEjLmfeyXHKn/2pcdTAwMTlYO9i8vto8P/94fUHVd95NT9Dltlx1MDAxZftpej/Px0ZcdTAwMTbO2drJ2sX9/lxcUcIvd7evn2QqL+ZcdTAwMGWZXHUwMDE31DBcYmlFdlx1MDAxMuCvQbSW/FxmiTXlQslsXHUwMDFk72/zzkxCalx1MDAwMG2+ytF3ynZmXHSMh+DYmOWYZIpcdTAwMTV7+qvFvMnM8f5o7Z+dJV1cdTAwMGVNZndcdTAwMWZcdTAwMTaW5drnqd2JUWtHJpePp1x1MDAxZlx1MDAxZkqWdT1vXGKwKNtcdTAwMTCmTIKdr66Ct+RcdTAwMTSQV6NcdTAwMWGlXHUwMDAyXnTLVnuzXHUwMDE1o1x1MDAwN5TMLTxcdTAwMTlo+PL6/v5PsTc792NxdWT+9st0b//bmG/O98SOXHT5a1x1MDAwZfu5ZP/uXCJyXHUwMDBlMJ7ZXHUwMDEz9iDvkFx1MDAxN22bkYQmyFx1MDAwNFwi7+Wxf7LI9KRKk7ScmbxcZnRau455Preb4uMzPKJcdTAwMGV0oFx1MDAwNduU/pSqZnjsw+Qy21x1MDAwNdSI4bc/XHUwMDFlw9/Of2NuZHvazK6pXHUwMDFmc/e+Rzx8V2T4QutcdTAwMTiemMA1S4TSjDkjODf9bd5cdTAwMTJjXHUwMDFjeDpwXFxaZzOn+TJwnKVccqRoc1JGS1HC8oHvXGZ5voTnUY9vjZflTO9cdTAwMDLzVaQywmW7cFx1MDAxYjH9zsdjeq9GP39/nNnQK7di0oxcdTAwMWTv/Vx1MDAxOL9abazlJcZnOoZZuEYro1xuXHUwMDAxXHUwMDEw8itcdTAwMTNOcqSwx8689HW8XHUwMDA01ZVN4KHSx1syrmX9fUJcdTAwMTisjnSQXHUwMDFkIb3jnbP95lx1MDAxNmO6gvO3L8+urnpcdTAwMDQyt1x1MDAwZj5cdTAwMWH/I3ad71B+4X9blIpf7O+Ry9SZnZ/NuH/343H/pV9b/rrgRkb06IycvLzfXHUwMDE5Pf+50lx1MDAxZPdrw1x1MDAxMobqJLSDcFOc7THk/lfkfjK5xCqO6TL1b21lkze9XGJs/GhcdTAwMTa6fmH/vY/H/pNK8dHJrZ+nd+ts5IJN3/xYXVGN2d9oY1x1MDAxM8GwXG5OeMn6PVvUuVwir2WBzU22L+x3rVx1MDAwZrfpXHUwMDA2U8U0uVx0XpQtrGKOJ4SqZLqTXHUwMDFkU1wiI5h/l0lcdTAwMDJe/55cdTAwMDDWfnlcdTAwMDCrmDn6XHUwMDE16f27IDKePjIz8jPX2pdcdE5cdTAwMTQsXHUwMDA2N1pkvYtu4lqaK5NpXlx1MDAxYojZXHUwMDE3zyfkzM+Rr3tcdTAwMGZrbuP45pH7qZ2DXCKzl49mdNrqRGNIXHUwMDE4OaPC91x1MDAxNyBcYnScYog4amZcdTAwMTBcdTAwMWYowvvh5o62o1x1MDAxObdWJnrfxua+P2zvT0wvXHUwMDFjPchvZ4e8zWjGw+ZcdTAwMDFezkRcdTAwMWGrLY5cdTAwMDKB+KjMXHUwMDFhn37Xgey8Jt3XqFY0Su8rm1x1MDAxZCs0XFzdMVxc3fH8XHUwMDE5ru5cYtNcdTAwMWKu7mhLbri644/QK5i2N5x0ebNysnDH5dHqwqmZ3JiZ3Lg+2N9tipIwhJZcdTAwMTjGYUC8M6ow/IC8XHUwMDAxmXiFLkD8W1x1MDAxNuP+w9VcdTAwMWR/XHUwMDFjJVx1MDAxZDVHSYrsMCr5ykGSrVxcXHUwMDBiTSZcdTAwMThQ2rl/KEhcdTAwMWFu7lx1MDAxOG7uXHUwMDE4bu4ooTjc3DHc3PFON3dsTWz3Zs3I1sz+2cPa1eXtzdj4yHFj4INWMGdJmTDDdHbO5DPwIZ5JXHUwMDA0vS3HkL3NjFx1MDAwNFx1MDAxOG7ueDfA52dz4EMvisHjLV3coVRlZo2MNpOo8up6ZvA7XHUwMDAxPsPFXHUwMDFkmaNcdTAwMTgu7sie3nBxR1x1MDAxZL3h4o7urfpxz0zx61x1MDAwNzE5OX8/vcN+3t2v3fOmVlx1MDAxZLFa9E9gVKOT6FPuN+vkiyTKaOetXHUwMDAw/iyWt3ByPlx1MDAxMu+9kZJ8tvL9XHUwMDFkXHUwMDFj8+6grlx1MDAxY3Fy6lxmXHUwMDE07PqwSP+XkT5vbqRcdF3CYXOlRrpYXHUwMDE08FLi64mFVffJTFx1MDAwNVxcXHUwMDE2k7l/XHUwMDFkXHUwMDFibcGPab6dNJ3NWcg8XHUwMDFi1ntLXHUwMDAxUjzXd2LqR1x1MDAwMItcbjlJ/6ZATGDEO2tASuVcdTAwMGVE1ad2XHUwMDAyP61jn8PlftyK9EiFYGRcdTAwMTJcdTAwMWJcZkKmn6m+XHUwMDE3XHUwMDE3+35IQVW/IVx1MDAxZvtkXFxcdTAwMDXujbO4d8Q1XHUwMDA3MVx1MDAwMlx1MDAwM5b3s04sKZM7ci7q82lW48dJLMncy75fl9HnUqXi25FcdTAwMTMs/zg6koUwXHUwMDExqvLhTO3ZiJAgNrleVr9YXHUwMDEzy8BChVSMi+NcdTAwMTORXHUwMDE3TTrnuitkSFx1MDAxYUW0iiPHr/LNICVcdTAwMWL1mmWe61x0KUeerfSVL0qYSIVcdTAwMWJgOTr12stDb1lE6yllK1x1MDAxZlxmg+aiTlmHOEBGyzb5XHUwMDBiOVx1MDAwMirunHVIXHUwMDAzy3rZRMFe5UFLXHUwMDFi/TQhxScjpdOwwL2pelk1Ib1FXHUwMDBlX6R0mFx1MDAxME+qaNE31TypYiXfhnhSRVx1MDAwM1x1MDAxNlx1MDAxYlx1MDAwMlx0Klx1MDAxNsDYvFpS0ZjFhphKR0JcdTAwMDNcdTAwMTdQTLpcdTAwMWUnuFx1MDAxME81ub7aXHUwMDE2Nrk6j2N1v7apvz7wYuOpXHUwMDA1UXIsSHHV8qDr9ZhzoSfrQ1x1MDAxObVDxZxcdTAwMGYwSSwxXHUwMDFmXHUwMDEyTt2vYmuphWRT+8hD9yHzYepVrFx1MDAwZplcdTAwMGbTr1x1MDAxM2upVeNcdTAwMGZcdTAwMTOrXHUwMDEyMf+g8lx1MDAxZJp6XHUwMDBmXHUwMDEwS1x1MDAwNlx1MDAwMkejXCKZgI6g+tniieX1gOnX8PVcdTAwMDR04HBcIqFcdTAwMWVn1ZJr4r3dPCRvQyDEkvXQk7OA8Fx1MDAwZn597KtGmWjV4fbj4HpiebBpY91qXHUwMDFlcFdsLJDmwehBXHUwMDBicqYvzlx1MDAxMn3UgVx1MDAxOICNNY501Fx1MDAwMT60sdaRXHUwMDA3nGhcdTAwMWJrkbhcYlluXHUwMDFiXHTTuVxiSZyrN1wiXFyGbJqLtVwivM9cdTAwMGZ2T6ZcdTAwMDPTNNI1uvXXh/AmQTBQk0xzXGbUq8/i8JAr7KI1t8qrflx1MDAxN6usXHUwMDAzrrCzkVx1MDAwN6VcdTAwMDKazkVrOl2t6VpcdTAwMTDLa7o2XHUwMDA0QjxcdTAwMTmteXV1cLNcdTAwMDWxXHUwMDEw6vI88i1cdTAwMDZ99mhqJlx1MDAxZqv0XCJWXFxcblx1MDAwNGLfnFx0yFtcdTAwMGJqIVx1MDAxOOijrYKpVuMtiIXcOVx1MDAxZlx1MDAxOUniJmRcdTAwMTS8juWDPI7zJppcdTAwMGZCVqVcdTAwMDW5gK6Kp2ardZWPtsZWsEFcdISOKtbDxFDA6qPqllos1LAhyFx1MDAxOE8tXHUwMDBmXHUwMDE0vI/kcVx1MDAxYtTD0dRCKSiiXHUwMDE0y6LVzjRRi2Ux15eCYtGozIXwcFx1MDAxYnqhpFx1MDAxNovMXHUwMDBm82BcXK9cdTAwMDW5QMqLxeLRvqhfXHUwMDFiXHUwMDAywaPvmFxcg9iKXHUwMDBihFx1MDAxZppcdTAwMTFcYtkqolx1MDAxMM3e1ai4a2rRiD9cdTAwMTja7J5erENcdTAwMTGKlcZTXHUwMDBiXHUwMDA2SzmL9VB8tZ1uQUz0yWGDYFDxmlhm8lx1MDAwMfvZObloVyRcdTAwMThAbkMvVFx1MDAwNFx1MDAxMk+tr1x1MDAwZWRwXG7RlSjBXGJ55+RivTVcdTAwMWbCXHUwMDFj8dSCZS9NqnBqKHR8Q9GHXHUwMDFmRGgteCuoiONFu4Zeg+NcdTAwMGZTiFaYYXLRtqFfmlx1MDAwNyZcdTAwMTBtO1x1MDAwYlx1MDAxNKKxQVDBNUA+wetjkVxckFgs5lxyXHUwMDEyi4b3NYYl2lx1MDAxZFxu0ov21cLUon3kMLno6ETIxkeHhYLEosNpQWrR6j1ELFq5XHUwMDA3iMWHaINpeuei32iQXFw8kFxyUYvWqkFq8So2SC5e34bJdftcIqL1b5BatFx1MDAwMu42jVx1MDAxNiZcdTAwMTdcdTAwMWRBqiHXxJVcbiVUYytfasjFhlx1MDAxMsPU4lxyQpBcXHSA+E3vrtuj6/a9NuKzkCGIl6JcdTAwMTC1aFx0XHUwMDBmXHUwMDExi1Y+IdDRQtFcdTAwMDbJxZuBILloXHUwMDFiXHUwMDE1pFx1MDAxNm+Ow+Q69Fx0WiCPamLxXHUwMDAwK0ArOrFcdTAwMWIk1uGRxedRQ8Si4XKAVmxcdTAwMGU1RCveKVxiXHUwMDEx6/L4481JX1x1MDAxYS7agFxmmMYrOPXxzmWBQnzsZtD8WoFCtHHpJ1x1MDAxMG1QXG7BkSZcdTAwMTGngVx1MDAwMyrhIFM8vWCQL96OXHUwMDA1yUXbsSC1aD8wSK1JvDBMoNOjj4/WvmksuUlwO/h48SYwnFxuaEGPXHJKIVx1MDAxMFx1MDAwMWxBLVx1MDAxOFx1MDAwMWxBL5T5akFOXGZ8XFzBXFxnPL1wYrdccr1BnzCcpm9BL1Q30IJcXLCQoVxyvYFcdTAwMGYsUDfSglqoRKZcdTAwMDW5YFx1MDAwNU9cdTAwMWJ6g1x1MDAxZVewZKpcdTAwMDW5jjVqsFqtXHK9UGijXHK9jlx1MDAxNVCwZLNccr1AXHUwMDFkTVx1MDAwYmpcdTAwMWRLe6CUt1xytWBcdTAwMDFaXHUwMDBiet3KfrBcdTAwMTe7XHUwMDA1PVx1MDAxZKhObEGtXHUwMDA2m0XT61avXHUwMDA06/Vb0Vx1MDAxYlRxXHUwMDA22lx1MDAxMdpQ61jP6W6RWrCVo1x1MDAxNb2Bjz9QltaCWsdqvOO7XHUwMDFi/LQ6ZodueX9wWexY2XStXHUwMDBiO9XUXduRzs3mwFx1MDAxML5zmNGtz1x1MDAxM+zy+fNcdTAwMThtYJezc1xmXHUwMDFhKm/+85A70IjUysFcdTAwMTjYI+vaRenahVx1MDAxYVhdd+1zXHUwMDBlXHUwMDFjVlxmNfo0ub7ohje5JvyaXHUwMDFiUFxi+ydcclxi1Gj+XHUwMDA2XHUwMDE0XG66vsk1XHUwMDAzP3hYn1x1MDAwZtr70ohCUGc3uL6gpZtcXDPwwYU1cYP4e43ubUAhqG3ju0GaXTPowdVcdTAwMDS+XHUwMDFiXHUwMDEwqFHCg1UtN7q+oLZcdTAwMDctZu8gYdMlgf/0XHUwMDExeqWJ2P95/om/Ns/Pl6+Jzl+/lsH+dXu4e/e5bFx1MDAxN7Tb83ub2J7wd3rl3uFxelP/+/s/f/8/TibWWyJ9&lt;!-- payload-end --&gt;&lt;/metadata&gt;&lt;defs&gt;&lt;style class=&quot;style-fonts&quot;&gt;
      @font-face { font-family: Excalifont; src: url(data:font/woff2;base64,d09GMgABAAAAACnkAA4AAAAASqwAACmMAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGiIbkWocgkAGYAB0EQgK9UzWfguBCAABNgIkA4IMBCAFgxgHIBvjObMREWwcgASER8n+ywTb2FajfQPE8UkHiUsDith73kqQRbzCHQxYF4HpT/lph5r51FEYGSHJ7PD83P7PvXdZd2tYw8hRMsmt2agxRpRECyIVBuATEWxAjMKIfIFR32fmF3zqe23FC/7h/77fvuf/GQMKMIFWIPk4cyCBBRJyIAnOr/+xCFWaucwL/cJqbStpJuwBIIEhMMj24fQ/gAfF/9NZJe1mdkpL6F6mu4gjtEeXzssvyKvSqvSDwJYbSpKpYbYNjbAEJdX9lFN76aq5vpkROHHBsmyn9Hfjpr9eADAsnPzh2MM9viZXse2gwJikjRMnXOAFGmk+/N8yZzPQHQNd1irsKR6el+cxZmeOubd/Z8ul725Kr0urqjUheUhUat2j13PFJQq6MOCrMlHgkHE6Mt4hlMCmNGuhE0iuM34vxuu2DKfbTTNVatSzAG2Q31cDEAAoCGAY0hMMgyEaRM8AEnZOoqWH2T9IcAPheVt9tSy8ri+tWvhQ2FhDVhO4OES/v6wfAoEwDKwOr0bhwACJCS9LYlbC7y23E5H6jpPze3CyjKcLnit+D56xQO9z6e/uuYLGT9Kq4GCXfHjHi5T3onWJ331otGt1nO4NLSl2EZcMDmvbVAqE+fgExuMupI4ekKwAajJX2ZPf6WLO/7P/EcLihUTxZqJhumOzqjFML2Zm0jjJ6nE9FZ57IDHUDHzJGnOvm2t6z7SM39vRrsRy6tweXI9e5LAG7IlgNAVG+hHubTLreGfLGRZccHM4wbMCDjnOG2z3Tzz5f8XpBDJhZJiCAcBvCmFCwQQkNi2iRuDNB4e/xzyBmXzBwqzCE0WRMHiQ7VkM0yPtT5HbYANi1ti7CrIgf2WH8yRYBgzLiBCNIywe0KdAiGoQEH1lGi4OOp5fm4GJD7yHQhCMGHjAIZetYHaKYwGAg5eZTUJGKaA4DR0KyJ3M0ti6AWhZKsQFEC+eT3DNWU47E3YBSSabjcMSGo3qQh3eszAhsUhxxaMVZSEGZ644kaTFMCwsJiHRyhoIRsFYLAwTY5gUY6g2x/HijUCDKXwxXjAmCMUEEzBJ5NpkEAQEtJ0cSFK4iAFOTer0uzhi0gU52xoqV0VQr/xwW14I5M/1JQYNSZ2IKhDlChwHIGnpmq0KxNCiiTCEwGnU8tgJQE15BjGVYGF5SCcezCvnLGgsQw8hDIOiRXBFGUqkjCGhCqsKGAsyxYJPbp0QGBHBHEOmhisEEThNMve51sAGA4BhcchqFCNBFC7KPRbVJNRXAIhfXAl0JNgXsCWkU/OhLQmMkmqfNf8rWC42mneBtZHwa2nSYJKiCZzIocUcjALO0H9PpCLEsnPKkKVS+yQdBEwsNkjgmlWoysb06ZZrrrrsR5eccVrWriEbmv4DX002oZ6rzwfYbwD3gxGCdnxGhwZtBFbgkYYILEME7+LAcupA+J69WEcIkTALn2Wp5LzATPekGj9xXDjPQ8vhcKI5aaiRy3aYPBoSXZOKI0vyJJqJsqkpye6oOmMIR80Li6JpOKnpJqE4QZVgEnj40AOZYfqceFtyjj0+2JPE9UTz5BZtchLbLbln8nl2SKeV+yB6Fo5ujWpQIm33/++mVRrcbtOnH8/UKK5GDGjEClYphDuj3MN5nbbukdbmbMp52Alb8AHkCfS9U3/9q4ZV/L0t++kbOy8lNQ83wFYtyuCjP5qKKFuMRZmV/8/6hj3PmDNtlzI3uE0ZjxNpHT3B63af6EYFUzP7AzrhH+pjHPD5cDe79fC2CiZBTw4BoC+ZdvEymCN1583znz69d+oiWn1v3F3PhDu/9wozBqV3kejZCxkLaiKpaJ9UBq+cNFUaPd3P36S4nePEh2YJLp36N22Y3vyOKbJtEm8azHk4eVnPJfVRZ2cuWeBnU5ztJYcvxnI46j0PGGTlxed46o278nrVfgxpteKs78vLT7dqVYl822+tikM+F0zLY9kubAHkiywWm2iZQl07y0h/qGPUZuokOdaLsYwywJ4cyuMZMYJXFNRCVwiVJmJR6HWWZHmbJNoi8a6uMeLDvXL2bDj35nH6xiTKm3kzP5dUfnJ5t/GydByaEKlJ6vMcU603bKK2sLYqZl1Z5Az8yaRPfd4D5QJUnwHZA7xauO/rvdPx1e0kY2E/lWntpFlny5TP8U/6/RAtVzCPJzkLi93zygrp2vj07lrGKtaxEzvDtpas+INon+SsAL3eSMYHeLtpXpKr9tarHfOUHFF5bGSNp4N3mYscLZGaYpLKn83xdM/QjaD9adslcQQhk7uNutYP5fAjU7Uk+sKgqfJ3Jj3klM5IxfGm4c48daZO7MTLIdanssc0u5vBUc6igcVvtRWOegXL5Zzh8RHy7QGhQQSNHyjs/yAsC2cJrgf8G401ICqSSKoAQWzcbJojLeVq8MsADpwY4LbI3V9twivXtqyS4uvodQSheMIV+iwDeM0/MKfJajtLUTSRLAAuiiXRgHydTY71enYRewAdQfR+oAHdrDDSM9ABcE0TYKnR2lHYF4ePKkxlU/6LJqWlVLOVyfZFn1otB3qMXMiond4QPVSAho0IT8Aq2dSUDT7qEz8+N+qLsRzev6MIXWvRJpEqSS3DckZSpAYnJwA/gxLT68G1XWe+vburyVUyNdq6L3dhzYWNNSYg0qFlWRhNgFtPryYCdj0X4B96Gk/jmLZf9h/4wGDGAKymqquU5NGAbBoF0u//vZ7WZZracaadmlqqlmCMONGXDi2HWfJE62KJDVYFE5fPsrHHqlaK+Fl8vK1VnD9Nc2oeEiyg/OayDkN6b4+P6zvpzTsu6aFK3zhKZytxclz+uK5DWuc2LRRUEF9az4TSkrSItNJLMb3dqUnQM0dgqSTEmles0BOMizDqN2muxXMcT9FahtdGH1FLEdryU9FP+SwNaatVmR81QRo3M1z+U1ktE+D2ygzzwK/gRqnOn/4UOOFzyuJTaXr2RsU1xFEil1R6I1lAo5cTAFMiNQiYaz6tiGmW45guqJ7GP1F+NkVc/riJ8FA9CAidQQVgB9CwwQLVC87za7raw4dylIN96U7BMKiePAgrvhwv04IjR+gBwJzl4PFjD0xIb0JIJPHxd9JPV3zhe8F4inR3cKMbaKu4K7Aora7c8MSMxn9G5EVnjo961gVgYFhOHUCt07BRbyMHd8D2SZq1im/MrJJ9/qUTRmt/zcbK3ns3p46ZBAfBifkzWNpI3l/wBWeHKE19E19LDZyGIUaEHPMUf5u0gJ0RPLziOFUrNMD0oJyY/ETbzPo7lNrOkLZ5k8pN0Zcrotw2imK0CMA6irCQfqbfdwte3IRla9tYXBWByDLCFMK1DgNc9zoApgm9+bWXg4ImXHMpktREAkmRfJbOjUKvF5SHtMB1jh3HwvVsLEMQmObSkqRyCl4BSZkGPALXXEVY2HV1aIUWRhdMVcFHIM0LtY553FQp2F3Vyx9mN687GXJNtmwypCukFRtZZwBuF7CcIW24PTqhFWIMLUvwwtz/ICL51gaJU5VSVZJYCncYjOaPHKf0AY8yB9Yd5K/E2vRd5ttcS7imfq8h6yto4WZPYOZ0v0HtIdUhbmIfY4KjRaUkfICxV1Nqep1blFfFfW7eLHbIcIGtPkLLw4NkBtcxerr2RNpBsstXOZWb2pZRPJAFA2HCCzbSZ7BXMHka+FuVfIIwctcgdLuydcA/VVqvxNn3esF1TPRvNYmx8IyoWgXLfYJdOj3+7VHYpXbS20tJvQY9wQQH8knv1qKL8WJ02i+Oa0ciZja26jmZaPE50hh1RBkqzbMLz3JhduuA5eY3bzKwqVtPXr+KpunCyY8FNzjuOqHcMuuqEVmmeRWZwJ7+ypS6vqPI0TuTtPQTx1rcplw+Letn06kxvZf/jpeSqmLX8gRLmOBBJjwhc3Wz7jhu8DCm7a+15Cd9jG+zGn+MqCRMxgK6hu59MBMG3hhnid5sNrXw+lgRXRfgn5ZzciTGQ7oqYvHwfZ3w/Lkap6Ti5aAUX04qeop4GB/fiT9Jlb9+jp4rzPKuJeCCAAwDm/GiwwSX9CjTZ/PffMw14kSmVG62VCJVpwtwMP9dmDS3d8LTmOowNDRvIH9SRM/EYEK+lFMTqaa8oSHuoQslMx4UAM031c1qdlZPuSY5DdyqcoxxLMNOB6vm3XVl+1TPkKY8jbsFyZCsEa4VE1WuiHFlVczVAdYXZcGuAAadXACaZl+l2TidTVOt5G+RVNvVEaEeRitQMO9SJ65c0GIPRzIIcALdPpNFRwCAmim1SGw/ndblbCrSrJ+c63z1Mbw4UCLcRNrm6y6caAntbz1HwesLXoRY272+n91qfPhhS2vSoU97hLeuCNy/sifPqtYDbHRfDguQJ5KXWpNLT0kbuqNuohnUVCoquTpcmW1Zn3unyPbtFVLFZErkEK3w+G6iRMUsNphTJ0w7e4+Z7g+TAcsAk8OaSUvkt4k0uc8rZuI50rVrFjQzjLUN3cYXIMzctLpmK657P8WN7+fXcbnqarv/eXRldHXcvOGKq3iQ8MuhJXX43faZbGm6cO/UHy+STLQTmghGN8nDfC6pz8DEYC1aMHzwrVtNlvZJtdppDB+9ec7LxWG/GHlyCCqwSUpoH+a/XxEdD0cfZ4kRYF8Qt+Y1VSISp5rvbFokSvv54HnebK/ShIuJgYc4utgV1ZDJ3pPvR+MERwCelx/WLzL2cMP9U6SpE4ikamNlk7/rpF3gW53cYO8ZSX3SCYWN5MPFp2vFh4Xincy/YnuWK8kQWuHyMirOteSTjjroFZ7oYUKyXn3R01Y8Huq8Rx+kjeG30wpPaW+BtcaO8FwI8zQg+bwKyJJVbdJHT/q2iD1GFtO+TUnlvCe8fqIIM/j3d5xHAzU1pr1GlQd9XdNil/O9eEP38sFROrvFK8dIvy1ASIrQB/nBqAAAJpKvNkOa/xZ2/Xp2tdkaMNmiv3NlloOmyu+kapUzP/cYzG6BpK6RKP2WQ4d8I1W30ssvk4OFloWwIi4hkgtOilipeJpcLCPCRC8/QvSS5CtacqyjY0FzGF/HDvzXlCbEJQqp5aSMiuh661h0XCFF0WNu8LETK7Q0tmBeDeAHD5o/f1QSGgUeV0c3K6YBkVINmNzPzdWdLLfbIq+Ij6cpD7Fe/E0kSTASelgLXZ7Eir8hbvHsJr+UIF0UFu6hsM6YFSXdroIAtbnqSd5egnQfPxlevI5P1WM9u+pNubZrLIqPamG3yxkQkFz1xVfsDTGWwM90f9XQ7kwwESHRrxFYQDO3DFKlaMWbA0nt+x2Tw/wf/YRTqZIoh1grkSA6Am9vUx4O6XSBw7GllFZPdIUIIKjd/R5tzQbUoseNY6STt8uGBUyCpw3NeZx8P91m5VBgAHpwIIPbFXCMs+/B7MxFKpZpi1uS0L8+bb/XXNKv6LMP5ukbNcEES5E8+lFfdzx5+t5BNfr7YTn7t7kWtziP+b/gxqFK33G6e1xxTh2+wAgdwk4oMqhawkVqvBD9sOLX2aFt8iWLbyg6/HG/cv7h/XAsCBhJKiK1eeG1GcAI1hX0TNc0oidzpj5I66mWGBxitARRC7hNb6e4txc+Q9rgNslTQmgbPkkr/3Ciw2VVCYxBQT02J0EA4OLDpFhaonpjRsvmskT3VrQqnczGxICaELJ9Qqv0y9WHbX9aHiuY4FeLZ3H540Vm5KpMNd/gg3LiKoYGA9D1NhKdLeXJdZj1fv4IJk0VRR+G6EV2WzS2BvYZiTd8LrLo02UeUt5DNe2uMRPWr2JoIT3n5Pkhf7kRdz3H44yA/mIyMyhATdlk8vBaFYvfSbWC7nBq8KlS0pOR18dI+dzZdoZtmmT351hHxFJSRl+k3mg2gJm1tFRTQSYVX4k3NtSnpC/eo+2WozRPs489L5pBxMNt2k52afKhtjzPw9sKKmvTRzzMr/Kb7IR0nPGkOj2QfmJLkN/RfK7wp+yKkD8gV6GPwCFIi/46Jg+OvmvQh06M2QZb3QjCM2GUswDcQ90dFI1A5CiIKPMKLUmmdwLwO5j/LpEd0d9tJDx7oRyqdFSPW5tcGyKNxzIU1mvRqc7xsL3NTPR7BYmyxfAcv9UFVwAGfXYDTNOVw1wvF8lp02M+9+ZUpCo8npCjbELZsXhlkcOO3L3rtUmCLvPbeO0WZ/DoUc7g4BC5/8glr7uWoUOb0CHvwVsc0iBJ2cchufsO9pVvXiEcPMq5QOq7AXX57tjiteUI+Qi5y6ZUDB08uHHzUt4wrx+6xaub2HN3ruYs2+o+qN7OWxk/TO63kIeOoBn+0mzjL9MNbj7MJQ0ePJjTObSN3O8Vr7iVc+ZO8J2Mrqvk/l3ki9FDq9Fdbs7OW0mzMvrvCruMN+tHN0CHYOxuIg8FqL9HRxnlDGejcSyYkC9d47UlzHqV3aQZUW5Uk6zWF3adBO2/veX8Ea+7mm17Q619fZzNyo2kr8aE9Lmn02+50ZPX0wV3M05krOB+S/Z/ntGv6lwzRc6Nh9qKX6gHksn5+aeB/+YD3/Pzds7BrJ20GBaawbzvsyRhzLj6NwO7ySmf7sxVZfhENFn7qk/psq9pgwkAJ/6QaH+smJwX1Usm8XL8WjrClxnJTH2j2wKpCFiXyvmf9eJdWYrvrD2rQooOuvM846+BrZoRoTww8MLSA4Oduj78JLz74dfTgM9k/waZoVEPON2LjPMtn28O8J3VQGhad+RzV4xf6v7U4i8lA1hSmHYJ/jE+BZNMRs7a2zBgPmHpnxnorgnWw/Dgog29YLD/b8P8F69EI5tXX1ySq4C4kAoKkboM+tATqsDC+sgb6dKJTw/9cvZDadb0wqjjPn89eGXQtdRgFy/N8WC/oAfXLMIMYBnnFiyxcoqpCXB9CvCHEQumKL2SO1aEqHCx6b1F3ZnyZykcu0B7IV9nvLreji+0uPoiRsop9dUih/KhuCYOKRI4dscEjL2NLvhlYOwNx05ZT8kmVR6viNRZ+EWj5PrfLC3jzZUE33STRQjmKYLvhvw3zqP4katjN61L5lxuWpQtxAOoa0JJbu/WeeMn5wXrT8Qm5GFH6JS0vcWLGmAIghg4JPAjpgE70uAlzcclszzkqXdQ3WElp0RgH96zhbF29DbMgOer1dw+X18cNwj8IWNvLuabDyMb70wsWVfI/O+fTb+p62/S6lJTxYR0Ret3ryyOT60tPMH5m2lRdMNnDN8HLiZTEjEYeNK+u0zK8PokUpyxourjbIErlfObt/xoih3rxcCUUrH3vaLohlqGgygoalwev1/2qKg7FQVFzwMz0zxdEhCJGqFvzB8/cuZ+J07J6bTEBJVZ0ruGg7wi7SIFEbtzj2dpUHa1Ph1NfXdSS1YaXIrGqD8ltzTWZkdwFnRv8MQf5t9SNE1n96LhKQdt5JSQW0DBBcel54DAz1j2p6TrXD5DNnLaR0ynZ3WV4wZViZnRsakMtVLl9A6YSWJ5Ub5kHzdjgj3SYDdyctvJeuI+SSDvcETZJZVrATtSFeR4O4Rm0r2rESs0B5kGzHyJ2RjuRmFTU3LaU2BlO3I39ufU2EqkkV2kfXdfb2DXjohfipHGjard2JhH6qxArRGO2IAa0oJ5jy52G5TJBXb8VVarxcqB8CPbtXLXy5zO0flwQnBL3wBmzV/sgJzAX/C1uSXC22eYS9ZDj+Ayahk+3ltWNSha9h34j13QAbVLnhIhY1UoOLapJOzLyN6DuSI6qYF0pS/bwUirIB2Xz3PgCbir/XA1hON+wDAd1uI7zYdz9d+++SqBKiukAN/nHZwEKaO92Rmgg9C9TJD3e2ckg/prMd4XsrTBtNkewXt9EkQeW+jqg8SdRKjLdq9TzwV7bzU0kD0PUkgX98hnX5wtb2Jm2Ft2oi4zheo3cmiAAUM4Ai+u55Cc0kj1nmG1fqrC6n48fvx4vvkErgQr9wi5T7uJ3z9rrnmGqguicCS9XO7X+Y4BIAihHvqt0U65LiYtTYMGzb3c5Rwy5Rku+HhJyRbGVgXbeXNSxoemkXdr/C2mz5xcqBuaWruXcwLgK+kKDxwEwUXC5TSYtfj0HBVEhra90IYkMu1Ygpu94uIm3HtcrdTYcPdgiTYAZAR8lpkeabNqVwMTMOoTzDi8BauXNdUm/O+HKC5xXhtyijZKRuYDK6amxBO9RUJYhKeLz5j8sSHwE0M85Ayup7Zls22e76vdOPMse67Bg6FmGlnHde6VR2vNRqyTypjUtcT7T2UwyjCVcdpabIicuFLAWKETc0qQDsfHLnjApT3jEsTOQa1NORFfYhuJ5Dj4PhiComZ7Xz9qTFuDVuYsMWYbxOUNUhzczMDAz2SWTzUzvaZfSIZ/EFaYmAwA3TxoqXD3511nknJ//+uDJXtZkjPUUCMeAIgLN4iwada0NkFrSmc8H9hlrwnHekpu7Yf3OutcBw7gsMymL9nlJCtM4hFO2YhnIKBI4Dm99k98LCJv+GSS9qppvSlpVpdVoT+Wf9/29Mb9grPjBs8S5jy6ssX6R8daUllMMMuahsemBDkyintyasR484RvIUMMlI0xsu01DjUx9VuwjsL5Ly3diJsfjc8imAj4rLT8kHGs3qwmHmbYrqO/bD04cGp3j3CdasLS4WVXsLHh59cHqfZNxVh5G03cg/+U4stryzR+yCSxmb6XtHfUdPpy+YQHrhmYu028ZJHKpTjaFYe5VVinhz2dOEZJEw6bhLjpt36Oad+yaAH9esHFrA2dU1JAE2N9AgeXRzn51YH7YZPM0ezCS28coPM38ToyIu+c2X90i9vZQ71iLV4Ady//MTaxhFjALiDCUyQKM54smCAI+v1lAa3uQY9MhRQw8c/TcJMu4UW7toI0TeH510xJol7TK84BTdUTEi1Fuimu8qrmyXG7o1KUuDrzCw5pQxKMb/z2yxyfxVuF5qI8TJw+1cwM60Nr7HJj+GmQjynGGsAhpce3tZC2d24afokbcS8xS2eSmJVqu4Pg/RnsTe8mOlVIgd2IbVf+aCVxCDj9tYbYCiXaja3w5TtbGfLcmMxAchbkgkcR9kbGB0F1PYFGtMk8IDNEPcoiGFHwOUA8HYnjBeZUOpXhJQLujvMQAmdMFUHJNKJFpElmN+6XgixB+LTF5QK3/1bmMQu9Lu45jWAmNdKYBxNDCaG+hTMTUMBIr923xm/EHXRt0VO+/Ynrdrlq/yscGxEGIwwTA4HMULf0t1qCHoeBLzirqUxoyamw7XjvvsIH9RysFtFi0SLPpcAHfGIQe2j7SgmL4zABf9i1yuywVtQR5DvJj4DLh34Z9iezN1Adm3/PfKfJE7OJWTW/KmVQNi5jnavfNR0wRWUziEhVAPhf3PVnlxzOj7rt7MLl/vj0RoDXIJ1mniW/piFTbpgQGAER6ekiZ9SI3AqOyy4id4IL0K6lbSNJ8YpUAmrONbEHvn9Gxt+29Z6DpylVMT8h9ds9M3KGcZncWi7A1C8eYWy0HCHqIbCvG18VvpaLwdoiQYK/aMYffbH8bLgVJgQOzPE942lyVNmdH2dBNkco2khZWIiOJ6DN6unLGgvUxgvZbPsPrMwYdAGh/7ex6AUwakOwiYRmxfR5x6JX5i8ZV1uuH3+5QHlF3pDSA/fd5J7IJqqxDsUBEAnlDeQzEr16fN2SuKLWbh8oj9s5kMUV40zmAD0UQBhSCOLlcWV5if4uT0cmTW25UjjWygu6IjJf981IWtQm1Naqq6DN29L3Jvqhq2MT1YEby9s6R9+CMnaeP2QkZTtECxJewKnex9p0ujAh9VDaqjTcKtwUdpFyoa91EnogHmRYPz27yC+ZalTOD+EnRPKAlIqLjV8Mg329rAbmM/3708282YAMrClRe5jKJYEbMIaxMMVTQBEWwSQRmAYRboc9elGR5mxIsH5hy87+Oyy7oUOl1/6ljqi2B073eeQXamCxX0dkUog1mE0wNj5MKmWjb5EdhaQmwh7YdgIyyzn0hjTDXxhNYcihsnisU+HEdimy/dNsYffF9J0HPv/aG0x+YMR24TJ7Ypy2aPNyFgRJyzqxDI2lFAjgBjhJvmV7joIRMKYeDoK2v1PrIQfx10XDqZagtCleHVH0u6v31jm1UAdy9Gl/pw3UL/liPDlU1KMnYxf1wLmQk12h3T0t9FCimIQ7uTLes2FRWGzS7EnvDVFTSsE+gSmkFErCsjEXA2i5WqeZkQzNqPP4rzuN0qMkX4o0w6m8XLweWzobWVfLwNaS4qAxB8YXZ5V5EqDljNqRWsomChurf6bH/orPANcIJOKK9Qh/pvwE4ywIwIlPJfHFP7CzC3B9UxBVrRrRTAjp+2v0Q3MQavz0mIgnOT0dPaqaXy5p5D8PUCbUtJaVPdEs3KCY7uDByT5sJjyKLNNg6uZqBLS0gAI/74VN89+Xz6WZ9jfzDgGxsGTOIXtrf3Db4v3KOa2i31LCtR+7PhUc/NZ6FpJvl5dO9ki/crGitXDUI5HrsFN/gg/NfPPmOJzmFxa//UTu0Z2IE/YO+QcsJati+u1sSXglppSbV+nh+6HIbA79/IFWHSZwhlqlBdvtqm+01tQjGfPXLuaz+i99r2CWJ2ibSa9+jrV9enlGmbyMCkMhEA6M/8NDqY1hBO/FZaMLvARxIqsuThEfTnx27YMpoyjF3NGrLkzCzNHqHAnz/7x0CTyKIk+pZLDRHC4ov8ZkKkxgs8e2c45r4Wi8isu00MkIqXBYQCU63Zrv687SZpujgo0Gr6T/ljQXhe1ov3h+2/YyTgDSdCKfXXH4JjiFe2bgq+dPvpechvpAPpZjfiXyxXH0ZDyzcoXux9ycBbwknjyHP5+WjPkKsL5FW62nlaHbuAYvU53bmMe8C00rjUNa8aEOTMhA5oFaTKUQkMglNo0jgJgLpU7HuUXon1R08iPmMEn8CkufI6bPQ5ydyp894lZ4Bjjlutq5wwmhQVnpjPPtF867mbZ3v67xUyYTf7A+SbvEzAa51FFhyptixsMvOGvNwm5uvtfP+vOysuuxqvOjyI33E28M/bL4tXfoCdgYufFt8NdEaH8Vtj4Uz2/NA5tZQRcf7P6MS4nGE5NntSdRxhzeMQgeacPjtNySJBZjEhx19JVLNBwKnCpKldIzUakvDMwQi/QOj9/C8Jwpfwpqaug2++nzoRtrD8l4HzP8oofQEdhGdJeGAK/0M8qyyTEpCfw3xaN1KbFqTEoWwkVDqp9cpG0pSpjF7jr/0FSvknPGe5zclGSMUWNWZP/agm14byBJ4NSfQhbUoZxLweUjYB9p8ac53Zp2lGXqbN+Shc5UeDIWRRyAqriClD5+6IGGgXon3LF51vaPLGx10L6nfxWeUa5LhZq1EWH11CRC3I1z9mnsjzeHY3zBW1RkQtepeYJmApagE88k4x8lAk4z2xqePWWlXpBUyGOdMC/5KEfAg25i4iQWJgVeMCEock5EHCkss+JjUrgNYMlaMrblsMX5z5sqq9wcGWnfXnac+VApNXLyPQnNq5EtPUog0q1K9qyktUhLVj7y+xm8RgnqW771PLrp5xOaqlB7BZVyh8zrlQMEQw0M0cLxLCQH5tL+1rCxOuPigr0Q+O8KVjgT8zYWX2jNrnWFcLmyOI5n5lpxpg8UzrLUgYUnxz9LpKTN3YVsptM1pO8Nble0QROZGcw5/B83AqpEhHfiM/FCyS/qs1fRKVNv+hPkgRAcqJkMtojuF1vmGbQvNlOYuHIEZ/10qtF5ehb4/Xx0QbZdcmrX9RkWmvEB3OxVWCL3OQrBBBycF3THz3J+zr9IlTeL0IaXhCHVkJW0QHtYiYWTcZWqHAW0Pg50sXnnn0DT+VQ8iXxBCJOv+LVxxZ7wTCxiI1H9qcfwQ3YIsUj3bKC2nwftYGOBcg38NoJLWZyTH7bq67NMzdH3nPAGdnTq2L09g45RQhaU8YNkpZrScsr9X82oz38aXEwMSjW3Mlcnrw5J+GMAfhSbQW6Ag8CEhJD8fnAAJglYZeUsQ656dxxPjiPIDOFhLnZAUt2I+VtPO3lIgk1EiAzTK+npyb60cMi0/7YifarigV62YfKiqv0etjRWCnISEv4qrQCPMD6V39u/Yion+1TuNngvi3X0xp4Pse6KnTJd/L60ViuN907n2nVWsmFdOSR3B/h5nj3OdC82E7x8yRBpyqv9VWBVfW3tg/TvmF420hYCKBNCrlyieeari2wLFT/Q5KGN+4cy48+aGPkDV+hqDBHukeEnR5QsWT5h6fdRItQeZ3XvVn0gx9PXTqe1gxVFP8cfyqFkUxuQ5LNJvEOwd/0JqDC11RObomtnvoS7Q55kJODZbBwZxk8l9sAHJwpiCLqfwKX7Y+nGfyARBhP1FbZipvrCFPuEAbBQMUAzc7D75BReiJwKbVjH2zQvpzufgyUK58dxKFtt0+eS2Ko+UM+lzpsYuWnsejQNsSNc2AwMFvZtlS74N8nGfXqy+H8DYc3+axKNaUJDmLXohgg35WWuMhULy5DXQQfMzXGoazY25dXBpq93b83++NeBtNeZ4cZJ43hmnWzGDMDRXc9R3TisIneoOXHpplP3iJJ9RQ+fmiayMymjuvKjFdyNAV5IbZkq6ME+w/VNO0BX4UcrYx8vz0rXkZL3CP8tDdW+dR4wfGNpqZxmwzRxdo9ef5yiL+gIT3TWSWeABxQcPsIw9+eZpXwXHNPR5induL8nLGTrYj5kIadRcQEf2PKgLhsiDYCVqohA19Ui79NEybeOMrHDW3d5Fx7BFGygyQJ91TpMNNX25m9WFniCZ54+dlGXJ3DuaeFJuoAckgGl8z0IRkyCqjlzjq55++xvOT9j3WrhnZxbL1Jxy/ZJMaMJdPxTnaHV7LbkzQt/bNjMLJGZtAYcHpyjIVLyTeNYxfDsqSGR0CoYp6YyfeXMjE58M9OdJ5luxQ75mDLiDfVl42rEbpLF43xZkrMBpauCUvdP/Alam/a6UL9ot60u1CE3xlivjKEtIldEBYiLHkleUYWpjO9OLjPqBrNel6Y/HfDntqQTMHUDjN4dUamFemRdo8s40TS0dDp6m8F0SS2sCRAC+5g3leVE6y0oN07HbJMW3Qr54if8PJrSPbgwy/grgwRzz/aZ0vgPA8GTBumQSkaZNHHBzuglN+5ZJ8oExbdFOdWGQlIcr9Ob+bHThvN9hRTQ/GzX2pc/vZvx98Tkcow5an7qNL5YntgeUxf6JxyhquXvjdkVHB5BjFEIScDAexdCjNgXPrWn92vFZtLyMnHXlbRX7kLbj8ZFJ5FF2/OpzeR3LwagqA/+3RbD78vyRP9a7AjE+7qRXe/xiqHO4kdMum0lnkGk8E1EivwUQ3jLAqZDrk+qhtC6m6iqRyNvMa3slj0WdcNB/T8w2GH6zCLm/4n4HdSaxvUTT2eQkWJqM+kvEnfegw3MFdslvLi3PM5H7KKXNwrWrS86nTVW1rmEW+C16IIZ4uD8jGxRJq5oHhP8/+DB4okIOSN+Nv4qnfUNs0cJapl/ibNQjc2wcCSTfx/pr6SB8XO8/Bx+BCtKctJR1D5z58MJ5CWfJsactvBZ2SO+e+xaVZnjfhPLolJSBLfh4GKo2mlf7mzrWANeSXXWX33z93TjLGBR/bkSJy71L921feyURU8PvBN+bfzthuY2avTLSXDW1SWLU3WUn5qfM7J08erpi0trV434KoIC7y07PdSp6wMg+5MXeH9lgzufHvWeQC4r8jMAwNjL9gEAYPz9tw7/t2P+63wIAAI4xY7/ErsXLGPGP3/TAyu8DtOsiGUsAqAdxoJgWiZq7MDtW9wKCLJTNJm0Tp4FgJumXTcJHARgGDeQ2wjAXzoeN+HNKIDaacEN0cwo//1TNN9kPPJE7d84tRL1H2B1nKGnHNUgzrJAPRCQE3fGElUo//TU+Qobn5KWR5OAaLz2OV++hQvzDiOUvzGhDYuKBiaWSZtAeCJeY5WgPHmnAaUUFBVQO8S/ZPRYgosiG5uJJ1XmHkRj6fRvk53ILDW5Cwdw4NBhpB70hZcNAc2JAIBqNzbLIRzfL4fR7F2O8NGzHEOpaDlWDCXg6HEBYNGqWKFqlcpMVaORP5dS5ZpUK1QvXbLrNagUFZcKEkA7MiLZ7Iw2tSoCmUQhECzg/UXBZw+nke5AapVW0CyVTVLYdSrr3a6FYFKjVpsBlat4RUHgvQI0agTTPiFUoMg8UJoWSlZnFmoRQIsNqlU3SM8bdqBUUSk0U7ESARCwvf/+hQUAAAA=); }&lt;/style&gt;&lt;/defs&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;16887.31161813197&quot; height=&quot;22531.95463094909&quot; fill=&quot;#f8f9fa&quot;&gt;&lt;/rect&gt;&lt;g transform=&quot;translate(9737.661227713152 10030.398885561768) rotate(271.1367090457004 -641.2382798512153 0)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M 0,6.24 Q 0,6.24 -9.73,6.11 -19.47,5.97 -30.57,5.87 -41.67,5.77 -56.12,5.70 -70.58,5.63 -90.63,5.58 -110.69,5.53 -134.52,5.49 -158.35,5.45 -185.17,5.42 -212.00,5.39 -242.88,5.37 -273.76,5.35 -307.75,5.34 -341.75,5.33 -378.45,5.31 -415.16,5.30 -454.42,5.30 -493.67,5.29 -532.62,5.28 -571.56,5.28 -607.59,5.27 -643.62,5.27 -677.03,5.27 -710.43,5.26 -739.93,5.26 -769.43,5.26 -795.88,5.26 -822.33,5.26 -846.09,5.26 -869.86,5.25 -889.70,5.25 -909.54,5.25 -927.71,5.25 -945.88,5.25 -961.95,5.25 -978.02,5.25 -991.81,5.25 -1005.60,5.25 -1018.41,5.25 -1031.23,5.25 -1042.24,5.25 -1053.25,5.25 -1062.11,5.25 -1070.96,5.25 -1080.29,5.25 -1089.62,5.25 -1096.37,5.59 -1103.11,5.93 -1108.76,6.32 -1114.41,6.72 -1119.60,7.08 -1124.78,7.43 -1131.30,8.09 -1137.81,8.75 -1142.95,9.24 -1148.09,9.73 -1154.38,10.09 -1160.66,10.46 -1166.36,10.78 -1172.05,11.10 -1180.42,11.22 -1188.78,11.35 -1193.46,11.36 -1198.13,11.36 -1204.34,11.57 -1210.54,11.79 -1217.61,11.91 -1224.68,12.03 -1231.31,12.14 -1237.94,12.24 -1243.70,12.38 -1249.45,12.51 -1254.46,12.65 -1259.46,12.78 -1264.33,12.90 -1269.20,13.01 -1275.08,13.11 -1280.95,13.20 -1283.06,12.86 -1285.17,12.51 -1287.06,11.51 -1288.94,10.51 -1290.41,8.96 -1291.88,7.41 -1292.78,5.47 -1293.68,3.53 -1293.91,1.40 -1294.14,-0.71 -1293.68,-2.80 -1293.22,-4.88 -1292.12,-6.71 -1291.02,-8.55 -1289.39,-9.93 -1287.76,-11.31 -1285.77,-12.10 -1283.79,-12.89 -1281.65,-13.01 -1279.52,-13.12 -1277.46,-12.55 -1275.40,-11.98 -1273.64,-10.78 -1271.87,-9.58 -1270.57,-7.88 -1269.28,-6.18 -1268.60,-4.15 -1267.92,-2.13 -1267.92,0.00 -1267.92,2.13 -1268.60,4.16 -1269.28,6.18 -1270.58,7.88 -1271.87,9.58 -1273.64,10.78 -1275.41,11.98 -1277.47,12.55 -1279.53,13.12 -1281.66,13.01 -1283.79,12.89 -1285.78,12.10 -1287.76,11.31 -1289.39,9.93 -1291.02,8.54 -1292.12,6.71 -1293.22,4.88 -1293.68,2.79 -1294.14,0.71 -1293.91,-1.41 -1293.67,-3.53 -1292.78,-5.47 -1291.88,-7.41 -1290.41,-8.96 -1288.94,-10.51 -1287.05,-11.51 -1285.16,-12.51 -1283.05,-12.86 -1280.95,-13.20 -1280.95,-13.20 -1280.95,-13.20 -1275.08,-13.11 -1269.20,-13.01 -1264.33,-12.90 -1259.46,-12.78 -1254.46,-12.65 -1249.45,-12.51 -1243.70,-12.38 -1237.94,-12.24 -1231.31,-12.14 -1224.68,-12.03 -1217.61,-11.91 -1210.54,-11.79 -1204.34,-11.57 -1198.13,-11.36 -1193.46,-11.36 -1188.78,-11.35 -1180.42,-11.22 -1172.05,-11.10 -1166.36,-10.78 -1160.66,-10.46 -1154.38,-10.09 -1148.09,-9.73 -1142.95,-9.24 -1137.81,-8.75 -1131.30,-8.09 -1124.78,-7.43 -1119.60,-7.08 -1114.41,-6.72 -1108.76,-6.32 -1103.11,-5.93 -1096.37,-5.59 -1089.62,-5.25 -1080.29,-5.25 -1070.96,-5.25 -1062.11,-5.25 -1053.25,-5.25 -1042.24,-5.25 -1031.23,-5.25 -1018.41,-5.25 -1005.60,-5.25 -991.81,-5.25 -978.02,-5.25 -961.95,-5.25 -945.88,-5.25 -927.71,-5.25 -909.54,-5.25 -889.70,-5.25 -869.86,-5.25 -846.09,-5.26 -822.33,-5.26 -795.88,-5.26 -769.43,-5.26 -739.93,-5.26 -710.43,-5.26 -677.03,-5.27 -643.62,-5.27 -607.59,-5.27 -571.56,-5.28 -532.62,-5.28 -493.67,-5.29 -454.42,-5.30 -415.16,-5.30 -378.45,-5.31 -341.75,-5.33 -307.75,-5.34 -273.76,-5.35 -242.88,-5.37 -212.00,-5.39 -185.17,-5.42 -158.35,-5.45 -134.52,-5.49 -110.69,-5.53 -90.63,-5.58 -70.58,-5.63 -56.12,-5.70 -41.67,-5.77 -30.57,-5.87 -19.47,-5.97 -9.73,-6.11 0,-6.24 0.74,-6.15 1.49,-6.06 2.19,-5.80 2.90,-5.53 3.52,-5.10 4.14,-4.67 4.64,-4.11 5.14,-3.54 5.49,-2.88 5.84,-2.21 6.02,-1.48 6.20,-0.75 6.20,0.00 6.20,0.75 6.02,1.48 5.84,2.21 5.49,2.88 5.14,3.55 4.64,4.11 4.14,4.67 3.52,5.10 2.90,5.53 2.19,5.80 1.49,6.06 0.74,6.15 -0.00,6.24 -0.00,6.24 L 0,6.24 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8723.521057033844 10507.469850018937) rotate(271.1367090457004 266.1743803155987 -99.21050622897837)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M -5.93,-3.95 Q -5.93,-3.95 -3.17,-8.52 -0.41,-13.09 4.82,-16.34 10.05,-19.58 14.33,-21.88 18.60,-24.18 26.76,-26.44 34.92,-28.70 48.00,-32.09 61.09,-35.48 79.33,-39.62 97.57,-43.75 118.91,-50.88 140.24,-58.01 164.88,-65.23 189.52,-72.45 215.17,-80.98 240.81,-89.52 269.78,-100.06 298.75,-110.60 325.10,-119.27 351.44,-127.94 377.76,-138.49 404.07,-149.05 427.93,-157.75 451.79,-166.45 472.88,-175.63 493.97,-184.81 504.24,-190.05 514.51,-195.30 518.71,-198.00 522.92,-200.71 523.89,-201.02 524.87,-201.33 525.89,-201.32 526.92,-201.30 527.88,-200.96 528.85,-200.62 529.66,-199.99 530.46,-199.36 531.03,-198.50 531.59,-197.64 531.85,-196.65 532.11,-195.66 532.04,-194.64 531.97,-193.62 531.57,-192.67 531.18,-191.72 530.50,-190.95 529.83,-190.18 528.94,-189.67 528.06,-189.15 527.05,-188.94 526.05,-188.74 525.03,-188.86 524.02,-188.99 523.09,-189.43 522.17,-189.88 521.44,-190.59 520.70,-191.31 520.23,-192.22 519.77,-193.13 519.62,-194.15 519.47,-195.16 519.65,-196.17 519.83,-197.18 520.32,-198.08 520.81,-198.98 521.57,-199.67 522.32,-200.36 523.26,-200.78 524.20,-201.20 525.22,-201.29 526.24,-201.39 527.23,-201.15 528.23,-200.92 529.10,-200.38 529.97,-199.83 530.62,-199.04 531.28,-198.25 531.64,-197.30 532.01,-196.34 532.05,-195.31 532.09,-194.29 531.80,-193.31 531.51,-192.32 530.92,-191.48 530.33,-190.64 529.51,-190.04 528.68,-189.43 528.68,-189.43 528.69,-189.43 524.03,-187.61 519.38,-185.78 508.83,-180.37 498.27,-174.95 476.89,-165.61 455.52,-156.26 431.85,-147.56 408.17,-138.86 381.56,-128.10 354.96,-117.34 328.82,-108.62 302.68,-99.89 273.62,-89.14 244.57,-78.38 218.80,-69.56 193.03,-60.73 168.73,-53.29 144.43,-45.84 122.63,-38.12 100.83,-30.39 83.05,-25.77 65.27,-21.14 52.53,-17.01 39.80,-12.88 33.02,-10.53 26.25,-8.19 18.89,-5.89 11.54,-3.59 8.73,0.17 5.93,3.95 5.37,4.60 4.81,5.25 4.11,5.75 3.41,6.25 2.61,6.57 1.81,6.89 0.96,7.01 0.11,7.12 -0.73,7.03 -1.59,6.94 -2.40,6.65 -3.21,6.36 -3.92,5.88 -4.64,5.41 -5.22,4.77 -5.80,4.14 -6.21,3.38 -6.62,2.63 -6.84,1.80 -7.06,0.97 -7.07,0.11 -7.08,-0.74 -6.89,-1.58 -6.70,-2.42 -6.31,-3.18 -5.93,-3.95 -5.93,-3.95 L -5.93,-3.95 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(9000.886965730073 10335.186791827473) rotate(271.1367090457004 208.0999331422072 120.98835468890866)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M 4.88,-4.88 Q 4.88,-4.88 9.22,-0.92 13.55,3.03 21.85,7.52 30.16,12.01 38.80,16.39 47.44,20.77 62.69,29.97 77.94,39.16 93.97,48.64 109.99,58.12 129.41,70.62 148.83,83.13 168.13,95.40 187.43,107.68 205.30,118.46 223.17,129.24 241.80,139.37 260.43,149.49 276.70,157.99 292.96,166.49 308.21,174.29 323.47,182.08 335.51,188.19 347.55,194.29 356.98,199.75 366.40,205.21 372.13,208.69 377.86,212.18 381.98,214.92 386.10,217.67 390.25,219.76 394.40,221.85 398.99,224.04 403.58,226.23 408.35,228.47 413.12,230.71 415.26,231.53 417.40,232.35 418.57,233.23 419.75,234.11 420.59,235.32 421.43,236.53 421.84,237.94 422.24,239.36 422.18,240.83 422.11,242.30 421.58,243.67 421.05,245.04 420.11,246.17 419.16,247.30 417.91,248.07 416.66,248.84 415.22,249.17 413.79,249.50 412.32,249.36 410.86,249.21 409.52,248.61 408.18,248.00 407.10,247.00 406.02,246.00 405.32,244.70 404.62,243.41 404.37,241.96 404.12,240.51 404.34,239.06 404.57,237.60 405.24,236.30 405.92,234.99 406.98,233.97 408.04,232.95 409.37,232.32 410.70,231.69 412.16,231.51 413.62,231.34 415.06,231.64 416.50,231.95 417.77,232.69 419.03,233.44 420.00,234.55 420.96,235.67 421.52,237.03 422.07,238.39 422.17,239.86 422.26,241.33 421.88,242.75 421.50,244.17 420.69,245.39 419.87,246.62 418.71,247.52 417.54,248.42 416.15,248.90 414.76,249.39 413.29,249.40 411.82,249.41 410.42,248.96 409.02,248.50 409.03,248.50 409.03,248.50 407.13,247.23 405.22,245.96 400.50,243.28 395.77,240.59 391.11,237.75 386.44,234.91 381.91,231.71 377.38,228.51 374.18,225.35 370.98,222.19 366.02,218.33 361.06,214.46 351.88,209.18 342.71,203.90 330.62,197.82 318.54,191.75 303.22,183.99 287.90,176.23 271.52,167.77 255.13,159.31 236.22,149.17 217.32,139.03 199.25,128.33 181.17,117.62 161.73,105.53 142.29,93.44 122.94,81.35 103.58,69.25 87.31,60.14 71.04,51.02 56.12,42.66 41.20,34.30 31.23,30.11 21.27,25.92 15.98,22.46 10.68,19.01 6.91,16.33 3.14,13.66 -0.87,9.27 -4.88,4.88 -5.39,4.23 -5.91,3.57 -6.25,2.81 -6.59,2.05 -6.74,1.23 -6.89,0.41 -6.84,-0.41 -6.79,-1.24 -6.54,-2.04 -6.30,-2.83 -5.87,-3.54 -5.43,-4.26 -4.85,-4.85 -4.26,-5.43 -3.54,-5.87 -2.83,-6.30 -2.04,-6.54 -1.24,-6.79 -0.41,-6.84 0.41,-6.89 1.23,-6.74 2.05,-6.59 2.81,-6.25 3.57,-5.91 4.23,-5.39 4.88,-4.88 4.88,-4.88 L 4.88,-4.88 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7734.698071814257 10118.211353754261) rotate(271.1367090457004 508.1512743069943 14.518565639953522)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M 0,-6.50 Q 0,-6.50 5.56,-6.84 11.13,-7.19 19.06,-7.07 26.99,-6.95 38.71,-6.72 50.43,-6.49 67.93,-6.32 85.43,-6.15 108.36,-4.63 131.28,-3.11 160.44,-1.04 189.60,1.03 228.39,3.32 267.18,5.62 312.87,8.01 358.57,10.39 412.83,14.21 467.10,18.03 523.42,19.65 579.74,21.28 635.68,21.97 691.62,22.67 740.45,22.98 789.27,23.28 830.89,23.41 872.51,23.55 902.72,23.61 932.93,23.66 955.50,23.69 978.08,23.72 989.07,23.73 1000.06,23.75 1004.73,23.24 1009.40,22.73 1010.40,22.90 1011.41,23.06 1012.31,23.54 1013.21,24.02 1013.91,24.76 1014.61,25.50 1015.03,26.42 1015.46,27.35 1015.57,28.36 1015.68,29.37 1015.46,30.37 1015.24,31.36 1014.71,32.23 1014.19,33.11 1013.41,33.76 1012.63,34.42 1011.69,34.80 1010.74,35.18 1009.72,35.23 1008.71,35.28 1007.73,35.01 1006.75,34.74 1005.90,34.16 1005.06,33.59 1004.44,32.78 1003.83,31.97 1003.51,31.00 1003.18,30.04 1003.18,29.02 1003.18,28.00 1003.51,27.04 1003.84,26.07 1004.45,25.26 1005.07,24.45 1005.91,23.88 1006.76,23.31 1007.74,23.04 1008.72,22.77 1009.74,22.82 1010.75,22.88 1011.70,23.26 1012.65,23.64 1013.42,24.30 1014.20,24.96 1014.72,25.83 1015.24,26.70 1015.46,27.70 1015.68,28.69 1015.57,29.70 1015.46,30.72 1015.03,31.64 1014.60,32.56 1013.90,33.30 1013.20,34.04 1012.30,34.52 1011.40,34.99 1010.39,35.16 1009.39,35.32 1009.39,35.32 1009.39,35.32 1004.72,34.81 1000.05,34.29 989.06,34.28 978.07,34.28 955.49,34.26 932.91,34.24 902.69,34.20 872.47,34.15 830.84,34.04 789.20,33.93 740.35,33.65 691.49,33.37 635.46,32.71 579.43,32.04 522.89,30.46 466.34,28.87 412.18,25.13 358.01,21.39 312.27,19.10 266.53,16.80 227.68,14.63 188.82,12.46 159.69,10.57 130.56,8.68 107.99,7.42 85.43,6.15 67.93,6.32 50.43,6.49 38.71,6.72 26.99,6.95 19.06,7.07 11.13,7.19 5.56,6.84 0,6.50 -0.77,6.40 -1.55,6.31 -2.28,6.03 -3.02,5.75 -3.66,5.31 -4.31,4.86 -4.83,4.28 -5.35,3.69 -5.71,2.99 -6.07,2.30 -6.26,1.54 -6.45,0.78 -6.45,-0.00 -6.45,-0.78 -6.26,-1.54 -6.07,-2.30 -5.71,-2.99 -5.35,-3.69 -4.83,-4.28 -4.31,-4.86 -3.66,-5.31 -3.02,-5.75 -2.28,-6.03 -1.55,-6.31 -0.77,-6.40 0.00,-6.50 0.00,-6.50 L 0,-6.50 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8356.00645546345 9874.812821752424) rotate(271.1367090457004 -181.4827166469413 -79.85229563332177)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M -4.46,4.47 Q -4.46,4.47 -10.03,-1.08 -15.60,-6.64 -21.80,-11.62 -27.99,-16.60 -35.95,-21.45 -43.91,-26.30 -51.65,-31.31 -59.39,-36.32 -69.30,-41.08 -79.21,-45.83 -91.69,-50.64 -104.17,-55.45 -119.55,-63.21 -134.93,-70.98 -151.00,-78.38 -167.07,-85.77 -184.96,-93.07 -202.85,-100.36 -220.26,-107.67 -237.68,-114.98 -254.64,-120.81 -271.60,-126.63 -289.88,-131.88 -308.16,-137.13 -323.07,-142.20 -337.97,-147.27 -345.53,-149.25 -353.10,-151.22 -356.49,-151.67 -359.88,-152.12 -360.83,-152.56 -361.78,-153.00 -362.54,-153.72 -363.30,-154.44 -363.79,-155.37 -364.28,-156.29 -364.45,-157.33 -364.62,-158.36 -364.45,-159.40 -364.28,-160.43 -363.78,-161.36 -363.29,-162.28 -362.53,-163.00 -361.77,-163.72 -360.82,-164.16 -359.87,-164.60 -358.83,-164.71 -357.78,-164.83 -356.76,-164.60 -355.74,-164.37 -354.84,-163.83 -353.94,-163.29 -353.26,-162.49 -352.59,-161.69 -352.20,-160.72 -351.81,-159.74 -351.76,-158.70 -351.70,-157.65 -351.98,-156.64 -352.26,-155.63 -352.85,-154.77 -353.44,-153.90 -354.28,-153.26 -355.11,-152.63 -356.10,-152.30 -357.10,-151.96 -358.15,-151.96 -359.19,-151.97 -360.19,-152.30 -361.18,-152.64 -362.01,-153.27 -362.85,-153.91 -363.43,-154.77 -364.02,-155.64 -364.30,-156.65 -364.58,-157.66 -364.52,-158.71 -364.46,-159.76 -364.08,-160.73 -363.69,-161.70 -363.01,-162.50 -362.33,-163.30 -361.43,-163.84 -360.53,-164.38 -359.51,-164.60 -358.48,-164.83 -357.44,-164.71 -356.40,-164.60 -356.40,-164.60 -356.40,-164.60 -353.27,-163.23 -350.14,-161.86 -342.35,-159.56 -334.57,-157.27 -319.91,-152.28 -305.25,-147.30 -286.70,-141.98 -268.16,-136.66 -250.86,-130.73 -233.57,-124.80 -216.19,-117.53 -198.82,-110.27 -180.70,-102.91 -162.59,-95.56 -146.31,-88.12 -130.04,-80.68 -115.14,-73.20 -100.25,-65.71 -87.33,-60.82 -74.42,-55.93 -63.85,-50.96 -53.28,-45.98 -45.58,-41.20 -37.88,-36.42 -29.15,-31.33 -20.42,-26.24 -13.54,-20.92 -6.65,-15.61 -1.09,-10.04 4.46,-4.47 4.93,-3.87 5.40,-3.27 5.72,-2.57 6.03,-1.88 6.17,-1.13 6.31,-0.38 6.26,0.37 6.21,1.13 5.99,1.86 5.76,2.59 5.37,3.24 4.97,3.89 4.43,4.43 3.89,4.97 3.24,5.37 2.59,5.76 1.86,5.99 1.13,6.21 0.37,6.26 -0.38,6.31 -1.13,6.17 -1.88,6.03 -2.57,5.72 -3.27,5.40 -3.87,4.93 -4.47,4.46 -4.47,4.46 L -4.46,4.47 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8604.433729745933 9740.958933036567) rotate(271.1367090457004 -225.03822895322264 96.79068375112729)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M 0,6.49 Q 0,6.49 -6.95,6.66 -13.91,6.82 -21.02,6.91 -28.12,7.00 -38.75,9.46 -49.37,11.91 -63.65,16.99 -77.94,22.08 -94.94,31.03 -111.94,39.98 -134.89,49.50 -157.85,59.02 -185.53,71.31 -213.22,83.61 -244.53,97.18 -275.83,110.76 -301.53,123.41 -327.24,136.07 -349.23,148.35 -371.21,160.63 -391.81,171.47 -412.40,182.31 -422.66,186.97 -432.92,191.62 -437.01,194.04 -441.09,196.45 -442.08,196.72 -443.07,196.99 -444.10,196.93 -445.12,196.87 -446.07,196.48 -447.02,196.09 -447.80,195.43 -448.57,194.76 -449.10,193.88 -449.62,192.99 -449.83,191.99 -450.05,190.99 -449.93,189.97 -449.81,188.95 -449.37,188.02 -448.94,187.10 -448.23,186.36 -447.52,185.62 -446.61,185.14 -445.70,184.67 -444.69,184.51 -443.68,184.35 -442.67,184.52 -441.65,184.70 -440.75,185.18 -439.85,185.67 -439.15,186.42 -438.45,187.17 -438.03,188.10 -437.60,189.03 -437.50,190.05 -437.39,191.07 -437.62,192.07 -437.85,193.07 -438.38,193.95 -438.92,194.82 -439.70,195.48 -440.49,196.14 -441.44,196.51 -442.40,196.88 -443.42,196.93 -444.44,196.98 -445.43,196.70 -446.42,196.42 -447.26,195.84 -448.11,195.26 -448.72,194.44 -449.34,193.62 -449.66,192.64 -449.98,191.67 -449.97,190.64 -449.96,189.62 -449.63,188.65 -449.30,187.68 -448.67,186.87 -448.04,186.06 -447.19,185.49 -446.34,184.92 -446.34,184.92 -446.34,184.92 -441.83,183.42 -437.33,181.93 -427.36,177.39 -417.39,172.84 -396.93,162.03 -376.48,151.23 -354.27,138.77 -332.06,126.31 -306.15,113.48 -280.23,100.65 -249.02,87.00 -217.80,73.36 -190.04,60.89 -162.29,48.42 -139.90,38.96 -117.52,29.50 -99.87,19.99 -82.22,10.47 -67.35,4.84 -52.48,-0.78 -40.35,-3.89 -28.22,-7.00 -21.06,-6.91 -13.91,-6.82 -6.95,-6.66 0,-6.49 0.77,-6.40 1.55,-6.30 2.28,-6.02 3.01,-5.75 3.66,-5.30 4.30,-4.86 4.82,-4.27 5.34,-3.69 5.71,-2.99 6.07,-2.30 6.26,-1.54 6.44,-0.78 6.44,0.00 6.44,0.78 6.26,1.54 6.07,2.30 5.71,2.99 5.34,3.69 4.82,4.27 4.30,4.86 3.66,5.30 3.01,5.75 2.28,6.03 1.55,6.30 0.77,6.40 -0.00,6.49 -0.00,6.49 L 0,6.49 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(9939.981539816783 9732.05627599292) rotate(0 2965.4278858101025 465.61817971854634)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;328.1676930656314&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;372.494543774837px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Contiously listening for incoming &lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;793.7858727841776&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;372.494543774837px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;and outgoing messages&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(5357.243001031089 10) rotate(0 2986.5810384139177 349.4296816742335)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;492.5560792880005&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;559.0874906787747px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Telegram Long Pooling&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(10 852.2214360680628) rotate(0 8369.879089306225 3671.690037991526)&quot;&gt;&lt;path d=&quot;M32 0 C6346.37 0, 12660.75 0, 16707.76 0 M32 0 C6039 0, 12046 0, 16707.76 0 M16707.76 0 C16729.09 0, 16739.76 10.67, 16739.76 32 M16707.76 0 C16729.09 0, 16739.76 10.67, 16739.76 32 M16739.76 32 C16739.76 2090.85, 16739.76 4149.71, 16739.76 7311.38 M16739.76 32 C16739.76 1612.94, 16739.76 3193.88, 16739.76 7311.38 M16739.76 7311.38 C16739.76 7332.71, 16729.09 7343.38, 16707.76 7343.38 M16739.76 7311.38 C16739.76 7332.71, 16729.09 7343.38, 16707.76 7343.38 M16707.76 7343.38 C10521.85 7343.38, 4335.94 7343.38, 32 7343.38 M16707.76 7343.38 C11996.42 7343.38, 7285.08 7343.38, 32 7343.38 M32 7343.38 C10.67 7343.38, 0 7332.71, 0 7311.38 M32 7343.38 C10.67 7343.38, 0 7332.71, 0 7311.38 M0 7311.38 C0 4739.5, 0 2167.62, 0 32 M0 7311.38 C0 5463.71, 0 3616.04, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(619.581243800661 1762.017471276209) rotate(0 7837.458541163757 3037.9841982815706)&quot;&gt;&lt;path d=&quot;M32 0 C3859.13 0, 7686.26 0, 15642.92 0 M32 0 C4869.89 0, 9707.78 0, 15642.92 0 M15642.92 0 C15664.25 0, 15674.92 10.67, 15674.92 32 M15642.92 0 C15664.25 0, 15674.92 10.67, 15674.92 32 M15674.92 32 C15674.92 1360.45, 15674.92 2688.91, 15674.92 6043.97 M15674.92 32 C15674.92 1714.7, 15674.92 3397.4, 15674.92 6043.97 M15674.92 6043.97 C15674.92 6065.3, 15664.25 6075.97, 15642.92 6075.97 M15674.92 6043.97 C15674.92 6065.3, 15664.25 6075.97, 15642.92 6075.97 M15642.92 6075.97 C11298.77 6075.97, 6954.63 6075.97, 32 6075.97 M15642.92 6075.97 C10512.16 6075.97, 5381.41 6075.97, 32 6075.97 M32 6075.97 C10.67 6075.97, 0 6065.3, 0 6043.97 M32 6075.97 C10.67 6075.97, 0 6065.3, 0 6043.97 M0 6043.97 C0 3980.91, 0 1917.86, 0 32 M0 6043.97 C0 4374.12, 0 2704.27, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(6597.201208139698 1078.2541204467198) rotate(0 1868.3536739934648 288.5894789943759)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;406.79572959047186&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;461.74316639100095px&quot; fill=&quot;#e03131&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Error Middleware&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(1012.3859955865423 2479.9920429401354) rotate(0 7377.5438468046 2543.909026372603)&quot;&gt;&lt;path d=&quot;M32 0 C5561.51 0, 11091.02 0, 14723.09 0 M32 0 C4035.58 0, 8039.17 0, 14723.09 0 M14723.09 0 C14744.42 0, 14755.09 10.67, 14755.09 32 M14723.09 0 C14744.42 0, 14755.09 10.67, 14755.09 32 M14755.09 32 C14755.09 1868.48, 14755.09 3704.97, 14755.09 5055.82 M14755.09 32 C14755.09 1105.27, 14755.09 2178.55, 14755.09 5055.82 M14755.09 5055.82 C14755.09 5077.15, 14744.42 5087.82, 14723.09 5087.82 M14755.09 5055.82 C14755.09 5077.15, 14744.42 5087.82, 14723.09 5087.82 M14723.09 5087.82 C10002.24 5087.82, 5281.39 5087.82, 32 5087.82 M14723.09 5087.82 C9365.27 5087.82, 4007.46 5087.82, 32 5087.82 M32 5087.82 C10.67 5087.82, 0 5077.15, 0 5055.82 M32 5087.82 C10.67 5087.82, 0 5077.15, 0 5055.82 M0 5055.82 C0 3112.82, 0 1169.83, 0 32 M0 5055.82 C0 3085.92, 0 1116.03, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#846358&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7115.31469880921 1932.9269358014571) rotate(0 1491.0362259401345 205.69629988555243)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;289.9495043186753&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;329.11407981688455px&quot; fill=&quot;#846358&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Session middleware&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(1385.8612695507354 3139.2887170798967) rotate(0 6918.6027000319955 2106.239285768699)&quot;&gt;&lt;path d=&quot;M32 0 C4882.46 0, 9732.92 0, 13805.21 0 M32 0 C3456.7 0, 6881.39 0, 13805.21 0 M13805.21 0 C13826.54 0, 13837.21 10.67, 13837.21 32 M13805.21 0 C13826.54 0, 13837.21 10.67, 13837.21 32 M13837.21 32 C13837.21 1128.76, 13837.21 2225.52, 13837.21 4180.48 M13837.21 32 C13837.21 1324.65, 13837.21 2617.31, 13837.21 4180.48 M13837.21 4180.48 C13837.21 4201.81, 13826.54 4212.48, 13805.21 4212.48 M13837.21 4180.48 C13837.21 4201.81, 13826.54 4212.48, 13805.21 4212.48 M13805.21 4212.48 C10663.4 4212.48, 7521.59 4212.48, 32 4212.48 M13805.21 4212.48 C10862.01 4212.48, 7918.82 4212.48, 32 4212.48 M32 4212.48 C10.67 4212.48, 0 4201.81, 0 4180.48 M32 4212.48 C10.67 4212.48, 0 4201.81, 0 4180.48 M0 4180.48 C0 3266.69, 0 2352.91, 0 32 M0 4180.48 C0 3059.3, 0 1938.13, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(5795.58471128709 2623.2944358723) rotate(0 2624.890193665234 200.44789062818563)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;282.5513466294899&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;320.7166250050964px&quot; fill=&quot;#2f9e44&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Custom Telegram Auth middelware&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(2554.059313376768 3824.5783198464087) rotate(0 6044.735066887617 1635.210921399772)&quot;&gt;&lt;path d=&quot;M32 0 C2859.16 0, 5686.32 0, 12057.47 0 M32 0 C2559.34 0, 5086.67 0, 12057.47 0 M12057.47 0 C12078.8 0, 12089.47 10.67, 12089.47 32 M12057.47 0 C12078.8 0, 12089.47 10.67, 12089.47 32 M12089.47 32 C12089.47 875.48, 12089.47 1718.97, 12089.47 3238.42 M12089.47 32 C12089.47 863.51, 12089.47 1695.02, 12089.47 3238.42 M12089.47 3238.42 C12089.47 3259.76, 12078.8 3270.42, 12057.47 3270.42 M12089.47 3238.42 C12089.47 3259.76, 12078.8 3270.42, 12057.47 3270.42 M12057.47 3270.42 C7282.16 3270.42, 2506.86 3270.42, 32 3270.42 M12057.47 3270.42 C8121.41 3270.42, 4185.35 3270.42, 32 3270.42 M32 3270.42 C10.67 3270.42, 0 3259.76, 0 3238.42 M32 3270.42 C10.67 3270.42, 0 3259.76, 0 3238.42 M0 3238.42 C0 2126.34, 0 1014.26, 0 32 M0 3238.42 C0 1961.3, 0 684.19, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#9c36b5&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7414.169264920972 3376.615508566214) rotate(0 1478.118516621174 150.7013078057662)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;212.42856348300916&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;241.12209248922716px&quot; fill=&quot;#9c36b5&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Conversations middleware&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7961.790365358604 11115.611825782296) rotate(0 751.1837273148203 128.71827937767466)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;181.4412866107707&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;205.94924700428px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Express Server&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(377.9713012558841 11480.14609926421) rotate(0 8249.670158438044 5520.9042658424405)&quot;&gt;&lt;path d=&quot;M32 0 C6167.65 0, 12303.31 0, 16467.34 0 M32 0 C6242.43 0, 12452.86 0, 16467.34 0 M16467.34 0 C16488.67 0, 16499.34 10.67, 16499.34 32 M16467.34 0 C16488.67 0, 16499.34 10.67, 16499.34 32 M16499.34 32 C16499.34 2823.25, 16499.34 5614.5, 16499.34 11009.81 M16499.34 32 C16499.34 2719.17, 16499.34 5406.34, 16499.34 11009.81 M16499.34 11009.81 C16499.34 11031.14, 16488.67 11041.81, 16467.34 11041.81 M16499.34 11009.81 C16499.34 11031.14, 16488.67 11041.81, 16467.34 11041.81 M16467.34 11041.81 C12563.05 11041.81, 8658.75 11041.81, 32 11041.81 M16467.34 11041.81 C10085.04 11041.81, 3702.75 11041.81, 32 11041.81 M32 11041.81 C10.67 11041.81, 0 11031.14, 0 11009.81 M32 11041.81 C10.67 11041.81, 0 11031.14, 0 11009.81 M0 11009.81 C0 7856.31, 0 4702.8, 0 32 M0 11009.81 C0 7066.17, 0 3122.53, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(9922.925183739926 16197.745426149317) rotate(0 321.65404555093664 71.85426126285438)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;101.28576667611905&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;114.96681802056645px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;User Route&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8669.239031364848 16196.963026824866) rotate(0 428.79545661918473 71.85426126285438)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;101.28576667611905&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;114.96681802056646px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Calendar Route&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8126.997456072082 15737.407415262305) rotate(0 1385.03759765625 120.85518134230279)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;170.35746362010968&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;193.3682901476841px&quot; fill=&quot;#2f9e44&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Express authorize middleware&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(8573.182036726956 16115.25555179432) rotate(0 517.8330310262327 157.06169318029424)&quot;&gt;&lt;path d=&quot;M32 0 C413 0, 794.01 0, 1003.67 0 M32 0 C414.3 0, 796.6 0, 1003.67 0 M1003.67 0 C1025 0, 1035.67 10.67, 1035.67 32 M1003.67 0 C1025 0, 1035.67 10.67, 1035.67 32 M1035.67 32 C1035.67 102.32, 1035.67 172.65, 1035.67 282.12 M1035.67 32 C1035.67 126.23, 1035.67 220.45, 1035.67 282.12 M1035.67 282.12 C1035.67 303.46, 1025 314.12, 1003.67 314.12 M1035.67 282.12 C1035.67 303.46, 1025 314.12, 1003.67 314.12 M1003.67 314.12 C768.51 314.12, 533.36 314.12, 32 314.12 M1003.67 314.12 C732.4 314.12, 461.14 314.12, 32 314.12 M32 314.12 C10.67 314.12, 0 303.46, 0 282.12 M32 314.12 C10.67 314.12, 0 303.46, 0 282.12 M0 282.12 C0 189.92, 0 97.72, 0 32 M0 282.12 C0 183.69, 0 85.26, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8911.282514797253 16586.51402115558) rotate(0 209.86807644965938 31.14329186672603)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;43.89958421533725&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;49.829266986761915px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Get All Calendars&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(8869.010539295467 16542.357499519865) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C165.36 0, 298.71 0, 465.42 0 M32 0 C151.89 0, 271.79 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 58.03, 497.42 84.05, 497.42 117.89 M497.42 32 C497.42 49.92, 497.42 67.84, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C370.31 149.89, 275.2 149.89, 32 149.89 M465.42 149.89 C368.71 149.89, 272 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 98.49, 0 79.1, 0 32 M0 117.89 C0 88.87, 0 59.86, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8978.13043762497 16456.296935313676) rotate(0 113.513218488657 27.79462706697086)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;39.17930631360247&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;44.47140330715377px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Endpoints:&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8934.342188210443 16796.517744443114) rotate(0 172.30357840442412 31.14329186672603)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;43.899584215337256&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;49.82926698676192px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Get all events&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(8878.893425219896 16752.361222807398) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C124.4 0, 216.8 0, 465.42 0 M32 0 C152.95 0, 273.89 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 49.99, 497.42 67.98, 497.42 117.89 M497.42 32 C497.42 57.11, 497.42 82.23, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C300.59 149.89, 135.76 149.89, 32 149.89 M465.42 149.89 C371.16 149.89, 276.9 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 98.82, 0 79.76, 0 32 M0 117.89 C0 95.19, 0 72.5, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8911.282665592755 17040.638829539446) rotate(0 211.93640641482307 29.320360245638767)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;41.32997980225239&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;46.91257639302201px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Get Specific event&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(8873.952007390266 16989.542128409594) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C178.24 0, 324.47 0, 465.42 0 M32 0 C183.49 0, 334.98 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 61.55, 497.42 91.09, 497.42 117.89 M497.42 32 C497.42 51.44, 497.42 70.88, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C301.67 149.89, 137.92 149.89, 32 149.89 M465.42 149.89 C333.56 149.89, 201.7 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 99.41, 0 80.93, 0 32 M0 117.89 C0 89.39, 0 60.89, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8921.165300191346 17292.164421047382) rotate(0 209.11326327749612 27.089271760606607)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;38.18503747375054&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;43.34283481696997px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Update event by Id&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(8882.187578110064 17239.899859199428) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C123.72 0, 215.45 0, 465.42 0 M32 0 C136.06 0, 240.11 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 60.47, 497.42 88.95, 497.42 117.89 M497.42 32 C497.42 62.91, 497.42 93.82, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C336.44 149.89, 207.47 149.89, 32 149.89 M465.42 149.89 C314.04 149.89, 162.65 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 91.55, 0 65.21, 0 32 M0 117.89 C0 100.61, 0 83.34, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8941.62945306418 17533.277549473925) rotate(0 192.63399466146893 25.946535209178364)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;36.57423603085742&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;41.51445633468493px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Delete event by Id&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(8888.775833625232 17478.727640186036) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C202.11 0, 372.22 0, 465.42 0 M32 0 C142.1 0, 252.19 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 60.37, 497.42 88.75, 497.42 117.89 M497.42 32 C497.42 50.64, 497.42 69.28, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C314.43 149.89, 163.44 149.89, 32 149.89 M465.42 149.89 C331.13 149.89, 196.85 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 85.16, 0 52.44, 0 32 M0 117.89 C0 99.14, 0 80.39, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(9737.69716873504 16108.014232372467) rotate(0 517.8330310262327 157.06169318029424)&quot;&gt;&lt;path d=&quot;M32 0 C316.56 0, 601.13 0, 1003.67 0 M32 0 C371.97 0, 711.94 0, 1003.67 0 M1003.67 0 C1025 0, 1035.67 10.67, 1035.67 32 M1003.67 0 C1025 0, 1035.67 10.67, 1035.67 32 M1035.67 32 C1035.67 95.29, 1035.67 158.58, 1035.67 282.12 M1035.67 32 C1035.67 99.3, 1035.67 166.6, 1035.67 282.12 M1035.67 282.12 C1035.67 303.46, 1025 314.12, 1003.67 314.12 M1035.67 282.12 C1035.67 303.46, 1025 314.12, 1003.67 314.12 M1003.67 314.12 C706.27 314.12, 408.88 314.12, 32 314.12 M1003.67 314.12 C758.85 314.12, 514.04 314.12, 32 314.12 M32 314.12 C10.67 314.12, 0 303.46, 0 282.12 M32 314.12 C10.67 314.12, 0 303.46, 0 282.12 M0 282.12 C0 203.3, 0 124.47, 0 32 M0 282.12 C0 209.78, 0 137.44, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(10033.525671303552 16535.11618009802) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C162.1 0, 292.21 0, 465.42 0 M32 0 C141.15 0, 250.3 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 65.16, 497.42 98.32, 497.42 117.89 M497.42 32 C497.42 51.42, 497.42 70.84, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C316.72 149.89, 168.01 149.89, 32 149.89 M465.42 149.89 C322.95 149.89, 180.48 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 93.74, 0 69.59, 0 32 M0 117.89 C0 93.83, 0 69.78, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(10113.681121320913 16789.276425021264) rotate(0 194.1746753817879 31.14329186672603)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;43.899584215337256&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;49.82926698676192px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Deactivate user&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(10043.40855722798 16745.11990338555) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C181.31 0, 330.62 0, 465.42 0 M32 0 C173.64 0, 315.28 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 60.34, 497.42 88.69, 497.42 117.89 M497.42 32 C497.42 55.09, 497.42 78.19, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C308.97 149.89, 152.52 149.89, 32 149.89 M465.42 149.89 C339.88 149.89, 214.35 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 96.39, 0 74.9, 0 32 M0 117.89 C0 99.87, 0 81.86, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(10053.290940500736 16982.30080898774) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C176.05 0, 320.09 0, 465.42 0 M32 0 C123.86 0, 215.71 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 50.2, 497.42 68.39, 497.42 117.89 M497.42 32 C497.42 55.59, 497.42 79.19, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C356.35 149.89, 247.28 149.89, 32 149.89 M465.42 149.89 C342.67 149.89, 219.92 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 90.34, 0 62.79, 0 32 M0 117.89 C0 98.26, 0 78.64, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(10149.786964594528 16587.981973205096) rotate(0 146.2441551876027 27.79462706697086)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;39.17930631360247&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;44.47140330715377px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Get user info&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(10102.862288102566 17023.788114472478) rotate(0 131.9739997735669 31.14329186672603)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;43.89958421533725&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;49.829266986761915px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Patch user&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(10175.61768758199 16449.997000799765) rotate(0 113.513218488657 27.79462706697086)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;39.17930631360247&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;44.47140330715377px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Endpoints:&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7731.61254389378 14787.748421371922) rotate(0 1318.355712890625 133.5178805780415)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;188.20680446280784&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;213.62860892486702px&quot; fill=&quot;#e03131&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Express Error Middleware&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(7375.63945667621 16019.242082285255) rotate(0 1803.622517184257 861.4275403833899)&quot;&gt;&lt;path d=&quot;M32 0 C1415.13 0, 2798.25 0, 3575.25 0 M32 0 C1171.36 0, 2310.71 0, 3575.25 0 M3575.25 0 C3596.58 0, 3607.25 10.67, 3607.25 32 M3575.25 0 C3596.58 0, 3607.25 10.67, 3607.25 32 M3607.25 32 C3607.25 408.25, 3607.25 784.51, 3607.25 1690.86 M3607.25 32 C3607.25 614.73, 3607.25 1197.46, 3607.25 1690.86 M3607.25 1690.86 C3607.25 1712.19, 3596.58 1722.86, 3575.25 1722.86 M3607.25 1690.86 C3607.25 1712.19, 3596.58 1722.86, 3575.25 1722.86 M3575.25 1722.86 C2587.65 1722.86, 1600.06 1722.86, 32 1722.86 M3575.25 1722.86 C2368.91 1722.86, 1162.58 1722.86, 32 1722.86 M32 1722.86 C10.67 1722.86, 0 1712.19, 0 1690.86 M32 1722.86 C10.67 1722.86, 0 1712.19, 0 1690.86 M0 1690.86 C0 1100.8, 0 510.75, 0 32 M0 1690.86 C0 1071.66, 0 452.47, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(6395.2823244694755 16129.288684141264) rotate(0 334.7153897456924 74.76692932475999)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;105.39146357618151&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;119.62708691961578px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;User Route&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(6127.151029547932 16039.900788889649) rotate(0 538.8237934996291 163.4283104057031)&quot;&gt;&lt;path d=&quot;M32 0 C351.47 0, 670.93 0, 1045.65 0 M32 0 C367.92 0, 703.84 0, 1045.65 0 M1045.65 0 C1066.98 0, 1077.65 10.67, 1077.65 32 M1045.65 0 C1066.98 0, 1077.65 10.67, 1077.65 32 M1077.65 32 C1077.65 86.95, 1077.65 141.91, 1077.65 294.86 M1077.65 32 C1077.65 118.83, 1077.65 205.66, 1077.65 294.86 M1077.65 294.86 C1077.65 316.19, 1066.98 326.86, 1045.65 326.86 M1077.65 294.86 C1077.65 316.19, 1066.98 326.86, 1045.65 326.86 M1045.65 326.86 C679.66 326.86, 313.68 326.86, 32 326.86 M1045.65 326.86 C757.79 326.86, 469.94 326.86, 32 326.86 M32 326.86 C10.67 326.86, 0 316.19, 0 294.86 M32 326.86 C10.67 326.86, 0 316.19, 0 294.86 M0 294.86 C0 223.4, 0 151.95, 0 32 M0 294.86 C0 204.03, 0 113.21, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(6468.03568575643 16560.840396478336) rotate(0 190.40659662308053 32.40570929289697)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;45.67908781926698&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;51.849134868634486px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Auth at google&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(6424.050183028926 16514.893956081614) rotate(0 258.7920846665711 77.980391177407)&quot;&gt;&lt;path d=&quot;M32 0 C190.26 0, 348.51 0, 485.58 0 M32 0 C124.65 0, 217.29 0, 485.58 0 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M517.58 32 C517.58 57.19, 517.58 82.38, 517.58 123.96 M517.58 32 C517.58 54.39, 517.58 76.78, 517.58 123.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M485.58 155.96 C330.78 155.96, 175.98 155.96, 32 155.96 M485.58 155.96 C318.44 155.96, 151.29 155.96, 32 155.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M0 123.96 C0 101.11, 0 78.27, 0 32 M0 123.96 C0 101.99, 0 80.02, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(6533.22507964695 16394.7665486966) rotate(0 118.11456460627369 28.921303775181514)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;40.76746980149638&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;46.27408604029101px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Endpoints:&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(6492.030100868832 16779.356783134062) rotate(0 183.4591383100601 32.40570929289697)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;45.67908781926698&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;51.849134868634486px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Sign up regular&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(6434.333679379037 16733.410342737334) rotate(0 258.7920846665711 77.980391177407)&quot;&gt;&lt;path d=&quot;M32 0 C129.61 0, 227.23 0, 485.58 0 M32 0 C209.69 0, 387.37 0, 485.58 0 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M517.58 32 C517.58 54.9, 517.58 77.8, 517.58 123.96 M517.58 32 C517.58 65.25, 517.58 98.49, 517.58 123.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M485.58 155.96 C387.31 155.96, 289.04 155.96, 32 155.96 M485.58 155.96 C385.2 155.96, 284.81 155.96, 32 155.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M0 123.96 C0 97.85, 0 71.74, 0 32 M0 123.96 C0 101.71, 0 79.47, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(6521.001851215435 16997.880791449497) rotate(0 165.0286221211436 30.50888372845111)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;43.00532250362485&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;48.81421396552197px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Sign in regular&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(6431.9221289360485 16940.344584816317) rotate(0 258.7920846665711 77.980391177407)&quot;&gt;&lt;path d=&quot;M32 0 C147.3 0, 262.61 0, 485.58 0 M32 0 C142.86 0, 253.72 0, 485.58 0 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M517.58 32 C517.58 63.72, 517.58 95.43, 517.58 123.96 M517.58 32 C517.58 66.71, 517.58 101.43, 517.58 123.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M485.58 155.96 C387.44 155.96, 289.3 155.96, 32 155.96 M485.58 155.96 C342.35 155.96, 199.13 155.96, 32 155.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M0 123.96 C0 90.63, 0 57.3, 0 32 M0 123.96 C0 105.08, 0 86.2, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(6476.134946902096 17207.182283122496) rotate(0 202.05942578563918 28.18735634585846)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;39.732897505121656&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;45.09977015337305px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Signup with google&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(6435.577232705708 17152.799136831694) rotate(0 258.7920846665711 77.980391177407)&quot;&gt;&lt;path d=&quot;M32 0 C124.36 0, 216.73 0, 485.58 0 M32 0 C128.83 0, 225.67 0, 485.58 0 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M517.58 32 C517.58 61.75, 517.58 91.51, 517.58 123.96 M517.58 32 C517.58 60.86, 517.58 89.72, 517.58 123.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M485.58 155.96 C391.42 155.96, 297.26 155.96, 32 155.96 M485.58 155.96 C341.78 155.96, 197.98 155.96, 32 155.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M0 123.96 C0 97.3, 0 70.63, 0 32 M0 123.96 C0 102.64, 0 81.33, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(6486.507810407675 17412.20170958506) rotate(0 192.44125250270145 26.998298084374255)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;38.05680097973337&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;43.19727693499815px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Signup with github&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(6431.51172862077 17355.440577528054) rotate(0 258.7920846665711 77.980391177407)&quot;&gt;&lt;path d=&quot;M32 0 C126.83 0, 221.66 0, 485.58 0 M32 0 C181.83 0, 331.66 0, 485.58 0 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M517.58 32 C517.58 65.2, 517.58 98.41, 517.58 123.96 M517.58 32 C517.58 58.11, 517.58 84.23, 517.58 123.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M485.58 155.96 C362.28 155.96, 238.98 155.96, 32 155.96 M485.58 155.96 C328.86 155.96, 172.13 155.96, 32 155.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M0 123.96 C0 93.75, 0 63.54, 0 32 M0 123.96 C0 89.58, 0 55.19, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(6481.8359455676455 17617.995686120048) rotate(0 201.46834242195337 26.998298084374255)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;38.05680097973337&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;43.19727693499814px&quot; fill=&quot;#f08c00&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Signup with linkedin&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(6426.839863780739 17561.23455406304) rotate(0 258.7920846665711 77.980391177407)&quot;&gt;&lt;path d=&quot;M32 0 C181.24 0, 330.47 0, 485.58 0 M32 0 C164.81 0, 297.62 0, 485.58 0 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M485.58 0 C506.92 0, 517.58 10.67, 517.58 32 M517.58 32 C517.58 64.89, 517.58 97.77, 517.58 123.96 M517.58 32 C517.58 66.56, 517.58 101.11, 517.58 123.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M517.58 123.96 C517.58 145.29, 506.92 155.96, 485.58 155.96 M485.58 155.96 C375.08 155.96, 264.57 155.96, 32 155.96 M485.58 155.96 C340.69 155.96, 195.79 155.96, 32 155.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M32 155.96 C10.67 155.96, 0 145.29, 0 123.96 M0 123.96 C0 95.5, 0 67.03, 0 32 M0 123.96 C0 102.64, 0 81.32, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#f08c00&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7530.931068942506 16215.941186283546) rotate(0 428.1034473542759 55.83613333881749)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;78.70661355439705&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;89.33781334210789px&quot; fill=&quot;#846358&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Conversation Stats&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(7464.261173796732 16117.837047825495) rotate(0 517.8330310262322 157.06169318029424)&quot;&gt;&lt;path d=&quot;M32 0 C245.96 0, 459.93 0, 1003.67 0 M32 0 C258.49 0, 484.99 0, 1003.67 0 M1003.67 0 C1025 0, 1035.67 10.67, 1035.67 32 M1003.67 0 C1025 0, 1035.67 10.67, 1035.67 32 M1035.67 32 C1035.67 89.13, 1035.67 146.25, 1035.67 282.12 M1035.67 32 C1035.67 127.4, 1035.67 222.8, 1035.67 282.12 M1035.67 282.12 C1035.67 303.46, 1025 314.12, 1003.67 314.12 M1035.67 282.12 C1035.67 303.46, 1025 314.12, 1003.67 314.12 M1003.67 314.12 C726.22 314.12, 448.77 314.12, 32 314.12 M1003.67 314.12 C747.02 314.12, 490.38 314.12, 32 314.12 M32 314.12 C10.67 314.12, 0 303.46, 0 282.12 M32 314.12 C10.67 314.12, 0 303.46, 0 282.12 M0 282.12 C0 184.13, 0 86.14, 0 32 M0 282.12 C0 219.23, 0 156.34, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#846358&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7754.082834119492 16616.38349238749) rotate(0 146.64031486330623 31.14329186672603)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;43.89958421533724&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;49.82926698676191px&quot; fill=&quot;#846358&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Coming soon&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(7711.810858617706 16570.1279265338) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C198.81 0, 365.61 0, 465.42 0 M32 0 C169.86 0, 307.73 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 54.71, 497.42 77.43, 497.42 117.89 M497.42 32 C497.42 64.19, 497.42 96.38, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C304.4 149.89, 143.37 149.89, 32 149.89 M465.42 149.89 C295.35 149.89, 125.29 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 91.57, 0 65.26, 0 32 M0 117.89 C0 93.17, 0 68.46, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#846358&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7820.930756947208 16484.0673623276) rotate(0 113.513218488657 27.79462706697086)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;39.17930631360247&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;44.47140330715377px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Endpoints:&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7775.0434633147015 16820.09008302109) rotate(0 146.64031486330623 31.14329186672603)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;43.89958421533724&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;49.82926698676191px&quot; fill=&quot;#846358&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Coming soon&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(7721.693744542134 16780.131649821327) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C177.43 0, 322.86 0, 465.42 0 M32 0 C148.55 0, 265.11 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 55.12, 497.42 78.25, 497.42 117.89 M497.42 32 C497.42 65.82, 497.42 99.63, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C298.33 149.89, 131.24 149.89, 32 149.89 M465.42 149.89 C326 149.89, 186.59 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 93.28, 0 68.67, 0 32 M0 117.89 C0 86.71, 0 55.53, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#846358&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7754.082984914994 17068.409256553376) rotate(0 138.0534832159683 29.320360245638767)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;41.32997980225239&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;46.91257639302201px&quot; fill=&quot;#846358&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Coming soon&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(7716.752326712503 17017.312555423523) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C156.61 0, 281.21 0, 465.42 0 M32 0 C128.1 0, 224.19 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 56.91, 497.42 81.81, 497.42 117.89 M497.42 32 C497.42 58.93, 497.42 85.85, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C359.67 149.89, 253.93 149.89, 32 149.89 M465.42 149.89 C358.11 149.89, 250.81 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 90.35, 0 62.82, 0 32 M0 117.89 C0 99.66, 0 81.44, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#846358&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7763.965619513585 17319.93484806131) rotate(0 127.55158400416713 27.089271760606607)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;38.18503747375054&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;43.34283481696997px&quot; fill=&quot;#846358&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Coming soon&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(7724.987897432304 17267.67028621336) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C185.92 0, 339.83 0, 465.42 0 M32 0 C135.06 0, 238.11 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 53.16, 497.42 74.33, 497.42 117.89 M497.42 32 C497.42 63.95, 497.42 95.91, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C377.41 149.89, 289.4 149.89, 32 149.89 M465.42 149.89 C368.3 149.89, 271.18 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 87.6, 0 57.32, 0 32 M0 117.89 C0 94.47, 0 71.06, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#846358&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7782.330728168443 17558.94893226988) rotate(0 122.1616589979185 25.946535209178364)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;36.574236030857435&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;41.51445633468494px&quot; fill=&quot;#846358&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Coming soon&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(7729.477108729494 17502.29997876401) rotate(0 248.7104155852021 74.94253745131937)&quot;&gt;&lt;path d=&quot;M32 0 C130.99 0, 229.98 0, 465.42 0 M32 0 C197.31 0, 362.63 0, 465.42 0 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M465.42 0 C486.75 0, 497.42 10.67, 497.42 32 M497.42 32 C497.42 56.52, 497.42 81.05, 497.42 117.89 M497.42 32 C497.42 54.68, 497.42 77.37, 497.42 117.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M497.42 117.89 C497.42 139.22, 486.75 149.89, 465.42 149.89 M465.42 149.89 C295.61 149.89, 125.81 149.89, 32 149.89 M465.42 149.89 C356.44 149.89, 247.46 149.89, 32 149.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M32 149.89 C10.67 149.89, 0 139.22, 0 117.89 M0 117.89 C0 99.11, 0 80.33, 0 32 M0 117.89 C0 89.97, 0 62.06, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#846358&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(6054.351107481049 15476.141394738412) rotate(0 2519.2876431619848 1212.4114126484355)&quot;&gt;&lt;path d=&quot;M32 0 C1428.8 0, 2825.61 0, 5006.58 0 M32 0 C1312.03 0, 2592.05 0, 5006.58 0 M5006.58 0 C5027.91 0, 5038.58 10.67, 5038.58 32 M5006.58 0 C5027.91 0, 5038.58 10.67, 5038.58 32 M5038.58 32 C5038.58 815.05, 5038.58 1598.09, 5038.58 2392.82 M5038.58 32 C5038.58 819.27, 5038.58 1606.54, 5038.58 2392.82 M5038.58 2392.82 C5038.58 2414.16, 5027.91 2424.82, 5006.58 2424.82 M5038.58 2392.82 C5038.58 2414.16, 5027.91 2424.82, 5006.58 2424.82 M5006.58 2424.82 C3300.62 2424.82, 1594.66 2424.82, 32 2424.82 M5006.58 2424.82 C3762.28 2424.82, 2517.98 2424.82, 32 2424.82 M32 2424.82 C10.67 2424.82, 0 2414.16, 0 2392.82 M32 2424.82 C10.67 2424.82, 0 2414.16, 0 2392.82 M0 2392.82 C0 1779.34, 0 1165.86, 0 32 M0 2392.82 C0 1739.41, 0 1086, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#9c36b5&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8197.897434086273 15163.717858283359) rotate(0 849.59326171875 136.73732211233437)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;192.74492924954657&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;218.77971537973502px&quot; fill=&quot;#6741d9&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Express Routes&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13660.598077893346 14806.13527813045) rotate(0 524.6912550595944 109.87958956730563)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;154.88626945407387&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;175.80734330768885px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Agents Flow&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(11579.355967113637 15094.170315280824) rotate(0 2586.2982029389605 1540.7501843050077)&quot;&gt;&lt;path d=&quot;M32 0 C1909.55 0, 3787.1 0, 5140.6 0 M32 0 C1765.79 0, 3499.58 0, 5140.6 0 M5140.6 0 C5161.93 0, 5172.6 10.67, 5172.6 32 M5140.6 0 C5161.93 0, 5172.6 10.67, 5172.6 32 M5172.6 32 C5172.6 1202.6, 5172.6 2373.21, 5172.6 3049.5 M5172.6 32 C5172.6 836.99, 5172.6 1641.98, 5172.6 3049.5 M5172.6 3049.5 C5172.6 3070.83, 5161.93 3081.5, 5140.6 3081.5 M5172.6 3049.5 C5172.6 3070.83, 5161.93 3081.5, 5140.6 3081.5 M5140.6 3081.5 C3971.87 3081.5, 2803.14 3081.5, 32 3081.5 M5140.6 3081.5 C3331.38 3081.5, 1522.17 3081.5, 32 3081.5 M32 3081.5 C10.67 3081.5, 0 3070.83, 0 3049.5 M32 3081.5 C10.67 3081.5, 0 3070.83, 0 3049.5 M0 3049.5 C0 2387.21, 0 1724.93, 0 32 M0 3049.5 C0 2223.65, 0 1397.81, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#099268&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13874.269577337576 15182.737921424163) rotate(0 214.63996253485857 175.51268278871157)&quot;&gt;&lt;path d=&quot;M214.25 -1.59 C277.05 48.28, 340.49 99.45, 429.16 176.01 M213.94 -0.33 C266.66 40.85, 322.68 85.86, 429.82 176.15 M431 175.29 C355.11 237.09, 274.43 299.67, 216.49 351.48 M429.45 177.12 C386.2 209.95, 343.06 245.98, 215.46 349.49 M213.72 350.93 C162.97 311.95, 111.63 272.71, 0.89 175.09 M215.27 350.8 C133.46 283.19, 49.18 215.41, -0.47 176.61 M-0.1 177.33 C51.17 126.01, 106.19 83.26, 213.96 2.92 M0.62 177.38 C45.12 141.89, 88.94 105.97, 214.06 1.06&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13990.63576984768 15297.739872622426) rotate(0 98.45378875732422 60.75439019609257)&quot;&gt;&lt;text x=&quot;98.45378875732422&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Calendar router&lt;/text&gt;&lt;text x=&quot;98.45378875732422&quot; y=&quot;41.429633762519416&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;agent&lt;/text&gt;&lt;text x=&quot;98.45378875732422&quot; y=&quot;65.73138984095644&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Checks if&lt;/text&gt;&lt;text x=&quot;98.45378875732422&quot; y=&quot;90.03314591939345&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;instrucrtion is fit to&lt;/text&gt;&lt;text x=&quot;98.45378875732422&quot; y=&quot;114.33490199783046&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;one of agents&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-_LRgA2arzmTrmJzS_hCTI)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14300.024610886809 15352.624446204745) rotate(0 222.53538481145915 -4.997664825086758)&quot;&gt;&lt;path d=&quot;M0 0 C74.18 -1.67, 370.89 -8.33, 445.07 -10 M0 0 C74.18 -1.67, 370.89 -8.33, 445.07 -10&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14300.024610886809 15352.624446204745) rotate(0 222.53538481145915 -4.997664825086758)&quot;&gt;&lt;path d=&quot;M421.78 -0.92 C430.73 -4.41, 439.67 -7.89, 445.07 -10 M421.78 -0.92 C426.86 -2.9, 431.94 -4.88, 445.07 -10&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14300.024610886809 15352.624446204745) rotate(0 222.53538481145915 -4.997664825086758)&quot;&gt;&lt;path d=&quot;M421.39 -18.02 C430.49 -14.93, 439.59 -11.85, 445.07 -10 M421.39 -18.02 C426.56 -16.27, 431.72 -14.52, 445.07 -10&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-_LRgA2arzmTrmJzS_hCTI&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;14845.095380509727&quot; height=&quot;15462.619775854919&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;14507.163526582057&quot; y=&quot;15335.47590334044&quot; fill=&quot;#000&quot; width=&quot;30.792938232421875&quot; height=&quot;24.301756078437013&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14507.163526582059 15335.47590334044) rotate(0 15.396469116210938 12.150878039217787)&quot;&gt;&lt;text x=&quot;15.396469116210938&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#2f9e44&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Yes&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-UToRi-Q_tIudSCvfzKwXC)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(13882.874559996311 15350.867171745474) rotate(0 -338.9271542062943 -8.937157038893929)&quot;&gt;&lt;path d=&quot;M0 0 C-112.98 -2.98, -564.88 -14.9, -677.85 -17.87 M0 0 C-112.98 -2.98, -564.88 -14.9, -677.85 -17.87&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13882.874559996311 15350.867171745474) rotate(0 -338.9271542062943 -8.937157038893929)&quot;&gt;&lt;path d=&quot;M-654.14 -25.8 C-662.04 -23.16, -669.94 -20.52, -677.85 -17.87 M-654.14 -25.8 C-659.48 -24.02, -664.81 -22.24, -677.85 -17.87&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13882.874559996311 15350.867171745474) rotate(0 -338.9271542062943 -8.937157038893929)&quot;&gt;&lt;path d=&quot;M-654.6 -8.71 C-662.34 -11.76, -670.09 -14.82, -677.85 -17.87 M-654.6 -8.71 C-659.83 -10.77, -665.06 -12.83, -677.85 -17.87&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-UToRi-Q_tIudSCvfzKwXC&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;14660.7288684089&quot; height=&quot;15468.741485823262&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;13531.972376798318&quot; y=&quot;15329.779136667363&quot; fill=&quot;#000&quot; width=&quot;23.950057983398438&quot; height=&quot;24.301756078437013&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(13531.97237679832 15329.779136667363) rotate(0 11.975028991699219 12.150878039217787)&quot;&gt;&lt;text x=&quot;11.975028991699219&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#e03131&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;No&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13055.268003229963 15294.609991947782) rotate(0 87.02328168882468 33.525053895140445)&quot;&gt;&lt;path d=&quot;M108.91 1.25 C121.57 1.95, 136.07 5.62, 146.09 9.15 C156.1 12.67, 164.58 17.7, 169.01 22.42 C173.43 27.13, 174.52 32.3, 172.64 37.43 C170.75 42.55, 165.35 48.78, 157.7 53.19 C150.04 57.59, 138.64 61.69, 126.7 63.87 C114.75 66.05, 99.46 66.24, 86.02 66.24 C72.58 66.24, 58.07 66.25, 46.07 63.87 C34.08 61.48, 21.79 56.46, 14.03 51.95 C6.27 47.43, 0.88 41.8, -0.47 36.79 C-1.82 31.77, 0.95 26.54, 5.94 21.85 C10.92 17.16, 19.06 12.2, 29.41 8.66 C39.77 5.11, 53.43 1.56, 68.07 0.59 C82.72 -0.38, 107.92 2.44, 117.27 2.85 C126.61 3.25, 124.8 2.56, 124.16 3.01 M54.94 2.43 C66.38 0.26, 83.41 0.06, 96.82 0.58 C110.22 1.11, 124.03 2.91, 135.37 5.58 C146.7 8.25, 158.19 11.9, 164.81 16.62 C171.44 21.34, 175.35 28.34, 175.11 33.91 C174.87 39.48, 169.75 45.51, 163.38 50.04 C157.01 54.57, 147.7 58.23, 136.89 61.08 C126.09 63.94, 111.88 66.46, 98.54 67.19 C85.21 67.91, 69.63 67.31, 56.88 65.45 C44.12 63.58, 31 60.2, 22.02 55.98 C13.04 51.75, 6.01 45.16, 3 40.08 C-0.01 35, 0.69 30.19, 3.95 25.52 C7.21 20.85, 13.71 15.92, 22.56 12.05 C31.41 8.19, 51.31 4.02, 57.05 2.35 C62.79 0.67, 56.74 1.47, 56.99 2.02&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13092.898034058324 15310.510240628751) rotate(0 49.77657421887943 16.90615299854926)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;11.915456633377213&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;13.52492239883906px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Return with ai&lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;28.821609631926037&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;13.52492239883906px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;agent response&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-0P54xgtLOV2Z6Hd9FUfZ9)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14849.435866872223 15419.037227449398) rotate(0 5.6672809159172175 74.86958159747337)&quot;&gt;&lt;path d=&quot;M0 0 C1.89 24.96, 9.45 124.78, 11.33 149.74 M0 0 C1.89 24.96, 9.45 124.78, 11.33 149.74&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14849.435866872223 15419.037227449398) rotate(0 5.6672809159172175 74.86958159747337)&quot;&gt;&lt;path d=&quot;M1.04 126.96 C3.16 131.65, 5.28 136.35, 11.33 149.74 M1.04 126.96 C3.12 131.57, 5.2 136.17, 11.33 149.74&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14849.435866872223 15419.037227449398) rotate(0 5.6672809159172175 74.86958159747337)&quot;&gt;&lt;path d=&quot;M18.09 125.67 C16.7 130.63, 15.3 135.59, 11.33 149.74 M18.09 125.67 C16.72 130.54, 15.36 135.4, 11.33 149.74&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-0P54xgtLOV2Z6Hd9FUfZ9&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;14960.770428704058&quot; height=&quot;15668.776390644345&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;14839.706678671928&quot; y=&quot;15481.755931007654&quot; fill=&quot;#000&quot; width=&quot;30.792938232421875&quot; height=&quot;24.301756078437013&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14839.706678671926 15481.755931007654) rotate(0 15.396469116212756 12.150878039217787)&quot;&gt;&lt;text x=&quot;15.396469116210938&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#2f9e44&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Yes&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-AEHZHwxheCgLDsPuZGXta)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14972.114479157615 15342.933663249687) rotate(0 88.84316268677685 2.6983672974047295)&quot;&gt;&lt;path d=&quot;M0 0 C29.61 0.9, 148.07 4.5, 177.69 5.4 M0 0 C29.61 0.9, 148.07 4.5, 177.69 5.4&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14972.114479157615 15342.933663249687) rotate(0 88.84316268677685 2.6983672974047295)&quot;&gt;&lt;path d=&quot;M153.95 13.23 C159.27 11.47, 164.6 9.72, 177.69 5.4 M153.95 13.23 C160.88 10.94, 167.81 8.65, 177.69 5.4&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14972.114479157615 15342.933663249687) rotate(0 88.84316268677685 2.6983672974047295)&quot;&gt;&lt;path d=&quot;M154.46 -3.86 C159.67 -1.79, 164.88 0.29, 177.69 5.4 M154.46 -3.86 C161.25 -1.16, 168.03 1.55, 177.69 5.4&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-AEHZHwxheCgLDsPuZGXta&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;15249.800804531169&quot; height=&quot;15448.330397844496&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;15048.982612852693&quot; y=&quot;15333.481152507875&quot; fill=&quot;#000&quot; width=&quot;23.950057983398438&quot; height=&quot;24.301756078437013&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(15048.982612852691 15333.481152507875) rotate(0 11.975028991699219 12.150878039216877)&quot;&gt;&lt;text x=&quot;11.975028991699219&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#e03131&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;No&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(15154.165606363435 15272.578454374927) rotate(0 87.02328168882468 78.01973007422202)&quot;&gt;&lt;path d=&quot;M81.88 0.41 C93.05 -1.34, 107.82 0.73, 118.92 4.58 C130.03 8.42, 140.22 16.04, 148.5 23.47 C156.77 30.9, 164.44 39.52, 168.59 49.15 C172.73 58.78, 173.89 70.67, 173.35 81.25 C172.81 91.83, 170.51 103.14, 165.35 112.63 C160.18 122.12, 151.79 131.52, 142.37 138.17 C132.95 144.83, 120.27 149.78, 108.82 152.57 C97.38 155.36, 85.3 156.34, 73.71 154.91 C62.12 153.48, 49.13 149.78, 39.31 144 C29.49 138.21, 21.2 129.21, 14.77 120.21 C8.34 111.21, 2.66 100.53, 0.74 90.02 C-1.17 79.51, 0.22 67.4, 3.28 57.15 C6.33 46.9, 11.59 36.53, 19.08 28.52 C26.57 20.51, 35.49 13.83, 48.23 9.1 C60.97 4.37, 85.56 0.99, 95.51 0.14 C105.47 -0.7, 108.28 2.61, 107.97 4.03 M106.51 0.66 C117.96 1.65, 130.8 7.34, 139.95 13.96 C149.1 20.58, 156.03 30.98, 161.39 40.37 C166.75 49.76, 170.67 60.17, 172.12 70.31 C173.57 80.45, 173.27 90.95, 170.06 101.22 C166.86 111.5, 160.87 123.88, 152.88 131.97 C144.89 140.06, 133.37 146.01, 122.13 149.78 C110.89 153.55, 97.31 154.79, 85.45 154.58 C73.6 154.38, 61.39 152.69, 51 148.56 C40.62 144.42, 30.7 137.54, 23.12 129.79 C15.55 122.05, 9.36 111.92, 5.57 102.1 C1.78 92.29, -0.63 81.69, 0.38 70.9 C1.4 60.11, 5.69 46.69, 11.65 37.37 C17.61 28.05, 26.77 20.78, 36.15 14.97 C45.53 9.15, 56.48 4.84, 67.92 2.49 C79.37 0.13, 98.59 0.95, 104.83 0.84 C111.07 0.73, 105.6 0.17, 105.38 1.82&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(15188.423338635019 15302.118242751701) rotate(0 52.730796813964844 48.31166149562068)&quot;&gt;&lt;text x=&quot;52.730796813964844&quot; y=&quot;13.620023608845454&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;15.4597316785987px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Genearet&lt;/text&gt;&lt;text x=&quot;52.730796813964844&quot; y=&quot;32.94468820709383&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;15.4597316785987px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;callback url so&lt;/text&gt;&lt;text x=&quot;52.730796813964844&quot; y=&quot;52.26935280534221&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;15.4597316785987px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;user can be&lt;/text&gt;&lt;text x=&quot;52.730796813964844&quot; y=&quot;71.59401740359058&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;15.4597316785987px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;reigstered via&lt;/text&gt;&lt;text x=&quot;52.730796813964844&quot; y=&quot;90.91868200183896&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;15.4597316785987px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;google oauth&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14748.554457089087 15571.032622969607) rotate(0 115.13193835372749 61.76561964209213)&quot;&gt;&lt;path d=&quot;M82.31 2.04 C95.25 -0.95, 111.47 0.02, 126.01 0.81 C140.55 1.6, 156.49 3.09, 169.53 6.79 C182.57 10.49, 195.1 16.67, 204.23 23 C213.36 29.34, 219.94 37.5, 224.32 44.82 C228.71 52.15, 231.85 59.16, 230.54 66.96 C229.22 74.76, 223.63 84.5, 216.43 91.64 C209.23 98.77, 198.76 104.85, 187.35 109.79 C175.94 114.72, 161.78 118.9, 147.97 121.24 C134.15 123.59, 118.88 124.83, 104.47 123.84 C90.05 122.86, 74.58 119.29, 61.48 115.32 C48.37 111.35, 35.17 105.85, 25.85 100.04 C16.53 94.24, 9.92 87.9, 5.55 80.49 C1.19 73.08, -1.7 63.69, -0.34 55.57 C1.03 47.44, 6.59 38.81, 13.74 31.75 C20.9 24.69, 30.06 18.17, 42.59 13.21 C55.13 8.24, 80.23 3.69, 88.98 1.95 C97.74 0.2, 94.94 1.74, 95.13 2.73 M90.47 -0.05 C103.64 -2.93, 120.24 -1.57, 134.92 0.15 C149.61 1.87, 166 5.8, 178.58 10.26 C191.16 14.73, 202.19 20.71, 210.4 26.92 C218.62 33.14, 224.64 39.79, 227.87 47.54 C231.1 55.3, 232.24 65.26, 229.76 73.46 C227.29 81.66, 221.36 90.24, 213.02 96.73 C204.69 103.23, 192.04 107.98, 179.77 112.44 C167.5 116.91, 153.72 121.78, 139.39 123.5 C125.06 125.22, 108.54 124.59, 93.8 122.79 C79.06 120.98, 63.45 117.18, 50.96 112.67 C38.47 108.16, 26.68 101.87, 18.85 95.74 C11.01 89.62, 6.66 83.24, 3.93 75.91 C1.21 68.58, 0.2 59.53, 2.47 51.76 C4.73 43.99, 9.43 35.9, 17.5 29.3 C25.58 22.7, 38.63 16.65, 50.91 12.17 C63.2 7.69, 84.39 4.22, 91.22 2.41 C98.06 0.6, 91.32 0.67, 91.91 1.32&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14790.127452266293 15596.170720000931) rotate(0 73.64836883544922 36.45263411765518)&quot;&gt;&lt;text x=&quot;73.64836883544922&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Is user request&lt;/text&gt;&lt;text x=&quot;73.64836883544922&quot; y=&quot;41.429633762519416&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;releated to&lt;/text&gt;&lt;text x=&quot;73.64836883544922&quot; y=&quot;65.73138984095644&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;calendar ?&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14473.758762205644 16044.85641039524) rotate(0 115.13193835372749 61.76561964209213)&quot;&gt;&lt;path d=&quot;M164.05 5.92 C177.45 8.21, 190.59 14.22, 200.4 20.08 C210.22 25.94, 217.88 33.67, 222.97 41.08 C228.06 48.49, 231.68 56.79, 230.95 64.56 C230.21 72.32, 224.91 80.68, 218.56 87.68 C212.22 94.68, 203.61 101.07, 192.88 106.57 C182.15 112.07, 168.15 117.76, 154.19 120.68 C140.22 123.6, 123.74 124.59, 109.06 124.08 C94.39 123.56, 79.19 120.98, 66.13 117.6 C53.07 114.21, 40.66 109.6, 30.7 103.75 C20.74 97.89, 11.5 89.81, 6.37 82.44 C1.24 75.06, -0.92 67.23, -0.1 59.49 C0.72 51.75, 5.06 43.15, 11.3 36 C17.53 28.86, 26.47 22.14, 37.32 16.62 C48.16 11.1, 62.45 5.73, 76.37 2.89 C90.28 0.05, 104.54 -1.43, 120.79 -0.42 C137.04 0.6, 163.97 6.77, 173.84 8.97 C183.71 11.17, 181.14 12.05, 180.01 12.77 M92.66 0.9 C105.55 -1.56, 121.37 -0.64, 135.5 0.87 C149.63 2.38, 165.22 5.81, 177.44 9.95 C189.67 14.09, 200.27 19.12, 208.84 25.7 C217.41 32.28, 225.41 41.61, 228.87 49.42 C232.32 57.22, 232.55 64.99, 229.57 72.51 C226.58 80.02, 219.33 87.83, 210.96 94.51 C202.6 101.19, 191.57 108.08, 179.38 112.59 C167.18 117.11, 152.29 120.14, 137.79 121.61 C123.29 123.09, 106.8 122.76, 92.39 121.45 C77.98 120.14, 63.57 117.84, 51.35 113.74 C39.14 109.64, 27.48 103.45, 19.1 96.85 C10.72 90.25, 4.05 81.69, 1.08 74.15 C-1.89 66.61, -1.64 59.35, 1.29 51.63 C4.21 43.91, 10.32 34.89, 18.64 27.84 C26.95 20.79, 39.24 13.87, 51.2 9.34 C63.16 4.8, 83.34 1.66, 90.38 0.65 C97.43 -0.36, 92.63 2.04, 93.45 3.28&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14515.613625363807 16069.994507426563) rotate(0 73.36650085449219 36.45263411765518)&quot;&gt;&lt;text x=&quot;73.36650085449219&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Update specific&lt;/text&gt;&lt;text x=&quot;73.36650085449219&quot; y=&quot;41.429633762519416&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;event by name&lt;/text&gt;&lt;text x=&quot;73.36650085449219&quot; y=&quot;65.73138984095644&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;or id&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(15086.049276530955 16052.224832450702) rotate(0 115.13193835372749 61.76561964209213)&quot;&gt;&lt;path d=&quot;M60.03 8.07 C71.43 3.8, 88.25 2.07, 103.04 1.08 C117.84 0.08, 134.56 -0.18, 148.82 2.12 C163.07 4.42, 177.28 9.72, 188.56 14.88 C199.84 20.05, 209.49 26.17, 216.51 33.11 C223.53 40.06, 229.37 48.73, 230.68 56.55 C232 64.37, 228.77 72.52, 224.4 80.04 C220.02 87.56, 213.54 95.67, 204.42 101.68 C195.31 107.69, 182.65 112.62, 169.7 116.08 C156.75 119.55, 141.41 121.53, 126.71 122.47 C112.01 123.42, 95.53 123.78, 81.51 121.74 C67.49 119.7, 54.06 115.46, 42.58 110.23 C31.1 105.01, 19.47 97.41, 12.63 90.38 C5.78 83.34, 2.88 75.64, 1.52 68.04 C0.16 60.45, 0.46 52.31, 4.47 44.81 C8.48 37.31, 15.5 29.36, 25.56 23.04 C35.61 16.72, 57.35 9.56, 64.78 6.9 C72.21 4.24, 69.17 6.38, 70.14 7.08 M162.21 5.63 C175.75 8.15, 190.39 15.29, 200.37 20.96 C210.36 26.63, 217.28 32.74, 222.12 39.65 C226.95 46.56, 229.49 54.37, 229.37 62.41 C229.25 70.45, 227.21 80.71, 221.4 87.9 C215.6 95.09, 205.62 100.22, 194.52 105.56 C183.41 110.89, 168.71 117.12, 154.75 119.91 C140.8 122.7, 125.25 122.62, 110.8 122.28 C96.35 121.94, 81.51 121.06, 68.07 117.86 C54.64 114.65, 40.21 108.84, 30.18 103.06 C20.15 97.27, 12.96 90.62, 7.89 83.14 C2.82 75.66, -0.69 65.81, -0.23 58.17 C0.23 50.54, 4.62 44.42, 10.63 37.31 C16.64 30.2, 25.19 21.27, 35.83 15.5 C46.47 9.74, 60.86 5.18, 74.5 2.73 C88.13 0.28, 103.05 0.28, 117.63 0.8 C132.21 1.32, 154.73 5.06, 161.97 5.85 C169.21 6.64, 161.64 4.55, 161.06 5.53&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(15142.454966715486 16077.362929482026) rotate(0 58.815673828125 36.45263411765518)&quot;&gt;&lt;text x=&quot;58.815673828125&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Get list of&lt;/text&gt;&lt;text x=&quot;58.815673828125&quot; y=&quot;41.429633762519416&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;events /&lt;/text&gt;&lt;text x=&quot;58.815673828125&quot; y=&quot;65.73138984095644&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Calendar list&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14759.82726590822 16068.945630529564) rotate(0 115.13193835372749 41.548028886233624)&quot;&gt;&lt;path d=&quot;M104.03 -0.18 C118.66 -1.04, 137.01 1.28, 151.78 3.01 C166.54 4.75, 181.09 6.63, 192.61 10.25 C204.13 13.87, 214.45 19.46, 220.88 24.74 C227.31 30.01, 231.35 36.07, 231.19 41.89 C231.03 47.7, 226.59 54.32, 219.89 59.61 C213.19 64.9, 202.89 69.93, 191 73.64 C179.11 77.36, 163.49 80.22, 148.55 81.91 C133.6 83.6, 116.7 84.41, 101.35 83.79 C86.01 83.16, 69.8 81.07, 56.47 78.16 C43.14 75.26, 30.58 71.09, 21.38 66.36 C12.19 61.64, 4.24 55.46, 1.33 49.83 C-1.59 44.19, 0.26 38.11, 3.88 32.57 C7.51 27.02, 13.88 20.98, 23.08 16.57 C32.27 12.17, 43.03 9.05, 59.06 6.13 C75.1 3.2, 107.21 -0.1, 119.29 -0.98 C131.38 -1.85, 131.67 -0.13, 131.57 0.88 M93.29 -0.5 C107.68 -1.98, 125 0.78, 140.15 2.41 C155.3 4.04, 171.61 6.41, 184.18 9.27 C196.75 12.13, 208.21 15.06, 215.56 19.57 C222.91 24.08, 226.65 30.35, 228.27 36.35 C229.89 42.36, 229.86 50.13, 225.27 55.61 C220.69 61.09, 211.26 65.41, 200.74 69.23 C190.22 73.05, 176.55 76.37, 162.14 78.52 C147.73 80.67, 129.91 81.83, 114.3 82.13 C98.68 82.42, 82.73 82.57, 68.47 80.31 C54.21 78.04, 39 73.02, 28.74 68.54 C18.47 64.05, 11.67 58.7, 6.85 53.38 C2.04 48.07, -1.43 41.9, -0.13 36.67 C1.18 31.44, 6.88 26.82, 14.68 22.01 C22.48 17.2, 33.55 11.52, 46.67 7.81 C59.78 4.09, 85.68 0.77, 93.39 -0.3 C101.11 -1.37, 92.61 0.38, 92.95 1.4&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14813.793228309547 16098.46388840619) rotate(0 61.255401611328125 12.150878039218696)&quot;&gt;&lt;text x=&quot;61.255401611328125&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Create event&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14208.456602068209 16040.68255516334) rotate(0 115.13193835372749 61.76561964209213)&quot;&gt;&lt;path d=&quot;M107.12 0.99 C120.92 -0.51, 138.36 -0.3, 152.09 2.13 C165.81 4.57, 178.43 10.2, 189.48 15.6 C200.53 20.99, 211.77 27.69, 218.39 34.53 C225.02 41.36, 228.1 48.84, 229.24 56.6 C230.39 64.37, 229.7 73.69, 225.28 81.12 C220.86 88.55, 212.35 95.21, 202.7 101.18 C193.05 107.14, 180.46 113.17, 167.37 116.91 C154.27 120.64, 138.88 122.96, 124.13 123.6 C109.38 124.23, 93 123.36, 78.86 120.71 C64.72 118.05, 50.3 112.71, 39.29 107.66 C28.28 102.62, 19.45 97.23, 12.8 90.45 C6.15 83.67, 0.55 74.84, -0.6 66.99 C-1.75 59.14, 1.21 51.03, 5.89 43.35 C10.57 35.67, 18 27.06, 27.46 20.89 C36.92 14.72, 48.69 9.68, 62.63 6.33 C76.58 2.99, 102.47 1.73, 111.11 0.83 C119.75 -0.07, 114.65 0.13, 114.48 0.94 M150.7 4.32 C164.84 5.73, 181.13 8.95, 192.2 13.96 C203.27 18.98, 210.84 27.33, 217.13 34.4 C223.42 41.47, 228.86 48.62, 229.92 56.4 C230.99 64.18, 228.24 73.45, 223.51 81.09 C218.78 88.73, 211.16 96.24, 201.54 102.23 C191.92 108.22, 178.94 113.5, 165.77 117.04 C152.6 120.58, 137.1 122.68, 122.52 123.46 C107.94 124.25, 92.08 124.27, 78.31 121.77 C64.53 119.27, 50.82 113.84, 39.86 108.45 C28.9 103.06, 19.11 96.74, 12.55 89.42 C5.99 82.1, 1.69 72.21, 0.48 64.52 C-0.72 56.84, 0.91 50.69, 5.34 43.33 C9.78 35.97, 17.38 26.62, 27.1 20.37 C36.81 14.13, 50.44 9.1, 63.63 5.86 C76.82 2.63, 91.52 1.66, 106.24 0.97 C120.96 0.29, 144.52 0.92, 151.94 1.75 C159.37 2.57, 151.15 4.51, 150.77 5.9&quot; stroke=&quot;#1971c2&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14253.898150407036 16065.820652194663) rotate(0 69.77981567382812 36.45263411765518)&quot;&gt;&lt;text x=&quot;69.77981567382812&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Delete specific&lt;/text&gt;&lt;text x=&quot;69.77981567382812&quot; y=&quot;41.429633762519416&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;event by name&lt;/text&gt;&lt;text x=&quot;69.77981567382812&quot; y=&quot;65.73138984095644&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1971c2&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;or id&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask--t1ALH3d6AhvJ7p4bl8rZ)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14846.887252452518 15920.849760653888) rotate(0 10.43186590411733 71.81988332864603)&quot;&gt;&lt;path d=&quot;M0 0 C3.48 23.94, 17.39 119.7, 20.86 143.64 M0 0 C3.48 23.94, 17.39 119.7, 20.86 143.64&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14846.887252452518 15920.849760653888) rotate(0 10.43186590411733 71.81988332864603)&quot;&gt;&lt;path d=&quot;M9.03 121.62 C12.19 127.5, 15.35 133.39, 20.86 143.64 M9.03 121.62 C12.48 128.05, 15.94 134.48, 20.86 143.64&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14846.887252452518 15920.849760653888) rotate(0 10.43186590411733 71.81988332864603)&quot;&gt;&lt;path d=&quot;M25.95 119.16 C24.59 125.7, 23.23 132.24, 20.86 143.64 M25.95 119.16 C24.46 126.31, 22.98 133.46, 20.86 143.64&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask--t1ALH3d6AhvJ7p4bl8rZ&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;14967.750984260752&quot; height=&quot;16164.48952731118&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;14828.703449106144&quot; y=&quot;15980.518765943316&quot; fill=&quot;#000&quot; width=&quot;57.23133850097656&quot; height=&quot;24.301756078437013&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14828.703449106146 15980.518765943316) rotate(0 28.61566925048919 12.150878039217787)&quot;&gt;&lt;text x=&quot;28.61566925048828&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;POST&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-nIUuwj_Q_H4bh3XvgMGIJ)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14939.241561597813 15891.004982888911) rotate(0 90.00329356810926 83.43635781860121)&quot;&gt;&lt;path d=&quot;M0 0 C30 27.81, 150.01 139.06, 180.01 166.87 M0 0 C30 27.81, 150.01 139.06, 180.01 166.87&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14939.241561597813 15891.004982888911) rotate(0 90.00329356810926 83.43635781860121)&quot;&gt;&lt;path d=&quot;M156.97 157.17 C163.4 159.88, 169.83 162.59, 180.01 166.87 M156.97 157.17 C166.04 160.99, 175.12 164.81, 180.01 166.87&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14939.241561597813 15891.004982888911) rotate(0 90.00329356810926 83.43635781860121)&quot;&gt;&lt;path d=&quot;M168.59 144.63 C171.78 150.84, 174.96 157.05, 180.01 166.87 M168.59 144.63 C173.09 153.39, 177.58 162.15, 180.01 166.87&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-nIUuwj_Q_H4bh3XvgMGIJ&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;15219.248148734032&quot; height=&quot;16157.877698526114&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;15006.461179018463&quot; y=&quot;15962.290462668296&quot; fill=&quot;#000&quot; width=&quot;45.567352294921875&quot; height=&quot;24.301756078437013&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(15006.461179018464 15962.290462668296) rotate(0 22.783676147460028 12.150878039216877)&quot;&gt;&lt;text x=&quot;22.783676147460938&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;GET&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-N3ZlK-_rr6NNcEwmU7G7_)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14769.988573695353 15903.052550078128) rotate(0 -82.28046373719644 66.78177050539125)&quot;&gt;&lt;path d=&quot;M0 0 C-27.43 22.26, -137.13 111.3, -164.56 133.56 M0 0 C-27.43 22.26, -137.13 111.3, -164.56 133.56&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14769.988573695353 15903.052550078128) rotate(0 -82.28046373719644 66.78177050539125)&quot;&gt;&lt;path d=&quot;M-151.71 112.12 C-154.55 116.86, -157.39 121.6, -164.56 133.56 M-151.71 112.12 C-155.53 118.5, -159.35 124.87, -164.56 133.56&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14769.988573695353 15903.052550078128) rotate(0 -82.28046373719644 66.78177050539125)&quot;&gt;&lt;path d=&quot;M-140.93 125.4 C-146.16 127.2, -151.38 129.01, -164.56 133.56 M-140.93 125.4 C-147.96 127.83, -154.98 130.25, -164.56 133.56&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-N3ZlK-_rr6NNcEwmU7G7_&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;15034.549501169746&quot; height=&quot;16136.61609108891&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;14620.086100680815&quot; y=&quot;15957.683442544301&quot; fill=&quot;#000&quot; width=&quot;135.2440185546875&quot; height=&quot;24.301756078437013&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14620.086100680814 15957.683442544301) rotate(0 67.62200927734284 12.150878039217787)&quot;&gt;&lt;text x=&quot;67.62200927734375&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Update/Patch&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-gxQgqn6WXVlhNxnJvoA8f)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14726.492174094195 15860.74747101262) rotate(0 -184.64045383543998 86.44100683961642)&quot;&gt;&lt;path d=&quot;M0 0 C-61.55 28.81, -307.73 144.07, -369.28 172.88 M0 0 C-61.55 28.81, -307.73 144.07, -369.28 172.88&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14726.492174094195 15860.74747101262) rotate(0 -184.64045383543998 86.44100683961642)&quot;&gt;&lt;path d=&quot;M-351.63 155.18 C-355.75 159.31, -359.87 163.44, -369.28 172.88 M-351.63 155.18 C-355.77 159.33, -359.9 163.47, -369.28 172.88&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14726.492174094195 15860.74747101262) rotate(0 -184.64045383543998 86.44100683961642)&quot;&gt;&lt;path d=&quot;M-344.38 170.67 C-350.19 171.18, -356 171.7, -369.28 172.88 M-344.38 170.67 C-350.21 171.18, -356.05 171.7, -369.28 172.88&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-gxQgqn6WXVlhNxnJvoA8f&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;15195.773081765075&quot; height=&quot;16133.629484691854&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;14511.049062177703&quot; y=&quot;15935.037599813018&quot; fill=&quot;#000&quot; width=&quot;61.605316162109375&quot; height=&quot;24.301756078437013&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14511.049062177699 15935.037599813018) rotate(0 30.802658081054688 12.150878039218696)&quot;&gt;&lt;text x=&quot;30.802658081054688&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Delete&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14740.599834822477 15250.885953792289) rotate(0 117.56771054239016 86.96099069211778)&quot;&gt;&lt;path d=&quot;M117.19 -3.7 C149.16 20.89, 179.37 50.46, 235.98 84.12 M118.92 0.76 C160.24 33.25, 201.91 63.42, 234.62 87.57 M236.27 89.81 C204.59 107.29, 184.36 130.33, 120.96 171 M235.91 87.34 C193.36 118.92, 150.84 149.68, 117.08 174.43 M118.54 171.04 C73.13 138.42, 28.74 109.71, -3.73 83.77 M117.74 172.19 C77.91 146.65, 38.92 118.58, 1.81 87.49 M2.56 84.9 C29.03 65, 57.16 46.64, 121.91 -0.8 M1.45 88.67 C29.32 63.39, 57.91 44.24, 119.53 -0.24&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14812.018264983808 15308.879452240975) rotate(0 46.36542510986328 28.98699689737259)&quot;&gt;&lt;text x=&quot;46.36542510986328&quot; y=&quot;13.620023608845454&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;15.4597316785987px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;VALIDATOR&lt;/text&gt;&lt;text x=&quot;46.36542510986328&quot; y=&quot;32.94468820709383&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;15.4597316785987px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;USER &lt;/text&gt;&lt;text x=&quot;46.36542510986328&quot; y=&quot;52.26935280534221&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;15.4597316785987px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;AGENT&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14772.061622489697 14697.729582059568) rotate(0 208.1667189802647 174.1411387018261)&quot;&gt;&lt;path d=&quot;M32 0 C126.4 0, 220.81 0, 384.33 0 M32 0 C151.13 0, 270.27 0, 384.33 0 M384.33 0 C405.67 0, 416.33 10.67, 416.33 32 M384.33 0 C405.67 0, 416.33 10.67, 416.33 32 M416.33 32 C416.33 109.29, 416.33 186.57, 416.33 316.28 M416.33 32 C416.33 141.01, 416.33 250.02, 416.33 316.28 M416.33 316.28 C416.33 337.62, 405.67 348.28, 384.33 348.28 M416.33 316.28 C416.33 337.62, 405.67 348.28, 384.33 348.28 M384.33 348.28 C249.68 348.28, 115.03 348.28, 32 348.28 M384.33 348.28 C296.23 348.28, 208.13 348.28, 32 348.28 M32 348.28 C10.67 348.28, 0 337.62, 0 316.28 M32 348.28 C10.67 348.28, 0 337.62, 0 316.28 M0 316.28 C0 216.47, 0 116.65, 0 32 M0 316.28 C0 255.29, 0 194.3, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#099268&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14855.135887391045 14707.292356034537) rotate(0 100.32518848114432 17.31895665592947)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;24.412801302198773&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;27.710330649487826px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;AGENTS LIST&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14788.28360763566 14766.272267529363) rotate(0 194.99606295010472 135.85296955743615)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;17.40894053528747&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;1. Validate User Agent&lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;42.10948045482134&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;2. GET Calendar List &lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;66.81002037435522&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;3. Analyse Calendar Type By Event &lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;91.51056029388909&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;4. Insert Event Agent&lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;116.21110021342295&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;5. Get Event By ID/NAME&lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;140.91164013295682&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;6. Search For Event By Name &lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;165.61218005249071&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;7. Update Event By ID/MAME &lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;190.31271997202458&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;8. Delete Event By ID/NAME &lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;215.01325989155845&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;9. GET Calendar List &lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;239.71379981109231&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;10. Chat With Agent&lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;264.4143397306262&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.760431935627096px&quot; fill=&quot;#099268&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;11. Calendar Router Agent&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14701.081834186565 17257.173588940062) rotate(0 158.2192366190402 169.04274849414742)&quot;&gt;&lt;path d=&quot;M159.5 -2.68 C204.04 53.67, 252.91 103.09, 317.21 167.79 M158.4 -0.22 C218.87 64.19, 280.56 128.64, 316.78 171.61 M316.49 169.48 C277.72 206.13, 239.03 248.43, 160.7 336.97 M315.15 171.1 C260.28 232.53, 202.68 292.19, 157.39 338.98 M161.6 337.79 C124.46 300.13, 87.72 262.29, 1.4 170.36 M157.55 336.64 C111.24 290.14, 60.73 238.65, 0.01 168.63 M1.11 171.05 C55.01 114.81, 107.8 54.37, 155.76 0.26 M-0.64 171.36 C46.7 118.14, 92.66 66.6, 157.86 1.65&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14791.591469280753 17361.17852145862) rotate(0 67.59998321533203 65.01644172851866)&quot;&gt;&lt;text x=&quot;67.59998321533203&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;CONVERT&lt;/text&gt;&lt;text x=&quot;67.59998321533203&quot; y=&quot;44.336011943511224&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;EVENT INFO&lt;/text&gt;&lt;text x=&quot;67.59998321533203&quot; y=&quot;70.34258863491856&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;TO&lt;/text&gt;&lt;text x=&quot;67.59998321533203&quot; y=&quot;96.3491653263259&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;STANDART&lt;/text&gt;&lt;text x=&quot;67.59998321533203&quot; y=&quot;122.35574201773323&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;FIELDS&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14691.477963190848 16890.044799268046) rotate(0 158.2192366190402 169.04274849414742)&quot;&gt;&lt;path d=&quot;M160.9 -3.09 C216.52 58.8, 263.31 115.95, 316.18 171.03 M159.14 -0.09 C219.43 65.58, 282.59 131.7, 317.23 169.94 M318.41 167.12 C277.59 211.75, 240.08 251.28, 156.5 336.4 M317.21 168.47 C279.89 206.92, 246.19 245.92, 158.08 337.05 M155.84 340.42 C97.44 275.17, 38.83 210.74, -0.12 171.47 M158.81 338.68 C113.16 289.06, 64.24 239.39, -1.42 170.82 M0.46 170 C38.01 118.1, 81.33 72.37, 160.89 -2.93 M-1.53 171.5 C63.34 101.58, 127.95 31.9, 159.84 0.48&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14794.478000506715 16994.049731786603) rotate(0 55.109580993652344 65.01644172851866)&quot;&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;ANALYSE&lt;/text&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;44.336011943511224&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;CALENDAR&lt;/text&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;70.34258863491856&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;TYPE BY&lt;/text&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;96.3491653263259&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;EVENT&lt;/text&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;122.35574201773323&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;AGENT&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13646.103842431892 16490.2633935233) rotate(0 158.2192366190402 169.04274849414742)&quot;&gt;&lt;path d=&quot;M161.25 1.2 C216.3 61.49, 271.91 120.52, 318.68 172.23 M157.78 1.39 C203.48 43.15, 245.24 91.13, 315.4 171.37 M318.49 171.85 C271.03 220.69, 221.32 270.88, 160.91 335.34 M316.36 169.79 C260.11 233.5, 200.53 296.11, 158.94 336.82 M159 338.17 C102.39 278.26, 42.4 217.56, -3.22 167.98 M159.84 336.71 C116.65 289.86, 69.98 244.09, 1.11 169.49 M1.7 172.83 C42.79 125.2, 80.21 81.47, 159.42 -3.12 M-1.41 168.95 C43.38 122.75, 83.04 80.23, 158.18 1.11&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13742.895086107623 16633.278191078964) rotate(0 61.31837463378906 26.006576691407645)&quot;&gt;&lt;text x=&quot;61.31837463378906&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;CHAT WITH&lt;/text&gt;&lt;text x=&quot;61.31837463378906&quot; y=&quot;44.336011943511224&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;AGENT&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13995.206870160682 16493.295636723207) rotate(0 158.2192366190402 169.04274849414742)&quot;&gt;&lt;path d=&quot;M159.02 1.21 C207.1 52.25, 255.58 107.39, 313.52 172.82 M160.38 1.05 C208.88 55.74, 261.38 111.55, 315.89 171.08 M318.68 168.49 C273.53 215.15, 234.48 262.18, 160.91 337.81 M316.49 168.59 C259.03 228.24, 203.16 287.92, 160.6 338.33 M158.61 334.73 C127.89 300.31, 94.76 267.2, -0.45 166.83 M158.27 338.73 C105.35 281.72, 50.68 227.67, -0.59 170.19 M-0.33 170.11 C53.81 112.18, 103.76 61.29, 155.81 2.99 M1.57 170.55 C54.72 115.42, 105.45 61.66, 160.06 -0.11&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14087.494917120104 16610.303857587467) rotate(0 65.82157135009766 52.01315338281438)&quot;&gt;&lt;text x=&quot;65.82157135009766&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;DELETE&lt;/text&gt;&lt;text x=&quot;65.82157135009766&quot; y=&quot;44.336011943511224&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;EVENT BY&lt;/text&gt;&lt;text x=&quot;65.82157135009766&quot; y=&quot;70.34258863491856&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;NAME OR ID&lt;/text&gt;&lt;text x=&quot;65.82157135009766&quot; y=&quot;96.3491653263259&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;AGENT&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14691.476781269119 16494.49552138272) rotate(0 158.2192366190402 169.04274849414742)&quot;&gt;&lt;path d=&quot;M161.86 2.75 C212.06 56.45, 266.14 111.32, 316.38 167.43 M158.38 -1.42 C212.39 55.81, 265.63 115.18, 315.83 169.01 M316.12 169.97 C278.95 203.15, 245.93 239.13, 156.76 341.32 M317.03 169.86 C268.26 220.34, 219.01 273.97, 159.57 338.01 M160.02 340.9 C112.17 288.89, 64.19 237.63, -1.43 172.35 M158.91 337.69 C107.07 284.49, 56.96 230.75, 0.01 169.04 M3.28 171.08 C32.33 136.06, 65.33 100.29, 160.28 -0.35 M-0.58 168.89 C56.67 108.66, 110.55 48.79, 160.29 1.12&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14794.476818584986 16624.507030592682) rotate(0 55.109580993652344 39.00986503711101)&quot;&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;GET&lt;/text&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;44.336011943511224&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;CALENDAR&lt;/text&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;70.34258863491856&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;LIST&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14849.927903776525 16837.10785945387) rotate(0 3.3355258908650285 29.271612361807456)&quot;&gt;&lt;path d=&quot;M0 0 C1.11 9.76, 5.56 48.79, 6.67 58.54 M0 0 C1.11 9.76, 5.56 48.79, 6.67 58.54&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14849.927903776525 16837.10785945387) rotate(0 3.3355258908650285 29.271612361807456)&quot;&gt;&lt;path d=&quot;M-4.48 36.17 C-1.89 41.37, 0.7 46.57, 6.67 58.54 M-4.48 36.17 C-0.89 43.38, 2.7 50.58, 6.67 58.54&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14849.927903776525 16837.10785945387) rotate(0 3.3355258908650285 29.271612361807456)&quot;&gt;&lt;path d=&quot;M12.51 34.23 C11.15 39.88, 9.8 45.53, 6.67 58.54 M12.51 34.23 C10.63 42.06, 8.75 49.89, 6.67 58.54&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g mask=&quot;url(#mask-wi0UpNtx6g1D7MKjc1Sh2)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14878.774362868839 16157.992300634414) rotate(0 -6.155950993213992 176.12104756283134)&quot;&gt;&lt;path d=&quot;M0 0 C-2.05 58.71, -10.26 293.54, -12.31 352.24 M0 0 C-2.05 58.71, -10.26 293.54, -12.31 352.24&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14878.774362868839 16157.992300634414) rotate(0 -6.155950993213992 176.12104756283134)&quot;&gt;&lt;path d=&quot;M-20.04 328.47 C-18.16 334.23, -16.29 339.99, -12.31 352.24 M-20.04 328.47 C-18.48 333.25, -16.93 338.03, -12.31 352.24&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14878.774362868839 16157.992300634414) rotate(0 -6.155950993213992 176.12104756283134)&quot;&gt;&lt;path d=&quot;M-2.95 329.06 C-5.22 334.68, -7.49 340.3, -12.31 352.24 M-2.95 329.06 C-4.83 333.73, -6.71 338.39, -12.31 352.24&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-wi0UpNtx6g1D7MKjc1Sh2&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;14991.086264855267&quot; height=&quot;16610.234395760075&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;14779.528079844375&quot; y=&quot;16321.11005985154&quot; fill=&quot;#000&quot; width=&quot;186.1806640625&quot; height=&quot;26.006576691407336&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14779.528079844373 16321.11005985154) rotate(0 93.09033203125 13.003288345705187)&quot;&gt;&lt;text x=&quot;93.09033203125&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Start Agents flow&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14834.0469389196 17214.483320024447) rotate(0 3.6807461054750092 30.63877126046191)&quot;&gt;&lt;path d=&quot;M0 0 C1.23 10.21, 6.13 51.06, 7.36 61.28 M0 0 C1.23 10.21, 6.13 51.06, 7.36 61.28&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14834.0469389196 17214.483320024447) rotate(0 3.6807461054750092 30.63877126046191)&quot;&gt;&lt;path d=&quot;M-3.93 38.97 C-1.52 43.73, 0.88 48.48, 7.36 61.28 M-3.93 38.97 C-0.94 44.87, 2.04 50.77, 7.36 61.28&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14834.0469389196 17214.483320024447) rotate(0 3.6807461054750092 30.63877126046191)&quot;&gt;&lt;path d=&quot;M13.05 36.93 C11.84 42.12, 10.62 47.31, 7.36 61.28 M13.05 36.93 C11.54 43.37, 10.04 49.81, 7.36 61.28&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(15030.341250630054 16486.379210127892) rotate(0 158.2192366190402 169.04274849414742)&quot;&gt;&lt;path d=&quot;M158.01 -2.41 C207.53 50.4, 257.43 105.53, 314.16 168.17 M160.06 -0.87 C206.2 47.78, 251.3 97.96, 316.62 170.38 M319.04 166.98 C255.02 235.61, 195.57 304.14, 156.56 339.68 M317.76 169.87 C281.81 207.2, 248.76 243.75, 159.67 339.11 M160.18 336.92 C118.1 298.6, 77.08 255.71, 0.7 169.71 M159.82 336.87 C115.76 287.45, 68.22 238.29, -0.43 168.88 M0.51 170.13 C57.69 109.38, 120.38 46.14, 157.73 -0.85 M-0.99 170.24 C35.41 130.02, 71.32 93.71, 159.24 0.47&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(15133.341287945921 16616.390719337855) rotate(0 55.109580993652344 39.00986503711101)&quot;&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;GET&lt;/text&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;44.336011943511224&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;CALENDAR&lt;/text&gt;&lt;text x=&quot;55.109580993652344&quot; y=&quot;70.34258863491856&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;LIST&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-Zq31do9EuKmSsh-jPZ0Lu)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(15201.263267109684 16182.734436318155) rotate(0 -0.8978782271979071 156.47353019067305)&quot;&gt;&lt;path d=&quot;M0 0 C-0.3 52.16, -1.5 260.79, -1.8 312.95 M0 0 C-0.3 52.16, -1.5 260.79, -1.8 312.95&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(15201.263267109684 16182.734436318155) rotate(0 -0.8978782271979071 156.47353019067305)&quot;&gt;&lt;path d=&quot;M-10.21 289.41 C-7.48 297.04, -4.76 304.67, -1.8 312.95 M-10.21 289.41 C-7.24 297.72, -4.27 306.03, -1.8 312.95&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(15201.263267109684 16182.734436318155) rotate(0 -0.8978782271979071 156.47353019067305)&quot;&gt;&lt;path d=&quot;M6.89 289.5 C4.07 297.1, 1.26 304.7, -1.8 312.95 M6.89 289.5 C3.82 297.78, 0.76 306.06, -1.8 312.95&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-Zq31do9EuKmSsh-jPZ0Lu&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;15303.05902356408&quot; height=&quot;16595.6814966995&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;15107.275056851237&quot; y=&quot;16326.204678163123&quot; fill=&quot;#000&quot; width=&quot;186.1806640625&quot; height=&quot;26.006576691407336&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(15107.275056851235 16326.204678163123) rotate(0 93.09033203125091 13.003288345704277)&quot;&gt;&lt;text x=&quot;93.09033203125&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Start Agents flow&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-7S3199Gl5yNAeTS7njuJg)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14294.812695457009 16188.278174419958) rotate(0 -50.669396873948244 172.5340637568588)&quot;&gt;&lt;path d=&quot;M0 0 C-16.89 57.51, -84.45 287.56, -101.34 345.07 M0 0 C-16.89 57.51, -84.45 287.56, -101.34 345.07&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14294.812695457009 16188.278174419958) rotate(0 -50.669396873948244 172.5340637568588)&quot;&gt;&lt;path d=&quot;M-102.92 320.12 C-102.35 329.09, -101.78 338.06, -101.34 345.07 M-102.92 320.12 C-102.42 328.03, -101.92 335.95, -101.34 345.07&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14294.812695457009 16188.278174419958) rotate(0 -50.669396873948244 172.5340637568588)&quot;&gt;&lt;path d=&quot;M-86.52 324.94 C-91.85 332.18, -97.18 339.41, -101.34 345.07 M-86.52 324.94 C-91.22 331.32, -95.92 337.71, -101.34 345.07&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-7S3199Gl5yNAeTS7njuJg&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;14496.151489204905&quot; height=&quot;16633.346301933678&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;14151.052966551812&quot; y=&quot;16347.808949831113&quot; fill=&quot;#000&quot; width=&quot;186.1806640625&quot; height=&quot;26.006576691407336&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14151.052966551813 16347.808949831113) rotate(0 93.09033203124909 13.003288345704277)&quot;&gt;&lt;text x=&quot;93.09033203125&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Start Agents flow&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-nPHCo0ch0xPOuBCND6i35)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14572.126693729177 16171.53107649903) rotate(0 -25.743614110344424 170.62483568847347)&quot;&gt;&lt;path d=&quot;M0 0 C-8.58 56.87, -42.91 284.37, -51.49 341.25 M0 0 C-8.58 56.87, -42.91 284.37, -51.49 341.25&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14572.126693729177 16171.53107649903) rotate(0 -25.743614110344424 170.62483568847347)&quot;&gt;&lt;path d=&quot;M-56.44 316.74 C-54.83 324.71, -53.22 332.68, -51.49 341.25 M-56.44 316.74 C-54.83 324.68, -53.23 332.61, -51.49 341.25&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14572.126693729177 16171.53107649903) rotate(0 -25.743614110344424 170.62483568847347)&quot;&gt;&lt;path d=&quot;M-39.53 319.3 C-43.42 326.44, -47.31 333.57, -51.49 341.25 M-39.53 319.3 C-43.4 326.4, -47.27 333.51, -51.49 341.25&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-nPHCo0ch0xPOuBCND6i35&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;14723.613921949865&quot; height=&quot;16612.78074787598&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;14453.292747587582&quot; y=&quot;16329.152623841801&quot; fill=&quot;#000&quot; width=&quot;186.1806640625&quot; height=&quot;26.006576691407336&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14453.292747587582 16329.152623841801) rotate(0 93.09033203125 13.003288345702458)&quot;&gt;&lt;text x=&quot;93.09033203125&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Start Agents flow&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14341.76464881524 16496.0407706376) rotate(0 158.2192366190402 169.04274849414742)&quot;&gt;&lt;path d=&quot;M159.23 0.49 C187.95 38, 221 70.27, 317.49 171.47 M158.73 0.07 C196.76 37.71, 232 75.33, 318.02 171.34 M319.76 172.15 C280.57 208.6, 238.94 249.96, 160.47 337.88 M317.34 169.94 C261.2 230.82, 202.61 293.02, 158.28 337.32 M161.66 339.43 C124.17 300.16, 84.51 261.43, 1.92 173.05 M157.88 339.27 C115.58 293.79, 70.95 243.69, 0.5 170.25 M0.92 168.26 C50.43 113.76, 98.15 59.6, 161.49 2.34 M0.37 171.37 C59.02 105.5, 117.56 42.67, 158 -0.07&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14434.052695774662 16613.04899150186) rotate(0 65.82157135009766 52.01315338281438)&quot;&gt;&lt;text x=&quot;65.82157135009766&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;UPDATE&lt;/text&gt;&lt;text x=&quot;65.82157135009766&quot; y=&quot;44.336011943511224&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;EVENT BY&lt;/text&gt;&lt;text x=&quot;65.82157135009766&quot; y=&quot;70.34258863491856&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;NAME OR ID&lt;/text&gt;&lt;text x=&quot;65.82157135009766&quot; y=&quot;96.3491653263259&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;AGENT&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13909.970262816123 16028.716701887772) rotate(0 115.13193835372749 78.01973007422202)&quot;&gt;&lt;path d=&quot;M62.61 9.31 C74.23 3.86, 90 1.26, 104.53 0.16 C119.06 -0.95, 135.64 -0.26, 149.79 2.68 C163.94 5.62, 178.33 11.1, 189.44 17.77 C200.55 24.45, 209.78 33.98, 216.44 42.71 C223.1 51.44, 227.96 60.54, 229.39 70.14 C230.83 79.73, 229.37 90.59, 225.04 100.27 C220.72 109.96, 212.67 120.55, 203.43 128.25 C194.19 135.96, 182.52 141.87, 169.61 146.48 C156.71 151.09, 140.71 154.96, 126.02 155.89 C111.33 156.83, 95.64 155.04, 81.48 152.08 C67.32 149.12, 52.49 144.44, 41.06 138.13 C29.63 131.82, 19.72 122.92, 12.89 114.21 C6.06 105.5, 1.24 95.71, 0.08 85.88 C-1.08 76.05, 1.53 64.73, 5.91 55.22 C10.3 45.7, 14.22 37.37, 26.4 28.79 C38.59 20.2, 67.44 8.12, 79.02 3.72 C90.6 -0.68, 95.38 1.1, 95.89 2.38 M63.38 7.54 C75.15 2.03, 92.59 -0.13, 106.99 -0.75 C121.38 -1.37, 135.73 0.72, 149.75 3.82 C163.77 6.93, 179.71 11.26, 191.12 17.88 C202.53 24.5, 211.95 34.77, 218.22 43.55 C224.49 52.34, 227.6 60.83, 228.74 70.6 C229.88 80.38, 229.26 92.57, 225.06 102.21 C220.86 111.85, 212.9 121.11, 203.53 128.45 C194.15 135.78, 181.82 141.52, 168.79 146.23 C155.75 150.95, 140.27 155.76, 125.29 156.73 C110.32 157.69, 93.15 155.45, 78.96 152.01 C64.77 148.56, 51.12 142.4, 40.14 136.04 C29.16 129.69, 19.93 122.38, 13.07 113.88 C6.2 105.38, 0 95.15, -1.04 85.05 C-2.08 74.95, 2.12 62.69, 6.84 53.28 C11.55 43.87, 18.07 35.83, 27.23 28.6 C36.39 21.37, 55.57 13.21, 61.79 9.88 C68.02 6.55, 63.59 7.56, 64.58 8.62&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13954.721679013837 16057.964639603293) rotate(0 70.4699478149414 48.603512156873876)&quot;&gt;&lt;text x=&quot;70.4699478149414&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#e03131&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Anything our&lt;/text&gt;&lt;text x=&quot;70.4699478149414&quot; y=&quot;41.429633762519416&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#e03131&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Chat With&lt;/text&gt;&lt;text x=&quot;70.4699478149414&quot; y=&quot;65.73138984095644&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#e03131&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Agent Can Help&lt;/text&gt;&lt;text x=&quot;70.4699478149414&quot; y=&quot;90.03314591939345&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#e03131&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;with ?&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-LYsAVtIldbDl4LIw2blao)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(13987.43087280104 16187.418863656776) rotate(0 -68.23557418660766 175.285950962274)&quot;&gt;&lt;path d=&quot;M0 0 C-22.75 58.43, -113.73 292.14, -136.47 350.57 M0 0 C-22.75 58.43, -113.73 292.14, -136.47 350.57&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13987.43087280104 16187.418863656776) rotate(0 -68.23557418660766 175.285950962274)&quot;&gt;&lt;path d=&quot;M-135.92 325.58 C-136.11 334.1, -136.29 342.62, -136.47 350.57 M-135.92 325.58 C-136.11 334.33, -136.3 343.08, -136.47 350.57&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13987.43087280104 16187.418863656776) rotate(0 -68.23557418660766 175.285950962274)&quot;&gt;&lt;path d=&quot;M-119.98 331.78 C-125.6 338.19, -131.22 344.59, -136.47 350.57 M-119.98 331.78 C-125.75 338.36, -131.53 344.94, -136.47 350.57&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-LYsAVtIldbDl4LIw2blao&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;14223.902021174255&quot; height=&quot;16637.990765581322&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;13826.104966583183&quot; y=&quot;16349.701526273344&quot; fill=&quot;#000&quot; width=&quot;186.1806640625&quot; height=&quot;26.006576691407336&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(13826.104966583182 16349.701526273344) rotate(0 93.09033203124909 13.003288345706096)&quot;&gt;&lt;text x=&quot;93.09033203125&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Start Agents flow&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14727.713753305043 15789.15238566428) rotate(0 115.13193835372749 61.76561964209213)&quot;&gt;&lt;path d=&quot;M159.21 5.63 C172.79 7.55, 186.65 12.04, 197.11 17.56 C207.57 23.07, 216.41 31.54, 221.95 38.72 C227.5 45.9, 230.5 52.99, 230.39 60.64 C230.27 68.29, 226.9 77.04, 221.24 84.62 C215.58 92.2, 206.57 100.52, 196.41 106.1 C186.26 111.68, 173.72 115.2, 160.3 118.08 C146.88 120.97, 130.69 123.44, 115.9 123.42 C101.11 123.4, 85.11 121.12, 71.58 117.98 C58.05 114.85, 45.26 109.97, 34.73 104.61 C24.2 99.25, 14.34 93.03, 8.39 85.84 C2.45 78.64, -0.83 69.28, -0.94 61.44 C-1.05 53.61, 1.85 46.02, 7.74 38.83 C13.63 31.64, 24.04 23.88, 34.39 18.31 C44.73 12.74, 56.39 8.42, 69.8 5.41 C83.21 2.4, 99.57 0.38, 114.84 0.24 C130.1 0.1, 153.48 3.33, 161.38 4.59 C169.28 5.86, 162.93 6.66, 162.23 7.81 M123.97 0.94 C138.01 0.59, 153.01 3.03, 166.01 6.17 C179 9.31, 192.08 13.56, 201.95 19.76 C211.82 25.96, 220.54 35.82, 225.23 43.35 C229.92 50.87, 231.32 57.34, 230.1 64.9 C228.87 72.45, 224.67 81.2, 217.88 88.68 C211.09 96.16, 200.63 104.54, 189.38 109.79 C178.13 115.04, 164.23 118.13, 150.38 120.18 C136.53 122.23, 120.68 122.82, 106.27 122.1 C91.85 121.37, 76.8 118.89, 63.88 115.83 C50.97 112.78, 38.26 109.62, 28.77 103.77 C19.28 97.92, 11.85 88.25, 6.93 80.73 C2.01 73.2, -1.72 66.17, -0.74 58.62 C0.23 51.07, 5.86 42.93, 12.8 35.44 C19.73 27.94, 29.98 19.19, 40.88 13.66 C51.77 8.13, 64.55 4.67, 78.15 2.25 C91.76 -0.17, 114.99 -0.55, 122.5 -0.86 C130.01 -1.17, 123.43 -0.69, 123.19 0.39&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14775.478368355296 15826.441360734822) rotate(0 67.45674896240234 24.301756078437393)&quot;&gt;&lt;text x=&quot;67.45674896240234&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Pass to start&lt;/text&gt;&lt;text x=&quot;67.45674896240234&quot; y=&quot;41.429633762519416&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;agent flow&lt;/text&gt;&lt;/g&gt;&lt;g mask=&quot;url(#mask-IloAgMjbY3WOS6dhHKkvi)&quot; stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14858.702077750995 15777.191180018306) rotate(0 -0.5747145222630934 3.2475993193584145)&quot;&gt;&lt;path d=&quot;M0 0 C-0.19 1.08, -0.96 5.41, -1.15 6.5 M0 0 C-0.19 1.08, -0.96 5.41, -1.15 6.5&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14858.702077750995 15777.191180018306) rotate(0 -0.5747145222630934 3.2475993193584145)&quot;&gt;&lt;path d=&quot;M-1.72 3.25 C-1.57 4.1, -1.42 4.96, -1.15 6.5 M-1.72 3.25 C-1.57 4.1, -1.42 4.95, -1.15 6.5&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14858.702077750995 15777.191180018306) rotate(0 -0.5747145222630934 3.2475993193584145)&quot;&gt;&lt;path d=&quot;M0.5 3.64 C0.07 4.39, -0.37 5.14, -1.15 6.5 M0.5 3.64 C0.07 4.39, -0.36 5.14, -1.15 6.5&quot; stroke=&quot;#2f9e44&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask id=&quot;mask-IloAgMjbY3WOS6dhHKkvi&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#fff&quot; width=&quot;14959.851506795521&quot; height=&quot;15883.686378657023&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;14842.730894112523&quot; y=&quot;15768.287901298447&quot; fill=&quot;#000&quot; width=&quot;30.792938232421875&quot; height=&quot;24.301756078437013&quot; opacity=&quot;1&quot;&gt;&lt;/rect&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14842.730894112521 15768.287901298447) rotate(0 15.396469116210938 12.150878039217787)&quot;&gt;&lt;text x=&quot;15.396469116210938&quot; y=&quot;17.127877684082407&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;19.44140486274961px&quot; fill=&quot;#2f9e44&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Yes&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14029.70909276443 15626.326493171717) rotate(0 358.7705964099796 -0.5758669413016833)&quot;&gt;&lt;path d=&quot;M0 0 C119.59 -0.19, 597.95 -0.96, 717.54 -1.15 M0 0 C119.59 -0.19, 597.95 -0.96, 717.54 -1.15&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14030.084393178231 15629.921244948207) rotate(0 -0.47087573735007027 198.24171214969465)&quot;&gt;&lt;path d=&quot;M0 0 C-0.16 66.08, -0.78 330.4, -0.94 396.48 M0 0 C-0.16 66.08, -0.78 330.4, -0.94 396.48&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14030.084393178231 15629.921244948207) rotate(0 -0.47087573735007027 198.24171214969465)&quot;&gt;&lt;path d=&quot;M-9.44 372.97 C-7.24 379.05, -5.04 385.14, -0.94 396.48 M-9.44 372.97 C-6.31 381.62, -3.19 390.26, -0.94 396.48&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14030.084393178231 15629.921244948207) rotate(0 -0.47087573735007027 198.24171214969465)&quot;&gt;&lt;path d=&quot;M7.66 373.01 C5.44 379.09, 3.21 385.16, -0.94 396.48 M7.66 373.01 C4.5 381.64, 1.34 390.27, -0.94 396.48&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14091.873316037769 15092.309983089497) rotate(0 -0.5779592001526908 44.50014674784052)&quot;&gt;&lt;path d=&quot;M0 0 C-0.19 14.83, -0.96 74.17, -1.16 89 M0 0 C-0.19 14.83, -0.96 74.17, -1.16 89&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(14092.451187053726 15117.73864467285) rotate(0 65.01638220418772 13.003288345703368)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt; Api Request&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14716.318633405745 17671.297485032086) rotate(0 158.2192366190402 169.04274849414742)&quot;&gt;&lt;path d=&quot;M159.43 1.33 C187.61 30.78, 221.55 65.49, 317.47 167.7 M158.46 -1.54 C210.01 56.31, 261.71 112.78, 318.08 169.27 M316.67 169.5 C253.21 238.99, 187.61 301.18, 158.61 335.22 M316.59 170.57 C265.08 225.61, 213.75 278.31, 159.58 337.79 M157.14 336.92 C105.92 281.4, 45.26 221.49, -1.48 173.15 M160.61 337.72 C103.47 281.29, 48.92 223.3, 0 169.66 M-2.3 169.66 C29.61 136.35, 63.21 97.32, 161.19 0.49 M-0.24 170.38 C54 114.09, 108.89 54.21, 159.71 -0.02&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14831.798666449151 17801.30899424205) rotate(0 42.62958526611328 39.00986503711101)&quot;&gt;&lt;text x=&quot;42.62958526611328&quot; y=&quot;18.329435252103888&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;INSERT&lt;/text&gt;&lt;text x=&quot;42.62958526611328&quot; y=&quot;44.336011943511224&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;EVENT&lt;/text&gt;&lt;text x=&quot;42.62958526611328&quot; y=&quot;70.34258863491856&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;20.805261353125868px&quot; fill=&quot;#099268&quot; text-anchor=&quot;middle&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;AGENT&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14852.024243400549 17592.80456703245) rotate(0 12.935106416551207 38.65495221942456)&quot;&gt;&lt;path d=&quot;M0 0 C4.31 12.88, 21.56 64.42, 25.87 77.31 M0 0 C4.31 12.88, 21.56 64.42, 25.87 77.31&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14852.024243400549 17592.80456703245) rotate(0 12.935106416551207 38.65495221942456)&quot;&gt;&lt;path d=&quot;M10.31 57.75 C15.58 64.38, 20.86 71.01, 25.87 77.31 M10.31 57.75 C15.46 64.22, 20.61 70.7, 25.87 77.31&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14852.024243400549 17592.80456703245) rotate(0 12.935106416551207 38.65495221942456)&quot;&gt;&lt;path d=&quot;M26.52 52.32 C26.3 60.79, 26.08 69.27, 25.87 77.31 M26.52 52.32 C26.31 60.59, 26.09 68.87, 25.87 77.31&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14160.765659625611 16829.16886562758) rotate(0 29.12541602631063 611.633747662906)&quot;&gt;&lt;path d=&quot;M0 0 C9.71 203.88, 48.54 1019.39, 58.25 1223.27 M0 0 C9.71 203.88, 48.54 1019.39, 58.25 1223.27&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14160.765659625611 16829.16886562758) rotate(0 29.12541602631063 611.633747662906)&quot;&gt;&lt;path d=&quot;M48.59 1200.21 C51.18 1206.39, 53.77 1212.57, 58.25 1223.27 M48.59 1200.21 C51.36 1206.81, 54.12 1213.41, 58.25 1223.27&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14160.765659625611 16829.16886562758) rotate(0 29.12541602631063 611.633747662906)&quot;&gt;&lt;path d=&quot;M65.67 1199.4 C63.68 1205.79, 61.69 1212.19, 58.25 1223.27 M65.67 1199.4 C63.55 1206.23, 61.42 1213.06, 58.25 1223.27&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(13802.701198483739 16827.363124126554) rotate(0 12.819385903712828 611.3807881973062)&quot;&gt;&lt;path d=&quot;M0 0 C4.27 203.79, 21.37 1018.97, 25.64 1222.76 M0 0 C4.27 203.79, 21.37 1018.97, 25.64 1222.76&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13802.701198483739 16827.363124126554) rotate(0 12.819385903712828 611.3807881973062)&quot;&gt;&lt;path d=&quot;M16.6 1199.45 C19.96 1208.11, 23.31 1216.77, 25.64 1222.76 M16.6 1199.45 C19.61 1207.21, 22.61 1214.96, 25.64 1222.76&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13802.701198483739 16827.363124126554) rotate(0 12.819385903712828 611.3807881973062)&quot;&gt;&lt;path d=&quot;M33.69 1199.1 C30.7 1207.88, 27.71 1216.67, 25.64 1222.76 M33.69 1199.1 C31.01 1206.97, 28.33 1214.84, 25.64 1222.76&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14874.382365396408 17990.020559257173) rotate(0 -2.3117486164192087 30.62998574005178)&quot;&gt;&lt;path d=&quot;M0 0 C-0.77 10.21, -3.85 51.05, -4.62 61.26 M0 0 C-0.77 10.21, -3.85 51.05, -4.62 61.26&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14874.382365396408 17990.020559257173) rotate(0 -2.3117486164192087 30.62998574005178)&quot;&gt;&lt;path d=&quot;M-11.38 37.19 C-9.72 43.12, -8.05 49.04, -4.62 61.26 M-11.38 37.19 C-8.8 46.38, -6.22 55.57, -4.62 61.26&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14874.382365396408 17990.020559257173) rotate(0 -2.3117486164192087 30.62998574005178)&quot;&gt;&lt;path d=&quot;M5.67 38.48 C3.14 44.09, 0.6 49.69, -4.62 61.26 M5.67 38.48 C1.74 47.18, -2.19 55.88, -4.62 61.26&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14501.263719703102 16834.593659305567) rotate(0 -11.090730555397386 610.6551402401783)&quot;&gt;&lt;path d=&quot;M0 0 C-3.7 203.55, -18.48 1017.76, -22.18 1221.31 M0 0 C-3.7 203.55, -18.48 1017.76, -22.18 1221.31&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14501.263719703102 16834.593659305567) rotate(0 -11.090730555397386 610.6551402401783)&quot;&gt;&lt;path d=&quot;M-30.3 1197.67 C-27.33 1206.33, -24.35 1215, -22.18 1221.31 M-30.3 1197.67 C-28.11 1204.06, -25.91 1210.45, -22.18 1221.31&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14501.263719703102 16834.593659305567) rotate(0 -11.090730555397386 610.6551402401783)&quot;&gt;&lt;path d=&quot;M-13.21 1197.98 C-16.5 1206.53, -19.79 1215.08, -22.18 1221.31 M-13.21 1197.98 C-15.63 1204.29, -18.06 1210.59, -22.18 1221.31&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(15188.1081691646 16824.161605913596) rotate(0 -35.498877324195746 613.5594624118412)&quot;&gt;&lt;path d=&quot;M0 0 C-11.83 204.52, -59.16 1022.6, -71 1227.12 M0 0 C-11.83 204.52, -59.16 1022.6, -71 1227.12&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(15188.1081691646 16824.161605913596) rotate(0 -35.498877324195746 613.5594624118412)&quot;&gt;&lt;path d=&quot;M-78.18 1203.17 C-75.59 1211.81, -73 1220.44, -71 1227.12 M-78.18 1203.17 C-75.72 1211.37, -73.26 1219.58, -71 1227.12&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(15188.1081691646 16824.161605913596) rotate(0 -35.498877324195746 613.5594624118412)&quot;&gt;&lt;path d=&quot;M-61.1 1204.16 C-64.67 1212.44, -68.24 1220.72, -71 1227.12 M-61.1 1204.16 C-64.49 1212.02, -67.88 1219.89, -71 1227.12&quot; stroke=&quot;#1e1e1e&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(14196.590419552902 12798.565691208232) rotate(0 6.738210223301394 120.91772213076365)&quot;&gt;&lt;path d=&quot;M-0.11 0.84 C-17.95 41.19, -126.58 230.75, -106.41 242.41 C-86.23 254.07, 83.05 99.41, 120.91 70.82 M-1.62 0.24 C-19.65 40.2, -127.47 228.64, -107.13 240.59 C-86.78 252.54, 82.4 100.08, 120.46 71.96&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(13693.354254100754 12520.318979165015) rotate(353.23161292112655 20.280216841401852 -103.22932548121298)&quot;&gt;&lt;path d=&quot;M-0.55 -1.14 C6.23 -16.81, 40.37 -59.02, 41.5 -93.4 C42.64 -127.78, 12.27 -188.74, 6.29 -207.41 M1.37 0.88 C7.99 -14.72, 40.3 -57.74, 41.05 -92.32 C41.8 -126.9, 11.74 -187.41, 5.86 -206.6&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13621.724983004666 12238.00062666632) rotate(353.23161292112655 44.12799406239719 50.916916225844034)&quot;&gt;&lt;path d=&quot;M14 14.82 C14 14.82, 14 14.82, 14 14.82 M14 14.82 C14 14.82, 14 14.82, 14 14.82 M5.21 31.03 C11.01 21.66, 19.65 16.85, 26.2 6.88 M5.21 31.03 C10.78 25.52, 14 20.78, 26.2 6.88 M3.64 38.94 C11.32 31.64, 17.66 25.01, 34.47 3.46 M3.64 38.94 C12.15 28.07, 21.57 18.7, 34.47 3.46 M4.03 44.58 C15.54 33.83, 24.1 19.56, 39.46 3.82 M4.03 44.58 C13.05 33.78, 20.97 24.28, 39.46 3.82 M3.77 50.98 C15.02 41.82, 22.81 27.34, 45.1 3.43 M3.77 50.98 C14.87 38.32, 26.01 26.28, 45.1 3.43 M4.16 56.62 C18.93 42.53, 31.3 26.25, 50.74 3.04 M4.16 56.62 C12.95 46.2, 23.25 35.16, 50.74 3.04 M3.25 63.77 C23.88 42.05, 44.62 18.87, 57.04 1.89 M3.25 63.77 C20.98 42.5, 38.89 23.19, 57.04 1.89 M4.95 67.91 C18.51 51.02, 31.76 36.53, 60.06 4.51 M4.95 67.91 C24.37 44.2, 45.65 21.49, 60.06 4.51 M6.66 72.04 C29.53 46.73, 52.33 20.05, 63.74 6.38 M6.66 72.04 C23.55 54.36, 39.21 36.67, 63.74 6.38 M8.37 76.17 C22.24 58.85, 36.08 44.21, 66.76 9 M8.37 76.17 C27.4 54.9, 45.53 31.64, 66.76 9 M10.07 80.31 C33.39 53.35, 52.84 31.15, 69.77 11.63 M10.07 80.31 C22.86 66.23, 35.74 50.8, 69.77 11.63 M11.78 84.44 C29.22 62.86, 46.62 43.2, 73.45 13.5 M11.78 84.44 C34.15 60.02, 56.95 34.33, 73.45 13.5 M13.49 88.57 C32.34 66.21, 48.48 44.6, 76.47 16.12 M13.49 88.57 C30.2 68.45, 46.21 49.67, 76.47 16.12 M17.16 90.44 C33.22 72.34, 48.79 58.59, 78.18 20.26 M17.16 90.44 C35.76 68.05, 55.63 44.44, 78.18 20.26 M20.18 93.07 C35.86 76.17, 50.56 53.88, 79.88 24.39 M20.18 93.07 C36.09 76.36, 51.75 57.11, 79.88 24.39 M23.86 94.94 C36.7 77.26, 52.11 64.76, 82.24 27.77 M23.86 94.94 C42.35 74.74, 61.97 51.71, 82.24 27.77 M26.87 97.56 C41.52 77.87, 59.11 60.36, 83.95 31.9 M26.87 97.56 C41.59 79.87, 56.18 62.86, 83.95 31.9 M30.55 99.43 C50.9 76.71, 69.13 55.99, 85.66 36.04 M30.55 99.43 C41.95 85.15, 55.74 71.79, 85.66 36.04 M33.57 102.06 C44.8 88.09, 60.25 71.99, 88.02 39.41 M33.57 102.06 C47.47 86.85, 61.66 71, 88.02 39.41 M38.55 102.42 C53.25 85.46, 72.76 63.44, 87.76 45.81 M38.55 102.42 C57.13 79.83, 77.26 58.19, 87.76 45.81 M44.2 102.02 C62.21 83.94, 77.64 66.87, 88.15 51.46 M44.2 102.02 C53.77 90.93, 62.77 80.32, 88.15 51.46 M49.84 101.63 C62.38 84.32, 78.56 70.67, 88.55 57.1 M49.84 101.63 C61.13 88.14, 74.76 72.56, 88.55 57.1 M56.14 100.48 C68.07 87.54, 78.23 73.57, 86.97 65.01 M56.14 100.48 C64.7 91.29, 71.67 82.5, 86.97 65.01 M69 91.78 C70.4 88.65, 75.5 86.13, 79.5 79.71 M69 91.78 C73.36 86.67, 76.71 82.16, 79.5 79.71&quot; stroke=&quot;#000000&quot; stroke-width=&quot;0.5&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M56.74 1.7 C63.79 3.23, 70.75 9.61, 75.68 15.68 C80.62 21.75, 84.5 29.95, 86.37 38.14 C88.23 46.34, 88.64 56.71, 86.86 64.84 C85.09 72.96, 80.9 80.96, 75.7 86.89 C70.51 92.82, 62.99 98.1, 55.69 100.41 C48.39 102.71, 39.17 102.95, 31.92 100.71 C24.66 98.48, 17.13 93.29, 12.18 86.98 C7.23 80.66, 3.9 71.14, 2.2 62.83 C0.51 54.51, 0.05 45.09, 2.04 37.07 C4.02 29.05, 8.93 20.44, 14.11 14.69 C19.28 8.95, 25.78 4.47, 33.08 2.63 C40.38 0.78, 53.44 3.35, 57.91 3.6 C62.38 3.85, 59.95 3.42, 59.88 4.11 M46.79 1.31 C53.94 0.89, 62.69 4.93, 68.8 8.97 C74.91 13.02, 80.03 18.1, 83.44 25.6 C86.84 33.09, 89.34 45.19, 89.22 53.97 C89.1 62.74, 86.86 71.06, 82.72 78.25 C78.58 85.44, 71.17 93.27, 64.39 97.1 C57.61 100.92, 49.42 101.74, 42.06 101.21 C34.7 100.68, 26.34 98.55, 20.25 93.9 C14.16 89.25, 8.66 80.94, 5.53 73.29 C2.39 65.64, 1.46 56.29, 1.43 48 C1.41 39.71, 1.82 30.76, 5.36 23.56 C8.9 16.36, 15.7 8.76, 22.65 4.8 C29.6 0.85, 43.24 0.42, 47.08 -0.17 C50.91 -0.76, 46 0.2, 45.65 1.27&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13491.148831928529 12521.271040774292) rotate(0 203.09074639106166 239.37723233202087)&quot;&gt;&lt;path d=&quot;M56.53 74.32 C56.53 74.32, 56.53 74.32, 56.53 74.32 M56.53 74.32 C56.53 74.32, 56.53 74.32, 56.53 74.32 M43.15 95.81 C60.58 76.87, 79.17 54.63, 92.35 39.2 M43.15 95.81 C54.52 83.25, 64.7 71.26, 92.35 39.2 M29.11 118.05 C56.83 88.4, 83.31 58.4, 104.56 31.26 M29.11 118.05 C49.31 96.2, 68.58 73.37, 104.56 31.26 M24.25 129.74 C40.97 108.31, 61.6 86.03, 114.13 26.34 M24.25 129.74 C48.02 101.3, 73.21 74.85, 114.13 26.34 M21.37 139.15 C53.85 102.3, 88.39 62.91, 123.06 22.17 M21.37 139.15 C50.07 106.58, 78.02 72.31, 123.06 22.17 M18.48 148.57 C48.91 115.28, 79.19 78.46, 132.64 17.25 M18.48 148.57 C44.23 118.75, 70.78 89.15, 132.64 17.25 M14.94 158.74 C56.72 110.35, 94.58 65.54, 142.22 12.33 M14.94 158.74 C64.81 99.72, 116.36 41.82, 142.22 12.33 M12.06 168.16 C50.13 125.71, 85.8 83.04, 149.17 10.42 M12.06 168.16 C64.2 108.3, 116.64 50.34, 149.17 10.42 M9.17 177.57 C62.06 120.57, 112.45 61.4, 155.47 9.27 M9.17 177.57 C60.46 116.87, 112.06 57.66, 155.47 9.27 M6.94 186.23 C45.82 138.19, 87.2 90.59, 161.77 8.12 M6.94 186.23 C42.94 145.54, 79.75 104.05, 161.77 8.12 M6.02 193.39 C60.73 130.52, 113.86 68.9, 168.07 6.97 M6.02 193.39 C54.65 136.81, 101.85 81.04, 168.07 6.97 M5.11 200.54 C44.74 157.73, 79.88 113.61, 174.37 5.82 M5.11 200.54 C39.72 159.47, 77.51 116.95, 174.37 5.82 M4.19 207.69 C49.46 159.84, 89.82 109.61, 180.67 4.68 M4.19 207.69 C44.57 161.11, 86.24 112.73, 180.67 4.68 M3.27 214.84 C71.72 135.55, 140.55 58.95, 186.97 3.53 M3.27 214.84 C74.96 132.41, 146.56 50.51, 186.97 3.53 M2.35 222 C63.14 154.92, 124.58 84.29, 193.27 2.38 M2.35 222 C65.92 152.04, 127.52 79.86, 193.27 2.38 M2.09 228.4 C63.53 158.77, 124.57 88.13, 199.56 1.23 M2.09 228.4 C63.01 161.85, 121.24 93.73, 199.56 1.23 M1.17 235.55 C43.5 187.7, 86.83 138.88, 204.55 1.59 M1.17 235.55 C43.88 186.54, 86.11 137.04, 204.55 1.59 M0.26 242.7 C60.57 173.35, 120.6 105.5, 209.54 1.95 M0.26 242.7 C71.68 161.26, 144.42 78.36, 209.54 1.95 M-0.01 249.1 C64.14 177.26, 126.26 103.84, 213.87 3.06 M-0.01 249.1 C59.67 179.37, 119.53 110.27, 213.87 3.06 M1.05 253.99 C68.95 175.06, 136.72 96.62, 218.86 3.42 M1.05 253.99 C47.69 202.31, 94.35 149.11, 218.86 3.42 M1.44 259.63 C81.15 167.23, 160.67 77.01, 223.84 3.78 M1.44 259.63 C51.23 203.94, 100.64 147.78, 223.84 3.78 M2.49 264.52 C60.68 200.81, 116.74 137.22, 228.83 4.14 M2.49 264.52 C52.65 204.28, 103.95 146.07, 228.83 4.14 M3.54 269.41 C63.52 198.02, 124.42 130.15, 233.16 5.26 M3.54 269.41 C62.08 200.77, 122.45 132.48, 233.16 5.26 M3.94 275.05 C79.09 186.02, 154.66 99.88, 238.15 5.62 M3.94 275.05 C54.63 216.42, 104.33 157.82, 238.15 5.62 M4.99 279.94 C78.78 197.09, 151.04 110.67, 243.14 5.98 M4.99 279.94 C75.89 195.49, 149.45 113.02, 243.14 5.98 M6.04 284.83 C60.09 224.06, 113.93 162.42, 248.12 6.34 M6.04 284.83 C60.86 220.55, 116.77 156.39, 248.12 6.34 M6.43 290.47 C76.44 208.56, 148.44 127.25, 252.45 7.45 M6.43 290.47 C63.71 226.64, 119.68 161.68, 252.45 7.45 M7.48 295.36 C102.44 190.21, 195.17 83.24, 256.13 9.32 M7.48 295.36 C65.77 225.95, 126 157.64, 256.13 9.32 M8.53 300.25 C62.8 238.09, 118.37 173.48, 259.8 11.19 M8.53 300.25 C99.86 193.03, 192.08 87.3, 259.8 11.19 M9.58 305.13 C83.18 223.09, 154.7 138.55, 263.48 13.06 M9.58 305.13 C67.89 238.23, 125.71 172.28, 263.48 13.06 M10.63 310.02 C63.43 248.34, 116.95 187.6, 267.15 14.93 M10.63 310.02 C68.45 242.92, 126.56 175.53, 267.15 14.93 M12.34 314.16 C66.88 250.02, 120.12 188.64, 271.48 16.05 M12.34 314.16 C90.38 226.56, 166.73 137.6, 271.48 16.05 M14.05 318.29 C111.49 204.88, 211.7 91.81, 275.16 17.92 M14.05 318.29 C114.95 204.32, 214.44 89.82, 275.16 17.92 M15.1 323.18 C81.45 243.08, 150.2 166.14, 278.83 19.78 M15.1 323.18 C112.79 212, 209.12 100.27, 278.83 19.78 M16.81 327.31 C112.4 216.89, 205.58 110.67, 282.51 21.65 M16.81 327.31 C114.56 214.36, 213.24 101.16, 282.51 21.65 M18.51 331.45 C99.69 236.51, 181.84 142.43, 286.18 23.52 M18.51 331.45 C93.63 245.98, 166.89 161.29, 286.18 23.52 M20.22 335.58 C121.97 218.12, 225.65 100.39, 290.52 24.64 M20.22 335.58 C74.36 273.98, 128.56 211.66, 290.52 24.64 M21.93 339.71 C95.8 255.54, 172.3 167.8, 294.19 26.51 M21.93 339.71 C95.9 254.92, 169.54 170.11, 294.19 26.51 M23.63 343.85 C132.87 218.92, 242.25 92.21, 297.86 28.38 M23.63 343.85 C93.23 265.58, 162.84 185.82, 297.86 28.38 M24.68 348.73 C96.71 265.37, 169.48 183.59, 301.54 30.25 M24.68 348.73 C116.32 242.56, 206.75 138.23, 301.54 30.25 M26.39 352.87 C128.33 236.85, 229.63 119.57, 304.56 32.87 M26.39 352.87 C126.57 236.61, 226.38 122.02, 304.56 32.87 M28.1 357 C84.95 293.19, 141.04 228.59, 307.58 35.5 M28.1 357 C93.62 280.79, 159.8 204.65, 307.58 35.5 M29.8 361.14 C122.72 251.7, 216.24 144.25, 310.6 38.12 M29.8 361.14 C123.64 252.75, 218.18 143.92, 310.6 38.12 M31.51 365.27 C144.56 234.37, 257.86 105.41, 313.62 40.74 M31.51 365.27 C116.24 270.07, 200.98 173.85, 313.62 40.74 M33.87 368.65 C143.04 243.52, 251.56 119.38, 316.63 43.37 M33.87 368.65 C108.47 283.71, 181.83 199.3, 316.63 43.37 M36.24 372.03 C98.55 299.56, 160.28 228.92, 319.65 45.99 M36.24 372.03 C104.43 294.36, 171.64 217.02, 319.65 45.99 M37.94 376.16 C116.54 283.33, 196.89 192.08, 322.67 48.62 M37.94 376.16 C142.66 256.17, 247.75 136.29, 322.67 48.62 M40.3 379.54 C144.26 255.6, 251.46 134.31, 325.69 51.24 M40.3 379.54 C124.06 285.25, 206.91 190.03, 325.69 51.24 M42.67 382.92 C104.51 313.11, 167.13 241.49, 329.37 53.11 M42.67 382.92 C151.83 257.46, 260.14 133.61, 329.37 53.11 M45.03 386.3 C112.86 308.34, 181.7 227.52, 332.38 55.73 M45.03 386.3 C135.51 281.91, 226.25 177.73, 332.38 55.73 M47.39 389.68 C127.32 296.92, 207.35 205.64, 335.4 58.36 M47.39 389.68 C151.51 269.08, 255.25 149.46, 335.4 58.36 M49.76 393.06 C151.56 276.22, 252.03 158.99, 338.42 60.98 M49.76 393.06 C133.5 296.33, 216.99 199.39, 338.42 60.98 M52.12 396.43 C156.79 273.63, 263.74 151.89, 341.44 63.61 M52.12 396.43 C131.14 307.99, 208.67 218.76, 341.44 63.61 M54.48 399.81 C141.94 297.64, 228.6 196.76, 344.46 66.23 M54.48 399.81 C111.17 331.26, 169.93 264.17, 344.46 66.23 M56.84 403.19 C144.04 304.49, 230.54 205.42, 346.82 69.61 M56.84 403.19 C116.66 333.36, 177.11 264.71, 346.82 69.61 M59.21 406.57 C129.4 325.96, 199.59 245.62, 349.19 72.99 M59.21 406.57 C164.51 287.5, 269.13 168.09, 349.19 72.99 M61.57 409.95 C142.98 316.2, 223.6 224.22, 351.55 76.37 M61.57 409.95 C165.61 289, 269.73 169.4, 351.55 76.37 M63.93 413.33 C170.73 289.53, 279.17 166.11, 353.91 79.75 M63.93 413.33 C148.04 316.09, 231.68 220.95, 353.91 79.75 M66.95 415.95 C134.05 339.01, 199.31 262.56, 356.27 83.13 M66.95 415.95 C144.72 324.59, 221.9 235.29, 356.27 83.13 M69.97 418.58 C144.35 331.38, 220.56 244.13, 358.64 86.51 M69.97 418.58 C137.05 340.27, 203.43 263.59, 358.64 86.51 M72.99 421.2 C155.91 323.96, 238.68 228.08, 360.34 90.64 M72.99 421.2 C174.1 304.66, 276.17 187.17, 360.34 90.64 M76.01 423.83 C173.2 316.08, 269.02 206.1, 362.71 94.02 M76.01 423.83 C148.69 340.57, 219.22 258.89, 362.71 94.02 M79.03 426.45 C165.24 329.28, 249.46 231.46, 365.07 97.4 M79.03 426.45 C192.32 295.73, 304.94 165.86, 365.07 97.4 M82.05 429.07 C187.96 310.78, 290.44 190.03, 367.43 100.78 M82.05 429.07 C171.96 326.26, 262.52 222.36, 367.43 100.78 M85.06 431.7 C169.84 334.86, 252.45 240.28, 369.79 104.15 M85.06 431.7 C152.51 353.63, 219.49 277.26, 369.79 104.15 M88.08 434.32 C199.94 304.55, 311.88 176.39, 372.16 107.53 M88.08 434.32 C153.72 360.35, 219.1 284.57, 372.16 107.53 M91.1 436.95 C156.31 361.89, 223.53 284.89, 374.52 110.91 M91.1 436.95 C173.63 340.62, 256.41 244.83, 374.52 110.91 M94.12 439.57 C154.71 368.39, 216.53 295.66, 376.88 114.29 M94.12 439.57 C179.56 343.56, 263.73 246.5, 376.88 114.29 M97.14 442.2 C176.35 348.02, 256.79 254.32, 378.59 118.43 M97.14 442.2 C166.27 361.31, 237.59 279.24, 378.59 118.43 M100.16 444.82 C185.12 349.12, 267.24 254.18, 380.3 122.56 M100.16 444.82 C171.76 362.42, 242.63 281.01, 380.3 122.56 M103.18 447.44 C190.37 347.18, 278.68 244.72, 381.35 127.45 M103.18 447.44 C204.54 330.84, 304.79 216.13, 381.35 127.45 M106.2 450.07 C169.61 374.45, 233.48 301.68, 383.05 131.58 M106.2 450.07 C201.38 342.17, 296.1 233.37, 383.05 131.58 M109.87 451.94 C166.7 385.77, 224.14 319.47, 384.76 135.71 M109.87 451.94 C202.8 345.8, 294.88 240.07, 384.76 135.71 M113.55 453.81 C196.76 359.26, 277.66 264.26, 386.47 139.85 M113.55 453.81 C172.62 384.49, 233.59 314.79, 386.47 139.85 M117.88 454.92 C208.4 351.02, 299.74 244.91, 387.52 144.74 M117.88 454.92 C187.73 372.97, 258.31 292.28, 387.52 144.74 M121.55 456.79 C206.17 357.29, 294.8 256.81, 389.22 148.87 M121.55 456.79 C193.89 370.94, 267.45 285.74, 389.22 148.87 M125.23 458.66 C208.83 362.77, 291.45 269.96, 390.93 153 M125.23 458.66 C202.2 371.32, 278.61 283.37, 390.93 153 M128.9 460.53 C233.73 342.45, 335.6 222.35, 392.64 157.14 M128.9 460.53 C209.07 368.17, 288.95 276.73, 392.64 157.14 M133.23 461.65 C188.67 398, 244.67 334.5, 393.69 162.03 M133.23 461.65 C221.2 360.23, 309.14 258.59, 393.69 162.03 M136.91 463.52 C226.81 362.8, 316.81 260, 395.39 166.16 M136.91 463.52 C192.88 399.91, 247.02 336.95, 395.39 166.16 M140.58 465.38 C236.93 356.95, 330.99 249.11, 397.1 170.29 M140.58 465.38 C241.5 348.64, 341.72 233.12, 397.1 170.29 M144.26 467.25 C217.36 382.92, 290.25 299.74, 398.15 175.18 M144.26 467.25 C229.84 366.95, 316.87 267.74, 398.15 175.18 M147.93 469.12 C245.1 356.23, 341.26 244.66, 398.55 180.82 M147.93 469.12 C197.84 411.93, 249.12 352.31, 398.55 180.82 M152.26 470.24 C218.83 393.73, 284.83 317.83, 399.6 185.71 M152.26 470.24 C235.23 372.63, 319.55 276.58, 399.6 185.71 M155.94 472.11 C226.85 389.66, 298.6 307.33, 399.99 191.36 M155.94 472.11 C253.56 360.15, 349.74 249.63, 399.99 191.36 M160.27 473.22 C212.03 415.49, 263.2 356.49, 401.04 196.24 M160.27 473.22 C226.22 397.75, 290.22 324.14, 401.04 196.24 M165.26 473.58 C218.64 412, 272.06 350.18, 401.44 201.89 M165.26 473.58 C249.24 379.33, 332.96 283.82, 401.44 201.89 M170.24 473.94 C259.72 368.3, 352.91 262.23, 402.49 206.78 M170.24 473.94 C242.48 391.75, 314.64 308.06, 402.49 206.78 M174.57 475.06 C247.16 390.58, 319.89 307.42, 402.88 212.42 M174.57 475.06 C250.71 387.51, 326.49 300.98, 402.88 212.42 M179.56 475.42 C258.21 388.14, 333.61 299.85, 403.93 217.31 M179.56 475.42 C240.8 405, 302.63 334.95, 403.93 217.31 M184.55 475.78 C233.31 420.02, 284.23 362.98, 404.33 222.95 M184.55 475.78 C262.01 386.92, 338.53 298.13, 404.33 222.95 M189.54 476.14 C262.32 389.54, 337.56 304.98, 405.38 227.84 M189.54 476.14 C246.59 408.5, 304.72 340.91, 405.38 227.84 M193.87 477.25 C277.86 380.64, 360.15 282.87, 405.77 233.48 M193.87 477.25 C256.54 403.92, 320.88 331.83, 405.77 233.48 M198.85 477.61 C272.5 393.01, 344.95 307.51, 406.17 239.13 M198.85 477.61 C247.21 421.45, 295.76 366.1, 406.17 239.13 M203.84 477.97 C244.1 431.4, 283.83 385.68, 405.25 246.28 M203.84 477.97 C249.94 422.96, 298.19 368.46, 405.25 246.28 M208.17 479.09 C263.94 415.96, 317.48 353.16, 404.99 252.68 M208.17 479.09 C251.49 430.72, 295.37 380.45, 404.99 252.68 M214.47 477.94 C254.26 432.44, 292.64 387.93, 404.73 259.07 M214.47 477.94 C268.63 416.86, 323.47 355.66, 404.73 259.07 M220.77 476.79 C269.14 417.33, 319.21 362.76, 403.81 266.23 M220.77 476.79 C274.56 413.24, 328.64 351.53, 403.81 266.23 M227.07 475.64 C279.75 417.59, 329.05 357.28, 403.55 272.62 M227.07 475.64 C285.62 408.72, 342.9 342.01, 403.55 272.62 M232.71 475.25 C276.79 424.46, 319.88 376.7, 403.29 279.02 M232.71 475.25 C273.81 427.55, 314.83 379.86, 403.29 279.02 M239.01 474.1 C299.82 409.11, 355.43 340.03, 402.37 286.17 M239.01 474.1 C292.35 410.73, 347.9 349.47, 402.37 286.17 M245.31 472.95 C279.78 434.52, 314.59 394.21, 402.11 292.57 M245.31 472.95 C288.98 422.36, 331.84 371.53, 402.11 292.57 M251.61 471.8 C309.41 409.49, 364.77 341.89, 399.22 301.99 M251.61 471.8 C284.84 436.02, 317.17 398.38, 399.22 301.99 M257.91 470.65 C296.42 426.19, 338.7 378.38, 395.68 312.16 M257.91 470.65 C299.39 421.9, 341.58 373.48, 395.68 312.16 M265.52 467.99 C314.75 414.18, 360.06 359.11, 392.79 321.58 M265.52 467.99 C313.7 412.71, 361.44 355.51, 392.79 321.58 M275.1 463.07 C304.17 430.25, 333.29 395.12, 389.25 331.75 M275.1 463.07 C306.72 425.65, 337.77 388.52, 389.25 331.75 M284.68 458.14 C311.53 427.3, 333.79 398.15, 386.37 341.16 M284.68 458.14 C321.89 415.28, 359.92 370.92, 386.37 341.16 M294.26 453.22 C319.43 423.44, 345.56 392.2, 382.83 351.34 M294.26 453.22 C316.24 427.44, 338.9 402.71, 382.83 351.34 M303.84 448.3 C326.32 422.8, 346.79 398.34, 372.72 369.05 M303.84 448.3 C319.01 431.34, 334.31 413.28, 372.72 369.05 M325.23 429.79 C339.32 413.86, 354.75 399, 360.65 389.04 M325.23 429.79 C336.28 418.4, 345.63 406.58, 360.65 389.04&quot; stroke=&quot;#000000&quot; stroke-width=&quot;0.5&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M198.15 0.56 C214.48 -3.75, 233.23 1.89, 250.28 6.71 C267.33 11.54, 284.86 19.69, 300.42 29.52 C315.99 39.34, 330.95 51.44, 343.69 65.64 C356.43 79.85, 367.9 96.98, 376.86 114.77 C385.81 132.56, 392.63 152.57, 397.43 172.4 C402.22 192.23, 404.97 213.37, 405.61 233.75 C406.26 254.12, 405.25 274.69, 401.3 294.66 C397.34 314.63, 390.25 335.28, 381.89 353.57 C373.54 371.87, 363.32 389.25, 351.17 404.43 C339.03 419.61, 324.2 433.72, 309.04 444.63 C293.87 455.54, 277.06 464.31, 260.18 469.91 C243.3 475.5, 225.13 477.78, 207.78 478.18 C190.43 478.58, 173.04 477.03, 156.08 472.31 C139.12 467.58, 121.4 459.62, 106.03 449.82 C90.66 440.02, 76.41 427.65, 63.85 413.52 C51.28 399.39, 39.77 382.73, 30.65 365.02 C21.52 347.32, 14.36 327.13, 9.09 307.29 C3.83 287.45, -0.48 266.55, -0.92 246 C-1.35 225.46, 2.17 204.23, 6.48 184 C10.79 163.77, 16.56 142.94, 24.94 124.62 C33.32 106.29, 44.77 89.03, 56.75 74.06 C68.73 59.1, 82 45.49, 96.8 34.82 C111.6 24.14, 128.05 15.67, 145.55 10.03 C163.04 4.38, 191.59 1.95, 201.78 0.94 C211.97 -0.08, 206.57 0.18, 206.7 3.93 M128.46 16.95 C142.42 6.39, 161.74 5.25, 179.36 2.71 C196.99 0.17, 216.94 -1.28, 234.2 1.71 C251.45 4.7, 267.25 12.16, 282.89 20.66 C298.53 29.17, 314.33 40.28, 328.03 52.73 C341.74 65.17, 354.58 78.86, 365.11 95.35 C375.63 111.84, 384.36 132.14, 391.19 151.67 C398.01 171.19, 404.12 191.8, 406.08 212.5 C408.05 233.2, 405.58 255.44, 402.96 275.86 C400.34 296.27, 397.24 316.14, 390.37 334.99 C383.49 353.84, 372.91 373, 361.73 388.94 C350.54 404.87, 337.15 418.21, 323.25 430.58 C309.34 442.96, 294.64 455.56, 278.29 463.17 C261.94 470.79, 242.47 473.93, 225.15 476.26 C207.83 478.59, 191.49 480.24, 174.37 477.15 C157.25 474.05, 138.49 466.28, 122.44 457.68 C106.39 449.08, 91.99 438, 78.07 425.54 C64.15 413.09, 49.45 399.24, 38.91 382.93 C28.37 366.62, 21.03 346.86, 14.84 327.66 C8.65 308.46, 3.92 288.29, 1.79 267.74 C-0.34 247.19, -0.35 225.09, 2.08 204.38 C4.51 183.66, 9.53 162.43, 16.37 143.45 C23.22 124.46, 32.08 106.53, 43.14 90.49 C54.19 74.45, 68.58 59.71, 82.72 47.2 C96.85 34.68, 120 19.56, 127.93 15.41 C135.87 11.26, 129.22 18.4, 130.32 22.31&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(13739.862923986642 13036.006944292205) rotate(353.7028438574339 -6.600329957062968 265.4684782864997)&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;path d=&quot;M-182.57 78.48 C-182.57 78.48, -182.57 78.48, -182.57 78.48 M-182.57 78.48 C-182.57 78.48, -182.57 78.48, -182.57 78.48 M-189.39 92.42 C-181.57 85.34, -173.17 77.02, -169.05 69.02 M-189.39 92.42 C-182.76 84.07, -173.18 75.24, -169.05 69.02 M-196.21 106.36 C-183.69 90.26, -170.63 75.84, -155.53 59.57 M-196.21 106.36 C-183.22 89.83, -169.48 74.98, -155.53 59.57 M-198.44 115.03 C-186.25 100.64, -174.13 87.12, -141.36 49.37 M-198.44 115.03 C-175.54 89.3, -153.67 64.23, -141.36 49.37 M-200.01 122.93 C-184.49 107.9, -174 93.57, -133.1 45.95 M-200.01 122.93 C-175.36 94.57, -152.2 67.47, -133.1 45.95 M-200.27 129.33 C-169.72 98.44, -142.58 62.7, -124.83 42.54 M-200.27 129.33 C-169.84 96.9, -141.24 63.4, -124.83 42.54 M-199.88 134.97 C-169.19 98.15, -138.71 63.17, -115.9 38.37 M-199.88 134.97 C-172.47 102.87, -142.47 69.05, -115.9 38.37 M-200.14 141.37 C-171.41 111.74, -147.78 79.97, -108.29 35.71 M-200.14 141.37 C-175.79 116.66, -152.83 89.66, -108.29 35.71 M-199.75 147.02 C-177.55 123.25, -157.22 99.59, -101.34 33.81 M-199.75 147.02 C-167.49 110.55, -133.64 72.23, -101.34 33.81 M-198.7 151.9 C-156.11 103.38, -114.41 57.87, -94.38 31.91 M-198.7 151.9 C-162.92 110.12, -125.18 68.07, -94.38 31.91 M-198.3 157.55 C-161.98 115.82, -127.74 74.55, -86.77 29.25 M-198.3 157.55 C-164.58 119.65, -132.19 81.35, -86.77 29.25 M-197.25 162.44 C-153.09 111.54, -112.01 64.32, -79.82 27.34 M-197.25 162.44 C-163.14 122.5, -127.89 82.39, -79.82 27.34 M-196.86 168.08 C-171.97 140.7, -144.79 110.89, -72.86 25.44 M-196.86 168.08 C-153.31 119.21, -110.6 69.66, -72.86 25.44 M-195.81 172.97 C-161.71 134.13, -126.95 93.47, -65.91 23.53 M-195.81 172.97 C-171.24 142.54, -145.38 111.06, -65.91 23.53 M-195.41 178.61 C-143.74 120.68, -92.28 62.91, -58.29 20.88 M-195.41 178.61 C-158.11 133.92, -120.07 89.89, -58.29 20.88 M-195.02 184.25 C-143.76 122.58, -87.32 61.64, -51.34 18.97 M-195.02 184.25 C-138.98 119.56, -83.52 54.2, -51.34 18.97 M-193.31 188.39 C-158.43 150.45, -127.45 111.3, -44.38 17.07 M-193.31 188.39 C-158.77 150.19, -124.5 111.1, -44.38 17.07 M-192.26 193.28 C-135.28 126.77, -79.15 62.46, -36.77 14.41 M-192.26 193.28 C-142.7 137.25, -93.85 80.82, -36.77 14.41 M-191.21 198.16 C-159.35 161.66, -124.57 124.59, -29.82 12.51 M-191.21 198.16 C-151.76 155.56, -115.59 113.13, -29.82 12.51 M-190.16 203.05 C-134.75 137.57, -75.42 73.76, -22.86 10.6 M-190.16 203.05 C-149.84 157.83, -111.15 113.09, -22.86 10.6 M-189.11 207.94 C-149.91 160.89, -109.63 113.89, -15.91 8.7 M-189.11 207.94 C-143.63 153.28, -96.4 98.74, -15.91 8.7 M-189.37 214.34 C-119.5 132.08, -48.79 53.58, -7.64 5.28 M-189.37 214.34 C-126.09 141.08, -62.42 69.73, -7.64 5.28 M-188.32 219.23 C-138.09 163.6, -89.08 108.45, 1.28 1.12 M-188.32 219.23 C-114.02 131.95, -37.67 46.49, 1.28 1.12 M-186.61 223.36 C-144.31 172.29, -100.81 123, 5.61 2.23 M-186.61 223.36 C-141.71 172.28, -95.24 119.07, 5.61 2.23 M-185.56 228.25 C-122.52 156.38, -59.46 83.57, 9.29 4.1 M-185.56 228.25 C-140.94 174.68, -95.79 123, 9.29 4.1 M-184.51 233.14 C-111.74 148.97, -39.58 68.21, 13.62 5.21 M-184.51 233.14 C-138.43 179.37, -91.44 124.72, 13.62 5.21 M-182.8 237.27 C-124.85 171.75, -66.83 104.02, 17.95 6.33 M-182.8 237.27 C-127.87 175.43, -73.48 114.05, 17.95 6.33 M-181.75 242.16 C-116.63 163.94, -48.57 84.6, 22.28 7.44 M-181.75 242.16 C-126.79 179.08, -71.09 115.33, 22.28 7.44 M-180.7 247.05 C-115.94 171.03, -48.39 96.3, 26.61 8.56 M-180.7 247.05 C-106.18 162.41, -31.87 75.24, 26.61 8.56 M-179 251.18 C-128.87 194.44, -77.9 133.54, 30.94 9.67 M-179 251.18 C-95.41 156.05, -12.65 60.31, 30.94 9.67 M-177.94 256.07 C-98.65 164.04, -18.46 69.21, 35.27 10.79 M-177.94 256.07 C-129.34 201, -79.47 143.9, 35.27 10.79 M-176.89 260.96 C-120.31 196.76, -63.9 134.05, 39.61 11.9 M-176.89 260.96 C-114.11 191.2, -54.45 120.6, 39.61 11.9 M-175.19 265.09 C-99.68 177.3, -20.77 87.82, 43.94 13.02 M-175.19 265.09 C-93.98 172.6, -13.2 78.67, 43.94 13.02 M-174.14 269.98 C-105.36 193.53, -40.54 117.84, 48.27 14.13 M-174.14 269.98 C-107.2 191.91, -37.74 113.3, 48.27 14.13 M-172.43 274.11 C-98.18 185.2, -21.11 100.07, 52.6 15.25 M-172.43 274.11 C-96.38 188.47, -21.56 100.99, 52.6 15.25 M-171.38 279 C-92.77 189.43, -15.36 100.73, 57.59 15.61 M-171.38 279 C-105.13 202.99, -39.81 126.52, 57.59 15.61 M-169.67 283.14 C-98.01 200.48, -25.31 119.15, 61.92 16.72 M-169.67 283.14 C-110.18 217.18, -51.5 149.72, 61.92 16.72 M-167.97 287.27 C-91.81 199.95, -15.32 111.09, 66.25 17.84 M-167.97 287.27 C-89.37 198.67, -11.29 108.5, 66.25 17.84 M-166.91 292.16 C-97.51 216.78, -29.35 137.29, 70.58 18.95 M-166.91 292.16 C-93.12 206.88, -18.63 122.43, 70.58 18.95 M-165.21 296.29 C-104.85 226.37, -45.95 157.05, 74.91 20.07 M-165.21 296.29 C-71.27 187.52, 23 80.14, 74.91 20.07 M-163.5 300.42 C-73.02 198.63, 15.04 93.76, 79.24 21.18 M-163.5 300.42 C-98.58 223.49, -32.18 147.73, 79.24 21.18 M-162.45 305.31 C-98.04 232.36, -33.13 157.3, 83.57 22.3 M-162.45 305.31 C-88.33 217.35, -13.23 130.56, 83.57 22.3 M-160.74 309.45 C-90.38 229.14, -19.95 146.9, 87.9 23.41 M-160.74 309.45 C-71.24 207.21, 19.24 103.62, 87.9 23.41 M-159.04 313.58 C-65.16 206.62, 25.68 101.9, 92.23 24.53 M-159.04 313.58 C-69.55 210.32, 21.02 106.59, 92.23 24.53 M-157.33 317.71 C-93.74 242.37, -30.03 169.86, 97.22 24.89 M-157.33 317.71 C-62.38 209.6, 32.18 101.04, 97.22 24.89 M-156.28 322.6 C-68.24 220.53, 18.78 121.3, 101.55 26 M-156.28 322.6 C-68.41 222.6, 18.66 122.86, 101.55 26 M-154.57 326.74 C-72.5 232.83, 9.4 137.83, 105.23 27.87 M-154.57 326.74 C-60.54 218.42, 33.94 109.43, 105.23 27.87 M-152.87 330.87 C-102.06 269.34, -49 209.02, 109.56 28.99 M-152.87 330.87 C-87.26 255.42, -22.35 180.07, 109.56 28.99 M-152.47 336.51 C-98.54 274.09, -42.42 210.96, 113.23 30.86 M-152.47 336.51 C-55.29 225.95, 41.49 114.17, 113.23 30.86 M-150.77 340.65 C-57.43 235.4, 32.94 129.21, 117.56 31.97 M-150.77 340.65 C-93.31 274.47, -36.65 209.44, 117.56 31.97 M-149.06 344.78 C-74.61 256.15, 1.79 167.12, 121.24 33.84 M-149.06 344.78 C-76.8 259.8, -3.27 175.88, 121.24 33.84 M-147.35 348.91 C-41.81 223.6, 66.94 98.49, 125.57 34.95 M-147.35 348.91 C-44.44 232.64, 58 115.24, 125.57 34.95 M-145.65 353.05 C-35.23 229.24, 74.75 102.13, 129.24 36.82 M-145.65 353.05 C-50.81 245.01, 44.72 135.55, 129.24 36.82 M-143.94 357.18 C-41.28 241.17, 59.41 123.71, 132.92 38.69 M-143.94 357.18 C-36.55 232.13, 70.41 108.55, 132.92 38.69 M-142.23 361.31 C-81.85 290.91, -22.75 219.49, 136.59 40.56 M-142.23 361.31 C-54.82 259.55, 33.76 158.24, 136.59 40.56 M-140.52 365.45 C-53.83 266.16, 32.78 167.27, 140.27 42.43 M-140.52 365.45 C-46.62 256.89, 47.25 148.52, 140.27 42.43 M-138.82 369.58 C-48.68 266.63, 40.35 164.55, 143.94 44.3 M-138.82 369.58 C-57.91 277.96, 21.22 186.75, 143.94 44.3 M-137.11 373.72 C-70.61 295.84, -3 217.07, 147.62 46.17 M-137.11 373.72 C-80.86 307.19, -23.26 241.05, 147.62 46.17 M-135.4 377.85 C-57.16 285.13, 22.21 194.18, 151.29 48.04 M-135.4 377.85 C-77.32 311.9, -19.74 245.61, 151.29 48.04 M-134.35 382.74 C-66.14 304.93, -1.77 228.85, 154.31 50.67 M-134.35 382.74 C-77.52 315.77, -18.39 248.61, 154.31 50.67 M-132.65 386.87 C-18.62 258.52, 92.96 129.48, 157.99 52.53 M-132.65 386.87 C-72.34 318.66, -12.22 247.99, 157.99 52.53 M-130.94 391 C-40.91 287.03, 49.7 183.6, 161.01 55.16 M-130.94 391 C-54.91 304.3, 21.6 215.54, 161.01 55.16 M-129.23 395.14 C-30.28 281.61, 69 167.46, 164.02 57.78 M-129.23 395.14 C-41.13 291.72, 48.06 189.54, 164.02 57.78 M-126.87 398.52 C-20.52 274.99, 88.22 149.33, 167.04 60.41 M-126.87 398.52 C-29.48 287.31, 66.81 175.89, 167.04 60.41 M-125.16 402.65 C-22.32 284.42, 77.76 168.26, 170.06 63.03 M-125.16 402.65 C-52.79 318.64, 20.52 233.43, 170.06 63.03 M-123.46 406.78 C-50.01 322.74, 24.92 237.14, 173.08 65.66 M-123.46 406.78 C-47.71 319.96, 28.75 231.65, 173.08 65.66 M-121.75 410.92 C-60.29 340.46, 1.02 268.94, 175.44 69.04 M-121.75 410.92 C-40.65 317.47, 42 221.8, 175.44 69.04 M-120.04 415.05 C-40.13 326.12, 37.86 235.46, 177.81 72.41 M-120.04 415.05 C-20.61 300.79, 77.37 187.79, 177.81 72.41 M-117.68 418.43 C-40.25 327.87, 38.56 239.98, 180.83 75.04 M-117.68 418.43 C-1.88 285.68, 115.15 151.04, 180.83 75.04 M-115.97 422.56 C-36.94 332.79, 42.65 242.72, 182.53 79.17 M-115.97 422.56 C-13.12 303.68, 89.34 185.36, 182.53 79.17 M-114.27 426.7 C-47.98 349.46, 19.68 274.26, 184.89 82.55 M-114.27 426.7 C-37.63 339.47, 37.73 253.09, 184.89 82.55 M-112.56 430.83 C-1.69 303.26, 110.94 174.13, 186.6 86.68 M-112.56 430.83 C-21.29 325.65, 71.36 218.71, 186.6 86.68 M-110.85 434.97 C-13.23 320.91, 84.99 207.13, 187.65 91.57 M-110.85 434.97 C-22.4 333.17, 66.68 231.07, 187.65 91.57 M-109.15 439.1 C-26.27 346.58, 53.32 255.21, 189.36 95.71 M-109.15 439.1 C-2.13 316.66, 104.42 193.73, 189.36 95.71 M-107.44 443.23 C-38.41 365.93, 28.46 288.17, 190.41 100.59 M-107.44 443.23 C-37.37 363.6, 31.92 284.75, 190.41 100.59 M-105.08 446.61 C-19.22 349.55, 64.88 250.86, 190.8 106.24 M-105.08 446.61 C-33.92 366.72, 35.01 286.64, 190.8 106.24 M-103.37 450.75 C-23.11 360.18, 57.66 268.95, 191.2 111.88 M-103.37 450.75 C-11.45 344.05, 82.38 236.38, 191.2 111.88 M-101.67 454.88 C-8.48 345.89, 84.52 239.13, 191.59 117.52 M-101.67 454.88 C-41.82 383.79, 19.47 312.65, 191.59 117.52 M-99.3 458.26 C-37.77 389.36, 23.25 317.52, 191.33 123.92 M-99.3 458.26 C-16 359.64, 69.14 262.01, 191.33 123.92 M-97.6 462.39 C-4.55 358.35, 87.5 252.1, 191.07 130.32 M-97.6 462.39 C6.32 342.94, 110.11 224.03, 191.07 130.32 M-95.23 465.77 C-5.14 360.18, 88.1 253.76, 190.81 136.72 M-95.23 465.77 C-19.01 381.28, 55.08 295.75, 190.81 136.72 M-93.53 469.9 C17.82 341.38, 128.33 214.72, 190.55 143.12 M-93.53 469.9 C-13.35 378.28, 66.61 285.45, 190.55 143.12 M-91.82 474.04 C-13.36 384.43, 63.16 295.02, 190.29 149.51 M-91.82 474.04 C18.49 347.89, 128.49 220.6, 190.29 149.51 M-89.46 477.42 C-4.42 380.64, 81.57 281.64, 190.02 155.91 M-89.46 477.42 C21.18 349.06, 132.69 221.25, 190.02 155.91 M-87.75 481.55 C-17.74 398.02, 55.02 316.28, 190.42 161.55 M-87.75 481.55 C-25.72 411.05, 35.95 339.72, 190.42 161.55 M-85.39 484.93 C20.28 365.53, 124.16 245.76, 189.5 168.71 M-85.39 484.93 C-20.44 409.05, 45 333.43, 189.5 168.71 M-83.68 489.06 C-13.47 408.11, 56.38 329.68, 188.58 175.86 M-83.68 489.06 C11.98 379.36, 109.05 268.12, 188.58 175.86 M-81.32 492.44 C-28.74 428.63, 26.82 366.53, 185.7 185.28 M-81.32 492.44 C12.89 382.67, 107.96 273.16, 185.7 185.28 M-79.61 496.58 C17.9 386.45, 115.48 273.81, 184.12 193.18 M-79.61 496.58 C17.54 385.43, 113.06 274.56, 184.12 193.18 M-77.25 499.95 C2.66 406.75, 83.51 312.82, 182.55 201.09 M-77.25 499.95 C-21.91 437.59, 32.71 375.07, 182.55 201.09 M-75.54 504.09 C2.42 415.41, 79.95 326.12, 180.98 209 M-75.54 504.09 C-1.1 419.07, 72.02 333.54, 180.98 209 M-73.18 507.47 C4.73 419.05, 80.59 331.34, 179.4 216.9 M-73.18 507.47 C0.79 419.92, 76.48 332.99, 179.4 216.9 M-71.47 511.6 C-5.35 434.64, 62.51 358.18, 177.83 224.81 M-71.47 511.6 C10.18 417.53, 93.62 321.74, 177.83 224.81 M-69.11 514.98 C12.35 421.8, 94.11 327.28, 176.26 232.72 M-69.11 514.98 C-16.71 453.58, 35.52 394.24, 176.26 232.72 M-67.4 519.11 C3.61 435.56, 73.78 352.62, 174.68 240.63 M-67.4 519.11 C22.66 416.16, 111.51 314.43, 174.68 240.63 M-64.38 521.74 C-11.87 462.19, 39.72 402.35, 172.45 249.29 M-64.38 521.74 C24.01 418.87, 113.36 315.74, 172.45 249.29 M-62.02 525.12 C8.64 440.85, 82.1 358.97, 170.22 257.95 M-62.02 525.12 C-6.56 461.56, 48.55 397.68, 170.22 257.95 M-59.66 528.5 C13.7 444.83, 86.87 360.85, 167.99 266.61 M-59.66 528.5 C13.25 442.57, 87.7 357, 167.99 266.61 M-57.3 531.87 C-0.54 467.6, 52.61 403.88, 165.76 275.27 M-57.3 531.87 C-2.4 468.83, 52.8 404.53, 165.76 275.27 M-54.93 535.25 C8.57 463.16, 70.45 392.11, 163.54 283.94 M-54.93 535.25 C-7.34 481.32, 38.8 427.14, 163.54 283.94 M-51.91 537.88 C23.88 449.69, 99.31 363.29, 161.96 291.84 M-51.91 537.88 C7.58 470.82, 66.63 402.2, 161.96 291.84 M-50.21 542.01 C9.84 474.7, 68.93 406.58, 160.39 299.75 M-50.21 542.01 C16.26 467.46, 80.77 391.81, 160.39 299.75 M-46.53 543.88 C10.22 477.62, 68.92 410.98, 157.5 309.17 M-46.53 543.88 C7.66 483.44, 60.99 422.83, 157.5 309.17 M-43.51 546.51 C28.91 464.87, 100.86 382.47, 154.62 318.58 M-43.51 546.51 C17.11 476.35, 77.76 406.84, 154.62 318.58 M-40.49 549.13 C35 463.67, 109.79 373.85, 151.73 328 M-40.49 549.13 C18.71 480.47, 78.9 409.95, 151.73 328 M-37.48 551.75 C25.9 480.74, 87.33 412.65, 149.5 336.66 M-37.48 551.75 C-0.64 507.5, 37.91 463.62, 149.5 336.66 M-34.46 554.38 C11.43 499.73, 58.39 445.85, 146.62 346.08 M-34.46 554.38 C2.49 511.68, 39.91 468.75, 146.62 346.08 M-30.78 556.25 C8.08 507.28, 52.2 461.49, 143.73 355.49 M-30.78 556.25 C9.42 510.42, 48.02 464.3, 143.73 355.49 M-27.11 558.12 C31.04 490.25, 92 421.29, 145.44 359.63 M-27.11 558.12 C22.56 501.38, 72.75 443.77, 145.44 359.63 M-23.43 559.99 C29.45 498.21, 82.6 441.42, 141.9 369.8 M-23.43 559.99 C29.32 500.87, 81.79 442.37, 141.9 369.8 M-20.41 562.61 C35.97 497.77, 91.44 433.81, 138.35 379.97 M-20.41 562.61 C39.18 495.01, 96.53 428.39, 138.35 379.97 M-15.43 562.97 C16.97 523.87, 52.42 485.34, 134.81 390.14 M-15.43 562.97 C16.7 524.13, 49.98 486.18, 134.81 390.14 M-11.1 564.09 C28.32 519.44, 65.36 477.87, 131.27 400.31 M-11.1 564.09 C20.59 529.02, 51.38 493.02, 131.27 400.31 M-6.11 564.45 C21.18 534.32, 50.73 499.67, 125.76 412.75 M-6.11 564.45 C24.43 528.72, 53.54 495.21, 125.76 412.75 M-1.12 564.81 C35.92 525.51, 68.82 486.03, 120.91 424.43 M-1.12 564.81 C35.18 524.18, 70.65 482.93, 120.91 424.43 M4.52 564.41 C43.88 518.91, 86.04 470.82, 116.71 435.36 M4.52 564.41 C28.49 537.03, 52.08 510.38, 116.71 435.36 M10.82 563.26 C42.61 524.72, 73.49 490.14, 111.85 447.04 M10.82 563.26 C49.78 517.83, 91.11 471.73, 111.85 447.04 M17.78 561.36 C47.31 527.93, 78.12 495.9, 107 458.72 M17.78 561.36 C53.49 520.15, 89.51 480.04, 107 458.72 M26.7 557.19 C46.1 534.33, 63.02 512.33, 100.18 472.66 M26.7 557.19 C41.88 539.37, 58.04 520.67, 100.18 472.66 M36.94 551.51 C48.56 539.33, 59.57 527.89, 88.76 491.89 M36.94 551.51 C48.3 539.58, 58.48 527.34, 88.76 491.89&quot; stroke=&quot;#000000&quot; stroke-width=&quot;0.5&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M-0.06 1.03 C31.27 17.82, 173.76 18.18, 188.61 99.76 C203.46 181.34, 130.36 418.62, 89.03 490.52 C47.7 562.42, -10.94 592.69, -59.37 531.18 C-107.8 469.67, -211.37 209.89, -201.53 121.46 C-191.7 33.02, -33.99 20.9, -0.36 0.56 M-1.55 0.53 C29.55 17.62, 172.56 19.54, 187.58 101.37 C202.6 183.21, 129.69 419.7, 88.57 491.54 C47.46 563.38, -10.55 593.96, -59.1 532.41 C-107.66 470.86, -212.77 211, -202.78 122.23 C-192.78 33.47, -33.11 19.94, 0.86 -0.18&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(13740.940919350007 12881.281892205601) rotate(0 -72.39586790589874 22.583149902520745)&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;path d=&quot;M-2.18 1.09 C-17.67 2.16, -60.12 8.58, -92.08 8.39 C-124.05 8.19, -200.46 -10.71, -193.97 -0.08 C-187.49 10.54, -94.1 76.93, -53.18 72.15 C-12.25 67.38, 42.92 -16.98, 51.58 -28.74 C60.24 -40.5, 7.27 -3.22, -1.23 1.6&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#ffffff&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M-0.16 0.14 C-15.28 0.88, -58.47 5.52, -90.78 5.51 C-123.1 5.49, -200.01 -11.34, -194.08 0.03 C-188.14 11.4, -95.67 78.28, -55.16 73.73 C-14.66 69.18, 39.72 -14.88, 48.96 -27.27 C58.19 -39.65, 8.27 -5, 0.25 -0.56 M-1.7 -0.84 C-16.93 0.58, -59.24 6.36, -91.42 6.75 C-123.61 7.13, -200.95 -9.32, -194.83 1.48 C-188.7 12.28, -95.65 76.24, -54.69 71.56 C-13.73 66.88, 41.54 -14.95, 50.95 -26.58 C60.37 -38.21, 10.57 -2.89, 1.8 1.77&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13704.217118891076 12670.860712088881) rotate(0 39.01433827987148 43.32330711184841)&quot;&gt;&lt;path d=&quot;M24.72 3.89 C30.93 0.56, 39.73 -1.34, 46.75 0.12 C53.77 1.58, 61.78 7.2, 66.85 12.66 C71.93 18.13, 75.6 25.51, 77.18 32.91 C78.76 40.3, 78.8 49.56, 76.33 57.04 C73.86 64.53, 67.83 73.05, 62.35 77.83 C56.86 82.61, 50.4 84.94, 43.42 85.72 C36.44 86.51, 26.72 85.99, 20.46 82.55 C14.19 79.1, 9.4 71.79, 5.85 65.04 C2.31 58.28, -0.91 49.96, -0.82 42.03 C-0.73 34.1, 1.44 24.1, 6.41 17.44 C11.38 10.79, 24.63 4.69, 28.99 2.09 C33.34 -0.51, 32.36 1.23, 32.54 1.84 M40.44 0.05 C47.3 0.02, 56.86 4.07, 62.59 8.46 C68.33 12.85, 72.35 18.94, 74.84 26.39 C77.34 33.83, 79.12 45.32, 77.56 53.16 C76 61, 70.59 67.9, 65.47 73.45 C60.36 78.99, 53.28 84.46, 46.85 86.43 C40.42 88.4, 33.56 87.99, 26.9 85.25 C20.24 82.52, 11.48 76.58, 6.89 70.01 C2.3 63.44, -0.05 53.46, -0.65 45.83 C-1.24 38.2, -0.28 30.69, 3.33 24.22 C6.94 17.75, 14.7 11.27, 21.02 7.03 C27.34 2.79, 37.96 -0.34, 41.24 -1.2 C44.53 -2.06, 40.66 0.79, 40.72 1.87&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#ffffff&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M40.17 -0.3 C46.91 -0.83, 55.35 2.94, 61.03 7.42 C66.71 11.9, 71.59 19.43, 74.26 26.6 C76.93 33.77, 77.94 42.98, 77.05 50.42 C76.16 57.86, 73.45 65.53, 68.93 71.26 C64.41 76.98, 56.67 82.52, 49.92 84.77 C43.18 87.02, 35.23 86.86, 28.44 84.77 C21.66 82.68, 13.97 78.05, 9.22 72.22 C4.48 66.39, 0.95 57.8, -0.02 49.81 C-0.99 41.82, 0.21 31.44, 3.38 24.27 C6.56 17.1, 12.44 10.77, 19.04 6.79 C25.63 2.82, 38.32 1.18, 42.94 0.43 C47.55 -0.32, 46.67 1.47, 46.74 2.29 M55.28 4.67 C61.79 7.31, 68.75 12.81, 72.47 19.26 C76.19 25.71, 77.7 35.73, 77.6 43.39 C77.51 51.04, 75.55 58.74, 71.9 65.19 C68.25 71.64, 61.87 78.8, 55.69 82.08 C49.52 85.36, 41.53 85.93, 34.86 84.87 C28.19 83.81, 21.38 80.48, 15.65 75.72 C9.93 70.95, 3.03 63.73, 0.51 56.29 C-2.02 48.85, -1.76 38.61, 0.5 31.08 C2.76 23.56, 8.74 16.17, 14.06 11.13 C19.38 6.09, 25.8 1.92, 32.41 0.84 C39.02 -0.25, 49.92 4.19, 53.72 4.61 C57.52 5.03, 55.57 2.75, 55.24 3.37&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13710.714748874483 12708.602355708455) rotate(0 11.914558396847497 15.886077862463935)&quot;&gt;&lt;path d=&quot;M23.83 15.89 C23.83 16.81, 23.77 17.74, 23.65 18.64 C23.53 19.55, 23.35 20.46, 23.11 21.32 C22.87 22.18, 22.58 23.03, 22.23 23.83 C21.89 24.63, 21.48 25.39, 21.04 26.1 C20.6 26.8, 20.1 27.46, 19.57 28.06 C19.04 28.65, 18.47 29.18, 17.87 29.64 C17.27 30.1, 16.64 30.5, 15.99 30.81 C15.34 31.13, 14.66 31.37, 13.98 31.53 C13.3 31.69, 12.6 31.77, 11.91 31.77 C11.22 31.77, 10.52 31.69, 9.85 31.53 C9.17 31.37, 8.49 31.13, 7.84 30.81 C7.19 30.5, 6.55 30.1, 5.96 29.64 C5.36 29.18, 4.78 28.65, 4.26 28.06 C3.73 27.46, 3.23 26.8, 2.79 26.1 C2.34 25.39, 1.94 24.63, 1.6 23.83 C1.25 23.03, 0.95 22.18, 0.72 21.32 C0.48 20.46, 0.3 19.55, 0.18 18.64 C0.06 17.74, 0 16.81, 0 15.89 C0 14.97, 0.06 14.03, 0.18 13.13 C0.3 12.22, 0.48 11.32, 0.72 10.45 C0.95 9.59, 1.25 8.74, 1.6 7.94 C1.94 7.15, 2.34 6.38, 2.79 5.67 C3.23 4.97, 3.73 4.31, 4.26 3.72 C4.78 3.13, 5.36 2.59, 5.96 2.13 C6.55 1.67, 7.19 1.27, 7.84 0.96 C8.49 0.64, 9.17 0.4, 9.85 0.24 C10.52 0.08, 11.22 0, 11.91 0 C12.6 0, 13.3 0.08, 13.98 0.24 C14.66 0.4, 15.34 0.64, 15.99 0.96 C16.64 1.27, 17.27 1.67, 17.87 2.13 C18.47 2.59, 19.04 3.13, 19.57 3.72 C20.1 4.31, 20.6 4.97, 21.04 5.67 C21.48 6.38, 21.89 7.15, 22.23 7.94 C22.58 8.74, 22.87 9.59, 23.11 10.45 C23.35 11.32, 23.53 12.22, 23.65 13.13 C23.77 14.03, 23.8 15.43, 23.83 15.89 C23.86 16.35, 23.86 15.43, 23.83 15.89&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#000000&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M23.83 15.89 C23.83 16.81, 23.77 17.74, 23.65 18.64 C23.53 19.55, 23.35 20.46, 23.11 21.32 C22.87 22.18, 22.58 23.03, 22.23 23.83 C21.89 24.63, 21.48 25.39, 21.04 26.1 C20.6 26.8, 20.1 27.46, 19.57 28.06 C19.04 28.65, 18.47 29.18, 17.87 29.64 C17.27 30.1, 16.64 30.5, 15.99 30.81 C15.34 31.13, 14.66 31.37, 13.98 31.53 C13.3 31.69, 12.6 31.77, 11.91 31.77 C11.22 31.77, 10.52 31.69, 9.85 31.53 C9.17 31.37, 8.49 31.13, 7.84 30.81 C7.19 30.5, 6.55 30.1, 5.96 29.64 C5.36 29.18, 4.78 28.65, 4.26 28.06 C3.73 27.46, 3.23 26.8, 2.79 26.1 C2.34 25.39, 1.94 24.63, 1.6 23.83 C1.25 23.03, 0.95 22.18, 0.72 21.32 C0.48 20.46, 0.3 19.55, 0.18 18.64 C0.06 17.74, 0 16.81, 0 15.89 C0 14.97, 0.06 14.03, 0.18 13.13 C0.3 12.22, 0.48 11.32, 0.72 10.45 C0.95 9.59, 1.25 8.74, 1.6 7.94 C1.94 7.15, 2.34 6.38, 2.79 5.67 C3.23 4.97, 3.73 4.31, 4.26 3.72 C4.78 3.13, 5.36 2.59, 5.96 2.13 C6.55 1.67, 7.19 1.27, 7.84 0.96 C8.49 0.64, 9.17 0.4, 9.85 0.24 C10.52 0.08, 11.22 0, 11.91 0 C12.6 0, 13.3 0.08, 13.98 0.24 C14.66 0.4, 15.34 0.64, 15.99 0.96 C16.64 1.27, 17.27 1.67, 17.87 2.13 C18.47 2.59, 19.04 3.13, 19.57 3.72 C20.1 4.31, 20.6 4.97, 21.04 5.67 C21.48 6.38, 21.89 7.15, 22.23 7.94 C22.58 8.74, 22.87 9.59, 23.11 10.45 C23.35 11.32, 23.53 12.22, 23.65 13.13 C23.77 14.03, 23.8 15.43, 23.83 15.89 C23.86 16.35, 23.86 15.43, 23.83 15.89&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13555.644888872665 12678.268908506785) rotate(0 43.40118004254691 45.14034216147684)&quot;&gt;&lt;path d=&quot;M61.52 4.36 C68.57 6.92, 75.39 13.16, 79.68 19.72 C83.97 26.29, 87.27 35.49, 87.26 43.73 C87.25 51.98, 83.68 62.31, 79.63 69.2 C75.58 76.09, 70 81.51, 62.96 85.09 C55.93 88.67, 45.22 91.55, 37.45 90.69 C29.67 89.83, 22.34 85.13, 16.29 79.94 C10.24 74.75, 3.74 67.44, 1.14 59.55 C-1.47 51.65, -1.65 40.5, 0.66 32.58 C2.97 24.67, 9.02 17.32, 15.01 12.04 C21.01 6.76, 28.25 1.97, 36.63 0.9 C45 -0.16, 60.06 4.36, 65.26 5.64 C70.47 6.92, 68.41 8.02, 67.86 8.59 M42.42 -1.32 C49.81 -1.86, 60.37 3.53, 66.84 8.06 C73.32 12.59, 78.15 18.52, 81.26 25.85 C84.37 33.17, 86.13 43.74, 85.51 52.02 C84.89 60.3, 82.67 69.43, 77.56 75.54 C72.46 81.64, 62.65 86.65, 54.86 88.64 C47.06 90.64, 38.33 89.55, 30.79 87.48 C23.26 85.41, 14.51 81.91, 9.65 76.24 C4.78 70.57, 2.61 61.93, 1.61 53.48 C0.61 45.02, 0.75 33.03, 3.65 25.5 C6.56 17.98, 12.38 12.43, 19.01 8.33 C25.64 4.22, 39.48 1.88, 43.45 0.87 C47.43 -0.14, 42.85 1.65, 42.86 2.27&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#ffffff&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M36.38 1.24 C43.48 -0.54, 53.23 1.2, 60.58 4.25 C67.93 7.3, 76.05 12.81, 80.49 19.51 C84.94 26.21, 87.15 36.16, 87.25 44.45 C87.34 52.75, 85.3 62.17, 81.06 69.27 C76.82 76.36, 69.13 83.44, 61.83 87.03 C54.52 90.61, 45.08 92.13, 37.26 90.8 C29.43 89.46, 20.68 84.4, 14.9 79.01 C9.11 73.62, 4.71 66.14, 2.52 58.48 C0.32 50.81, -0.43 40.77, 1.72 33.02 C3.88 25.28, 8.05 17.36, 15.43 12 C22.81 6.64, 39.58 2.48, 46.01 0.87 C52.43 -0.75, 54.33 1.58, 54 2.31 M60.09 4.85 C66.88 7.16, 74.5 12.75, 78.88 19.26 C83.25 25.77, 86.01 35.93, 86.34 43.92 C86.66 51.9, 84.6 60.38, 80.83 67.17 C77.07 73.96, 71.08 80.93, 63.75 84.67 C56.42 88.42, 44.99 90.61, 36.86 89.64 C28.72 88.66, 20.52 83.97, 14.95 78.81 C9.37 73.65, 5.66 66.19, 3.41 58.66 C1.16 51.14, -0.26 41.29, 1.45 33.66 C3.15 26.03, 7.65 18.53, 13.65 12.88 C19.66 7.22, 29.85 1.12, 37.48 -0.27 C45.12 -1.66, 55.93 3.61, 59.48 4.54 C63.04 5.47, 59.12 5, 58.81 5.3&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(13568.413514167598 12716.453464571183) rotate(0 10.1494386343511 15.886077862463026)&quot;&gt;&lt;path d=&quot;M20.3 15.89 C20.3 16.81, 20.25 17.74, 20.14 18.64 C20.04 19.55, 19.89 20.46, 19.69 21.32 C19.49 22.18, 19.23 23.03, 18.94 23.83 C18.65 24.63, 18.3 25.39, 17.92 26.1 C17.55 26.8, 17.12 27.46, 16.67 28.06 C16.22 28.65, 15.73 29.18, 15.22 29.64 C14.72 30.1, 14.17 30.5, 13.62 30.81 C13.07 31.13, 12.49 31.37, 11.91 31.53 C11.33 31.69, 10.74 31.77, 10.15 31.77 C9.56 31.77, 8.97 31.69, 8.39 31.53 C7.81 31.37, 7.23 31.13, 6.68 30.81 C6.13 30.5, 5.58 30.1, 5.07 29.64 C4.57 29.18, 4.08 28.65, 3.63 28.06 C3.18 27.46, 2.75 26.8, 2.37 26.1 C2 25.39, 1.65 24.63, 1.36 23.83 C1.07 23.03, 0.81 22.18, 0.61 21.32 C0.41 20.46, 0.26 19.55, 0.15 18.64 C0.05 17.74, 0 16.81, 0 15.89 C0 14.97, 0.05 14.03, 0.15 13.13 C0.26 12.22, 0.41 11.32, 0.61 10.45 C0.81 9.59, 1.07 8.74, 1.36 7.94 C1.65 7.15, 2 6.38, 2.37 5.67 C2.75 4.97, 3.18 4.31, 3.63 3.72 C4.08 3.13, 4.57 2.59, 5.07 2.13 C5.58 1.67, 6.13 1.27, 6.68 0.96 C7.23 0.64, 7.81 0.4, 8.39 0.24 C8.97 0.08, 9.56 0, 10.15 0 C10.74 0, 11.33 0.08, 11.91 0.24 C12.49 0.4, 13.07 0.64, 13.62 0.96 C14.17 1.27, 14.72 1.67, 15.22 2.13 C15.73 2.59, 16.22 3.13, 16.67 3.72 C17.12 4.31, 17.55 4.97, 17.92 5.67 C18.3 6.38, 18.65 7.15, 18.94 7.94 C19.23 8.74, 19.49 9.59, 19.69 10.45 C19.89 11.32, 20.04 12.22, 20.14 13.13 C20.25 14.03, 20.27 15.43, 20.3 15.89 C20.32 16.35, 20.32 15.43, 20.3 15.89&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#000000&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M20.3 15.89 C20.3 16.81, 20.25 17.74, 20.14 18.64 C20.04 19.55, 19.89 20.46, 19.69 21.32 C19.49 22.18, 19.23 23.03, 18.94 23.83 C18.65 24.63, 18.3 25.39, 17.92 26.1 C17.55 26.8, 17.12 27.46, 16.67 28.06 C16.22 28.65, 15.73 29.18, 15.22 29.64 C14.72 30.1, 14.17 30.5, 13.62 30.81 C13.07 31.13, 12.49 31.37, 11.91 31.53 C11.33 31.69, 10.74 31.77, 10.15 31.77 C9.56 31.77, 8.97 31.69, 8.39 31.53 C7.81 31.37, 7.23 31.13, 6.68 30.81 C6.13 30.5, 5.58 30.1, 5.07 29.64 C4.57 29.18, 4.08 28.65, 3.63 28.06 C3.18 27.46, 2.75 26.8, 2.37 26.1 C2 25.39, 1.65 24.63, 1.36 23.83 C1.07 23.03, 0.81 22.18, 0.61 21.32 C0.41 20.46, 0.26 19.55, 0.15 18.64 C0.05 17.74, 0 16.81, 0 15.89 C0 14.97, 0.05 14.03, 0.15 13.13 C0.26 12.22, 0.41 11.32, 0.61 10.45 C0.81 9.59, 1.07 8.74, 1.36 7.94 C1.65 7.15, 2 6.38, 2.37 5.67 C2.75 4.97, 3.18 4.31, 3.63 3.72 C4.08 3.13, 4.57 2.59, 5.07 2.13 C5.58 1.67, 6.13 1.27, 6.68 0.96 C7.23 0.64, 7.81 0.4, 8.39 0.24 C8.97 0.08, 9.56 0, 10.15 0 C10.74 0, 11.33 0.08, 11.91 0.24 C12.49 0.4, 13.07 0.64, 13.62 0.96 C14.17 1.27, 14.72 1.67, 15.22 2.13 C15.73 2.59, 16.22 3.13, 16.67 3.72 C17.12 4.31, 17.55 4.97, 17.92 5.67 C18.3 6.38, 18.65 7.15, 18.94 7.94 C19.23 8.74, 19.49 9.59, 19.69 10.45 C19.89 11.32, 20.04 12.22, 20.14 13.13 C20.25 14.03, 20.27 15.43, 20.3 15.89 C20.32 16.35, 20.32 15.43, 20.3 15.89&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(14038.818221833579 12186.765711135191) rotate(0 815.4679546526813 390.30463681132824)&quot;&gt;&lt;path d=&quot;M1039.75 15.32 C1081.37 14.4, 1119.08 27.89, 1156.61 36.19 C1194.15 44.49, 1230.47 54.35, 1264.96 65.11 C1299.46 75.86, 1332.68 87.3, 1363.6 100.72 C1394.51 114.13, 1424.5 130.03, 1450.48 145.61 C1476.46 161.19, 1498.88 177.2, 1519.46 194.19 C1540.03 211.19, 1558.58 229.04, 1573.94 247.57 C1589.31 266.1, 1602.6 285.86, 1611.64 305.38 C1620.68 324.91, 1625.48 344.95, 1628.18 364.71 C1630.89 384.46, 1631.35 404.11, 1627.87 423.92 C1624.39 443.73, 1617.27 464.18, 1607.29 483.57 C1597.31 502.96, 1583.85 521.93, 1567.98 540.26 C1552.12 558.59, 1533.59 576.63, 1512.1 593.54 C1490.61 610.46, 1465.54 626.52, 1439.02 641.75 C1412.51 656.98, 1384.21 671.78, 1353 684.92 C1321.79 698.06, 1286.91 709.96, 1251.76 720.61 C1216.61 731.26, 1179.97 740.95, 1142.11 748.81 C1104.24 756.68, 1064.75 762.77, 1024.55 767.8 C984.34 772.82, 942.17 776.82, 900.87 778.97 C859.56 781.13, 817.99 781.68, 776.72 780.74 C735.45 779.8, 694.1 777.35, 653.24 773.34 C612.39 769.33, 570.7 763.71, 531.6 756.71 C492.49 749.7, 454.65 741.09, 418.6 731.3 C382.56 721.5, 347.98 710.04, 315.31 697.93 C282.64 685.82, 251.18 672.88, 222.59 658.63 C193.99 644.37, 167.15 628.82, 143.73 612.41 C120.3 596, 100.08 578.16, 82.05 560.16 C64.02 542.16, 47.8 523.41, 35.52 504.4 C23.24 485.4, 14.34 465.76, 8.37 446.13 C2.41 426.51, -0.75 406.61, -0.28 386.65 C0.2 366.68, 4.56 346.02, 11.23 326.33 C17.9 306.63, 26.79 287.18, 39.74 268.47 C52.7 249.77, 70.23 231.88, 88.96 214.1 C107.68 196.31, 127.99 178.04, 152.09 161.75 C176.19 145.45, 204.3 130.47, 233.57 116.32 C262.84 102.17, 294.57 88.68, 327.71 76.87 C360.85 65.05, 395.72 54.76, 432.43 45.42 C469.14 36.08, 508.61 27.47, 547.96 20.82 C587.31 14.17, 628.01 9.09, 668.54 5.53 C709.06 1.97, 749.69 -0.08, 791.14 -0.53 C832.58 -0.98, 872.23 -0.09, 917.2 2.86 C962.18 5.8, 1034.57 12.71, 1061.01 17.15 C1087.44 21.59, 1079.88 23.27, 1075.83 29.5 M762.12 -0.27 C800.65 -7.83, 846.07 0.19, 887.53 1.94 C929 3.7, 970.5 5.31, 1010.94 10.25 C1051.38 15.19, 1091.69 23.65, 1130.17 31.57 C1168.65 39.48, 1206.42 47.41, 1241.83 57.74 C1277.23 68.08, 1310.88 80.65, 1342.59 93.58 C1374.29 106.51, 1404.97 120.32, 1432.05 135.33 C1459.12 150.35, 1483.14 167.19, 1505.03 183.68 C1526.93 200.17, 1546.69 216.43, 1563.42 234.26 C1580.16 252.1, 1595.1 271.56, 1605.45 290.7 C1615.79 309.83, 1621.34 329.02, 1625.49 349.06 C1629.65 369.1, 1632.11 390.63, 1630.39 410.94 C1628.66 431.25, 1623.67 451.64, 1615.17 470.92 C1606.67 490.2, 1594.11 508.24, 1579.37 526.62 C1564.64 545, 1547.06 563.57, 1526.77 581.19 C1506.48 598.82, 1483.02 616.74, 1457.63 632.36 C1432.24 647.98, 1404.51 661.35, 1374.43 674.92 C1344.34 688.48, 1311.39 702.51, 1277.12 713.75 C1242.85 724.98, 1206.5 733.82, 1168.82 742.32 C1131.13 750.81, 1090.93 758.91, 1051.02 764.7 C1011.1 770.5, 970.22 774.41, 929.32 777.08 C888.42 779.75, 847.03 780.98, 805.61 780.71 C764.18 780.44, 721.88 778.79, 680.76 775.46 C639.63 772.14, 598.33 766.99, 558.84 760.76 C519.34 754.54, 480.66 747.23, 443.8 738.1 C406.95 728.97, 371.1 717.6, 337.69 705.99 C304.28 694.38, 273.02 682.12, 243.33 668.46 C213.64 654.8, 184.62 640.24, 159.54 624 C134.46 607.77, 112.16 588.73, 92.86 571.05 C73.55 553.37, 57.16 536.71, 43.73 517.92 C30.3 499.13, 19.65 478.09, 12.28 458.29 C4.91 438.5, 0.38 418.99, -0.48 399.14 C-1.34 379.29, 1.6 358.74, 7.11 339.2 C12.62 319.67, 21.25 300.81, 32.61 281.92 C43.96 263.04, 57.81 243.75, 75.24 225.91 C92.68 208.06, 114.01 191.17, 137.21 174.87 C160.4 158.57, 186.65 142.68, 214.42 128.1 C242.2 113.52, 271.87 99.83, 303.86 87.4 C335.84 74.98, 370 63.58, 406.33 53.57 C442.65 43.56, 482.82 34.78, 521.81 27.32 C560.8 19.86, 599.91 13.11, 640.27 8.81 C680.64 4.51, 743.11 1.36, 764 1.54 C784.89 1.73, 764.84 3.61, 765.62 9.92&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14234.762812153162 12379.926920734968) rotate(0 688.2341258214601 191.22265660043558)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;89.84915224799121&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;101.98541685356551px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;I have a user who want to &lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;217.3309233149481&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;101.98541685356551px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;preform action on &lt;/text&gt;&lt;text x=&quot;0&quot; y=&quot;344.812694381905&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;101.98541685356551px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;his calendar google&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13607.646043621093 13780.085942876343) rotate(443.6340755779962 508.1512743069943 14.518565639953522)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M 0,-6.50 Q 0,-6.50 5.56,-6.84 11.13,-7.19 19.06,-7.07 26.99,-6.95 38.71,-6.72 50.43,-6.49 67.93,-6.32 85.43,-6.15 108.36,-4.63 131.28,-3.11 160.44,-1.04 189.60,1.03 228.39,3.32 267.18,5.62 312.87,8.01 358.57,10.39 412.83,14.21 467.10,18.03 523.42,19.65 579.74,21.28 635.68,21.97 691.62,22.67 740.45,22.98 789.27,23.28 830.89,23.41 872.51,23.55 902.72,23.61 932.93,23.66 955.50,23.69 978.08,23.72 989.07,23.73 1000.06,23.75 1004.73,23.24 1009.40,22.73 1010.40,22.90 1011.41,23.06 1012.31,23.54 1013.21,24.02 1013.91,24.76 1014.61,25.50 1015.03,26.42 1015.46,27.35 1015.57,28.36 1015.68,29.37 1015.46,30.37 1015.24,31.36 1014.71,32.23 1014.19,33.11 1013.41,33.76 1012.63,34.42 1011.69,34.80 1010.74,35.18 1009.72,35.23 1008.71,35.28 1007.73,35.01 1006.75,34.74 1005.90,34.16 1005.06,33.59 1004.44,32.78 1003.83,31.97 1003.51,31.00 1003.18,30.04 1003.18,29.02 1003.18,28.00 1003.51,27.04 1003.84,26.07 1004.45,25.26 1005.07,24.45 1005.91,23.88 1006.76,23.31 1007.74,23.04 1008.72,22.77 1009.74,22.82 1010.75,22.88 1011.70,23.26 1012.65,23.64 1013.42,24.30 1014.20,24.96 1014.72,25.83 1015.24,26.70 1015.46,27.70 1015.68,28.69 1015.57,29.70 1015.46,30.72 1015.03,31.64 1014.60,32.56 1013.90,33.30 1013.20,34.04 1012.30,34.52 1011.40,34.99 1010.39,35.16 1009.39,35.32 1009.39,35.32 1009.39,35.32 1004.72,34.81 1000.05,34.29 989.06,34.28 978.07,34.28 955.49,34.26 932.91,34.24 902.69,34.20 872.47,34.15 830.84,34.04 789.20,33.93 740.35,33.65 691.49,33.37 635.46,32.71 579.43,32.04 522.89,30.46 466.34,28.87 412.18,25.13 358.01,21.39 312.27,19.10 266.53,16.80 227.68,14.63 188.82,12.46 159.69,10.57 130.56,8.68 107.99,7.42 85.43,6.15 67.93,6.32 50.43,6.49 38.71,6.72 26.99,6.95 19.06,7.07 11.13,7.19 5.56,6.84 0,6.50 -0.77,6.40 -1.55,6.31 -2.28,6.03 -3.02,5.75 -3.66,5.31 -4.31,4.86 -4.83,4.28 -5.35,3.69 -5.71,2.99 -6.07,2.30 -6.26,1.54 -6.45,0.78 -6.45,-0.00 -6.45,-0.78 -6.26,-1.54 -6.07,-2.30 -5.71,-2.99 -5.35,-3.69 -4.83,-4.28 -4.31,-4.86 -3.66,-5.31 -3.02,-5.75 -2.28,-6.03 -1.55,-6.31 -0.77,-6.40 0.00,-6.50 0.00,-6.50 L 0,-6.50 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14409.123841534549 14200.413111791902) rotate(443.6340755779962 -181.4827166469413 -79.85229563332086)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M -4.46,4.47 Q -4.46,4.47 -10.03,-1.08 -15.60,-6.64 -21.80,-11.62 -27.99,-16.60 -35.95,-21.45 -43.91,-26.30 -51.65,-31.31 -59.39,-36.32 -69.30,-41.08 -79.21,-45.83 -91.69,-50.64 -104.17,-55.45 -119.55,-63.21 -134.93,-70.98 -151.00,-78.38 -167.07,-85.77 -184.96,-93.07 -202.85,-100.36 -220.26,-107.67 -237.68,-114.98 -254.64,-120.81 -271.60,-126.63 -289.88,-131.88 -308.16,-137.13 -323.07,-142.20 -337.97,-147.27 -345.53,-149.25 -353.10,-151.22 -356.49,-151.67 -359.88,-152.12 -360.83,-152.56 -361.78,-153.00 -362.54,-153.72 -363.30,-154.44 -363.79,-155.37 -364.28,-156.29 -364.45,-157.33 -364.62,-158.36 -364.45,-159.40 -364.28,-160.43 -363.78,-161.36 -363.29,-162.28 -362.53,-163.00 -361.77,-163.72 -360.82,-164.16 -359.87,-164.60 -358.83,-164.71 -357.78,-164.83 -356.76,-164.60 -355.74,-164.37 -354.84,-163.83 -353.94,-163.29 -353.26,-162.49 -352.59,-161.69 -352.20,-160.72 -351.81,-159.74 -351.76,-158.70 -351.70,-157.65 -351.98,-156.64 -352.26,-155.63 -352.85,-154.77 -353.44,-153.90 -354.28,-153.26 -355.11,-152.63 -356.10,-152.30 -357.10,-151.96 -358.15,-151.96 -359.19,-151.97 -360.19,-152.30 -361.18,-152.64 -362.01,-153.27 -362.85,-153.91 -363.43,-154.77 -364.02,-155.64 -364.30,-156.65 -364.58,-157.66 -364.52,-158.71 -364.46,-159.76 -364.08,-160.73 -363.69,-161.70 -363.01,-162.50 -362.33,-163.30 -361.43,-163.84 -360.53,-164.38 -359.51,-164.60 -358.48,-164.83 -357.44,-164.71 -356.40,-164.60 -356.40,-164.60 -356.40,-164.60 -353.27,-163.23 -350.14,-161.86 -342.35,-159.56 -334.57,-157.27 -319.91,-152.28 -305.25,-147.30 -286.70,-141.98 -268.16,-136.66 -250.86,-130.73 -233.57,-124.80 -216.19,-117.53 -198.82,-110.27 -180.70,-102.91 -162.59,-95.56 -146.31,-88.12 -130.04,-80.68 -115.14,-73.20 -100.25,-65.71 -87.33,-60.82 -74.42,-55.93 -63.85,-50.96 -53.28,-45.98 -45.58,-41.20 -37.88,-36.42 -29.15,-31.33 -20.42,-26.24 -13.54,-20.92 -6.65,-15.61 -1.09,-10.04 4.46,-4.47 4.93,-3.87 5.40,-3.27 5.72,-2.57 6.03,-1.88 6.17,-1.13 6.31,-0.38 6.26,0.37 6.21,1.13 5.99,1.86 5.76,2.59 5.37,3.24 4.97,3.89 4.43,4.43 3.89,4.97 3.24,5.37 2.59,5.76 1.86,5.99 1.13,6.21 0.37,6.26 -0.38,6.31 -1.13,6.17 -1.88,6.03 -2.57,5.72 -3.27,5.40 -3.87,4.93 -4.47,4.46 -4.47,4.46 L -4.46,4.47 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(14243.974480553987 14008.097831944599) rotate(443.6340755779962 -225.03822895322264 96.79068375112729)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M 0,6.49 Q 0,6.49 -6.95,6.66 -13.91,6.82 -21.02,6.91 -28.12,7.00 -38.75,9.46 -49.37,11.91 -63.65,16.99 -77.94,22.08 -94.94,31.03 -111.94,39.98 -134.89,49.50 -157.85,59.02 -185.53,71.31 -213.22,83.61 -244.53,97.18 -275.83,110.76 -301.53,123.41 -327.24,136.07 -349.23,148.35 -371.21,160.63 -391.81,171.47 -412.40,182.31 -422.66,186.97 -432.92,191.62 -437.01,194.04 -441.09,196.45 -442.08,196.72 -443.07,196.99 -444.10,196.93 -445.12,196.87 -446.07,196.48 -447.02,196.09 -447.80,195.43 -448.57,194.76 -449.10,193.88 -449.62,192.99 -449.83,191.99 -450.05,190.99 -449.93,189.97 -449.81,188.95 -449.37,188.02 -448.94,187.10 -448.23,186.36 -447.52,185.62 -446.61,185.14 -445.70,184.67 -444.69,184.51 -443.68,184.35 -442.67,184.52 -441.65,184.70 -440.75,185.18 -439.85,185.67 -439.15,186.42 -438.45,187.17 -438.03,188.10 -437.60,189.03 -437.50,190.05 -437.39,191.07 -437.62,192.07 -437.85,193.07 -438.38,193.95 -438.92,194.82 -439.70,195.48 -440.49,196.14 -441.44,196.51 -442.40,196.88 -443.42,196.93 -444.44,196.98 -445.43,196.70 -446.42,196.42 -447.26,195.84 -448.11,195.26 -448.72,194.44 -449.34,193.62 -449.66,192.64 -449.98,191.67 -449.97,190.64 -449.96,189.62 -449.63,188.65 -449.30,187.68 -448.67,186.87 -448.04,186.06 -447.19,185.49 -446.34,184.92 -446.34,184.92 -446.34,184.92 -441.83,183.42 -437.33,181.93 -427.36,177.39 -417.39,172.84 -396.93,162.03 -376.48,151.23 -354.27,138.77 -332.06,126.31 -306.15,113.48 -280.23,100.65 -249.02,87.00 -217.80,73.36 -190.04,60.89 -162.29,48.42 -139.90,38.96 -117.52,29.50 -99.87,19.99 -82.22,10.47 -67.35,4.84 -52.48,-0.78 -40.35,-3.89 -28.22,-7.00 -21.06,-6.91 -13.91,-6.82 -6.95,-6.66 0,-6.49 0.77,-6.40 1.55,-6.30 2.28,-6.02 3.01,-5.75 3.66,-5.30 4.30,-4.86 4.82,-4.27 5.34,-3.69 5.71,-2.99 6.07,-2.30 6.26,-1.54 6.44,-0.78 6.44,0.00 6.44,0.78 6.26,1.54 6.07,2.30 5.71,2.99 5.34,3.69 4.82,4.27 4.30,4.86 3.66,5.30 3.01,5.75 2.28,6.03 1.55,6.30 0.77,6.40 -0.00,6.49 -0.00,6.49 L 0,6.49 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(13972.019189339711 11765.990708394436) rotate(0 1196.18408203125 138.00003051757903)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;194.52484301757883&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;220.8000488281258px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Telegram bot webhook&lt;/text&gt;&lt;/g&gt;&lt;g transform=&quot;translate(7791.708477645525 11835.99055580655) rotate(0 1158.3167724609375 138.00003051757903)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;194.52484301757883&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;220.8000488281258px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Client Request HTTP&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(8108.385462749227 12235.57809021799) rotate(0 343.6328110631475 415.32207403440043)&quot;&gt;&lt;path d=&quot;M687.27 415.32 C687.27 422.12, 687.13 428.92, 686.85 435.7 C686.58 442.49, 686.16 449.27, 685.61 456.03 C685.06 462.79, 684.37 469.54, 683.55 476.26 C682.72 482.98, 681.76 489.68, 680.66 496.35 C679.57 503.01, 678.33 509.65, 676.97 516.24 C675.6 522.83, 674.1 529.38, 672.47 535.88 C670.84 542.38, 669.07 548.84, 667.18 555.24 C665.28 561.64, 663.26 567.98, 661.11 574.26 C658.96 580.53, 656.68 586.75, 654.27 592.9 C651.87 599.04, 649.34 605.11, 646.69 611.1 C644.04 617.09, 641.27 623.01, 638.38 628.84 C635.49 634.67, 632.48 640.41, 629.35 646.06 C626.23 651.71, 622.99 657.27, 619.64 662.73 C616.29 668.19, 612.83 673.55, 609.26 678.8 C605.7 684.05, 602.02 689.2, 598.25 694.24 C594.47 699.27, 590.59 704.2, 586.62 709 C582.64 713.8, 578.57 718.49, 574.4 723.06 C570.24 727.62, 565.98 732.06, 561.63 736.37 C557.29 740.68, 552.85 744.87, 548.33 748.91 C543.82 752.96, 539.22 756.88, 534.54 760.65 C529.87 764.42, 525.12 768.06, 520.3 771.56 C515.47 775.05, 510.58 778.4, 505.62 781.6 C500.66 784.81, 495.64 787.86, 490.55 790.77 C485.47 793.67, 480.33 796.43, 475.14 799.03 C469.94 801.63, 464.69 804.08, 459.4 806.37 C454.11 808.65, 448.76 810.79, 443.38 812.76 C438.01 814.73, 432.58 816.55, 427.13 818.2 C421.68 819.85, 416.18 821.34, 410.67 822.66 C405.16 823.99, 399.61 825.15, 394.05 826.15 C388.49 827.15, 382.91 827.98, 377.31 828.64 C371.72 829.31, 366.11 829.81, 360.49 830.14 C354.88 830.48, 349.25 830.64, 343.63 830.64 C338.01 830.64, 332.39 830.48, 326.77 830.14 C321.16 829.81, 315.54 829.31, 309.95 828.64 C304.36 827.98, 298.77 827.15, 293.21 826.15 C287.65 825.15, 282.11 823.99, 276.59 822.66 C271.08 821.34, 265.59 819.85, 260.14 818.2 C254.68 816.55, 249.26 814.73, 243.88 812.76 C238.5 810.79, 233.16 808.65, 227.87 806.37 C222.57 804.08, 217.32 801.63, 212.13 799.03 C206.94 796.43, 201.79 793.67, 196.71 790.77 C191.63 787.86, 186.6 784.81, 181.65 781.6 C176.69 778.4, 171.79 775.05, 166.97 771.56 C162.15 768.06, 157.39 764.42, 152.72 760.65 C148.05 756.88, 143.45 752.96, 138.93 748.91 C134.42 744.87, 129.98 740.68, 125.63 736.37 C121.29 732.06, 117.03 727.62, 112.86 723.06 C108.7 718.49, 104.62 713.8, 100.65 709 C96.67 704.2, 92.79 699.27, 89.02 694.24 C85.24 689.2, 81.57 684.05, 78 678.8 C74.44 673.55, 70.97 668.19, 67.62 662.73 C64.28 657.27, 61.04 651.71, 57.91 646.06 C54.79 640.41, 51.78 634.67, 48.89 628.84 C46 623.01, 43.23 617.09, 40.58 611.1 C37.93 605.11, 35.4 599.04, 32.99 592.9 C30.59 586.75, 28.31 580.53, 26.16 574.26 C24.01 567.98, 21.98 561.64, 20.09 555.24 C18.19 548.84, 16.43 542.38, 14.8 535.88 C13.17 529.38, 11.66 522.83, 10.3 516.24 C8.93 509.65, 7.7 503.01, 6.6 496.35 C5.51 489.68, 4.54 482.98, 3.72 476.26 C2.89 469.54, 2.21 462.79, 1.65 456.03 C1.1 449.27, 0.69 442.49, 0.41 435.7 C0.14 428.92, 0 422.12, 0 415.32 C0 408.53, 0.14 401.73, 0.41 394.94 C0.69 388.16, 1.1 381.37, 1.65 374.61 C2.21 367.85, 2.89 361.1, 3.72 354.38 C4.54 347.66, 5.51 340.96, 6.6 334.3 C7.7 327.63, 8.93 321, 10.3 314.41 C11.66 307.82, 13.17 301.26, 14.8 294.76 C16.43 288.26, 18.19 281.8, 20.09 275.4 C21.98 269.01, 24.01 262.66, 26.16 256.39 C28.31 250.11, 30.59 243.89, 32.99 237.75 C35.4 231.61, 37.93 225.53, 40.58 219.54 C43.23 213.55, 46 207.63, 48.89 201.8 C51.78 195.98, 54.79 190.23, 57.91 184.58 C61.04 178.93, 64.28 173.37, 67.62 167.92 C70.97 162.46, 74.44 157.1, 78 151.84 C81.57 146.59, 85.24 141.44, 89.02 136.41 C92.79 131.38, 96.67 126.45, 100.65 121.65 C104.62 116.84, 108.7 112.15, 112.86 107.59 C117.03 103.03, 121.29 98.58, 125.63 94.27 C129.98 89.96, 134.42 85.78, 138.93 81.73 C143.45 77.69, 148.05 73.77, 152.72 69.99 C157.39 66.22, 162.15 62.58, 166.97 59.09 C171.79 55.6, 176.69 52.24, 181.65 49.04 C186.6 45.84, 191.63 42.78, 196.71 39.88 C201.79 36.97, 206.94 34.21, 212.13 31.61 C217.32 29.01, 222.57 26.57, 227.87 24.28 C233.16 21.99, 238.5 19.86, 243.88 17.88 C249.26 15.91, 254.68 14.1, 260.14 12.45 C265.59 10.8, 271.08 9.31, 276.59 7.98 C282.11 6.66, 287.65 5.49, 293.21 4.5 C298.77 3.5, 304.36 2.67, 309.95 2 C315.54 1.33, 321.16 0.83, 326.77 0.5 C332.39 0.17, 338.01 0, 343.63 0 C349.25 0, 354.88 0.17, 360.49 0.5 C366.11 0.83, 371.72 1.33, 377.31 2 C382.91 2.67, 388.49 3.5, 394.05 4.5 C399.61 5.49, 405.16 6.66, 410.67 7.98 C416.18 9.31, 421.68 10.8, 427.13 12.45 C432.58 14.1, 438.01 15.91, 443.38 17.88 C448.76 19.86, 454.11 21.99, 459.4 24.28 C464.69 26.57, 469.94 29.01, 475.14 31.61 C480.33 34.21, 485.47 36.97, 490.55 39.88 C495.64 42.78, 500.66 45.84, 505.62 49.04 C510.58 52.24, 515.47 55.6, 520.3 59.09 C525.12 62.58, 529.87 66.22, 534.54 69.99 C539.22 73.77, 543.82 77.69, 548.33 81.73 C552.85 85.78, 557.29 89.96, 561.63 94.27 C565.98 98.58, 570.24 103.03, 574.4 107.59 C578.57 112.15, 582.64 116.84, 586.62 121.65 C590.59 126.45, 594.47 131.38, 598.25 136.41 C602.02 141.44, 605.7 146.59, 609.26 151.84 C612.83 157.1, 616.29 162.46, 619.64 167.92 C622.99 173.37, 626.23 178.93, 629.35 184.58 C632.48 190.23, 635.49 195.98, 638.38 201.8 C641.27 207.63, 644.04 213.55, 646.69 219.54 C649.34 225.53, 651.87 231.61, 654.27 237.75 C656.68 243.89, 658.96 250.11, 661.11 256.39 C663.26 262.66, 665.28 269.01, 667.18 275.4 C669.07 281.8, 670.84 288.26, 672.47 294.76 C674.1 301.26, 675.6 307.82, 676.97 314.41 C678.33 321, 679.57 327.63, 680.66 334.3 C681.76 340.96, 682.72 347.66, 683.55 354.38 C684.37 361.1, 685.06 367.85, 685.61 374.61 C686.16 381.37, 686.58 388.16, 686.85 394.94 C687.13 401.73, 687.2 411.93, 687.27 415.32 C687.33 418.72, 687.33 411.93, 687.27 415.32&quot; stroke=&quot;transparent&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(8157.54188695668 12728.112615366219) rotate(0 287.31456757485284 125.59266323816973)&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;path d=&quot;M0 0 L1.24 102.36 L441.64 322.85 L569.2 232.54 L574.63 133.59 L147.51 -71.66 L0 0&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#ced4da&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M0 0 C0.28 23.2, 0.56 46.4, 1.24 102.36 M0 0 C0.25 20.74, 0.5 41.49, 1.24 102.36 M1.24 102.36 C177.08 190.4, 352.93 278.43, 441.64 322.85 M1.24 102.36 C108.13 155.87, 215.01 209.39, 441.64 322.85 M441.64 322.85 C469.85 302.87, 498.06 282.9, 569.2 232.54 M441.64 322.85 C478.09 297.04, 514.53 271.24, 569.2 232.54 M569.2 232.54 C570.78 203.77, 572.36 175, 574.63 133.59 M569.2 232.54 C571.24 195.38, 573.28 158.23, 574.63 133.59 M574.63 133.59 C422.14 60.31, 269.65 -12.97, 147.51 -71.66 M574.63 133.59 C415.47 57.1, 256.3 -19.38, 147.51 -71.66 M147.51 -71.66 C101.77 -49.44, 56.03 -27.22, 0 0 M147.51 -71.66 C101.23 -49.18, 54.94 -26.69, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(8168.043331554763 12731.372921502032) rotate(0 278.2822089630772 110.71440638021886)&quot;&gt;&lt;path d=&quot;M0 0 C108.37 56.57, 216.74 113.14, 424.19 221.43 M0 0 C147.24 76.86, 294.48 153.72, 424.19 221.43 M424.19 221.43 C467.75 191.01, 511.3 160.59, 556.56 128.97 M424.19 221.43 C464.86 193.03, 505.52 164.62, 556.56 128.97&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(8597.294792993882 13047.304223763813) rotate(0 -0.9630760511317931 -43.625509242459884)&quot;&gt;&lt;path d=&quot;M0 0 C-0.75 -33.8, -1.49 -67.59, -1.93 -87.25 M0 0 C-0.41 -18.62, -0.82 -37.24, -1.93 -87.25&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(8341.818826524497 12284.233229359976) rotate(0 208.02384809532123 277.2323948008552)&quot;&gt;&lt;path d=&quot;M0 0 C31.31 4.18, 123.64 1.98, 187.87 25.09 C252.11 48.2, 347.36 90.74, 385.39 138.66 C423.41 186.57, 413.41 259.39, 416.05 312.59 C418.69 365.79, 419.09 417.55, 401.23 457.86 C383.38 498.17, 338.32 546.35, 308.93 554.46 C279.54 562.57, 274.3 563.07, 224.91 506.52 C175.52 449.98, 49.62 293.78, 12.58 215.19 C-24.45 136.6, 4.35 65, 2.71 34.96 M0 0 C31.31 4.18, 123.64 1.98, 187.87 25.09 C252.11 48.2, 347.36 90.74, 385.39 138.66 C423.41 186.57, 413.41 259.39, 416.05 312.59 C418.69 365.79, 419.09 417.55, 401.23 457.86 C383.38 498.17, 338.32 546.35, 308.93 554.46 C279.54 562.57, 274.3 563.07, 224.91 506.52 C175.52 449.98, 49.62 293.78, 12.58 215.19 C-24.45 136.6, 4.35 65, 2.71 34.96&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(8196.305462723027 12563.307385448717) rotate(0 254.57169902746318 12.005669394862707)&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;path d=&quot;M0 0 C7.81 24.92, -19.56 98.27, 46.84 149.49 C113.23 200.71, 322.01 296.92, 398.38 307.33 C474.74 317.73, 486.58 277.36, 505.04 211.91 C523.5 146.46, 524.94 -19.74, 509.14 -85.36 C493.35 -150.98, 470.99 -148.81, 410.29 -181.81 C349.58 -214.8, 210.04 -275.32, 144.92 -283.32 C79.8 -291.31, 43.74 -277.01, 19.58 -229.79 C-4.57 -182.57, 3.26 -38.3, 0 0&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#ced4da&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M0 0 C7.81 24.92, -19.56 98.27, 46.84 149.49 C113.23 200.71, 322.01 296.92, 398.38 307.33 C474.74 317.73, 486.58 277.36, 505.04 211.91 C523.5 146.46, 524.94 -19.74, 509.14 -85.36 C493.35 -150.98, 470.99 -148.81, 410.29 -181.81 C349.58 -214.8, 210.04 -275.32, 144.92 -283.32 C79.8 -291.31, 43.74 -277.01, 19.58 -229.79 C-4.57 -182.57, 3.26 -38.3, 0 0 M0 0 C7.81 24.92, -19.56 98.27, 46.84 149.49 C113.23 200.71, 322.01 296.92, 398.38 307.33 C474.74 317.73, 486.58 277.36, 505.04 211.91 C523.5 146.46, 524.94 -19.74, 509.14 -85.36 C493.35 -150.98, 470.99 -148.81, 410.29 -181.81 C349.58 -214.8, 210.04 -275.32, 144.92 -283.32 C79.8 -291.31, 43.74 -277.01, 19.58 -229.79 C-4.57 -182.57, 3.26 -38.3, 0 0&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(8230.869915277914 12558.469194207952) rotate(0 216.02782846804985 9.052594716746171)&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;path d=&quot;M0 0 C6.56 20.94, -13.67 82.94, 39.37 125.64 C92.4 168.34, 252.99 243.32, 318.21 256.22 C383.43 269.11, 411.71 254.89, 430.68 203 C449.66 151.11, 446.37 4.16, 432.06 -55.14 C417.75 -114.44, 396.53 -122.3, 344.82 -152.8 C293.11 -183.29, 176.53 -231.39, 121.8 -238.11 C67.07 -244.83, 36.76 -232.81, 16.46 -193.12 C-3.84 -153.44, 2.74 -32.19, 0 0&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#343a40&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M0 0 C6.56 20.94, -13.67 82.94, 39.37 125.64 C92.4 168.34, 252.99 243.32, 318.21 256.22 C383.43 269.11, 411.71 254.89, 430.68 203 C449.66 151.11, 446.37 4.16, 432.06 -55.14 C417.75 -114.44, 396.53 -122.3, 344.82 -152.8 C293.11 -183.29, 176.53 -231.39, 121.8 -238.11 C67.07 -244.83, 36.76 -232.81, 16.46 -193.12 C-3.84 -153.44, 2.74 -32.19, 0 0 M0 0 C6.56 20.94, -13.67 82.94, 39.37 125.64 C92.4 168.34, 252.99 243.32, 318.21 256.22 C383.43 269.11, 411.71 254.89, 430.68 203 C449.66 151.11, 446.37 4.16, 432.06 -55.14 C417.75 -114.44, 396.53 -122.3, 344.82 -152.8 C293.11 -183.29, 176.53 -231.39, 121.8 -238.11 C67.07 -244.83, 36.76 -232.81, 16.46 -193.12 C-3.84 -153.44, 2.74 -32.19, 0 0&quot; stroke=&quot;#495057&quot; stroke-width=&quot;2&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g stroke-linecap=&quot;round&quot;&gt;&lt;g transform=&quot;translate(8472.831975180992 12930.546673335262) rotate(0 43.75420779765864 33.695769223482785)&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;path d=&quot;M0 0 L87.16 43.81 L87.51 67.39 L1.66 25.7 L0 0&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#495057&quot; fill-rule=&quot;evenodd&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M0 0 C18.52 9.31, 37.04 18.62, 87.16 43.81 M0 0 C26.35 13.24, 52.69 26.48, 87.16 43.81 M87.16 43.81 C87.27 51.53, 87.39 59.25, 87.51 67.39 M87.16 43.81 C87.27 51.38, 87.38 58.95, 87.51 67.39 M87.51 67.39 C54.85 51.53, 22.2 35.67, 1.66 25.7 M87.51 67.39 C67.33 57.59, 47.16 47.8, 1.66 25.7 M1.66 25.7 C1.27 19.68, 0.88 13.65, 0 0 M1.66 25.7 C1.09 16.82, 0.51 7.94, 0 0 M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0&quot; stroke=&quot;#495057&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/g&gt;&lt;mask&gt;&lt;/mask&gt;&lt;g transform=&quot;translate(1754.459527474477 11878.875050259785) rotate(0 1011.2639770507812 138.00003051757903)&quot;&gt;&lt;text x=&quot;0&quot; y=&quot;194.52484301757883&quot; font-family=&quot;Excalifont, Xiaolai, sans-serif, Segoe UI Emoji&quot; font-size=&quot;220.8000488281258px&quot; fill=&quot;#1e1e1e&quot; text-anchor=&quot;start&quot; style=&quot;white-space: pre;&quot; direction=&quot;ltr&quot; dominant-baseline=&quot;alphabetic&quot;&gt;Whatsapp webhook&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(2264.609778259737 12314.122754513404) rotate(0 403.4080988241217 616.9588054015203)&quot;&gt;&lt;path d=&quot;M-0.81 -0.29 L808.21 -1.61 L808.3 1235.85 L1.83 1232.06&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#ced4da&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M0 0 C223.96 3.16, 448.63 2.99, 806.82 0 M0 0 C237.53 -0.54, 475.18 -0.84, 806.82 0 M806.82 0 C807.46 340.51, 808.28 682.41, 806.82 1233.92 M806.82 0 C804.96 352.58, 804.61 706.12, 806.82 1233.92 M806.82 1233.92 C621.82 1236.38, 435.69 1236.16, 0 1233.92 M806.82 1233.92 C553.8 1236.83, 300.43 1236.47, 0 1233.92 M0 1233.92 C5.19 764.83, 3.93 294.43, 0 0 M0 1233.92 C2.64 887.66, 2.49 541.29, 0 0&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(2356.981363450758 12408.197343579628) rotate(0 317.87309168968386 471.85960022907693)&quot;&gt;&lt;path d=&quot;M1.39 -1.61 L637.23 1.93 L637.57 941.86 L2 945.46&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#fff&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M0 0 C132.88 -0.69, 266.26 -1.25, 635.75 0 M0 0 C200.15 0.05, 400 0.54, 635.75 0 M635.75 0 C632.31 366.81, 632.13 732.01, 635.75 943.72 M635.75 0 C636.65 343.29, 636.6 685.9, 635.75 943.72 M635.75 943.72 C402.21 944.82, 169.97 944.63, 0 943.72 M635.75 943.72 C387.77 943.28, 139.58 943.29, 0 943.72 M0 943.72 C-4.1 714.09, -3.76 484.94, 0 0 M0 943.72 C1.24 639.85, 1.39 336.21, 0 0&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(2609.755494508121 13392.303747378031) rotate(0 65.09896063232668 65.09896063232645)&quot;&gt;&lt;path d=&quot;M72.04 -0.28 C81.7 -0.16, 94.32 5.86, 102.87 11.6 C111.42 17.34, 118.61 25.18, 123.32 34.15 C128.02 43.11, 131.26 55.32, 131.11 65.38 C130.96 75.44, 127.1 85.71, 122.43 94.52 C117.76 103.34, 111.49 112.35, 103.11 118.25 C94.73 124.15, 82.42 128.72, 72.12 129.93 C61.82 131.13, 50.71 129.2, 41.32 125.49 C31.92 121.77, 22.15 115.16, 15.75 107.66 C9.34 100.16, 5.32 90.09, 2.89 80.47 C0.45 70.84, -1.03 59.79, 1.13 49.91 C3.29 40.04, 9.17 28.73, 15.87 21.21 C22.57 13.69, 31.64 8.36, 41.34 4.79 C51.05 1.22, 68.13 0.21, 74.12 -0.21 C80.1 -0.62, 77.14 1.17, 77.24 2.31 M74.49 1.86 C84.06 2.07, 94.18 5.85, 102.48 11.28 C110.77 16.71, 119.8 25.59, 124.26 34.45 C128.72 43.32, 129.65 54.34, 129.23 64.48 C128.81 74.62, 126.12 86.29, 121.74 95.28 C117.36 104.27, 111.33 112.56, 102.95 118.43 C94.57 124.31, 81.5 129.17, 71.45 130.55 C61.39 131.94, 52.01 130.68, 42.63 126.76 C33.24 122.84, 21.95 114.78, 15.14 107.03 C8.34 99.28, 3.96 90.08, 1.78 80.25 C-0.4 70.43, -0.31 57.67, 2.08 48.08 C4.46 38.48, 9.38 30.04, 16.09 22.71 C22.8 15.37, 33 7.75, 42.33 4.05 C51.65 0.36, 66.72 0.7, 72.05 0.54 C77.38 0.39, 74.33 1.97, 74.3 3.13&quot; stroke=&quot;none&quot; stroke-width=&quot;0&quot; fill=&quot;#fff&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M44.99 3.4 C53.63 -0.49, 65.3 -1.11, 75.31 0.72 C85.32 2.55, 97.05 8.26, 105.05 14.36 C113.05 20.47, 119.09 28.22, 123.28 37.36 C127.48 46.51, 130.59 59.15, 130.2 69.23 C129.82 79.31, 126.03 89.26, 120.98 97.86 C115.93 106.45, 108.61 115.53, 99.93 120.79 C91.24 126.06, 78.88 128.93, 68.86 129.47 C58.84 130, 48.9 127.85, 39.81 124 C30.71 120.16, 20.66 114.08, 14.28 106.39 C7.89 98.69, 3.55 87.82, 1.51 77.82 C-0.53 67.83, -0.84 56.17, 2.03 46.43 C4.91 36.69, 10.44 26.73, 18.78 19.37 C27.12 12.02, 45.62 5.11, 52.06 2.29 C58.5 -0.53, 57.48 1.38, 57.41 2.44 M37.64 5.51 C45.85 0.2, 56.66 -0.81, 66.46 -0.25 C76.27 0.31, 87.66 3.83, 96.47 8.86 C105.28 13.9, 113.92 21.6, 119.3 29.94 C124.68 38.29, 127.9 48.92, 128.77 58.94 C129.64 68.95, 128.06 80.86, 124.53 90.06 C121 99.25, 115.09 107.38, 107.6 114.08 C100.11 120.78, 89.41 128.21, 79.6 130.26 C69.78 132.3, 58.35 129.11, 48.72 126.34 C39.08 123.57, 29.3 120.07, 21.77 113.61 C14.24 107.15, 7.03 97.27, 3.54 87.56 C0.05 77.85, -0.85 65.75, 0.81 55.36 C2.48 44.96, 7.48 33.43, 13.52 25.22 C19.56 17, 33.14 9.04, 37.04 6.06 C40.95 3.09, 36.67 6.5, 36.94 7.36&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(2451.312399541602 12528.32758709307) rotate(0 223.54205559885122 113.30094018619911)&quot;&gt;&lt;path d=&quot;M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.15 5.59, 2.57 3.04, 4.99 0.36 M-0.26 6.4 C1.11 4.77, 2.42 3.81, 4.99 0.36 M0.13 12.04 C2.4 7.32, 6.16 4.31, 10.63 -0.03 M0.13 12.04 C3.62 8.88, 4.86 6.35, 10.63 -0.03 M-0.13 18.44 C5.08 12.63, 6.13 10.99, 15.62 0.33 M-0.13 18.44 C4.67 13.51, 8.97 8.6, 15.62 0.33 M0.27 24.08 C10.37 13.98, 15.36 4.21, 21.26 -0.07 M0.27 24.08 C5.07 17.3, 10.83 12.96, 21.26 -0.07 M0 30.48 C9.49 19.55, 19.15 7.42, 26.25 0.29 M0 30.48 C6.94 21.47, 14.25 14.8, 26.25 0.29 M-0.26 36.88 C12.95 22.25, 26.34 7.6, 31.89 -0.1 M-0.26 36.88 C6.52 29.59, 14.48 21.52, 31.89 -0.1 M0.14 42.52 C10.97 31.23, 20.43 19.87, 36.88 0.26 M0.14 42.52 C10.09 30.85, 19.46 19.58, 36.88 0.26 M-0.12 48.92 C10.12 36.54, 22.61 21.5, 42.52 -0.14 M-0.12 48.92 C17.01 30.11, 32.51 10.8, 42.52 -0.14 M0.27 54.56 C10.9 42.58, 21.29 25.92, 47.51 0.22 M0.27 54.56 C18.99 34.29, 35.21 14.33, 47.51 0.22 M0.01 60.96 C21.38 37.37, 37.8 15.43, 53.15 -0.17 M0.01 60.96 C13.14 44.48, 27.37 28.72, 53.15 -0.17 M-0.25 67.36 C23.41 39.72, 45.32 13.86, 58.14 0.19 M-0.25 67.36 C14.5 48.93, 31.13 31.18, 58.14 0.19 M0.14 73 C16.17 56.07, 27.43 39.39, 63.78 -0.21 M0.14 73 C18.67 52.24, 36.16 32.19, 63.78 -0.21 M-0.12 79.4 C26.97 52.45, 50.56 22.21, 68.77 0.15 M-0.12 79.4 C26.79 47.3, 56 15.84, 68.77 0.15 M0.28 85.04 C18.88 61.78, 38.56 41.42, 74.41 -0.24 M0.28 85.04 C17.08 66.93, 31.69 48.64, 74.41 -0.24 M0.01 91.44 C28.48 62.07, 53.36 30.73, 79.4 0.12 M0.01 91.44 C28.35 60.14, 54.45 28.17, 79.4 0.12 M-0.25 97.84 C24.6 66.79, 50.46 39.93, 85.04 -0.28 M-0.25 97.84 C27.2 66.53, 52.13 35.26, 85.04 -0.28 M0.15 103.48 C33.21 68.11, 64.11 30.59, 90.03 0.08 M0.15 103.48 C27.08 74.65, 53.47 43.89, 90.03 0.08 M-0.11 109.88 C31.52 72.36, 65.76 33.56, 95.67 -0.31 M-0.11 109.88 C36.63 66.54, 74.6 23.31, 95.67 -0.31 M0.28 115.52 C38.18 68.96, 79.28 25.86, 100.66 0.05 M0.28 115.52 C38.1 72.24, 74.66 31.63, 100.66 0.05 M0.02 121.92 C33.21 81.19, 66.89 42.04, 106.3 -0.34 M0.02 121.92 C34.59 79.51, 71.13 39.87, 106.3 -0.34 M-0.24 128.32 C35.4 86.47, 67.64 49.12, 111.29 0.02 M-0.24 128.32 C31.83 91.3, 64.78 54.71, 111.29 0.02 M0.15 133.96 C36.11 92.16, 76.8 48.06, 116.27 0.38 M0.15 133.96 C45.6 82.78, 90.08 32.12, 116.27 0.38 M-0.11 140.36 C41.12 91.88, 83.84 43.2, 121.92 -0.02 M-0.11 140.36 C34.53 99.09, 70.81 57.36, 121.92 -0.02 M0.29 146 C27.87 114.65, 55.84 79.71, 126.91 0.34 M0.29 146 C34.98 108.46, 69.64 69.49, 126.91 0.34 M0.02 152.4 C42.62 101.12, 86.97 51.43, 132.55 -0.05 M0.02 152.4 C33.99 111.75, 69.09 70.85, 132.55 -0.05 M-0.24 158.8 C28.82 128.73, 54.89 96.69, 137.54 0.31 M-0.24 158.8 C36.6 117.08, 73.37 75.09, 137.54 0.31 M0.16 164.44 C46.36 110.48, 92.98 57.73, 143.18 -0.09 M0.16 164.44 C53.86 101.6, 106.67 41.51, 143.18 -0.09 M-0.1 170.84 C37.66 127.84, 74.6 83.16, 148.17 0.27 M-0.1 170.84 C48.72 117.2, 95.76 61.57, 148.17 0.27 M0.29 176.48 C61.04 105.96, 123.05 38.24, 153.81 -0.12 M0.29 176.48 C33.55 138.79, 65.91 101.15, 153.81 -0.12 M0.03 182.88 C44.84 133.16, 90.62 81.8, 158.8 0.24 M0.03 182.88 C59.52 116.37, 116.98 50.58, 158.8 0.24 M-0.23 189.27 C62.24 118.08, 126.97 43.66, 164.44 -0.16 M-0.23 189.27 C49.86 133.15, 98.15 76.57, 164.44 -0.16 M0.16 194.92 C66.27 118.61, 132.65 41.04, 169.43 0.2 M0.16 194.92 C63.41 122.55, 127.35 49.02, 169.43 0.2 M-0.1 201.32 C34.12 157.96, 70.04 118.07, 175.07 -0.19 M-0.1 201.32 C63.79 126.81, 127.94 53.28, 175.07 -0.19 M0.3 206.96 C37.77 164.6, 73.96 121.56, 180.06 0.17 M0.3 206.96 C55.09 144.77, 110.68 81.03, 180.06 0.17 M0.03 213.36 C53.65 149.43, 111.16 82.68, 185.7 -0.23 M0.03 213.36 C48.14 157.68, 97.12 100.77, 185.7 -0.23 M-0.23 219.75 C68.31 144.4, 134.12 67.23, 190.69 0.13 M-0.23 219.75 C72.45 134.29, 144.41 50.32, 190.69 0.13 M0.17 225.4 C78.86 133.68, 155.33 42.98, 196.33 -0.26 M0.17 225.4 C49.36 167.66, 99.39 109.3, 196.33 -0.26 M2.53 228.78 C74.26 148.23, 143.16 68.26, 201.32 0.1 M2.53 228.78 C77.58 141.56, 154.78 54.69, 201.32 0.1 M7.52 229.14 C81.62 142.9, 155.16 58.42, 206.96 -0.3 M7.52 229.14 C71.48 152.36, 137.49 78.64, 206.96 -0.3 M13.16 228.74 C85.06 146.34, 153.58 66.25, 211.95 0.06 M13.16 228.74 C84.47 144.01, 158.07 58.84, 211.95 0.06 M18.15 229.1 C87.78 151.78, 155.44 72.9, 217.59 -0.33 M18.15 229.1 C73.63 164.25, 128.56 101.28, 217.59 -0.33 M23.79 228.71 C64.94 184, 108.23 135.85, 222.58 0.03 M23.79 228.71 C95.04 147.05, 166.65 64.94, 222.58 0.03 M28.78 229.07 C71.11 179.22, 114.15 130.96, 228.22 -0.36 M28.78 229.07 C72.35 178.84, 117.12 127.94, 228.22 -0.36 M34.42 228.67 C106.64 146.42, 176.86 63.79, 233.21 0 M34.42 228.67 C82.63 173.12, 130.1 119.14, 233.21 0 M39.41 229.03 C105.27 153.72, 170.94 79.83, 238.19 0.36 M39.41 229.03 C99.97 162.09, 159.67 93.03, 238.19 0.36 M45.05 228.64 C121.67 142.38, 197.54 54.96, 243.84 -0.04 M45.05 228.64 C100.3 165.28, 154.75 103.15, 243.84 -0.04 M50.04 229 C125.6 138.12, 203.3 49.86, 248.82 0.32 M50.04 229 C122 147.69, 194.03 64.79, 248.82 0.32 M55.68 228.6 C105.57 172.23, 156.72 114.73, 254.47 -0.07 M55.68 228.6 C129.75 142.21, 204.66 56.55, 254.47 -0.07 M60.67 228.96 C130.59 147.54, 200.59 67.36, 259.45 0.29 M60.67 228.96 C115.61 165.77, 170.88 101.85, 259.45 0.29 M66.31 228.57 C112.44 176.76, 158.4 120.73, 265.1 -0.11 M66.31 228.57 C113.11 174.62, 160.61 118.77, 265.1 -0.11 M71.3 228.93 C142.31 145.66, 213.81 64.35, 270.08 0.25 M71.3 228.93 C117.45 178.7, 163.2 125.66, 270.08 0.25 M76.94 228.53 C123.47 177.04, 168.1 122.69, 275.73 -0.14 M76.94 228.53 C123.28 175.82, 167.83 124.01, 275.73 -0.14 M81.93 228.89 C155.13 145.31, 227.09 59.62, 280.71 0.22 M81.93 228.89 C127.77 176.02, 172.35 125.56, 280.71 0.22 M87.57 228.5 C134.91 174.54, 179.83 125.4, 286.36 -0.18 M87.57 228.5 C139.05 171.36, 189.65 112.18, 286.36 -0.18 M92.56 228.86 C159.18 153.76, 224.3 78.26, 291.34 0.18 M92.56 228.86 C169.3 139.94, 245.08 52.76, 291.34 0.18 M98.2 228.47 C145.47 176.96, 189.39 125.7, 296.99 -0.21 M98.2 228.47 C163.61 155, 228.17 80.81, 296.99 -0.21 M103.19 228.83 C150 175.95, 195.29 123.21, 301.97 0.15 M103.19 228.83 C151.76 172.74, 198.92 116.55, 301.97 0.15 M108.83 228.43 C175.97 149.17, 245.62 69.71, 307.62 -0.25 M108.83 228.43 C185.99 139.87, 264.5 50.26, 307.62 -0.25 M113.82 228.79 C159.06 177.09, 206.68 123.81, 312.6 0.11 M113.82 228.79 C165.36 169.05, 216.76 109.18, 312.6 0.11 M118.8 229.15 C179.72 160.06, 241.14 90.46, 318.25 -0.28 M118.8 229.15 C172.29 166.57, 227.28 103.32, 318.25 -0.28 M124.45 228.76 C189.72 154.18, 254.89 78.8, 323.23 0.08 M124.45 228.76 C186.87 158.08, 247.45 88.22, 323.23 0.08 M129.43 229.12 C193.46 157.17, 256.06 83.41, 328.88 -0.31 M129.43 229.12 C205.2 143.12, 279.53 56.96, 328.88 -0.31 M135.08 228.72 C195.91 158.88, 256.95 90.4, 333.86 0.05 M135.08 228.72 C207.86 144.28, 281.96 58.61, 333.86 0.05 M140.06 229.08 C185 175.79, 230.58 123.12, 339.51 -0.35 M140.06 229.08 C211.57 149.39, 279.75 69.08, 339.51 -0.35 M145.71 228.69 C218.59 143.23, 291.2 58.71, 344.49 0.01 M145.71 228.69 C197.83 170.91, 249.57 110.58, 344.49 0.01 M150.69 229.05 C227.63 142.44, 303.21 55.76, 349.48 0.37 M150.69 229.05 C195.12 178.07, 240.2 125.49, 349.48 0.37 M156.34 228.65 C219.94 153.88, 284.57 81.73, 355.12 -0.02 M156.34 228.65 C213.96 160.65, 274.03 91.54, 355.12 -0.02 M161.33 229.01 C225.84 155.08, 290.11 81.97, 360.11 0.34 M161.33 229.01 C220.97 161.06, 281.96 89.84, 360.11 0.34 M166.97 228.62 C245.4 137.86, 324.44 46.6, 365.75 -0.06 M166.97 228.62 C213.28 178.01, 258.4 125.86, 365.75 -0.06 M171.96 228.98 C234.29 158.27, 295.71 86.82, 370.74 0.3 M171.96 228.98 C221.59 173.05, 269.62 115.87, 370.74 0.3 M177.6 228.58 C254.98 139.66, 331.39 49.97, 376.38 -0.09 M177.6 228.58 C239.04 159.72, 300.17 90.71, 376.38 -0.09 M182.59 228.94 C224.06 182.4, 263.77 135.88, 381.37 0.27 M182.59 228.94 C257.07 144.13, 332.22 58.79, 381.37 0.27 M188.23 228.55 C260.53 144.12, 332.77 63.32, 387.01 -0.13 M188.23 228.55 C229.17 182.88, 269.52 135.84, 387.01 -0.13 M193.22 228.91 C269.11 141.06, 348.46 52.28, 392 0.23 M193.22 228.91 C269.94 140.64, 347.78 50.76, 392 0.23 M198.86 228.52 C265.05 153.7, 330.63 78.87, 397.64 -0.16 M198.86 228.52 C262.74 155.39, 325.75 81.1, 397.64 -0.16 M203.85 228.88 C248.76 176.86, 298.21 120.17, 402.63 0.2 M203.85 228.88 C253.93 170.22, 305.58 110.33, 402.63 0.2 M209.49 228.48 C282.37 148.23, 355.96 63.86, 408.27 -0.2 M209.49 228.48 C262.28 166.96, 315.7 106, 408.27 -0.2 M214.48 228.84 C264.04 175.48, 309.95 118.56, 413.26 0.16 M214.48 228.84 C276.25 161.14, 336.65 90.17, 413.26 0.16 M220.12 228.45 C277.34 162.13, 334.55 94.84, 418.9 -0.23 M220.12 228.45 C290.66 143.86, 362.89 61.58, 418.9 -0.23 M225.11 228.81 C283.37 160.2, 342.66 89.98, 423.89 0.13 M225.11 228.81 C289.24 154.33, 355.19 77.81, 423.89 0.13 M230.09 229.17 C271.08 182.44, 312.27 135.25, 429.53 -0.26 M230.09 229.17 C302.52 147.48, 373.88 65.89, 429.53 -0.26 M235.74 228.77 C279.17 180.44, 321.33 132.21, 434.52 0.1 M235.74 228.77 C295.22 158.51, 355.37 89.25, 434.52 0.1 M240.72 229.13 C311.07 148.71, 381.47 67.53, 440.16 -0.3 M240.72 229.13 C303.04 158.59, 364.89 86.47, 440.16 -0.3 M246.37 228.74 C323.93 140.11, 401.31 49.05, 445.15 0.06 M246.37 228.74 C298.36 170.91, 349.13 112.55, 445.15 0.06 M251.35 229.1 C295.87 178.02, 341.29 124.04, 448.83 1.93 M251.35 229.1 C310.03 160.3, 370.86 92.36, 448.83 1.93 M257 228.7 C326.91 146.26, 398.65 65.15, 449.22 7.57 M257 228.7 C328.46 144.94, 402.95 59.85, 449.22 7.57 M261.98 229.06 C318.04 163.01, 377.4 97.63, 448.96 13.97 M261.98 229.06 C323.13 158.27, 383.91 88, 448.96 13.97 M267.63 228.67 C311.06 177.67, 358.15 122.27, 449.35 19.61 M267.63 228.67 C331.08 153.69, 395.23 80.67, 449.35 19.61 M272.61 229.03 C327.77 170.8, 379.52 109.78, 449.09 26.01 M272.61 229.03 C341.9 148.45, 411.54 66.06, 449.09 26.01 M278.26 228.63 C329.45 170.56, 380.27 112.57, 448.83 32.41 M278.26 228.63 C313.83 189.72, 348.39 150.5, 448.83 32.41 M283.24 228.99 C332.27 174.76, 378.47 121.01, 449.23 38.05 M283.24 228.99 C325.15 183.46, 365.68 135.83, 449.23 38.05 M288.89 228.6 C342.78 168.74, 393.8 107.81, 448.96 44.45 M288.89 228.6 C324.94 185.52, 361.48 144.24, 448.96 44.45 M293.87 228.96 C354.48 158.72, 415.17 88.86, 449.36 50.09 M293.87 228.96 C328.5 189.97, 363.46 151.35, 449.36 50.09 M299.52 228.57 C347.13 172.69, 395.99 115.86, 449.1 56.49 M299.52 228.57 C344.29 174.86, 389.83 121.81, 449.1 56.49 M304.5 228.93 C351.24 177.55, 398.27 121.28, 448.84 62.89 M304.5 228.93 C358.51 167.62, 413.33 103.98, 448.84 62.89 M310.15 228.53 C340.38 191.91, 370.02 159.48, 449.23 68.53 M310.15 228.53 C360.22 170.2, 410.31 111.55, 449.23 68.53 M315.13 228.89 C342.79 195.26, 375.94 158.37, 448.97 74.93 M315.13 228.89 C344.56 197.2, 372.56 165.85, 448.97 74.93 M320.78 228.5 C358.47 186.22, 392 142.67, 448.71 81.33 M320.78 228.5 C360.56 183.04, 400.62 138.39, 448.71 81.33 M325.76 228.86 C350.4 199.23, 379.02 170.45, 449.1 86.97 M325.76 228.86 C363.2 186.25, 401.01 142.77, 449.1 86.97 M331.41 228.46 C353.41 199.91, 379.97 174.64, 448.84 93.37 M331.41 228.46 C368.6 186.64, 406.12 143.57, 448.84 93.37 M336.39 228.82 C362.96 197.98, 392.82 167.14, 449.24 99.01 M336.39 228.82 C368.32 191.64, 401.23 153.71, 449.24 99.01 M342.04 228.43 C379.43 183.44, 415.86 140.8, 448.97 105.41 M342.04 228.43 C375.99 190.76, 408.92 152.93, 448.97 105.41 M347.02 228.79 C371.61 198.98, 396.15 171.02, 448.71 111.81 M347.02 228.79 C375.92 193.04, 406.36 160.14, 448.71 111.81 M352.01 229.15 C382.29 193.71, 418 153.71, 449.11 117.45 M352.01 229.15 C380.34 194.73, 408.24 161.45, 449.11 117.45 M357.65 228.75 C396.15 186.22, 432.37 145.07, 448.85 123.85 M357.65 228.75 C381.42 200.7, 404.61 173.57, 448.85 123.85 M362.64 229.11 C380.63 204.94, 402.79 185.07, 449.24 129.49 M362.64 229.11 C383.79 202.79, 407.71 177.69, 449.24 129.49 M368.28 228.72 C389.99 206.14, 407.48 182.74, 448.98 135.89 M368.28 228.72 C388.84 203.01, 411.29 179.56, 448.98 135.89 M373.27 229.08 C400.14 196.63, 426.89 168.78, 448.72 142.29 M373.27 229.08 C391.66 209.84, 408.37 189.56, 448.72 142.29 M378.91 228.68 C406.61 198.31, 430.31 169.71, 449.11 147.93 M378.91 228.68 C406.43 196.77, 433.96 164.22, 449.11 147.93 M383.9 229.04 C405.88 206.46, 425.56 182.4, 448.85 154.33 M383.9 229.04 C396.96 212.79, 410.98 197.59, 448.85 154.33 M389.54 228.65 C409.73 202.15, 433.62 179, 449.25 159.97 M389.54 228.65 C405 211.66, 419.89 194.33, 449.25 159.97 M394.53 229.01 C413.09 208.7, 430.15 186.75, 448.98 166.37 M394.53 229.01 C410.03 211.64, 424 194.46, 448.98 166.37 M400.17 228.61 C417.88 206.14, 436.74 185.25, 448.72 172.77 M400.17 228.61 C411.89 214.08, 423.13 200.55, 448.72 172.77 M405.16 228.97 C421.2 209.21, 435.22 190.61, 449.12 178.41 M405.16 228.97 C418.01 213.99, 429.12 200.13, 449.12 178.41 M410.8 228.58 C420.86 215.38, 430.09 203.72, 448.86 184.81 M410.8 228.58 C423.31 214.57, 434.21 201.47, 448.86 184.81 M415.79 228.94 C426.84 215.11, 436.73 203.31, 449.25 190.45 M415.79 228.94 C425.7 217.41, 436.76 204.99, 449.25 190.45 M421.43 228.55 C430.63 217.27, 442.26 203.86, 448.99 196.85 M421.43 228.55 C427.61 220.53, 434.6 214.19, 448.99 196.85 M426.42 228.91 C432.5 224.27, 438.44 214.21, 448.73 203.25 M426.42 228.91 C431.14 222.82, 438.13 216.82, 448.73 203.25 M432.06 228.51 C439.84 222.88, 443.45 214.77, 449.12 208.89 M432.06 228.51 C434.97 223.72, 440.37 218.44, 449.12 208.89 M437.05 228.87 C437.94 227.16, 441.01 222.06, 448.86 215.29 M437.05 228.87 C439.43 225.31, 443.86 221.65, 448.86 215.29 M442.69 228.48 C443.44 226.86, 446.18 224.92, 449.25 220.93 M442.69 228.48 C443.81 227.13, 445.41 224.51, 449.25 220.93 M0.25 226.82 C0.25 226.82, 0.25 226.82, 0.25 226.82 M0.25 226.82 C0.25 226.82, 0.25 226.82, 0.25 226.82 M5.9 226.43 C3.95 225.55, 3.78 223.4, -0.14 221.18 M5.9 226.43 C4.71 225.55, 3.48 224.07, -0.14 221.18 M12.29 226.69 C8.03 222.32, 3.42 220.07, 0.22 216.19 M12.29 226.69 C7.22 221.96, 2.03 218.1, 0.22 216.19 M17.94 226.29 C14.54 219.59, 8.21 215.7, -0.18 210.55 M17.94 226.29 C10.86 219.48, 3.58 215.28, -0.18 210.55 M24.34 226.56 C19.41 220.4, 10.79 213.95, 0.18 205.56 M24.34 226.56 C18.37 221.16, 11.44 215.1, 0.18 205.56 M30.73 226.82 C20.89 219.16, 11.45 208.13, -0.21 199.92 M30.73 226.82 C23.28 221.88, 16.46 214.46, -0.21 199.92 M36.38 226.42 C29.99 217.91, 19.7 213.66, 0.15 194.93 M36.38 226.42 C22.61 216.16, 9.85 204.34, 0.15 194.93 M42.77 226.68 C28.15 214.02, 10.2 198.66, -0.24 189.29 M42.77 226.68 C31.03 217.1, 18.43 204.95, -0.24 189.29 M48.42 226.29 C37.54 217.59, 27.72 207.51, 0.12 184.3 M48.42 226.29 C32.07 211.02, 13.84 196.21, 0.12 184.3 M54.81 226.55 C37.25 210.47, 17.33 194.45, -0.28 178.66 M54.81 226.55 C42.34 215.33, 29.03 202.98, -0.28 178.66 M61.21 226.81 C39.46 205.47, 16.88 185.75, 0.08 173.67 M61.21 226.81 C45.87 213.92, 32.84 200.02, 0.08 173.67 M66.86 226.42 C42.14 205.37, 18.38 184.41, -0.31 168.03 M66.86 226.42 C49.5 211.8, 30.7 197.74, -0.31 168.03 M73.25 226.68 C44.79 203.16, 17.32 177.44, 0.05 163.04 M73.25 226.68 C52.08 207.98, 29.9 188.27, 0.05 163.04 M78.9 226.28 C53.27 203.87, 26.25 181.03, -0.35 157.4 M78.9 226.28 C58.47 210.57, 39.98 193.1, -0.35 157.4 M85.29 226.55 C68.56 211.47, 47.98 193.16, 0.01 152.41 M85.29 226.55 C52.89 199.25, 20.46 171.05, 0.01 152.41 M91.69 226.81 C68.27 208.95, 46.62 190.39, 0.37 147.42 M91.69 226.81 C59.49 199, 27.07 169.12, 0.37 147.42 M97.34 226.41 C69.9 200.75, 38.56 174.99, -0.02 141.78 M97.34 226.41 C69.05 203.21, 42.27 178.7, -0.02 141.78 M103.73 226.67 C64.82 192.12, 23.69 156.37, 0.34 136.79 M103.73 226.67 C70.45 196.98, 35.99 166.64, 0.34 136.79 M109.38 226.28 C70.09 191.39, 26.46 155.49, -0.06 131.15 M109.38 226.28 C66.68 188.91, 22.96 151.9, -0.06 131.15 M115.77 226.54 C93.59 202.69, 69.08 185.12, 0.3 126.16 M115.77 226.54 C76.34 192.53, 38.83 159.73, 0.3 126.16 M122.17 226.8 C75.09 187.21, 31.02 147.68, -0.09 120.52 M122.17 226.8 C97.58 206.76, 73.71 183.89, -0.09 120.52 M127.81 226.41 C96.58 198.88, 60.63 168.3, 0.27 115.53 M127.81 226.41 C88.27 191.69, 48.4 157.27, 0.27 115.53 M134.21 226.67 C82.85 183.07, 30.13 137.82, -0.13 109.89 M134.21 226.67 C103.24 199.91, 71.94 172.6, -0.13 109.89 M139.86 226.28 C85.31 177.73, 31.41 130.31, 0.23 104.9 M139.86 226.28 C104.69 193.04, 66.18 159.61, 0.23 104.9 M146.25 226.54 C107.84 193.53, 67.83 156.51, -0.16 99.26 M146.25 226.54 C104.01 189.74, 62.39 153.68, -0.16 99.26 M152.65 226.8 C93.13 175.5, 31.87 122.65, 0.2 94.27 M152.65 226.8 C98.46 180.29, 46.34 134.73, 0.2 94.27 M158.29 226.4 C117.22 192.19, 75.49 155.88, -0.2 88.63 M158.29 226.4 C96.6 173.85, 35 121.76, -0.2 88.63 M164.69 226.66 C105.69 176.27, 46.15 124.61, 0.17 83.64 M164.69 226.66 C100.84 172.27, 39.66 118.43, 0.17 83.64 M171.09 226.93 C111.28 174.43, 49.7 124.53, -0.23 78 M171.09 226.93 C125.3 186.17, 80.18 146.27, -0.23 78 M176.73 226.53 C124.1 180.02, 69.96 133.07, 0.13 73.01 M176.73 226.53 C118.48 178.84, 63 129.77, 0.13 73.01 M183.13 226.79 C133.12 181.09, 80 136.19, -0.26 67.37 M183.13 226.79 C137.5 183.97, 89.23 143.46, -0.26 67.37 M188.77 226.4 C121.21 167.75, 52.37 107.59, 0.1 62.38 M188.77 226.4 C150.14 193.19, 110.99 158.85, 0.1 62.38 M195.17 226.66 C152.66 191.06, 109.2 153.35, -0.3 56.74 M195.17 226.66 C153.39 191.22, 112.4 154.29, -0.3 56.74 M201.57 226.92 C124.37 158.99, 47.33 92.83, 0.06 51.75 M201.57 226.92 C158.19 189.63, 114.07 150.94, 0.06 51.75 M207.21 226.53 C161.36 188.1, 114.25 149.12, -0.33 46.11 M207.21 226.53 C129.16 159.55, 51.18 91.71, -0.33 46.11 M213.61 226.79 C142.66 165.79, 72.61 104.3, 0.03 41.12 M213.61 226.79 C168.12 188.4, 123.88 149.48, 0.03 41.12 M219.25 226.39 C135.22 155.79, 54.66 84.67, -0.37 35.48 M219.25 226.39 C151.01 167.8, 82.16 107.29, -0.37 35.48 M225.65 226.66 C156.57 166.17, 90.38 108.94, -0.01 30.49 M225.65 226.66 C140.69 154.74, 57.37 81.7, -0.01 30.49 M232.05 226.92 C163.56 165.05, 92.11 106.07, 0.35 25.51 M232.05 226.92 C139.48 146.6, 47.61 66.13, 0.35 25.51 M237.69 226.52 C171.3 168.5, 107.24 112.61, -0.04 19.86 M237.69 226.52 C149.18 151.74, 60.68 74.49, -0.04 19.86 M244.09 226.78 C195.13 183.74, 145.34 142.79, 0.32 14.88 M244.09 226.78 C172.71 163.16, 98.8 99.16, 0.32 14.88 M249.73 226.39 C151.12 140.27, 53.48 54.77, -0.08 9.23 M249.73 226.39 C193.09 178.38, 137.89 129.73, -0.08 9.23 M256.13 226.65 C196.6 176.53, 137.14 125.31, 0.28 4.25 M256.13 226.65 C179.23 158.89, 101.93 90.96, 0.28 4.25 M262.53 226.91 C192.48 166.81, 123.27 105.61, 0.64 -0.74 M262.53 226.91 C206.9 179.03, 152.94 132.01, 0.64 -0.74 M268.17 226.52 C178.08 150.74, 89.22 71.81, 7.04 -0.48 M268.17 226.52 C215.05 179.57, 160.98 132.67, 7.04 -0.48 M274.57 226.78 C204.55 166.04, 132.09 102.31, 12.68 -0.87 M274.57 226.78 C182.59 145.3, 89.24 64.21, 12.68 -0.87 M280.21 226.38 C224.46 181.51, 170.52 134.57, 19.08 -0.61 M280.21 226.38 C228.58 182.32, 176.18 137.02, 19.08 -0.61 M286.61 226.65 C218.43 166.52, 149.24 106.76, 24.73 -1.01 M286.61 226.65 C194.38 144.86, 100.3 63.69, 24.73 -1.01 M293.01 226.91 C211.16 154.23, 127.46 82.1, 31.12 -0.75 M293.01 226.91 C190.1 135.22, 84.54 44.38, 31.12 -0.75 M298.65 226.51 C234.36 170.43, 173.61 116.01, 37.52 -0.48 M298.65 226.51 C231.44 166.66, 162.86 107.29, 37.52 -0.48 M305.05 226.77 C232.42 161.77, 159.7 98.4, 43.16 -0.88 M305.05 226.77 C220.22 154.77, 137.52 82.46, 43.16 -0.88 M310.69 226.38 C233.1 161.5, 158 96.25, 49.56 -0.62 M310.69 226.38 C213.4 141.73, 115.11 55.72, 49.56 -0.62 M317.09 226.64 C232.84 155.8, 149.39 80.86, 55.21 -1.01 M317.09 226.64 C216.7 140.51, 117.98 54.63, 55.21 -1.01 M323.49 226.9 C257.21 166.41, 190.63 107.81, 61.6 -0.75 M323.49 226.9 C226.48 144.13, 130.36 59.97, 61.6 -0.75 M329.13 226.51 C230.18 141.27, 128.35 53.46, 68 -0.49 M329.13 226.51 C273.76 180.1, 218.61 132.66, 68 -0.49 M335.53 226.77 C267.97 167.48, 203.19 109.62, 73.64 -0.88 M335.53 226.77 C240.08 146.35, 146.48 64.39, 73.64 -0.88 M341.17 226.37 C280.11 175.25, 220.36 123.19, 80.04 -0.62 M341.17 226.37 C247.72 144.93, 155.07 63.45, 80.04 -0.62 M347.57 226.64 C253.17 145.93, 158.48 61.8, 85.68 -1.02 M347.57 226.64 C288.6 175.43, 229.13 124.49, 85.68 -1.02 M353.97 226.9 C265.54 149.36, 178.54 72.51, 92.08 -0.76 M353.97 226.9 C259.34 143.94, 164.92 62.1, 92.08 -0.76 M359.61 226.5 C272.61 149.58, 183.52 75.78, 98.48 -0.49 M359.61 226.5 C279.5 157.79, 199.3 87.14, 98.48 -0.49 M366.01 226.76 C259.68 135.63, 155.79 45.73, 104.12 -0.89 M366.01 226.76 C293.99 164, 221.25 101.36, 104.12 -0.89 M371.65 226.37 C297.57 163.14, 224.46 100.47, 110.52 -0.63 M371.65 226.37 C291.91 156.88, 212.21 86.71, 110.52 -0.63 M378.05 226.63 C318.24 175.67, 260.99 125.07, 116.16 -1.02 M378.05 226.63 C279.99 141.92, 182.46 56.73, 116.16 -1.02 M384.45 226.89 C284.05 140.67, 184.09 53.23, 122.56 -0.76 M384.45 226.89 C288.09 144.43, 191.06 60.44, 122.56 -0.76 M390.09 226.5 C327.82 171.9, 264.14 119.27, 128.96 -0.5 M390.09 226.5 C334.75 178.38, 279.4 130.51, 128.96 -0.5 M396.49 226.76 C291.04 134.98, 189 46.96, 134.6 -0.89 M396.49 226.76 C342.26 176.35, 287.58 129.14, 134.6 -0.89 M402.13 226.36 C301.19 135.17, 199.85 47.83, 141 -0.63 M402.13 226.36 C303.51 141.38, 205.46 55.67, 141 -0.63 M408.53 226.63 C322.73 152.43, 237.13 76.88, 146.64 -1.03 M408.53 226.63 C355.69 179.81, 304 134.22, 146.64 -1.03 M414.93 226.89 C350.17 170.13, 285.56 114.42, 153.04 -0.76 M414.93 226.89 C322.55 147.28, 231.26 66.93, 153.04 -0.76 M420.57 226.49 C323.88 140.63, 228.32 58.3, 159.44 -0.5 M420.57 226.49 C350.38 165.59, 281.13 105.34, 159.44 -0.5 M426.97 226.75 C350.92 160.97, 276.35 94.98, 165.08 -0.9 M426.97 226.75 C367.15 173.53, 306.03 121.06, 165.08 -0.9 M432.61 226.36 C333.47 139.38, 234.39 55.96, 171.48 -0.64 M432.61 226.36 C331.49 138.14, 230.27 50.57, 171.48 -0.64 M439.01 226.62 C387.74 179.72, 333.55 133.93, 177.12 -1.03 M439.01 226.62 C380.58 178.12, 324.62 129.59, 177.12 -1.03 M445.41 226.88 C350.86 143.23, 256.8 62.99, 183.52 -0.77 M445.41 226.88 C362.68 155.16, 281.04 83.47, 183.52 -0.77 M448.78 224.52 C392.64 176.11, 336.31 126.62, 189.92 -0.51 M448.78 224.52 C368.19 153.54, 286.71 83.1, 189.92 -0.51 M449.14 219.53 C397.2 174.77, 344.63 128.1, 195.56 -0.9 M449.14 219.53 C385.87 166.88, 323.45 112.09, 195.56 -0.9 M448.75 213.89 C362.35 136.75, 275.82 60.44, 201.96 -0.64 M448.75 213.89 C389.49 159.42, 328.1 106.7, 201.96 -0.64 M449.11 208.9 C363.2 132.11, 272.39 54.94, 207.6 -1.04 M449.11 208.9 C366.23 138.3, 283.8 67.99, 207.6 -1.04 M448.72 203.26 C361.89 128.26, 277.48 56.29, 214 -0.77 M448.72 203.26 C370.39 133.41, 292.2 66.14, 214 -0.77 M449.08 198.27 C365.04 125.57, 282.15 55.62, 220.4 -0.51 M449.08 198.27 C401.22 156.97, 353.8 114.43, 220.4 -0.51 M448.68 192.63 C399.05 149.17, 349.81 107.97, 226.04 -0.91 M448.68 192.63 C403.24 152.05, 355.35 112.28, 226.04 -0.91 M449.04 187.64 C388.81 132.91, 324.93 80.03, 232.44 -0.65 M449.04 187.64 C398.09 143.58, 347 100.06, 232.44 -0.65 M448.65 182 C367.52 109.68, 284.85 36.82, 238.08 -1.04 M448.65 182 C381.9 124.91, 315.13 66.61, 238.08 -1.04 M449.01 177.01 C391.25 126.96, 330.26 78.11, 244.48 -0.78 M449.01 177.01 C399.55 135.25, 349.77 92.38, 244.48 -0.78 M448.61 171.37 C369.94 106.19, 292.81 38.85, 250.88 -0.52 M448.61 171.37 C407.79 135.78, 366.64 100.08, 250.88 -0.52 M448.97 166.38 C394.18 119.76, 338.55 69.83, 256.52 -0.91 M448.97 166.38 C406.03 127, 363.59 90.08, 256.52 -0.91 M448.58 160.74 C404.74 122.77, 360.12 83.39, 262.92 -0.65 M448.58 160.74 C407.15 125.97, 366.58 89.15, 262.92 -0.65 M448.94 155.75 C401.14 111.35, 351.86 69.17, 268.56 -1.05 M448.94 155.75 C409.64 118.31, 367.66 83.45, 268.56 -1.05 M448.54 150.11 C386.31 97.58, 327.71 42.86, 274.96 -0.78 M448.54 150.11 C405.12 113.79, 363.26 76.74, 274.96 -0.78 M448.9 145.12 C412.99 116.96, 380.31 84.63, 281.36 -0.52 M448.9 145.12 C405.65 106.55, 362.58 68.42, 281.36 -0.52 M448.51 139.48 C399.33 98.01, 349.19 55.28, 287 -0.92 M448.51 139.48 C394.63 94.59, 340.88 47.25, 287 -0.92 M448.87 134.49 C400.29 92.04, 355.22 50.61, 293.4 -0.66 M448.87 134.49 C389.63 82.3, 330.39 30.79, 293.4 -0.66 M448.47 128.85 C411.62 95.98, 373.6 65.14, 299.04 -1.05 M448.47 128.85 C407.38 94.09, 366.71 57.53, 299.04 -1.05 M448.83 123.86 C395.81 77.93, 346.37 31.46, 305.44 -0.79 M448.83 123.86 C417.7 96.1, 388.03 70.95, 305.44 -0.79 M449.19 118.88 C411.85 86.02, 372.82 53.21, 311.84 -0.53 M449.19 118.88 C415.78 90.72, 382.69 61.17, 311.84 -0.53 M448.8 113.23 C417.74 85.28, 387.97 59.6, 317.48 -0.92 M448.8 113.23 C417.68 85.44, 387.9 59.37, 317.48 -0.92 M449.16 108.25 C413.27 74.47, 376.1 44.62, 323.88 -0.66 M449.16 108.25 C405.23 69.4, 360.74 31.31, 323.88 -0.66 M448.76 102.6 C405.36 66.7, 364.87 30.01, 329.52 -1.06 M448.76 102.6 C413.2 72.53, 380.35 43.47, 329.52 -1.06 M449.12 97.62 C414.66 64.92, 375.46 35.28, 335.92 -0.79 M449.12 97.62 C414.14 67.22, 379.29 37.47, 335.92 -0.79 M448.73 91.97 C408.43 54.4, 366.38 16.62, 342.32 -0.53 M448.73 91.97 C421.3 69.23, 393.75 43.72, 342.32 -0.53 M449.09 86.98 C408.53 52.67, 370.95 17.09, 347.96 -0.93 M449.09 86.98 C420.55 60.39, 389.2 34.67, 347.96 -0.93 M448.7 81.34 C426.8 62.44, 403.1 44.59, 354.36 -0.67 M448.7 81.34 C430.03 64.96, 409.27 47.64, 354.36 -0.67 M449.06 76.35 C427.13 56.7, 400.35 34.19, 360 -1.06 M449.06 76.35 C418.36 48.77, 386.98 22.81, 360 -1.06 M448.66 70.71 C416.48 40.97, 384.01 15.26, 366.4 -0.8 M448.66 70.71 C430.68 53.79, 410.23 35.56, 366.4 -0.8 M449.02 65.72 C425.2 45.72, 399.86 22.05, 372.8 -0.54 M449.02 65.72 C418.44 38.51, 388.96 12.82, 372.8 -0.54 M448.63 60.08 C424.25 39.95, 397.46 15.71, 378.44 -0.93 M448.63 60.08 C433.83 46.03, 417.89 32.77, 378.44 -0.93 M448.99 55.09 C433.25 43.35, 417.95 29.49, 384.84 -0.67 M448.99 55.09 C424.68 34.43, 399.95 13.42, 384.84 -0.67 M448.59 49.45 C432.99 34.36, 415.7 20.02, 390.48 -1.06 M448.59 49.45 C433.36 35.55, 417.91 21.03, 390.48 -1.06 M448.95 44.46 C430.77 31.93, 416.44 16.58, 396.88 -0.8 M448.95 44.46 C432.18 29.87, 414.56 16.48, 396.88 -0.8 M448.56 38.82 C433.74 25.77, 419.6 14.17, 403.28 -0.54 M448.56 38.82 C435 28.06, 421.78 16.64, 403.28 -0.54 M448.92 33.83 C432.71 19.81, 417.56 7.84, 408.92 -0.94 M448.92 33.83 C438.59 23.58, 425.87 14.04, 408.92 -0.94 M448.52 28.19 C440.77 19.19, 433.02 15.08, 415.32 -0.68 M448.52 28.19 C440.7 21.56, 433.35 16.4, 415.32 -0.68 M448.88 23.2 C438.85 14.67, 430.59 8.57, 421.71 -0.41 M448.88 23.2 C443.57 18.55, 436.65 12.35, 421.71 -0.41 M448.49 17.56 C441.9 15.35, 439.26 9.53, 427.36 -0.81 M448.49 17.56 C441.97 11.49, 434.84 5.65, 427.36 -0.81 M448.85 12.57 C444.33 9.23, 441.72 6.33, 433.75 -0.55 M448.85 12.57 C444.04 9.45, 439.67 5.83, 433.75 -0.55 M449.21 7.59 C445.36 5.7, 444.51 3.4, 439.4 -0.94 M449.21 7.59 C447.08 5.11, 444.66 4.46, 439.4 -0.94 M448.81 1.94 C448.27 1.2, 446.84 0.77, 445.8 -0.68 M448.81 1.94 C447.52 1.01, 446.34 0.14, 445.8 -0.68&quot; stroke=&quot;#fab005&quot; stroke-width=&quot;0.5&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M0 0 C137.99 1.35, 275.54 1.62, 447.08 0 M0 0 C93.05 -1.07, 185.01 -0.57, 447.08 0 M447.08 0 C447.9 86.73, 445.49 171.46, 447.08 226.6 M447.08 0 C446.29 88.02, 446.06 174.84, 447.08 226.6 M447.08 226.6 C308.49 227.09, 168.1 227, 0 226.6 M447.08 226.6 C354.07 225.11, 261.87 224.34, 0 226.6 M0 226.6 C0.75 171.28, 0.32 116.01, 0 0 M0 226.6 C1.38 166.28, 1.42 108.16, 0 0&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(2451.312399541602 12933.439394911597) rotate(0 223.54205559885122 113.30094018619911)&quot;&gt;&lt;path d=&quot;M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.26 4.42, 1.33 4.5, 4.99 0.36 M-0.26 6.4 C1.7 4.69, 2.83 2.37, 4.99 0.36 M0.13 12.04 C4.71 6.12, 7.75 1.45, 10.63 -0.03 M0.13 12.04 C1.89 9.5, 4.59 5.77, 10.63 -0.03 M-0.13 18.44 C1.66 15.87, 7.26 11.74, 15.62 0.33 M-0.13 18.44 C3.59 14.78, 8.59 9.52, 15.62 0.33 M0.27 24.08 C4.58 16.42, 10.46 10.46, 21.26 -0.07 M0.27 24.08 C8.55 15.93, 16.27 5.82, 21.26 -0.07 M0 30.48 C6.13 22, 11.33 18.12, 26.25 0.29 M0 30.48 C8.23 22.18, 17.25 11.59, 26.25 0.29 M-0.26 36.88 C11.83 24.17, 19.58 13.2, 31.89 -0.1 M-0.26 36.88 C9.39 27.31, 17.5 15.55, 31.89 -0.1 M0.14 42.52 C10.27 31.12, 21.14 17.14, 36.88 0.26 M0.14 42.52 C14.64 25.38, 28.34 10.53, 36.88 0.26 M-0.12 48.92 C9.75 36.59, 21.97 23.65, 42.52 -0.14 M-0.12 48.92 C10.38 35.44, 21.18 24.26, 42.52 -0.14 M0.27 54.56 C17.37 31.03, 38.78 11.14, 47.51 0.22 M0.27 54.56 C10.78 41.53, 23.79 28.48, 47.51 0.22 M0.01 60.96 C14.06 42.73, 31.66 23.89, 53.15 -0.17 M0.01 60.96 C11.59 47.57, 24.41 33.96, 53.15 -0.17 M-0.25 67.36 C18.66 44.34, 39.43 21.29, 58.14 0.19 M-0.25 67.36 C12.46 53.38, 23.76 39.45, 58.14 0.19 M0.14 73 C13.54 54.19, 29.4 37.04, 63.78 -0.21 M0.14 73 C23.81 45.97, 48.52 17.74, 63.78 -0.21 M-0.12 79.4 C13.67 62.61, 30.32 44.9, 68.77 0.15 M-0.12 79.4 C19.92 58.1, 36.98 37.03, 68.77 0.15 M0.28 85.04 C28.63 53.66, 52.06 23.5, 74.41 -0.24 M0.28 85.04 C27.08 53.01, 55.77 20.13, 74.41 -0.24 M0.01 91.44 C26.25 60.52, 55.39 25.9, 79.4 0.12 M0.01 91.44 C30.05 55.15, 61.95 18.45, 79.4 0.12 M-0.25 97.84 C31.63 62.73, 65.59 23.28, 85.04 -0.28 M-0.25 97.84 C30.22 60.19, 63.67 24.04, 85.04 -0.28 M0.15 103.48 C29.37 69.28, 56.26 36.73, 90.03 0.08 M0.15 103.48 C18.73 81.8, 37.97 59.62, 90.03 0.08 M-0.11 109.88 C25.19 80.62, 50.37 56.36, 95.67 -0.31 M-0.11 109.88 C34.19 70.82, 67.85 31.91, 95.67 -0.31 M0.28 115.52 C41.83 70.86, 82.16 22.81, 100.66 0.05 M0.28 115.52 C31.4 81.12, 62.93 45, 100.66 0.05 M0.02 121.92 C29.61 86.79, 62.44 51.33, 106.3 -0.34 M0.02 121.92 C43.64 74.4, 85.31 26.87, 106.3 -0.34 M-0.24 128.32 C27.09 96.42, 58.02 59.88, 111.29 0.02 M-0.24 128.32 C42.16 80.95, 82.74 34.18, 111.29 0.02 M0.15 133.96 C33.34 98.78, 64.47 60, 116.27 0.38 M0.15 133.96 C25.41 105.68, 51.51 77.19, 116.27 0.38 M-0.11 140.36 C39.37 95.3, 76.51 53.99, 121.92 -0.02 M-0.11 140.36 C25.46 111.3, 50.52 83.31, 121.92 -0.02 M0.29 146 C39.43 98.75, 79.22 51.79, 126.91 0.34 M0.29 146 C32.28 110.1, 62.91 74.88, 126.91 0.34 M0.02 152.4 C44.48 102.45, 89.59 50.41, 132.55 -0.05 M0.02 152.4 C43.59 101.9, 86.73 52.34, 132.55 -0.05 M-0.24 158.8 C28.42 124.52, 58.11 87.34, 137.54 0.31 M-0.24 158.8 C44.7 107.58, 88.54 56.91, 137.54 0.31 M0.16 164.44 C34.67 125.06, 71.11 85.73, 143.18 -0.09 M0.16 164.44 C56.18 100.64, 112.23 35.36, 143.18 -0.09 M-0.1 170.84 C47.81 113.79, 97.4 56.73, 148.17 0.27 M-0.1 170.84 C29.97 134.86, 62.2 99.69, 148.17 0.27 M0.29 176.48 C53.42 118.74, 103.07 57.44, 153.81 -0.12 M0.29 176.48 C52.24 115.78, 103.81 55.75, 153.81 -0.12 M0.03 182.88 C39.96 138.42, 79.42 91.05, 158.8 0.24 M0.03 182.88 C44.02 132.29, 89.41 80.1, 158.8 0.24 M-0.23 189.27 C41.18 141.82, 81.99 94.41, 164.44 -0.16 M-0.23 189.27 C42.46 138.96, 87.56 88.89, 164.44 -0.16 M0.16 194.92 C55.96 129.67, 114.38 65.23, 169.43 0.2 M0.16 194.92 C41.4 147.36, 81.08 100.78, 169.43 0.2 M-0.1 201.32 C69.42 122.64, 140.36 44.24, 175.07 -0.19 M-0.1 201.32 C57.85 134.16, 115.12 66.87, 175.07 -0.19 M0.3 206.96 C36.19 164.19, 74.49 121.52, 180.06 0.17 M0.3 206.96 C36.97 165.33, 73.16 124.37, 180.06 0.17 M0.03 213.36 C61.15 142.61, 120.03 76.14, 185.7 -0.23 M0.03 213.36 C53.15 151.53, 106.51 90.44, 185.7 -0.23 M-0.23 219.75 C46.2 164.88, 95.9 109.84, 190.69 0.13 M-0.23 219.75 C71.93 135, 146.73 50.98, 190.69 0.13 M0.17 225.4 C70.17 141.96, 142.32 61.01, 196.33 -0.26 M0.17 225.4 C62.06 153.43, 124.56 82.15, 196.33 -0.26 M2.53 228.78 C59.55 162.41, 119.94 95.35, 201.32 0.1 M2.53 228.78 C53.54 173.02, 103.04 115.74, 201.32 0.1 M7.52 229.14 C84.03 141.09, 160.67 52.83, 206.96 -0.3 M7.52 229.14 C88.06 140.23, 167.03 48.79, 206.96 -0.3 M13.16 228.74 C76.77 154.12, 144.37 79.6, 211.95 0.06 M13.16 228.74 C83.87 147.48, 154.06 67.71, 211.95 0.06 M18.15 229.1 C63.76 175.56, 111.21 119.97, 217.59 -0.33 M18.15 229.1 C89.93 147.69, 161.29 64.79, 217.59 -0.33 M23.79 228.71 C68.83 178.74, 110.73 129.99, 222.58 0.03 M23.79 228.71 C78.88 166.1, 132.35 103.72, 222.58 0.03 M28.78 229.07 C85.43 165.36, 141.67 100.48, 228.22 -0.36 M28.78 229.07 C72.21 181.18, 115.13 133.03, 228.22 -0.36 M34.42 228.67 C102.23 148.71, 171.62 67.36, 233.21 0 M34.42 228.67 C97.62 157.45, 161.5 84.23, 233.21 0 M39.41 229.03 C100.21 160.62, 159.02 90.53, 238.19 0.36 M39.41 229.03 C82.95 177.51, 127.22 126.79, 238.19 0.36 M45.05 228.64 C85.05 182.45, 125.88 133.32, 243.84 -0.04 M45.05 228.64 C124.6 137.52, 203.89 46.51, 243.84 -0.04 M50.04 229 C126.51 142.32, 203.01 56.88, 248.82 0.32 M50.04 229 C94.79 176.87, 138.93 124.83, 248.82 0.32 M55.68 228.6 C97.84 181.56, 138.92 135.76, 254.47 -0.07 M55.68 228.6 C125.43 149.09, 194.92 69.52, 254.47 -0.07 M60.67 228.96 C100.07 184.04, 141.29 136.82, 259.45 0.29 M60.67 228.96 C127.52 152.45, 192.7 78.5, 259.45 0.29 M66.31 228.57 C111.05 173.8, 156.04 123.31, 265.1 -0.11 M66.31 228.57 C109.01 177.89, 153.17 128.82, 265.1 -0.11 M71.3 228.93 C145.04 144.97, 217.1 59.32, 270.08 0.25 M71.3 228.93 C111.78 180.83, 151.16 134.5, 270.08 0.25 M76.94 228.53 C139.8 153, 202.21 79.64, 275.73 -0.14 M76.94 228.53 C150.66 142.09, 226.34 55.84, 275.73 -0.14 M81.93 228.89 C137.43 162.04, 195.12 94.19, 280.71 0.22 M81.93 228.89 C159.13 141.24, 235.7 51.46, 280.71 0.22 M87.57 228.5 C162.34 144.8, 235.14 57.83, 286.36 -0.18 M87.57 228.5 C127.98 180.11, 170.12 131.74, 286.36 -0.18 M92.56 228.86 C146.04 166.73, 202.33 103.36, 291.34 0.18 M92.56 228.86 C168.8 140.65, 245.37 50.86, 291.34 0.18 M98.2 228.47 C146.46 172.15, 197.27 114.31, 296.99 -0.21 M98.2 228.47 C140.23 179.84, 182.14 130.61, 296.99 -0.21 M103.19 228.83 C150.56 173.7, 199.38 117.93, 301.97 0.15 M103.19 228.83 C175.98 141.65, 251.78 56.16, 301.97 0.15 M108.83 228.43 C160.24 169.96, 211.47 112.04, 307.62 -0.25 M108.83 228.43 C173.7 155.11, 235.18 83.17, 307.62 -0.25 M113.82 228.79 C161.92 175.12, 206.17 124.07, 312.6 0.11 M113.82 228.79 C171.1 161.77, 229.34 94.96, 312.6 0.11 M118.8 229.15 C172.56 168.36, 223.1 109.38, 318.25 -0.28 M118.8 229.15 C189.27 148.43, 258.57 69.35, 318.25 -0.28 M124.45 228.76 C178.16 166.47, 231.94 102.9, 323.23 0.08 M124.45 228.76 C192.92 149.71, 262.23 69.67, 323.23 0.08 M129.43 229.12 C169.1 181.83, 211.84 135.74, 328.88 -0.31 M129.43 229.12 C200.93 145.26, 272.54 62.03, 328.88 -0.31 M135.08 228.72 C198.36 157.75, 260.69 87.91, 333.86 0.05 M135.08 228.72 C197.13 156.25, 257.93 85.6, 333.86 0.05 M140.06 229.08 C211.65 146.67, 285.68 61.88, 339.51 -0.35 M140.06 229.08 C203.92 152.14, 271.07 76.64, 339.51 -0.35 M145.71 228.69 C204.96 159.38, 264.93 90.09, 344.49 0.01 M145.71 228.69 C191.07 174.98, 237.04 122.82, 344.49 0.01 M150.69 229.05 C206.11 165.46, 260.73 100.57, 349.48 0.37 M150.69 229.05 C198.73 172.63, 247.4 116.69, 349.48 0.37 M156.34 228.65 C218.72 159.29, 280.59 90.03, 355.12 -0.02 M156.34 228.65 C218.32 157.11, 279.06 86.99, 355.12 -0.02 M161.33 229.01 C214.68 168.44, 267.62 108.31, 360.11 0.34 M161.33 229.01 C202.1 180.54, 243.22 134.62, 360.11 0.34 M166.97 228.62 C246.21 137.08, 322.93 45.86, 365.75 -0.06 M166.97 228.62 C211.71 176.66, 256.68 124.43, 365.75 -0.06 M171.96 228.98 C227.51 164.32, 282.31 101.44, 370.74 0.3 M171.96 228.98 C237.42 150.7, 304.96 75.26, 370.74 0.3 M177.6 228.58 C244.12 150.07, 311.65 71.12, 376.38 -0.09 M177.6 228.58 C223.18 178.2, 266.77 127.02, 376.38 -0.09 M182.59 228.94 C227.43 176.29, 274.72 122.3, 381.37 0.27 M182.59 228.94 C238.59 165.82, 293.42 101.79, 381.37 0.27 M188.23 228.55 C253.6 155.79, 318.12 79.78, 387.01 -0.13 M188.23 228.55 C230.35 179.01, 274.13 130.01, 387.01 -0.13 M193.22 228.91 C256.16 159.1, 316.92 88.05, 392 0.23 M193.22 228.91 C250.26 162.95, 306.86 98.3, 392 0.23 M198.86 228.52 C248.39 172.04, 297.72 115.08, 397.64 -0.16 M198.86 228.52 C252.28 164.18, 307.65 101.49, 397.64 -0.16 M203.85 228.88 C252.12 173.71, 296.32 122.45, 402.63 0.2 M203.85 228.88 C270.08 151.71, 335.54 76.25, 402.63 0.2 M209.49 228.48 C251.98 180.01, 291.73 132.47, 408.27 -0.2 M209.49 228.48 C281.19 147.22, 351.38 65.82, 408.27 -0.2 M214.48 228.84 C251.93 181.5, 293.2 135.5, 413.26 0.16 M214.48 228.84 C255.92 179.02, 297.67 132.42, 413.26 0.16 M220.12 228.45 C259.8 181.21, 301.66 136.82, 418.9 -0.23 M220.12 228.45 C291.84 147.95, 363.52 65.87, 418.9 -0.23 M225.11 228.81 C297.16 144.04, 370.54 63.82, 423.89 0.13 M225.11 228.81 C270.99 175.6, 316.31 123.65, 423.89 0.13 M230.09 229.17 C282.13 169.43, 334.64 108.02, 429.53 -0.26 M230.09 229.17 C284.31 167.99, 337.91 105.31, 429.53 -0.26 M235.74 228.77 C300.11 154.88, 363.74 81.75, 434.52 0.1 M235.74 228.77 C296.74 158.12, 359.17 86.46, 434.52 0.1 M240.72 229.13 C300.65 159.99, 359.87 91.67, 440.16 -0.3 M240.72 229.13 C287.19 175.11, 334.99 122.54, 440.16 -0.3 M246.37 228.74 C295.15 170.55, 344.83 112.92, 445.15 0.06 M246.37 228.74 C306.7 158.46, 366.35 88.96, 445.15 0.06 M251.35 229.1 C300.34 170.95, 349.09 116.27, 448.83 1.93 M251.35 229.1 C305.14 170.6, 357.35 109.91, 448.83 1.93 M257 228.7 C328.47 147.98, 398.71 70.18, 449.22 7.57 M257 228.7 C309.73 169.37, 360.15 111.38, 449.22 7.57 M261.98 229.06 C329.71 154.17, 394.29 78.52, 448.96 13.97 M261.98 229.06 C325.43 155.42, 389.59 81.77, 448.96 13.97 M267.63 228.67 C312.98 175.45, 358.46 125.92, 449.35 19.61 M267.63 228.67 C335.28 152.39, 402.74 74.02, 449.35 19.61 M272.61 229.03 C316.02 177.72, 360.63 128.2, 449.09 26.01 M272.61 229.03 C327.59 162.82, 384.04 99.23, 449.09 26.01 M278.26 228.63 C334.98 163.91, 388.46 97.86, 448.83 32.41 M278.26 228.63 C314.64 187.56, 350.48 145.34, 448.83 32.41 M283.24 228.99 C333.05 171.04, 380.98 114.48, 449.23 38.05 M283.24 228.99 C315.83 189.56, 349.37 151.63, 449.23 38.05 M288.89 228.6 C321.4 189.18, 356.42 148.62, 448.96 44.45 M288.89 228.6 C337.84 173.47, 388.02 116.89, 448.96 44.45 M293.87 228.96 C335.47 180.94, 375.57 132.1, 449.36 50.09 M293.87 228.96 C339.33 178.89, 382.85 128.07, 449.36 50.09 M299.52 228.57 C354.27 164.87, 408.54 105.01, 449.1 56.49 M299.52 228.57 C356.29 162.71, 413.6 98.02, 449.1 56.49 M304.5 228.93 C336.75 190.08, 369.31 154.99, 448.84 62.89 M304.5 228.93 C334.68 193.7, 363.44 160.47, 448.84 62.89 M310.15 228.53 C361.57 170.76, 414.59 111.81, 449.23 68.53 M310.15 228.53 C347.81 183.82, 385.84 140.63, 449.23 68.53 M315.13 228.89 C349.18 190.74, 378.09 154.05, 448.97 74.93 M315.13 228.89 C353.86 184.84, 391.58 140.16, 448.97 74.93 M320.78 228.5 C359.13 179.96, 401.45 133.78, 448.71 81.33 M320.78 228.5 C355.06 190.74, 387.79 151.6, 448.71 81.33 M325.76 228.86 C365.32 187.31, 401.08 142.23, 449.1 86.97 M325.76 228.86 C352.99 197.96, 379.44 168.19, 449.1 86.97 M331.41 228.46 C360.63 198.99, 386.71 165.61, 448.84 93.37 M331.41 228.46 C369.72 184.52, 405.71 141.47, 448.84 93.37 M336.39 228.82 C362.16 201.77, 384.78 174.48, 449.24 99.01 M336.39 228.82 C375.35 184.08, 414.82 140.15, 449.24 99.01 M342.04 228.43 C382.21 181.49, 425.77 130.44, 448.97 105.41 M342.04 228.43 C367.44 199.26, 391.68 170.96, 448.97 105.41 M347.02 228.79 C373.59 197.44, 400.56 168.13, 448.71 111.81 M347.02 228.79 C386.47 185.67, 425.18 141.11, 448.71 111.81 M352.01 229.15 C378.32 199.53, 400.38 175.57, 449.11 117.45 M352.01 229.15 C383.4 191.81, 417.71 154.23, 449.11 117.45 M357.65 228.75 C392.21 190.05, 423.61 151.46, 448.85 123.85 M357.65 228.75 C385.78 195.91, 414.64 162.65, 448.85 123.85 M362.64 229.11 C389.07 202.33, 412.78 173.4, 449.24 129.49 M362.64 229.11 C393.87 195.57, 422.44 160.09, 449.24 129.49 M368.28 228.72 C395.33 195.52, 422.88 164.53, 448.98 135.89 M368.28 228.72 C393.63 201.72, 419.1 173.22, 448.98 135.89 M373.27 229.08 C403.05 197.59, 429.45 161.56, 448.72 142.29 M373.27 229.08 C396.5 201.58, 420.99 174.47, 448.72 142.29 M378.91 228.68 C392.73 212.28, 411.14 195.11, 449.11 147.93 M378.91 228.68 C404.46 198.7, 430.52 168.32, 449.11 147.93 M383.9 229.04 C399.77 210.66, 413.96 193.51, 448.85 154.33 M383.9 229.04 C404.31 206.35, 424.94 181.86, 448.85 154.33 M389.54 228.65 C410.27 206.53, 427.62 185.84, 449.25 159.97 M389.54 228.65 C407.17 208.53, 424.08 188.96, 449.25 159.97 M394.53 229.01 C411.92 207.79, 432.68 186.15, 448.98 166.37 M394.53 229.01 C410.66 209.85, 429.65 189.83, 448.98 166.37 M400.17 228.61 C418.2 207.89, 437.54 183.64, 448.72 172.77 M400.17 228.61 C415.26 210.05, 432.79 193.36, 448.72 172.77 M405.16 228.97 C413.46 216.07, 425.06 206.53, 449.12 178.41 M405.16 228.97 C418.98 212.03, 433.83 194.52, 449.12 178.41 M410.8 228.58 C420.4 214.75, 432.68 204.9, 448.86 184.81 M410.8 228.58 C421.34 216.2, 433.46 203.13, 448.86 184.81 M415.79 228.94 C427.98 213.98, 440.95 200.62, 449.25 190.45 M415.79 228.94 C425.39 218.13, 435.55 207.05, 449.25 190.45 M421.43 228.55 C427.63 220.61, 433.6 212.69, 448.99 196.85 M421.43 228.55 C430.41 219.22, 437.14 209.17, 448.99 196.85 M426.42 228.91 C434.41 218.37, 440.05 212.56, 448.73 203.25 M426.42 228.91 C433.44 222.44, 440.02 214.61, 448.73 203.25 M432.06 228.51 C435.17 223.99, 438.85 219.93, 449.12 208.89 M432.06 228.51 C439.09 220.39, 443.94 214.65, 449.12 208.89 M437.05 228.87 C441.08 222.25, 445.58 216.31, 448.86 215.29 M437.05 228.87 C440.42 225.5, 441.37 222.97, 448.86 215.29 M442.69 228.48 C444.94 226.35, 445.39 224.08, 449.25 220.93 M442.69 228.48 C444.03 226.04, 446.3 224.82, 449.25 220.93 M0.25 226.82 C0.25 226.82, 0.25 226.82, 0.25 226.82 M0.25 226.82 C0.25 226.82, 0.25 226.82, 0.25 226.82 M5.9 226.43 C5.39 224.83, 2.79 223.75, -0.14 221.18 M5.9 226.43 C3.86 224.44, 1.7 222.77, -0.14 221.18 M12.29 226.69 C8.27 224.28, 8.84 223.64, 0.22 216.19 M12.29 226.69 C8.84 223.91, 6.45 220.93, 0.22 216.19 M17.94 226.29 C13.64 220.5, 8.99 216.12, -0.18 210.55 M17.94 226.29 C12.34 222.82, 8.05 216.88, -0.18 210.55 M24.34 226.56 C16.35 219.01, 8.25 211.77, 0.18 205.56 M24.34 226.56 C18.39 221.62, 11.36 215.17, 0.18 205.56 M30.73 226.82 C22.4 217.91, 12.18 211.16, -0.21 199.92 M30.73 226.82 C20.1 217.79, 9.67 209.13, -0.21 199.92 M36.38 226.42 C26.63 219.9, 21.86 214.42, 0.15 194.93 M36.38 226.42 C22.04 214.38, 9.85 202.61, 0.15 194.93 M42.77 226.68 C30.11 216.62, 17.92 204.38, -0.24 189.29 M42.77 226.68 C29.83 215.57, 17.34 204.9, -0.24 189.29 M48.42 226.29 C30.99 210.21, 14.67 197.19, 0.12 184.3 M48.42 226.29 C36.46 216.19, 26.18 205.76, 0.12 184.3 M54.81 226.55 C42.26 217.43, 27.91 204.98, -0.28 178.66 M54.81 226.55 C43.45 216.74, 31.64 205.91, -0.28 178.66 M61.21 226.81 C49.41 214.9, 32.88 201.82, 0.08 173.67 M61.21 226.81 C48.26 214, 33.71 202.24, 0.08 173.67 M66.86 226.42 C43.22 205.58, 16.03 184.3, -0.31 168.03 M66.86 226.42 C39.47 204.6, 15.12 181.2, -0.31 168.03 M73.25 226.68 C51.27 206.94, 28.73 187.32, 0.05 163.04 M73.25 226.68 C53.65 209.71, 35.8 193.5, 0.05 163.04 M78.9 226.28 C51.13 203.15, 19.29 177.37, -0.35 157.4 M78.9 226.28 C47.68 198.25, 15.5 171.1, -0.35 157.4 M85.29 226.55 C58.74 203.69, 35.47 181.32, 0.01 152.41 M85.29 226.55 C56.77 202.86, 28.68 177.5, 0.01 152.41 M91.69 226.81 C55.04 196.69, 21.66 165.73, 0.37 147.42 M91.69 226.81 C70.32 208.21, 48.23 189.92, 0.37 147.42 M97.34 226.41 C62.04 195.54, 27.37 167.46, -0.02 141.78 M97.34 226.41 C65.02 197.57, 33.04 169.32, -0.02 141.78 M103.73 226.67 C78.4 206.05, 51.38 184.12, 0.34 136.79 M103.73 226.67 C82 208.02, 62.1 191.05, 0.34 136.79 M109.38 226.28 C64.8 188.21, 25.33 153.47, -0.06 131.15 M109.38 226.28 C73.47 195.09, 38.02 164.54, -0.06 131.15 M115.77 226.54 C87.33 201.66, 56.4 175.41, 0.3 126.16 M115.77 226.54 C92.52 206.12, 70.32 184.99, 0.3 126.16 M122.17 226.8 C75.84 184.92, 25.89 141.71, -0.09 120.52 M122.17 226.8 C77.2 187.41, 29.89 146.75, -0.09 120.52 M127.81 226.41 C83.75 190.46, 41.15 153.24, 0.27 115.53 M127.81 226.41 C93.81 197.21, 61.35 167.88, 0.27 115.53 M134.21 226.67 C91.52 191.92, 50.18 155.73, -0.13 109.89 M134.21 226.67 C83.99 181.58, 34.47 138.8, -0.13 109.89 M139.86 226.28 C92.9 182.19, 43.22 139.97, 0.23 104.9 M139.86 226.28 C109.98 201.18, 82.34 177.14, 0.23 104.9 M146.25 226.54 C93.81 180.34, 38.17 136.21, -0.16 99.26 M146.25 226.54 C114.15 200.66, 82.26 170.98, -0.16 99.26 M152.65 226.8 C100.01 182.92, 49.14 136.84, 0.2 94.27 M152.65 226.8 C100.19 178.67, 45.27 132.5, 0.2 94.27 M158.29 226.4 C102.84 179.2, 49.11 133.11, -0.2 88.63 M158.29 226.4 C95.55 171.9, 33.68 118.15, -0.2 88.63 M164.69 226.66 C111.94 181.42, 61.56 137.92, 0.17 83.64 M164.69 226.66 C123.3 190.66, 80.44 153.47, 0.17 83.64 M171.09 226.93 C116.53 181.65, 64.07 135.57, -0.23 78 M171.09 226.93 C133 192.56, 94.51 159.96, -0.23 78 M176.73 226.53 C130.21 188.35, 82.11 147.13, 0.13 73.01 M176.73 226.53 C113.39 171.75, 47.97 113.95, 0.13 73.01 M183.13 226.79 C132.28 183.57, 82.09 138.86, -0.26 67.37 M183.13 226.79 C144.95 194.41, 109.32 162.85, -0.26 67.37 M188.77 226.4 C129.54 174.84, 69.41 124.6, 0.1 62.38 M188.77 226.4 C125.75 171.02, 62.97 118.04, 0.1 62.38 M195.17 226.66 C130.65 172.03, 65.72 117.25, -0.3 56.74 M195.17 226.66 C142.13 180.76, 89.9 134.81, -0.3 56.74 M201.57 226.92 C125.6 158.67, 46.02 91.04, 0.06 51.75 M201.57 226.92 C137 172.92, 71.66 117.13, 0.06 51.75 M207.21 226.53 C138.22 169.59, 73.28 110.11, -0.33 46.11 M207.21 226.53 C135.21 163.88, 63.52 100.79, -0.33 46.11 M213.61 226.79 C142.8 164.42, 70.55 103.36, 0.03 41.12 M213.61 226.79 C149.78 170.36, 86.77 114.87, 0.03 41.12 M219.25 226.39 C135.32 152.06, 48.72 75.65, -0.37 35.48 M219.25 226.39 C134.88 153.27, 49.63 80.24, -0.37 35.48 M225.65 226.66 C174.15 181.3, 120.58 134.38, -0.01 30.49 M225.65 226.66 C146.35 156.06, 66.46 87.11, -0.01 30.49 M232.05 226.92 C178.73 182.46, 130.69 138.62, 0.35 25.51 M232.05 226.92 C160.59 163.43, 88.31 102.52, 0.35 25.51 M237.69 226.52 C173.58 168.09, 109.12 112.43, -0.04 19.86 M237.69 226.52 C149.23 151.03, 60.93 74.36, -0.04 19.86 M244.09 226.78 C155.07 149.16, 66.53 70.42, 0.32 14.88 M244.09 226.78 C170.49 163.35, 99.49 101.55, 0.32 14.88 M249.73 226.39 C187.28 170.64, 124.44 117.11, -0.08 9.23 M249.73 226.39 C165.67 151.91, 79.37 78.07, -0.08 9.23 M256.13 226.65 C166.44 150.54, 76.19 71.11, 0.28 4.25 M256.13 226.65 C184.6 164.42, 111.75 102.42, 0.28 4.25 M262.53 226.91 C187.27 161.82, 109.34 97.64, 0.64 -0.74 M262.53 226.91 C191.17 164.56, 119.15 102.71, 0.64 -0.74 M268.17 226.52 C172.16 142.59, 74 59.72, 7.04 -0.48 M268.17 226.52 C198.55 166.59, 130.06 106.46, 7.04 -0.48 M274.57 226.78 C189 154.55, 105.16 80.41, 12.68 -0.87 M274.57 226.78 C201.83 162.95, 129.49 101.7, 12.68 -0.87 M280.21 226.38 C180.77 140.6, 81.38 53.74, 19.08 -0.61 M280.21 226.38 C177.53 136.79, 74.74 47.58, 19.08 -0.61 M286.61 226.65 C230.09 180.13, 175.3 130.15, 24.73 -1.01 M286.61 226.65 C216.42 166.15, 148.01 106.42, 24.73 -1.01 M293.01 226.91 C236.59 179.9, 183.09 130.93, 31.12 -0.75 M293.01 226.91 C218.22 161.97, 145.14 98.98, 31.12 -0.75 M298.65 226.51 C241.32 174.47, 180.06 122, 37.52 -0.48 M298.65 226.51 C227.89 165.48, 157.75 104.63, 37.52 -0.48 M305.05 226.77 C239.03 167.43, 172.54 111.96, 43.16 -0.88 M305.05 226.77 C229.76 161.78, 153.65 96, 43.16 -0.88 M310.69 226.38 C217.9 145.81, 125.08 62.92, 49.56 -0.62 M310.69 226.38 C226.31 154.72, 141.78 81.36, 49.56 -0.62 M317.09 226.64 C221.48 143.76, 125.57 61.78, 55.21 -1.01 M317.09 226.64 C251.47 170.8, 185.49 112.49, 55.21 -1.01 M323.49 226.9 C269.11 178.11, 213.81 131.2, 61.6 -0.75 M323.49 226.9 C227.06 142.38, 130.59 58.52, 61.6 -0.75 M329.13 226.51 C227.86 141.56, 126.6 53.97, 68 -0.49 M329.13 226.51 C237.91 148.92, 147.02 68.94, 68 -0.49 M335.53 226.77 C256.87 153.73, 175.58 85.68, 73.64 -0.88 M335.53 226.77 C242.91 145.37, 149.66 64.89, 73.64 -0.88 M341.17 226.37 C239.17 137.77, 136.14 48.05, 80.04 -0.62 M341.17 226.37 C283.26 177.25, 225.61 126.79, 80.04 -0.62 M347.57 226.64 C245.34 137.89, 140.17 48.82, 85.68 -1.02 M347.57 226.64 C256.7 146.79, 167.19 68.6, 85.68 -1.02 M353.97 226.9 C286.63 167.25, 217.89 107.76, 92.08 -0.76 M353.97 226.9 C282.83 163.85, 212.57 103.63, 92.08 -0.76 M359.61 226.5 C273.15 152.28, 188.83 76.52, 98.48 -0.49 M359.61 226.5 C258.02 136.73, 155.66 48.38, 98.48 -0.49 M366.01 226.76 C282.42 151.79, 199.38 78.61, 104.12 -0.89 M366.01 226.76 C275.7 146.99, 185.24 67.75, 104.12 -0.89 M371.65 226.37 C273.83 140.18, 176.62 54.04, 110.52 -0.63 M371.65 226.37 C298.62 163.04, 224.23 99.47, 110.52 -0.63 M378.05 226.63 C310.52 166.5, 244.16 108.57, 116.16 -1.02 M378.05 226.63 C306.82 165.5, 236.47 103.46, 116.16 -1.02 M384.45 226.89 C295.92 150.39, 207.63 72.47, 122.56 -0.76 M384.45 226.89 C281.03 138.74, 177.57 49.68, 122.56 -0.76 M390.09 226.5 C323.45 171.14, 259.1 114.53, 128.96 -0.5 M390.09 226.5 C306.97 154.04, 224.5 82.76, 128.96 -0.5 M396.49 226.76 C338.09 174.92, 276.61 120.62, 134.6 -0.89 M396.49 226.76 C342.79 177.81, 288.1 129.3, 134.6 -0.89 M402.13 226.36 C347.41 177.34, 292.4 128.89, 141 -0.63 M402.13 226.36 C321.33 157.21, 239.98 85.99, 141 -0.63 M408.53 226.63 C313.4 142.1, 215.97 59.13, 146.64 -1.03 M408.53 226.63 C349.62 174.45, 288.35 121.21, 146.64 -1.03 M414.93 226.89 C322.41 143.83, 230.64 63.48, 153.04 -0.76 M414.93 226.89 C326.88 148.14, 237.36 70.02, 153.04 -0.76 M420.57 226.49 C344.52 158.51, 264.71 90.49, 159.44 -0.5 M420.57 226.49 C351.33 166.13, 282.18 106.6, 159.44 -0.5 M426.97 226.75 C365.1 172.75, 302.34 118.51, 165.08 -0.9 M426.97 226.75 C358.55 168.64, 291.93 110.32, 165.08 -0.9 M432.61 226.36 C356.8 160.3, 283.25 94.02, 171.48 -0.64 M432.61 226.36 C349.74 154.13, 265.59 80.98, 171.48 -0.64 M439.01 226.62 C360.56 159.08, 281.49 92.44, 177.12 -1.03 M439.01 226.62 C345.91 143.33, 252.06 61.32, 177.12 -1.03 M445.41 226.88 C390.15 178.96, 336.13 129.98, 183.52 -0.77 M445.41 226.88 C364.72 155.25, 281.22 84.14, 183.52 -0.77 M448.78 224.52 C363.22 149.09, 277.63 75.52, 189.92 -0.51 M448.78 224.52 C367.96 153.1, 286.54 83.27, 189.92 -0.51 M449.14 219.53 C381.29 161.22, 314.05 104.6, 195.56 -0.9 M449.14 219.53 C352.97 135.7, 257 51.78, 195.56 -0.9 M448.75 213.89 C399.72 170.94, 348.02 127.03, 201.96 -0.64 M448.75 213.89 C389.97 161.49, 333.25 111.65, 201.96 -0.64 M449.11 208.9 C383.71 155.14, 322.77 101.78, 207.6 -1.04 M449.11 208.9 C362.45 133.65, 277.51 58.87, 207.6 -1.04 M448.72 203.26 C368.11 131.63, 286.25 59.53, 214 -0.77 M448.72 203.26 C401.6 162.55, 354.86 121.74, 214 -0.77 M449.08 198.27 C374.03 133.19, 296.72 65.94, 220.4 -0.51 M449.08 198.27 C386.1 144.29, 321.5 89.57, 220.4 -0.51 M448.68 192.63 C387.08 138.63, 326.18 85.2, 226.04 -0.91 M448.68 192.63 C369.54 124.2, 292.26 55.86, 226.04 -0.91 M449.04 187.64 C399.5 148, 352.32 106.27, 232.44 -0.65 M449.04 187.64 C382.21 129.93, 317.29 72.38, 232.44 -0.65 M448.65 182 C398.12 138.22, 346.32 94.34, 238.08 -1.04 M448.65 182 C370.79 114, 292.49 46.69, 238.08 -1.04 M449.01 177.01 C365.81 107.28, 285.32 35.63, 244.48 -0.78 M449.01 177.01 C368.96 106.54, 290.71 37.66, 244.48 -0.78 M448.61 171.37 C372.14 106.75, 293.75 39.4, 250.88 -0.52 M448.61 171.37 C404.73 135.54, 362.51 97.79, 250.88 -0.52 M448.97 166.38 C383.26 109.03, 318.27 53.71, 256.52 -0.91 M448.97 166.38 C410.42 131.08, 370.43 97.37, 256.52 -0.91 M448.58 160.74 C406.7 126.12, 365.06 89.55, 262.92 -0.65 M448.58 160.74 C376.44 95.77, 302.39 32.12, 262.92 -0.65 M448.94 155.75 C404.93 116.91, 358.28 76.54, 268.56 -1.05 M448.94 155.75 C407.92 120.21, 369.14 85.05, 268.56 -1.05 M448.54 150.11 C398.09 104.41, 342.58 59.78, 274.96 -0.78 M448.54 150.11 C401.28 109.98, 352.91 68.75, 274.96 -0.78 M448.9 145.12 C394.44 96.67, 335.77 48.67, 281.36 -0.52 M448.9 145.12 C411.71 112.72, 373.93 80.77, 281.36 -0.52 M448.51 139.48 C385.72 85.46, 326.35 32.21, 287 -0.92 M448.51 139.48 C387.53 87.26, 327.23 33.89, 287 -0.92 M448.87 134.49 C397.98 85.73, 344.95 41.32, 293.4 -0.66 M448.87 134.49 C417.44 108.65, 385.7 80.86, 293.4 -0.66 M448.47 128.85 C410.19 97.94, 373.43 64.93, 299.04 -1.05 M448.47 128.85 C405.55 91.99, 363.62 54.79, 299.04 -1.05 M448.83 123.86 C420.68 97.85, 386.95 71.48, 305.44 -0.79 M448.83 123.86 C413.48 92.48, 376.36 58.88, 305.44 -0.79 M449.19 118.88 C409.09 86.14, 370.17 49.8, 311.84 -0.53 M449.19 118.88 C403.49 80.41, 355.48 38.48, 311.84 -0.53 M448.8 113.23 C421.73 90.59, 390.56 62.11, 317.48 -0.92 M448.8 113.23 C412.53 80.09, 374.36 46.1, 317.48 -0.92 M449.16 108.25 C408.53 72.21, 368.74 34.96, 323.88 -0.66 M449.16 108.25 C407.23 71.46, 365.25 35.23, 323.88 -0.66 M448.76 102.6 C421.33 79.56, 391.59 54.86, 329.52 -1.06 M448.76 102.6 C412.58 69.64, 374.33 36.07, 329.52 -1.06 M449.12 97.62 C404.71 59.93, 363.38 23.98, 335.92 -0.79 M449.12 97.62 C422.25 75.04, 397.76 51.82, 335.92 -0.79 M448.73 91.97 C419.71 63.73, 386.99 40, 342.32 -0.53 M448.73 91.97 C410.48 58.4, 372.49 25.11, 342.32 -0.53 M449.09 86.98 C419.49 59.54, 386.73 31.79, 347.96 -0.93 M449.09 86.98 C423.44 65.86, 399.51 44.78, 347.96 -0.93 M448.7 81.34 C412.52 52.06, 377.99 20.92, 354.36 -0.67 M448.7 81.34 C414.23 51.95, 381.67 23.19, 354.36 -0.67 M449.06 76.35 C414.71 47.34, 383.57 18.64, 360 -1.06 M449.06 76.35 C419.79 50.9, 391.45 24.12, 360 -1.06 M448.66 70.71 C428.92 54.56, 411.09 36.56, 366.4 -0.8 M448.66 70.71 C429.14 53.96, 411.22 38.99, 366.4 -0.8 M449.02 65.72 C428.85 48.26, 411.13 32.31, 372.8 -0.54 M449.02 65.72 C424.97 43.05, 399.52 21.79, 372.8 -0.54 M448.63 60.08 C431.87 46.84, 417.35 35.61, 378.44 -0.93 M448.63 60.08 C431.95 45.34, 415.54 32.31, 378.44 -0.93 M448.99 55.09 C431.89 42.07, 417.63 27.64, 384.84 -0.67 M448.99 55.09 C433.65 43.38, 419.83 30.58, 384.84 -0.67 M448.59 49.45 C425.56 27.75, 401.59 8.14, 390.48 -1.06 M448.59 49.45 C436.9 38.69, 423.67 28.24, 390.48 -1.06 M448.95 44.46 C434.24 32.16, 418.17 19.43, 396.88 -0.8 M448.95 44.46 C433.96 33.16, 421.19 19.49, 396.88 -0.8 M448.56 38.82 C435.93 28.52, 423.82 16.03, 403.28 -0.54 M448.56 38.82 C432.86 26.39, 418.8 12.92, 403.28 -0.54 M448.92 33.83 C437.32 24.71, 424.12 12.77, 408.92 -0.94 M448.92 33.83 C437.69 24.55, 427.81 15.3, 408.92 -0.94 M448.52 28.19 C441.1 22.22, 430.72 14.91, 415.32 -0.68 M448.52 28.19 C435.3 17.34, 423.52 6.15, 415.32 -0.68 M448.88 23.2 C441.09 17.52, 434.28 12.03, 421.71 -0.41 M448.88 23.2 C441.57 17.01, 434.78 11.21, 421.71 -0.41 M448.49 17.56 C442.15 12.15, 435.62 4.56, 427.36 -0.81 M448.49 17.56 C444.55 14.54, 438.81 10.07, 427.36 -0.81 M448.85 12.57 C444.52 8.73, 441.12 7.19, 433.75 -0.55 M448.85 12.57 C444.73 10.3, 441.1 6.85, 433.75 -0.55 M449.21 7.59 C447.92 6.33, 442.99 2.22, 439.4 -0.94 M449.21 7.59 C445.91 5.49, 443.16 2.66, 439.4 -0.94 M448.81 1.94 C447.54 1.37, 446.99 -0.24, 445.8 -0.68 M448.81 1.94 C447.55 1.17, 446.5 0.05, 445.8 -0.68&quot; stroke=&quot;#fab005&quot; stroke-width=&quot;0.5&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M0 0 C106.12 0.29, 211.66 -0.21, 447.08 0 M0 0 C146.47 2.07, 293.79 1.96, 447.08 0 M447.08 0 C446.99 57.91, 449.8 116.57, 447.08 226.6 M447.08 0 C448.71 68.42, 448.47 138.21, 447.08 226.6 M447.08 226.6 C318.48 228.97, 189.03 229.09, 0 226.6 M447.08 226.6 C353.34 228.38, 258.8 228.59, 0 226.6 M0 226.6 C-0.48 170.15, -1.05 115.72, 0 0 M0 226.6 C-0.72 162.71, -0.57 96.38, 0 0&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g stroke-linecap=&quot;round&quot; transform=&quot;translate(6006.719735180048 15073.241012370681) rotate(0 2586.2982029389605 1540.7501843050077)&quot;&gt;&lt;path d=&quot;M32 0 C1493.71 0, 2955.43 0, 5140.6 0 M32 0 C1878.64 0, 3725.28 0, 5140.6 0 M5140.6 0 C5161.93 0, 5172.6 10.67, 5172.6 32 M5140.6 0 C5161.93 0, 5172.6 10.67, 5172.6 32 M5172.6 32 C5172.6 1112.74, 5172.6 2193.47, 5172.6 3049.5 M5172.6 32 C5172.6 1201.58, 5172.6 2371.16, 5172.6 3049.5 M5172.6 3049.5 C5172.6 3070.83, 5161.93 3081.5, 5140.6 3081.5 M5172.6 3049.5 C5172.6 3070.83, 5161.93 3081.5, 5140.6 3081.5 M5140.6 3081.5 C3401.06 3081.5, 1661.53 3081.5, 32 3081.5 M5140.6 3081.5 C3575.82 3081.5, 2011.04 3081.5, 32 3081.5 M32 3081.5 C10.67 3081.5, 0 3070.83, 0 3049.5 M32 3081.5 C10.67 3081.5, 0 3070.83, 0 3049.5 M0 3049.5 C0 2120.11, 0 1190.72, 0 32 M0 3049.5 C0 2338.27, 0 1627.03, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0&quot; stroke=&quot;#e03131&quot; stroke-width=&quot;4&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8015.0607995599075 13919.184757896366) rotate(443.6340755779962 508.1512743069943 14.518565639953522)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M 0,-6.50 Q 0,-6.50 5.56,-6.84 11.13,-7.19 19.06,-7.07 26.99,-6.95 38.71,-6.72 50.43,-6.49 67.93,-6.32 85.43,-6.15 108.36,-4.63 131.28,-3.11 160.44,-1.04 189.60,1.03 228.39,3.32 267.18,5.62 312.87,8.01 358.57,10.39 412.83,14.21 467.10,18.03 523.42,19.65 579.74,21.28 635.68,21.97 691.62,22.67 740.45,22.98 789.27,23.28 830.89,23.41 872.51,23.55 902.72,23.61 932.93,23.66 955.50,23.69 978.08,23.72 989.07,23.73 1000.06,23.75 1004.73,23.24 1009.40,22.73 1010.40,22.90 1011.41,23.06 1012.31,23.54 1013.21,24.02 1013.91,24.76 1014.61,25.50 1015.03,26.42 1015.46,27.35 1015.57,28.36 1015.68,29.37 1015.46,30.37 1015.24,31.36 1014.71,32.23 1014.19,33.11 1013.41,33.76 1012.63,34.42 1011.69,34.80 1010.74,35.18 1009.72,35.23 1008.71,35.28 1007.73,35.01 1006.75,34.74 1005.90,34.16 1005.06,33.59 1004.44,32.78 1003.83,31.97 1003.51,31.00 1003.18,30.04 1003.18,29.02 1003.18,28.00 1003.51,27.04 1003.84,26.07 1004.45,25.26 1005.07,24.45 1005.91,23.88 1006.76,23.31 1007.74,23.04 1008.72,22.77 1009.74,22.82 1010.75,22.88 1011.70,23.26 1012.65,23.64 1013.42,24.30 1014.20,24.96 1014.72,25.83 1015.24,26.70 1015.46,27.70 1015.68,28.69 1015.57,29.70 1015.46,30.72 1015.03,31.64 1014.60,32.56 1013.90,33.30 1013.20,34.04 1012.30,34.52 1011.40,34.99 1010.39,35.16 1009.39,35.32 1009.39,35.32 1009.39,35.32 1004.72,34.81 1000.05,34.29 989.06,34.28 978.07,34.28 955.49,34.26 932.91,34.24 902.69,34.20 872.47,34.15 830.84,34.04 789.20,33.93 740.35,33.65 691.49,33.37 635.46,32.71 579.43,32.04 522.89,30.46 466.34,28.87 412.18,25.13 358.01,21.39 312.27,19.10 266.53,16.80 227.68,14.63 188.82,12.46 159.69,10.57 130.56,8.68 107.99,7.42 85.43,6.15 67.93,6.32 50.43,6.49 38.71,6.72 26.99,6.95 19.06,7.07 11.13,7.19 5.56,6.84 0,6.50 -0.77,6.40 -1.55,6.31 -2.28,6.03 -3.02,5.75 -3.66,5.31 -4.31,4.86 -4.83,4.28 -5.35,3.69 -5.71,2.99 -6.07,2.30 -6.26,1.54 -6.45,0.78 -6.45,-0.00 -6.45,-0.78 -6.26,-1.54 -6.07,-2.30 -5.71,-2.99 -5.35,-3.69 -4.83,-4.28 -4.31,-4.86 -3.66,-5.31 -3.02,-5.75 -2.28,-6.03 -1.55,-6.31 -0.77,-6.40 0.00,-6.50 0.00,-6.50 L 0,-6.50 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8816.538597473364 14339.511926811925) rotate(443.6340755779962 -181.4827166469413 -79.85229563332086)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M -4.46,4.47 Q -4.46,4.47 -10.03,-1.08 -15.60,-6.64 -21.80,-11.62 -27.99,-16.60 -35.95,-21.45 -43.91,-26.30 -51.65,-31.31 -59.39,-36.32 -69.30,-41.08 -79.21,-45.83 -91.69,-50.64 -104.17,-55.45 -119.55,-63.21 -134.93,-70.98 -151.00,-78.38 -167.07,-85.77 -184.96,-93.07 -202.85,-100.36 -220.26,-107.67 -237.68,-114.98 -254.64,-120.81 -271.60,-126.63 -289.88,-131.88 -308.16,-137.13 -323.07,-142.20 -337.97,-147.27 -345.53,-149.25 -353.10,-151.22 -356.49,-151.67 -359.88,-152.12 -360.83,-152.56 -361.78,-153.00 -362.54,-153.72 -363.30,-154.44 -363.79,-155.37 -364.28,-156.29 -364.45,-157.33 -364.62,-158.36 -364.45,-159.40 -364.28,-160.43 -363.78,-161.36 -363.29,-162.28 -362.53,-163.00 -361.77,-163.72 -360.82,-164.16 -359.87,-164.60 -358.83,-164.71 -357.78,-164.83 -356.76,-164.60 -355.74,-164.37 -354.84,-163.83 -353.94,-163.29 -353.26,-162.49 -352.59,-161.69 -352.20,-160.72 -351.81,-159.74 -351.76,-158.70 -351.70,-157.65 -351.98,-156.64 -352.26,-155.63 -352.85,-154.77 -353.44,-153.90 -354.28,-153.26 -355.11,-152.63 -356.10,-152.30 -357.10,-151.96 -358.15,-151.96 -359.19,-151.97 -360.19,-152.30 -361.18,-152.64 -362.01,-153.27 -362.85,-153.91 -363.43,-154.77 -364.02,-155.64 -364.30,-156.65 -364.58,-157.66 -364.52,-158.71 -364.46,-159.76 -364.08,-160.73 -363.69,-161.70 -363.01,-162.50 -362.33,-163.30 -361.43,-163.84 -360.53,-164.38 -359.51,-164.60 -358.48,-164.83 -357.44,-164.71 -356.40,-164.60 -356.40,-164.60 -356.40,-164.60 -353.27,-163.23 -350.14,-161.86 -342.35,-159.56 -334.57,-157.27 -319.91,-152.28 -305.25,-147.30 -286.70,-141.98 -268.16,-136.66 -250.86,-130.73 -233.57,-124.80 -216.19,-117.53 -198.82,-110.27 -180.70,-102.91 -162.59,-95.56 -146.31,-88.12 -130.04,-80.68 -115.14,-73.20 -100.25,-65.71 -87.33,-60.82 -74.42,-55.93 -63.85,-50.96 -53.28,-45.98 -45.58,-41.20 -37.88,-36.42 -29.15,-31.33 -20.42,-26.24 -13.54,-20.92 -6.65,-15.61 -1.09,-10.04 4.46,-4.47 4.93,-3.87 5.40,-3.27 5.72,-2.57 6.03,-1.88 6.17,-1.13 6.31,-0.38 6.26,0.37 6.21,1.13 5.99,1.86 5.76,2.59 5.37,3.24 4.97,3.89 4.43,4.43 3.89,4.97 3.24,5.37 2.59,5.76 1.86,5.99 1.13,6.21 0.37,6.26 -0.38,6.31 -1.13,6.17 -1.88,6.03 -2.57,5.72 -3.27,5.40 -3.87,4.93 -4.47,4.46 -4.47,4.46 L -4.46,4.47 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(8651.389236492802 14147.19664696462) rotate(443.6340755779962 -225.03822895322264 96.79068375112729)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M 0,6.49 Q 0,6.49 -6.95,6.66 -13.91,6.82 -21.02,6.91 -28.12,7.00 -38.75,9.46 -49.37,11.91 -63.65,16.99 -77.94,22.08 -94.94,31.03 -111.94,39.98 -134.89,49.50 -157.85,59.02 -185.53,71.31 -213.22,83.61 -244.53,97.18 -275.83,110.76 -301.53,123.41 -327.24,136.07 -349.23,148.35 -371.21,160.63 -391.81,171.47 -412.40,182.31 -422.66,186.97 -432.92,191.62 -437.01,194.04 -441.09,196.45 -442.08,196.72 -443.07,196.99 -444.10,196.93 -445.12,196.87 -446.07,196.48 -447.02,196.09 -447.80,195.43 -448.57,194.76 -449.10,193.88 -449.62,192.99 -449.83,191.99 -450.05,190.99 -449.93,189.97 -449.81,188.95 -449.37,188.02 -448.94,187.10 -448.23,186.36 -447.52,185.62 -446.61,185.14 -445.70,184.67 -444.69,184.51 -443.68,184.35 -442.67,184.52 -441.65,184.70 -440.75,185.18 -439.85,185.67 -439.15,186.42 -438.45,187.17 -438.03,188.10 -437.60,189.03 -437.50,190.05 -437.39,191.07 -437.62,192.07 -437.85,193.07 -438.38,193.95 -438.92,194.82 -439.70,195.48 -440.49,196.14 -441.44,196.51 -442.40,196.88 -443.42,196.93 -444.44,196.98 -445.43,196.70 -446.42,196.42 -447.26,195.84 -448.11,195.26 -448.72,194.44 -449.34,193.62 -449.66,192.64 -449.98,191.67 -449.97,190.64 -449.96,189.62 -449.63,188.65 -449.30,187.68 -448.67,186.87 -448.04,186.06 -447.19,185.49 -446.34,184.92 -446.34,184.92 -446.34,184.92 -441.83,183.42 -437.33,181.93 -427.36,177.39 -417.39,172.84 -396.93,162.03 -376.48,151.23 -354.27,138.77 -332.06,126.31 -306.15,113.48 -280.23,100.65 -249.02,87.00 -217.80,73.36 -190.04,60.89 -162.29,48.42 -139.90,38.96 -117.52,29.50 -99.87,19.99 -82.22,10.47 -67.35,4.84 -52.48,-0.78 -40.35,-3.89 -28.22,-7.00 -21.06,-6.91 -13.91,-6.82 -6.95,-6.66 0,-6.49 0.77,-6.40 1.55,-6.30 2.28,-6.02 3.01,-5.75 3.66,-5.30 4.30,-4.86 4.82,-4.27 5.34,-3.69 5.71,-2.99 6.07,-2.30 6.26,-1.54 6.44,-0.78 6.44,0.00 6.44,0.78 6.26,1.54 6.07,2.30 5.71,2.99 5.34,3.69 4.82,4.27 4.30,4.86 3.66,5.30 3.01,5.75 2.28,6.03 1.55,6.30 0.77,6.40 -0.00,6.49 -0.00,6.49 L 0,6.49 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;g transform=&quot;translate(3444.0185484705707 13757.99083046475) rotate(0 991.9998168945312 564.0000915527344)&quot; stroke=&quot;none&quot;&gt;&lt;path fill=&quot;#1e1e1e&quot; d=&quot;M 4.83,-4.83 Q 4.83,-4.83 11.58,2.21 18.33,9.26 25.75,16.90 33.17,24.55 42.91,32.18 52.65,39.82 61.64,47.93 70.64,56.04 81.08,63.89 91.53,71.74 102.53,77.21 113.53,82.68 122.97,87.42 132.42,92.17 138.63,93.81 144.85,95.45 151.08,101.54 157.32,107.64 163.84,114.57 170.36,121.50 175.05,123.64 179.75,125.78 186.92,132.15 194.10,138.53 201.13,143.16 208.16,147.80 213.23,149.23 218.29,150.65 223.82,153.93 229.34,157.20 236.09,163.67 242.85,170.13 254.19,177.04 265.54,183.96 277.53,191.77 289.53,199.58 303.60,207.42 317.68,215.26 330.73,223.34 343.78,231.41 358.34,239.36 372.90,247.31 386.15,255.40 399.40,263.50 414.05,271.45 428.71,279.41 442.00,287.49 455.29,295.58 470.23,305.98 485.16,316.38 495.92,322.99 506.67,329.59 518.25,337.07 529.83,344.55 541.64,352.33 553.46,360.10 562.95,365.63 572.44,371.16 583.51,378.19 594.58,385.23 603.74,390.43 612.89,395.63 623.45,400.03 634.01,404.43 645.79,411.10 657.58,417.77 671.86,427.56 686.14,437.36 699.01,446.06 711.89,454.76 726.39,462.95 740.89,471.15 754.11,479.33 767.34,487.51 781.99,495.49 796.65,503.47 804.95,506.76 813.25,510.05 819.20,511.14 825.15,512.22 831.32,518.02 837.49,523.81 848.16,531.26 858.84,538.71 864.07,543.32 869.29,547.94 875.47,551.92 881.64,555.91 886.27,557.10 890.89,558.30 896.37,561.58 901.86,564.86 910.43,571.05 919.01,577.24 927.01,582.15 935.01,587.07 945.48,593.95 955.94,600.84 967.23,608.41 978.53,615.97 989.83,621.32 1001.13,626.66 1008.68,631.52 1016.24,636.37 1021.26,637.70 1026.28,639.02 1031.77,642.22 1037.25,645.43 1043.51,648.90 1049.77,652.38 1056.97,656.36 1064.16,660.34 1069.15,661.46 1074.15,662.57 1079.77,665.74 1085.39,668.91 1093.06,673.80 1100.72,678.68 1104.86,680.97 1108.99,683.27 1114.01,687.31 1119.02,691.35 1124.84,695.10 1130.67,698.84 1135.04,700.00 1139.41,701.16 1147.16,707.53 1154.90,713.90 1161.80,718.50 1168.71,723.09 1180.77,729.75 1192.83,736.42 1205.06,744.06 1217.29,751.70 1231.45,759.48 1245.61,767.26 1258.69,775.32 1271.78,783.37 1288.50,791.24 1305.22,799.12 1321.67,807.16 1338.12,815.21 1351.83,820.87 1365.54,826.53 1380.75,833.62 1395.95,840.72 1409.12,845.96 1422.28,851.20 1436.94,855.69 1451.60,860.18 1465.20,866.88 1478.79,873.57 1488.54,876.18 1498.28,878.78 1504.80,879.59 1511.31,880.41 1517.40,883.16 1523.48,885.91 1531.54,886.98 1539.60,888.04 1549.07,893.65 1558.54,899.26 1565.96,901.21 1573.38,903.16 1581.86,906.63 1590.34,910.10 1594.79,913.93 1599.24,917.77 1604.06,918.30 1608.89,918.84 1614.80,921.94 1620.70,925.04 1631.22,928.68 1641.73,932.32 1649.07,936.15 1656.40,939.97 1664.02,944.05 1671.63,948.14 1676.72,949.27 1681.82,950.40 1686.07,950.67 1690.32,950.94 1697.75,953.80 1705.19,956.67 1709.80,957.39 1714.41,958.11 1720.20,961.21 1725.98,964.31 1733.35,969.08 1740.71,973.84 1748.10,976.38 1755.48,978.91 1765.29,983.10 1775.10,987.29 1781.06,990.87 1787.02,994.46 1792.56,998.63 1798.10,1002.81 1806.76,1007.12 1815.42,1011.44 1823.63,1015.35 1831.84,1019.25 1838.93,1020.66 1846.03,1022.07 1849.82,1025.64 1853.62,1029.21 1859.52,1031.98 1865.42,1034.75 1871.37,1039.47 1877.32,1044.18 1885.18,1048.10 1893.04,1052.02 1899.25,1055.19 1905.47,1058.36 1913.46,1062.60 1921.45,1066.83 1923.55,1071.20 1925.65,1075.56 1933.42,1079.76 1941.19,1083.95 1949.87,1084.81 1958.55,1085.66 1962.48,1089.14 1966.41,1092.62 1971.03,1096.82 1975.65,1101.02 1971.87,1104.29 1968.08,1107.55 1963.17,1098.65 1958.26,1089.76 1957.42,1084.69 1956.58,1079.61 1953.07,1072.03 1949.56,1064.44 1948.93,1059.90 1948.30,1055.36 1944.91,1048.19 1941.52,1041.01 1940.91,1036.14 1940.29,1031.26 1940.10,1026.96 1939.90,1022.67 1938.27,1018.03 1936.64,1013.39 1935.43,1007.51 1934.22,1001.63 1934.01,994.12 1933.80,986.61 1934.04,978.99 1934.28,971.36 1932.59,964.72 1930.91,958.09 1930.08,949.41 1929.26,940.73 1929.06,932.45 1928.87,924.18 1928.48,918.42 1928.08,912.66 1927.75,907.95 1927.43,903.25 1925.42,897.92 1923.41,892.58 1922.07,886.91 1920.73,881.24 1920.03,876.36 1919.33,871.48 1918.93,867.05 1918.54,862.62 1918.09,854.33 1917.65,846.04 1917.38,837.99 1917.11,829.93 1916.93,821.92 1916.74,813.91 1916.60,805.91 1916.46,797.91 1916.36,789.91 1916.26,781.91 1916.22,777.91 1916.18,773.91 1916.35,772.49 1916.52,771.08 1917.03,769.75 1917.53,768.42 1918.34,767.25 1919.15,766.07 1920.22,765.13 1921.28,764.18 1922.54,763.52 1923.81,762.86 1925.19,762.52 1926.57,762.18 1928.00,762.18 1929.42,762.18 1930.80,762.52 1932.19,762.86 1933.45,763.52 1934.71,764.19 1935.77,765.13 1936.84,766.07 1937.65,767.25 1938.46,768.42 1938.96,769.75 1939.47,771.08 1939.64,772.50 1939.81,773.91 1939.98,780.45 1940.16,786.99 1941.77,794.93 1943.38,802.86 1944.57,808.68 1945.75,814.49 1946.26,819.40 1946.77,824.31 1948.57,829.46 1950.37,834.61 1951.67,840.48 1952.96,846.34 1953.56,851.34 1954.17,856.33 1954.16,863.22 1954.16,870.10 1954.21,874.97 1954.27,879.84 1957.43,890.35 1960.59,900.86 1961.11,906.26 1961.63,911.66 1961.93,916.33 1962.23,920.99 1962.43,925.30 1962.62,929.60 1962.86,937.80 1963.11,945.99 1963.27,954.03 1963.43,962.07 1965.04,967.25 1966.66,972.44 1968.26,977.89 1969.86,983.33 1970.45,988.10 1971.05,992.87 1971.29,997.22 1971.53,1001.56 1971.71,1009.77 1971.89,1017.99 1971.96,1026.03 1972.03,1034.06 1975.87,1038.55 1979.72,1043.04 1982.53,1048.68 1985.34,1054.33 1986.29,1059.40 1987.24,1064.47 1987.56,1068.94 1987.88,1073.41 1987.70,1083.79 1987.51,1094.18 1990.55,1103.29 1993.59,1112.41 1990.97,1119.98 1988.34,1127.54 1983.27,1131.55 1978.20,1135.55 1972.97,1136.99 1967.74,1138.43 1963.20,1138.90 1958.66,1139.37 1950.35,1139.65 1942.04,1139.92 1935.69,1139.67 1929.33,1139.41 1922.05,1138.98 1914.76,1138.55 1907.06,1138.10 1899.37,1137.65 1893.80,1137.70 1888.23,1137.74 1881.26,1137.54 1874.29,1137.34 1869.03,1137.45 1863.77,1137.56 1859.24,1137.72 1854.70,1137.88 1846.38,1138.18 1838.05,1138.48 1831.71,1138.33 1825.37,1138.17 1820.37,1138.24 1815.38,1138.31 1810.96,1138.42 1806.53,1138.53 1797.75,1137.85 1788.97,1137.18 1782.94,1137.20 1776.91,1137.23 1767.45,1136.71 1757.98,1136.18 1749.36,1135.79 1740.74,1135.40 1730.18,1135.11 1719.61,1134.82 1710.52,1134.61 1701.43,1134.40 1692.97,1134.25 1684.51,1134.10 1674.01,1133.99 1663.51,1133.87 1654.45,1133.78 1645.39,1133.70 1639.24,1134.07 1633.09,1134.43 1628.17,1134.83 1623.26,1135.23 1618.87,1135.59 1614.48,1135.95 1608.02,1136.03 1601.55,1136.11 1596.50,1136.35 1591.46,1136.59 1587.01,1136.84 1582.57,1137.08 1574.30,1137.49 1566.03,1137.91 1557.98,1138.22 1549.93,1138.53 1541.92,1138.76 1533.91,1138.99 1525.91,1139.16 1517.91,1139.33 1513.91,1139.40 1509.91,1139.47 1508.54,1139.30 1507.16,1139.13 1505.87,1138.64 1504.58,1138.15 1503.44,1137.37 1502.30,1136.58 1501.38,1135.55 1500.47,1134.51 1499.83,1133.29 1499.18,1132.06 1498.85,1130.72 1498.52,1129.38 1498.52,1127.99 1498.52,1126.61 1498.85,1125.27 1499.18,1123.93 1499.83,1122.70 1500.47,1121.48 1501.39,1120.44 1502.30,1119.41 1503.44,1118.62 1504.58,1117.84 1505.87,1117.35 1507.16,1116.86 1508.54,1116.69 1509.91,1116.52 1518.75,1116.57 1527.59,1116.61 1534.61,1116.98 1541.62,1117.36 1546.90,1117.37 1552.19,1117.37 1559.03,1117.64 1565.88,1117.90 1571.09,1117.85 1576.29,1117.80 1580.81,1117.69 1585.32,1117.58 1591.84,1117.76 1598.36,1117.94 1605.73,1118.26 1613.10,1118.58 1620.83,1118.92 1628.56,1119.26 1634.15,1119.13 1639.74,1119.00 1644.41,1118.80 1649.09,1118.61 1653.37,1118.42 1657.66,1118.23 1665.83,1117.90 1674.01,1117.58 1682.04,1117.34 1690.07,1117.09 1698.07,1116.91 1706.08,1116.73 1714.08,1116.59 1722.08,1116.46 1728.38,1116.70 1734.68,1116.94 1741.96,1117.35 1749.24,1117.75 1756.79,1118.20 1764.35,1118.64 1768.27,1116.66 1772.20,1114.69 1777.65,1113.31 1783.11,1111.93 1787.90,1111.27 1792.69,1110.61 1797.08,1110.26 1801.46,1109.91 1809.71,1109.55 1817.96,1109.19 1824.30,1109.36 1830.65,1109.53 1835.63,1109.48 1840.62,1109.43 1845.04,1109.34 1849.46,1109.25 1857.71,1109.06 1865.97,1108.87 1874.02,1108.72 1882.06,1108.57 1890.07,1108.45 1898.08,1108.34 1906.08,1108.25 1914.08,1108.17 1922.08,1108.10 1930.08,1108.04 1938.08,1107.99 1946.08,1107.94 1954.08,1107.91 1962.08,1107.87 1967.78,1107.77 1973.48,1107.67 1975.45,1107.99 1977.42,1108.31 1979.18,1109.24 1980.94,1110.18 1982.32,1111.63 1983.69,1113.08 1984.52,1114.89 1985.36,1116.70 1985.58,1118.68 1985.79,1120.66 1985.36,1122.61 1984.94,1124.56 1983.91,1126.27 1982.88,1127.98 1981.36,1129.27 1979.84,1130.56 1977.98,1131.30 1976.13,1132.04 1974.14,1132.14 1972.15,1132.25 1970.23,1131.72 1968.30,1131.18 1966.65,1130.07 1965.00,1128.95 1963.79,1127.36 1962.59,1125.77 1961.95,1123.88 1961.31,1121.99 1961.31,1119.99 1961.31,1118.00 1961.95,1116.11 1962.59,1114.22 1963.80,1112.63 1965.00,1111.04 1966.66,1109.92 1968.31,1108.80 1970.23,1108.27 1972.15,1107.74 1974.14,1107.85 1976.13,1107.95 1977.99,1108.69 1979.84,1109.43 1981.36,1110.72 1982.88,1112.01 1983.91,1113.72 1984.94,1115.43 1985.37,1117.38 1985.79,1119.33 1985.58,1121.31 1985.36,1123.30 1984.52,1125.11 1983.69,1126.92 1982.31,1128.37 1980.94,1129.81 1979.18,1130.75 1977.42,1131.68 1975.45,1132.00 1973.48,1132.32 1973.48,1132.32 1973.48,1132.32 1967.78,1132.22 1962.08,1132.12 1954.08,1132.08 1946.08,1132.05 1938.08,1132.00 1930.08,1131.95 1922.08,1131.89 1914.08,1131.82 1906.08,1131.74 1898.08,1131.65 1890.07,1131.54 1882.06,1131.42 1874.02,1131.27 1865.97,1131.12 1857.72,1130.94 1849.47,1130.75 1845.06,1130.66 1840.64,1130.58 1835.67,1130.54 1830.69,1130.50 1820.45,1130.61 1810.20,1130.72 1802.42,1130.67 1794.63,1130.61 1786.98,1131.36 1779.33,1132.10 1772.11,1134.73 1764.89,1137.35 1757.07,1137.80 1749.24,1138.24 1741.96,1138.64 1734.68,1139.05 1728.38,1139.29 1722.08,1139.53 1714.08,1139.40 1706.08,1139.26 1698.07,1139.08 1690.07,1138.90 1682.04,1138.66 1674.01,1138.41 1665.83,1138.09 1657.66,1137.76 1653.37,1137.57 1649.09,1137.38 1644.41,1137.19 1639.74,1136.99 1634.15,1136.86 1628.56,1136.73 1620.83,1137.07 1613.10,1137.41 1605.73,1137.73 1598.36,1138.05 1591.84,1138.23 1585.32,1138.41 1580.81,1138.30 1576.29,1138.19 1571.09,1138.14 1565.88,1138.09 1559.03,1138.35 1552.19,1138.62 1546.90,1138.63 1541.62,1138.63 1534.61,1139.01 1527.59,1139.38 1518.75,1139.42 1509.91,1139.47 1508.54,1139.30 1507.16,1139.13 1505.87,1138.64 1504.58,1138.15 1503.44,1137.37 1502.30,1136.58 1501.39,1135.55 1500.47,1134.51 1499.83,1133.29 1499.18,1132.06 1498.85,1130.72 1498.52,1129.38 1498.52,1128.00 1498.52,1126.61 1498.85,1125.27 1499.18,1123.93 1499.83,1122.70 1500.47,1121.48 1501.38,1120.44 1502.30,1119.41 1503.44,1118.62 1504.58,1117.84 1505.87,1117.35 1507.16,1116.86 1508.54,1116.69 1509.91,1116.52 1513.91,1116.59 1517.91,1116.66 1525.91,1116.83 1533.91,1117.00 1541.92,1117.23 1549.93,1117.46 1557.98,1117.77 1566.03,1118.08 1574.30,1118.50 1582.57,1118.91 1587.01,1119.15 1591.46,1119.40 1596.50,1119.64 1601.55,1119.88 1608.02,1119.96 1614.48,1120.04 1618.87,1120.40 1623.26,1120.76 1628.17,1121.16 1633.09,1121.56 1639.24,1121.92 1645.39,1122.29 1654.45,1122.21 1663.51,1122.12 1674.01,1122.01 1684.51,1121.89 1692.97,1121.74 1701.43,1121.60 1710.52,1121.38 1719.61,1121.17 1730.18,1120.88 1740.74,1120.59 1749.36,1120.20 1757.98,1119.81 1767.45,1119.28 1776.91,1118.76 1782.94,1118.79 1788.97,1118.81 1797.75,1118.14 1806.53,1117.46 1810.96,1117.57 1815.38,1117.68 1820.37,1117.75 1825.37,1117.82 1831.71,1117.66 1838.05,1117.51 1846.38,1117.81 1854.70,1118.11 1859.24,1118.27 1863.77,1118.43 1869.03,1118.54 1874.29,1118.64 1881.26,1118.44 1888.22,1118.24 1893.79,1118.28 1899.36,1118.32 1907.04,1117.87 1914.73,1117.41 1921.99,1116.96 1929.24,1116.51 1939.32,1116.17 1949.39,1115.84 1956.17,1115.59 1962.95,1115.33 1966.56,1112.38 1970.18,1109.43 1967.26,1102.33 1964.34,1095.23 1963.85,1085.10 1963.37,1074.98 1962.95,1069.02 1962.53,1063.06 1959.92,1059.20 1957.31,1055.33 1953.60,1050.68 1949.90,1046.03 1948.94,1036.07 1947.98,1026.12 1947.99,1018.21 1948.00,1010.30 1947.86,1002.80 1947.71,995.29 1947.12,989.51 1946.53,983.72 1943.59,977.28 1940.64,970.85 1940.60,966.46 1940.56,962.08 1940.70,954.07 1940.84,946.07 1940.99,938.03 1941.15,929.99 1941.13,921.68 1941.11,913.37 1940.79,908.65 1940.46,903.94 1939.78,899.05 1939.10,894.16 1936.29,887.67 1933.48,881.19 1933.37,875.95 1933.27,870.71 1932.59,860.71 1931.92,850.72 1931.11,846.49 1930.29,842.25 1927.14,834.47 1923.99,826.69 1922.90,818.76 1921.81,810.83 1918.82,798.91 1915.83,786.99 1916.01,780.45 1916.18,773.91 1916.35,772.50 1916.52,771.08 1917.03,769.75 1917.53,768.42 1918.34,767.25 1919.15,766.07 1920.22,765.13 1921.28,764.19 1922.54,763.52 1923.80,762.86 1925.19,762.52 1926.57,762.18 1927.99,762.18 1929.42,762.18 1930.80,762.52 1932.18,762.86 1933.45,763.52 1934.71,764.18 1935.77,765.13 1936.84,766.07 1937.65,767.25 1938.46,768.42 1938.96,769.75 1939.47,771.08 1939.64,772.49 1939.81,773.91 1939.77,777.91 1939.73,781.91 1939.63,789.91 1939.53,797.91 1939.39,805.91 1939.25,813.91 1939.07,821.90 1938.89,829.90 1938.67,837.89 1938.44,845.88 1938.21,853.83 1937.98,861.79 1938.09,869.82 1938.20,877.85 1938.84,882.39 1939.48,886.93 1942.13,894.81 1944.79,902.68 1944.62,907.41 1944.45,912.13 1944.42,917.74 1944.39,923.34 1945.05,930.98 1945.72,938.62 1946.92,945.75 1948.11,952.87 1951.18,961.77 1954.25,970.67 1954.86,977.95 1955.46,985.23 1956.93,995.22 1958.39,1005.21 1961.71,1016.84 1965.02,1028.46 1965.62,1033.74 1966.21,1039.02 1968.93,1048.24 1971.65,1057.47 1975.20,1061.54 1978.75,1065.61 1979.92,1070.85 1981.10,1076.08 1981.72,1080.97 1982.34,1085.86 1986.13,1090.30 1989.91,1094.73 1992.49,1101.58 1995.07,1108.43 1992.77,1115.21 1990.46,1122.00 1986.42,1123.89 1982.39,1125.78 1974.65,1123.81 1966.92,1121.84 1962.14,1117.01 1957.37,1112.17 1951.11,1109.62 1944.85,1107.06 1939.93,1106.16 1935.00,1105.26 1929.41,1100.69 1923.82,1096.13 1916.61,1093.12 1909.39,1090.10 1906.00,1085.79 1902.62,1081.47 1894.79,1077.37 1886.97,1073.27 1881.61,1068.92 1876.24,1064.58 1868.72,1060.24 1861.20,1055.90 1854.39,1052.48 1847.57,1049.05 1839.30,1044.71 1831.03,1040.37 1822.91,1036.09 1814.79,1031.81 1806.41,1027.27 1798.03,1022.73 1792.51,1020.36 1786.99,1018.00 1782.45,1014.60 1777.91,1011.21 1768.10,1005.57 1758.30,999.94 1752.68,998.36 1747.07,996.79 1741.42,994.27 1735.77,991.75 1730.84,986.99 1725.90,982.23 1718.20,978.43 1710.50,974.63 1704.92,973.14 1699.33,971.66 1693.59,969.35 1687.86,967.03 1682.77,965.93 1677.67,964.83 1671.60,962.74 1665.53,960.65 1657.70,957.15 1649.87,953.66 1642.52,950.47 1635.16,947.28 1629.20,944.69 1623.23,942.09 1618.05,940.14 1612.88,938.19 1609.03,935.37 1605.18,932.54 1597.89,929.96 1590.60,927.37 1588.18,923.87 1585.75,920.37 1578.07,917.39 1570.38,914.42 1561.41,912.03 1552.44,909.63 1544.99,905.03 1537.55,900.43 1527.45,899.11 1517.36,897.80 1513.20,894.94 1509.04,892.09 1502.27,890.55 1495.51,889.00 1484.81,886.06 1474.12,883.11 1461.29,876.74 1448.46,870.37 1433.39,865.77 1418.33,861.17 1404.86,855.85 1391.39,850.52 1376.39,843.58 1361.40,836.64 1347.34,830.91 1333.28,825.19 1316.85,817.28 1300.43,809.36 1283.10,801.33 1265.76,793.30 1252.83,785.58 1239.90,777.86 1225.33,770.17 1210.75,762.48 1198.66,755.36 1186.57,748.25 1173.88,741.84 1161.19,735.43 1153.15,730.92 1145.10,726.40 1139.32,722.16 1133.55,717.92 1127.76,715.75 1121.97,713.59 1114.69,709.51 1107.42,705.43 1103.27,701.89 1099.12,698.35 1092.62,691.87 1086.11,685.38 1081.54,683.80 1076.96,682.23 1073.36,679.41 1069.76,676.59 1063.88,674.44 1057.99,672.29 1050.42,668.58 1042.84,664.88 1036.00,661.09 1029.16,657.30 1025.46,654.23 1021.76,651.17 1015.99,648.57 1010.22,645.96 1003.22,641.58 996.21,637.20 984.07,631.63 971.94,626.07 960.55,618.79 949.16,611.50 938.73,605.10 928.31,598.70 919.62,594.00 910.93,589.29 901.89,583.67 892.84,578.05 889.33,575.18 885.82,572.31 880.12,569.87 874.42,567.43 867.10,562.86 859.79,558.29 854.94,553.59 850.08,548.90 844.15,544.03 838.22,539.16 833.23,535.96 828.23,532.75 824.74,528.11 821.25,523.47 815.31,521.64 809.37,519.82 800.50,516.26 791.63,512.70 776.72,504.58 761.81,496.45 748.76,488.37 735.71,480.30 720.85,471.88 706.00,463.47 693.09,454.75 680.19,446.03 666.29,436.47 652.39,426.92 641.16,420.53 629.93,414.14 618.82,409.47 607.70,404.79 598.31,399.46 588.93,394.13 578.03,387.20 567.13,380.28 557.39,374.61 547.65,368.94 535.86,361.20 524.08,353.45 512.60,346.06 501.11,338.66 490.09,331.91 479.06,325.16 464.39,314.96 449.71,304.77 436.63,296.86 423.55,288.95 408.63,280.91 393.70,272.88 380.64,264.99 367.59,257.11 352.71,249.12 337.84,241.13 324.94,233.33 312.04,225.54 297.52,217.70 282.99,209.86 271.00,202.41 259.00,194.96 246.36,187.63 233.72,180.29 227.34,174.86 220.96,169.43 217.22,166.38 213.49,163.33 207.59,160.68 201.69,158.04 193.75,153.10 185.81,148.17 179.41,142.84 173.00,137.52 167.38,133.78 161.77,130.03 154.85,123.13 147.93,116.23 144.19,111.43 140.45,106.62 134.03,104.25 127.60,101.88 118.12,97.19 108.64,92.51 96.77,86.60 84.89,80.70 73.97,72.63 63.06,64.55 54.27,56.83 45.48,49.10 35.02,41.14 24.55,33.17 16.91,25.75 9.26,18.33 2.21,11.58 -4.83,4.83 -5.34,4.18 -5.85,3.53 -6.19,2.78 -6.53,2.03 -6.68,1.22 -6.82,0.41 -6.77,-0.41 -6.72,-1.23 -6.48,-2.02 -6.23,-2.80 -5.81,-3.51 -5.38,-4.21 -4.80,-4.80 -4.21,-5.38 -3.51,-5.81 -2.80,-6.23 -2.02,-6.48 -1.23,-6.73 -0.40,-6.77 0.41,-6.82 1.22,-6.68 2.03,-6.53 2.78,-6.19 3.54,-5.85 4.18,-5.34 4.83,-4.83 4.83,-4.83 L 4.83,-4.83 Z&quot;&gt;&lt;/path&gt;&lt;/g&gt;&lt;/svg&gt;</file><file path="fe/.claude/commands/tm/add-dependency.md">Add Dependency

Arguments: $ARGUMENTS
Add a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to establish dependency relationship.

## Adding Dependencies

Creates a dependency where one task must be completed before another can start.

## Argument Parsing

Parse natural language or IDs:

- &quot;make 5 depend on 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 needs 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 after 3&quot; ‚Üí task 5 depends on task 3

## Execution

```bash
task-master add-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Validation

Before adding:

1. **Verify both tasks exist**
2. **Check for circular dependencies**
3. **Ensure dependency makes logical sense**
4. **Warn if creating complex chains**

## Smart Features

- Detect if dependency already exists
- Suggest related dependencies
- Show impact on task flow
- Update task priorities if needed

## Post-Addition

After adding dependency:

1. Show updated dependency graph
2. Identify any newly blocked tasks
3. Suggest task order changes
4. Update project timeline

## Example Flows

```
/taskmaster:add-dependency 5 needs 3
‚Üí Task #5 now depends on Task #3
‚Üí Task #5 is now blocked until #3 completes
‚Üí Suggested: Also consider if #5 needs #4
```</file><file path="fe/.claude/commands/tm/add-subtask.md">Add Subtask

Arguments: $ARGUMENTS
Add a subtask to a parent task.

Arguments: $ARGUMENTS

Parse arguments to create a new subtask or convert existing task.

## Adding Subtasks

Creates subtasks to break down complex parent tasks into manageable pieces.

## Argument Parsing

Flexible natural language:

- &quot;add subtask to 5: implement login form&quot;
- &quot;break down 5 with: setup, implement, test&quot;
- &quot;subtask for 5: handle edge cases&quot;
- &quot;5: validate user input&quot; ‚Üí adds subtask to task 5

## Execution Modes

### 1. Create New Subtask

```bash
task-master add-subtask --parent=&lt;id&gt; --title=&quot;&lt;title&gt;&quot; --description=&quot;&lt;desc&gt;&quot;
```

### 2. Convert Existing Task

```bash
task-master add-subtask --parent=&lt;id&gt; --task-id=&lt;existing-id&gt;
```

## Smart Features

1. **Automatic Subtask Generation**
   - If title contains &quot;and&quot; or commas, create multiple
   - Suggest common subtask patterns
   - Inherit parent&apos;s context

2. **Intelligent Defaults**
   - Priority based on parent
   - Appropriate time estimates
   - Logical dependencies between subtasks

3. **Validation**
   - Check parent task complexity
   - Warn if too many subtasks
   - Ensure subtask makes sense

## Creation Process

1. Parse parent task context
2. Generate subtask with ID like &quot;5.1&quot;
3. Set appropriate defaults
4. Link to parent task
5. Update parent&apos;s time estimate

## Example Flows

```
/taskmaster:add-subtask to 5: implement user authentication
‚Üí Created subtask #5.1: &quot;implement user authentication&quot;
‚Üí Parent task #5 now has 1 subtask
‚Üí Suggested next subtasks: tests, documentation

/taskmaster:add-subtask 5: setup, implement, test
‚Üí Created 3 subtasks:
  #5.1: setup
  #5.2: implement
  #5.3: test
```

## Post-Creation

- Show updated task hierarchy
- Suggest logical next subtasks
- Update complexity estimates
- Recommend subtask order</file><file path="fe/.claude/commands/tm/add-task.md">Add Task

Arguments: $ARGUMENTS
Add new tasks with intelligent parsing and context awareness.

Arguments: $ARGUMENTS

## Smart Task Addition

Parse natural language to create well-structured tasks.

### 1. **Input Understanding**

I&apos;ll intelligently parse your request:

- Natural language ‚Üí Structured task
- Detect priority from keywords (urgent, ASAP, important)
- Infer dependencies from context
- Suggest complexity based on description
- Determine task type (feature, bug, refactor, test, docs)

### 2. **Smart Parsing Examples**

**&quot;Add urgent task to fix login bug&quot;**
‚Üí Title: Fix login bug
‚Üí Priority: high
‚Üí Type: bug
‚Üí Suggested complexity: medium

**&quot;Create task for API documentation after task 23 is done&quot;**
‚Üí Title: API documentation
‚Üí Dependencies: [23]
‚Üí Type: documentation
‚Üí Priority: medium

**&quot;Need to refactor auth module - depends on 12 and 15, high complexity&quot;**
‚Üí Title: Refactor auth module
‚Üí Dependencies: [12, 15]
‚Üí Complexity: high
‚Üí Type: refactor

### 3. **Context Enhancement**

Based on current project state:

- Suggest related existing tasks
- Warn about potential conflicts
- Recommend dependencies
- Propose subtasks if complex

### 4. **Interactive Refinement**

```yaml
Task Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Title: [Extracted title]
Priority: [Inferred priority]
Dependencies: [Detected dependencies]
Complexity: [Estimated complexity]

Suggestions:
- Similar task #34 exists, consider as dependency?
- This seems complex, break into subtasks?
- Tasks #45-47 work on same module
```

### 5. **Validation &amp; Creation**

Before creating:

- Validate dependencies exist
- Check for duplicates
- Ensure logical ordering
- Verify task completeness

### 6. **Smart Defaults**

Intelligent defaults based on:

- Task type patterns
- Team conventions
- Historical data
- Current sprint/phase

Result: High-quality tasks from minimal input.</file><file path="fe/.claude/commands/tm/analyze-complexity.md">Analyze Complexity

Arguments: $ARGUMENTS
Analyze task complexity and generate expansion recommendations.

Arguments: $ARGUMENTS

Perform deep analysis of task complexity across the project.

## Complexity Analysis

Uses AI to analyze tasks and recommend which ones need breakdown.

## Execution Options

```bash
task-master analyze-complexity [--research] [--threshold=5]
```

## Analysis Parameters

- `--research` ‚Üí Use research AI for deeper analysis
- `--threshold=5` ‚Üí Only flag tasks above complexity 5
- Default: Analyze all pending tasks

## Analysis Process

### 1. **Task Evaluation**

For each task, AI evaluates:

- Technical complexity
- Time requirements
- Dependency complexity
- Risk factors
- Knowledge requirements

### 2. **Complexity Scoring**

Assigns score 1-10 based on:

- Implementation difficulty
- Integration challenges
- Testing requirements
- Unknown factors
- Technical debt risk

### 3. **Recommendations**

For complex tasks:

- Suggest expansion approach
- Recommend subtask breakdown
- Identify risk areas
- Propose mitigation strategies

## Smart Analysis Features

1. **Pattern Recognition**
   - Similar task comparisons
   - Historical complexity accuracy
   - Team velocity consideration
   - Technology stack factors

2. **Contextual Factors**
   - Team expertise
   - Available resources
   - Timeline constraints
   - Business criticality

3. **Risk Assessment**
   - Technical risks
   - Timeline risks
   - Dependency risks
   - Knowledge gaps

## Output Format

```
Task Complexity Analysis Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

High Complexity Tasks (&gt;7):
üìç #5 &quot;Implement real-time sync&quot; - Score: 9/10
   Factors: WebSocket complexity, state management, conflict resolution
   Recommendation: Expand into 5-7 subtasks
   Risks: Performance, data consistency

üìç #12 &quot;Migrate database schema&quot; - Score: 8/10
   Factors: Data migration, zero downtime, rollback strategy
   Recommendation: Expand into 4-5 subtasks
   Risks: Data loss, downtime

Medium Complexity Tasks (5-7):
üìç #23 &quot;Add export functionality&quot; - Score: 6/10
   Consider expansion if timeline tight

Low Complexity Tasks (&lt;5):
‚úÖ 15 tasks - No expansion needed

Summary:
- Expand immediately: 2 tasks
- Consider expanding: 5 tasks
- Keep as-is: 15 tasks
```

## Actionable Output

For each high-complexity task:

1. Complexity score with reasoning
2. Specific expansion suggestions
3. Risk mitigation approaches
4. Recommended subtask structure

## Integration

Results are:

- Saved to `.taskmaster/reports/complexity-analysis.md`
- Used by expand command
- Inform sprint planning
- Guide resource allocation

## Next Steps

After analysis:

```
/taskmaster:expand 5    # Expand specific task
/taskmaster:expand-all  # Expand all recommended
/taskmaster:complexity-report  # View detailed report
```</file><file path="fe/.claude/commands/tm/analyze-project.md">Analyze Project

Arguments: $ARGUMENTS
Advanced project analysis with actionable insights and recommendations.

Arguments: $ARGUMENTS

## Comprehensive Project Analysis

Multi-dimensional analysis based on requested focus area.

### 1. **Analysis Modes**

Based on $ARGUMENTS:

- &quot;velocity&quot; ‚Üí Sprint velocity and trends
- &quot;quality&quot; ‚Üí Code quality metrics
- &quot;risk&quot; ‚Üí Risk assessment and mitigation
- &quot;dependencies&quot; ‚Üí Dependency graph analysis
- &quot;team&quot; ‚Üí Workload and skill distribution
- &quot;architecture&quot; ‚Üí System design coherence
- Default ‚Üí Full spectrum analysis

### 2. **Velocity Analytics**

```
üìä Velocity Analysis
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Current Sprint: 24 points/week ‚ÜóÔ∏è +20%
Rolling Average: 20 points/week
Efficiency: 85% (17/20 tasks on time)

Bottlenecks Detected:
- Code review delays (avg 4h wait)
- Test environment availability
- Dependency on external team

Recommendations:
1. Implement parallel review process
2. Add staging environment
3. Mock external dependencies
```

### 3. **Risk Assessment**

**Technical Risks**

- High complexity tasks without backup assignee
- Single points of failure in architecture
- Insufficient test coverage in critical paths
- Technical debt accumulation rate

**Project Risks**

- Critical path dependencies
- Resource availability gaps
- Deadline feasibility analysis
- Scope creep indicators

### 4. **Dependency Intelligence**

Visual dependency analysis:

```
Critical Path:
#12 ‚Üí #15 ‚Üí #23 ‚Üí #45 ‚Üí #50 (20 days)
         ‚Üò #24 ‚Üí #46 ‚Üó

Optimization: Parallelize #15 and #24
Time Saved: 3 days
```

### 5. **Quality Metrics**

**Code Quality**

- Test coverage trends
- Complexity scores
- Technical debt ratio
- Review feedback patterns

**Process Quality**

- Rework frequency
- Bug introduction rate
- Time to resolution
- Knowledge distribution

### 6. **Predictive Insights**

Based on patterns:

- Completion probability by deadline
- Resource needs projection
- Risk materialization likelihood
- Suggested interventions

### 7. **Executive Dashboard**

High-level summary with:

- Health score (0-100)
- Top 3 risks
- Top 3 opportunities
- Recommended actions
- Success probability

Result: Data-driven decisions with clear action paths.</file><file path="fe/.claude/commands/tm/auto-implement-tasks.md">Auto Implement Tasks

Arguments: $ARGUMENTS
Enhanced auto-implementation with intelligent code generation and testing.

Arguments: $ARGUMENTS

## Intelligent Auto-Implementation

Advanced implementation with context awareness and quality checks.

### 1. **Pre-Implementation Analysis**

Before starting:

- Analyze task complexity and requirements
- Check codebase patterns and conventions
- Identify similar completed tasks
- Assess test coverage needs
- Detect potential risks

### 2. **Smart Implementation Strategy**

Based on task type and context:

**Feature Tasks**

1. Research existing patterns
2. Design component architecture
3. Implement with tests
4. Integrate with system
5. Update documentation

**Bug Fix Tasks**

1. Reproduce issue
2. Identify root cause
3. Implement minimal fix
4. Add regression tests
5. Verify side effects

**Refactoring Tasks**

1. Analyze current structure
2. Plan incremental changes
3. Maintain test coverage
4. Refactor step-by-step
5. Verify behavior unchanged

### 3. **Code Intelligence**

**Pattern Recognition**

- Learn from existing code
- Follow team conventions
- Use preferred libraries
- Match style guidelines

**Test-Driven Approach**

- Write tests first when possible
- Ensure comprehensive coverage
- Include edge cases
- Performance considerations

### 4. **Progressive Implementation**

Step-by-step with validation:

```
Step 1/5: Setting up component structure ‚úì
Step 2/5: Implementing core logic ‚úì
Step 3/5: Adding error handling ‚ö° (in progress)
Step 4/5: Writing tests ‚è≥
Step 5/5: Integration testing ‚è≥

Current: Adding try-catch blocks and validation...
```

### 5. **Quality Assurance**

Automated checks:

- Linting and formatting
- Test execution
- Type checking
- Dependency validation
- Performance analysis

### 6. **Smart Recovery**

If issues arise:

- Diagnostic analysis
- Suggestion generation
- Fallback strategies
- Manual intervention points
- Learning from failures

### 7. **Post-Implementation**

After completion:

- Generate PR description
- Update documentation
- Log lessons learned
- Suggest follow-up tasks
- Update task relationships

Result: High-quality, production-ready implementations.</file><file path="fe/.claude/commands/tm/command-pipeline.md">Command Pipeline

Arguments: $ARGUMENTS
Execute a pipeline of commands based on a specification.

Arguments: $ARGUMENTS

## Command Pipeline Execution

Parse pipeline specification from arguments. Supported formats:

### Simple Pipeline

`init ‚Üí expand-all ‚Üí sprint-plan`

### Conditional Pipeline

`status ‚Üí if:pending&gt;10 ‚Üí sprint-plan ‚Üí else ‚Üí next`

### Iterative Pipeline

`for:pending-tasks ‚Üí expand ‚Üí complexity-check`

### Smart Pipeline Patterns

**1. Project Setup Pipeline**

```
init [prd] ‚Üí
expand-all ‚Üí
complexity-report ‚Üí
sprint-plan ‚Üí
show first-sprint
```

**2. Daily Work Pipeline**

```
standup ‚Üí
if:in-progress ‚Üí continue ‚Üí
else ‚Üí next ‚Üí start
```

**3. Task Completion Pipeline**

```
complete [id] ‚Üí
git-commit ‚Üí
if:blocked-tasks-freed ‚Üí show-freed ‚Üí
next
```

**4. Quality Check Pipeline**

```
list in-progress ‚Üí
for:each ‚Üí check-idle-time ‚Üí
if:idle&gt;1day ‚Üí prompt-update
```

### Pipeline Features

**Variables**

- Store results: `status ‚Üí $count=pending-count`
- Use in conditions: `if:$count&gt;10`
- Pass between commands: `expand $high-priority-tasks`

**Error Handling**

- On failure: `try:complete ‚Üí catch:show-blockers`
- Skip on error: `optional:test-run`
- Retry logic: `retry:3:commit`

**Parallel Execution**

- Parallel branches: `[analyze | test | lint]`
- Join results: `parallel ‚Üí join:report`

### Execution Flow

1. Parse pipeline specification
2. Validate command sequence
3. Execute with state passing
4. Handle conditions and loops
5. Aggregate results
6. Show summary

This enables complex workflows like:
`parse-prd ‚Üí expand-all ‚Üí filter:complex&gt;70 ‚Üí assign:senior ‚Üí sprint-plan:weighted`</file><file path="fe/.claude/commands/tm/complexity-report.md">Complexity Report

Arguments: $ARGUMENTS
Display the task complexity analysis report.

Arguments: $ARGUMENTS

View the detailed complexity analysis generated by analyze-complexity command.

## Viewing Complexity Report

Shows comprehensive task complexity analysis with actionable insights.

## Execution

```bash
task-master complexity-report [--file=&lt;path&gt;]
```

## Report Location

Default: `.taskmaster/reports/complexity-analysis.md`
Custom: Specify with --file parameter

## Report Contents

### 1. **Executive Summary**

```
Complexity Analysis Summary
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Analysis Date: 2024-01-15
Tasks Analyzed: 32
High Complexity: 5 (16%)
Medium Complexity: 12 (37%)
Low Complexity: 15 (47%)

Critical Findings:
- 5 tasks need immediate expansion
- 3 tasks have high technical risk
- 2 tasks block critical path
```

### 2. **Detailed Task Analysis**

For each complex task:

- Complexity score breakdown
- Contributing factors
- Specific risks identified
- Expansion recommendations
- Similar completed tasks

### 3. **Risk Matrix**

Visual representation:

```
Risk vs Complexity Matrix
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
High Risk  | #5(9) #12(8) | #23(6)
Med Risk   | #34(7)       | #45(5) #67(5)
Low Risk   | #78(8)       | [15 tasks]
           | High Complex  | Med Complex
```

### 4. **Recommendations**

**Immediate Actions:**

1. Expand task #5 - Critical path + high complexity
2. Expand task #12 - High risk + dependencies
3. Review task #34 - Consider splitting

**Sprint Planning:**

- Don&apos;t schedule multiple high-complexity tasks together
- Ensure expertise available for complex tasks
- Build in buffer time for unknowns

## Interactive Features

When viewing report:

1. **Quick Actions**
   - Press &apos;e&apos; to expand a task
   - Press &apos;d&apos; for task details
   - Press &apos;r&apos; to refresh analysis

2. **Filtering**
   - View by complexity level
   - Filter by risk factors
   - Show only actionable items

3. **Export Options**
   - Markdown format
   - CSV for spreadsheets
   - JSON for tools

## Report Intelligence

- Compares with historical data
- Shows complexity trends
- Identifies patterns
- Suggests process improvements

## Integration

Use report for:

- Sprint planning sessions
- Resource allocation
- Risk assessment
- Team discussions
- Client updates

## Example Usage

```
/taskmaster:complexity-report
‚Üí Opens latest analysis

/taskmaster:complexity-report --file=archived/2024-01-01.md
‚Üí View historical analysis

After viewing:
/taskmaster:expand 5
‚Üí Expand high-complexity task
```</file><file path="fe/.claude/commands/tm/convert-task-to-subtask.md">Convert Task To Subtask

Arguments: $ARGUMENTS
Convert an existing task into a subtask.

Arguments: $ARGUMENTS

Parse parent ID and task ID to convert.

## Task Conversion

Converts an existing standalone task into a subtask of another task.

## Argument Parsing

- &quot;move task 8 under 5&quot;
- &quot;make 8 a subtask of 5&quot;
- &quot;nest 8 in 5&quot;
- &quot;5 8&quot; ‚Üí make task 8 a subtask of task 5

## Execution

```bash
task-master add-subtask --parent=&lt;parent-id&gt; --task-id=&lt;task-to-convert&gt;
```

## Pre-Conversion Checks

1. **Validation**
   - Both tasks exist and are valid
   - No circular parent relationships
   - Task isn&apos;t already a subtask
   - Logical hierarchy makes sense

2. **Impact Analysis**
   - Dependencies that will be affected
   - Tasks that depend on converting task
   - Priority alignment needed
   - Status compatibility

## Conversion Process

1. Change task ID from &quot;8&quot; to &quot;5.1&quot; (next available)
2. Update all dependency references
3. Inherit parent&apos;s context where appropriate
4. Adjust priorities if needed
5. Update time estimates

## Smart Features

- Preserve task history
- Maintain dependencies
- Update all references
- Create conversion log

## Example

```
/taskmaster:add-subtask/from-task 5 8
‚Üí Converting: Task #8 becomes subtask #5.1
‚Üí Updated: 3 dependency references
‚Üí Parent task #5 now has 1 subtask
‚Üí Note: Subtask inherits parent&apos;s priority

Before: #8 &quot;Implement validation&quot; (standalone)
After:  #5.1 &quot;Implement validation&quot; (subtask of #5)
```

## Post-Conversion

- Show new task hierarchy
- List updated dependencies
- Verify project integrity
- Suggest related conversions</file><file path="fe/.claude/commands/tm/expand-all-tasks.md">Expand All Tasks
Expand all pending tasks that need subtasks.

## Bulk Task Expansion

Intelligently expands all tasks that would benefit from breakdown.

## Execution

```bash
task-master expand --all
```

## Smart Selection

Only expands tasks that:

- Are marked as pending
- Have high complexity (&gt;5)
- Lack existing subtasks
- Would benefit from breakdown

## Expansion Process

1. **Analysis Phase**
   - Identify expansion candidates
   - Group related tasks
   - Plan expansion strategy

2. **Batch Processing**
   - Expand tasks in logical order
   - Maintain consistency
   - Preserve relationships
   - Optimize for parallelism

3. **Quality Control**
   - Ensure subtask quality
   - Avoid over-decomposition
   - Maintain task coherence
   - Update dependencies

## Options

- Add `force` to expand all regardless of complexity
- Add `research` for enhanced AI analysis

## Results

After bulk expansion:

- Summary of tasks expanded
- New subtask count
- Updated complexity metrics
- Suggested task order</file><file path="fe/.claude/commands/tm/expand-task.md">Expand Task

Arguments: $ARGUMENTS
Break down a complex task into subtasks.

Arguments: $ARGUMENTS (task ID)

## Intelligent Task Expansion

Analyzes a task and creates detailed subtasks for better manageability.

## Execution

```bash
task-master expand --id=$ARGUMENTS
```

## Expansion Process

1. **Task Analysis**
   - Review task complexity
   - Identify components
   - Detect technical challenges
   - Estimate time requirements

2. **Subtask Generation**
   - Create 3-7 subtasks typically
   - Each subtask 1-4 hours
   - Logical implementation order
   - Clear acceptance criteria

3. **Smart Breakdown**
   - Setup/configuration tasks
   - Core implementation
   - Testing components
   - Integration steps
   - Documentation updates

## Enhanced Features

Based on task type:

- **Feature**: Setup ‚Üí Implement ‚Üí Test ‚Üí Integrate
- **Bug Fix**: Reproduce ‚Üí Diagnose ‚Üí Fix ‚Üí Verify
- **Refactor**: Analyze ‚Üí Plan ‚Üí Refactor ‚Üí Validate

## Post-Expansion

After expansion:

1. Show subtask hierarchy
2. Update time estimates
3. Suggest implementation order
4. Highlight critical path</file><file path="fe/.claude/commands/tm/fix-dependencies.md">Fix Dependencies
Automatically fix dependency issues found during validation.

## Automatic Dependency Repair

Intelligently fixes common dependency problems while preserving project logic.

## Execution

```bash
task-master fix-dependencies
```

## What Gets Fixed

### 1. **Auto-Fixable Issues**

- Remove references to deleted tasks
- Break simple circular dependencies
- Remove self-dependencies
- Clean up duplicate dependencies

### 2. **Smart Resolutions**

- Reorder dependencies to maintain logic
- Suggest task merging for over-dependent tasks
- Flatten unnecessary dependency chains
- Remove redundant transitive dependencies

### 3. **Manual Review Required**

- Complex circular dependencies
- Critical path modifications
- Business logic dependencies
- High-impact changes

## Fix Process

1. **Analysis Phase**
   - Run validation check
   - Categorize issues by type
   - Determine fix strategy

2. **Execution Phase**
   - Apply automatic fixes
   - Log all changes made
   - Preserve task relationships

3. **Verification Phase**
   - Re-validate after fixes
   - Show before/after comparison
   - Highlight manual fixes needed

## Smart Features

- Preserves intended task flow
- Minimal disruption approach
- Creates fix history/log
- Suggests manual interventions

## Output Example

```
Dependency Auto-Fix Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Fixed Automatically:
‚úÖ Removed 2 references to deleted tasks
‚úÖ Resolved 1 self-dependency
‚úÖ Cleaned 3 redundant dependencies

Manual Review Needed:
‚ö†Ô∏è Complex circular dependency: #12 ‚Üí #15 ‚Üí #18 ‚Üí #12
  Suggestion: Make #15 not depend on #12
‚ö†Ô∏è Task #45 has 8 dependencies
  Suggestion: Break into subtasks

Run &apos;/taskmaster:validate-dependencies&apos; to verify fixes
```

## Safety

- Preview mode available
- Rollback capability
- Change logging
- No data loss</file><file path="fe/.claude/commands/tm/help.md">Help

Arguments: $ARGUMENTS
Show help for Task Master AI commands.

Arguments: $ARGUMENTS

Display help for Task Master commands and available options.

## Task Master AI Command Help

### Quick Navigation

Type `/taskmaster:` and use tab completion to explore all commands.

### Command Categories

#### üöÄ Setup &amp; Installation

- `/taskmaster:install-taskmaster` - Comprehensive installation guide
- `/taskmaster:quick-install-taskmaster` - One-line global install

#### üìã Project Setup

- `/taskmaster:init-project` - Initialize new project
- `/taskmaster:init-project-quick` - Quick setup with auto-confirm
- `/taskmaster:view-models` - View AI configuration
- `/taskmaster:setup-models` - Configure AI providers

#### üéØ Task Generation

- `/taskmaster:parse-prd` - Generate tasks from PRD
- `/taskmaster:parse-prd-with-research` - Enhanced parsing
- `/taskmaster:generate-tasks` - Create task files

#### üìù Task Management

- `/taskmaster:list-tasks` - List all tasks
- `/taskmaster:list-tasks-by-status` - List tasks filtered by status
- `/taskmaster:list-tasks-with-subtasks` - List tasks with subtasks
- `/taskmaster:show-task` - Display task details
- `/taskmaster:add-task` - Create new task
- `/taskmaster:update-task` - Update single task
- `/taskmaster:update-tasks-from-id` - Update multiple tasks
- `/taskmaster:next-task` - Get next task recommendation

#### üîÑ Status Management

- `/taskmaster:to-pending` - Set task to pending
- `/taskmaster:to-in-progress` - Set task to in-progress
- `/taskmaster:to-done` - Set task to done
- `/taskmaster:to-review` - Set task to review
- `/taskmaster:to-deferred` - Set task to deferred
- `/taskmaster:to-cancelled` - Set task to cancelled

#### üîç Analysis &amp; Breakdown

- `/taskmaster:analyze-complexity` - Analyze task complexity
- `/taskmaster:complexity-report` - View complexity report
- `/taskmaster:expand-task` - Break down complex task
- `/taskmaster:expand-all-tasks` - Expand all eligible tasks

#### üîó Dependencies

- `/taskmaster:add-dependency` - Add task dependency
- `/taskmaster:remove-dependency` - Remove dependency
- `/taskmaster:validate-dependencies` - Check for issues
- `/taskmaster:fix-dependencies` - Auto-fix dependency issues

#### üì¶ Subtasks

- `/taskmaster:add-subtask` - Add subtask to task
- `/taskmaster:convert-task-to-subtask` - Convert task to subtask
- `/taskmaster:remove-subtask` - Remove subtask
- `/taskmaster:remove-subtasks` - Clear specific task subtasks
- `/taskmaster:remove-all-subtasks` - Clear all subtasks

#### üóëÔ∏è Task Removal

- `/taskmaster:remove-task` - Remove task permanently

#### ü§ñ Workflows

- `/taskmaster:smart-workflow` - Intelligent workflows
- `/taskmaster:command-pipeline` - Command chaining
- `/taskmaster:auto-implement-tasks` - Auto-implementation

#### üìä Utilities

- `/taskmaster:analyze-project` - Project analysis
- `/taskmaster:project-status` - Project dashboard
- `/taskmaster:sync-readme` - Sync README with tasks
- `/taskmaster:learn` - Interactive learning
- `/taskmaster:tm-main` - Main Task Master interface

### Quick Start Examples

```
/taskmaster:list-tasks
/taskmaster:show-task 1.2
/taskmaster:add-task
/taskmaster:next-task
```

### Getting Started

1. Install: `/taskmaster:quick-install-taskmaster`
2. Initialize: `/taskmaster:init-project-quick`
3. Learn: `/taskmaster:learn`
4. Work: `/taskmaster:smart-workflow`

For detailed command info, run the specific command with `--help` or check command documentation.</file><file path="fe/.claude/commands/tm/init-project-quick.md">Init Project Quick

Arguments: $ARGUMENTS
Quick initialization with auto-confirmation.

Arguments: $ARGUMENTS

Initialize a Task Master project without prompts, accepting all defaults.

## Quick Setup

```bash
task-master init -y
```

## What It Does

1. Creates `.taskmaster/` directory structure
2. Initializes empty `tasks.json`
3. Sets up default configuration
4. Uses directory name as project name
5. Skips all confirmation prompts

## Smart Defaults

- Project name: Current directory name
- Description: &quot;Task Master Project&quot;
- Model config: Existing environment vars
- Task structure: Standard format

## Next Steps

After quick init:

1. Configure AI models if needed:

   ```
   /taskmaster:models/setup
   ```

2. Parse PRD if available:

   ```
   /taskmaster:parse-prd &lt;file&gt;
   ```

3. Or create first task:
   ```
   /taskmaster:add-task create initial setup
   ```

Perfect for rapid project setup!</file><file path="fe/.claude/commands/tm/init-project.md">Init Project

Arguments: $ARGUMENTS
Initialize a new Task Master project.

Arguments: $ARGUMENTS

Parse arguments to determine initialization preferences.

## Initialization Process

1. **Parse Arguments**
   - PRD file path (if provided)
   - Project name
   - Auto-confirm flag (-y)

2. **Project Setup**

   ```bash
   task-master init
   ```

3. **Smart Initialization**
   - Detect existing project files
   - Suggest project name from directory
   - Check for git repository
   - Verify AI provider configuration

## Configuration Options

Based on arguments:

- `quick` / `-y` ‚Üí Skip confirmations
- `&lt;file.md&gt;` ‚Üí Use as PRD after init
- `--name=&lt;name&gt;` ‚Üí Set project name
- `--description=&lt;desc&gt;` ‚Üí Set description

## Post-Initialization

After successful init:

1. Show project structure created
2. Verify AI models configured
3. Suggest next steps:
   - Parse PRD if available
   - Configure AI providers
   - Set up git hooks
   - Create first tasks

## Integration

If PRD file provided:

```
/taskmaster:init my-prd.md
‚Üí Automatically runs parse-prd after init
```</file><file path="fe/.claude/commands/tm/install-taskmaster.md">Install TaskMaster
Check if Task Master is installed and install it if needed.

This command helps you get Task Master set up globally on your system.

## Detection and Installation Process

1. **Check Current Installation**

   ```bash
   # Check if task-master command exists
   which task-master || echo &quot;Task Master not found&quot;

   # Check npm global packages
   npm list -g task-master-ai
   ```

2. **System Requirements Check**

   ```bash
   # Verify Node.js is installed
   node --version

   # Verify npm is installed
   npm --version

   # Check Node version (need 16+)
   ```

3. **Install Task Master Globally**
   If not installed, run:

   ```bash
   npm install -g task-master-ai
   ```

4. **Verify Installation**

   ```bash
   # Check version
   task-master --version

   # Verify command is available
   which task-master
   ```

5. **Initial Setup**

   ```bash
   # Initialize in current directory
   task-master init
   ```

6. **Configure AI Provider**
   Ensure you have at least one AI provider API key set:

   ```bash
   # Check current configuration
   task-master models --status

   # If no API keys found, guide setup
   echo &quot;You&apos;ll need at least one API key:&quot;
   echo &quot;- ANTHROPIC_API_KEY for Claude&quot;
   echo &quot;- OPENAI_API_KEY for GPT models&quot;
   echo &quot;- PERPLEXITY_API_KEY for research&quot;
   echo &quot;&quot;
   echo &quot;Set them in your shell profile or .env file&quot;
   ```

7. **Quick Test**

   ```bash
   # Create a test PRD
   echo &quot;Build a simple hello world API&quot; &gt; test-prd.txt

   # Try parsing it
   task-master parse-prd test-prd.txt -n 3
   ```

## Troubleshooting

If installation fails:

**Permission Errors:**

```bash
# Try with sudo (macOS/Linux)
sudo npm install -g task-master-ai

# Or fix npm permissions
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH
```

**Network Issues:**

```bash
# Use different registry
npm install -g task-master-ai --registry https://registry.npmjs.org/
```

**Node Version Issues:**

```bash
# Install Node 20+ via nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20
```

## Success Confirmation

Once installed, you should see:

```
‚úÖ Task Master installed
‚úÖ Command &apos;task-master&apos; available globally
‚úÖ AI provider configured
‚úÖ Ready to use slash commands!

Try: /taskmaster:init your-prd.md
```

## Next Steps

After installation:

1. Run `/taskmaster:status` to verify setup
2. Configure AI providers with `/taskmaster:setup-models`
3. Start using Task Master commands!</file><file path="fe/.claude/commands/tm/learn.md">Learn

Arguments: $ARGUMENTS
Learn about Task Master capabilities through interactive exploration.

Arguments: $ARGUMENTS

## Interactive Task Master Learning

Based on your input, I&apos;ll help you discover capabilities:

### 1. **What are you trying to do?**

If $ARGUMENTS contains:

- &quot;start&quot; / &quot;begin&quot; ‚Üí Show project initialization workflows
- &quot;manage&quot; / &quot;organize&quot; ‚Üí Show task management commands
- &quot;automate&quot; / &quot;auto&quot; ‚Üí Show automation workflows
- &quot;analyze&quot; / &quot;report&quot; ‚Üí Show analysis tools
- &quot;fix&quot; / &quot;problem&quot; ‚Üí Show troubleshooting commands
- &quot;fast&quot; / &quot;quick&quot; ‚Üí Show efficiency shortcuts

### 2. **Intelligent Suggestions**

Based on your project state:

**No tasks yet?**

```
You&apos;ll want to start with:
1. /project:task-master:init &lt;prd-file&gt;
   ‚Üí Creates tasks from requirements

2. /project:task-master:parse-prd &lt;file&gt;
   ‚Üí Alternative task generation

Try: /project:task-master:init demo-prd.md
```

**Have tasks?**
Let me analyze what you might need...

- Many pending tasks? ‚Üí Learn sprint planning
- Complex tasks? ‚Üí Learn task expansion
- Daily work? ‚Üí Learn workflow automation

### 3. **Command Discovery**

**By Category:**

- üìã Task Management: list, show, add, update, complete
- üîÑ Workflows: auto-implement, sprint-plan, daily-standup
- üõ†Ô∏è Utilities: check-health, complexity-report, sync-memory
- üîç Analysis: validate-deps, show dependencies

**By Scenario:**

- &quot;I want to see what to work on&quot; ‚Üí `/project:task-master:next`
- &quot;I need to break this down&quot; ‚Üí `/project:task-master:expand &lt;id&gt;`
- &quot;Show me everything&quot; ‚Üí `/project:task-master:status`
- &quot;Just do it for me&quot; ‚Üí `/project:workflows:auto-implement`

### 4. **Power User Patterns**

**Command Chaining:**

```
/project:task-master:next
/project:task-master:start &lt;id&gt;
/project:workflows:auto-implement
```

**Smart Filters:**

```
/project:task-master:list pending high
/project:task-master:list blocked
/project:task-master:list 1-5 tree
```

**Automation:**

```
/project:workflows:pipeline init ‚Üí expand-all ‚Üí sprint-plan
```

### 5. **Learning Path**

Based on your experience level:

**Beginner Path:**

1. init ‚Üí Create project
2. status ‚Üí Understand state
3. next ‚Üí Find work
4. complete ‚Üí Finish task

**Intermediate Path:**

1. expand ‚Üí Break down complex tasks
2. sprint-plan ‚Üí Organize work
3. complexity-report ‚Üí Understand difficulty
4. validate-deps ‚Üí Ensure consistency

**Advanced Path:**

1. pipeline ‚Üí Chain operations
2. smart-flow ‚Üí Context-aware automation
3. Custom commands ‚Üí Extend the system

### 6. **Try This Now**

Based on what you asked about, try:
[Specific command suggestion based on $ARGUMENTS]

Want to learn more about a specific command?
Type: /project:help &lt;command-name&gt;</file><file path="fe/.claude/commands/tm/list-tasks-by-status.md">List Tasks By Status

Arguments: $ARGUMENTS
List tasks filtered by a specific status.

Arguments: $ARGUMENTS

Parse the status from arguments and list only tasks matching that status.

## Status Options

- `pending` - Not yet started
- `in-progress` - Currently being worked on
- `done` - Completed
- `review` - Awaiting review
- `deferred` - Postponed
- `cancelled` - Cancelled

## Execution

Based on $ARGUMENTS, run:

```bash
task-master list --status=$ARGUMENTS
```

## Enhanced Display

For the filtered results:

- Group by priority within the status
- Show time in current status
- Highlight tasks approaching deadlines
- Display blockers and dependencies
- Suggest next actions for each status group

## Intelligent Insights

Based on the status filter:

- **Pending**: Show recommended start order
- **In-Progress**: Display idle time warnings
- **Done**: Show newly unblocked tasks
- **Review**: Indicate review duration
- **Deferred**: Show reactivation criteria
- **Cancelled**: Display impact analysis</file><file path="fe/.claude/commands/tm/list-tasks-with-subtasks.md">List Tasks With Subtasks
List all tasks including their subtasks in a hierarchical view.

This command shows all tasks with their nested subtasks, providing a complete project overview.

## Execution

Run the Task Master list command with subtasks flag:

```bash
task-master list --with-subtasks
```

## Enhanced Display

I&apos;ll organize the output to show:

- Parent tasks with clear indicators
- Nested subtasks with proper indentation
- Status badges for quick scanning
- Dependencies and blockers highlighted
- Progress indicators for tasks with subtasks

## Smart Filtering

Based on the task hierarchy:

- Show completion percentage for parent tasks
- Highlight blocked subtask chains
- Group by functional areas
- Indicate critical path items

This gives you a complete tree view of your project structure.</file><file path="fe/.claude/commands/tm/list-tasks.md">List Tasks

Arguments: $ARGUMENTS
List tasks with intelligent argument parsing.

Parse arguments to determine filters and display options:

- Status: pending, in-progress, done, review, deferred, cancelled
- Priority: high, medium, low (or priority:high)
- Special: subtasks, tree, dependencies, blocked
- IDs: Direct numbers (e.g., &quot;1,3,5&quot; or &quot;1-5&quot;)
- Complex: &quot;pending high&quot; = pending AND high priority

Arguments: $ARGUMENTS

Let me parse your request intelligently:

1. **Detect Filter Intent**
   - If arguments contain status keywords ‚Üí filter by status
   - If arguments contain priority ‚Üí filter by priority
   - If arguments contain &quot;subtasks&quot; ‚Üí include subtasks
   - If arguments contain &quot;tree&quot; ‚Üí hierarchical view
   - If arguments contain numbers ‚Üí show specific tasks
   - If arguments contain &quot;blocked&quot; ‚Üí show blocked tasks only

2. **Smart Combinations**
   Examples of what I understand:
   - &quot;pending high&quot; ‚Üí pending tasks with high priority
   - &quot;done today&quot; ‚Üí tasks completed today
   - &quot;blocked&quot; ‚Üí tasks with unmet dependencies
   - &quot;1-5&quot; ‚Üí tasks 1 through 5
   - &quot;subtasks tree&quot; ‚Üí hierarchical view with subtasks

3. **Execute Appropriate Query**
   Based on parsed intent, run the most specific task-master command

4. **Enhanced Display**
   - Group by relevant criteria
   - Show most important information first
   - Use visual indicators for quick scanning
   - Include relevant metrics

5. **Intelligent Suggestions**
   Based on what you&apos;re viewing, suggest next actions:
   - Many pending? ‚Üí Suggest priority order
   - Many blocked? ‚Üí Show dependency resolution
   - Looking at specific tasks? ‚Üí Show related tasks</file><file path="fe/.claude/commands/tm/next-task.md">Next Task

Arguments: $ARGUMENTS
Intelligently determine and prepare the next action based on comprehensive context.

This enhanced version of &apos;next&apos; considers:

- Current task states
- Recent activity
- Time constraints
- Dependencies
- Your working patterns

Arguments: $ARGUMENTS

## Intelligent Next Action

### 1. **Context Gathering**

Let me analyze the current situation:

- Active tasks (in-progress)
- Recently completed tasks
- Blocked tasks
- Time since last activity
- Arguments provided: $ARGUMENTS

### 2. **Smart Decision Tree**

**If you have an in-progress task:**

- Has it been idle &gt; 2 hours? ‚Üí Suggest resuming or switching
- Near completion? ‚Üí Show remaining steps
- Blocked? ‚Üí Find alternative task

**If no in-progress tasks:**

- Unblocked high-priority tasks? ‚Üí Start highest
- Complex tasks need breakdown? ‚Üí Suggest expansion
- All tasks blocked? ‚Üí Show dependency resolution

**Special arguments handling:**

- &quot;quick&quot; ‚Üí Find task &lt; 2 hours
- &quot;easy&quot; ‚Üí Find low complexity task
- &quot;important&quot; ‚Üí Find high priority regardless of complexity
- &quot;continue&quot; ‚Üí Resume last worked task

### 3. **Preparation Workflow**

Based on selected task:

1. Show full context and history
2. Set up development environment
3. Run relevant tests
4. Open related files
5. Show similar completed tasks
6. Estimate completion time

### 4. **Alternative Suggestions**

Always provide options:

- Primary recommendation
- Quick alternative (&lt; 1 hour)
- Strategic option (unblocks most tasks)
- Learning option (new technology/skill)

### 5. **Workflow Integration**

Seamlessly connect to:

- `/project:task-master:start [selected]`
- `/project:workflows:auto-implement`
- `/project:task-master:expand` (if complex)
- `/project:utils:complexity-report` (if unsure)

The goal: Zero friction from decision to implementation.</file><file path="fe/.claude/commands/tm/parse-prd-with-research.md">Parse PRD With Research

Arguments: $ARGUMENTS
Parse PRD with enhanced research mode for better task generation.

Arguments: $ARGUMENTS (PRD file path)

## Research-Enhanced Parsing

Uses the research AI provider (typically Perplexity) for more comprehensive task generation with current best practices.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS --research
```

## Research Benefits

1. **Current Best Practices**
   - Latest framework patterns
   - Security considerations
   - Performance optimizations
   - Accessibility requirements

2. **Technical Deep Dive**
   - Implementation approaches
   - Library recommendations
   - Architecture patterns
   - Testing strategies

3. **Comprehensive Coverage**
   - Edge cases consideration
   - Error handling tasks
   - Monitoring setup
   - Deployment tasks

## Enhanced Output

Research mode typically:

- Generates more detailed tasks
- Includes industry standards
- Adds compliance considerations
- Suggests modern tooling

## When to Use

- New technology domains
- Complex requirements
- Regulatory compliance needed
- Best practices crucial</file><file path="fe/.claude/commands/tm/parse-prd.md">Parse PRD

Arguments: $ARGUMENTS
Parse a PRD document to generate tasks.

Arguments: $ARGUMENTS (PRD file path)

## Intelligent PRD Parsing

Analyzes your requirements document and generates a complete task breakdown.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS
```

## Parsing Process

1. **Document Analysis**
   - Extract key requirements
   - Identify technical components
   - Detect dependencies
   - Estimate complexity

2. **Task Generation**
   - Create 10-15 tasks by default
   - Include implementation tasks
   - Add testing tasks
   - Include documentation tasks
   - Set logical dependencies

3. **Smart Enhancements**
   - Group related functionality
   - Set appropriate priorities
   - Add acceptance criteria
   - Include test strategies

## Options

Parse arguments for modifiers:

- Number after filename ‚Üí `--num-tasks`
- `research` ‚Üí Use research mode
- `comprehensive` ‚Üí Generate more tasks

## Post-Generation

After parsing:

1. Display task summary
2. Show dependency graph
3. Suggest task expansion for complex items
4. Recommend sprint planning</file><file path="fe/.claude/commands/tm/project-status.md">Project Status

Arguments: $ARGUMENTS
Enhanced status command with comprehensive project insights.

Arguments: $ARGUMENTS

## Intelligent Status Overview

### 1. **Executive Summary**

Quick dashboard view:

- üèÉ Active work (in-progress tasks)
- üìä Progress metrics (% complete, velocity)
- üöß Blockers and risks
- ‚è±Ô∏è Time analysis (estimated vs actual)
- üéØ Sprint/milestone progress

### 2. **Contextual Analysis**

Based on $ARGUMENTS, focus on:

- &quot;sprint&quot; ‚Üí Current sprint progress and burndown
- &quot;blocked&quot; ‚Üí Dependency chains and resolution paths
- &quot;team&quot; ‚Üí Task distribution and workload
- &quot;timeline&quot; ‚Üí Schedule adherence and projections
- &quot;risk&quot; ‚Üí High complexity or overdue items

### 3. **Smart Insights**

**Workflow Health:**

- Idle tasks (in-progress &gt; 24h without updates)
- Bottlenecks (multiple tasks waiting on same dependency)
- Quick wins (low complexity, high impact)

**Predictive Analytics:**

- Completion projections based on velocity
- Risk of missing deadlines
- Recommended task order for optimal flow

### 4. **Visual Intelligence**

Dynamic visualization based on data:

```
Sprint Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% (16/20 tasks)
Velocity Trend: ‚ÜóÔ∏è +15% this week
Blocked Tasks:  üî¥ 3 critical path items

Priority Distribution:
High:   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 8 tasks (2 blocked)
Medium: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 4 tasks
Low:    ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 2 tasks
```

### 5. **Actionable Recommendations**

Based on analysis:

1. **Immediate actions** (unblock critical path)
2. **Today&apos;s focus** (optimal task sequence)
3. **Process improvements** (recurring patterns)
4. **Resource needs** (skills, time, dependencies)

### 6. **Historical Context**

Compare to previous periods:

- Velocity changes
- Pattern recognition
- Improvement areas
- Success patterns to repeat</file><file path="fe/.claude/commands/tm/quick-install-taskmaster.md">Quick Install TaskMaster
Quick install Task Master globally if not already installed.

Execute this streamlined installation:

```bash
# Check and install in one command
task-master --version 2&gt;/dev/null || npm install -g task-master-ai

# Verify installation
task-master --version

# Quick setup check
task-master models --status || echo &quot;Note: You&apos;ll need to set up an AI provider API key&quot;
```

If you see &quot;command not found&quot; after installation, you may need to:

1. Restart your terminal
2. Or add npm global bin to PATH: `export PATH=$(npm bin -g):$PATH`

Once installed, you can use all the Task Master commands!

Quick test: Run `/taskmaster:help` to see all available commands.</file><file path="fe/.claude/commands/tm/remove-all-subtasks.md">Remove All Subtasks
Clear all subtasks from all tasks globally.

## Global Subtask Clearing

Remove all subtasks across the entire project. Use with extreme caution.

## Execution

```bash
task-master clear-subtasks --all
```

## Pre-Clear Analysis

1. **Project-Wide Summary**

   ```
   Global Subtask Summary
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Total parent tasks: 12
   Total subtasks: 47
   - Completed: 15
   - In-progress: 8
   - Pending: 24

   Work at risk: ~120 hours
   ```

2. **Critical Warnings**
   - In-progress subtasks that will lose work
   - Completed subtasks with valuable history
   - Complex dependency chains
   - Integration test results

## Double Confirmation

```
‚ö†Ô∏è  DESTRUCTIVE OPERATION WARNING ‚ö†Ô∏è
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
This will remove ALL 47 subtasks from your project
Including 8 in-progress and 15 completed subtasks

This action CANNOT be undone

Type &apos;CLEAR ALL SUBTASKS&apos; to confirm:
```

## Smart Safeguards

- Require explicit confirmation phrase
- Create automatic backup
- Log all removed data
- Option to export first

## Use Cases

Valid reasons for global clear:

- Project restructuring
- Major pivot in approach
- Starting fresh breakdown
- Switching to different task organization

## Process

1. Full project analysis
2. Create backup file
3. Show detailed impact
4. Require confirmation
5. Execute removal
6. Generate summary report

## Alternative Suggestions

Before clearing all:

- Export subtasks to file
- Clear only pending subtasks
- Clear by task category
- Archive instead of delete

## Post-Clear Report

```
Global Subtask Clear Complete
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Removed: 47 subtasks from 12 tasks
Backup saved: .taskmaster/backup/subtasks-20240115.json
Parent tasks updated: 12
Time estimates adjusted: Yes

Next steps:
- Review updated task list
- Re-expand complex tasks as needed
- Check project timeline
```</file><file path="fe/.claude/commands/tm/remove-dependency.md">Remove Dependency

Arguments: $ARGUMENTS
Remove a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to remove dependency relationship.

## Removing Dependencies

Removes a dependency relationship, potentially unblocking tasks.

## Argument Parsing

Parse natural language or IDs:

- &quot;remove dependency between 5 and 3&quot;
- &quot;5 no longer needs 3&quot;
- &quot;unblock 5 from 3&quot;
- &quot;5 3&quot; ‚Üí remove dependency of 5 on 3

## Execution

```bash
task-master remove-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Pre-Removal Checks

1. **Verify dependency exists**
2. **Check impact on task flow**
3. **Warn if it breaks logical sequence**
4. **Show what will be unblocked**

## Smart Analysis

Before removing:

- Show why dependency might have existed
- Check if removal makes tasks executable
- Verify no critical path disruption
- Suggest alternative dependencies

## Post-Removal

After removing:

1. Show updated task status
2. List newly unblocked tasks
3. Update project timeline
4. Suggest next actions

## Safety Features

- Confirm if removing critical dependency
- Show tasks that become immediately actionable
- Warn about potential issues
- Keep removal history

## Example

```
/taskmaster:remove-dependency 5 from 3
‚Üí Removed: Task #5 no longer depends on #3
‚Üí Task #5 is now UNBLOCKED and ready to start
‚Üí Warning: Consider if #5 still needs #2 completed first
```</file><file path="fe/.claude/commands/tm/remove-subtask.md">Remove Subtask

Arguments: $ARGUMENTS
Remove a subtask from its parent task.

Arguments: $ARGUMENTS

Parse subtask ID to remove, with option to convert to standalone task.

## Removing Subtasks

Remove a subtask and optionally convert it back to a standalone task.

## Argument Parsing

- &quot;remove subtask 5.1&quot;
- &quot;delete 5.1&quot;
- &quot;convert 5.1 to task&quot; ‚Üí remove and convert
- &quot;5.1 standalone&quot; ‚Üí convert to standalone

## Execution Options

### 1. Delete Subtask

```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt;
```

### 2. Convert to Standalone

```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt; --convert
```

## Pre-Removal Checks

1. **Validate Subtask**
   - Verify subtask exists
   - Check completion status
   - Review dependencies

2. **Impact Analysis**
   - Other subtasks that depend on it
   - Parent task implications
   - Data that will be lost

## Removal Process

### For Deletion:

1. Confirm if subtask has work done
2. Update parent task estimates
3. Remove subtask and its data
4. Clean up dependencies

### For Conversion:

1. Assign new standalone task ID
2. Preserve all task data
3. Update dependency references
4. Maintain task history

## Smart Features

- Warn if subtask is in-progress
- Show impact on parent task
- Preserve important data
- Update related estimates

## Example Flows

```
/taskmaster:remove-subtask 5.1
‚Üí Warning: Subtask #5.1 is in-progress
‚Üí This will delete all subtask data
‚Üí Parent task #5 will be updated
Confirm deletion? (y/n)

/taskmaster:remove-subtask 5.1 convert
‚Üí Converting subtask #5.1 to standalone task #89
‚Üí Preserved: All task data and history
‚Üí Updated: 2 dependency references
‚Üí New task #89 is now independent
```

## Post-Removal

- Update parent task status
- Recalculate estimates
- Show updated hierarchy
- Suggest next actions</file><file path="fe/.claude/commands/tm/remove-subtasks.md">Remove Subtasks

Arguments: $ARGUMENTS
Clear all subtasks from a specific task.

Arguments: $ARGUMENTS (task ID)

Remove all subtasks from a parent task at once.

## Clearing Subtasks

Bulk removal of all subtasks from a parent task.

## Execution

```bash
task-master remove-subtasks --id=$ARGUMENTS
```

## Pre-Clear Analysis

1. **Subtask Summary**
   - Number of subtasks
   - Completion status of each
   - Work already done
   - Dependencies affected

2. **Impact Assessment**
   - Data that will be lost
   - Dependencies to be removed
   - Effect on project timeline
   - Parent task implications

## Confirmation Required

```
Remove Subtasks Confirmation
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Parent Task: #5 &quot;Implement user authentication&quot;
Subtasks to remove: 4
- #5.1 &quot;Setup auth framework&quot; (done)
- #5.2 &quot;Create login form&quot; (in-progress)
- #5.3 &quot;Add validation&quot; (pending)
- #5.4 &quot;Write tests&quot; (pending)

‚ö†Ô∏è  This will permanently delete all subtask data
Continue? (y/n)
```

## Smart Features

- Option to convert to standalone tasks
- Backup task data before clearing
- Preserve completed work history
- Update parent task appropriately

## Process

1. List all subtasks for confirmation
2. Check for in-progress work
3. Remove all subtasks
4. Update parent task
5. Clean up dependencies

## Alternative Options

Suggest alternatives:

- Convert important subtasks to tasks
- Keep completed subtasks
- Archive instead of delete
- Export subtask data first

## Post-Clear

- Show updated parent task
- Recalculate time estimates
- Update task complexity
- Suggest next steps

## Example

```
/taskmaster:remove-subtasks 5
‚Üí Found 4 subtasks to remove
‚Üí Warning: Subtask #5.2 is in-progress
‚Üí Cleared all subtasks from task #5
‚Üí Updated parent task estimates
‚Üí Suggestion: Consider re-expanding with better breakdown
```</file><file path="fe/.claude/commands/tm/remove-task.md">Remove Task

Arguments: $ARGUMENTS
Remove a task permanently from the project.

Arguments: $ARGUMENTS (task ID)

Delete a task and handle all its relationships properly.

## Task Removal

Permanently removes a task while maintaining project integrity.

## Argument Parsing

- &quot;remove task 5&quot;
- &quot;delete 5&quot;
- &quot;5&quot; ‚Üí remove task 5
- Can include &quot;-y&quot; for auto-confirm

## Execution

```bash
task-master remove-task --id=&lt;id&gt; [-y]
```

## Pre-Removal Analysis

1. **Task Details**
   - Current status
   - Work completed
   - Time invested
   - Associated data

2. **Relationship Check**
   - Tasks that depend on this
   - Dependencies this task has
   - Subtasks that will be removed
   - Blocking implications

3. **Impact Assessment**

   ```
   Task Removal Impact
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Task: #5 &quot;Implement authentication&quot; (in-progress)
   Status: 60% complete (~8 hours work)

   Will affect:
   - 3 tasks depend on this (will be blocked)
   - Has 4 subtasks (will be deleted)
   - Part of critical path

   ‚ö†Ô∏è  This action cannot be undone
   ```

## Smart Warnings

- Warn if task is in-progress
- Show dependent tasks that will be blocked
- Highlight if part of critical path
- Note any completed work being lost

## Removal Process

1. Show comprehensive impact
2. Require confirmation (unless -y)
3. Update dependent task references
4. Remove task and subtasks
5. Clean up orphaned dependencies
6. Log removal with timestamp

## Alternative Actions

Suggest before deletion:

- Mark as cancelled instead
- Convert to documentation
- Archive task data
- Transfer work to another task

## Post-Removal

- List affected tasks
- Show broken dependencies
- Update project statistics
- Suggest dependency fixes
- Recalculate timeline

## Example Flows

```
/taskmaster:remove-task 5
‚Üí Task #5 is in-progress with 8 hours logged
‚Üí 3 other tasks depend on this
‚Üí Suggestion: Mark as cancelled instead?
Remove anyway? (y/n)

/taskmaster:remove-task 5 -y
‚Üí Removed: Task #5 and 4 subtasks
‚Üí Updated: 3 task dependencies
‚Üí Warning: Tasks #7, #8, #9 now have missing dependency
‚Üí Run /taskmaster:fix-dependencies to resolve
```

## Safety Features

- Confirmation required
- Impact preview
- Removal logging
- Suggest alternatives
- No cascade delete of dependents</file><file path="fe/.claude/commands/tm/setup-models.md">Setup Models
Run interactive setup to configure AI models.

## Interactive Model Configuration

Guides you through setting up AI providers for Task Master.

## Execution

```bash
task-master models --setup
```

## Setup Process

1. **Environment Check**
   - Detect existing API keys
   - Show current configuration
   - Identify missing providers

2. **Provider Selection**
   - Choose main provider (required)
   - Select research provider (recommended)
   - Configure fallback (optional)

3. **API Key Configuration**
   - Prompt for missing keys
   - Validate key format
   - Test connectivity
   - Save configuration

## Smart Recommendations

Based on your needs:

- **For best results**: Claude + Perplexity
- **Budget conscious**: GPT-3.5 + Perplexity
- **Maximum capability**: GPT-4 + Perplexity + Claude fallback

## Configuration Storage

Keys can be stored in:

1. Environment variables (recommended)
2. `.env` file in project
3. Global `.taskmaster/config`

## Post-Setup

After configuration:

- Test each provider
- Show usage examples
- Suggest next steps
- Verify parse-prd works</file><file path="fe/.claude/commands/tm/show-task.md">Show Task

Arguments: $ARGUMENTS
Show detailed task information with rich context and insights.

Arguments: $ARGUMENTS

## Enhanced Task Display

Parse arguments to determine what to show and how.

### 1. **Smart Task Selection**

Based on $ARGUMENTS:

- Number ‚Üí Show specific task with full context
- &quot;current&quot; ‚Üí Show active in-progress task(s)
- &quot;next&quot; ‚Üí Show recommended next task
- &quot;blocked&quot; ‚Üí Show all blocked tasks with reasons
- &quot;critical&quot; ‚Üí Show critical path tasks
- Multiple IDs ‚Üí Comparative view

### 2. **Contextual Information**

For each task, intelligently include:

**Core Details**

- Full task information (id, title, description, details)
- Current status with history
- Test strategy and acceptance criteria
- Priority and complexity analysis

**Relationships**

- Dependencies (what it needs)
- Dependents (what needs it)
- Parent/subtask hierarchy
- Related tasks (similar work)

**Time Intelligence**

- Created/updated timestamps
- Time in current status
- Estimated vs actual time
- Historical completion patterns

### 3. **Visual Enhancements**

```
üìã Task #45: Implement User Authentication
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Status: üü° in-progress (2 hours)
Priority: üî¥ High | Complexity: 73/100

Dependencies: ‚úÖ #41, ‚úÖ #42, ‚è≥ #43 (blocked)
Blocks: #46, #47, #52

Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% complete

Recent Activity:
- 2h ago: Status changed to in-progress
- 4h ago: Dependency #42 completed
- Yesterday: Task expanded with 3 subtasks
```

### 4. **Intelligent Insights**

Based on task analysis:

- **Risk Assessment**: Complexity vs time remaining
- **Bottleneck Analysis**: Is this blocking critical work?
- **Recommendation**: Suggested approach or concerns
- **Similar Tasks**: How others completed similar work

### 5. **Action Suggestions**

Context-aware next steps:

- If blocked ‚Üí Show how to unblock
- If complex ‚Üí Suggest expansion
- If in-progress ‚Üí Show completion checklist
- If done ‚Üí Show dependent tasks ready to start

### 6. **Multi-Task View**

When showing multiple tasks:

- Common dependencies
- Optimal completion order
- Parallel work opportunities
- Combined complexity analysis</file><file path="fe/.claude/commands/tm/smart-workflow.md">Smart Workflow

Arguments: $ARGUMENTS
Execute an intelligent workflow based on current project state and recent commands.

This command analyzes:

1. Recent commands you&apos;ve run
2. Current project state
3. Time of day / day of week
4. Your working patterns

Arguments: $ARGUMENTS

## Intelligent Workflow Selection

Based on context, I&apos;ll determine the best workflow:

### Context Analysis

- Previous command executed
- Current task states
- Unfinished work from last session
- Your typical patterns

### Smart Execution

If last command was:

- `status` ‚Üí Likely starting work ‚Üí Run daily standup
- `complete` ‚Üí Task finished ‚Üí Find next task
- `list pending` ‚Üí Planning ‚Üí Suggest sprint planning
- `expand` ‚Üí Breaking down work ‚Üí Show complexity analysis
- `init` ‚Üí New project ‚Üí Show onboarding workflow

If no recent commands:

- Morning? ‚Üí Daily standup workflow
- Many pending tasks? ‚Üí Sprint planning
- Tasks blocked? ‚Üí Dependency resolution
- Friday? ‚Üí Weekly review

### Workflow Composition

I&apos;ll chain appropriate commands:

1. Analyze current state
2. Execute primary workflow
3. Suggest follow-up actions
4. Prepare environment for coding

### Learning Mode

This command learns from your patterns:

- Track command sequences
- Note time preferences
- Remember common workflows
- Adapt to your style

Example flows detected:

- Morning: standup ‚Üí next ‚Üí start
- After lunch: status ‚Üí continue task
- End of day: complete ‚Üí commit ‚Üí status</file><file path="fe/.claude/commands/tm/sync-readme.md">Sync README

Arguments: $ARGUMENTS
Export tasks to README.md with professional formatting.

Arguments: $ARGUMENTS

Generate a well-formatted README with current task information.

## README Synchronization

Creates or updates README.md with beautifully formatted task information.

## Argument Parsing

Optional filters:

- &quot;pending&quot; ‚Üí Only pending tasks
- &quot;with-subtasks&quot; ‚Üí Include subtask details
- &quot;by-priority&quot; ‚Üí Group by priority
- &quot;sprint&quot; ‚Üí Current sprint only

## Execution

```bash
task-master sync-readme [--with-subtasks] [--status=&lt;status&gt;]
```

## README Generation

### 1. **Project Header**

```markdown
# Project Name

## üìã Task Progress

Last Updated: 2024-01-15 10:30 AM

### Summary

- Total Tasks: 45
- Completed: 15 (33%)
- In Progress: 5 (11%)
- Pending: 25 (56%)
```

### 2. **Task Sections**

Organized by status or priority:

- Progress indicators
- Task descriptions
- Dependencies noted
- Time estimates

### 3. **Visual Elements**

- Progress bars
- Status badges
- Priority indicators
- Completion checkmarks

## Smart Features

1. **Intelligent Grouping**
   - By feature area
   - By sprint/milestone
   - By assigned developer
   - By priority

2. **Progress Tracking**
   - Overall completion
   - Sprint velocity
   - Burndown indication
   - Time tracking

3. **Formatting Options**
   - GitHub-flavored markdown
   - Task checkboxes
   - Collapsible sections
   - Table format available

## Example Output

```markdown
## üöÄ Current Sprint

### In Progress

- [ ] üîÑ #5 **Implement user authentication** (60% complete)
  - Dependencies: API design (#3 ‚úÖ)
  - Subtasks: 4 (2 completed)
  - Est: 8h / Spent: 5h

### Pending (High Priority)

- [ ] ‚ö° #8 **Create dashboard UI**
  - Blocked by: #5
  - Complexity: High
  - Est: 12h
```

## Customization

Based on arguments:

- Include/exclude sections
- Detail level control
- Custom grouping
- Filter by criteria

## Post-Sync

After generation:

1. Show diff preview
2. Backup existing README
3. Write new content
4. Commit reminder
5. Update timestamp

## Integration

Works well with:

- Git workflows
- CI/CD pipelines
- Project documentation
- Team updates
- Client reports</file><file path="fe/.claude/commands/tm/tm-main.md">Task Master Main

# Task Master Command Reference

Comprehensive command structure for Task Master integration with Claude Code.

## Command Organization

Commands are organized hierarchically to match Task Master&apos;s CLI structure while providing enhanced Claude Code integration.

## Project Setup &amp; Configuration

### `/taskmaster:init`

- `init-project` - Initialize new project (handles PRD files intelligently)
- `init-project-quick` - Quick setup with auto-confirmation (-y flag)

### `/taskmaster:models`

- `view-models` - View current AI model configuration
- `setup-models` - Interactive model configuration
- `set-main` - Set primary generation model
- `set-research` - Set research model
- `set-fallback` - Set fallback model

## Task Generation

### `/taskmaster:parse-prd`

- `parse-prd` - Generate tasks from PRD document
- `parse-prd-with-research` - Enhanced parsing with research mode

### `/taskmaster:generate`

- `generate-tasks` - Create individual task files from tasks.json

## Task Management

### `/taskmaster:list`

- `list-tasks` - Smart listing with natural language filters
- `list-tasks-with-subtasks` - Include subtasks in hierarchical view
- `list-tasks-by-status` - Filter by specific status

### `/taskmaster:set-status`

- `to-pending` - Reset task to pending
- `to-in-progress` - Start working on task
- `to-done` - Mark task complete
- `to-review` - Submit for review
- `to-deferred` - Defer task
- `to-cancelled` - Cancel task

### `/taskmaster:sync-readme`

- `sync-readme` - Export tasks to README.md with formatting

### `/taskmaster:update`

- `update-task` - Update tasks with natural language
- `update-tasks-from-id` - Update multiple tasks from a starting point
- `update-single-task` - Update specific task

### `/taskmaster:add-task`

- `add-task` - Add new task with AI assistance

### `/taskmaster:remove-task`

- `remove-task` - Remove task with confirmation

## Subtask Management

### `/taskmaster:add-subtask`

- `add-subtask` - Add new subtask to parent
- `convert-task-to-subtask` - Convert existing task to subtask

### `/taskmaster:remove-subtask`

- `remove-subtask` - Remove subtask (with optional conversion)

### `/taskmaster:clear-subtasks`

- `clear-subtasks` - Clear subtasks from specific task
- `clear-all-subtasks` - Clear all subtasks globally

## Task Analysis &amp; Breakdown

### `/taskmaster:analyze-complexity`

- `analyze-complexity` - Analyze and generate expansion recommendations

### `/taskmaster:complexity-report`

- `complexity-report` - Display complexity analysis report

### `/taskmaster:expand`

- `expand-task` - Break down specific task
- `expand-all-tasks` - Expand all eligible tasks
- `with-research` - Enhanced expansion

## Task Navigation

### `/taskmaster:next`

- `next-task` - Intelligent next task recommendation

### `/taskmaster:show`

- `show-task` - Display detailed task information

### `/taskmaster:status`

- `project-status` - Comprehensive project dashboard

## Dependency Management

### `/taskmaster:add-dependency`

- `add-dependency` - Add task dependency

### `/taskmaster:remove-dependency`

- `remove-dependency` - Remove task dependency

### `/taskmaster:validate-dependencies`

- `validate-dependencies` - Check for dependency issues

### `/taskmaster:fix-dependencies`

- `fix-dependencies` - Automatically fix dependency problems

## Workflows &amp; Automation

### `/taskmaster:workflows`

- `smart-workflow` - Context-aware intelligent workflow execution
- `command-pipeline` - Chain multiple commands together
- `auto-implement-tasks` - Advanced auto-implementation with code generation

## Utilities

### `/taskmaster:utils`

- `analyze-project` - Deep project analysis and insights

### `/taskmaster:setup`

- `install-taskmaster` - Comprehensive installation guide
- `quick-install-taskmaster` - One-line global installation

## Usage Patterns

### Natural Language

Most commands accept natural language arguments:

```
/taskmaster:add-task create user authentication system
/taskmaster:update mark all API tasks as high priority
/taskmaster:list show blocked tasks
```

### ID-Based Commands

Commands requiring IDs intelligently parse from $ARGUMENTS:

```
/taskmaster:show 45
/taskmaster:expand 23
/taskmaster:set-status/to-done 67
```

### Smart Defaults

Commands provide intelligent defaults and suggestions based on context.</file><file path="fe/.claude/commands/tm/to-cancelled.md">To Cancelled

Arguments: $ARGUMENTS
Cancel a task permanently.

Arguments: $ARGUMENTS (task ID)

## Cancelling a Task

This status indicates a task is no longer needed and won&apos;t be completed.

## Valid Reasons for Cancellation

- Requirements changed
- Feature deprecated
- Duplicate of another task
- Strategic pivot
- Technical approach invalidated

## Pre-Cancellation Checks

1. Confirm no critical dependencies
2. Check for partial implementation
3. Verify cancellation rationale
4. Document lessons learned

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=cancelled
```

## Cancellation Impact

When cancelling:

1. **Dependency Updates**
   - Notify dependent tasks
   - Update project scope
   - Recalculate timelines

2. **Clean-up Actions**
   - Remove related branches
   - Archive any work done
   - Update documentation
   - Close related issues

3. **Learning Capture**
   - Document why cancelled
   - Note what was learned
   - Update estimation models
   - Prevent future duplicates

## Historical Preservation

- Keep for reference
- Tag with cancellation reason
- Link to replacement if any
- Maintain audit trail</file><file path="fe/.claude/commands/tm/to-deferred.md">To Deferred

Arguments: $ARGUMENTS
Defer a task for later consideration.

Arguments: $ARGUMENTS (task ID)

## Deferring a Task

This status indicates a task is valid but not currently actionable or prioritized.

## Valid Reasons for Deferral

- Waiting for external dependencies
- Reprioritized for future sprint
- Blocked by technical limitations
- Resource constraints
- Strategic timing considerations

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=deferred
```

## Deferral Management

When deferring:

1. **Document Reason**
   - Capture why it&apos;s being deferred
   - Set reactivation criteria
   - Note any partial work completed

2. **Impact Analysis**
   - Check dependent tasks
   - Update project timeline
   - Notify affected stakeholders

3. **Future Planning**
   - Set review reminders
   - Tag for specific milestone
   - Preserve context for reactivation
   - Link to blocking issues

## Smart Tracking

- Monitor deferral duration
- Alert when criteria met
- Prevent scope creep
- Regular review cycles</file><file path="fe/.claude/commands/tm/to-done.md">To Done

Arguments: $ARGUMENTS
Mark a task as completed.

Arguments: $ARGUMENTS (task ID)

## Completing a Task

This command validates task completion and updates project state intelligently.

## Pre-Completion Checks

1. Verify test strategy was followed
2. Check if all subtasks are complete
3. Validate acceptance criteria met
4. Ensure code is committed

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=done
```

## Post-Completion Actions

1. **Update Dependencies**
   - Identify newly unblocked tasks
   - Update sprint progress
   - Recalculate project timeline

2. **Documentation**
   - Generate completion summary
   - Update CLAUDE.md with learnings
   - Log implementation approach

3. **Next Steps**
   - Show newly available tasks
   - Suggest logical next task
   - Update velocity metrics

## Celebration &amp; Learning

- Show impact of completion
- Display unblocked work
- Recognize achievement
- Capture lessons learned</file><file path="fe/.claude/commands/tm/to-in-progress.md">To In Progress

Arguments: $ARGUMENTS
Start working on a task by setting its status to in-progress.

Arguments: $ARGUMENTS (task ID)

## Starting Work on Task

This command does more than just change status - it prepares your environment for productive work.

## Pre-Start Checks

1. Verify dependencies are met
2. Check if another task is already in-progress
3. Ensure task details are complete
4. Validate test strategy exists

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=in-progress
```

## Environment Setup

After setting to in-progress:

1. Create/checkout appropriate git branch
2. Open relevant documentation
3. Set up test watchers if applicable
4. Display task details and acceptance criteria
5. Show similar completed tasks for reference

## Smart Suggestions

- Estimated completion time based on complexity
- Related files from similar tasks
- Potential blockers to watch for
- Recommended first steps</file><file path="fe/.claude/commands/tm/to-pending.md">To Pending

Arguments: $ARGUMENTS
Set a task&apos;s status to pending.

Arguments: $ARGUMENTS (task ID)

## Setting Task to Pending

This moves a task back to the pending state, useful for:

- Resetting erroneously started tasks
- Deferring work that was prematurely begun
- Reorganizing sprint priorities

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=pending
```

## Validation

Before setting to pending:

- Warn if task is currently in-progress
- Check if this will block other tasks
- Suggest documenting why it&apos;s being reset
- Preserve any work already done

## Smart Actions

After setting to pending:

- Update sprint planning if needed
- Notify about freed resources
- Suggest priority reassessment
- Log the status change with context</file><file path="fe/.claude/commands/tm/to-review.md">To Review

Arguments: $ARGUMENTS
Set a task&apos;s status to review.

Arguments: $ARGUMENTS (task ID)

## Marking Task for Review

This status indicates work is complete but needs verification before final approval.

## When to Use Review Status

- Code complete but needs peer review
- Implementation done but needs testing
- Documentation written but needs proofreading
- Design complete but needs stakeholder approval

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=review
```

## Review Preparation

When setting to review:

1. **Generate Review Checklist**
   - Link to PR/MR if applicable
   - Highlight key changes
   - Note areas needing attention
   - Include test results

2. **Documentation**
   - Update task with review notes
   - Link relevant artifacts
   - Specify reviewers if known

3. **Smart Actions**
   - Create review reminders
   - Track review duration
   - Suggest reviewers based on expertise
   - Prepare rollback plan if needed</file><file path="fe/.claude/commands/tm/update-single-task.md">Update Single Task

Arguments: $ARGUMENTS
Update a single specific task with new information.

Arguments: $ARGUMENTS

Parse task ID and update details.

## Single Task Update

Precisely update one task with AI assistance to maintain consistency.

## Argument Parsing

Natural language updates:

- &quot;5: add caching requirement&quot;
- &quot;update 5 to include error handling&quot;
- &quot;task 5 needs rate limiting&quot;
- &quot;5 change priority to high&quot;

## Execution

```bash
task-master update-task --id=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Types

### 1. **Content Updates**

- Enhance description
- Add requirements
- Clarify details
- Update acceptance criteria

### 2. **Metadata Updates**

- Change priority
- Adjust time estimates
- Update complexity
- Modify dependencies

### 3. **Strategic Updates**

- Revise approach
- Change test strategy
- Update implementation notes
- Adjust subtask needs

## AI-Powered Updates

The AI:

1. **Understands Context**
   - Reads current task state
   - Identifies update intent
   - Maintains consistency
   - Preserves important info

2. **Applies Changes**
   - Updates relevant fields
   - Keeps style consistent
   - Adds without removing
   - Enhances clarity

3. **Validates Results**
   - Checks coherence
   - Verifies completeness
   - Maintains relationships
   - Suggests related updates

## Example Updates

```
/taskmaster:update/single 5: add rate limiting
‚Üí Updating Task #5: &quot;Implement API endpoints&quot;

Current: Basic CRUD endpoints
Adding: Rate limiting requirements

Updated sections:
‚úì Description: Added rate limiting mention
‚úì Details: Added specific limits (100/min)
‚úì Test Strategy: Added rate limit tests
‚úì Complexity: Increased from 5 to 6
‚úì Time Estimate: Increased by 2 hours

Suggestion: Also update task #6 (API Gateway) for consistency?
```

## Smart Features

1. **Incremental Updates**
   - Adds without overwriting
   - Preserves work history
   - Tracks what changed
   - Shows diff view

2. **Consistency Checks**
   - Related task alignment
   - Subtask compatibility
   - Dependency validity
   - Timeline impact

3. **Update History**
   - Timestamp changes
   - Track who/what updated
   - Reason for update
   - Previous versions

## Field-Specific Updates

Quick syntax for specific fields:

- &quot;5 priority:high&quot; ‚Üí Update priority only
- &quot;5 add-time:4h&quot; ‚Üí Add to time estimate
- &quot;5 status:review&quot; ‚Üí Change status
- &quot;5 depends:3,4&quot; ‚Üí Add dependencies

## Post-Update

- Show updated task
- Highlight changes
- Check related tasks
- Update suggestions
- Timeline adjustments</file><file path="fe/.claude/commands/tm/update-task.md">Update Task

Arguments: $ARGUMENTS
Update tasks with intelligent field detection and bulk operations.

Arguments: $ARGUMENTS

## Intelligent Task Updates

Parse arguments to determine update intent and execute smartly.

### 1. **Natural Language Processing**

Understand update requests like:

- &quot;mark 23 as done&quot; ‚Üí Update status to done
- &quot;increase priority of 45&quot; ‚Üí Set priority to high
- &quot;add dependency on 12 to task 34&quot; ‚Üí Add dependency
- &quot;tasks 20-25 need review&quot; ‚Üí Bulk status update
- &quot;all API tasks high priority&quot; ‚Üí Pattern-based update

### 2. **Smart Field Detection**

Automatically detect what to update:

- Status keywords: done, complete, start, pause, review
- Priority changes: urgent, high, low, deprioritize
- Dependency updates: depends on, blocks, after
- Assignment: assign to, owner, responsible
- Time: estimate, spent, deadline

### 3. **Bulk Operations**

Support for multiple task updates:

```
Examples:
- &quot;complete tasks 12, 15, 18&quot;
- &quot;all pending auth tasks to in-progress&quot;
- &quot;increase priority for tasks blocking 45&quot;
- &quot;defer all documentation tasks&quot;
```

### 4. **Contextual Validation**

Before updating, check:

- Status transitions are valid
- Dependencies don&apos;t create cycles
- Priority changes make sense
- Bulk updates won&apos;t break project flow

Show preview:

```
Update Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Tasks to update: #23, #24, #25
Change: status ‚Üí in-progress
Impact: Will unblock tasks #30, #31
Warning: Task #24 has unmet dependencies
```

### 5. **Smart Suggestions**

Based on update:

- Completing task? ‚Üí Show newly unblocked tasks
- Changing priority? ‚Üí Show impact on sprint
- Adding dependency? ‚Üí Check for conflicts
- Bulk update? ‚Üí Show summary of changes

### 6. **Workflow Integration**

After updates:

- Auto-update dependent task states
- Trigger status recalculation
- Update sprint/milestone progress
- Log changes with context

Result: Flexible, intelligent task updates with safety checks.</file><file path="fe/.claude/commands/tm/update-tasks-from-id.md">Update Tasks From ID

Arguments: $ARGUMENTS
Update multiple tasks starting from a specific ID.

Arguments: $ARGUMENTS

Parse starting task ID and update context.

## Bulk Task Updates

Update multiple related tasks based on new requirements or context changes.

## Argument Parsing

- &quot;from 5: add security requirements&quot;
- &quot;5 onwards: update API endpoints&quot;
- &quot;starting at 5: change to use new framework&quot;

## Execution

```bash
task-master update --from=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Process

### 1. **Task Selection**

Starting from specified ID:

- Include the task itself
- Include all dependent tasks
- Include related subtasks
- Smart boundary detection

### 2. **Context Application**

AI analyzes the update context and:

- Identifies what needs changing
- Maintains consistency
- Preserves completed work
- Updates related information

### 3. **Intelligent Updates**

- Modify descriptions appropriately
- Update test strategies
- Adjust time estimates
- Revise dependencies if needed

## Smart Features

1. **Scope Detection**
   - Find natural task groupings
   - Identify related features
   - Stop at logical boundaries
   - Avoid over-updating

2. **Consistency Maintenance**
   - Keep naming conventions
   - Preserve relationships
   - Update cross-references
   - Maintain task flow

3. **Change Preview**

   ```
   Bulk Update Preview
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Starting from: Task #5
   Tasks to update: 8 tasks + 12 subtasks

   Context: &quot;add security requirements&quot;

   Changes will include:
   - Add security sections to descriptions
   - Update test strategies for security
   - Add security-related subtasks where needed
   - Adjust time estimates (+20% average)

   Continue? (y/n)
   ```

## Example Updates

```
/taskmaster:update-tasks-from-id 5: change database to PostgreSQL
‚Üí Analyzing impact starting from task #5
‚Üí Found 6 related tasks to update
‚Üí Updates will maintain consistency
‚Üí Preview changes? (y/n)

Applied updates:
‚úì Task #5: Updated connection logic references
‚úì Task #6: Changed migration approach
‚úì Task #7: Updated query syntax notes
‚úì Task #8: Revised testing strategy
‚úì Task #9: Updated deployment steps
‚úì Task #12: Changed backup procedures
```

## Safety Features

- Preview all changes
- Selective confirmation
- Rollback capability
- Change logging
- Validation checks

## Post-Update

- Summary of changes
- Consistency verification
- Suggest review tasks
- Update timeline if needed</file><file path="fe/.claude/commands/tm/validate-dependencies.md">Validate Dependencies
Validate all task dependencies for issues.

## Dependency Validation

Comprehensive check for dependency problems across the entire project.

## Execution

```bash
task-master validate-dependencies
```

## Validation Checks

1. **Circular Dependencies**
   - A depends on B, B depends on A
   - Complex circular chains
   - Self-dependencies

2. **Missing Dependencies**
   - References to non-existent tasks
   - Deleted task references
   - Invalid task IDs

3. **Logical Issues**
   - Completed tasks depending on pending
   - Cancelled tasks in dependency chains
   - Impossible sequences

4. **Complexity Warnings**
   - Over-complex dependency chains
   - Too many dependencies per task
   - Bottleneck tasks

## Smart Analysis

The validation provides:

- Visual dependency graph
- Critical path analysis
- Bottleneck identification
- Suggested optimizations

## Report Format

```
Dependency Validation Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ No circular dependencies found
‚ö†Ô∏è  2 warnings found:
   - Task #23 has 7 dependencies (consider breaking down)
   - Task #45 blocks 5 other tasks (potential bottleneck)
‚ùå 1 error found:
   - Task #67 depends on deleted task #66

Critical Path: #1 ‚Üí #5 ‚Üí #23 ‚Üí #45 ‚Üí #50 (15 days)
```

## Actionable Output

For each issue found:

- Clear description
- Impact assessment
- Suggested fix
- Command to resolve

## Next Steps

After validation:

- Run `/taskmaster:fix-dependencies` to auto-fix
- Manually adjust problematic dependencies
- Rerun to verify fixes</file><file path="fe/.claude/commands/tm/view-models.md">View Models
View current AI model configuration.

## Model Configuration Display

Shows the currently configured AI providers and models for Task Master.

## Execution

```bash
task-master models
```

## Information Displayed

1. **Main Provider**
   - Model ID and name
   - API key status (configured/missing)
   - Usage: Primary task generation

2. **Research Provider**
   - Model ID and name
   - API key status
   - Usage: Enhanced research mode

3. **Fallback Provider**
   - Model ID and name
   - API key status
   - Usage: Backup when main fails

## Visual Status

```
Task Master AI Model Configuration
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Main:     ‚úÖ claude-3-5-sonnet (configured)
Research: ‚úÖ perplexity-sonar (configured)
Fallback: ‚ö†Ô∏è  Not configured (optional)

Available Models:
- claude-3-5-sonnet
- gpt-4-turbo
- gpt-3.5-turbo
- perplexity-sonar
```

## Next Actions

Based on configuration:

- If missing API keys ‚Üí Suggest setup
- If no research model ‚Üí Explain benefits
- If all configured ‚Üí Show usage tips</file><file path="fe/.cursor/commands/tm/add-dependency.md">Add a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to establish dependency relationship.

## Adding Dependencies

Creates a dependency where one task must be completed before another can start.

## Argument Parsing

Parse natural language or IDs:

- &quot;make 5 depend on 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 needs 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 after 3&quot; ‚Üí task 5 depends on task 3

## Execution

```bash
task-master add-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Validation

Before adding:

1. **Verify both tasks exist**
2. **Check for circular dependencies**
3. **Ensure dependency makes logical sense**
4. **Warn if creating complex chains**

## Smart Features

- Detect if dependency already exists
- Suggest related dependencies
- Show impact on task flow
- Update task priorities if needed

## Post-Addition

After adding dependency:

1. Show updated dependency graph
2. Identify any newly blocked tasks
3. Suggest task order changes
4. Update project timeline

## Example Flows

```
/taskmaster:add-dependency 5 needs 3
‚Üí Task #5 now depends on Task #3
‚Üí Task #5 is now blocked until #3 completes
‚Üí Suggested: Also consider if #5 needs #4
```</file><file path="fe/.cursor/commands/tm/add-subtask.md">Add a subtask to a parent task.

Arguments: $ARGUMENTS

Parse arguments to create a new subtask or convert existing task.

## Adding Subtasks

Creates subtasks to break down complex parent tasks into manageable pieces.

## Argument Parsing

Flexible natural language:

- &quot;add subtask to 5: implement login form&quot;
- &quot;break down 5 with: setup, implement, test&quot;
- &quot;subtask for 5: handle edge cases&quot;
- &quot;5: validate user input&quot; ‚Üí adds subtask to task 5

## Execution Modes

### 1. Create New Subtask

```bash
task-master add-subtask --parent=&lt;id&gt; --title=&quot;&lt;title&gt;&quot; --description=&quot;&lt;desc&gt;&quot;
```

### 2. Convert Existing Task

```bash
task-master add-subtask --parent=&lt;id&gt; --task-id=&lt;existing-id&gt;
```

## Smart Features

1. **Automatic Subtask Generation**
   - If title contains &quot;and&quot; or commas, create multiple
   - Suggest common subtask patterns
   - Inherit parent&apos;s context

2. **Intelligent Defaults**
   - Priority based on parent
   - Appropriate time estimates
   - Logical dependencies between subtasks

3. **Validation**
   - Check parent task complexity
   - Warn if too many subtasks
   - Ensure subtask makes sense

## Creation Process

1. Parse parent task context
2. Generate subtask with ID like &quot;5.1&quot;
3. Set appropriate defaults
4. Link to parent task
5. Update parent&apos;s time estimate

## Example Flows

```
/taskmaster:add-subtask to 5: implement user authentication
‚Üí Created subtask #5.1: &quot;implement user authentication&quot;
‚Üí Parent task #5 now has 1 subtask
‚Üí Suggested next subtasks: tests, documentation

/taskmaster:add-subtask 5: setup, implement, test
‚Üí Created 3 subtasks:
  #5.1: setup
  #5.2: implement
  #5.3: test
```

## Post-Creation

- Show updated task hierarchy
- Suggest logical next subtasks
- Update complexity estimates
- Recommend subtask order</file><file path="fe/.cursor/commands/tm/add-task.md">Add new tasks with intelligent parsing and context awareness.

Arguments: $ARGUMENTS

## Smart Task Addition

Parse natural language to create well-structured tasks.

### 1. **Input Understanding**

I&apos;ll intelligently parse your request:

- Natural language ‚Üí Structured task
- Detect priority from keywords (urgent, ASAP, important)
- Infer dependencies from context
- Suggest complexity based on description
- Determine task type (feature, bug, refactor, test, docs)

### 2. **Smart Parsing Examples**

**&quot;Add urgent task to fix login bug&quot;**
‚Üí Title: Fix login bug
‚Üí Priority: high
‚Üí Type: bug
‚Üí Suggested complexity: medium

**&quot;Create task for API documentation after task 23 is done&quot;**
‚Üí Title: API documentation
‚Üí Dependencies: [23]
‚Üí Type: documentation
‚Üí Priority: medium

**&quot;Need to refactor auth module - depends on 12 and 15, high complexity&quot;**
‚Üí Title: Refactor auth module
‚Üí Dependencies: [12, 15]
‚Üí Complexity: high
‚Üí Type: refactor

### 3. **Context Enhancement**

Based on current project state:

- Suggest related existing tasks
- Warn about potential conflicts
- Recommend dependencies
- Propose subtasks if complex

### 4. **Interactive Refinement**

```yaml
Task Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Title: [Extracted title]
Priority: [Inferred priority]
Dependencies: [Detected dependencies]
Complexity: [Estimated complexity]

Suggestions:
- Similar task #34 exists, consider as dependency?
- This seems complex, break into subtasks?
- Tasks #45-47 work on same module
```

### 5. **Validation &amp; Creation**

Before creating:

- Validate dependencies exist
- Check for duplicates
- Ensure logical ordering
- Verify task completeness

### 6. **Smart Defaults**

Intelligent defaults based on:

- Task type patterns
- Team conventions
- Historical data
- Current sprint/phase

Result: High-quality tasks from minimal input.</file><file path="fe/.cursor/commands/tm/analyze-complexity.md">Analyze task complexity and generate expansion recommendations.

Arguments: $ARGUMENTS

Perform deep analysis of task complexity across the project.

## Complexity Analysis

Uses AI to analyze tasks and recommend which ones need breakdown.

## Execution Options

```bash
task-master analyze-complexity [--research] [--threshold=5]
```

## Analysis Parameters

- `--research` ‚Üí Use research AI for deeper analysis
- `--threshold=5` ‚Üí Only flag tasks above complexity 5
- Default: Analyze all pending tasks

## Analysis Process

### 1. **Task Evaluation**

For each task, AI evaluates:

- Technical complexity
- Time requirements
- Dependency complexity
- Risk factors
- Knowledge requirements

### 2. **Complexity Scoring**

Assigns score 1-10 based on:

- Implementation difficulty
- Integration challenges
- Testing requirements
- Unknown factors
- Technical debt risk

### 3. **Recommendations**

For complex tasks:

- Suggest expansion approach
- Recommend subtask breakdown
- Identify risk areas
- Propose mitigation strategies

## Smart Analysis Features

1. **Pattern Recognition**
   - Similar task comparisons
   - Historical complexity accuracy
   - Team velocity consideration
   - Technology stack factors

2. **Contextual Factors**
   - Team expertise
   - Available resources
   - Timeline constraints
   - Business criticality

3. **Risk Assessment**
   - Technical risks
   - Timeline risks
   - Dependency risks
   - Knowledge gaps

## Output Format

```
Task Complexity Analysis Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

High Complexity Tasks (&gt;7):
üìç #5 &quot;Implement real-time sync&quot; - Score: 9/10
   Factors: WebSocket complexity, state management, conflict resolution
   Recommendation: Expand into 5-7 subtasks
   Risks: Performance, data consistency

üìç #12 &quot;Migrate database schema&quot; - Score: 8/10
   Factors: Data migration, zero downtime, rollback strategy
   Recommendation: Expand into 4-5 subtasks
   Risks: Data loss, downtime

Medium Complexity Tasks (5-7):
üìç #23 &quot;Add export functionality&quot; - Score: 6/10
   Consider expansion if timeline tight

Low Complexity Tasks (&lt;5):
‚úÖ 15 tasks - No expansion needed

Summary:
- Expand immediately: 2 tasks
- Consider expanding: 5 tasks
- Keep as-is: 15 tasks
```

## Actionable Output

For each high-complexity task:

1. Complexity score with reasoning
2. Specific expansion suggestions
3. Risk mitigation approaches
4. Recommended subtask structure

## Integration

Results are:

- Saved to `.taskmaster/reports/complexity-analysis.md`
- Used by expand command
- Inform sprint planning
- Guide resource allocation

## Next Steps

After analysis:

```
/taskmaster:expand 5    # Expand specific task
/taskmaster:expand-all  # Expand all recommended
/taskmaster:complexity-report  # View detailed report
```</file><file path="fe/.cursor/commands/tm/analyze-project.md">Advanced project analysis with actionable insights and recommendations.

Arguments: $ARGUMENTS

## Comprehensive Project Analysis

Multi-dimensional analysis based on requested focus area.

### 1. **Analysis Modes**

Based on $ARGUMENTS:

- &quot;velocity&quot; ‚Üí Sprint velocity and trends
- &quot;quality&quot; ‚Üí Code quality metrics
- &quot;risk&quot; ‚Üí Risk assessment and mitigation
- &quot;dependencies&quot; ‚Üí Dependency graph analysis
- &quot;team&quot; ‚Üí Workload and skill distribution
- &quot;architecture&quot; ‚Üí System design coherence
- Default ‚Üí Full spectrum analysis

### 2. **Velocity Analytics**

```
üìä Velocity Analysis
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Current Sprint: 24 points/week ‚ÜóÔ∏è +20%
Rolling Average: 20 points/week
Efficiency: 85% (17/20 tasks on time)

Bottlenecks Detected:
- Code review delays (avg 4h wait)
- Test environment availability
- Dependency on external team

Recommendations:
1. Implement parallel review process
2. Add staging environment
3. Mock external dependencies
```

### 3. **Risk Assessment**

**Technical Risks**

- High complexity tasks without backup assignee
- Single points of failure in architecture
- Insufficient test coverage in critical paths
- Technical debt accumulation rate

**Project Risks**

- Critical path dependencies
- Resource availability gaps
- Deadline feasibility analysis
- Scope creep indicators

### 4. **Dependency Intelligence**

Visual dependency analysis:

```
Critical Path:
#12 ‚Üí #15 ‚Üí #23 ‚Üí #45 ‚Üí #50 (20 days)
         ‚Üò #24 ‚Üí #46 ‚Üó

Optimization: Parallelize #15 and #24
Time Saved: 3 days
```

### 5. **Quality Metrics**

**Code Quality**

- Test coverage trends
- Complexity scores
- Technical debt ratio
- Review feedback patterns

**Process Quality**

- Rework frequency
- Bug introduction rate
- Time to resolution
- Knowledge distribution

### 6. **Predictive Insights**

Based on patterns:

- Completion probability by deadline
- Resource needs projection
- Risk materialization likelihood
- Suggested interventions

### 7. **Executive Dashboard**

High-level summary with:

- Health score (0-100)
- Top 3 risks
- Top 3 opportunities
- Recommended actions
- Success probability

Result: Data-driven decisions with clear action paths.</file><file path="fe/.cursor/commands/tm/auto-implement-tasks.md">Enhanced auto-implementation with intelligent code generation and testing.

Arguments: $ARGUMENTS

## Intelligent Auto-Implementation

Advanced implementation with context awareness and quality checks.

### 1. **Pre-Implementation Analysis**

Before starting:

- Analyze task complexity and requirements
- Check codebase patterns and conventions
- Identify similar completed tasks
- Assess test coverage needs
- Detect potential risks

### 2. **Smart Implementation Strategy**

Based on task type and context:

**Feature Tasks**

1. Research existing patterns
2. Design component architecture
3. Implement with tests
4. Integrate with system
5. Update documentation

**Bug Fix Tasks**

1. Reproduce issue
2. Identify root cause
3. Implement minimal fix
4. Add regression tests
5. Verify side effects

**Refactoring Tasks**

1. Analyze current structure
2. Plan incremental changes
3. Maintain test coverage
4. Refactor step-by-step
5. Verify behavior unchanged

### 3. **Code Intelligence**

**Pattern Recognition**

- Learn from existing code
- Follow team conventions
- Use preferred libraries
- Match style guidelines

**Test-Driven Approach**

- Write tests first when possible
- Ensure comprehensive coverage
- Include edge cases
- Performance considerations

### 4. **Progressive Implementation**

Step-by-step with validation:

```
Step 1/5: Setting up component structure ‚úì
Step 2/5: Implementing core logic ‚úì
Step 3/5: Adding error handling ‚ö° (in progress)
Step 4/5: Writing tests ‚è≥
Step 5/5: Integration testing ‚è≥

Current: Adding try-catch blocks and validation...
```

### 5. **Quality Assurance**

Automated checks:

- Linting and formatting
- Test execution
- Type checking
- Dependency validation
- Performance analysis

### 6. **Smart Recovery**

If issues arise:

- Diagnostic analysis
- Suggestion generation
- Fallback strategies
- Manual intervention points
- Learning from failures

### 7. **Post-Implementation**

After completion:

- Generate PR description
- Update documentation
- Log lessons learned
- Suggest follow-up tasks
- Update task relationships

Result: High-quality, production-ready implementations.</file><file path="fe/.cursor/commands/tm/command-pipeline.md">Execute a pipeline of commands based on a specification.

Arguments: $ARGUMENTS

## Command Pipeline Execution

Parse pipeline specification from arguments. Supported formats:

### Simple Pipeline

`init ‚Üí expand-all ‚Üí sprint-plan`

### Conditional Pipeline

`status ‚Üí if:pending&gt;10 ‚Üí sprint-plan ‚Üí else ‚Üí next`

### Iterative Pipeline

`for:pending-tasks ‚Üí expand ‚Üí complexity-check`

### Smart Pipeline Patterns

**1. Project Setup Pipeline**

```
init [prd] ‚Üí
expand-all ‚Üí
complexity-report ‚Üí
sprint-plan ‚Üí
show first-sprint
```

**2. Daily Work Pipeline**

```
standup ‚Üí
if:in-progress ‚Üí continue ‚Üí
else ‚Üí next ‚Üí start
```

**3. Task Completion Pipeline**

```
complete [id] ‚Üí
git-commit ‚Üí
if:blocked-tasks-freed ‚Üí show-freed ‚Üí
next
```

**4. Quality Check Pipeline**

```
list in-progress ‚Üí
for:each ‚Üí check-idle-time ‚Üí
if:idle&gt;1day ‚Üí prompt-update
```

### Pipeline Features

**Variables**

- Store results: `status ‚Üí $count=pending-count`
- Use in conditions: `if:$count&gt;10`
- Pass between commands: `expand $high-priority-tasks`

**Error Handling**

- On failure: `try:complete ‚Üí catch:show-blockers`
- Skip on error: `optional:test-run`
- Retry logic: `retry:3:commit`

**Parallel Execution**

- Parallel branches: `[analyze | test | lint]`
- Join results: `parallel ‚Üí join:report`

### Execution Flow

1. Parse pipeline specification
2. Validate command sequence
3. Execute with state passing
4. Handle conditions and loops
5. Aggregate results
6. Show summary

This enables complex workflows like:
`parse-prd ‚Üí expand-all ‚Üí filter:complex&gt;70 ‚Üí assign:senior ‚Üí sprint-plan:weighted`</file><file path="fe/.cursor/commands/tm/complexity-report.md">Display the task complexity analysis report.

Arguments: $ARGUMENTS

View the detailed complexity analysis generated by analyze-complexity command.

## Viewing Complexity Report

Shows comprehensive task complexity analysis with actionable insights.

## Execution

```bash
task-master complexity-report [--file=&lt;path&gt;]
```

## Report Location

Default: `.taskmaster/reports/complexity-analysis.md`
Custom: Specify with --file parameter

## Report Contents

### 1. **Executive Summary**

```
Complexity Analysis Summary
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Analysis Date: 2024-01-15
Tasks Analyzed: 32
High Complexity: 5 (16%)
Medium Complexity: 12 (37%)
Low Complexity: 15 (47%)

Critical Findings:
- 5 tasks need immediate expansion
- 3 tasks have high technical risk
- 2 tasks block critical path
```

### 2. **Detailed Task Analysis**

For each complex task:

- Complexity score breakdown
- Contributing factors
- Specific risks identified
- Expansion recommendations
- Similar completed tasks

### 3. **Risk Matrix**

Visual representation:

```
Risk vs Complexity Matrix
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
High Risk  | #5(9) #12(8) | #23(6)
Med Risk   | #34(7)       | #45(5) #67(5)
Low Risk   | #78(8)       | [15 tasks]
           | High Complex  | Med Complex
```

### 4. **Recommendations**

**Immediate Actions:**

1. Expand task #5 - Critical path + high complexity
2. Expand task #12 - High risk + dependencies
3. Review task #34 - Consider splitting

**Sprint Planning:**

- Don&apos;t schedule multiple high-complexity tasks together
- Ensure expertise available for complex tasks
- Build in buffer time for unknowns

## Interactive Features

When viewing report:

1. **Quick Actions**
   - Press &apos;e&apos; to expand a task
   - Press &apos;d&apos; for task details
   - Press &apos;r&apos; to refresh analysis

2. **Filtering**
   - View by complexity level
   - Filter by risk factors
   - Show only actionable items

3. **Export Options**
   - Markdown format
   - CSV for spreadsheets
   - JSON for tools

## Report Intelligence

- Compares with historical data
- Shows complexity trends
- Identifies patterns
- Suggests process improvements

## Integration

Use report for:

- Sprint planning sessions
- Resource allocation
- Risk assessment
- Team discussions
- Client updates

## Example Usage

```
/taskmaster:complexity-report
‚Üí Opens latest analysis

/taskmaster:complexity-report --file=archived/2024-01-01.md
‚Üí View historical analysis

After viewing:
/taskmaster:expand 5
‚Üí Expand high-complexity task
```</file><file path="fe/.cursor/commands/tm/convert-task-to-subtask.md">Convert an existing task into a subtask.

Arguments: $ARGUMENTS

Parse parent ID and task ID to convert.

## Task Conversion

Converts an existing standalone task into a subtask of another task.

## Argument Parsing

- &quot;move task 8 under 5&quot;
- &quot;make 8 a subtask of 5&quot;
- &quot;nest 8 in 5&quot;
- &quot;5 8&quot; ‚Üí make task 8 a subtask of task 5

## Execution

```bash
task-master add-subtask --parent=&lt;parent-id&gt; --task-id=&lt;task-to-convert&gt;
```

## Pre-Conversion Checks

1. **Validation**
   - Both tasks exist and are valid
   - No circular parent relationships
   - Task isn&apos;t already a subtask
   - Logical hierarchy makes sense

2. **Impact Analysis**
   - Dependencies that will be affected
   - Tasks that depend on converting task
   - Priority alignment needed
   - Status compatibility

## Conversion Process

1. Change task ID from &quot;8&quot; to &quot;5.1&quot; (next available)
2. Update all dependency references
3. Inherit parent&apos;s context where appropriate
4. Adjust priorities if needed
5. Update time estimates

## Smart Features

- Preserve task history
- Maintain dependencies
- Update all references
- Create conversion log

## Example

```
/taskmaster:add-subtask/from-task 5 8
‚Üí Converting: Task #8 becomes subtask #5.1
‚Üí Updated: 3 dependency references
‚Üí Parent task #5 now has 1 subtask
‚Üí Note: Subtask inherits parent&apos;s priority

Before: #8 &quot;Implement validation&quot; (standalone)
After:  #5.1 &quot;Implement validation&quot; (subtask of #5)
```

## Post-Conversion

- Show new task hierarchy
- List updated dependencies
- Verify project integrity
- Suggest related conversions</file><file path="fe/.cursor/commands/tm/expand-all-tasks.md">Expand all pending tasks that need subtasks.

## Bulk Task Expansion

Intelligently expands all tasks that would benefit from breakdown.

## Execution

```bash
task-master expand --all
```

## Smart Selection

Only expands tasks that:

- Are marked as pending
- Have high complexity (&gt;5)
- Lack existing subtasks
- Would benefit from breakdown

## Expansion Process

1. **Analysis Phase**
   - Identify expansion candidates
   - Group related tasks
   - Plan expansion strategy

2. **Batch Processing**
   - Expand tasks in logical order
   - Maintain consistency
   - Preserve relationships
   - Optimize for parallelism

3. **Quality Control**
   - Ensure subtask quality
   - Avoid over-decomposition
   - Maintain task coherence
   - Update dependencies

## Options

- Add `force` to expand all regardless of complexity
- Add `research` for enhanced AI analysis

## Results

After bulk expansion:

- Summary of tasks expanded
- New subtask count
- Updated complexity metrics
- Suggested task order</file><file path="fe/.cursor/commands/tm/expand-task.md">Break down a complex task into subtasks.

Arguments: $ARGUMENTS (task ID)

## Intelligent Task Expansion

Analyzes a task and creates detailed subtasks for better manageability.

## Execution

```bash
task-master expand --id=$ARGUMENTS
```

## Expansion Process

1. **Task Analysis**
   - Review task complexity
   - Identify components
   - Detect technical challenges
   - Estimate time requirements

2. **Subtask Generation**
   - Create 3-7 subtasks typically
   - Each subtask 1-4 hours
   - Logical implementation order
   - Clear acceptance criteria

3. **Smart Breakdown**
   - Setup/configuration tasks
   - Core implementation
   - Testing components
   - Integration steps
   - Documentation updates

## Enhanced Features

Based on task type:

- **Feature**: Setup ‚Üí Implement ‚Üí Test ‚Üí Integrate
- **Bug Fix**: Reproduce ‚Üí Diagnose ‚Üí Fix ‚Üí Verify
- **Refactor**: Analyze ‚Üí Plan ‚Üí Refactor ‚Üí Validate

## Post-Expansion

After expansion:

1. Show subtask hierarchy
2. Update time estimates
3. Suggest implementation order
4. Highlight critical path</file><file path="fe/.cursor/commands/tm/fix-dependencies.md">Automatically fix dependency issues found during validation.

## Automatic Dependency Repair

Intelligently fixes common dependency problems while preserving project logic.

## Execution

```bash
task-master fix-dependencies
```

## What Gets Fixed

### 1. **Auto-Fixable Issues**

- Remove references to deleted tasks
- Break simple circular dependencies
- Remove self-dependencies
- Clean up duplicate dependencies

### 2. **Smart Resolutions**

- Reorder dependencies to maintain logic
- Suggest task merging for over-dependent tasks
- Flatten unnecessary dependency chains
- Remove redundant transitive dependencies

### 3. **Manual Review Required**

- Complex circular dependencies
- Critical path modifications
- Business logic dependencies
- High-impact changes

## Fix Process

1. **Analysis Phase**
   - Run validation check
   - Categorize issues by type
   - Determine fix strategy

2. **Execution Phase**
   - Apply automatic fixes
   - Log all changes made
   - Preserve task relationships

3. **Verification Phase**
   - Re-validate after fixes
   - Show before/after comparison
   - Highlight manual fixes needed

## Smart Features

- Preserves intended task flow
- Minimal disruption approach
- Creates fix history/log
- Suggests manual interventions

## Output Example

```
Dependency Auto-Fix Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Fixed Automatically:
‚úÖ Removed 2 references to deleted tasks
‚úÖ Resolved 1 self-dependency
‚úÖ Cleaned 3 redundant dependencies

Manual Review Needed:
‚ö†Ô∏è Complex circular dependency: #12 ‚Üí #15 ‚Üí #18 ‚Üí #12
  Suggestion: Make #15 not depend on #12
‚ö†Ô∏è Task #45 has 8 dependencies
  Suggestion: Break into subtasks

Run &apos;/taskmaster:validate-dependencies&apos; to verify fixes
```

## Safety

- Preview mode available
- Rollback capability
- Change logging
- No data loss</file><file path="fe/.cursor/commands/tm/help.md">Show help for Task Master AI commands.

Arguments: $ARGUMENTS

Display help for Task Master commands and available options.

## Task Master AI Command Help

### Quick Navigation

Type `/taskmaster:` and use tab completion to explore all commands.

### Command Categories

#### üöÄ Setup &amp; Installation

- `/taskmaster:install-taskmaster` - Comprehensive installation guide
- `/taskmaster:quick-install-taskmaster` - One-line global install

#### üìã Project Setup

- `/taskmaster:init-project` - Initialize new project
- `/taskmaster:init-project-quick` - Quick setup with auto-confirm
- `/taskmaster:view-models` - View AI configuration
- `/taskmaster:setup-models` - Configure AI providers

#### üéØ Task Generation

- `/taskmaster:parse-prd` - Generate tasks from PRD
- `/taskmaster:parse-prd-with-research` - Enhanced parsing
- `/taskmaster:generate-tasks` - Create task files

#### üìù Task Management

- `/taskmaster:list-tasks` - List all tasks
- `/taskmaster:list-tasks-by-status` - List tasks filtered by status
- `/taskmaster:list-tasks-with-subtasks` - List tasks with subtasks
- `/taskmaster:show-task` - Display task details
- `/taskmaster:add-task` - Create new task
- `/taskmaster:update-task` - Update single task
- `/taskmaster:update-tasks-from-id` - Update multiple tasks
- `/taskmaster:next-task` - Get next task recommendation

#### üîÑ Status Management

- `/taskmaster:to-pending` - Set task to pending
- `/taskmaster:to-in-progress` - Set task to in-progress
- `/taskmaster:to-done` - Set task to done
- `/taskmaster:to-review` - Set task to review
- `/taskmaster:to-deferred` - Set task to deferred
- `/taskmaster:to-cancelled` - Set task to cancelled

#### üîç Analysis &amp; Breakdown

- `/taskmaster:analyze-complexity` - Analyze task complexity
- `/taskmaster:complexity-report` - View complexity report
- `/taskmaster:expand-task` - Break down complex task
- `/taskmaster:expand-all-tasks` - Expand all eligible tasks

#### üîó Dependencies

- `/taskmaster:add-dependency` - Add task dependency
- `/taskmaster:remove-dependency` - Remove dependency
- `/taskmaster:validate-dependencies` - Check for issues
- `/taskmaster:fix-dependencies` - Auto-fix dependency issues

#### üì¶ Subtasks

- `/taskmaster:add-subtask` - Add subtask to task
- `/taskmaster:convert-task-to-subtask` - Convert task to subtask
- `/taskmaster:remove-subtask` - Remove subtask
- `/taskmaster:remove-subtasks` - Clear specific task subtasks
- `/taskmaster:remove-all-subtasks` - Clear all subtasks

#### üóëÔ∏è Task Removal

- `/taskmaster:remove-task` - Remove task permanently

#### ü§ñ Workflows

- `/taskmaster:smart-workflow` - Intelligent workflows
- `/taskmaster:command-pipeline` - Command chaining
- `/taskmaster:auto-implement-tasks` - Auto-implementation

#### üìä Utilities

- `/taskmaster:analyze-project` - Project analysis
- `/taskmaster:project-status` - Project dashboard
- `/taskmaster:sync-readme` - Sync README with tasks
- `/taskmaster:learn` - Interactive learning
- `/taskmaster:tm-main` - Main Task Master interface

### Quick Start Examples

```
/taskmaster:list-tasks
/taskmaster:show-task 1.2
/taskmaster:add-task
/taskmaster:next-task
```

### Getting Started

1. Install: `/taskmaster:quick-install-taskmaster`
2. Initialize: `/taskmaster:init-project-quick`
3. Learn: `/taskmaster:learn`
4. Work: `/taskmaster:smart-workflow`

For detailed command info, run the specific command with `--help` or check command documentation.</file><file path="fe/.cursor/commands/tm/init-project-quick.md">Quick initialization with auto-confirmation.

Arguments: $ARGUMENTS

Initialize a Task Master project without prompts, accepting all defaults.

## Quick Setup

```bash
task-master init -y
```

## What It Does

1. Creates `.taskmaster/` directory structure
2. Initializes empty `tasks.json`
3. Sets up default configuration
4. Uses directory name as project name
5. Skips all confirmation prompts

## Smart Defaults

- Project name: Current directory name
- Description: &quot;Task Master Project&quot;
- Model config: Existing environment vars
- Task structure: Standard format

## Next Steps

After quick init:

1. Configure AI models if needed:

   ```
   /taskmaster:models/setup
   ```

2. Parse PRD if available:

   ```
   /taskmaster:parse-prd &lt;file&gt;
   ```

3. Or create first task:
   ```
   /taskmaster:add-task create initial setup
   ```

Perfect for rapid project setup!</file><file path="fe/.cursor/commands/tm/init-project.md">Initialize a new Task Master project.

Arguments: $ARGUMENTS

Parse arguments to determine initialization preferences.

## Initialization Process

1. **Parse Arguments**
   - PRD file path (if provided)
   - Project name
   - Auto-confirm flag (-y)

2. **Project Setup**

   ```bash
   task-master init
   ```

3. **Smart Initialization**
   - Detect existing project files
   - Suggest project name from directory
   - Check for git repository
   - Verify AI provider configuration

## Configuration Options

Based on arguments:

- `quick` / `-y` ‚Üí Skip confirmations
- `&lt;file.md&gt;` ‚Üí Use as PRD after init
- `--name=&lt;name&gt;` ‚Üí Set project name
- `--description=&lt;desc&gt;` ‚Üí Set description

## Post-Initialization

After successful init:

1. Show project structure created
2. Verify AI models configured
3. Suggest next steps:
   - Parse PRD if available
   - Configure AI providers
   - Set up git hooks
   - Create first tasks

## Integration

If PRD file provided:

```
/taskmaster:init my-prd.md
‚Üí Automatically runs parse-prd after init
```</file><file path="fe/.cursor/commands/tm/install-taskmaster.md">Check if Task Master is installed and install it if needed.

This command helps you get Task Master set up globally on your system.

## Detection and Installation Process

1. **Check Current Installation**

   ```bash
   # Check if task-master command exists
   which task-master || echo &quot;Task Master not found&quot;

   # Check npm global packages
   npm list -g task-master-ai
   ```

2. **System Requirements Check**

   ```bash
   # Verify Node.js is installed
   node --version

   # Verify npm is installed
   npm --version

   # Check Node version (need 16+)
   ```

3. **Install Task Master Globally**
   If not installed, run:

   ```bash
   npm install -g task-master-ai
   ```

4. **Verify Installation**

   ```bash
   # Check version
   task-master --version

   # Verify command is available
   which task-master
   ```

5. **Initial Setup**

   ```bash
   # Initialize in current directory
   task-master init
   ```

6. **Configure AI Provider**
   Ensure you have at least one AI provider API key set:

   ```bash
   # Check current configuration
   task-master models --status

   # If no API keys found, guide setup
   echo &quot;You&apos;ll need at least one API key:&quot;
   echo &quot;- ANTHROPIC_API_KEY for Claude&quot;
   echo &quot;- OPENAI_API_KEY for GPT models&quot;
   echo &quot;- PERPLEXITY_API_KEY for research&quot;
   echo &quot;&quot;
   echo &quot;Set them in your shell profile or .env file&quot;
   ```

7. **Quick Test**

   ```bash
   # Create a test PRD
   echo &quot;Build a simple hello world API&quot; &gt; test-prd.txt

   # Try parsing it
   task-master parse-prd test-prd.txt -n 3
   ```

## Troubleshooting

If installation fails:

**Permission Errors:**

```bash
# Try with sudo (macOS/Linux)
sudo npm install -g task-master-ai

# Or fix npm permissions
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH
```

**Network Issues:**

```bash
# Use different registry
npm install -g task-master-ai --registry https://registry.npmjs.org/
```

**Node Version Issues:**

```bash
# Install Node 20+ via nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20
```

## Success Confirmation

Once installed, you should see:

```
‚úÖ Task Master installed
‚úÖ Command &apos;task-master&apos; available globally
‚úÖ AI provider configured
‚úÖ Ready to use slash commands!

Try: /taskmaster:init your-prd.md
```

## Next Steps

After installation:

1. Run `/taskmaster:status` to verify setup
2. Configure AI providers with `/taskmaster:setup-models`
3. Start using Task Master commands!</file><file path="fe/.cursor/commands/tm/learn.md">Learn about Task Master capabilities through interactive exploration.

Arguments: $ARGUMENTS

## Interactive Task Master Learning

Based on your input, I&apos;ll help you discover capabilities:

### 1. **What are you trying to do?**

If $ARGUMENTS contains:

- &quot;start&quot; / &quot;begin&quot; ‚Üí Show project initialization workflows
- &quot;manage&quot; / &quot;organize&quot; ‚Üí Show task management commands
- &quot;automate&quot; / &quot;auto&quot; ‚Üí Show automation workflows
- &quot;analyze&quot; / &quot;report&quot; ‚Üí Show analysis tools
- &quot;fix&quot; / &quot;problem&quot; ‚Üí Show troubleshooting commands
- &quot;fast&quot; / &quot;quick&quot; ‚Üí Show efficiency shortcuts

### 2. **Intelligent Suggestions**

Based on your project state:

**No tasks yet?**

```
You&apos;ll want to start with:
1. /project:task-master:init &lt;prd-file&gt;
   ‚Üí Creates tasks from requirements

2. /project:task-master:parse-prd &lt;file&gt;
   ‚Üí Alternative task generation

Try: /project:task-master:init demo-prd.md
```

**Have tasks?**
Let me analyze what you might need...

- Many pending tasks? ‚Üí Learn sprint planning
- Complex tasks? ‚Üí Learn task expansion
- Daily work? ‚Üí Learn workflow automation

### 3. **Command Discovery**

**By Category:**

- üìã Task Management: list, show, add, update, complete
- üîÑ Workflows: auto-implement, sprint-plan, daily-standup
- üõ†Ô∏è Utilities: check-health, complexity-report, sync-memory
- üîç Analysis: validate-deps, show dependencies

**By Scenario:**

- &quot;I want to see what to work on&quot; ‚Üí `/project:task-master:next`
- &quot;I need to break this down&quot; ‚Üí `/project:task-master:expand &lt;id&gt;`
- &quot;Show me everything&quot; ‚Üí `/project:task-master:status`
- &quot;Just do it for me&quot; ‚Üí `/project:workflows:auto-implement`

### 4. **Power User Patterns**

**Command Chaining:**

```
/project:task-master:next
/project:task-master:start &lt;id&gt;
/project:workflows:auto-implement
```

**Smart Filters:**

```
/project:task-master:list pending high
/project:task-master:list blocked
/project:task-master:list 1-5 tree
```

**Automation:**

```
/project:workflows:pipeline init ‚Üí expand-all ‚Üí sprint-plan
```

### 5. **Learning Path**

Based on your experience level:

**Beginner Path:**

1. init ‚Üí Create project
2. status ‚Üí Understand state
3. next ‚Üí Find work
4. complete ‚Üí Finish task

**Intermediate Path:**

1. expand ‚Üí Break down complex tasks
2. sprint-plan ‚Üí Organize work
3. complexity-report ‚Üí Understand difficulty
4. validate-deps ‚Üí Ensure consistency

**Advanced Path:**

1. pipeline ‚Üí Chain operations
2. smart-flow ‚Üí Context-aware automation
3. Custom commands ‚Üí Extend the system

### 6. **Try This Now**

Based on what you asked about, try:
[Specific command suggestion based on $ARGUMENTS]

Want to learn more about a specific command?
Type: /project:help &lt;command-name&gt;</file><file path="fe/.cursor/commands/tm/list-tasks-by-status.md">List tasks filtered by a specific status.

Arguments: $ARGUMENTS

Parse the status from arguments and list only tasks matching that status.

## Status Options

- `pending` - Not yet started
- `in-progress` - Currently being worked on
- `done` - Completed
- `review` - Awaiting review
- `deferred` - Postponed
- `cancelled` - Cancelled

## Execution

Based on $ARGUMENTS, run:

```bash
task-master list --status=$ARGUMENTS
```

## Enhanced Display

For the filtered results:

- Group by priority within the status
- Show time in current status
- Highlight tasks approaching deadlines
- Display blockers and dependencies
- Suggest next actions for each status group

## Intelligent Insights

Based on the status filter:

- **Pending**: Show recommended start order
- **In-Progress**: Display idle time warnings
- **Done**: Show newly unblocked tasks
- **Review**: Indicate review duration
- **Deferred**: Show reactivation criteria
- **Cancelled**: Display impact analysis</file><file path="fe/.cursor/commands/tm/list-tasks-with-subtasks.md">List all tasks including their subtasks in a hierarchical view.

This command shows all tasks with their nested subtasks, providing a complete project overview.

## Execution

Run the Task Master list command with subtasks flag:

```bash
task-master list --with-subtasks
```

## Enhanced Display

I&apos;ll organize the output to show:

- Parent tasks with clear indicators
- Nested subtasks with proper indentation
- Status badges for quick scanning
- Dependencies and blockers highlighted
- Progress indicators for tasks with subtasks

## Smart Filtering

Based on the task hierarchy:

- Show completion percentage for parent tasks
- Highlight blocked subtask chains
- Group by functional areas
- Indicate critical path items

This gives you a complete tree view of your project structure.</file><file path="fe/.cursor/commands/tm/list-tasks.md">List tasks with intelligent argument parsing.

Parse arguments to determine filters and display options:

- Status: pending, in-progress, done, review, deferred, cancelled
- Priority: high, medium, low (or priority:high)
- Special: subtasks, tree, dependencies, blocked
- IDs: Direct numbers (e.g., &quot;1,3,5&quot; or &quot;1-5&quot;)
- Complex: &quot;pending high&quot; = pending AND high priority

Arguments: $ARGUMENTS

Let me parse your request intelligently:

1. **Detect Filter Intent**
   - If arguments contain status keywords ‚Üí filter by status
   - If arguments contain priority ‚Üí filter by priority
   - If arguments contain &quot;subtasks&quot; ‚Üí include subtasks
   - If arguments contain &quot;tree&quot; ‚Üí hierarchical view
   - If arguments contain numbers ‚Üí show specific tasks
   - If arguments contain &quot;blocked&quot; ‚Üí show blocked tasks only

2. **Smart Combinations**
   Examples of what I understand:
   - &quot;pending high&quot; ‚Üí pending tasks with high priority
   - &quot;done today&quot; ‚Üí tasks completed today
   - &quot;blocked&quot; ‚Üí tasks with unmet dependencies
   - &quot;1-5&quot; ‚Üí tasks 1 through 5
   - &quot;subtasks tree&quot; ‚Üí hierarchical view with subtasks

3. **Execute Appropriate Query**
   Based on parsed intent, run the most specific task-master command

4. **Enhanced Display**
   - Group by relevant criteria
   - Show most important information first
   - Use visual indicators for quick scanning
   - Include relevant metrics

5. **Intelligent Suggestions**
   Based on what you&apos;re viewing, suggest next actions:
   - Many pending? ‚Üí Suggest priority order
   - Many blocked? ‚Üí Show dependency resolution
   - Looking at specific tasks? ‚Üí Show related tasks</file><file path="fe/.cursor/commands/tm/next-task.md">Intelligently determine and prepare the next action based on comprehensive context.

This enhanced version of &apos;next&apos; considers:

- Current task states
- Recent activity
- Time constraints
- Dependencies
- Your working patterns

Arguments: $ARGUMENTS

## Intelligent Next Action

### 1. **Context Gathering**

Let me analyze the current situation:

- Active tasks (in-progress)
- Recently completed tasks
- Blocked tasks
- Time since last activity
- Arguments provided: $ARGUMENTS

### 2. **Smart Decision Tree**

**If you have an in-progress task:**

- Has it been idle &gt; 2 hours? ‚Üí Suggest resuming or switching
- Near completion? ‚Üí Show remaining steps
- Blocked? ‚Üí Find alternative task

**If no in-progress tasks:**

- Unblocked high-priority tasks? ‚Üí Start highest
- Complex tasks need breakdown? ‚Üí Suggest expansion
- All tasks blocked? ‚Üí Show dependency resolution

**Special arguments handling:**

- &quot;quick&quot; ‚Üí Find task &lt; 2 hours
- &quot;easy&quot; ‚Üí Find low complexity task
- &quot;important&quot; ‚Üí Find high priority regardless of complexity
- &quot;continue&quot; ‚Üí Resume last worked task

### 3. **Preparation Workflow**

Based on selected task:

1. Show full context and history
2. Set up development environment
3. Run relevant tests
4. Open related files
5. Show similar completed tasks
6. Estimate completion time

### 4. **Alternative Suggestions**

Always provide options:

- Primary recommendation
- Quick alternative (&lt; 1 hour)
- Strategic option (unblocks most tasks)
- Learning option (new technology/skill)

### 5. **Workflow Integration**

Seamlessly connect to:

- `/project:task-master:start [selected]`
- `/project:workflows:auto-implement`
- `/project:task-master:expand` (if complex)
- `/project:utils:complexity-report` (if unsure)

The goal: Zero friction from decision to implementation.</file><file path="fe/.cursor/commands/tm/parse-prd-with-research.md">Parse PRD with enhanced research mode for better task generation.

Arguments: $ARGUMENTS (PRD file path)

## Research-Enhanced Parsing

Uses the research AI provider (typically Perplexity) for more comprehensive task generation with current best practices.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS --research
```

## Research Benefits

1. **Current Best Practices**
   - Latest framework patterns
   - Security considerations
   - Performance optimizations
   - Accessibility requirements

2. **Technical Deep Dive**
   - Implementation approaches
   - Library recommendations
   - Architecture patterns
   - Testing strategies

3. **Comprehensive Coverage**
   - Edge cases consideration
   - Error handling tasks
   - Monitoring setup
   - Deployment tasks

## Enhanced Output

Research mode typically:

- Generates more detailed tasks
- Includes industry standards
- Adds compliance considerations
- Suggests modern tooling

## When to Use

- New technology domains
- Complex requirements
- Regulatory compliance needed
- Best practices crucial</file><file path="fe/.cursor/commands/tm/parse-prd.md">Parse a PRD document to generate tasks.

Arguments: $ARGUMENTS (PRD file path)

## Intelligent PRD Parsing

Analyzes your requirements document and generates a complete task breakdown.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS
```

## Parsing Process

1. **Document Analysis**
   - Extract key requirements
   - Identify technical components
   - Detect dependencies
   - Estimate complexity

2. **Task Generation**
   - Create 10-15 tasks by default
   - Include implementation tasks
   - Add testing tasks
   - Include documentation tasks
   - Set logical dependencies

3. **Smart Enhancements**
   - Group related functionality
   - Set appropriate priorities
   - Add acceptance criteria
   - Include test strategies

## Options

Parse arguments for modifiers:

- Number after filename ‚Üí `--num-tasks`
- `research` ‚Üí Use research mode
- `comprehensive` ‚Üí Generate more tasks

## Post-Generation

After parsing:

1. Display task summary
2. Show dependency graph
3. Suggest task expansion for complex items
4. Recommend sprint planning</file><file path="fe/.cursor/commands/tm/project-status.md">Enhanced status command with comprehensive project insights.

Arguments: $ARGUMENTS

## Intelligent Status Overview

### 1. **Executive Summary**

Quick dashboard view:

- üèÉ Active work (in-progress tasks)
- üìä Progress metrics (% complete, velocity)
- üöß Blockers and risks
- ‚è±Ô∏è Time analysis (estimated vs actual)
- üéØ Sprint/milestone progress

### 2. **Contextual Analysis**

Based on $ARGUMENTS, focus on:

- &quot;sprint&quot; ‚Üí Current sprint progress and burndown
- &quot;blocked&quot; ‚Üí Dependency chains and resolution paths
- &quot;team&quot; ‚Üí Task distribution and workload
- &quot;timeline&quot; ‚Üí Schedule adherence and projections
- &quot;risk&quot; ‚Üí High complexity or overdue items

### 3. **Smart Insights**

**Workflow Health:**

- Idle tasks (in-progress &gt; 24h without updates)
- Bottlenecks (multiple tasks waiting on same dependency)
- Quick wins (low complexity, high impact)

**Predictive Analytics:**

- Completion projections based on velocity
- Risk of missing deadlines
- Recommended task order for optimal flow

### 4. **Visual Intelligence**

Dynamic visualization based on data:

```
Sprint Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% (16/20 tasks)
Velocity Trend: ‚ÜóÔ∏è +15% this week
Blocked Tasks:  üî¥ 3 critical path items

Priority Distribution:
High:   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 8 tasks (2 blocked)
Medium: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 4 tasks
Low:    ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 2 tasks
```

### 5. **Actionable Recommendations**

Based on analysis:

1. **Immediate actions** (unblock critical path)
2. **Today&apos;s focus** (optimal task sequence)
3. **Process improvements** (recurring patterns)
4. **Resource needs** (skills, time, dependencies)

### 6. **Historical Context**

Compare to previous periods:

- Velocity changes
- Pattern recognition
- Improvement areas
- Success patterns to repeat</file><file path="fe/.cursor/commands/tm/quick-install-taskmaster.md">Quick install Task Master globally if not already installed.

Execute this streamlined installation:

```bash
# Check and install in one command
task-master --version 2&gt;/dev/null || npm install -g task-master-ai

# Verify installation
task-master --version

# Quick setup check
task-master models --status || echo &quot;Note: You&apos;ll need to set up an AI provider API key&quot;
```

If you see &quot;command not found&quot; after installation, you may need to:

1. Restart your terminal
2. Or add npm global bin to PATH: `export PATH=$(npm bin -g):$PATH`

Once installed, you can use all the Task Master commands!

Quick test: Run `/taskmaster:help` to see all available commands.</file><file path="fe/.cursor/commands/tm/remove-all-subtasks.md">Clear all subtasks from all tasks globally.

## Global Subtask Clearing

Remove all subtasks across the entire project. Use with extreme caution.

## Execution

```bash
task-master clear-subtasks --all
```

## Pre-Clear Analysis

1. **Project-Wide Summary**

   ```
   Global Subtask Summary
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Total parent tasks: 12
   Total subtasks: 47
   - Completed: 15
   - In-progress: 8
   - Pending: 24

   Work at risk: ~120 hours
   ```

2. **Critical Warnings**
   - In-progress subtasks that will lose work
   - Completed subtasks with valuable history
   - Complex dependency chains
   - Integration test results

## Double Confirmation

```
‚ö†Ô∏è  DESTRUCTIVE OPERATION WARNING ‚ö†Ô∏è
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
This will remove ALL 47 subtasks from your project
Including 8 in-progress and 15 completed subtasks

This action CANNOT be undone

Type &apos;CLEAR ALL SUBTASKS&apos; to confirm:
```

## Smart Safeguards

- Require explicit confirmation phrase
- Create automatic backup
- Log all removed data
- Option to export first

## Use Cases

Valid reasons for global clear:

- Project restructuring
- Major pivot in approach
- Starting fresh breakdown
- Switching to different task organization

## Process

1. Full project analysis
2. Create backup file
3. Show detailed impact
4. Require confirmation
5. Execute removal
6. Generate summary report

## Alternative Suggestions

Before clearing all:

- Export subtasks to file
- Clear only pending subtasks
- Clear by task category
- Archive instead of delete

## Post-Clear Report

```
Global Subtask Clear Complete
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Removed: 47 subtasks from 12 tasks
Backup saved: .taskmaster/backup/subtasks-20240115.json
Parent tasks updated: 12
Time estimates adjusted: Yes

Next steps:
- Review updated task list
- Re-expand complex tasks as needed
- Check project timeline
```</file><file path="fe/.cursor/commands/tm/remove-dependency.md">Remove a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to remove dependency relationship.

## Removing Dependencies

Removes a dependency relationship, potentially unblocking tasks.

## Argument Parsing

Parse natural language or IDs:

- &quot;remove dependency between 5 and 3&quot;
- &quot;5 no longer needs 3&quot;
- &quot;unblock 5 from 3&quot;
- &quot;5 3&quot; ‚Üí remove dependency of 5 on 3

## Execution

```bash
task-master remove-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Pre-Removal Checks

1. **Verify dependency exists**
2. **Check impact on task flow**
3. **Warn if it breaks logical sequence**
4. **Show what will be unblocked**

## Smart Analysis

Before removing:

- Show why dependency might have existed
- Check if removal makes tasks executable
- Verify no critical path disruption
- Suggest alternative dependencies

## Post-Removal

After removing:

1. Show updated task status
2. List newly unblocked tasks
3. Update project timeline
4. Suggest next actions

## Safety Features

- Confirm if removing critical dependency
- Show tasks that become immediately actionable
- Warn about potential issues
- Keep removal history

## Example

```
/taskmaster:remove-dependency 5 from 3
‚Üí Removed: Task #5 no longer depends on #3
‚Üí Task #5 is now UNBLOCKED and ready to start
‚Üí Warning: Consider if #5 still needs #2 completed first
```</file><file path="fe/.cursor/commands/tm/remove-subtask.md">Remove a subtask from its parent task.

Arguments: $ARGUMENTS

Parse subtask ID to remove, with option to convert to standalone task.

## Removing Subtasks

Remove a subtask and optionally convert it back to a standalone task.

## Argument Parsing

- &quot;remove subtask 5.1&quot;
- &quot;delete 5.1&quot;
- &quot;convert 5.1 to task&quot; ‚Üí remove and convert
- &quot;5.1 standalone&quot; ‚Üí convert to standalone

## Execution Options

### 1. Delete Subtask

```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt;
```

### 2. Convert to Standalone

```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt; --convert
```

## Pre-Removal Checks

1. **Validate Subtask**
   - Verify subtask exists
   - Check completion status
   - Review dependencies

2. **Impact Analysis**
   - Other subtasks that depend on it
   - Parent task implications
   - Data that will be lost

## Removal Process

### For Deletion:

1. Confirm if subtask has work done
2. Update parent task estimates
3. Remove subtask and its data
4. Clean up dependencies

### For Conversion:

1. Assign new standalone task ID
2. Preserve all task data
3. Update dependency references
4. Maintain task history

## Smart Features

- Warn if subtask is in-progress
- Show impact on parent task
- Preserve important data
- Update related estimates

## Example Flows

```
/taskmaster:remove-subtask 5.1
‚Üí Warning: Subtask #5.1 is in-progress
‚Üí This will delete all subtask data
‚Üí Parent task #5 will be updated
Confirm deletion? (y/n)

/taskmaster:remove-subtask 5.1 convert
‚Üí Converting subtask #5.1 to standalone task #89
‚Üí Preserved: All task data and history
‚Üí Updated: 2 dependency references
‚Üí New task #89 is now independent
```

## Post-Removal

- Update parent task status
- Recalculate estimates
- Show updated hierarchy
- Suggest next actions</file><file path="fe/.cursor/commands/tm/remove-subtasks.md">Clear all subtasks from a specific task.

Arguments: $ARGUMENTS (task ID)

Remove all subtasks from a parent task at once.

## Clearing Subtasks

Bulk removal of all subtasks from a parent task.

## Execution

```bash
task-master remove-subtasks --id=$ARGUMENTS
```

## Pre-Clear Analysis

1. **Subtask Summary**
   - Number of subtasks
   - Completion status of each
   - Work already done
   - Dependencies affected

2. **Impact Assessment**
   - Data that will be lost
   - Dependencies to be removed
   - Effect on project timeline
   - Parent task implications

## Confirmation Required

```
Remove Subtasks Confirmation
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Parent Task: #5 &quot;Implement user authentication&quot;
Subtasks to remove: 4
- #5.1 &quot;Setup auth framework&quot; (done)
- #5.2 &quot;Create login form&quot; (in-progress)
- #5.3 &quot;Add validation&quot; (pending)
- #5.4 &quot;Write tests&quot; (pending)

‚ö†Ô∏è  This will permanently delete all subtask data
Continue? (y/n)
```

## Smart Features

- Option to convert to standalone tasks
- Backup task data before clearing
- Preserve completed work history
- Update parent task appropriately

## Process

1. List all subtasks for confirmation
2. Check for in-progress work
3. Remove all subtasks
4. Update parent task
5. Clean up dependencies

## Alternative Options

Suggest alternatives:

- Convert important subtasks to tasks
- Keep completed subtasks
- Archive instead of delete
- Export subtask data first

## Post-Clear

- Show updated parent task
- Recalculate time estimates
- Update task complexity
- Suggest next steps

## Example

```
/taskmaster:remove-subtasks 5
‚Üí Found 4 subtasks to remove
‚Üí Warning: Subtask #5.2 is in-progress
‚Üí Cleared all subtasks from task #5
‚Üí Updated parent task estimates
‚Üí Suggestion: Consider re-expanding with better breakdown
```</file><file path="fe/.cursor/commands/tm/remove-task.md">Remove a task permanently from the project.

Arguments: $ARGUMENTS (task ID)

Delete a task and handle all its relationships properly.

## Task Removal

Permanently removes a task while maintaining project integrity.

## Argument Parsing

- &quot;remove task 5&quot;
- &quot;delete 5&quot;
- &quot;5&quot; ‚Üí remove task 5
- Can include &quot;-y&quot; for auto-confirm

## Execution

```bash
task-master remove-task --id=&lt;id&gt; [-y]
```

## Pre-Removal Analysis

1. **Task Details**
   - Current status
   - Work completed
   - Time invested
   - Associated data

2. **Relationship Check**
   - Tasks that depend on this
   - Dependencies this task has
   - Subtasks that will be removed
   - Blocking implications

3. **Impact Assessment**

   ```
   Task Removal Impact
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Task: #5 &quot;Implement authentication&quot; (in-progress)
   Status: 60% complete (~8 hours work)

   Will affect:
   - 3 tasks depend on this (will be blocked)
   - Has 4 subtasks (will be deleted)
   - Part of critical path

   ‚ö†Ô∏è  This action cannot be undone
   ```

## Smart Warnings

- Warn if task is in-progress
- Show dependent tasks that will be blocked
- Highlight if part of critical path
- Note any completed work being lost

## Removal Process

1. Show comprehensive impact
2. Require confirmation (unless -y)
3. Update dependent task references
4. Remove task and subtasks
5. Clean up orphaned dependencies
6. Log removal with timestamp

## Alternative Actions

Suggest before deletion:

- Mark as cancelled instead
- Convert to documentation
- Archive task data
- Transfer work to another task

## Post-Removal

- List affected tasks
- Show broken dependencies
- Update project statistics
- Suggest dependency fixes
- Recalculate timeline

## Example Flows

```
/taskmaster:remove-task 5
‚Üí Task #5 is in-progress with 8 hours logged
‚Üí 3 other tasks depend on this
‚Üí Suggestion: Mark as cancelled instead?
Remove anyway? (y/n)

/taskmaster:remove-task 5 -y
‚Üí Removed: Task #5 and 4 subtasks
‚Üí Updated: 3 task dependencies
‚Üí Warning: Tasks #7, #8, #9 now have missing dependency
‚Üí Run /taskmaster:fix-dependencies to resolve
```

## Safety Features

- Confirmation required
- Impact preview
- Removal logging
- Suggest alternatives
- No cascade delete of dependents</file><file path="fe/.cursor/commands/tm/setup-models.md">Run interactive setup to configure AI models.

## Interactive Model Configuration

Guides you through setting up AI providers for Task Master.

## Execution

```bash
task-master models --setup
```

## Setup Process

1. **Environment Check**
   - Detect existing API keys
   - Show current configuration
   - Identify missing providers

2. **Provider Selection**
   - Choose main provider (required)
   - Select research provider (recommended)
   - Configure fallback (optional)

3. **API Key Configuration**
   - Prompt for missing keys
   - Validate key format
   - Test connectivity
   - Save configuration

## Smart Recommendations

Based on your needs:

- **For best results**: Claude + Perplexity
- **Budget conscious**: GPT-3.5 + Perplexity
- **Maximum capability**: GPT-4 + Perplexity + Claude fallback

## Configuration Storage

Keys can be stored in:

1. Environment variables (recommended)
2. `.env` file in project
3. Global `.taskmaster/config`

## Post-Setup

After configuration:

- Test each provider
- Show usage examples
- Suggest next steps
- Verify parse-prd works</file><file path="fe/.cursor/commands/tm/show-task.md">Show detailed task information with rich context and insights.

Arguments: $ARGUMENTS

## Enhanced Task Display

Parse arguments to determine what to show and how.

### 1. **Smart Task Selection**

Based on $ARGUMENTS:

- Number ‚Üí Show specific task with full context
- &quot;current&quot; ‚Üí Show active in-progress task(s)
- &quot;next&quot; ‚Üí Show recommended next task
- &quot;blocked&quot; ‚Üí Show all blocked tasks with reasons
- &quot;critical&quot; ‚Üí Show critical path tasks
- Multiple IDs ‚Üí Comparative view

### 2. **Contextual Information**

For each task, intelligently include:

**Core Details**

- Full task information (id, title, description, details)
- Current status with history
- Test strategy and acceptance criteria
- Priority and complexity analysis

**Relationships**

- Dependencies (what it needs)
- Dependents (what needs it)
- Parent/subtask hierarchy
- Related tasks (similar work)

**Time Intelligence**

- Created/updated timestamps
- Time in current status
- Estimated vs actual time
- Historical completion patterns

### 3. **Visual Enhancements**

```
üìã Task #45: Implement User Authentication
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Status: üü° in-progress (2 hours)
Priority: üî¥ High | Complexity: 73/100

Dependencies: ‚úÖ #41, ‚úÖ #42, ‚è≥ #43 (blocked)
Blocks: #46, #47, #52

Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% complete

Recent Activity:
- 2h ago: Status changed to in-progress
- 4h ago: Dependency #42 completed
- Yesterday: Task expanded with 3 subtasks
```

### 4. **Intelligent Insights**

Based on task analysis:

- **Risk Assessment**: Complexity vs time remaining
- **Bottleneck Analysis**: Is this blocking critical work?
- **Recommendation**: Suggested approach or concerns
- **Similar Tasks**: How others completed similar work

### 5. **Action Suggestions**

Context-aware next steps:

- If blocked ‚Üí Show how to unblock
- If complex ‚Üí Suggest expansion
- If in-progress ‚Üí Show completion checklist
- If done ‚Üí Show dependent tasks ready to start

### 6. **Multi-Task View**

When showing multiple tasks:

- Common dependencies
- Optimal completion order
- Parallel work opportunities
- Combined complexity analysis</file><file path="fe/.cursor/commands/tm/smart-workflow.md">Execute an intelligent workflow based on current project state and recent commands.

This command analyzes:

1. Recent commands you&apos;ve run
2. Current project state
3. Time of day / day of week
4. Your working patterns

Arguments: $ARGUMENTS

## Intelligent Workflow Selection

Based on context, I&apos;ll determine the best workflow:

### Context Analysis

- Previous command executed
- Current task states
- Unfinished work from last session
- Your typical patterns

### Smart Execution

If last command was:

- `status` ‚Üí Likely starting work ‚Üí Run daily standup
- `complete` ‚Üí Task finished ‚Üí Find next task
- `list pending` ‚Üí Planning ‚Üí Suggest sprint planning
- `expand` ‚Üí Breaking down work ‚Üí Show complexity analysis
- `init` ‚Üí New project ‚Üí Show onboarding workflow

If no recent commands:

- Morning? ‚Üí Daily standup workflow
- Many pending tasks? ‚Üí Sprint planning
- Tasks blocked? ‚Üí Dependency resolution
- Friday? ‚Üí Weekly review

### Workflow Composition

I&apos;ll chain appropriate commands:

1. Analyze current state
2. Execute primary workflow
3. Suggest follow-up actions
4. Prepare environment for coding

### Learning Mode

This command learns from your patterns:

- Track command sequences
- Note time preferences
- Remember common workflows
- Adapt to your style

Example flows detected:

- Morning: standup ‚Üí next ‚Üí start
- After lunch: status ‚Üí continue task
- End of day: complete ‚Üí commit ‚Üí status</file><file path="fe/.cursor/commands/tm/sync-readme.md">Export tasks to README.md with professional formatting.

Arguments: $ARGUMENTS

Generate a well-formatted README with current task information.

## README Synchronization

Creates or updates README.md with beautifully formatted task information.

## Argument Parsing

Optional filters:

- &quot;pending&quot; ‚Üí Only pending tasks
- &quot;with-subtasks&quot; ‚Üí Include subtask details
- &quot;by-priority&quot; ‚Üí Group by priority
- &quot;sprint&quot; ‚Üí Current sprint only

## Execution

```bash
task-master sync-readme [--with-subtasks] [--status=&lt;status&gt;]
```

## README Generation

### 1. **Project Header**

```markdown
# Project Name

## üìã Task Progress

Last Updated: 2024-01-15 10:30 AM

### Summary

- Total Tasks: 45
- Completed: 15 (33%)
- In Progress: 5 (11%)
- Pending: 25 (56%)
```

### 2. **Task Sections**

Organized by status or priority:

- Progress indicators
- Task descriptions
- Dependencies noted
- Time estimates

### 3. **Visual Elements**

- Progress bars
- Status badges
- Priority indicators
- Completion checkmarks

## Smart Features

1. **Intelligent Grouping**
   - By feature area
   - By sprint/milestone
   - By assigned developer
   - By priority

2. **Progress Tracking**
   - Overall completion
   - Sprint velocity
   - Burndown indication
   - Time tracking

3. **Formatting Options**
   - GitHub-flavored markdown
   - Task checkboxes
   - Collapsible sections
   - Table format available

## Example Output

```markdown
## üöÄ Current Sprint

### In Progress

- [ ] üîÑ #5 **Implement user authentication** (60% complete)
  - Dependencies: API design (#3 ‚úÖ)
  - Subtasks: 4 (2 completed)
  - Est: 8h / Spent: 5h

### Pending (High Priority)

- [ ] ‚ö° #8 **Create dashboard UI**
  - Blocked by: #5
  - Complexity: High
  - Est: 12h
```

## Customization

Based on arguments:

- Include/exclude sections
- Detail level control
- Custom grouping
- Filter by criteria

## Post-Sync

After generation:

1. Show diff preview
2. Backup existing README
3. Write new content
4. Commit reminder
5. Update timestamp

## Integration

Works well with:

- Git workflows
- CI/CD pipelines
- Project documentation
- Team updates
- Client reports</file><file path="fe/.cursor/commands/tm/tm-main.md"># Task Master Command Reference

Comprehensive command structure for Task Master integration with Claude Code.

## Command Organization

Commands are organized hierarchically to match Task Master&apos;s CLI structure while providing enhanced Claude Code integration.

## Project Setup &amp; Configuration

### `/taskmaster:init`

- `init-project` - Initialize new project (handles PRD files intelligently)
- `init-project-quick` - Quick setup with auto-confirmation (-y flag)

### `/taskmaster:models`

- `view-models` - View current AI model configuration
- `setup-models` - Interactive model configuration
- `set-main` - Set primary generation model
- `set-research` - Set research model
- `set-fallback` - Set fallback model

## Task Generation

### `/taskmaster:parse-prd`

- `parse-prd` - Generate tasks from PRD document
- `parse-prd-with-research` - Enhanced parsing with research mode

### `/taskmaster:generate`

- `generate-tasks` - Create individual task files from tasks.json

## Task Management

### `/taskmaster:list`

- `list-tasks` - Smart listing with natural language filters
- `list-tasks-with-subtasks` - Include subtasks in hierarchical view
- `list-tasks-by-status` - Filter by specific status

### `/taskmaster:set-status`

- `to-pending` - Reset task to pending
- `to-in-progress` - Start working on task
- `to-done` - Mark task complete
- `to-review` - Submit for review
- `to-deferred` - Defer task
- `to-cancelled` - Cancel task

### `/taskmaster:sync-readme`

- `sync-readme` - Export tasks to README.md with formatting

### `/taskmaster:update`

- `update-task` - Update tasks with natural language
- `update-tasks-from-id` - Update multiple tasks from a starting point
- `update-single-task` - Update specific task

### `/taskmaster:add-task`

- `add-task` - Add new task with AI assistance

### `/taskmaster:remove-task`

- `remove-task` - Remove task with confirmation

## Subtask Management

### `/taskmaster:add-subtask`

- `add-subtask` - Add new subtask to parent
- `convert-task-to-subtask` - Convert existing task to subtask

### `/taskmaster:remove-subtask`

- `remove-subtask` - Remove subtask (with optional conversion)

### `/taskmaster:clear-subtasks`

- `clear-subtasks` - Clear subtasks from specific task
- `clear-all-subtasks` - Clear all subtasks globally

## Task Analysis &amp; Breakdown

### `/taskmaster:analyze-complexity`

- `analyze-complexity` - Analyze and generate expansion recommendations

### `/taskmaster:complexity-report`

- `complexity-report` - Display complexity analysis report

### `/taskmaster:expand`

- `expand-task` - Break down specific task
- `expand-all-tasks` - Expand all eligible tasks
- `with-research` - Enhanced expansion

## Task Navigation

### `/taskmaster:next`

- `next-task` - Intelligent next task recommendation

### `/taskmaster:show`

- `show-task` - Display detailed task information

### `/taskmaster:status`

- `project-status` - Comprehensive project dashboard

## Dependency Management

### `/taskmaster:add-dependency`

- `add-dependency` - Add task dependency

### `/taskmaster:remove-dependency`

- `remove-dependency` - Remove task dependency

### `/taskmaster:validate-dependencies`

- `validate-dependencies` - Check for dependency issues

### `/taskmaster:fix-dependencies`

- `fix-dependencies` - Automatically fix dependency problems

## Workflows &amp; Automation

### `/taskmaster:workflows`

- `smart-workflow` - Context-aware intelligent workflow execution
- `command-pipeline` - Chain multiple commands together
- `auto-implement-tasks` - Advanced auto-implementation with code generation

## Utilities

### `/taskmaster:utils`

- `analyze-project` - Deep project analysis and insights

### `/taskmaster:setup`

- `install-taskmaster` - Comprehensive installation guide
- `quick-install-taskmaster` - One-line global installation

## Usage Patterns

### Natural Language

Most commands accept natural language arguments:

```
/taskmaster:add-task create user authentication system
/taskmaster:update mark all API tasks as high priority
/taskmaster:list show blocked tasks
```

### ID-Based Commands

Commands requiring IDs intelligently parse from $ARGUMENTS:

```
/taskmaster:show 45
/taskmaster:expand 23
/taskmaster:set-status/to-done 67
```

### Smart Defaults

Commands provide intelligent defaults and suggestions based on context.</file><file path="fe/.cursor/commands/tm/to-cancelled.md">Cancel a task permanently.

Arguments: $ARGUMENTS (task ID)

## Cancelling a Task

This status indicates a task is no longer needed and won&apos;t be completed.

## Valid Reasons for Cancellation

- Requirements changed
- Feature deprecated
- Duplicate of another task
- Strategic pivot
- Technical approach invalidated

## Pre-Cancellation Checks

1. Confirm no critical dependencies
2. Check for partial implementation
3. Verify cancellation rationale
4. Document lessons learned

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=cancelled
```

## Cancellation Impact

When cancelling:

1. **Dependency Updates**
   - Notify dependent tasks
   - Update project scope
   - Recalculate timelines

2. **Clean-up Actions**
   - Remove related branches
   - Archive any work done
   - Update documentation
   - Close related issues

3. **Learning Capture**
   - Document why cancelled
   - Note what was learned
   - Update estimation models
   - Prevent future duplicates

## Historical Preservation

- Keep for reference
- Tag with cancellation reason
- Link to replacement if any
- Maintain audit trail</file><file path="fe/.cursor/commands/tm/to-deferred.md">Defer a task for later consideration.

Arguments: $ARGUMENTS (task ID)

## Deferring a Task

This status indicates a task is valid but not currently actionable or prioritized.

## Valid Reasons for Deferral

- Waiting for external dependencies
- Reprioritized for future sprint
- Blocked by technical limitations
- Resource constraints
- Strategic timing considerations

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=deferred
```

## Deferral Management

When deferring:

1. **Document Reason**
   - Capture why it&apos;s being deferred
   - Set reactivation criteria
   - Note any partial work completed

2. **Impact Analysis**
   - Check dependent tasks
   - Update project timeline
   - Notify affected stakeholders

3. **Future Planning**
   - Set review reminders
   - Tag for specific milestone
   - Preserve context for reactivation
   - Link to blocking issues

## Smart Tracking

- Monitor deferral duration
- Alert when criteria met
- Prevent scope creep
- Regular review cycles</file><file path="fe/.cursor/commands/tm/to-done.md">Mark a task as completed.

Arguments: $ARGUMENTS (task ID)

## Completing a Task

This command validates task completion and updates project state intelligently.

## Pre-Completion Checks

1. Verify test strategy was followed
2. Check if all subtasks are complete
3. Validate acceptance criteria met
4. Ensure code is committed

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=done
```

## Post-Completion Actions

1. **Update Dependencies**
   - Identify newly unblocked tasks
   - Update sprint progress
   - Recalculate project timeline

2. **Documentation**
   - Generate completion summary
   - Update CLAUDE.md with learnings
   - Log implementation approach

3. **Next Steps**
   - Show newly available tasks
   - Suggest logical next task
   - Update velocity metrics

## Celebration &amp; Learning

- Show impact of completion
- Display unblocked work
- Recognize achievement
- Capture lessons learned</file><file path="fe/.cursor/commands/tm/to-in-progress.md">Start working on a task by setting its status to in-progress.

Arguments: $ARGUMENTS (task ID)

## Starting Work on Task

This command does more than just change status - it prepares your environment for productive work.

## Pre-Start Checks

1. Verify dependencies are met
2. Check if another task is already in-progress
3. Ensure task details are complete
4. Validate test strategy exists

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=in-progress
```

## Environment Setup

After setting to in-progress:

1. Create/checkout appropriate git branch
2. Open relevant documentation
3. Set up test watchers if applicable
4. Display task details and acceptance criteria
5. Show similar completed tasks for reference

## Smart Suggestions

- Estimated completion time based on complexity
- Related files from similar tasks
- Potential blockers to watch for
- Recommended first steps</file><file path="fe/.cursor/commands/tm/to-pending.md">Set a task&apos;s status to pending.

Arguments: $ARGUMENTS (task ID)

## Setting Task to Pending

This moves a task back to the pending state, useful for:

- Resetting erroneously started tasks
- Deferring work that was prematurely begun
- Reorganizing sprint priorities

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=pending
```

## Validation

Before setting to pending:

- Warn if task is currently in-progress
- Check if this will block other tasks
- Suggest documenting why it&apos;s being reset
- Preserve any work already done

## Smart Actions

After setting to pending:

- Update sprint planning if needed
- Notify about freed resources
- Suggest priority reassessment
- Log the status change with context</file><file path="fe/.cursor/commands/tm/to-review.md">Set a task&apos;s status to review.

Arguments: $ARGUMENTS (task ID)

## Marking Task for Review

This status indicates work is complete but needs verification before final approval.

## When to Use Review Status

- Code complete but needs peer review
- Implementation done but needs testing
- Documentation written but needs proofreading
- Design complete but needs stakeholder approval

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=review
```

## Review Preparation

When setting to review:

1. **Generate Review Checklist**
   - Link to PR/MR if applicable
   - Highlight key changes
   - Note areas needing attention
   - Include test results

2. **Documentation**
   - Update task with review notes
   - Link relevant artifacts
   - Specify reviewers if known

3. **Smart Actions**
   - Create review reminders
   - Track review duration
   - Suggest reviewers based on expertise
   - Prepare rollback plan if needed</file><file path="fe/.cursor/commands/tm/update-single-task.md">Update a single specific task with new information.

Arguments: $ARGUMENTS

Parse task ID and update details.

## Single Task Update

Precisely update one task with AI assistance to maintain consistency.

## Argument Parsing

Natural language updates:

- &quot;5: add caching requirement&quot;
- &quot;update 5 to include error handling&quot;
- &quot;task 5 needs rate limiting&quot;
- &quot;5 change priority to high&quot;

## Execution

```bash
task-master update-task --id=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Types

### 1. **Content Updates**

- Enhance description
- Add requirements
- Clarify details
- Update acceptance criteria

### 2. **Metadata Updates**

- Change priority
- Adjust time estimates
- Update complexity
- Modify dependencies

### 3. **Strategic Updates**

- Revise approach
- Change test strategy
- Update implementation notes
- Adjust subtask needs

## AI-Powered Updates

The AI:

1. **Understands Context**
   - Reads current task state
   - Identifies update intent
   - Maintains consistency
   - Preserves important info

2. **Applies Changes**
   - Updates relevant fields
   - Keeps style consistent
   - Adds without removing
   - Enhances clarity

3. **Validates Results**
   - Checks coherence
   - Verifies completeness
   - Maintains relationships
   - Suggests related updates

## Example Updates

```
/taskmaster:update/single 5: add rate limiting
‚Üí Updating Task #5: &quot;Implement API endpoints&quot;

Current: Basic CRUD endpoints
Adding: Rate limiting requirements

Updated sections:
‚úì Description: Added rate limiting mention
‚úì Details: Added specific limits (100/min)
‚úì Test Strategy: Added rate limit tests
‚úì Complexity: Increased from 5 to 6
‚úì Time Estimate: Increased by 2 hours

Suggestion: Also update task #6 (API Gateway) for consistency?
```

## Smart Features

1. **Incremental Updates**
   - Adds without overwriting
   - Preserves work history
   - Tracks what changed
   - Shows diff view

2. **Consistency Checks**
   - Related task alignment
   - Subtask compatibility
   - Dependency validity
   - Timeline impact

3. **Update History**
   - Timestamp changes
   - Track who/what updated
   - Reason for update
   - Previous versions

## Field-Specific Updates

Quick syntax for specific fields:

- &quot;5 priority:high&quot; ‚Üí Update priority only
- &quot;5 add-time:4h&quot; ‚Üí Add to time estimate
- &quot;5 status:review&quot; ‚Üí Change status
- &quot;5 depends:3,4&quot; ‚Üí Add dependencies

## Post-Update

- Show updated task
- Highlight changes
- Check related tasks
- Update suggestions
- Timeline adjustments</file><file path="fe/.cursor/commands/tm/update-task.md">Update tasks with intelligent field detection and bulk operations.

Arguments: $ARGUMENTS

## Intelligent Task Updates

Parse arguments to determine update intent and execute smartly.

### 1. **Natural Language Processing**

Understand update requests like:

- &quot;mark 23 as done&quot; ‚Üí Update status to done
- &quot;increase priority of 45&quot; ‚Üí Set priority to high
- &quot;add dependency on 12 to task 34&quot; ‚Üí Add dependency
- &quot;tasks 20-25 need review&quot; ‚Üí Bulk status update
- &quot;all API tasks high priority&quot; ‚Üí Pattern-based update

### 2. **Smart Field Detection**

Automatically detect what to update:

- Status keywords: done, complete, start, pause, review
- Priority changes: urgent, high, low, deprioritize
- Dependency updates: depends on, blocks, after
- Assignment: assign to, owner, responsible
- Time: estimate, spent, deadline

### 3. **Bulk Operations**

Support for multiple task updates:

```
Examples:
- &quot;complete tasks 12, 15, 18&quot;
- &quot;all pending auth tasks to in-progress&quot;
- &quot;increase priority for tasks blocking 45&quot;
- &quot;defer all documentation tasks&quot;
```

### 4. **Contextual Validation**

Before updating, check:

- Status transitions are valid
- Dependencies don&apos;t create cycles
- Priority changes make sense
- Bulk updates won&apos;t break project flow

Show preview:

```
Update Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Tasks to update: #23, #24, #25
Change: status ‚Üí in-progress
Impact: Will unblock tasks #30, #31
Warning: Task #24 has unmet dependencies
```

### 5. **Smart Suggestions**

Based on update:

- Completing task? ‚Üí Show newly unblocked tasks
- Changing priority? ‚Üí Show impact on sprint
- Adding dependency? ‚Üí Check for conflicts
- Bulk update? ‚Üí Show summary of changes

### 6. **Workflow Integration**

After updates:

- Auto-update dependent task states
- Trigger status recalculation
- Update sprint/milestone progress
- Log changes with context

Result: Flexible, intelligent task updates with safety checks.</file><file path="fe/.cursor/commands/tm/update-tasks-from-id.md">Update multiple tasks starting from a specific ID.

Arguments: $ARGUMENTS

Parse starting task ID and update context.

## Bulk Task Updates

Update multiple related tasks based on new requirements or context changes.

## Argument Parsing

- &quot;from 5: add security requirements&quot;
- &quot;5 onwards: update API endpoints&quot;
- &quot;starting at 5: change to use new framework&quot;

## Execution

```bash
task-master update --from=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Process

### 1. **Task Selection**

Starting from specified ID:

- Include the task itself
- Include all dependent tasks
- Include related subtasks
- Smart boundary detection

### 2. **Context Application**

AI analyzes the update context and:

- Identifies what needs changing
- Maintains consistency
- Preserves completed work
- Updates related information

### 3. **Intelligent Updates**

- Modify descriptions appropriately
- Update test strategies
- Adjust time estimates
- Revise dependencies if needed

## Smart Features

1. **Scope Detection**
   - Find natural task groupings
   - Identify related features
   - Stop at logical boundaries
   - Avoid over-updating

2. **Consistency Maintenance**
   - Keep naming conventions
   - Preserve relationships
   - Update cross-references
   - Maintain task flow

3. **Change Preview**

   ```
   Bulk Update Preview
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Starting from: Task #5
   Tasks to update: 8 tasks + 12 subtasks

   Context: &quot;add security requirements&quot;

   Changes will include:
   - Add security sections to descriptions
   - Update test strategies for security
   - Add security-related subtasks where needed
   - Adjust time estimates (+20% average)

   Continue? (y/n)
   ```

## Example Updates

```
/taskmaster:update-tasks-from-id 5: change database to PostgreSQL
‚Üí Analyzing impact starting from task #5
‚Üí Found 6 related tasks to update
‚Üí Updates will maintain consistency
‚Üí Preview changes? (y/n)

Applied updates:
‚úì Task #5: Updated connection logic references
‚úì Task #6: Changed migration approach
‚úì Task #7: Updated query syntax notes
‚úì Task #8: Revised testing strategy
‚úì Task #9: Updated deployment steps
‚úì Task #12: Changed backup procedures
```

## Safety Features

- Preview all changes
- Selective confirmation
- Rollback capability
- Change logging
- Validation checks

## Post-Update

- Summary of changes
- Consistency verification
- Suggest review tasks
- Update timeline if needed</file><file path="fe/.cursor/commands/tm/validate-dependencies.md">Validate all task dependencies for issues.

## Dependency Validation

Comprehensive check for dependency problems across the entire project.

## Execution

```bash
task-master validate-dependencies
```

## Validation Checks

1. **Circular Dependencies**
   - A depends on B, B depends on A
   - Complex circular chains
   - Self-dependencies

2. **Missing Dependencies**
   - References to non-existent tasks
   - Deleted task references
   - Invalid task IDs

3. **Logical Issues**
   - Completed tasks depending on pending
   - Cancelled tasks in dependency chains
   - Impossible sequences

4. **Complexity Warnings**
   - Over-complex dependency chains
   - Too many dependencies per task
   - Bottleneck tasks

## Smart Analysis

The validation provides:

- Visual dependency graph
- Critical path analysis
- Bottleneck identification
- Suggested optimizations

## Report Format

```
Dependency Validation Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ No circular dependencies found
‚ö†Ô∏è  2 warnings found:
   - Task #23 has 7 dependencies (consider breaking down)
   - Task #45 blocks 5 other tasks (potential bottleneck)
‚ùå 1 error found:
   - Task #67 depends on deleted task #66

Critical Path: #1 ‚Üí #5 ‚Üí #23 ‚Üí #45 ‚Üí #50 (15 days)
```

## Actionable Output

For each issue found:

- Clear description
- Impact assessment
- Suggested fix
- Command to resolve

## Next Steps

After validation:

- Run `/taskmaster:fix-dependencies` to auto-fix
- Manually adjust problematic dependencies
- Rerun to verify fixes</file><file path="fe/.cursor/commands/tm/view-models.md">View current AI model configuration.

## Model Configuration Display

Shows the currently configured AI providers and models for Task Master.

## Execution

```bash
task-master models
```

## Information Displayed

1. **Main Provider**
   - Model ID and name
   - API key status (configured/missing)
   - Usage: Primary task generation

2. **Research Provider**
   - Model ID and name
   - API key status
   - Usage: Enhanced research mode

3. **Fallback Provider**
   - Model ID and name
   - API key status
   - Usage: Backup when main fails

## Visual Status

```
Task Master AI Model Configuration
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Main:     ‚úÖ claude-3-5-sonnet (configured)
Research: ‚úÖ perplexity-sonar (configured)
Fallback: ‚ö†Ô∏è  Not configured (optional)

Available Models:
- claude-3-5-sonnet
- gpt-4-turbo
- gpt-3.5-turbo
- perplexity-sonar
```

## Next Actions

Based on configuration:

- If missing API keys ‚Üí Suggest setup
- If no research model ‚Üí Explain benefits
- If all configured ‚Üí Show usage tips</file><file path="fe/.cursor/rules/taskmaster/dev_workflow.mdc">---
description: Guide for using Taskmaster to manage task-driven development workflows
globs: **/*
alwaysApply: true
---

# Taskmaster Development Workflow

This guide outlines the standard process for using Taskmaster to manage software development projects. It is written as a set of instructions for you, the AI agent.

- **Your Default Stance**: For most projects, the user can work directly within the `master` task context. Your initial actions should operate on this default context unless a clear pattern for multi-context work emerges.
- **Your Goal**: Your role is to elevate the user&apos;s workflow by intelligently introducing advanced features like **Tagged Task Lists** when you detect the appropriate context. Do not force tags on the user; suggest them as a helpful solution to a specific need.

## The Basic Loop
The fundamental development cycle you will facilitate is:
1.  **`list`**: Show the user what needs to be done.
2.  **`next`**: Help the user decide what to work on.
3.  **`show &lt;id&gt;`**: Provide details for a specific task.
4.  **`expand &lt;id&gt;`**: Break down a complex task into smaller, manageable subtasks.
5.  **Implement**: The user writes the code and tests.
6.  **`update-subtask`**: Log progress and findings on behalf of the user.
7.  **`set-status`**: Mark tasks and subtasks as `done` as work is completed.
8.  **Repeat**.

All your standard command executions should operate on the user&apos;s current task context, which defaults to `master`.

---

## Standard Development Workflow Process

### Simple Workflow (Default Starting Point)

For new projects or when users are getting started, operate within the `master` tag context:

-   Start new projects by running `initialize_project` tool / `task-master init` or `parse_prd` / `task-master parse-prd --input=&apos;&lt;prd-file.txt&gt;&apos;` (see @`taskmaster.mdc`) to generate initial tasks.json with tagged structure
-   Configure rule sets during initialization with `--rules` flag (e.g., `task-master init --rules cursor,windsurf`) or manage them later with `task-master rules add/remove` commands  
-   Begin coding sessions with `get_tasks` / `task-master list` (see @`taskmaster.mdc`) to see current tasks, status, and IDs
-   Determine the next task to work on using `next_task` / `task-master next` (see @`taskmaster.mdc`)
-   Analyze task complexity with `analyze_project_complexity` / `task-master analyze-complexity --research` (see @`taskmaster.mdc`) before breaking down tasks
-   Review complexity report using `complexity_report` / `task-master complexity-report` (see @`taskmaster.mdc`)
-   Select tasks based on dependencies (all marked &apos;done&apos;), priority level, and ID order
-   View specific task details using `get_task` / `task-master show &lt;id&gt;` (see @`taskmaster.mdc`) to understand implementation requirements
-   Break down complex tasks using `expand_task` / `task-master expand --id=&lt;id&gt; --force --research` (see @`taskmaster.mdc`) with appropriate flags like `--force` (to replace existing subtasks) and `--research`
-   Implement code following task details, dependencies, and project standards
-   Mark completed tasks with `set_task_status` / `task-master set-status --id=&lt;id&gt; --status=done` (see @`taskmaster.mdc`)
-   Update dependent tasks when implementation differs from original plan using `update` / `task-master update --from=&lt;id&gt; --prompt=&quot;...&quot;` or `update_task` / `task-master update-task --id=&lt;id&gt; --prompt=&quot;...&quot;` (see @`taskmaster.mdc`)

---

## Leveling Up: Agent-Led Multi-Context Workflows

While the basic workflow is powerful, your primary opportunity to add value is by identifying when to introduce **Tagged Task Lists**. These patterns are your tools for creating a more organized and efficient development environment for the user, especially if you detect agentic or parallel development happening across the same session.

**Critical Principle**: Most users should never see a difference in their experience. Only introduce advanced workflows when you detect clear indicators that the project has evolved beyond simple task management.

### When to Introduce Tags: Your Decision Patterns

Here are the patterns to look for. When you detect one, you should propose the corresponding workflow to the user.

#### Pattern 1: Simple Git Feature Branching
This is the most common and direct use case for tags.

- **Trigger**: The user creates a new git branch (e.g., `git checkout -b feature/user-auth`).
- **Your Action**: Propose creating a new tag that mirrors the branch name to isolate the feature&apos;s tasks from `master`.
- **Your Suggested Prompt**: *&quot;I see you&apos;ve created a new branch named &apos;feature/user-auth&apos;. To keep all related tasks neatly organized and separate from your main list, I can create a corresponding task tag for you. This helps prevent merge conflicts in your `tasks.json` file later. Shall I create the &apos;feature-user-auth&apos; tag?&quot;*
- **Tool to Use**: `task-master add-tag --from-branch`

#### Pattern 2: Team Collaboration
- **Trigger**: The user mentions working with teammates (e.g., &quot;My teammate Alice is handling the database schema,&quot; or &quot;I need to review Bob&apos;s work on the API.&quot;).
- **Your Action**: Suggest creating a separate tag for the user&apos;s work to prevent conflicts with shared master context.
- **Your Suggested Prompt**: *&quot;Since you&apos;re working with Alice, I can create a separate task context for your work to avoid conflicts. This way, Alice can continue working with the master list while you have your own isolated context. When you&apos;re ready to merge your work, we can coordinate the tasks back to master. Shall I create a tag for your current work?&quot;*
- **Tool to Use**: `task-master add-tag my-work --copy-from-current --description=&quot;My tasks while collaborating with Alice&quot;`

#### Pattern 3: Experiments or Risky Refactors
- **Trigger**: The user wants to try something that might not be kept (e.g., &quot;I want to experiment with switching our state management library,&quot; or &quot;Let&apos;s refactor the old API module, but I want to keep the current tasks as a reference.&quot;).
- **Your Action**: Propose creating a sandboxed tag for the experimental work.
- **Your Suggested Prompt**: *&quot;This sounds like a great experiment. To keep these new tasks separate from our main plan, I can create a temporary &apos;experiment-zustand&apos; tag for this work. If we decide not to proceed, we can simply delete the tag without affecting the main task list. Sound good?&quot;*
- **Tool to Use**: `task-master add-tag experiment-zustand --description=&quot;Exploring Zustand migration&quot;`

#### Pattern 4: Large Feature Initiatives (PRD-Driven)
This is a more structured approach for significant new features or epics.

- **Trigger**: The user describes a large, multi-step feature that would benefit from a formal plan.
- **Your Action**: Propose a comprehensive, PRD-driven workflow.
- **Your Suggested Prompt**: *&quot;This sounds like a significant new feature. To manage this effectively, I suggest we create a dedicated task context for it. Here&apos;s the plan: I&apos;ll create a new tag called &apos;feature-xyz&apos;, then we can draft a Product Requirements Document (PRD) together to scope the work. Once the PRD is ready, I&apos;ll automatically generate all the necessary tasks within that new tag. How does that sound?&quot;*
- **Your Implementation Flow**:
    1.  **Create an empty tag**: `task-master add-tag feature-xyz --description &quot;Tasks for the new XYZ feature&quot;`. You can also start by creating a git branch if applicable, and then create the tag from that branch.
    2.  **Collaborate &amp; Create PRD**: Work with the user to create a detailed PRD file (e.g., `.taskmaster/docs/feature-xyz-prd.txt`).
    3.  **Parse PRD into the new tag**: `task-master parse-prd .taskmaster/docs/feature-xyz-prd.txt --tag feature-xyz`
    4.  **Prepare the new task list**: Follow up by suggesting `analyze-complexity` and `expand-all` for the newly created tasks within the `feature-xyz` tag.

#### Pattern 5: Version-Based Development
Tailor your approach based on the project maturity indicated by tag names.

- **Prototype/MVP Tags** (`prototype`, `mvp`, `poc`, `v0.x`):
  - **Your Approach**: Focus on speed and functionality over perfection
  - **Task Generation**: Create tasks that emphasize &quot;get it working&quot; over &quot;get it perfect&quot;
  - **Complexity Level**: Lower complexity, fewer subtasks, more direct implementation paths
  - **Research Prompts**: Include context like &quot;This is a prototype - prioritize speed and basic functionality over optimization&quot;
  - **Example Prompt Addition**: *&quot;Since this is for the MVP, I&apos;ll focus on tasks that get core functionality working quickly rather than over-engineering.&quot;*

- **Production/Mature Tags** (`v1.0+`, `production`, `stable`):
  - **Your Approach**: Emphasize robustness, testing, and maintainability
  - **Task Generation**: Include comprehensive error handling, testing, documentation, and optimization
  - **Complexity Level**: Higher complexity, more detailed subtasks, thorough implementation paths
  - **Research Prompts**: Include context like &quot;This is for production - prioritize reliability, performance, and maintainability&quot;
  - **Example Prompt Addition**: *&quot;Since this is for production, I&apos;ll ensure tasks include proper error handling, testing, and documentation.&quot;*

### Advanced Workflow (Tag-Based &amp; PRD-Driven)

**When to Transition**: Recognize when the project has evolved (or has initiated a project which existing code) beyond simple task management. Look for these indicators:
- User mentions teammates or collaboration needs
- Project has grown to 15+ tasks with mixed priorities
- User creates feature branches or mentions major initiatives
- User initializes Taskmaster on an existing, complex codebase
- User describes large features that would benefit from dedicated planning

**Your Role in Transition**: Guide the user to a more sophisticated workflow that leverages tags for organization and PRDs for comprehensive planning.

#### Master List Strategy (High-Value Focus)
Once you transition to tag-based workflows, the `master` tag should ideally contain only:
- **High-level deliverables** that provide significant business value
- **Major milestones** and epic-level features
- **Critical infrastructure** work that affects the entire project
- **Release-blocking** items

**What NOT to put in master**:
- Detailed implementation subtasks (these go in feature-specific tags&apos; parent tasks)
- Refactoring work (create dedicated tags like `refactor-auth`)
- Experimental features (use `experiment-*` tags)
- Team member-specific tasks (use person-specific tags)

#### PRD-Driven Feature Development

**For New Major Features**:
1. **Identify the Initiative**: When user describes a significant feature
2. **Create Dedicated Tag**: `add_tag feature-[name] --description=&quot;[Feature description]&quot;`
3. **Collaborative PRD Creation**: Work with user to create comprehensive PRD in `.taskmaster/docs/feature-[name]-prd.txt`
4. **Parse &amp; Prepare**: 
   - `parse_prd .taskmaster/docs/feature-[name]-prd.txt --tag=feature-[name]`
   - `analyze_project_complexity --tag=feature-[name] --research`
   - `expand_all --tag=feature-[name] --research`
5. **Add Master Reference**: Create a high-level task in `master` that references the feature tag

**For Existing Codebase Analysis**:
When users initialize Taskmaster on existing projects:
1. **Codebase Discovery**: Use your native tools for producing deep context about the code base. You may use `research` tool with `--tree` and `--files` to collect up to date information using the existing architecture as context.
2. **Collaborative Assessment**: Work with user to identify improvement areas, technical debt, or new features
3. **Strategic PRD Creation**: Co-author PRDs that include:
   - Current state analysis (based on your codebase research)
   - Proposed improvements or new features
   - Implementation strategy considering existing code
4. **Tag-Based Organization**: Parse PRDs into appropriate tags (`refactor-api`, `feature-dashboard`, `tech-debt`, etc.)
5. **Master List Curation**: Keep only the most valuable initiatives in master

The parse-prd&apos;s `--append` flag enables the user to parse multiple PRDs within tags or across tags. PRDs should be focused and the number of tasks they are parsed into should be strategically chosen relative to the PRD&apos;s complexity and level of detail.

### Workflow Transition Examples

**Example 1: Simple ‚Üí Team-Based**
```
User: &quot;Alice is going to help with the API work&quot;
Your Response: &quot;Great! To avoid conflicts, I&apos;ll create a separate task context for your work. Alice can continue with the master list while you work in your own context. When you&apos;re ready to merge, we can coordinate the tasks back together.&quot;
Action: add_tag my-api-work --copy-from-current --description=&quot;My API tasks while collaborating with Alice&quot;
```

**Example 2: Simple ‚Üí PRD-Driven**
```
User: &quot;I want to add a complete user dashboard with analytics, user management, and reporting&quot;
Your Response: &quot;This sounds like a major feature that would benefit from detailed planning. Let me create a dedicated context for this work and we can draft a PRD together to ensure we capture all requirements.&quot;
Actions: 
1. add_tag feature-dashboard --description=&quot;User dashboard with analytics and management&quot;
2. Collaborate on PRD creation
3. parse_prd dashboard-prd.txt --tag=feature-dashboard
4. Add high-level &quot;User Dashboard&quot; task to master
```

**Example 3: Existing Project ‚Üí Strategic Planning**
```
User: &quot;I just initialized Taskmaster on my existing React app. It&apos;s getting messy and I want to improve it.&quot;
Your Response: &quot;Let me research your codebase to understand the current architecture, then we can create a strategic plan for improvements.&quot;
Actions:
1. research &quot;Current React app architecture and improvement opportunities&quot; --tree --files=src/
2. Collaborate on improvement PRD based on findings
3. Create tags for different improvement areas (refactor-components, improve-state-management, etc.)
4. Keep only major improvement initiatives in master
```

---

## Primary Interaction: MCP Server vs. CLI

Taskmaster offers two primary ways to interact:

1.  **MCP Server (Recommended for Integrated Tools)**:
    - For AI agents and integrated development environments (like Cursor), interacting via the **MCP server is the preferred method**.
    - The MCP server exposes Taskmaster functionality through a set of tools (e.g., `get_tasks`, `add_subtask`).
    - This method offers better performance, structured data exchange, and richer error handling compared to CLI parsing.
    - Refer to @`mcp.mdc` for details on the MCP architecture and available tools.
    - A comprehensive list and description of MCP tools and their corresponding CLI commands can be found in @`taskmaster.mdc`.
    - **Restart the MCP server** if core logic in `scripts/modules` or MCP tool/direct function definitions change.
    - **Note**: MCP tools fully support tagged task lists with complete tag management capabilities.

2.  **`task-master` CLI (For Users &amp; Fallback)**:
    - The global `task-master` command provides a user-friendly interface for direct terminal interaction.
    - It can also serve as a fallback if the MCP server is inaccessible or a specific function isn&apos;t exposed via MCP.
    - Install globally with `npm install -g task-master-ai` or use locally via `npx task-master-ai ...`.
    - The CLI commands often mirror the MCP tools (e.g., `task-master list` corresponds to `get_tasks`).
    - Refer to @`taskmaster.mdc` for a detailed command reference.
    - **Tagged Task Lists**: CLI fully supports the new tagged system with seamless migration.

## How the Tag System Works (For Your Reference)

- **Data Structure**: Tasks are organized into separate contexts (tags) like &quot;master&quot;, &quot;feature-branch&quot;, or &quot;v2.0&quot;.
- **Silent Migration**: Existing projects automatically migrate to use a &quot;master&quot; tag with zero disruption.
- **Context Isolation**: Tasks in different tags are completely separate. Changes in one tag do not affect any other tag.
- **Manual Control**: The user is always in control. There is no automatic switching. You facilitate switching by using `use-tag &lt;name&gt;`.
- **Full CLI &amp; MCP Support**: All tag management commands are available through both the CLI and MCP tools for you to use. Refer to @`taskmaster.mdc` for a full command list.

---

## Task Complexity Analysis

-   Run `analyze_project_complexity` / `task-master analyze-complexity --research` (see @`taskmaster.mdc`) for comprehensive analysis
-   Review complexity report via `complexity_report` / `task-master complexity-report` (see @`taskmaster.mdc`) for a formatted, readable version.
-   Focus on tasks with highest complexity scores (8-10) for detailed breakdown
-   Use analysis results to determine appropriate subtask allocation
-   Note that reports are automatically used by the `expand_task` tool/command

## Task Breakdown Process

-   Use `expand_task` / `task-master expand --id=&lt;id&gt;`. It automatically uses the complexity report if found, otherwise generates default number of subtasks.
-   Use `--num=&lt;number&gt;` to specify an explicit number of subtasks, overriding defaults or complexity report recommendations.
-   Add `--research` flag to leverage Perplexity AI for research-backed expansion.
-   Add `--force` flag to clear existing subtasks before generating new ones (default is to append).
-   Use `--prompt=&quot;&lt;context&gt;&quot;` to provide additional context when needed.
-   Review and adjust generated subtasks as necessary.
-   Use `expand_all` tool or `task-master expand --all` to expand multiple pending tasks at once, respecting flags like `--force` and `--research`.
-   If subtasks need complete replacement (regardless of the `--force` flag on `expand`), clear them first with `clear_subtasks` / `task-master clear-subtasks --id=&lt;id&gt;`.

## Implementation Drift Handling

-   When implementation differs significantly from planned approach
-   When future tasks need modification due to current implementation choices
-   When new dependencies or requirements emerge
-   Use `update` / `task-master update --from=&lt;futureTaskId&gt; --prompt=&apos;&lt;explanation&gt;\nUpdate context...&apos; --research` to update multiple future tasks.
-   Use `update_task` / `task-master update-task --id=&lt;taskId&gt; --prompt=&apos;&lt;explanation&gt;\nUpdate context...&apos; --research` to update a single specific task.

## Task Status Management

-   Use &apos;pending&apos; for tasks ready to be worked on
-   Use &apos;done&apos; for completed and verified tasks
-   Use &apos;deferred&apos; for postponed tasks
-   Add custom status values as needed for project-specific workflows

## Task Structure Fields

- **id**: Unique identifier for the task (Example: `1`, `1.1`)
- **title**: Brief, descriptive title (Example: `&quot;Initialize Repo&quot;`)
- **description**: Concise summary of what the task involves (Example: `&quot;Create a new repository, set up initial structure.&quot;`)
- **status**: Current state of the task (Example: `&quot;pending&quot;`, `&quot;done&quot;`, `&quot;deferred&quot;`)
- **dependencies**: IDs of prerequisite tasks (Example: `[1, 2.1]`)
    - Dependencies are displayed with status indicators (‚úÖ for completed, ‚è±Ô∏è for pending)
    - This helps quickly identify which prerequisite tasks are blocking work
- **priority**: Importance level (Example: `&quot;high&quot;`, `&quot;medium&quot;`, `&quot;low&quot;`)
- **details**: In-depth implementation instructions (Example: `&quot;Use GitHub client ID/secret, handle callback, set session token.&quot;`) 
- **testStrategy**: Verification approach (Example: `&quot;Deploy and call endpoint to confirm &apos;Hello World&apos; response.&quot;`) 
- **subtasks**: List of smaller, more specific tasks (Example: `[{&quot;id&quot;: 1, &quot;title&quot;: &quot;Configure OAuth&quot;, ...}]`) 
- Refer to task structure details (previously linked to `tasks.mdc`).

## Configuration Management (Updated)

Taskmaster configuration is managed through two main mechanisms:

1.  **`.taskmaster/config.json` File (Primary):**
    *   Located in the project root directory.
    *   Stores most configuration settings: AI model selections (main, research, fallback), parameters (max tokens, temperature), logging level, default subtasks/priority, project name, etc.
    *   **Tagged System Settings**: Includes `global.defaultTag` (defaults to &quot;master&quot;) and `tags` section for tag management configuration.
    *   **Managed via `task-master models --setup` command.** Do not edit manually unless you know what you are doing.
    *   **View/Set specific models via `task-master models` command or `models` MCP tool.**
    *   Created automatically when you run `task-master models --setup` for the first time or during tagged system migration.

2.  **Environment Variables (`.env` / `mcp.json`):**
    *   Used **only** for sensitive API keys and specific endpoint URLs.
    *   Place API keys (one per provider) in a `.env` file in the project root for CLI usage.
    *   For MCP/Cursor integration, configure these keys in the `env` section of `.cursor/mcp.json`.
    *   Available keys/variables: See `assets/env.example` or the Configuration section in the command reference (previously linked to `taskmaster.mdc`).

3.  **`.taskmaster/state.json` File (Tagged System State):**
    *   Tracks current tag context and migration status.
    *   Automatically created during tagged system migration.
    *   Contains: `currentTag`, `lastSwitched`, `migrationNoticeShown`.

**Important:** Non-API key settings (like model selections, `MAX_TOKENS`, `TASKMASTER_LOG_LEVEL`) are **no longer configured via environment variables**. Use the `task-master models` command (or `--setup` for interactive configuration) or the `models` MCP tool.
**If AI commands FAIL in MCP** verify that the API key for the selected provider is present in the `env` section of `.cursor/mcp.json`.
**If AI commands FAIL in CLI** verify that the API key for the selected provider is present in the `.env` file in the root of the project.

## Rules Management

Taskmaster supports multiple AI coding assistant rule sets that can be configured during project initialization or managed afterward:

- **Available Profiles**: Claude Code, Cline, Codex, Cursor, Roo Code, Trae, Windsurf (claude, cline, codex, cursor, roo, trae, windsurf)
- **During Initialization**: Use `task-master init --rules cursor,windsurf` to specify which rule sets to include
- **After Initialization**: Use `task-master rules add &lt;profiles&gt;` or `task-master rules remove &lt;profiles&gt;` to manage rule sets
- **Interactive Setup**: Use `task-master rules setup` to launch an interactive prompt for selecting rule profiles
- **Default Behavior**: If no `--rules` flag is specified during initialization, all available rule profiles are included
- **Rule Structure**: Each profile creates its own directory (e.g., `.cursor/rules`, `.roo/rules`) with appropriate configuration files

## Determining the Next Task

- Run `next_task` / `task-master next` to show the next task to work on.
- The command identifies tasks with all dependencies satisfied
- Tasks are prioritized by priority level, dependency count, and ID
- The command shows comprehensive task information including:
    - Basic task details and description
    - Implementation details
    - Subtasks (if they exist)
    - Contextual suggested actions
- Recommended before starting any new development work
- Respects your project&apos;s dependency structure
- Ensures tasks are completed in the appropriate sequence
- Provides ready-to-use commands for common task actions

## Viewing Specific Task Details

- Run `get_task` / `task-master show &lt;id&gt;` to view a specific task.
- Use dot notation for subtasks: `task-master show 1.2` (shows subtask 2 of task 1)
- Displays comprehensive information similar to the next command, but for a specific task
- For parent tasks, shows all subtasks and their current status
- For subtasks, shows parent task information and relationship
- Provides contextual suggested actions appropriate for the specific task
- Useful for examining task details before implementation or checking status

## Managing Task Dependencies

- Use `add_dependency` / `task-master add-dependency --id=&lt;id&gt; --depends-on=&lt;id&gt;` to add a dependency.
- Use `remove_dependency` / `task-master remove-dependency --id=&lt;id&gt; --depends-on=&lt;id&gt;` to remove a dependency.
- The system prevents circular dependencies and duplicate dependency entries
- Dependencies are checked for existence before being added or removed
- Task files are automatically regenerated after dependency changes
- Dependencies are visualized with status indicators in task listings and files

## Task Reorganization

- Use `move_task` / `task-master move --from=&lt;id&gt; --to=&lt;id&gt;` to move tasks or subtasks within the hierarchy
- This command supports several use cases:
  - Moving a standalone task to become a subtask (e.g., `--from=5 --to=7`)
  - Moving a subtask to become a standalone task (e.g., `--from=5.2 --to=7`) 
  - Moving a subtask to a different parent (e.g., `--from=5.2 --to=7.3`)
  - Reordering subtasks within the same parent (e.g., `--from=5.2 --to=5.4`)
  - Moving a task to a new, non-existent ID position (e.g., `--from=5 --to=25`)
  - Moving multiple tasks at once using comma-separated IDs (e.g., `--from=10,11,12 --to=16,17,18`)
- The system includes validation to prevent data loss:
  - Allows moving to non-existent IDs by creating placeholder tasks
  - Prevents moving to existing task IDs that have content (to avoid overwriting)
  - Validates source tasks exist before attempting to move them
- The system maintains proper parent-child relationships and dependency integrity
- Task files are automatically regenerated after the move operation
- This provides greater flexibility in organizing and refining your task structure as project understanding evolves
- This is especially useful when dealing with potential merge conflicts arising from teams creating tasks on separate branches. Solve these conflicts very easily by moving your tasks and keeping theirs.

## Iterative Subtask Implementation

Once a task has been broken down into subtasks using `expand_task` or similar methods, follow this iterative process for implementation:

1.  **Understand the Goal (Preparation):**
    *   Use `get_task` / `task-master show &lt;subtaskId&gt;` (see @`taskmaster.mdc`) to thoroughly understand the specific goals and requirements of the subtask.

2.  **Initial Exploration &amp; Planning (Iteration 1):**
    *   This is the first attempt at creating a concrete implementation plan.
    *   Explore the codebase to identify the precise files, functions, and even specific lines of code that will need modification.
    *   Determine the intended code changes (diffs) and their locations.
    *   Gather *all* relevant details from this exploration phase.

3.  **Log the Plan:**
    *   Run `update_subtask` / `task-master update-subtask --id=&lt;subtaskId&gt; --prompt=&apos;&lt;detailed plan&gt;&apos;`.
    *   Provide the *complete and detailed* findings from the exploration phase in the prompt. Include file paths, line numbers, proposed diffs, reasoning, and any potential challenges identified. Do not omit details. The goal is to create a rich, timestamped log within the subtask&apos;s `details`.

4.  **Verify the Plan:**
    *   Run `get_task` / `task-master show &lt;subtaskId&gt;` again to confirm that the detailed implementation plan has been successfully appended to the subtask&apos;s details.

5.  **Begin Implementation:**
    *   Set the subtask status using `set_task_status` / `task-master set-status --id=&lt;subtaskId&gt; --status=in-progress`.
    *   Start coding based on the logged plan.

6.  **Refine and Log Progress (Iteration 2+):**
    *   As implementation progresses, you will encounter challenges, discover nuances, or confirm successful approaches.
    *   **Before appending new information**: Briefly review the *existing* details logged in the subtask (using `get_task` or recalling from context) to ensure the update adds fresh insights and avoids redundancy.
    *   **Regularly** use `update_subtask` / `task-master update-subtask --id=&lt;subtaskId&gt; --prompt=&apos;&lt;update details&gt;\n- What worked...\n- What didn&apos;t work...&apos;` to append new findings.
    *   **Crucially, log:**
        *   What worked (&quot;fundamental truths&quot; discovered).
        *   What didn&apos;t work and why (to avoid repeating mistakes).
        *   Specific code snippets or configurations that were successful.
        *   Decisions made, especially if confirmed with user input.
        *   Any deviations from the initial plan and the reasoning.
    *   The objective is to continuously enrich the subtask&apos;s details, creating a log of the implementation journey that helps the AI (and human developers) learn, adapt, and avoid repeating errors.

7.  **Review &amp; Update Rules (Post-Implementation):**
    *   Once the implementation for the subtask is functionally complete, review all code changes and the relevant chat history.
    *   Identify any new or modified code patterns, conventions, or best practices established during the implementation.
    *   Create new or update existing rules following internal guidelines (previously linked to `cursor_rules.mdc` and `self_improve.mdc`).

8.  **Mark Task Complete:**
    *   After verifying the implementation and updating any necessary rules, mark the subtask as completed: `set_task_status` / `task-master set-status --id=&lt;subtaskId&gt; --status=done`.

9.  **Commit Changes (If using Git):**
    *   Stage the relevant code changes and any updated/new rule files (`git add .`).
    *   Craft a comprehensive Git commit message summarizing the work done for the subtask, including both code implementation and any rule adjustments.
    *   Execute the commit command directly in the terminal (e.g., `git commit -m &apos;feat(module): Implement feature X for subtask &lt;subtaskId&gt;\n\n- Details about changes...\n- Updated rule Y for pattern Z&apos;`).
    *   Consider if a Changeset is needed according to internal versioning guidelines (previously linked to `changeset.mdc`). If so, run `npm run changeset`, stage the generated file, and amend the commit or create a new one.

10. **Proceed to Next Subtask:**
    *   Identify the next subtask (e.g., using `next_task` / `task-master next`).

## Code Analysis &amp; Refactoring Techniques

- **Top-Level Function Search**:
    - Useful for understanding module structure or planning refactors.
    - Use grep/ripgrep to find exported functions/constants:
      `rg &quot;export (async function|function|const) \w+&quot;` or similar patterns.
    - Can help compare functions between files during migrations or identify potential naming conflicts.

---
*This workflow provides a general guideline. Adapt it based on your specific project needs and team practices.*</file><file path="fe/.cursor/rules/taskmaster/taskmaster.mdc">---
description: Comprehensive reference for Taskmaster MCP tools and CLI commands.
globs: **/*
alwaysApply: true
---

# Taskmaster Tool &amp; Command Reference

This document provides a detailed reference for interacting with Taskmaster, covering both the recommended MCP tools, suitable for integrations like Cursor, and the corresponding `task-master` CLI commands, designed for direct user interaction or fallback.

**Note:** For interacting with Taskmaster programmatically or via integrated tools, using the **MCP tools is strongly recommended** due to better performance, structured data, and error handling. The CLI commands serve as a user-friendly alternative and fallback. 

**Important:** Several MCP tools involve AI processing... The AI-powered tools include `parse_prd`, `analyze_project_complexity`, `update_subtask`, `update_task`, `update`, `expand_all`, `expand_task`, and `add_task`.

**üè∑Ô∏è Tagged Task Lists System:** Task Master now supports **tagged task lists** for multi-context task management. This allows you to maintain separate, isolated lists of tasks for different features, branches, or experiments. Existing projects are seamlessly migrated to use a default &quot;master&quot; tag. Most commands now support a `--tag &lt;name&gt;` flag to specify which context to operate on. If omitted, commands use the currently active tag.

---

## Initialization &amp; Setup

### 1. Initialize Project (`init`)

*   **MCP Tool:** `initialize_project`
*   **CLI Command:** `task-master init [options]`
*   **Description:** `Set up the basic Taskmaster file structure and configuration in the current directory for a new project.`
*   **Key CLI Options:**
    *   `--name &lt;name&gt;`: `Set the name for your project in Taskmaster&apos;s configuration.`
    *   `--description &lt;text&gt;`: `Provide a brief description for your project.`
    *   `--version &lt;version&gt;`: `Set the initial version for your project, e.g., &apos;0.1.0&apos;.`
    *   `-y, --yes`: `Initialize Taskmaster quickly using default settings without interactive prompts.`
*   **Usage:** Run this once at the beginning of a new project.
*   **MCP Variant Description:** `Set up the basic Taskmaster file structure and configuration in the current directory for a new project by running the &apos;task-master init&apos; command.`
*   **Key MCP Parameters/Options:**
    *   `projectName`: `Set the name for your project.` (CLI: `--name &lt;name&gt;`)
    *   `projectDescription`: `Provide a brief description for your project.` (CLI: `--description &lt;text&gt;`)
    *   `projectVersion`: `Set the initial version for your project, e.g., &apos;0.1.0&apos;.` (CLI: `--version &lt;version&gt;`)
    *   `authorName`: `Author name.` (CLI: `--author &lt;author&gt;`)
    *   `skipInstall`: `Skip installing dependencies. Default is false.` (CLI: `--skip-install`)
    *   `addAliases`: `Add shell aliases tm, taskmaster, hamster, and ham. Default is false.` (CLI: `--aliases`)
    *   `yes`: `Skip prompts and use defaults/provided arguments. Default is false.` (CLI: `-y, --yes`)
*   **Usage:** Run this once at the beginning of a new project, typically via an integrated tool like Cursor. Operates on the current working directory of the MCP server. 
*   **Important:** Once complete, you *MUST* parse a prd in order to generate tasks. There will be no tasks files until then. The next step after initializing should be to create a PRD using the example PRD in .taskmaster/templates/example_prd.txt. 
*   **Tagging:** Use the `--tag` option to parse the PRD into a specific, non-default tag context. If the tag doesn&apos;t exist, it will be created automatically. Example: `task-master parse-prd spec.txt --tag=new-feature`.

### 2. Parse PRD (`parse_prd`)

*   **MCP Tool:** `parse_prd`
*   **CLI Command:** `task-master parse-prd [file] [options]`
*   **Description:** `Parse a Product Requirements Document, PRD, or text file with Taskmaster to automatically generate an initial set of tasks in tasks.json.`
*   **Key Parameters/Options:**
    *   `input`: `Path to your PRD or requirements text file that Taskmaster should parse for tasks.` (CLI: `[file]` positional or `-i, --input &lt;file&gt;`)
    *   `output`: `Specify where Taskmaster should save the generated &apos;tasks.json&apos; file. Defaults to &apos;.taskmaster/tasks/tasks.json&apos;.` (CLI: `-o, --output &lt;file&gt;`)
    *   `numTasks`: `Approximate number of top-level tasks Taskmaster should aim to generate from the document.` (CLI: `-n, --num-tasks &lt;number&gt;`)
    *   `force`: `Use this to allow Taskmaster to overwrite an existing &apos;tasks.json&apos; without asking for confirmation.` (CLI: `-f, --force`)
*   **Usage:** Useful for bootstrapping a project from an existing requirements document.
*   **Notes:** Task Master will strictly adhere to any specific requirements mentioned in the PRD, such as libraries, database schemas, frameworks, tech stacks, etc., while filling in any gaps where the PRD isn&apos;t fully specified. Tasks are designed to provide the most direct implementation path while avoiding over-engineering.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress. If the user does not have a PRD, suggest discussing their idea and then use the example PRD in `.taskmaster/templates/example_prd.txt` as a template for creating the PRD based on their idea, for use with `parse-prd`.

---

## AI Model Configuration

### 2. Manage Models (`models`)
*   **MCP Tool:** `models`
*   **CLI Command:** `task-master models [options]`
*   **Description:** `View the current AI model configuration or set specific models for different roles (main, research, fallback). Allows setting custom model IDs for Ollama and OpenRouter.`
*   **Key MCP Parameters/Options:**
    *   `setMain &lt;model_id&gt;`: `Set the primary model ID for task generation/updates.` (CLI: `--set-main &lt;model_id&gt;`)
    *   `setResearch &lt;model_id&gt;`: `Set the model ID for research-backed operations.` (CLI: `--set-research &lt;model_id&gt;`)
    *   `setFallback &lt;model_id&gt;`: `Set the model ID to use if the primary fails.` (CLI: `--set-fallback &lt;model_id&gt;`)
    *   `ollama &lt;boolean&gt;`: `Indicates the set model ID is a custom Ollama model.` (CLI: `--ollama`)
    *   `openrouter &lt;boolean&gt;`: `Indicates the set model ID is a custom OpenRouter model.` (CLI: `--openrouter`)
    *   `listAvailableModels &lt;boolean&gt;`: `If true, lists available models not currently assigned to a role.` (CLI: No direct equivalent; CLI lists available automatically)
    *   `projectRoot &lt;string&gt;`: `Optional. Absolute path to the project root directory.` (CLI: Determined automatically)
*   **Key CLI Options:**
    *   `--set-main &lt;model_id&gt;`: `Set the primary model.`
    *   `--set-research &lt;model_id&gt;`: `Set the research model.`
    *   `--set-fallback &lt;model_id&gt;`: `Set the fallback model.`
    *   `--ollama`: `Specify that the provided model ID is for Ollama (use with --set-*).`
    *   `--openrouter`: `Specify that the provided model ID is for OpenRouter (use with --set-*). Validates against OpenRouter API.`
    *   `--bedrock`: `Specify that the provided model ID is for AWS Bedrock (use with --set-*).`
    *   `--setup`: `Run interactive setup to configure models, including custom Ollama/OpenRouter IDs.`
*   **Usage (MCP):** Call without set flags to get current config. Use `setMain`, `setResearch`, or `setFallback` with a valid model ID to update the configuration. Use `listAvailableModels: true` to get a list of unassigned models. To set a custom model, provide the model ID and set `ollama: true` or `openrouter: true`.
*   **Usage (CLI):** Run without flags to view current configuration and available models. Use set flags to update specific roles. Use `--setup` for guided configuration, including custom models. To set a custom model via flags, use `--set-&lt;role&gt;=&lt;model_id&gt;` along with either `--ollama` or `--openrouter`.
*   **Notes:** Configuration is stored in `.taskmaster/config.json` in the project root. This command/tool modifies that file. Use `listAvailableModels` or `task-master models` to see internally supported models. OpenRouter custom models are validated against their live API. Ollama custom models are not validated live.
*   **API note:** API keys for selected AI providers (based on their model) need to exist in the mcp.json file to be accessible in MCP context. The API keys must be present in the local .env file for the CLI to be able to read them.
*   **Model costs:** The costs in supported models are expressed in dollars. An input/output value of 3 is $3.00. A value of 0.8 is $0.80. 
*   **Warning:** DO NOT MANUALLY EDIT THE .taskmaster/config.json FILE. Use the included commands either in the MCP or CLI format as needed. Always prioritize MCP tools when available and use the CLI as a fallback.

---

## Task Listing &amp; Viewing

### 3. Get Tasks (`get_tasks`)

*   **MCP Tool:** `get_tasks`
*   **CLI Command:** `task-master list [options]`
*   **Description:** `List your Taskmaster tasks, optionally filtering by status and showing subtasks.`
*   **Key Parameters/Options:**
    *   `status`: `Show only Taskmaster tasks matching this status (or multiple statuses, comma-separated), e.g., &apos;pending&apos; or &apos;done,in-progress&apos;.` (CLI: `-s, --status &lt;status&gt;`)
    *   `withSubtasks`: `Include subtasks indented under their parent tasks in the list.` (CLI: `--with-subtasks`)
    *   `tag`: `Specify which tag context to list tasks from. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
    *   `watch`: `Watch for changes and auto-refresh the list in real-time. Works with file storage (fs.watch) and API storage (Supabase Realtime).` (CLI: `-w, --watch`)
*   **Usage:** Get an overview of the project status, often used at the start of a work session. Use `--watch` to keep the list live-updating as tasks change.

### 4. Get Next Task (`next_task`)

*   **MCP Tool:** `next_task`
*   **CLI Command:** `task-master next [options]`
*   **Description:** `Ask Taskmaster to show the next available task you can work on, based on status and completed dependencies.`
*   **Key Parameters/Options:**
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
    *   `tag`: `Specify which tag context to use. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
*   **Usage:** Identify what to work on next according to the plan.

### 5. Get Task Details (`get_task`)

*   **MCP Tool:** `get_task`
*   **CLI Command:** `task-master show [id] [options]`
*   **Description:** `Display detailed information for one or more specific Taskmaster tasks or subtasks by ID.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task (e.g., &apos;15&apos;), subtask (e.g., &apos;15.2&apos;), or a comma-separated list of IDs (&apos;1,5,10.2&apos;) you want to view.` (CLI: `[id]` positional or `-i, --id &lt;id&gt;`)
    *   `tag`: `Specify which tag context to get the task(s) from. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Understand the full details for a specific task. When multiple IDs are provided, a summary table is shown.
*   **CRITICAL INFORMATION** If you need to collect information from multiple tasks, use comma-separated IDs (i.e. 1,2,3) to receive an array of tasks. Do not needlessly get tasks one at a time if you need to get many as that is wasteful.

---

## Task Creation &amp; Modification

### 6. Add Task (`add_task`)

*   **MCP Tool:** `add_task`
*   **CLI Command:** `task-master add-task [options]`
*   **Description:** `Add a new task to Taskmaster by describing it; AI will structure it.`
*   **Key Parameters/Options:**
    *   `prompt`: `Required. Describe the new task you want Taskmaster to create, e.g., &quot;Implement user authentication using JWT&quot;.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `dependencies`: `Specify the IDs of any Taskmaster tasks that must be completed before this new one can start, e.g., &apos;12,14&apos;.` (CLI: `-d, --dependencies &lt;ids&gt;`)
    *   `priority`: `Set the priority for the new task: &apos;high&apos;, &apos;medium&apos;, or &apos;low&apos;. Default is &apos;medium&apos;.` (CLI: `--priority &lt;priority&gt;`)
    *   `research`: `Enable Taskmaster to use the research role for potentially more informed task creation.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context to add the task to. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Quickly add newly identified tasks during development.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 7. Add Subtask (`add_subtask`)

*   **MCP Tool:** `add_subtask`
*   **CLI Command:** `task-master add-subtask [options]`
*   **Description:** `Add a new subtask to a Taskmaster parent task, or convert an existing task into a subtask.`
*   **Key Parameters/Options:**
    *   `id` / `parent`: `Required. The ID of the Taskmaster task that will be the parent.` (MCP: `id`, CLI: `-p, --parent &lt;id&gt;`)
    *   `taskId`: `Use this if you want to convert an existing top-level Taskmaster task into a subtask of the specified parent.` (CLI: `-i, --task-id &lt;id&gt;`)
    *   `title`: `Required if not using taskId. The title for the new subtask Taskmaster should create.` (CLI: `-t, --title &lt;title&gt;`)
    *   `description`: `A brief description for the new subtask.` (CLI: `-d, --description &lt;text&gt;`)
    *   `details`: `Provide implementation notes or details for the new subtask.` (CLI: `--details &lt;text&gt;`)
    *   `dependencies`: `Specify IDs of other tasks or subtasks, e.g., &apos;15&apos; or &apos;16.1&apos;, that must be done before this new subtask.` (CLI: `--dependencies &lt;ids&gt;`)
    *   `status`: `Set the initial status for the new subtask. Default is &apos;pending&apos;.` (CLI: `-s, --status &lt;status&gt;`)
    *   `generate`: `Enable Taskmaster to regenerate markdown task files after adding the subtask.` (CLI: `--generate`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Break down tasks manually or reorganize existing tasks.

### 8. Update Tasks (`update`)

*   **MCP Tool:** `update`
*   **CLI Command:** `task-master update [options]`
*   **Description:** `Update multiple upcoming tasks in Taskmaster based on new context or changes, starting from a specific task ID.`
*   **Key Parameters/Options:**
    *   `from`: `Required. The ID of the first task Taskmaster should update. All tasks with this ID or higher that are not &apos;done&apos; will be considered.` (CLI: `--from &lt;id&gt;`)
    *   `prompt`: `Required. Explain the change or new context for Taskmaster to apply to the tasks, e.g., &quot;We are now using React Query instead of Redux Toolkit for data fetching&quot;.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `research`: `Enable Taskmaster to use the research role for more informed updates. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Handle significant implementation changes or pivots that affect multiple future tasks. Example CLI: `task-master update --from=&apos;18&apos; --prompt=&apos;Switching to React Query.\nNeed to refactor data fetching...&apos;`
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 9. Update Task (`update_task`)

*   **MCP Tool:** `update_task`
*   **CLI Command:** `task-master update-task [options]`
*   **Description:** `Modify a specific Taskmaster task by ID, incorporating new information or changes. By default, this replaces the existing task details.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The specific ID of the Taskmaster task, e.g., &apos;15&apos;, you want to update.` (CLI: `-i, --id &lt;id&gt;`)
    *   `prompt`: `Required. Explain the specific changes or provide the new information Taskmaster should incorporate into this task.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `append`: `If true, appends the prompt content to the task&apos;s details with a timestamp, rather than replacing them. Behaves like update-subtask.` (CLI: `--append`)
    *   `research`: `Enable Taskmaster to use the research role for more informed updates. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context the task belongs to. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Refine a specific task based on new understanding. Use `--append` to log progress without creating subtasks.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 10. Update Subtask (`update_subtask`)

*   **MCP Tool:** `update_subtask`
*   **CLI Command:** `task-master update-subtask [options]`
*   **Description:** `Append timestamped notes or details to a specific Taskmaster subtask without overwriting existing content. Intended for iterative implementation logging.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster subtask, e.g., &apos;5.2&apos;, to update with new information.` (CLI: `-i, --id &lt;id&gt;`)
    *   `prompt`: `Required. The information, findings, or progress notes to append to the subtask&apos;s details with a timestamp.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `research`: `Enable Taskmaster to use the research role for more informed updates. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context the subtask belongs to. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Log implementation progress, findings, and discoveries during subtask development. Each update is timestamped and appended to preserve the implementation journey.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 11. Set Task Status (`set_task_status`)

*   **MCP Tool:** `set_task_status`
*   **CLI Command:** `task-master set-status [options]`
*   **Description:** `Update the status of one or more Taskmaster tasks or subtasks, e.g., &apos;pending&apos;, &apos;in-progress&apos;, &apos;done&apos;.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID(s) of the Taskmaster task(s) or subtask(s), e.g., &apos;15&apos;, &apos;15.2&apos;, or &apos;16,17.1&apos;, to update.` (CLI: `-i, --id &lt;id&gt;`)
    *   `status`: `Required. The new status to set, e.g., &apos;done&apos;, &apos;pending&apos;, &apos;in-progress&apos;, &apos;review&apos;, &apos;cancelled&apos;.` (CLI: `-s, --status &lt;status&gt;`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Mark progress as tasks move through the development cycle.

### 12. Remove Task (`remove_task`)

*   **MCP Tool:** `remove_task`
*   **CLI Command:** `task-master remove-task [options]`
*   **Description:** `Permanently remove a task or subtask from the Taskmaster tasks list.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task, e.g., &apos;5&apos;, or subtask, e.g., &apos;5.2&apos;, to permanently remove.` (CLI: `-i, --id &lt;id&gt;`)
    *   `yes`: `Skip the confirmation prompt and immediately delete the task.` (CLI: `-y, --yes`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Permanently delete tasks or subtasks that are no longer needed in the project.
*   **Notes:** Use with caution as this operation cannot be undone. Consider using &apos;blocked&apos;, &apos;cancelled&apos;, or &apos;deferred&apos; status instead if you just want to exclude a task from active planning but keep it for reference. The command automatically cleans up dependency references in other tasks.

---

## Task Structure &amp; Breakdown

### 13. Expand Task (`expand_task`)

*   **MCP Tool:** `expand_task`
*   **CLI Command:** `task-master expand [options]`
*   **Description:** `Use Taskmaster&apos;s AI to break down a complex task into smaller, manageable subtasks. Appends subtasks by default.`
*   **Key Parameters/Options:**
    *   `id`: `The ID of the specific Taskmaster task you want to break down into subtasks.` (CLI: `-i, --id &lt;id&gt;`)
    *   `num`: `Optional: Suggests how many subtasks Taskmaster should aim to create. Uses complexity analysis/defaults otherwise.` (CLI: `-n, --num &lt;number&gt;`)
    *   `research`: `Enable Taskmaster to use the research role for more informed subtask generation. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `prompt`: `Optional: Provide extra context or specific instructions to Taskmaster for generating the subtasks.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `force`: `Optional: If true, clear existing subtasks before generating new ones. Default is false (append).` (CLI: `--force`)
    *   `tag`: `Specify which tag context the task belongs to. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Generate a detailed implementation plan for a complex task before starting coding. Automatically uses complexity report recommendations if available and `num` is not specified.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 14. Expand All Tasks (`expand_all`)

*   **MCP Tool:** `expand_all`
*   **CLI Command:** `task-master expand --all [options]` (Note: CLI uses the `expand` command with the `--all` flag)
*   **Description:** `Tell Taskmaster to automatically expand all eligible pending/in-progress tasks based on complexity analysis or defaults. Appends subtasks by default.`
*   **Key Parameters/Options:**
    *   `num`: `Optional: Suggests how many subtasks Taskmaster should aim to create per task.` (CLI: `-n, --num &lt;number&gt;`)
    *   `research`: `Enable research role for more informed subtask generation. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `prompt`: `Optional: Provide extra context for Taskmaster to apply generally during expansion.` (CLI: `-p, --prompt &lt;text&gt;`)
    *   `force`: `Optional: If true, clear existing subtasks before generating new ones for each eligible task. Default is false (append).` (CLI: `--force`)
    *   `tag`: `Specify which tag context to expand. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Useful after initial task generation or complexity analysis to break down multiple tasks at once.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 15. Clear Subtasks (`clear_subtasks`)

*   **MCP Tool:** `clear_subtasks`
*   **CLI Command:** `task-master clear-subtasks [options]`
*   **Description:** `Remove all subtasks from one or more specified Taskmaster parent tasks.`
*   **Key Parameters/Options:**
    *   `id`: `The ID(s) of the Taskmaster parent task(s) whose subtasks you want to remove, e.g., &apos;15&apos; or &apos;16,18&apos;. Required unless using &apos;all&apos;.` (CLI: `-i, --id &lt;ids&gt;`)
    *   `all`: `Tell Taskmaster to remove subtasks from all parent tasks.` (CLI: `--all`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Used before regenerating subtasks with `expand_task` if the previous breakdown needs replacement.

### 16. Remove Subtask (`remove_subtask`)

*   **MCP Tool:** `remove_subtask`
*   **CLI Command:** `task-master remove-subtask [options]`
*   **Description:** `Remove a subtask from its Taskmaster parent, optionally converting it into a standalone task.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID(s) of the Taskmaster subtask(s) to remove, e.g., &apos;15.2&apos; or &apos;16.1,16.3&apos;.` (CLI: `-i, --id &lt;id&gt;`)
    *   `convert`: `If used, Taskmaster will turn the subtask into a regular top-level task instead of deleting it.` (CLI: `-c, --convert`)
    *   `generate`: `Enable Taskmaster to regenerate markdown task files after removing the subtask.` (CLI: `--generate`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Delete unnecessary subtasks or promote a subtask to a top-level task.

### 17. Move Task (`move_task`)

*   **MCP Tool:** `move_task`
*   **CLI Command:** `task-master move [options]`
*   **Description:** `Move a task or subtask to a new position within the task hierarchy.`
*   **Key Parameters/Options:**
    *   `from`: `Required. ID of the task/subtask to move (e.g., &quot;5&quot; or &quot;5.2&quot;). Can be comma-separated for multiple tasks.` (CLI: `--from &lt;id&gt;`)
    *   `to`: `Required. ID of the destination (e.g., &quot;7&quot; or &quot;7.3&quot;). Must match the number of source IDs if comma-separated.` (CLI: `--to &lt;id&gt;`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Reorganize tasks by moving them within the hierarchy. Supports various scenarios like:
    *   Moving a task to become a subtask
    *   Moving a subtask to become a standalone task
    *   Moving a subtask to a different parent
    *   Reordering subtasks within the same parent
    *   Moving a task to a new, non-existent ID (automatically creates placeholders)
    *   Moving multiple tasks at once with comma-separated IDs
*   **Validation Features:**
    *   Allows moving tasks to non-existent destination IDs (creates placeholder tasks)
    *   Prevents moving to existing task IDs that already have content (to avoid overwriting)
    *   Validates that source tasks exist before attempting to move them
    *   Maintains proper parent-child relationships
*   **Example CLI:** `task-master move --from=5.2 --to=7.3` to move subtask 5.2 to become subtask 7.3.
*   **Example Multi-Move:** `task-master move --from=10,11,12 --to=16,17,18` to move multiple tasks to new positions.
*   **Common Use:** Resolving merge conflicts in tasks.json when multiple team members create tasks on different branches.

---

## Dependency Management

### 18. Add Dependency (`add_dependency`)

*   **MCP Tool:** `add_dependency`
*   **CLI Command:** `task-master add-dependency [options]`
*   **Description:** `Define a dependency in Taskmaster, making one task a prerequisite for another.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task that will depend on another.` (CLI: `-i, --id &lt;id&gt;`)
    *   `dependsOn`: `Required. The ID of the Taskmaster task that must be completed first, the prerequisite.` (CLI: `-d, --depends-on &lt;id&gt;`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;path&gt;`)
*   **Usage:** Establish the correct order of execution between tasks.

### 19. Remove Dependency (`remove_dependency`)

*   **MCP Tool:** `remove_dependency`
*   **CLI Command:** `task-master remove-dependency [options]`
*   **Description:** `Remove a dependency relationship between two Taskmaster tasks.`
*   **Key Parameters/Options:**
    *   `id`: `Required. The ID of the Taskmaster task you want to remove a prerequisite from.` (CLI: `-i, --id &lt;id&gt;`)
    *   `dependsOn`: `Required. The ID of the Taskmaster task that should no longer be a prerequisite.` (CLI: `-d, --depends-on &lt;id&gt;`)
    *   `tag`: `Specify which tag context to operate on. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Update task relationships when the order of execution changes.

### 20. Validate Dependencies (`validate_dependencies`)

*   **MCP Tool:** `validate_dependencies`
*   **CLI Command:** `task-master validate-dependencies [options]`
*   **Description:** `Check your Taskmaster tasks for dependency issues (like circular references or links to non-existent tasks) without making changes.`
*   **Key Parameters/Options:**
    *   `tag`: `Specify which tag context to validate. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Audit the integrity of your task dependencies.

### 21. Fix Dependencies (`fix_dependencies`)

*   **MCP Tool:** `fix_dependencies`
*   **CLI Command:** `task-master fix-dependencies [options]`
*   **Description:** `Automatically fix dependency issues (like circular references or links to non-existent tasks) in your Taskmaster tasks.`
*   **Key Parameters/Options:**
    *   `tag`: `Specify which tag context to fix dependencies in. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Clean up dependency errors automatically.

---

## Analysis &amp; Reporting

### 22. Analyze Project Complexity (`analyze_project_complexity`)

*   **MCP Tool:** `analyze_project_complexity`
*   **CLI Command:** `task-master analyze-complexity [options]`
*   **Description:** `Have Taskmaster analyze your tasks to determine their complexity and suggest which ones need to be broken down further.`
*   **Key Parameters/Options:**
    *   `output`: `Where to save the complexity analysis report. Default is &apos;.taskmaster/reports/task-complexity-report.json&apos; (or &apos;..._tagname.json&apos; if a tag is used).` (CLI: `-o, --output &lt;file&gt;`)
    *   `threshold`: `The minimum complexity score (1-10) that should trigger a recommendation to expand a task.` (CLI: `-t, --threshold &lt;number&gt;`)
    *   `research`: `Enable research role for more accurate complexity analysis. Requires appropriate API key.` (CLI: `-r, --research`)
    *   `tag`: `Specify which tag context to analyze. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Used before breaking down tasks to identify which ones need the most attention.
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. Please inform users to hang tight while the operation is in progress.

### 23. View Complexity Report (`complexity_report`)

*   **MCP Tool:** `complexity_report`
*   **CLI Command:** `task-master complexity-report [options]`
*   **Description:** `Display the task complexity analysis report in a readable format.`
*   **Key Parameters/Options:**
    *   `tag`: `Specify which tag context to show the report for. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to the complexity report (default: &apos;.taskmaster/reports/task-complexity-report.json&apos;).` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Review and understand the complexity analysis results after running analyze-complexity.

---

## File Management

### 24. Generate Task Files (`generate`)

*   **MCP Tool:** `generate`
*   **CLI Command:** `task-master generate [options]`
*   **Description:** `Create or update individual Markdown files for each task based on your tasks.json.`
*   **Key Parameters/Options:**
    *   `output`: `The directory where Taskmaster should save the task files (default: in a &apos;tasks&apos; directory).` (CLI: `-o, --output &lt;directory&gt;`)
    *   `tag`: `Specify which tag context to generate files for. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
*   **Usage:** Run this after making changes to tasks.json to keep individual task files up to date. This command is now manual and no longer runs automatically.

---

## AI-Powered Research

### 25. Research (`research`)

*   **MCP Tool:** `research`
*   **CLI Command:** `task-master research [options]`
*   **Description:** `Perform AI-powered research queries with project context to get fresh, up-to-date information beyond the AI&apos;s knowledge cutoff.`
*   **Key Parameters/Options:**
    *   `query`: `Required. Research query/prompt (e.g., &quot;What are the latest best practices for React Query v5?&quot;).` (CLI: `[query]` positional or `-q, --query &lt;text&gt;`)
    *   `taskIds`: `Comma-separated list of task/subtask IDs from the current tag context (e.g., &quot;15,16.2,17&quot;).` (CLI: `-i, --id &lt;ids&gt;`)
    *   `filePaths`: `Comma-separated list of file paths for context (e.g., &quot;src/api.js,docs/readme.md&quot;).` (CLI: `-f, --files &lt;paths&gt;`)
    *   `customContext`: `Additional custom context text to include in the research.` (CLI: `-c, --context &lt;text&gt;`)
    *   `includeProjectTree`: `Include project file tree structure in context (default: false).` (CLI: `--tree`)
    *   `detailLevel`: `Detail level for the research response: &apos;low&apos;, &apos;medium&apos;, &apos;high&apos; (default: medium).` (CLI: `--detail &lt;level&gt;`)
    *   `saveTo`: `Task or subtask ID (e.g., &quot;15&quot;, &quot;15.2&quot;) to automatically save the research conversation to.` (CLI: `--save-to &lt;id&gt;`)
    *   `saveFile`: `If true, saves the research conversation to a markdown file in &apos;.taskmaster/docs/research/&apos;.` (CLI: `--save-file`)
    *   `noFollowup`: `Disables the interactive follow-up question menu in the CLI.` (CLI: `--no-followup`)
    *   `tag`: `Specify which tag context to use for task-based context gathering. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)
    *   `projectRoot`: `The directory of the project. Must be an absolute path.` (CLI: Determined automatically)
*   **Usage:** **This is a POWERFUL tool that agents should use FREQUENTLY** to:
    *   Get fresh information beyond knowledge cutoff dates
    *   Research latest best practices, library updates, security patches
    *   Find implementation examples for specific technologies
    *   Validate approaches against current industry standards
    *   Get contextual advice based on project files and tasks
*   **When to Consider Using Research:**
    *   **Before implementing any task** - Research current best practices
    *   **When encountering new technologies** - Get up-to-date implementation guidance (libraries, apis, etc)
    *   **For security-related tasks** - Find latest security recommendations
    *   **When updating dependencies** - Research breaking changes and migration guides
    *   **For performance optimization** - Get current performance best practices
    *   **When debugging complex issues** - Research known solutions and workarounds
*   **Research + Action Pattern:**
    *   Use `research` to gather fresh information
    *   Use `update_subtask` to commit findings with timestamps
    *   Use `update_task` to incorporate research into task details
    *   Use `add_task` with research flag for informed task creation
*   **Important:** This MCP tool makes AI calls and can take up to a minute to complete. The research provides FRESH data beyond the AI&apos;s training cutoff, making it invaluable for current best practices and recent developments.

---

## Tag Management

This new suite of commands allows you to manage different task contexts (tags).

### 26. List Tags (`tags`)

*   **MCP Tool:** `list_tags`
*   **CLI Command:** `task-master tags [options]`
*   **Description:** `List all available tags with task counts, completion status, and other metadata.`
*   **Key Parameters/Options:**
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)
    *   `--show-metadata`: `Include detailed metadata in the output (e.g., creation date, description).` (CLI: `--show-metadata`)

### 27. Add Tag (`add_tag`)

*   **MCP Tool:** `add_tag`
*   **CLI Command:** `task-master add-tag &lt;tagName&gt; [options]`
*   **Description:** `Create a new, empty tag context, or copy tasks from another tag.`
*   **Key Parameters/Options:**
    *   `tagName`: `Name of the new tag to create (alphanumeric, hyphens, underscores).` (CLI: `&lt;tagName&gt;` positional)
    *   `--from-branch`: `Creates a tag with a name derived from the current git branch, ignoring the &lt;tagName&gt; argument.` (CLI: `--from-branch`)
    *   `--copy-from-current`: `Copy tasks from the currently active tag to the new tag.` (CLI: `--copy-from-current`)
    *   `--copy-from &lt;tag&gt;`: `Copy tasks from a specific source tag to the new tag.` (CLI: `--copy-from &lt;tag&gt;`)
    *   `--description &lt;text&gt;`: `Provide an optional description for the new tag.` (CLI: `-d, --description &lt;text&gt;`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)

### 28. Delete Tag (`delete_tag`)

*   **MCP Tool:** `delete_tag`
*   **CLI Command:** `task-master delete-tag &lt;tagName&gt; [options]`
*   **Description:** `Permanently delete a tag and all of its associated tasks.`
*   **Key Parameters/Options:**
    *   `tagName`: `Name of the tag to delete.` (CLI: `&lt;tagName&gt;` positional)
    *   `--yes`: `Skip the confirmation prompt.` (CLI: `-y, --yes`)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)

### 29. Use Tag (`use_tag`)

*   **MCP Tool:** `use_tag`
*   **CLI Command:** `task-master use-tag &lt;tagName&gt;`
*   **Description:** `Switch your active task context to a different tag.`
*   **Key Parameters/Options:**
    *   `tagName`: `Name of the tag to switch to.` (CLI: `&lt;tagName&gt;` positional)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)

### 30. Rename Tag (`rename_tag`)

*   **MCP Tool:** `rename_tag`
*   **CLI Command:** `task-master rename-tag &lt;oldName&gt; &lt;newName&gt;`
*   **Description:** `Rename an existing tag.`
*   **Key Parameters/Options:**
    *   `oldName`: `The current name of the tag.` (CLI: `&lt;oldName&gt;` positional)
    *   `newName`: `The new name for the tag.` (CLI: `&lt;newName&gt;` positional)
    *   `file`: `Path to your Taskmaster &apos;tasks.json&apos; file. Default relies on auto-detection.` (CLI: `-f, --file &lt;file&gt;`)

### 31. Copy Tag (`copy_tag`)

*   **MCP Tool:** `copy_tag`
*   **CLI Command:** `task-master copy-tag &lt;sourceName&gt; &lt;targetName&gt; [options]`
*   **Description:** `Copy an entire tag context, including all its tasks and metadata, to a new tag.`
*   **Key Parameters/Options:**
    *   `sourceName`: `Name of the tag to copy from.` (CLI: `&lt;sourceName&gt;` positional)
    *   `targetName`: `Name of the new tag to create.` (CLI: `&lt;targetName&gt;` positional)
    *   `--description &lt;text&gt;`: `Optional description for the new tag.` (CLI: `-d, --description &lt;text&gt;`)

---

## Miscellaneous

### 32. Sync Readme (`sync-readme`) -- experimental

*   **MCP Tool:** N/A
*   **CLI Command:** `task-master sync-readme [options]`
*   **Description:** `Exports your task list to your project&apos;s README.md file, useful for showcasing progress.`
*   **Key Parameters/Options:**
    *   `status`: `Filter tasks by status (e.g., &apos;pending&apos;, &apos;done&apos;).` (CLI: `-s, --status &lt;status&gt;`)
    *   `withSubtasks`: `Include subtasks in the export.` (CLI: `--with-subtasks`)
    *   `tag`: `Specify which tag context to export from. Defaults to the current active tag.` (CLI: `--tag &lt;name&gt;`)

---

## Environment Variables Configuration (Updated)

Taskmaster primarily uses the **`.taskmaster/config.json`** file (in project root) for configuration (models, parameters, logging level, etc.), managed via `task-master models --setup`.

Environment variables are used **only** for sensitive API keys related to AI providers and specific overrides like the Ollama base URL:

*   **API Keys (Required for corresponding provider):**
    *   `ANTHROPIC_API_KEY`
    *   `PERPLEXITY_API_KEY`
    *   `OPENAI_API_KEY`
    *   `GOOGLE_API_KEY`
    *   `MISTRAL_API_KEY`
    *   `AZURE_OPENAI_API_KEY` (Requires `AZURE_OPENAI_ENDPOINT` too)
    *   `OPENROUTER_API_KEY`
    *   `XAI_API_KEY`
    *   `OLLAMA_API_KEY` (Requires `OLLAMA_BASE_URL` too)
*   **Endpoints (Optional/Provider Specific inside .taskmaster/config.json):**
    *   `AZURE_OPENAI_ENDPOINT`
    *   `OLLAMA_BASE_URL` (Default: `http://localhost:11434/api`)

**Set API keys** in your **`.env`** file in the project root (for CLI use) or within the `env` section of your **`.cursor/mcp.json`** file (for MCP/Cursor integration). All other settings (model choice, max tokens, temperature, log level, custom endpoints) are managed in `.taskmaster/config.json` via `task-master models` command or `models` MCP tool.

---

## MCP Tool Tiers

Default: `core` (7 tools). Set via `TASK_MASTER_TOOLS` env var in MCP config.

| Tier | Count | Tools |
|------|-------|-------|
| `core` | 7 | `get_tasks`, `next_task`, `get_task`, `set_task_status`, `update_subtask`, `parse_prd`, `expand_task` |
| `standard` | 14 | core + `initialize_project`, `analyze_project_complexity`, `expand_all`, `add_subtask`, `remove_task`, `add_task`, `complexity_report` |
| `all` | 44+ | standard + dependencies, tags, research, autopilot, scoping, models, rules |

**Upgrade when tool unavailable:** Edit MCP config (`.cursor/mcp.json`, `.mcp.json`, or `.vscode/mcp.json`), change `TASK_MASTER_TOOLS` from `&quot;core&quot;` to `&quot;standard&quot;` or `&quot;all&quot;`, restart MCP.

---

For details on how these commands fit into the development process, see the [dev_workflow.mdc](mdc:.cursor/rules/taskmaster/dev_workflow.mdc).</file><file path="fe/.cursor/rules/cursor_rules.mdc">---
description: Guidelines for creating and maintaining Cursor rules to ensure consistency and effectiveness.
globs: .cursor/rules/*.mdc
alwaysApply: true
---

- **Required Rule Structure:**
  ```markdown
  ---
  description: Clear, one-line description of what the rule enforces
  globs: path/to/files/*.ext, other/path/**/*
  alwaysApply: boolean
  ---

  - **Main Points in Bold**
    - Sub-points with details
    - Examples and explanations
  ```

- **File References:**
  - Use `[filename](mdc:path/to/file)` ([filename](mdc:filename)) to reference files
  - Example: [prisma.mdc](mdc:.cursor/rules/prisma.mdc) for rule references
  - Example: [schema.prisma](mdc:prisma/schema.prisma) for code references

- **Code Examples:**
  - Use language-specific code blocks
  ```typescript
  // ‚úÖ DO: Show good examples
  const goodExample = true;
  
  // ‚ùå DON&apos;T: Show anti-patterns
  const badExample = false;
  ```

- **Rule Content Guidelines:**
  - Start with high-level overview
  - Include specific, actionable requirements
  - Show examples of correct implementation
  - Reference existing code when possible
  - Keep rules DRY by referencing other rules

- **Rule Maintenance:**
  - Update rules when new patterns emerge
  - Add examples from actual codebase
  - Remove outdated patterns
  - Cross-reference related rules

- **Best Practices:**
  - Use bullet points for clarity
  - Keep descriptions concise
  - Include both DO and DON&apos;T examples
  - Reference actual code over theoretical examples
  - Use consistent formatting across rules</file><file path="fe/.cursor/rules/self_improve.mdc">---
description: Guidelines for continuously improving Cursor rules based on emerging code patterns and best practices.
globs: **/*
alwaysApply: true
---

- **Rule Improvement Triggers:**
  - New code patterns not covered by existing rules
  - Repeated similar implementations across files
  - Common error patterns that could be prevented
  - New libraries or tools being used consistently
  - Emerging best practices in the codebase

- **Analysis Process:**
  - Compare new code with existing rules
  - Identify patterns that should be standardized
  - Look for references to external documentation
  - Check for consistent error handling patterns
  - Monitor test patterns and coverage

- **Rule Updates:**
  - **Add New Rules When:**
    - A new technology/pattern is used in 3+ files
    - Common bugs could be prevented by a rule
    - Code reviews repeatedly mention the same feedback
    - New security or performance patterns emerge

  - **Modify Existing Rules When:**
    - Better examples exist in the codebase
    - Additional edge cases are discovered
    - Related rules have been updated
    - Implementation details have changed

- **Example Pattern Recognition:**
  ```typescript
  // If you see repeated patterns like:
  const data = await prisma.user.findMany({
    select: { id: true, email: true },
    where: { status: &apos;ACTIVE&apos; }
  });
  
  // Consider adding to [prisma.mdc](mdc:.cursor/rules/prisma.mdc):
  // - Standard select fields
  // - Common where conditions
  // - Performance optimization patterns
  ```

- **Rule Quality Checks:**
  - Rules should be actionable and specific
  - Examples should come from actual code
  - References should be up to date
  - Patterns should be consistently enforced

- **Continuous Improvement:**
  - Monitor code review comments
  - Track common development questions
  - Update rules after major refactors
  - Add links to relevant documentation
  - Cross-reference related rules

- **Rule Deprecation:**
  - Mark outdated patterns as deprecated
  - Remove rules that no longer apply
  - Update references to deprecated rules
  - Document migration paths for old patterns

- **Documentation Updates:**
  - Keep examples synchronized with code
  - Update references to external docs
  - Maintain links between related rules
  - Document breaking changes
Follow [cursor_rules.mdc](mdc:.cursor/rules/cursor_rules.mdc) for proper rule formatting and structure.</file><file path="fe/.cursor/mcp.json">{
  &quot;mcpServers&quot;: {
    &quot;task-master-ai&quot;: {
      &quot;command&quot;: &quot;npx&quot;,
      &quot;args&quot;: [&quot;-y&quot;, &quot;task-master-ai&quot;],
      &quot;env&quot;: {
        &quot;TASK_MASTER_TOOLS&quot;: &quot;core&quot;,
        &quot;ANTHROPIC_API_KEY&quot;: &quot;YOUR_ANTHROPIC_API_KEY_HERE&quot;,
        &quot;PERPLEXITY_API_KEY&quot;: &quot;YOUR_PERPLEXITY_API_KEY_HERE&quot;,
        &quot;OPENAI_API_KEY&quot;: &quot;YOUR_OPENAI_KEY_HERE&quot;,
        &quot;GOOGLE_API_KEY&quot;: &quot;YOUR_GOOGLE_KEY_HERE&quot;,
        &quot;XAI_API_KEY&quot;: &quot;YOUR_XAI_KEY_HERE&quot;,
        &quot;OPENROUTER_API_KEY&quot;: &quot;YOUR_OPENROUTER_KEY_HERE&quot;,
        &quot;MISTRAL_API_KEY&quot;: &quot;YOUR_MISTRAL_KEY_HERE&quot;,
        &quot;AZURE_OPENAI_API_KEY&quot;: &quot;YOUR_AZURE_KEY_HERE&quot;,
        &quot;OLLAMA_API_KEY&quot;: &quot;YOUR_OLLAMA_API_KEY_HERE&quot;
      }
    }
  }
}</file><file path="fe/.gemini/commands/tm/add-dependency.toml">description=&quot;Add Dependency&quot;
prompt = &quot;&quot;&quot;
Add a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to establish dependency relationship.

## Adding Dependencies

Creates a dependency where one task must be completed before another can start.

## Argument Parsing

Parse natural language or IDs:
- &quot;make 5 depend on 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 needs 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 3&quot; ‚Üí task 5 depends on task 3
- &quot;5 after 3&quot; ‚Üí task 5 depends on task 3

## Execution

```bash
task-master add-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Validation

Before adding:
1. **Verify both tasks exist**
2. **Check for circular dependencies**
3. **Ensure dependency makes logical sense**
4. **Warn if creating complex chains**

## Smart Features

- Detect if dependency already exists
- Suggest related dependencies
- Show impact on task flow
- Update task priorities if needed

## Post-Addition

After adding dependency:
1. Show updated dependency graph
2. Identify any newly blocked tasks
3. Suggest task order changes
4. Update project timeline

## Example Flows

```
/taskmaster:add-dependency 5 needs 3
‚Üí Task #5 now depends on Task #3
‚Üí Task #5 is now blocked until #3 completes
‚Üí Suggested: Also consider if #5 needs #4
```
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/add-subtask.toml">description=&quot;Add Subtask&quot;
prompt = &quot;&quot;&quot;
Add a subtask to a parent task.

Arguments: $ARGUMENTS

Parse arguments to create a new subtask or convert existing task.

## Adding Subtasks

Creates subtasks to break down complex parent tasks into manageable pieces.

## Argument Parsing

Flexible natural language:
- &quot;add subtask to 5: implement login form&quot;
- &quot;break down 5 with: setup, implement, test&quot;
- &quot;subtask for 5: handle edge cases&quot;
- &quot;5: validate user input&quot; ‚Üí adds subtask to task 5

## Execution Modes

### 1. Create New Subtask
```bash
task-master add-subtask --parent=&lt;id&gt; --title=&quot;&lt;title&gt;&quot; --description=&quot;&lt;desc&gt;&quot;
```

### 2. Convert Existing Task
```bash
task-master add-subtask --parent=&lt;id&gt; --task-id=&lt;existing-id&gt;
```

## Smart Features

1. **Automatic Subtask Generation**
   - If title contains &quot;and&quot; or commas, create multiple
   - Suggest common subtask patterns
   - Inherit parent&apos;s context

2. **Intelligent Defaults**
   - Priority based on parent
   - Appropriate time estimates
   - Logical dependencies between subtasks

3. **Validation**
   - Check parent task complexity
   - Warn if too many subtasks
   - Ensure subtask makes sense

## Creation Process

1. Parse parent task context
2. Generate subtask with ID like &quot;5.1&quot;
3. Set appropriate defaults
4. Link to parent task
5. Update parent&apos;s time estimate

## Example Flows

```
/taskmaster:add-subtask to 5: implement user authentication
‚Üí Created subtask #5.1: &quot;implement user authentication&quot;
‚Üí Parent task #5 now has 1 subtask
‚Üí Suggested next subtasks: tests, documentation

/taskmaster:add-subtask 5: setup, implement, test
‚Üí Created 3 subtasks:
  #5.1: setup
  #5.2: implement
  #5.3: test
```

## Post-Creation

- Show updated task hierarchy
- Suggest logical next subtasks
- Update complexity estimates
- Recommend subtask order
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/add-task.toml">description=&quot;Add Task&quot;
prompt = &quot;&quot;&quot;
Add new tasks with intelligent parsing and context awareness.

Arguments: $ARGUMENTS

## Smart Task Addition

Parse natural language to create well-structured tasks.

### 1. **Input Understanding**

I&apos;ll intelligently parse your request:
- Natural language ‚Üí Structured task
- Detect priority from keywords (urgent, ASAP, important)
- Infer dependencies from context
- Suggest complexity based on description
- Determine task type (feature, bug, refactor, test, docs)

### 2. **Smart Parsing Examples**

**&quot;Add urgent task to fix login bug&quot;**
‚Üí Title: Fix login bug
‚Üí Priority: high
‚Üí Type: bug
‚Üí Suggested complexity: medium

**&quot;Create task for API documentation after task 23 is done&quot;**
‚Üí Title: API documentation
‚Üí Dependencies: [23]
‚Üí Type: documentation
‚Üí Priority: medium

**&quot;Need to refactor auth module - depends on 12 and 15, high complexity&quot;**
‚Üí Title: Refactor auth module
‚Üí Dependencies: [12, 15]
‚Üí Complexity: high
‚Üí Type: refactor

### 3. **Context Enhancement**

Based on current project state:
- Suggest related existing tasks
- Warn about potential conflicts
- Recommend dependencies
- Propose subtasks if complex

### 4. **Interactive Refinement**

```yaml
Task Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Title: [Extracted title]
Priority: [Inferred priority]
Dependencies: [Detected dependencies]
Complexity: [Estimated complexity]

Suggestions:
- Similar task #34 exists, consider as dependency?
- This seems complex, break into subtasks?
- Tasks #45-47 work on same module
```

### 5. **Validation &amp; Creation**

Before creating:
- Validate dependencies exist
- Check for duplicates
- Ensure logical ordering
- Verify task completeness

### 6. **Smart Defaults**

Intelligent defaults based on:
- Task type patterns
- Team conventions
- Historical data
- Current sprint/phase

Result: High-quality tasks from minimal input.
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/analyze-complexity.toml">description=&quot;Analyze Complexity&quot;
prompt = &quot;&quot;&quot;
Analyze task complexity and generate expansion recommendations.

Arguments: $ARGUMENTS

Perform deep analysis of task complexity across the project.

## Complexity Analysis

Uses AI to analyze tasks and recommend which ones need breakdown.

## Execution Options

```bash
task-master analyze-complexity [--research] [--threshold=5]
```

## Analysis Parameters

- `--research` ‚Üí Use research AI for deeper analysis
- `--threshold=5` ‚Üí Only flag tasks above complexity 5
- Default: Analyze all pending tasks

## Analysis Process

### 1. **Task Evaluation**
For each task, AI evaluates:
- Technical complexity
- Time requirements
- Dependency complexity
- Risk factors
- Knowledge requirements

### 2. **Complexity Scoring**
Assigns score 1-10 based on:
- Implementation difficulty
- Integration challenges
- Testing requirements
- Unknown factors
- Technical debt risk

### 3. **Recommendations**
For complex tasks:
- Suggest expansion approach
- Recommend subtask breakdown
- Identify risk areas
- Propose mitigation strategies

## Smart Analysis Features

1. **Pattern Recognition**
   - Similar task comparisons
   - Historical complexity accuracy
   - Team velocity consideration
   - Technology stack factors

2. **Contextual Factors**
   - Team expertise
   - Available resources
   - Timeline constraints
   - Business criticality

3. **Risk Assessment**
   - Technical risks
   - Timeline risks
   - Dependency risks
   - Knowledge gaps

## Output Format

```
Task Complexity Analysis Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

High Complexity Tasks (&gt;7):
üìç #5 &quot;Implement real-time sync&quot; - Score: 9/10
   Factors: WebSocket complexity, state management, conflict resolution
   Recommendation: Expand into 5-7 subtasks
   Risks: Performance, data consistency

üìç #12 &quot;Migrate database schema&quot; - Score: 8/10
   Factors: Data migration, zero downtime, rollback strategy
   Recommendation: Expand into 4-5 subtasks
   Risks: Data loss, downtime

Medium Complexity Tasks (5-7):
üìç #23 &quot;Add export functionality&quot; - Score: 6/10
   Consider expansion if timeline tight

Low Complexity Tasks (&lt;5):
‚úÖ 15 tasks - No expansion needed

Summary:
- Expand immediately: 2 tasks
- Consider expanding: 5 tasks
- Keep as-is: 15 tasks
```

## Actionable Output

For each high-complexity task:
1. Complexity score with reasoning
2. Specific expansion suggestions
3. Risk mitigation approaches
4. Recommended subtask structure

## Integration

Results are:
- Saved to `.taskmaster/reports/complexity-analysis.md`
- Used by expand command
- Inform sprint planning
- Guide resource allocation

## Next Steps

After analysis:
```
/taskmaster:expand 5    # Expand specific task
/taskmaster:expand-all  # Expand all recommended
/taskmaster:complexity-report  # View detailed report
```
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/analyze-project.toml">description=&quot;Analyze Project&quot;
prompt = &quot;&quot;&quot;
Advanced project analysis with actionable insights and recommendations.

Arguments: $ARGUMENTS

## Comprehensive Project Analysis

Multi-dimensional analysis based on requested focus area.

### 1. **Analysis Modes**

Based on $ARGUMENTS:
- &quot;velocity&quot; ‚Üí Sprint velocity and trends
- &quot;quality&quot; ‚Üí Code quality metrics
- &quot;risk&quot; ‚Üí Risk assessment and mitigation
- &quot;dependencies&quot; ‚Üí Dependency graph analysis
- &quot;team&quot; ‚Üí Workload and skill distribution
- &quot;architecture&quot; ‚Üí System design coherence
- Default ‚Üí Full spectrum analysis

### 2. **Velocity Analytics**

```
üìä Velocity Analysis
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Current Sprint: 24 points/week ‚ÜóÔ∏è +20%
Rolling Average: 20 points/week
Efficiency: 85% (17/20 tasks on time)

Bottlenecks Detected:
- Code review delays (avg 4h wait)
- Test environment availability
- Dependency on external team

Recommendations:
1. Implement parallel review process
2. Add staging environment
3. Mock external dependencies
```

### 3. **Risk Assessment**

**Technical Risks**
- High complexity tasks without backup assignee
- Single points of failure in architecture
- Insufficient test coverage in critical paths
- Technical debt accumulation rate

**Project Risks**
- Critical path dependencies
- Resource availability gaps
- Deadline feasibility analysis
- Scope creep indicators

### 4. **Dependency Intelligence**

Visual dependency analysis:
```
Critical Path:
#12 ‚Üí #15 ‚Üí #23 ‚Üí #45 ‚Üí #50 (20 days)
         ‚Üò #24 ‚Üí #46 ‚Üó

Optimization: Parallelize #15 and #24
Time Saved: 3 days
```

### 5. **Quality Metrics**

**Code Quality**
- Test coverage trends
- Complexity scores
- Technical debt ratio
- Review feedback patterns

**Process Quality**
- Rework frequency
- Bug introduction rate
- Time to resolution
- Knowledge distribution

### 6. **Predictive Insights**

Based on patterns:
- Completion probability by deadline
- Resource needs projection
- Risk materialization likelihood
- Suggested interventions

### 7. **Executive Dashboard**

High-level summary with:
- Health score (0-100)
- Top 3 risks
- Top 3 opportunities
- Recommended actions
- Success probability

Result: Data-driven decisions with clear action paths.
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/auto-implement-tasks.toml">description=&quot;Auto Implement Tasks&quot;
prompt = &quot;&quot;&quot;
Enhanced auto-implementation with intelligent code generation and testing.

Arguments: $ARGUMENTS

## Intelligent Auto-Implementation

Advanced implementation with context awareness and quality checks.

### 1. **Pre-Implementation Analysis**

Before starting:
- Analyze task complexity and requirements
- Check codebase patterns and conventions
- Identify similar completed tasks
- Assess test coverage needs
- Detect potential risks

### 2. **Smart Implementation Strategy**

Based on task type and context:

**Feature Tasks**
1. Research existing patterns
2. Design component architecture
3. Implement with tests
4. Integrate with system
5. Update documentation

**Bug Fix Tasks**
1. Reproduce issue
2. Identify root cause
3. Implement minimal fix
4. Add regression tests
5. Verify side effects

**Refactoring Tasks**
1. Analyze current structure
2. Plan incremental changes
3. Maintain test coverage
4. Refactor step-by-step
5. Verify behavior unchanged

### 3. **Code Intelligence**

**Pattern Recognition**
- Learn from existing code
- Follow team conventions
- Use preferred libraries
- Match style guidelines

**Test-Driven Approach**
- Write tests first when possible
- Ensure comprehensive coverage
- Include edge cases
- Performance considerations

### 4. **Progressive Implementation**

Step-by-step with validation:
```
Step 1/5: Setting up component structure ‚úì
Step 2/5: Implementing core logic ‚úì
Step 3/5: Adding error handling ‚ö° (in progress)
Step 4/5: Writing tests ‚è≥
Step 5/5: Integration testing ‚è≥

Current: Adding try-catch blocks and validation...
```

### 5. **Quality Assurance**

Automated checks:
- Linting and formatting
- Test execution
- Type checking
- Dependency validation
- Performance analysis

### 6. **Smart Recovery**

If issues arise:
- Diagnostic analysis
- Suggestion generation
- Fallback strategies
- Manual intervention points
- Learning from failures

### 7. **Post-Implementation**

After completion:
- Generate PR description
- Update documentation
- Log lessons learned
- Suggest follow-up tasks
- Update task relationships

Result: High-quality, production-ready implementations.
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/command-pipeline.toml">description=&quot;Command Pipeline&quot;
prompt = &quot;&quot;&quot;
Execute a pipeline of commands based on a specification.

Arguments: $ARGUMENTS

## Command Pipeline Execution

Parse pipeline specification from arguments. Supported formats:

### Simple Pipeline
`init ‚Üí expand-all ‚Üí sprint-plan`

### Conditional Pipeline
`status ‚Üí if:pending&gt;10 ‚Üí sprint-plan ‚Üí else ‚Üí next`

### Iterative Pipeline
`for:pending-tasks ‚Üí expand ‚Üí complexity-check`

### Smart Pipeline Patterns

**1. Project Setup Pipeline**
```
init [prd] ‚Üí
expand-all ‚Üí
complexity-report ‚Üí
sprint-plan ‚Üí
show first-sprint
```

**2. Daily Work Pipeline**
```
standup ‚Üí
if:in-progress ‚Üí continue ‚Üí
else ‚Üí next ‚Üí start
```

**3. Task Completion Pipeline**
```
complete [id] ‚Üí
git-commit ‚Üí
if:blocked-tasks-freed ‚Üí show-freed ‚Üí
next
```

**4. Quality Check Pipeline**
```
list in-progress ‚Üí
for:each ‚Üí check-idle-time ‚Üí
if:idle&gt;1day ‚Üí prompt-update
```

### Pipeline Features

**Variables**
- Store results: `status ‚Üí $count=pending-count`
- Use in conditions: `if:$count&gt;10`
- Pass between commands: `expand $high-priority-tasks`

**Error Handling**
- On failure: `try:complete ‚Üí catch:show-blockers`
- Skip on error: `optional:test-run`
- Retry logic: `retry:3:commit`

**Parallel Execution**
- Parallel branches: `[analyze | test | lint]`
- Join results: `parallel ‚Üí join:report`

### Execution Flow

1. Parse pipeline specification
2. Validate command sequence
3. Execute with state passing
4. Handle conditions and loops
5. Aggregate results
6. Show summary

This enables complex workflows like:
`parse-prd ‚Üí expand-all ‚Üí filter:complex&gt;70 ‚Üí assign:senior ‚Üí sprint-plan:weighted`
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/complexity-report.toml">description=&quot;Complexity Report&quot;
prompt = &quot;&quot;&quot;
Display the task complexity analysis report.

Arguments: $ARGUMENTS

View the detailed complexity analysis generated by analyze-complexity command.

## Viewing Complexity Report

Shows comprehensive task complexity analysis with actionable insights.

## Execution

```bash
task-master complexity-report [--file=&lt;path&gt;]
```

## Report Location

Default: `.taskmaster/reports/complexity-analysis.md`
Custom: Specify with --file parameter

## Report Contents

### 1. **Executive Summary**
```
Complexity Analysis Summary
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Analysis Date: 2024-01-15
Tasks Analyzed: 32
High Complexity: 5 (16%)
Medium Complexity: 12 (37%)
Low Complexity: 15 (47%)

Critical Findings:
- 5 tasks need immediate expansion
- 3 tasks have high technical risk
- 2 tasks block critical path
```

### 2. **Detailed Task Analysis**
For each complex task:
- Complexity score breakdown
- Contributing factors
- Specific risks identified
- Expansion recommendations
- Similar completed tasks

### 3. **Risk Matrix**
Visual representation:
```
Risk vs Complexity Matrix
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
High Risk  | #5(9) #12(8) | #23(6)
Med Risk   | #34(7)       | #45(5) #67(5)
Low Risk   | #78(8)       | [15 tasks]
           | High Complex  | Med Complex
```

### 4. **Recommendations**

**Immediate Actions:**
1. Expand task #5 - Critical path + high complexity
2. Expand task #12 - High risk + dependencies
3. Review task #34 - Consider splitting

**Sprint Planning:**
- Don&apos;t schedule multiple high-complexity tasks together
- Ensure expertise available for complex tasks
- Build in buffer time for unknowns

## Interactive Features

When viewing report:
1. **Quick Actions**
   - Press &apos;e&apos; to expand a task
   - Press &apos;d&apos; for task details
   - Press &apos;r&apos; to refresh analysis

2. **Filtering**
   - View by complexity level
   - Filter by risk factors
   - Show only actionable items

3. **Export Options**
   - Markdown format
   - CSV for spreadsheets
   - JSON for tools

## Report Intelligence

- Compares with historical data
- Shows complexity trends
- Identifies patterns
- Suggests process improvements

## Integration

Use report for:
- Sprint planning sessions
- Resource allocation
- Risk assessment
- Team discussions
- Client updates

## Example Usage

```
/taskmaster:complexity-report
‚Üí Opens latest analysis

/taskmaster:complexity-report --file=archived/2024-01-01.md
‚Üí View historical analysis

After viewing:
/taskmaster:expand 5
‚Üí Expand high-complexity task
```
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/convert-task-to-subtask.toml">description=&quot;Convert Task To Subtask&quot;
prompt = &quot;&quot;&quot;
Convert an existing task into a subtask.

Arguments: $ARGUMENTS

Parse parent ID and task ID to convert.

## Task Conversion

Converts an existing standalone task into a subtask of another task.

## Argument Parsing

- &quot;move task 8 under 5&quot;
- &quot;make 8 a subtask of 5&quot;
- &quot;nest 8 in 5&quot;
- &quot;5 8&quot; ‚Üí make task 8 a subtask of task 5

## Execution

```bash
task-master add-subtask --parent=&lt;parent-id&gt; --task-id=&lt;task-to-convert&gt;
```

## Pre-Conversion Checks

1. **Validation**
   - Both tasks exist and are valid
   - No circular parent relationships
   - Task isn&apos;t already a subtask
   - Logical hierarchy makes sense

2. **Impact Analysis**
   - Dependencies that will be affected
   - Tasks that depend on converting task
   - Priority alignment needed
   - Status compatibility

## Conversion Process

1. Change task ID from &quot;8&quot; to &quot;5.1&quot; (next available)
2. Update all dependency references
3. Inherit parent&apos;s context where appropriate
4. Adjust priorities if needed
5. Update time estimates

## Smart Features

- Preserve task history
- Maintain dependencies
- Update all references
- Create conversion log

## Example

```
/taskmaster:add-subtask/from-task 5 8
‚Üí Converting: Task #8 becomes subtask #5.1
‚Üí Updated: 3 dependency references
‚Üí Parent task #5 now has 1 subtask
‚Üí Note: Subtask inherits parent&apos;s priority

Before: #8 &quot;Implement validation&quot; (standalone)
After:  #5.1 &quot;Implement validation&quot; (subtask of #5)
```

## Post-Conversion

- Show new task hierarchy
- List updated dependencies
- Verify project integrity
- Suggest related conversions
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/expand-all-tasks.toml">description=&quot;Expand All Tasks&quot;
prompt = &quot;&quot;&quot;
Expand all pending tasks that need subtasks.

## Bulk Task Expansion

Intelligently expands all tasks that would benefit from breakdown.

## Execution

```bash
task-master expand --all
```

## Smart Selection

Only expands tasks that:
- Are marked as pending
- Have high complexity (&gt;5)
- Lack existing subtasks
- Would benefit from breakdown

## Expansion Process

1. **Analysis Phase**
   - Identify expansion candidates
   - Group related tasks
   - Plan expansion strategy

2. **Batch Processing**
   - Expand tasks in logical order
   - Maintain consistency
   - Preserve relationships
   - Optimize for parallelism

3. **Quality Control**
   - Ensure subtask quality
   - Avoid over-decomposition
   - Maintain task coherence
   - Update dependencies

## Options

- Add `force` to expand all regardless of complexity
- Add `research` for enhanced AI analysis

## Results

After bulk expansion:
- Summary of tasks expanded
- New subtask count
- Updated complexity metrics
- Suggested task order
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/expand-task.toml">description=&quot;Expand Task&quot;
prompt = &quot;&quot;&quot;
Break down a complex task into subtasks.

Arguments: $ARGUMENTS (task ID)

## Intelligent Task Expansion

Analyzes a task and creates detailed subtasks for better manageability.

## Execution

```bash
task-master expand --id=$ARGUMENTS
```

## Expansion Process

1. **Task Analysis**
   - Review task complexity
   - Identify components
   - Detect technical challenges
   - Estimate time requirements

2. **Subtask Generation**
   - Create 3-7 subtasks typically
   - Each subtask 1-4 hours
   - Logical implementation order
   - Clear acceptance criteria

3. **Smart Breakdown**
   - Setup/configuration tasks
   - Core implementation
   - Testing components
   - Integration steps
   - Documentation updates

## Enhanced Features

Based on task type:
- **Feature**: Setup ‚Üí Implement ‚Üí Test ‚Üí Integrate
- **Bug Fix**: Reproduce ‚Üí Diagnose ‚Üí Fix ‚Üí Verify
- **Refactor**: Analyze ‚Üí Plan ‚Üí Refactor ‚Üí Validate

## Post-Expansion

After expansion:
1. Show subtask hierarchy
2. Update time estimates
3. Suggest implementation order
4. Highlight critical path
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/fix-dependencies.toml">description=&quot;Fix Dependencies&quot;
prompt = &quot;&quot;&quot;
Automatically fix dependency issues found during validation.

## Automatic Dependency Repair

Intelligently fixes common dependency problems while preserving project logic.

## Execution

```bash
task-master fix-dependencies
```

## What Gets Fixed

### 1. **Auto-Fixable Issues**
- Remove references to deleted tasks
- Break simple circular dependencies
- Remove self-dependencies
- Clean up duplicate dependencies

### 2. **Smart Resolutions**
- Reorder dependencies to maintain logic
- Suggest task merging for over-dependent tasks
- Flatten unnecessary dependency chains
- Remove redundant transitive dependencies

### 3. **Manual Review Required**
- Complex circular dependencies
- Critical path modifications
- Business logic dependencies
- High-impact changes

## Fix Process

1. **Analysis Phase**
   - Run validation check
   - Categorize issues by type
   - Determine fix strategy

2. **Execution Phase**
   - Apply automatic fixes
   - Log all changes made
   - Preserve task relationships

3. **Verification Phase**
   - Re-validate after fixes
   - Show before/after comparison
   - Highlight manual fixes needed

## Smart Features

- Preserves intended task flow
- Minimal disruption approach
- Creates fix history/log
- Suggests manual interventions

## Output Example

```
Dependency Auto-Fix Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Fixed Automatically:
‚úÖ Removed 2 references to deleted tasks
‚úÖ Resolved 1 self-dependency
‚úÖ Cleaned 3 redundant dependencies

Manual Review Needed:
‚ö†Ô∏è Complex circular dependency: #12 ‚Üí #15 ‚Üí #18 ‚Üí #12
  Suggestion: Make #15 not depend on #12
‚ö†Ô∏è Task #45 has 8 dependencies
  Suggestion: Break into subtasks

Run &apos;/taskmaster:validate-dependencies&apos; to verify fixes
```

## Safety

- Preview mode available
- Rollback capability
- Change logging
- No data loss
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/help.toml">description=&quot;Help&quot;
prompt = &quot;&quot;&quot;
Show help for Task Master AI commands.

Arguments: $ARGUMENTS

Display help for Task Master commands and available options.

## Task Master AI Command Help

### Quick Navigation

Type `/taskmaster:` and use tab completion to explore all commands.

### Command Categories

#### üöÄ Setup &amp; Installation
- `/taskmaster:install-taskmaster` - Comprehensive installation guide
- `/taskmaster:quick-install-taskmaster` - One-line global install

#### üìã Project Setup
- `/taskmaster:init-project` - Initialize new project
- `/taskmaster:init-project-quick` - Quick setup with auto-confirm
- `/taskmaster:view-models` - View AI configuration
- `/taskmaster:setup-models` - Configure AI providers

#### üéØ Task Generation
- `/taskmaster:parse-prd` - Generate tasks from PRD
- `/taskmaster:parse-prd-with-research` - Enhanced parsing
- `/taskmaster:generate-tasks` - Create task files

#### üìù Task Management
- `/taskmaster:list-tasks` - List all tasks
- `/taskmaster:list-tasks-by-status` - List tasks filtered by status
- `/taskmaster:list-tasks-with-subtasks` - List tasks with subtasks
- `/taskmaster:show-task` - Display task details
- `/taskmaster:add-task` - Create new task
- `/taskmaster:update-task` - Update single task
- `/taskmaster:update-tasks-from-id` - Update multiple tasks
- `/taskmaster:next-task` - Get next task recommendation

#### üîÑ Status Management
- `/taskmaster:to-pending` - Set task to pending
- `/taskmaster:to-in-progress` - Set task to in-progress
- `/taskmaster:to-done` - Set task to done
- `/taskmaster:to-review` - Set task to review
- `/taskmaster:to-deferred` - Set task to deferred
- `/taskmaster:to-cancelled` - Set task to cancelled

#### üîç Analysis &amp; Breakdown
- `/taskmaster:analyze-complexity` - Analyze task complexity
- `/taskmaster:complexity-report` - View complexity report
- `/taskmaster:expand-task` - Break down complex task
- `/taskmaster:expand-all-tasks` - Expand all eligible tasks

#### üîó Dependencies
- `/taskmaster:add-dependency` - Add task dependency
- `/taskmaster:remove-dependency` - Remove dependency
- `/taskmaster:validate-dependencies` - Check for issues
- `/taskmaster:fix-dependencies` - Auto-fix dependency issues

#### üì¶ Subtasks
- `/taskmaster:add-subtask` - Add subtask to task
- `/taskmaster:convert-task-to-subtask` - Convert task to subtask
- `/taskmaster:remove-subtask` - Remove subtask
- `/taskmaster:remove-subtasks` - Clear specific task subtasks
- `/taskmaster:remove-all-subtasks` - Clear all subtasks

#### üóëÔ∏è Task Removal
- `/taskmaster:remove-task` - Remove task permanently

#### ü§ñ Workflows
- `/taskmaster:smart-workflow` - Intelligent workflows
- `/taskmaster:command-pipeline` - Command chaining
- `/taskmaster:auto-implement-tasks` - Auto-implementation

#### üìä Utilities
- `/taskmaster:analyze-project` - Project analysis
- `/taskmaster:project-status` - Project dashboard
- `/taskmaster:sync-readme` - Sync README with tasks
- `/taskmaster:learn` - Interactive learning
- `/taskmaster:tm-main` - Main Task Master interface

### Quick Start Examples

```
/taskmaster:list-tasks
/taskmaster:show-task 1.2
/taskmaster:add-task
/taskmaster:next-task
```

### Getting Started

1. Install: `/taskmaster:quick-install-taskmaster`
2. Initialize: `/taskmaster:init-project-quick`
3. Learn: `/taskmaster:learn`
4. Work: `/taskmaster:smart-workflow`

For detailed command info, run the specific command with `--help` or check command documentation.
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/init-project-quick.toml">description=&quot;Init Project Quick&quot;
prompt = &quot;&quot;&quot;
Quick initialization with auto-confirmation.

Arguments: $ARGUMENTS

Initialize a Task Master project without prompts, accepting all defaults.

## Quick Setup

```bash
task-master init -y
```

## What It Does

1. Creates `.taskmaster/` directory structure
2. Initializes empty `tasks.json`
3. Sets up default configuration
4. Uses directory name as project name
5. Skips all confirmation prompts

## Smart Defaults

- Project name: Current directory name
- Description: &quot;Task Master Project&quot;
- Model config: Existing environment vars
- Task structure: Standard format

## Next Steps

After quick init:
1. Configure AI models if needed:
   ```
   /taskmaster:models/setup
   ```

2. Parse PRD if available:
   ```
   /taskmaster:parse-prd &lt;file&gt;
   ```

3. Or create first task:
   ```
   /taskmaster:add-task create initial setup
   ```

Perfect for rapid project setup!
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/init-project.toml">description=&quot;Init Project&quot;
prompt = &quot;&quot;&quot;
Initialize a new Task Master project.

Arguments: $ARGUMENTS

Parse arguments to determine initialization preferences.

## Initialization Process

1. **Parse Arguments**
   - PRD file path (if provided)
   - Project name
   - Auto-confirm flag (-y)

2. **Project Setup**
   ```bash
   task-master init
   ```

3. **Smart Initialization**
   - Detect existing project files
   - Suggest project name from directory
   - Check for git repository
   - Verify AI provider configuration

## Configuration Options

Based on arguments:
- `quick` / `-y` ‚Üí Skip confirmations
- `&lt;file.md&gt;` ‚Üí Use as PRD after init
- `--name=&lt;name&gt;` ‚Üí Set project name
- `--description=&lt;desc&gt;` ‚Üí Set description

## Post-Initialization

After successful init:
1. Show project structure created
2. Verify AI models configured
3. Suggest next steps:
   - Parse PRD if available
   - Configure AI providers
   - Set up git hooks
   - Create first tasks

## Integration

If PRD file provided:
```
/taskmaster:init my-prd.md
‚Üí Automatically runs parse-prd after init
```
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/install-taskmaster.toml">description=&quot;Install TaskMaster&quot;
prompt = &quot;&quot;&quot;
Check if Task Master is installed and install it if needed.

This command helps you get Task Master set up globally on your system.

## Detection and Installation Process

1. **Check Current Installation**
   ```bash
   # Check if task-master command exists
   which task-master || echo &quot;Task Master not found&quot;

   # Check npm global packages
   npm list -g task-master-ai
   ```

2. **System Requirements Check**
   ```bash
   # Verify Node.js is installed
   node --version

   # Verify npm is installed
   npm --version

   # Check Node version (need 16+)
   ```

3. **Install Task Master Globally**
   If not installed, run:
   ```bash
   npm install -g task-master-ai
   ```

4. **Verify Installation**
   ```bash
   # Check version
   task-master --version

   # Verify command is available
   which task-master
   ```

5. **Initial Setup**
   ```bash
   # Initialize in current directory
   task-master init
   ```

6. **Configure AI Provider**
   Ensure you have at least one AI provider API key set:
   ```bash
   # Check current configuration
   task-master models --status

   # If no API keys found, guide setup
   echo &quot;You&apos;ll need at least one API key:&quot;
   echo &quot;- ANTHROPIC_API_KEY for Claude&quot;
   echo &quot;- OPENAI_API_KEY for GPT models&quot;
   echo &quot;- PERPLEXITY_API_KEY for research&quot;
   echo &quot;&quot;
   echo &quot;Set them in your shell profile or .env file&quot;
   ```

7. **Quick Test**
   ```bash
   # Create a test PRD
   echo &quot;Build a simple hello world API&quot; &gt; test-prd.txt

   # Try parsing it
   task-master parse-prd test-prd.txt -n 3
   ```

## Troubleshooting

If installation fails:

**Permission Errors:**
```bash
# Try with sudo (macOS/Linux)
sudo npm install -g task-master-ai

# Or fix npm permissions
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH
```

**Network Issues:**
```bash
# Use different registry
npm install -g task-master-ai --registry https://registry.npmjs.org/
```

**Node Version Issues:**
```bash
# Install Node 20+ via nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20
```

## Success Confirmation

Once installed, you should see:
```
‚úÖ Task Master installed
‚úÖ Command &apos;task-master&apos; available globally
‚úÖ AI provider configured
‚úÖ Ready to use slash commands!

Try: /taskmaster:init your-prd.md
```

## Next Steps

After installation:
1. Run `/taskmaster:status` to verify setup
2. Configure AI providers with `/taskmaster:setup-models`
3. Start using Task Master commands!
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/learn.toml">description=&quot;Learn&quot;
prompt = &quot;&quot;&quot;
Learn about Task Master capabilities through interactive exploration.

Arguments: $ARGUMENTS

## Interactive Task Master Learning

Based on your input, I&apos;ll help you discover capabilities:

### 1. **What are you trying to do?**

If $ARGUMENTS contains:
- &quot;start&quot; / &quot;begin&quot; ‚Üí Show project initialization workflows
- &quot;manage&quot; / &quot;organize&quot; ‚Üí Show task management commands
- &quot;automate&quot; / &quot;auto&quot; ‚Üí Show automation workflows
- &quot;analyze&quot; / &quot;report&quot; ‚Üí Show analysis tools
- &quot;fix&quot; / &quot;problem&quot; ‚Üí Show troubleshooting commands
- &quot;fast&quot; / &quot;quick&quot; ‚Üí Show efficiency shortcuts

### 2. **Intelligent Suggestions**

Based on your project state:

**No tasks yet?**
```
You&apos;ll want to start with:
1. /project:task-master:init &lt;prd-file&gt;
   ‚Üí Creates tasks from requirements

2. /project:task-master:parse-prd &lt;file&gt;
   ‚Üí Alternative task generation

Try: /project:task-master:init demo-prd.md
```

**Have tasks?**
Let me analyze what you might need...
- Many pending tasks? ‚Üí Learn sprint planning
- Complex tasks? ‚Üí Learn task expansion
- Daily work? ‚Üí Learn workflow automation

### 3. **Command Discovery**

**By Category:**
- üìã Task Management: list, show, add, update, complete
- üîÑ Workflows: auto-implement, sprint-plan, daily-standup
- üõ†Ô∏è Utilities: check-health, complexity-report, sync-memory
- üîç Analysis: validate-deps, show dependencies

**By Scenario:**
- &quot;I want to see what to work on&quot; ‚Üí `/project:task-master:next`
- &quot;I need to break this down&quot; ‚Üí `/project:task-master:expand &lt;id&gt;`
- &quot;Show me everything&quot; ‚Üí `/project:task-master:status`
- &quot;Just do it for me&quot; ‚Üí `/project:workflows:auto-implement`

### 4. **Power User Patterns**

**Command Chaining:**
```
/project:task-master:next
/project:task-master:start &lt;id&gt;
/project:workflows:auto-implement
```

**Smart Filters:**
```
/project:task-master:list pending high
/project:task-master:list blocked
/project:task-master:list 1-5 tree
```

**Automation:**
```
/project:workflows:pipeline init ‚Üí expand-all ‚Üí sprint-plan
```

### 5. **Learning Path**

Based on your experience level:

**Beginner Path:**
1. init ‚Üí Create project
2. status ‚Üí Understand state
3. next ‚Üí Find work
4. complete ‚Üí Finish task

**Intermediate Path:**
1. expand ‚Üí Break down complex tasks
2. sprint-plan ‚Üí Organize work
3. complexity-report ‚Üí Understand difficulty
4. validate-deps ‚Üí Ensure consistency

**Advanced Path:**
1. pipeline ‚Üí Chain operations
2. smart-flow ‚Üí Context-aware automation
3. Custom commands ‚Üí Extend the system

### 6. **Try This Now**

Based on what you asked about, try:
[Specific command suggestion based on $ARGUMENTS]

Want to learn more about a specific command?
Type: /project:help &lt;command-name&gt;
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/list-tasks-by-status.toml">description=&quot;List Tasks By Status&quot;
prompt = &quot;&quot;&quot;
List tasks filtered by a specific status.

Arguments: $ARGUMENTS

Parse the status from arguments and list only tasks matching that status.

## Status Options
- `pending` - Not yet started
- `in-progress` - Currently being worked on
- `done` - Completed
- `review` - Awaiting review
- `deferred` - Postponed
- `cancelled` - Cancelled

## Execution

Based on $ARGUMENTS, run:
```bash
task-master list --status=$ARGUMENTS
```

## Enhanced Display

For the filtered results:
- Group by priority within the status
- Show time in current status
- Highlight tasks approaching deadlines
- Display blockers and dependencies
- Suggest next actions for each status group

## Intelligent Insights

Based on the status filter:
- **Pending**: Show recommended start order
- **In-Progress**: Display idle time warnings
- **Done**: Show newly unblocked tasks
- **Review**: Indicate review duration
- **Deferred**: Show reactivation criteria
- **Cancelled**: Display impact analysis
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/list-tasks-with-subtasks.toml">description=&quot;List Tasks With Subtasks&quot;
prompt = &quot;&quot;&quot;
List all tasks including their subtasks in a hierarchical view.

This command shows all tasks with their nested subtasks, providing a complete project overview.

## Execution

Run the Task Master list command with subtasks flag:
```bash
task-master list --with-subtasks
```

## Enhanced Display

I&apos;ll organize the output to show:
- Parent tasks with clear indicators
- Nested subtasks with proper indentation
- Status badges for quick scanning
- Dependencies and blockers highlighted
- Progress indicators for tasks with subtasks

## Smart Filtering

Based on the task hierarchy:
- Show completion percentage for parent tasks
- Highlight blocked subtask chains
- Group by functional areas
- Indicate critical path items

This gives you a complete tree view of your project structure.
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/list-tasks.toml">description=&quot;List Tasks&quot;
prompt = &quot;&quot;&quot;
List tasks with intelligent argument parsing.

Parse arguments to determine filters and display options:
- Status: pending, in-progress, done, review, deferred, cancelled
- Priority: high, medium, low (or priority:high)
- Special: subtasks, tree, dependencies, blocked
- IDs: Direct numbers (e.g., &quot;1,3,5&quot; or &quot;1-5&quot;)
- Complex: &quot;pending high&quot; = pending AND high priority

Arguments: $ARGUMENTS

Let me parse your request intelligently:

1. **Detect Filter Intent**
   - If arguments contain status keywords ‚Üí filter by status
   - If arguments contain priority ‚Üí filter by priority
   - If arguments contain &quot;subtasks&quot; ‚Üí include subtasks
   - If arguments contain &quot;tree&quot; ‚Üí hierarchical view
   - If arguments contain numbers ‚Üí show specific tasks
   - If arguments contain &quot;blocked&quot; ‚Üí show blocked tasks only

2. **Smart Combinations**
   Examples of what I understand:
   - &quot;pending high&quot; ‚Üí pending tasks with high priority
   - &quot;done today&quot; ‚Üí tasks completed today
   - &quot;blocked&quot; ‚Üí tasks with unmet dependencies
   - &quot;1-5&quot; ‚Üí tasks 1 through 5
   - &quot;subtasks tree&quot; ‚Üí hierarchical view with subtasks

3. **Execute Appropriate Query**
   Based on parsed intent, run the most specific task-master command

4. **Enhanced Display**
   - Group by relevant criteria
   - Show most important information first
   - Use visual indicators for quick scanning
   - Include relevant metrics

5. **Intelligent Suggestions**
   Based on what you&apos;re viewing, suggest next actions:
   - Many pending? ‚Üí Suggest priority order
   - Many blocked? ‚Üí Show dependency resolution
   - Looking at specific tasks? ‚Üí Show related tasks
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/next-task.toml">description=&quot;Next Task&quot;
prompt = &quot;&quot;&quot;
Intelligently determine and prepare the next action based on comprehensive context.

This enhanced version of &apos;next&apos; considers:
- Current task states
- Recent activity
- Time constraints
- Dependencies
- Your working patterns

Arguments: $ARGUMENTS

## Intelligent Next Action

### 1. **Context Gathering**
Let me analyze the current situation:
- Active tasks (in-progress)
- Recently completed tasks
- Blocked tasks
- Time since last activity
- Arguments provided: $ARGUMENTS

### 2. **Smart Decision Tree**

**If you have an in-progress task:**
- Has it been idle &gt; 2 hours? ‚Üí Suggest resuming or switching
- Near completion? ‚Üí Show remaining steps
- Blocked? ‚Üí Find alternative task

**If no in-progress tasks:**
- Unblocked high-priority tasks? ‚Üí Start highest
- Complex tasks need breakdown? ‚Üí Suggest expansion
- All tasks blocked? ‚Üí Show dependency resolution

**Special arguments handling:**
- &quot;quick&quot; ‚Üí Find task &lt; 2 hours
- &quot;easy&quot; ‚Üí Find low complexity task
- &quot;important&quot; ‚Üí Find high priority regardless of complexity
- &quot;continue&quot; ‚Üí Resume last worked task

### 3. **Preparation Workflow**

Based on selected task:
1. Show full context and history
2. Set up development environment
3. Run relevant tests
4. Open related files
5. Show similar completed tasks
6. Estimate completion time

### 4. **Alternative Suggestions**

Always provide options:
- Primary recommendation
- Quick alternative (&lt; 1 hour)
- Strategic option (unblocks most tasks)
- Learning option (new technology/skill)

### 5. **Workflow Integration**

Seamlessly connect to:
- `/project:task-master:start [selected]`
- `/project:workflows:auto-implement`
- `/project:task-master:expand` (if complex)
- `/project:utils:complexity-report` (if unsure)

The goal: Zero friction from decision to implementation.
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/parse-prd-with-research.toml">description=&quot;Parse PRD With Research&quot;
prompt = &quot;&quot;&quot;
Parse PRD with enhanced research mode for better task generation.

Arguments: $ARGUMENTS (PRD file path)

## Research-Enhanced Parsing

Uses the research AI provider (typically Perplexity) for more comprehensive task generation with current best practices.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS --research
```

## Research Benefits

1. **Current Best Practices**
   - Latest framework patterns
   - Security considerations
   - Performance optimizations
   - Accessibility requirements

2. **Technical Deep Dive**
   - Implementation approaches
   - Library recommendations
   - Architecture patterns
   - Testing strategies

3. **Comprehensive Coverage**
   - Edge cases consideration
   - Error handling tasks
   - Monitoring setup
   - Deployment tasks

## Enhanced Output

Research mode typically:
- Generates more detailed tasks
- Includes industry standards
- Adds compliance considerations
- Suggests modern tooling

## When to Use

- New technology domains
- Complex requirements
- Regulatory compliance needed
- Best practices crucial
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/parse-prd.toml">description=&quot;Parse PRD&quot;
prompt = &quot;&quot;&quot;
Parse a PRD document to generate tasks.

Arguments: $ARGUMENTS (PRD file path)

## Intelligent PRD Parsing

Analyzes your requirements document and generates a complete task breakdown.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS
```

## Parsing Process

1. **Document Analysis**
   - Extract key requirements
   - Identify technical components
   - Detect dependencies
   - Estimate complexity

2. **Task Generation**
   - Create 10-15 tasks by default
   - Include implementation tasks
   - Add testing tasks
   - Include documentation tasks
   - Set logical dependencies

3. **Smart Enhancements**
   - Group related functionality
   - Set appropriate priorities
   - Add acceptance criteria
   - Include test strategies

## Options

Parse arguments for modifiers:
- Number after filename ‚Üí `--num-tasks`
- `research` ‚Üí Use research mode
- `comprehensive` ‚Üí Generate more tasks

## Post-Generation

After parsing:
1. Display task summary
2. Show dependency graph
3. Suggest task expansion for complex items
4. Recommend sprint planning
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/project-status.toml">description=&quot;Project Status&quot;
prompt = &quot;&quot;&quot;
Enhanced status command with comprehensive project insights.

Arguments: $ARGUMENTS

## Intelligent Status Overview

### 1. **Executive Summary**
Quick dashboard view:
- üèÉ Active work (in-progress tasks)
- üìä Progress metrics (% complete, velocity)
- üöß Blockers and risks
- ‚è±Ô∏è Time analysis (estimated vs actual)
- üéØ Sprint/milestone progress

### 2. **Contextual Analysis**

Based on $ARGUMENTS, focus on:
- &quot;sprint&quot; ‚Üí Current sprint progress and burndown
- &quot;blocked&quot; ‚Üí Dependency chains and resolution paths
- &quot;team&quot; ‚Üí Task distribution and workload
- &quot;timeline&quot; ‚Üí Schedule adherence and projections
- &quot;risk&quot; ‚Üí High complexity or overdue items

### 3. **Smart Insights**

**Workflow Health:**
- Idle tasks (in-progress &gt; 24h without updates)
- Bottlenecks (multiple tasks waiting on same dependency)
- Quick wins (low complexity, high impact)

**Predictive Analytics:**
- Completion projections based on velocity
- Risk of missing deadlines
- Recommended task order for optimal flow

### 4. **Visual Intelligence**

Dynamic visualization based on data:
```
Sprint Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% (16/20 tasks)
Velocity Trend: ‚ÜóÔ∏è +15% this week
Blocked Tasks:  üî¥ 3 critical path items

Priority Distribution:
High:   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 8 tasks (2 blocked)
Medium: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 4 tasks
Low:    ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 2 tasks
```

### 5. **Actionable Recommendations**

Based on analysis:
1. **Immediate actions** (unblock critical path)
2. **Today&apos;s focus** (optimal task sequence)
3. **Process improvements** (recurring patterns)
4. **Resource needs** (skills, time, dependencies)

### 6. **Historical Context**

Compare to previous periods:
- Velocity changes
- Pattern recognition
- Improvement areas
- Success patterns to repeat
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/quick-install-taskmaster.toml">description=&quot;Quick Install TaskMaster&quot;
prompt = &quot;&quot;&quot;
Quick install Task Master globally if not already installed.

Execute this streamlined installation:

```bash
# Check and install in one command
task-master --version 2&gt;/dev/null || npm install -g task-master-ai

# Verify installation
task-master --version

# Quick setup check
task-master models --status || echo &quot;Note: You&apos;ll need to set up an AI provider API key&quot;
```

If you see &quot;command not found&quot; after installation, you may need to:
1. Restart your terminal
2. Or add npm global bin to PATH: `export PATH=$(npm bin -g):$PATH`

Once installed, you can use all the Task Master commands!

Quick test: Run `/taskmaster:help` to see all available commands.
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/remove-all-subtasks.toml">description=&quot;Remove All Subtasks&quot;
prompt = &quot;&quot;&quot;
Clear all subtasks from all tasks globally.

## Global Subtask Clearing

Remove all subtasks across the entire project. Use with extreme caution.

## Execution

```bash
task-master clear-subtasks --all
```

## Pre-Clear Analysis

1. **Project-Wide Summary**
   ```
   Global Subtask Summary
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Total parent tasks: 12
   Total subtasks: 47
   - Completed: 15
   - In-progress: 8
   - Pending: 24

   Work at risk: ~120 hours
   ```

2. **Critical Warnings**
   - In-progress subtasks that will lose work
   - Completed subtasks with valuable history
   - Complex dependency chains
   - Integration test results

## Double Confirmation

```
‚ö†Ô∏è  DESTRUCTIVE OPERATION WARNING ‚ö†Ô∏è
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
This will remove ALL 47 subtasks from your project
Including 8 in-progress and 15 completed subtasks

This action CANNOT be undone

Type &apos;CLEAR ALL SUBTASKS&apos; to confirm:
```

## Smart Safeguards

- Require explicit confirmation phrase
- Create automatic backup
- Log all removed data
- Option to export first

## Use Cases

Valid reasons for global clear:
- Project restructuring
- Major pivot in approach
- Starting fresh breakdown
- Switching to different task organization

## Process

1. Full project analysis
2. Create backup file
3. Show detailed impact
4. Require confirmation
5. Execute removal
6. Generate summary report

## Alternative Suggestions

Before clearing all:
- Export subtasks to file
- Clear only pending subtasks
- Clear by task category
- Archive instead of delete

## Post-Clear Report

```
Global Subtask Clear Complete
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Removed: 47 subtasks from 12 tasks
Backup saved: .taskmaster/backup/subtasks-20240115.json
Parent tasks updated: 12
Time estimates adjusted: Yes

Next steps:
- Review updated task list
- Re-expand complex tasks as needed
- Check project timeline
```
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/remove-dependency.toml">description=&quot;Remove Dependency&quot;
prompt = &quot;&quot;&quot;
Remove a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to remove dependency relationship.

## Removing Dependencies

Removes a dependency relationship, potentially unblocking tasks.

## Argument Parsing

Parse natural language or IDs:
- &quot;remove dependency between 5 and 3&quot;
- &quot;5 no longer needs 3&quot;
- &quot;unblock 5 from 3&quot;
- &quot;5 3&quot; ‚Üí remove dependency of 5 on 3

## Execution

```bash
task-master remove-dependency --id=&lt;task-id&gt; --depends-on=&lt;dependency-id&gt;
```

## Pre-Removal Checks

1. **Verify dependency exists**
2. **Check impact on task flow**
3. **Warn if it breaks logical sequence**
4. **Show what will be unblocked**

## Smart Analysis

Before removing:
- Show why dependency might have existed
- Check if removal makes tasks executable
- Verify no critical path disruption
- Suggest alternative dependencies

## Post-Removal

After removing:
1. Show updated task status
2. List newly unblocked tasks
3. Update project timeline
4. Suggest next actions

## Safety Features

- Confirm if removing critical dependency
- Show tasks that become immediately actionable
- Warn about potential issues
- Keep removal history

## Example

```
/taskmaster:remove-dependency 5 from 3
‚Üí Removed: Task #5 no longer depends on #3
‚Üí Task #5 is now UNBLOCKED and ready to start
‚Üí Warning: Consider if #5 still needs #2 completed first
```
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/remove-subtask.toml">description=&quot;Remove Subtask&quot;
prompt = &quot;&quot;&quot;
Remove a subtask from its parent task.

Arguments: $ARGUMENTS

Parse subtask ID to remove, with option to convert to standalone task.

## Removing Subtasks

Remove a subtask and optionally convert it back to a standalone task.

## Argument Parsing

- &quot;remove subtask 5.1&quot;
- &quot;delete 5.1&quot;
- &quot;convert 5.1 to task&quot; ‚Üí remove and convert
- &quot;5.1 standalone&quot; ‚Üí convert to standalone

## Execution Options

### 1. Delete Subtask
```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt;
```

### 2. Convert to Standalone
```bash
task-master remove-subtask --id=&lt;parentId.subtaskId&gt; --convert
```

## Pre-Removal Checks

1. **Validate Subtask**
   - Verify subtask exists
   - Check completion status
   - Review dependencies

2. **Impact Analysis**
   - Other subtasks that depend on it
   - Parent task implications
   - Data that will be lost

## Removal Process

### For Deletion:
1. Confirm if subtask has work done
2. Update parent task estimates
3. Remove subtask and its data
4. Clean up dependencies

### For Conversion:
1. Assign new standalone task ID
2. Preserve all task data
3. Update dependency references
4. Maintain task history

## Smart Features

- Warn if subtask is in-progress
- Show impact on parent task
- Preserve important data
- Update related estimates

## Example Flows

```
/taskmaster:remove-subtask 5.1
‚Üí Warning: Subtask #5.1 is in-progress
‚Üí This will delete all subtask data
‚Üí Parent task #5 will be updated
Confirm deletion? (y/n)

/taskmaster:remove-subtask 5.1 convert
‚Üí Converting subtask #5.1 to standalone task #89
‚Üí Preserved: All task data and history
‚Üí Updated: 2 dependency references
‚Üí New task #89 is now independent
```

## Post-Removal

- Update parent task status
- Recalculate estimates
- Show updated hierarchy
- Suggest next actions
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/remove-subtasks.toml">description=&quot;Remove Subtasks&quot;
prompt = &quot;&quot;&quot;
Clear all subtasks from a specific task.

Arguments: $ARGUMENTS (task ID)

Remove all subtasks from a parent task at once.

## Clearing Subtasks

Bulk removal of all subtasks from a parent task.

## Execution

```bash
task-master remove-subtasks --id=$ARGUMENTS
```

## Pre-Clear Analysis

1. **Subtask Summary**
   - Number of subtasks
   - Completion status of each
   - Work already done
   - Dependencies affected

2. **Impact Assessment**
   - Data that will be lost
   - Dependencies to be removed
   - Effect on project timeline
   - Parent task implications

## Confirmation Required

```
Remove Subtasks Confirmation
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Parent Task: #5 &quot;Implement user authentication&quot;
Subtasks to remove: 4
- #5.1 &quot;Setup auth framework&quot; (done)
- #5.2 &quot;Create login form&quot; (in-progress)
- #5.3 &quot;Add validation&quot; (pending)
- #5.4 &quot;Write tests&quot; (pending)

‚ö†Ô∏è  This will permanently delete all subtask data
Continue? (y/n)
```

## Smart Features

- Option to convert to standalone tasks
- Backup task data before clearing
- Preserve completed work history
- Update parent task appropriately

## Process

1. List all subtasks for confirmation
2. Check for in-progress work
3. Remove all subtasks
4. Update parent task
5. Clean up dependencies

## Alternative Options

Suggest alternatives:
- Convert important subtasks to tasks
- Keep completed subtasks
- Archive instead of delete
- Export subtask data first

## Post-Clear

- Show updated parent task
- Recalculate time estimates
- Update task complexity
- Suggest next steps

## Example

```
/taskmaster:remove-subtasks 5
‚Üí Found 4 subtasks to remove
‚Üí Warning: Subtask #5.2 is in-progress
‚Üí Cleared all subtasks from task #5
‚Üí Updated parent task estimates
‚Üí Suggestion: Consider re-expanding with better breakdown
```
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/remove-task.toml">description=&quot;Remove Task&quot;
prompt = &quot;&quot;&quot;
Remove a task permanently from the project.

Arguments: $ARGUMENTS (task ID)

Delete a task and handle all its relationships properly.

## Task Removal

Permanently removes a task while maintaining project integrity.

## Argument Parsing

- &quot;remove task 5&quot;
- &quot;delete 5&quot;
- &quot;5&quot; ‚Üí remove task 5
- Can include &quot;-y&quot; for auto-confirm

## Execution

```bash
task-master remove-task --id=&lt;id&gt; [-y]
```

## Pre-Removal Analysis

1. **Task Details**
   - Current status
   - Work completed
   - Time invested
   - Associated data

2. **Relationship Check**
   - Tasks that depend on this
   - Dependencies this task has
   - Subtasks that will be removed
   - Blocking implications

3. **Impact Assessment**
   ```
   Task Removal Impact
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Task: #5 &quot;Implement authentication&quot; (in-progress)
   Status: 60% complete (~8 hours work)

   Will affect:
   - 3 tasks depend on this (will be blocked)
   - Has 4 subtasks (will be deleted)
   - Part of critical path

   ‚ö†Ô∏è  This action cannot be undone
   ```

## Smart Warnings

- Warn if task is in-progress
- Show dependent tasks that will be blocked
- Highlight if part of critical path
- Note any completed work being lost

## Removal Process

1. Show comprehensive impact
2. Require confirmation (unless -y)
3. Update dependent task references
4. Remove task and subtasks
5. Clean up orphaned dependencies
6. Log removal with timestamp

## Alternative Actions

Suggest before deletion:
- Mark as cancelled instead
- Convert to documentation
- Archive task data
- Transfer work to another task

## Post-Removal

- List affected tasks
- Show broken dependencies
- Update project statistics
- Suggest dependency fixes
- Recalculate timeline

## Example Flows

```
/taskmaster:remove-task 5
‚Üí Task #5 is in-progress with 8 hours logged
‚Üí 3 other tasks depend on this
‚Üí Suggestion: Mark as cancelled instead?
Remove anyway? (y/n)

/taskmaster:remove-task 5 -y
‚Üí Removed: Task #5 and 4 subtasks
‚Üí Updated: 3 task dependencies
‚Üí Warning: Tasks #7, #8, #9 now have missing dependency
‚Üí Run /taskmaster:fix-dependencies to resolve
```

## Safety Features

- Confirmation required
- Impact preview
- Removal logging
- Suggest alternatives
- No cascade delete of dependents
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/setup-models.toml">description=&quot;Setup Models&quot;
prompt = &quot;&quot;&quot;
Run interactive setup to configure AI models.

## Interactive Model Configuration

Guides you through setting up AI providers for Task Master.

## Execution

```bash
task-master models --setup
```

## Setup Process

1. **Environment Check**
   - Detect existing API keys
   - Show current configuration
   - Identify missing providers

2. **Provider Selection**
   - Choose main provider (required)
   - Select research provider (recommended)
   - Configure fallback (optional)

3. **API Key Configuration**
   - Prompt for missing keys
   - Validate key format
   - Test connectivity
   - Save configuration

## Smart Recommendations

Based on your needs:
- **For best results**: Claude + Perplexity
- **Budget conscious**: GPT-3.5 + Perplexity
- **Maximum capability**: GPT-4 + Perplexity + Claude fallback

## Configuration Storage

Keys can be stored in:
1. Environment variables (recommended)
2. `.env` file in project
3. Global `.taskmaster/config`

## Post-Setup

After configuration:
- Test each provider
- Show usage examples
- Suggest next steps
- Verify parse-prd works
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/show-task.toml">description=&quot;Show Task&quot;
prompt = &quot;&quot;&quot;
Show detailed task information with rich context and insights.

Arguments: $ARGUMENTS

## Enhanced Task Display

Parse arguments to determine what to show and how.

### 1. **Smart Task Selection**

Based on $ARGUMENTS:
- Number ‚Üí Show specific task with full context
- &quot;current&quot; ‚Üí Show active in-progress task(s)
- &quot;next&quot; ‚Üí Show recommended next task
- &quot;blocked&quot; ‚Üí Show all blocked tasks with reasons
- &quot;critical&quot; ‚Üí Show critical path tasks
- Multiple IDs ‚Üí Comparative view

### 2. **Contextual Information**

For each task, intelligently include:

**Core Details**
- Full task information (id, title, description, details)
- Current status with history
- Test strategy and acceptance criteria
- Priority and complexity analysis

**Relationships**
- Dependencies (what it needs)
- Dependents (what needs it)
- Parent/subtask hierarchy
- Related tasks (similar work)

**Time Intelligence**
- Created/updated timestamps
- Time in current status
- Estimated vs actual time
- Historical completion patterns

### 3. **Visual Enhancements**

```
üìã Task #45: Implement User Authentication
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Status: üü° in-progress (2 hours)
Priority: üî¥ High | Complexity: 73/100

Dependencies: ‚úÖ #41, ‚úÖ #42, ‚è≥ #43 (blocked)
Blocks: #46, #47, #52

Progress: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80% complete

Recent Activity:
- 2h ago: Status changed to in-progress
- 4h ago: Dependency #42 completed
- Yesterday: Task expanded with 3 subtasks
```

### 4. **Intelligent Insights**

Based on task analysis:
- **Risk Assessment**: Complexity vs time remaining
- **Bottleneck Analysis**: Is this blocking critical work?
- **Recommendation**: Suggested approach or concerns
- **Similar Tasks**: How others completed similar work

### 5. **Action Suggestions**

Context-aware next steps:
- If blocked ‚Üí Show how to unblock
- If complex ‚Üí Suggest expansion
- If in-progress ‚Üí Show completion checklist
- If done ‚Üí Show dependent tasks ready to start

### 6. **Multi-Task View**

When showing multiple tasks:
- Common dependencies
- Optimal completion order
- Parallel work opportunities
- Combined complexity analysis
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/smart-workflow.toml">description=&quot;Smart Workflow&quot;
prompt = &quot;&quot;&quot;
Execute an intelligent workflow based on current project state and recent commands.

This command analyzes:
1. Recent commands you&apos;ve run
2. Current project state
3. Time of day / day of week
4. Your working patterns

Arguments: $ARGUMENTS

## Intelligent Workflow Selection

Based on context, I&apos;ll determine the best workflow:

### Context Analysis
- Previous command executed
- Current task states
- Unfinished work from last session
- Your typical patterns

### Smart Execution

If last command was:
- `status` ‚Üí Likely starting work ‚Üí Run daily standup
- `complete` ‚Üí Task finished ‚Üí Find next task
- `list pending` ‚Üí Planning ‚Üí Suggest sprint planning
- `expand` ‚Üí Breaking down work ‚Üí Show complexity analysis
- `init` ‚Üí New project ‚Üí Show onboarding workflow

If no recent commands:
- Morning? ‚Üí Daily standup workflow
- Many pending tasks? ‚Üí Sprint planning
- Tasks blocked? ‚Üí Dependency resolution
- Friday? ‚Üí Weekly review

### Workflow Composition

I&apos;ll chain appropriate commands:
1. Analyze current state
2. Execute primary workflow
3. Suggest follow-up actions
4. Prepare environment for coding

### Learning Mode

This command learns from your patterns:
- Track command sequences
- Note time preferences
- Remember common workflows
- Adapt to your style

Example flows detected:
- Morning: standup ‚Üí next ‚Üí start
- After lunch: status ‚Üí continue task
- End of day: complete ‚Üí commit ‚Üí status
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/sync-readme.toml">description=&quot;Sync README&quot;
prompt = &quot;&quot;&quot;
Export tasks to README.md with professional formatting.

Arguments: $ARGUMENTS

Generate a well-formatted README with current task information.

## README Synchronization

Creates or updates README.md with beautifully formatted task information.

## Argument Parsing

Optional filters:
- &quot;pending&quot; ‚Üí Only pending tasks
- &quot;with-subtasks&quot; ‚Üí Include subtask details
- &quot;by-priority&quot; ‚Üí Group by priority
- &quot;sprint&quot; ‚Üí Current sprint only

## Execution

```bash
task-master sync-readme [--with-subtasks] [--status=&lt;status&gt;]
```

## README Generation

### 1. **Project Header**
```markdown
# Project Name

## üìã Task Progress

Last Updated: 2024-01-15 10:30 AM

### Summary
- Total Tasks: 45
- Completed: 15 (33%)
- In Progress: 5 (11%)
- Pending: 25 (56%)
```

### 2. **Task Sections**
Organized by status or priority:
- Progress indicators
- Task descriptions
- Dependencies noted
- Time estimates

### 3. **Visual Elements**
- Progress bars
- Status badges
- Priority indicators
- Completion checkmarks

## Smart Features

1. **Intelligent Grouping**
   - By feature area
   - By sprint/milestone
   - By assigned developer
   - By priority

2. **Progress Tracking**
   - Overall completion
   - Sprint velocity
   - Burndown indication
   - Time tracking

3. **Formatting Options**
   - GitHub-flavored markdown
   - Task checkboxes
   - Collapsible sections
   - Table format available

## Example Output

```markdown
## üöÄ Current Sprint

### In Progress
- [ ] üîÑ #5 **Implement user authentication** (60% complete)
  - Dependencies: API design (#3 ‚úÖ)
  - Subtasks: 4 (2 completed)
  - Est: 8h / Spent: 5h

### Pending (High Priority)
- [ ] ‚ö° #8 **Create dashboard UI**
  - Blocked by: #5
  - Complexity: High
  - Est: 12h
```

## Customization

Based on arguments:
- Include/exclude sections
- Detail level control
- Custom grouping
- Filter by criteria

## Post-Sync

After generation:
1. Show diff preview
2. Backup existing README
3. Write new content
4. Commit reminder
5. Update timestamp

## Integration

Works well with:
- Git workflows
- CI/CD pipelines
- Project documentation
- Team updates
- Client reports
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/tm-main.toml">description=&quot;Task Master Main&quot;
prompt = &quot;&quot;&quot;
# Task Master Command Reference

Comprehensive command structure for Task Master integration with Claude Code.

## Command Organization

Commands are organized hierarchically to match Task Master&apos;s CLI structure while providing enhanced Claude Code integration.

## Project Setup &amp; Configuration

### `/taskmaster:init`
- `init-project` - Initialize new project (handles PRD files intelligently)
- `init-project-quick` - Quick setup with auto-confirmation (-y flag)

### `/taskmaster:models`
- `view-models` - View current AI model configuration
- `setup-models` - Interactive model configuration
- `set-main` - Set primary generation model
- `set-research` - Set research model
- `set-fallback` - Set fallback model

## Task Generation

### `/taskmaster:parse-prd`
- `parse-prd` - Generate tasks from PRD document
- `parse-prd-with-research` - Enhanced parsing with research mode

### `/taskmaster:generate`
- `generate-tasks` - Create individual task files from tasks.json

## Task Management

### `/taskmaster:list`
- `list-tasks` - Smart listing with natural language filters
- `list-tasks-with-subtasks` - Include subtasks in hierarchical view
- `list-tasks-by-status` - Filter by specific status

### `/taskmaster:set-status`
- `to-pending` - Reset task to pending
- `to-in-progress` - Start working on task
- `to-done` - Mark task complete
- `to-review` - Submit for review
- `to-deferred` - Defer task
- `to-cancelled` - Cancel task

### `/taskmaster:sync-readme`
- `sync-readme` - Export tasks to README.md with formatting

### `/taskmaster:update`
- `update-task` - Update tasks with natural language
- `update-tasks-from-id` - Update multiple tasks from a starting point
- `update-single-task` - Update specific task

### `/taskmaster:add-task`
- `add-task` - Add new task with AI assistance

### `/taskmaster:remove-task`
- `remove-task` - Remove task with confirmation

## Subtask Management

### `/taskmaster:add-subtask`
- `add-subtask` - Add new subtask to parent
- `convert-task-to-subtask` - Convert existing task to subtask

### `/taskmaster:remove-subtask`
- `remove-subtask` - Remove subtask (with optional conversion)

### `/taskmaster:clear-subtasks`
- `clear-subtasks` - Clear subtasks from specific task
- `clear-all-subtasks` - Clear all subtasks globally

## Task Analysis &amp; Breakdown

### `/taskmaster:analyze-complexity`
- `analyze-complexity` - Analyze and generate expansion recommendations

### `/taskmaster:complexity-report`
- `complexity-report` - Display complexity analysis report

### `/taskmaster:expand`
- `expand-task` - Break down specific task
- `expand-all-tasks` - Expand all eligible tasks
- `with-research` - Enhanced expansion

## Task Navigation

### `/taskmaster:next`
- `next-task` - Intelligent next task recommendation

### `/taskmaster:show`
- `show-task` - Display detailed task information

### `/taskmaster:status`
- `project-status` - Comprehensive project dashboard

## Dependency Management

### `/taskmaster:add-dependency`
- `add-dependency` - Add task dependency

### `/taskmaster:remove-dependency`
- `remove-dependency` - Remove task dependency

### `/taskmaster:validate-dependencies`
- `validate-dependencies` - Check for dependency issues

### `/taskmaster:fix-dependencies`
- `fix-dependencies` - Automatically fix dependency problems

## Workflows &amp; Automation

### `/taskmaster:workflows`
- `smart-workflow` - Context-aware intelligent workflow execution
- `command-pipeline` - Chain multiple commands together
- `auto-implement-tasks` - Advanced auto-implementation with code generation

## Utilities

### `/taskmaster:utils`
- `analyze-project` - Deep project analysis and insights

### `/taskmaster:setup`
- `install-taskmaster` - Comprehensive installation guide
- `quick-install-taskmaster` - One-line global installation

## Usage Patterns

### Natural Language
Most commands accept natural language arguments:
```
/taskmaster:add-task create user authentication system
/taskmaster:update mark all API tasks as high priority
/taskmaster:list show blocked tasks
```

### ID-Based Commands
Commands requiring IDs intelligently parse from $ARGUMENTS:
```
/taskmaster:show 45
/taskmaster:expand 23
/taskmaster:set-status/to-done 67
```

### Smart Defaults
Commands provide intelligent defaults and suggestions based on context.
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/to-cancelled.toml">description=&quot;To Cancelled&quot;
prompt = &quot;&quot;&quot;
Cancel a task permanently.

Arguments: $ARGUMENTS (task ID)

## Cancelling a Task

This status indicates a task is no longer needed and won&apos;t be completed.

## Valid Reasons for Cancellation

- Requirements changed
- Feature deprecated
- Duplicate of another task
- Strategic pivot
- Technical approach invalidated

## Pre-Cancellation Checks

1. Confirm no critical dependencies
2. Check for partial implementation
3. Verify cancellation rationale
4. Document lessons learned

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=cancelled
```

## Cancellation Impact

When cancelling:
1. **Dependency Updates**
   - Notify dependent tasks
   - Update project scope
   - Recalculate timelines

2. **Clean-up Actions**
   - Remove related branches
   - Archive any work done
   - Update documentation
   - Close related issues

3. **Learning Capture**
   - Document why cancelled
   - Note what was learned
   - Update estimation models
   - Prevent future duplicates

## Historical Preservation

- Keep for reference
- Tag with cancellation reason
- Link to replacement if any
- Maintain audit trail
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/to-deferred.toml">description=&quot;To Deferred&quot;
prompt = &quot;&quot;&quot;
Defer a task for later consideration.

Arguments: $ARGUMENTS (task ID)

## Deferring a Task

This status indicates a task is valid but not currently actionable or prioritized.

## Valid Reasons for Deferral

- Waiting for external dependencies
- Reprioritized for future sprint
- Blocked by technical limitations
- Resource constraints
- Strategic timing considerations

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=deferred
```

## Deferral Management

When deferring:
1. **Document Reason**
   - Capture why it&apos;s being deferred
   - Set reactivation criteria
   - Note any partial work completed

2. **Impact Analysis**
   - Check dependent tasks
   - Update project timeline
   - Notify affected stakeholders

3. **Future Planning**
   - Set review reminders
   - Tag for specific milestone
   - Preserve context for reactivation
   - Link to blocking issues

## Smart Tracking

- Monitor deferral duration
- Alert when criteria met
- Prevent scope creep
- Regular review cycles
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/to-done.toml">description=&quot;To Done&quot;
prompt = &quot;&quot;&quot;
Mark a task as completed.

Arguments: $ARGUMENTS (task ID)

## Completing a Task

This command validates task completion and updates project state intelligently.

## Pre-Completion Checks

1. Verify test strategy was followed
2. Check if all subtasks are complete
3. Validate acceptance criteria met
4. Ensure code is committed

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=done
```

## Post-Completion Actions

1. **Update Dependencies**
   - Identify newly unblocked tasks
   - Update sprint progress
   - Recalculate project timeline

2. **Documentation**
   - Generate completion summary
   - Update CLAUDE.md with learnings
   - Log implementation approach

3. **Next Steps**
   - Show newly available tasks
   - Suggest logical next task
   - Update velocity metrics

## Celebration &amp; Learning

- Show impact of completion
- Display unblocked work
- Recognize achievement
- Capture lessons learned
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/to-in-progress.toml">description=&quot;To In Progress&quot;
prompt = &quot;&quot;&quot;
Start working on a task by setting its status to in-progress.

Arguments: $ARGUMENTS (task ID)

## Starting Work on Task

This command does more than just change status - it prepares your environment for productive work.

## Pre-Start Checks

1. Verify dependencies are met
2. Check if another task is already in-progress
3. Ensure task details are complete
4. Validate test strategy exists

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=in-progress
```

## Environment Setup

After setting to in-progress:
1. Create/checkout appropriate git branch
2. Open relevant documentation
3. Set up test watchers if applicable
4. Display task details and acceptance criteria
5. Show similar completed tasks for reference

## Smart Suggestions

- Estimated completion time based on complexity
- Related files from similar tasks
- Potential blockers to watch for
- Recommended first steps
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/to-pending.toml">description=&quot;To Pending&quot;
prompt = &quot;&quot;&quot;
Set a task&apos;s status to pending.

Arguments: $ARGUMENTS (task ID)

## Setting Task to Pending

This moves a task back to the pending state, useful for:
- Resetting erroneously started tasks
- Deferring work that was prematurely begun
- Reorganizing sprint priorities

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=pending
```

## Validation

Before setting to pending:
- Warn if task is currently in-progress
- Check if this will block other tasks
- Suggest documenting why it&apos;s being reset
- Preserve any work already done

## Smart Actions

After setting to pending:
- Update sprint planning if needed
- Notify about freed resources
- Suggest priority reassessment
- Log the status change with context
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/to-review.toml">description=&quot;To Review&quot;
prompt = &quot;&quot;&quot;
Set a task&apos;s status to review.

Arguments: $ARGUMENTS (task ID)

## Marking Task for Review

This status indicates work is complete but needs verification before final approval.

## When to Use Review Status

- Code complete but needs peer review
- Implementation done but needs testing
- Documentation written but needs proofreading
- Design complete but needs stakeholder approval

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=review
```

## Review Preparation

When setting to review:
1. **Generate Review Checklist**
   - Link to PR/MR if applicable
   - Highlight key changes
   - Note areas needing attention
   - Include test results

2. **Documentation**
   - Update task with review notes
   - Link relevant artifacts
   - Specify reviewers if known

3. **Smart Actions**
   - Create review reminders
   - Track review duration
   - Suggest reviewers based on expertise
   - Prepare rollback plan if needed
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/update-single-task.toml">description=&quot;Update Single Task&quot;
prompt = &quot;&quot;&quot;
Update a single specific task with new information.

Arguments: $ARGUMENTS

Parse task ID and update details.

## Single Task Update

Precisely update one task with AI assistance to maintain consistency.

## Argument Parsing

Natural language updates:
- &quot;5: add caching requirement&quot;
- &quot;update 5 to include error handling&quot;
- &quot;task 5 needs rate limiting&quot;
- &quot;5 change priority to high&quot;

## Execution

```bash
task-master update-task --id=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Types

### 1. **Content Updates**
- Enhance description
- Add requirements
- Clarify details
- Update acceptance criteria

### 2. **Metadata Updates**
- Change priority
- Adjust time estimates
- Update complexity
- Modify dependencies

### 3. **Strategic Updates**
- Revise approach
- Change test strategy
- Update implementation notes
- Adjust subtask needs

## AI-Powered Updates

The AI:
1. **Understands Context**
   - Reads current task state
   - Identifies update intent
   - Maintains consistency
   - Preserves important info

2. **Applies Changes**
   - Updates relevant fields
   - Keeps style consistent
   - Adds without removing
   - Enhances clarity

3. **Validates Results**
   - Checks coherence
   - Verifies completeness
   - Maintains relationships
   - Suggests related updates

## Example Updates

```
/taskmaster:update/single 5: add rate limiting
‚Üí Updating Task #5: &quot;Implement API endpoints&quot;

Current: Basic CRUD endpoints
Adding: Rate limiting requirements

Updated sections:
‚úì Description: Added rate limiting mention
‚úì Details: Added specific limits (100/min)
‚úì Test Strategy: Added rate limit tests
‚úì Complexity: Increased from 5 to 6
‚úì Time Estimate: Increased by 2 hours

Suggestion: Also update task #6 (API Gateway) for consistency?
```

## Smart Features

1. **Incremental Updates**
   - Adds without overwriting
   - Preserves work history
   - Tracks what changed
   - Shows diff view

2. **Consistency Checks**
   - Related task alignment
   - Subtask compatibility
   - Dependency validity
   - Timeline impact

3. **Update History**
   - Timestamp changes
   - Track who/what updated
   - Reason for update
   - Previous versions

## Field-Specific Updates

Quick syntax for specific fields:
- &quot;5 priority:high&quot; ‚Üí Update priority only
- &quot;5 add-time:4h&quot; ‚Üí Add to time estimate
- &quot;5 status:review&quot; ‚Üí Change status
- &quot;5 depends:3,4&quot; ‚Üí Add dependencies

## Post-Update

- Show updated task
- Highlight changes
- Check related tasks
- Update suggestions
- Timeline adjustments
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/update-task.toml">description=&quot;Update Task&quot;
prompt = &quot;&quot;&quot;
Update tasks with intelligent field detection and bulk operations.

Arguments: $ARGUMENTS

## Intelligent Task Updates

Parse arguments to determine update intent and execute smartly.

### 1. **Natural Language Processing**

Understand update requests like:
- &quot;mark 23 as done&quot; ‚Üí Update status to done
- &quot;increase priority of 45&quot; ‚Üí Set priority to high
- &quot;add dependency on 12 to task 34&quot; ‚Üí Add dependency
- &quot;tasks 20-25 need review&quot; ‚Üí Bulk status update
- &quot;all API tasks high priority&quot; ‚Üí Pattern-based update

### 2. **Smart Field Detection**

Automatically detect what to update:
- Status keywords: done, complete, start, pause, review
- Priority changes: urgent, high, low, deprioritize
- Dependency updates: depends on, blocks, after
- Assignment: assign to, owner, responsible
- Time: estimate, spent, deadline

### 3. **Bulk Operations**

Support for multiple task updates:
```
Examples:
- &quot;complete tasks 12, 15, 18&quot;
- &quot;all pending auth tasks to in-progress&quot;
- &quot;increase priority for tasks blocking 45&quot;
- &quot;defer all documentation tasks&quot;
```

### 4. **Contextual Validation**

Before updating, check:
- Status transitions are valid
- Dependencies don&apos;t create cycles
- Priority changes make sense
- Bulk updates won&apos;t break project flow

Show preview:
```
Update Preview:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Tasks to update: #23, #24, #25
Change: status ‚Üí in-progress
Impact: Will unblock tasks #30, #31
Warning: Task #24 has unmet dependencies
```

### 5. **Smart Suggestions**

Based on update:
- Completing task? ‚Üí Show newly unblocked tasks
- Changing priority? ‚Üí Show impact on sprint
- Adding dependency? ‚Üí Check for conflicts
- Bulk update? ‚Üí Show summary of changes

### 6. **Workflow Integration**

After updates:
- Auto-update dependent task states
- Trigger status recalculation
- Update sprint/milestone progress
- Log changes with context

Result: Flexible, intelligent task updates with safety checks.
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/update-tasks-from-id.toml">description=&quot;Update Tasks From ID&quot;
prompt = &quot;&quot;&quot;
Update multiple tasks starting from a specific ID.

Arguments: $ARGUMENTS

Parse starting task ID and update context.

## Bulk Task Updates

Update multiple related tasks based on new requirements or context changes.

## Argument Parsing

- &quot;from 5: add security requirements&quot;
- &quot;5 onwards: update API endpoints&quot;
- &quot;starting at 5: change to use new framework&quot;

## Execution

```bash
task-master update --from=&lt;id&gt; --prompt=&quot;&lt;context&gt;&quot;
```

## Update Process

### 1. **Task Selection**
Starting from specified ID:
- Include the task itself
- Include all dependent tasks
- Include related subtasks
- Smart boundary detection

### 2. **Context Application**
AI analyzes the update context and:
- Identifies what needs changing
- Maintains consistency
- Preserves completed work
- Updates related information

### 3. **Intelligent Updates**
- Modify descriptions appropriately
- Update test strategies
- Adjust time estimates
- Revise dependencies if needed

## Smart Features

1. **Scope Detection**
   - Find natural task groupings
   - Identify related features
   - Stop at logical boundaries
   - Avoid over-updating

2. **Consistency Maintenance**
   - Keep naming conventions
   - Preserve relationships
   - Update cross-references
   - Maintain task flow

3. **Change Preview**
   ```
   Bulk Update Preview
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Starting from: Task #5
   Tasks to update: 8 tasks + 12 subtasks

   Context: &quot;add security requirements&quot;

   Changes will include:
   - Add security sections to descriptions
   - Update test strategies for security
   - Add security-related subtasks where needed
   - Adjust time estimates (+20% average)

   Continue? (y/n)
   ```

## Example Updates

```
/taskmaster:update-tasks-from-id 5: change database to PostgreSQL
‚Üí Analyzing impact starting from task #5
‚Üí Found 6 related tasks to update
‚Üí Updates will maintain consistency
‚Üí Preview changes? (y/n)

Applied updates:
‚úì Task #5: Updated connection logic references
‚úì Task #6: Changed migration approach
‚úì Task #7: Updated query syntax notes
‚úì Task #8: Revised testing strategy
‚úì Task #9: Updated deployment steps
‚úì Task #12: Changed backup procedures
```

## Safety Features

- Preview all changes
- Selective confirmation
- Rollback capability
- Change logging
- Validation checks

## Post-Update

- Summary of changes
- Consistency verification
- Suggest review tasks
- Update timeline if needed
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/validate-dependencies.toml">description=&quot;Validate Dependencies&quot;
prompt = &quot;&quot;&quot;
Validate all task dependencies for issues.

## Dependency Validation

Comprehensive check for dependency problems across the entire project.

## Execution

```bash
task-master validate-dependencies
```

## Validation Checks

1. **Circular Dependencies**
   - A depends on B, B depends on A
   - Complex circular chains
   - Self-dependencies

2. **Missing Dependencies**
   - References to non-existent tasks
   - Deleted task references
   - Invalid task IDs

3. **Logical Issues**
   - Completed tasks depending on pending
   - Cancelled tasks in dependency chains
   - Impossible sequences

4. **Complexity Warnings**
   - Over-complex dependency chains
   - Too many dependencies per task
   - Bottleneck tasks

## Smart Analysis

The validation provides:
- Visual dependency graph
- Critical path analysis
- Bottleneck identification
- Suggested optimizations

## Report Format

```
Dependency Validation Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ No circular dependencies found
‚ö†Ô∏è  2 warnings found:
   - Task #23 has 7 dependencies (consider breaking down)
   - Task #45 blocks 5 other tasks (potential bottleneck)
‚ùå 1 error found:
   - Task #67 depends on deleted task #66

Critical Path: #1 ‚Üí #5 ‚Üí #23 ‚Üí #45 ‚Üí #50 (15 days)
```

## Actionable Output

For each issue found:
- Clear description
- Impact assessment
- Suggested fix
- Command to resolve

## Next Steps

After validation:
- Run `/taskmaster:fix-dependencies` to auto-fix
- Manually adjust problematic dependencies
- Rerun to verify fixes
&quot;&quot;&quot;</file><file path="fe/.gemini/commands/tm/view-models.toml">description=&quot;View Models&quot;
prompt = &quot;&quot;&quot;
View current AI model configuration.

## Model Configuration Display

Shows the currently configured AI providers and models for Task Master.

## Execution

```bash
task-master models
```

## Information Displayed

1. **Main Provider**
   - Model ID and name
   - API key status (configured/missing)
   - Usage: Primary task generation

2. **Research Provider**
   - Model ID and name
   - API key status
   - Usage: Enhanced research mode

3. **Fallback Provider**
   - Model ID and name
   - API key status
   - Usage: Backup when main fails

## Visual Status

```
Task Master AI Model Configuration
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Main:     ‚úÖ claude-3-5-sonnet (configured)
Research: ‚úÖ perplexity-sonar (configured)
Fallback: ‚ö†Ô∏è  Not configured (optional)

Available Models:
- claude-3-5-sonnet
- gpt-4-turbo
- gpt-3.5-turbo
- perplexity-sonar
```

## Next Actions

Based on configuration:
- If missing API keys ‚Üí Suggest setup
- If no research model ‚Üí Explain benefits
- If all configured ‚Üí Show usage tips
&quot;&quot;&quot;</file><file path="fe/.gemini/settings.json">{
  &quot;mcpServers&quot;: {
    &quot;task-master-ai&quot;: {
      &quot;command&quot;: &quot;npx&quot;,
      &quot;args&quot;: [&quot;-y&quot;, &quot;task-master-ai&quot;],
      &quot;env&quot;: {
        &quot;TASK_MASTER_TOOLS&quot;: &quot;core&quot;,
        &quot;ANTHROPIC_API_KEY&quot;: &quot;YOUR_ANTHROPIC_API_KEY_HERE&quot;,
        &quot;PERPLEXITY_API_KEY&quot;: &quot;YOUR_PERPLEXITY_API_KEY_HERE&quot;,
        &quot;OPENAI_API_KEY&quot;: &quot;YOUR_OPENAI_KEY_HERE&quot;,
        &quot;GOOGLE_API_KEY&quot;: &quot;YOUR_GOOGLE_KEY_HERE&quot;,
        &quot;XAI_API_KEY&quot;: &quot;YOUR_XAI_KEY_HERE&quot;,
        &quot;OPENROUTER_API_KEY&quot;: &quot;YOUR_OPENROUTER_KEY_HERE&quot;,
        &quot;MISTRAL_API_KEY&quot;: &quot;YOUR_MISTRAL_KEY_HERE&quot;,
        &quot;AZURE_OPENAI_API_KEY&quot;: &quot;YOUR_AZURE_KEY_HERE&quot;,
        &quot;OLLAMA_API_KEY&quot;: &quot;YOUR_OLLAMA_API_KEY_HERE&quot;
      }
    }
  }
}</file><file path="fe/.taskmaster/templates/example_prd_rpg.txt">&lt;rpg-method&gt;
# Repository Planning Graph (RPG) Method - PRD Template

This template teaches you (AI or human) how to create structured, dependency-aware PRDs using the RPG methodology from Microsoft Research. The key insight: separate WHAT (functional) from HOW (structural), then connect them with explicit dependencies.

## Core Principles

1. **Dual-Semantics**: Think functional (capabilities) AND structural (code organization) separately, then map them
2. **Explicit Dependencies**: Never assume - always state what depends on what
3. **Topological Order**: Build foundation first, then layers on top
4. **Progressive Refinement**: Start broad, refine iteratively

## How to Use This Template

- Follow the instructions in each `&lt;instruction&gt;` block
- Look at `&lt;example&gt;` blocks to see good vs bad patterns
- Fill in the content sections with your project details
- The AI reading this will learn the RPG method by following along
- Task Master will parse the resulting PRD into dependency-aware tasks

## Recommended Tools for Creating PRDs

When using this template to **create** a PRD (not parse it), use **code-context-aware AI assistants** for best results:

**Why?** The AI needs to understand your existing codebase to make good architectural decisions about modules, dependencies, and integration points.

**Recommended tools:**
- **Claude Code** (claude-code CLI) - Best for structured reasoning and large contexts
- **Cursor/Windsurf** - IDE integration with full codebase context
- **Gemini CLI** (gemini-cli) - Massive context window for large codebases
- **Codex/Grok CLI** - Strong code generation with context awareness

**Note:** Once your PRD is created, `task-master parse-prd` works with any configured AI model - it just needs to read the PRD text itself, not your codebase.
&lt;/rpg-method&gt;

---

&lt;overview&gt;
&lt;instruction&gt;
Start with the problem, not the solution. Be specific about:
- What pain point exists?
- Who experiences it?
- Why existing solutions don&apos;t work?
- What success looks like (measurable outcomes)?

Keep this section focused - don&apos;t jump into implementation details yet.
&lt;/instruction&gt;

## Problem Statement
[Describe the core problem. Be concrete about user pain points.]

## Target Users
[Define personas, their workflows, and what they&apos;re trying to achieve.]

## Success Metrics
[Quantifiable outcomes. Examples: &quot;80% task completion via autopilot&quot;, &quot;&lt; 5% manual intervention rate&quot;]

&lt;/overview&gt;

---

&lt;functional-decomposition&gt;
&lt;instruction&gt;
Now think about CAPABILITIES (what the system DOES), not code structure yet.

Step 1: Identify high-level capability domains
- Think: &quot;What major things does this system do?&quot;
- Examples: Data Management, Core Processing, Presentation Layer

Step 2: For each capability, enumerate specific features
- Use explore-exploit strategy:
  * Exploit: What features are REQUIRED for core value?
  * Explore: What features make this domain COMPLETE?

Step 3: For each feature, define:
- Description: What it does in one sentence
- Inputs: What data/context it needs
- Outputs: What it produces/returns
- Behavior: Key logic or transformations

&lt;example type=&quot;good&quot;&gt;
Capability: Data Validation
  Feature: Schema validation
    - Description: Validate JSON payloads against defined schemas
    - Inputs: JSON object, schema definition
    - Outputs: Validation result (pass/fail) + error details
    - Behavior: Iterate fields, check types, enforce constraints

  Feature: Business rule validation
    - Description: Apply domain-specific validation rules
    - Inputs: Validated data object, rule set
    - Outputs: Boolean + list of violated rules
    - Behavior: Execute rules sequentially, short-circuit on failure
&lt;/example&gt;

&lt;example type=&quot;bad&quot;&gt;
Capability: validation.js
  (Problem: This is a FILE, not a CAPABILITY. Mixing structure into functional thinking.)

Capability: Validation
  Feature: Make sure data is good
  (Problem: Too vague. No inputs/outputs. Not actionable.)
&lt;/example&gt;
&lt;/instruction&gt;

## Capability Tree

### Capability: [Name]
[Brief description of what this capability domain covers]

#### Feature: [Name]
- **Description**: [One sentence]
- **Inputs**: [What it needs]
- **Outputs**: [What it produces]
- **Behavior**: [Key logic]

#### Feature: [Name]
- **Description**:
- **Inputs**:
- **Outputs**:
- **Behavior**:

### Capability: [Name]
...

&lt;/functional-decomposition&gt;

---

&lt;structural-decomposition&gt;
&lt;instruction&gt;
NOW think about code organization. Map capabilities to actual file/folder structure.

Rules:
1. Each capability maps to a module (folder or file)
2. Features within a capability map to functions/classes
3. Use clear module boundaries - each module has ONE responsibility
4. Define what each module exports (public interface)

The goal: Create a clear mapping between &quot;what it does&quot; (functional) and &quot;where it lives&quot; (structural).

&lt;example type=&quot;good&quot;&gt;
Capability: Data Validation
  ‚Üí Maps to: src/validation/
    ‚îú‚îÄ‚îÄ schema-validator.js      (Schema validation feature)
    ‚îú‚îÄ‚îÄ rule-validator.js         (Business rule validation feature)
    ‚îî‚îÄ‚îÄ index.js                  (Public exports)

Exports:
  - validateSchema(data, schema)
  - validateRules(data, rules)
&lt;/example&gt;

&lt;example type=&quot;bad&quot;&gt;
Capability: Data Validation
  ‚Üí Maps to: src/utils.js
  (Problem: &quot;utils&quot; is not a clear module boundary. Where do I find validation logic?)

Capability: Data Validation
  ‚Üí Maps to: src/validation/everything.js
  (Problem: One giant file. Features should map to separate files for maintainability.)
&lt;/example&gt;
&lt;/instruction&gt;

## Repository Structure

```
project-root/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ [module-name]/       # Maps to: [Capability Name]
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [file].js        # Maps to: [Feature Name]
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js         # Public exports
‚îÇ   ‚îî‚îÄ‚îÄ [module-name]/
‚îú‚îÄ‚îÄ tests/
‚îî‚îÄ‚îÄ docs/
```

## Module Definitions

### Module: [Name]
- **Maps to capability**: [Capability from functional decomposition]
- **Responsibility**: [Single clear purpose]
- **File structure**:
  ```
  module-name/
  ‚îú‚îÄ‚îÄ feature1.js
  ‚îú‚îÄ‚îÄ feature2.js
  ‚îî‚îÄ‚îÄ index.js
  ```
- **Exports**:
  - `functionName()` - [what it does]
  - `ClassName` - [what it does]

&lt;/structural-decomposition&gt;

---

&lt;dependency-graph&gt;
&lt;instruction&gt;
This is THE CRITICAL SECTION for Task Master parsing.

Define explicit dependencies between modules. This creates the topological order for task execution.

Rules:
1. List modules in dependency order (foundation first)
2. For each module, state what it depends on
3. Foundation modules should have NO dependencies
4. Every non-foundation module should depend on at least one other module
5. Think: &quot;What must EXIST before I can build this module?&quot;

&lt;example type=&quot;good&quot;&gt;
Foundation Layer (no dependencies):
  - error-handling: No dependencies
  - config-manager: No dependencies
  - base-types: No dependencies

Data Layer:
  - schema-validator: Depends on [base-types, error-handling]
  - data-ingestion: Depends on [schema-validator, config-manager]

Core Layer:
  - algorithm-engine: Depends on [base-types, error-handling]
  - pipeline-orchestrator: Depends on [algorithm-engine, data-ingestion]
&lt;/example&gt;

&lt;example type=&quot;bad&quot;&gt;
- validation: Depends on API
- API: Depends on validation
(Problem: Circular dependency. This will cause build/runtime issues.)

- user-auth: Depends on everything
(Problem: Too many dependencies. Should be more focused.)
&lt;/example&gt;
&lt;/instruction&gt;

## Dependency Chain

### Foundation Layer (Phase 0)
No dependencies - these are built first.

- **[Module Name]**: [What it provides]
- **[Module Name]**: [What it provides]

### [Layer Name] (Phase 1)
- **[Module Name]**: Depends on [[module-from-phase-0], [module-from-phase-0]]
- **[Module Name]**: Depends on [[module-from-phase-0]]

### [Layer Name] (Phase 2)
- **[Module Name]**: Depends on [[module-from-phase-1], [module-from-foundation]]

[Continue building up layers...]

&lt;/dependency-graph&gt;

---

&lt;implementation-roadmap&gt;
&lt;instruction&gt;
Turn the dependency graph into concrete development phases.

Each phase should:
1. Have clear entry criteria (what must exist before starting)
2. Contain tasks that can be parallelized (no inter-dependencies within phase)
3. Have clear exit criteria (how do we know phase is complete?)
4. Build toward something USABLE (not just infrastructure)

Phase ordering follows topological sort of dependency graph.

&lt;example type=&quot;good&quot;&gt;
Phase 0: Foundation
  Entry: Clean repository
  Tasks:
    - Implement error handling utilities
    - Create base type definitions
    - Setup configuration system
  Exit: Other modules can import foundation without errors

Phase 1: Data Layer
  Entry: Phase 0 complete
  Tasks:
    - Implement schema validator (uses: base types, error handling)
    - Build data ingestion pipeline (uses: validator, config)
  Exit: End-to-end data flow from input to validated output
&lt;/example&gt;

&lt;example type=&quot;bad&quot;&gt;
Phase 1: Build Everything
  Tasks:
    - API
    - Database
    - UI
    - Tests
  (Problem: No clear focus. Too broad. Dependencies not considered.)
&lt;/example&gt;
&lt;/instruction&gt;

## Development Phases

### Phase 0: [Foundation Name]
**Goal**: [What foundational capability this establishes]

**Entry Criteria**: [What must be true before starting]

**Tasks**:
- [ ] [Task name] (depends on: [none or list])
  - Acceptance criteria: [How we know it&apos;s done]
  - Test strategy: [What tests prove it works]

- [ ] [Task name] (depends on: [none or list])

**Exit Criteria**: [Observable outcome that proves phase complete]

**Delivers**: [What can users/developers do after this phase?]

---

### Phase 1: [Layer Name]
**Goal**:

**Entry Criteria**: Phase 0 complete

**Tasks**:
- [ ] [Task name] (depends on: [[tasks-from-phase-0]])
- [ ] [Task name] (depends on: [[tasks-from-phase-0]])

**Exit Criteria**:

**Delivers**:

---

[Continue with more phases...]

&lt;/implementation-roadmap&gt;

---

&lt;test-strategy&gt;
&lt;instruction&gt;
Define how testing will be integrated throughout development (TDD approach).

Specify:
1. Test pyramid ratios (unit vs integration vs e2e)
2. Coverage requirements
3. Critical test scenarios
4. Test generation guidelines for Surgical Test Generator

This section guides the AI when generating tests during the RED phase of TDD.

&lt;example type=&quot;good&quot;&gt;
Critical Test Scenarios for Data Validation module:
  - Happy path: Valid data passes all checks
  - Edge cases: Empty strings, null values, boundary numbers
  - Error cases: Invalid types, missing required fields
  - Integration: Validator works with ingestion pipeline
&lt;/example&gt;
&lt;/instruction&gt;

## Test Pyramid

```
        /\
       /E2E\       ‚Üê [X]% (End-to-end, slow, comprehensive)
      /------\
     /Integration\ ‚Üê [Y]% (Module interactions)
    /------------\
   /  Unit Tests  \ ‚Üê [Z]% (Fast, isolated, deterministic)
  /----------------\
```

## Coverage Requirements
- Line coverage: [X]% minimum
- Branch coverage: [X]% minimum
- Function coverage: [X]% minimum
- Statement coverage: [X]% minimum

## Critical Test Scenarios

### [Module/Feature Name]
**Happy path**:
- [Scenario description]
- Expected: [What should happen]

**Edge cases**:
- [Scenario description]
- Expected: [What should happen]

**Error cases**:
- [Scenario description]
- Expected: [How system handles failure]

**Integration points**:
- [What interactions to test]
- Expected: [End-to-end behavior]

## Test Generation Guidelines
[Specific instructions for Surgical Test Generator about what to focus on, what patterns to follow, project-specific test conventions]

&lt;/test-strategy&gt;

---

&lt;architecture&gt;
&lt;instruction&gt;
Describe technical architecture, data models, and key design decisions.

Keep this section AFTER functional/structural decomposition - implementation details come after understanding structure.
&lt;/instruction&gt;

## System Components
[Major architectural pieces and their responsibilities]

## Data Models
[Core data structures, schemas, database design]

## Technology Stack
[Languages, frameworks, key libraries]

**Decision: [Technology/Pattern]**
- **Rationale**: [Why chosen]
- **Trade-offs**: [What we&apos;re giving up]
- **Alternatives considered**: [What else we looked at]

&lt;/architecture&gt;

---

&lt;risks&gt;
&lt;instruction&gt;
Identify risks that could derail development and how to mitigate them.

Categories:
- Technical risks (complexity, unknowns)
- Dependency risks (blocking issues)
- Scope risks (creep, underestimation)
&lt;/instruction&gt;

## Technical Risks
**Risk**: [Description]
- **Impact**: [High/Medium/Low - effect on project]
- **Likelihood**: [High/Medium/Low]
- **Mitigation**: [How to address]
- **Fallback**: [Plan B if mitigation fails]

## Dependency Risks
[External dependencies, blocking issues]

## Scope Risks
[Scope creep, underestimation, unclear requirements]

&lt;/risks&gt;

---

&lt;appendix&gt;
## References
[Papers, documentation, similar systems]

## Glossary
[Domain-specific terms]

## Open Questions
[Things to resolve during development]
&lt;/appendix&gt;

---

&lt;task-master-integration&gt;
# How Task Master Uses This PRD

When you run `task-master parse-prd &lt;file&gt;.txt`, the parser:

1. **Extracts capabilities** ‚Üí Main tasks
   - Each `### Capability:` becomes a top-level task

2. **Extracts features** ‚Üí Subtasks
   - Each `#### Feature:` becomes a subtask under its capability

3. **Parses dependencies** ‚Üí Task dependencies
   - `Depends on: [X, Y]` sets task.dependencies = [&quot;X&quot;, &quot;Y&quot;]

4. **Orders by phases** ‚Üí Task priorities
   - Phase 0 tasks = highest priority
   - Phase N tasks = lower priority, properly sequenced

5. **Uses test strategy** ‚Üí Test generation context
   - Feeds test scenarios to Surgical Test Generator during implementation

**Result**: A dependency-aware task graph that can be executed in topological order.

## Why RPG Structure Matters

Traditional flat PRDs lead to:
- ‚ùå Unclear task dependencies
- ‚ùå Arbitrary task ordering
- ‚ùå Circular dependencies discovered late
- ‚ùå Poorly scoped tasks

RPG-structured PRDs provide:
- ‚úÖ Explicit dependency chains
- ‚úÖ Topological execution order
- ‚úÖ Clear module boundaries
- ‚úÖ Validated task graph before implementation

## Tips for Best Results

1. **Spend time on dependency graph** - This is the most valuable section for Task Master
2. **Keep features atomic** - Each feature should be independently testable
3. **Progressive refinement** - Start broad, use `task-master expand` to break down complex tasks
4. **Use research mode** - `task-master parse-prd --research` leverages AI for better task generation
&lt;/task-master-integration&gt;</file><file path="fe/.taskmaster/templates/example_prd.txt">&lt;context&gt;
# Overview  
[Provide a high-level overview of your product here. Explain what problem it solves, who it&apos;s for, and why it&apos;s valuable.]

# Core Features  
[List and describe the main features of your product. For each feature, include:
- What it does
- Why it&apos;s important
- How it works at a high level]

# User Experience  
[Describe the user journey and experience. Include:
- User personas
- Key user flows
- UI/UX considerations]
&lt;/context&gt;
&lt;PRD&gt;
# Technical Architecture  
[Outline the technical implementation details:
- System components
- Data models
- APIs and integrations
- Infrastructure requirements]

# Development Roadmap  
[Break down the development process into phases:
- MVP requirements
- Future enhancements
- Do not think about timelines whatsoever -- all that matters is scope and detailing exactly what needs to be build in each phase so it can later be cut up into tasks]

# Logical Dependency Chain
[Define the logical order of development:
- Which features need to be built first (foundation)
- Getting as quickly as possible to something usable/visible front end that works
- Properly pacing and scoping each feature so it is atomic but can also be built upon and improved as development approaches]

# Risks and Mitigations  
[Identify potential risks and how they&apos;ll be addressed:
- Technical challenges
- Figuring out the MVP that we can build upon
- Resource constraints]

# Appendix  
[Include any additional information:
- Research findings
- Technical specifications]
&lt;/PRD&gt;</file><file path="fe/.taskmaster/CLAUDE.md"># Task Master AI - Agent Integration Guide

## Essential Commands

### Core Workflow Commands

```bash
# Project Setup
task-master init                                    # Initialize Task Master in current project
task-master parse-prd .taskmaster/docs/prd.md       # Generate tasks from PRD document
task-master models --setup                        # Configure AI models interactively

# Daily Development Workflow
task-master list                                   # Show all tasks with status
task-master next                                   # Get next available task to work on
task-master show &lt;id&gt;                             # View detailed task information (e.g., task-master show 1.2)
task-master set-status --id=&lt;id&gt; --status=done    # Mark task complete

# Task Management
task-master add-task --prompt=&quot;description&quot; --research        # Add new task with AI assistance
task-master expand --id=&lt;id&gt; --research --force              # Break task into subtasks
task-master update-task --id=&lt;id&gt; --prompt=&quot;changes&quot;         # Update specific task
task-master update --from=&lt;id&gt; --prompt=&quot;changes&quot;            # Update multiple tasks from ID onwards
task-master update-subtask --id=&lt;id&gt; --prompt=&quot;notes&quot;        # Add implementation notes to subtask

# Analysis &amp; Planning
task-master analyze-complexity --research          # Analyze task complexity
task-master complexity-report                      # View complexity analysis
task-master expand --all --research               # Expand all eligible tasks

# Dependencies &amp; Organization
task-master add-dependency --id=&lt;id&gt; --depends-on=&lt;id&gt;       # Add task dependency
task-master move --from=&lt;id&gt; --to=&lt;id&gt;                       # Reorganize task hierarchy
task-master validate-dependencies                            # Check for dependency issues
task-master generate                                         # Update task markdown files (usually auto-called)
```

## Key Files &amp; Project Structure

### Core Files

- `.taskmaster/tasks/tasks.json` - Main task data file (auto-managed)
- `.taskmaster/config.json` - AI model configuration (use `task-master models` to modify)
- `.taskmaster/docs/prd.md` - Product Requirements Document for parsing (`.md` extension recommended for better editor support)
- `.taskmaster/tasks/*.txt` - Individual task files (auto-generated from tasks.json)
- `.env` - API keys for CLI usage

**PRD File Format:** While both `.txt` and `.md` extensions work, **`.md` is recommended** because:

- Markdown syntax highlighting in editors improves readability
- Proper rendering when previewing in VS Code, GitHub, or other tools
- Better collaboration through formatted documentation

### Claude Code Integration Files

- `CLAUDE.md` - Auto-loaded context for Claude Code (this file)
- `.claude/settings.json` - Claude Code tool allowlist and preferences
- `.claude/commands/` - Custom slash commands for repeated workflows
- `.mcp.json` - MCP server configuration (project-specific)

### Directory Structure

```
project/
‚îú‚îÄ‚îÄ .taskmaster/
‚îÇ   ‚îú‚îÄ‚îÄ tasks/              # Task files directory
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks.json      # Main task database
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task-1.md      # Individual task files
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task-2.md
‚îÇ   ‚îú‚îÄ‚îÄ docs/              # Documentation directory
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prd.md         # Product requirements (.md recommended)
‚îÇ   ‚îú‚îÄ‚îÄ reports/           # Analysis reports directory
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task-complexity-report.json
‚îÇ   ‚îú‚îÄ‚îÄ templates/         # Template files
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ example_prd.md  # Example PRD template (.md recommended)
‚îÇ   ‚îî‚îÄ‚îÄ config.json        # AI models &amp; settings
‚îú‚îÄ‚îÄ .claude/
‚îÇ   ‚îú‚îÄ‚îÄ settings.json      # Claude Code configuration
‚îÇ   ‚îî‚îÄ‚îÄ commands/         # Custom slash commands
‚îú‚îÄ‚îÄ .env                  # API keys
‚îú‚îÄ‚îÄ .mcp.json            # MCP configuration
‚îî‚îÄ‚îÄ CLAUDE.md            # This file - auto-loaded by Claude Code
```

## MCP Integration

Task Master provides an MCP server that Claude Code can connect to. Configure in `.mcp.json`:

```json
{
  &quot;mcpServers&quot;: {
    &quot;task-master-ai&quot;: {
      &quot;command&quot;: &quot;npx&quot;,
      &quot;args&quot;: [&quot;-y&quot;, &quot;task-master-ai&quot;],
      &quot;env&quot;: {
        &quot;TASK_MASTER_TOOLS&quot;: &quot;core&quot;,
        &quot;ANTHROPIC_API_KEY&quot;: &quot;your_key_here&quot;,
        &quot;PERPLEXITY_API_KEY&quot;: &quot;your_key_here&quot;,
        &quot;OPENAI_API_KEY&quot;: &quot;OPENAI_API_KEY_HERE&quot;,
        &quot;GOOGLE_API_KEY&quot;: &quot;GOOGLE_API_KEY_HERE&quot;,
        &quot;XAI_API_KEY&quot;: &quot;XAI_API_KEY_HERE&quot;,
        &quot;OPENROUTER_API_KEY&quot;: &quot;OPENROUTER_API_KEY_HERE&quot;,
        &quot;MISTRAL_API_KEY&quot;: &quot;MISTRAL_API_KEY_HERE&quot;,
        &quot;AZURE_OPENAI_API_KEY&quot;: &quot;AZURE_OPENAI_API_KEY_HERE&quot;,
        &quot;OLLAMA_API_KEY&quot;: &quot;OLLAMA_API_KEY_HERE&quot;
      }
    }
  }
}
```

### MCP Tool Tiers

Default: `core` (7 tools). Set via `TASK_MASTER_TOOLS` env var.

| Tier       | Count | Tools                                                                                                                                  |
| ---------- | ----- | -------------------------------------------------------------------------------------------------------------------------------------- |
| `core`     | 7     | `get_tasks`, `next_task`, `get_task`, `set_task_status`, `update_subtask`, `parse_prd`, `expand_task`                                  |
| `standard` | 14    | core + `initialize_project`, `analyze_project_complexity`, `expand_all`, `add_subtask`, `remove_task`, `add_task`, `complexity_report` |
| `all`      | 44+   | standard + dependencies, tags, research, autopilot, scoping, models, rules                                                             |

**Upgrade when tool unavailable:** Edit MCP config, change `TASK_MASTER_TOOLS` from `&quot;core&quot;` to `&quot;standard&quot;` or `&quot;all&quot;`, restart MCP.

### Essential MCP Tools

```javascript
help // = shows available taskmaster commands
// Project setup
initialize_project // = task-master init
parse_prd // = task-master parse-prd

// Daily workflow
get_tasks // = task-master list
next_task // = task-master next
get_task // = task-master show &lt;id&gt;
set_task_status // = task-master set-status

// Task management
add_task // = task-master add-task
expand_task // = task-master expand
update_task // = task-master update-task
update_subtask // = task-master update-subtask
update // = task-master update

// Analysis
analyze_project_complexity // = task-master analyze-complexity
complexity_report // = task-master complexity-report
```

## Claude Code Workflow Integration

### Standard Development Workflow

#### 1. Project Initialization

```bash
# Initialize Task Master
task-master init

# Create or obtain PRD, then parse it (use .md extension for better editor support)
task-master parse-prd .taskmaster/docs/prd.md

# Analyze complexity and expand tasks
task-master analyze-complexity --research
task-master expand --all --research
```

If tasks already exist, another PRD can be parsed (with new information only!) using parse-prd with --append flag. This will add the generated tasks to the existing list of tasks..

#### 2. Daily Development Loop

```bash
# Start each session
task-master next                           # Find next available task
task-master show &lt;id&gt;                     # Review task details

# During implementation, check in code context into the tasks and subtasks
task-master update-subtask --id=&lt;id&gt; --prompt=&quot;implementation notes...&quot;

# Complete tasks
task-master set-status --id=&lt;id&gt; --status=done
```

#### 3. Multi-Claude Workflows

For complex projects, use multiple Claude Code sessions:

```bash
# Terminal 1: Main implementation
cd project &amp;&amp; claude

# Terminal 2: Testing and validation
cd project-test-worktree &amp;&amp; claude

# Terminal 3: Documentation updates
cd project-docs-worktree &amp;&amp; claude
```

### Custom Slash Commands

Create `.claude/commands/taskmaster-next.md`:

```markdown
Find the next available Task Master task and show its details.

Steps:

1. Run `task-master next` to get the next task
2. If a task is available, run `task-master show &lt;id&gt;` for full details
3. Provide a summary of what needs to be implemented
4. Suggest the first implementation step
```

Create `.claude/commands/taskmaster-complete.md`:

```markdown
Complete a Task Master task: $ARGUMENTS

Steps:

1. Review the current task with `task-master show $ARGUMENTS`
2. Verify all implementation is complete
3. Run any tests related to this task
4. Mark as complete: `task-master set-status --id=$ARGUMENTS --status=done`
5. Show the next available task with `task-master next`
```

## Tool Allowlist Recommendations

Add to `.claude/settings.json`:

```json
{
  &quot;allowedTools&quot;: [
    &quot;Edit&quot;,
    &quot;Bash(task-master *)&quot;,
    &quot;Bash(git commit:*)&quot;,
    &quot;Bash(git add:*)&quot;,
    &quot;Bash(npm run *)&quot;,
    &quot;mcp__task_master_ai__*&quot;
  ]
}
```

## Configuration &amp; Setup

### API Keys Required

At least **one** of these API keys must be configured:

- `ANTHROPIC_API_KEY` (Claude models) - **Recommended**
- `PERPLEXITY_API_KEY` (Research features) - **Highly recommended**
- `OPENAI_API_KEY` (GPT models)
- `GOOGLE_API_KEY` (Gemini models)
- `MISTRAL_API_KEY` (Mistral models)
- `OPENROUTER_API_KEY` (Multiple models)
- `XAI_API_KEY` (Grok models)

An API key is required for any provider used across any of the 3 roles defined in the `models` command.

### Model Configuration

```bash
# Interactive setup (recommended)
task-master models --setup

# Set specific models
task-master models --set-main claude-3-5-sonnet-20241022
task-master models --set-research perplexity-llama-3.1-sonar-large-128k-online
task-master models --set-fallback gpt-4o-mini
```

## Task Structure &amp; IDs

### Task ID Format

- Main tasks: `1`, `2`, `3`, etc.
- Subtasks: `1.1`, `1.2`, `2.1`, etc.
- Sub-subtasks: `1.1.1`, `1.1.2`, etc.

### Task Status Values

- `pending` - Ready to work on
- `in-progress` - Currently being worked on
- `done` - Completed and verified
- `deferred` - Postponed
- `cancelled` - No longer needed
- `blocked` - Waiting on external factors

### Task Fields

```json
{
  &quot;id&quot;: &quot;1.2&quot;,
  &quot;title&quot;: &quot;Implement user authentication&quot;,
  &quot;description&quot;: &quot;Set up JWT-based auth system&quot;,
  &quot;status&quot;: &quot;pending&quot;,
  &quot;priority&quot;: &quot;high&quot;,
  &quot;dependencies&quot;: [&quot;1.1&quot;],
  &quot;details&quot;: &quot;Use bcrypt for hashing, JWT for tokens...&quot;,
  &quot;testStrategy&quot;: &quot;Unit tests for auth functions, integration tests for login flow&quot;,
  &quot;subtasks&quot;: []
}
```

## Claude Code Best Practices with Task Master

### Context Management

- Use `/clear` between different tasks to maintain focus
- This CLAUDE.md file is automatically loaded for context
- Use `task-master show &lt;id&gt;` to pull specific task context when needed

### Iterative Implementation

1. `task-master show &lt;subtask-id&gt;` - Understand requirements
2. Explore codebase and plan implementation
3. `task-master update-subtask --id=&lt;id&gt; --prompt=&quot;detailed plan&quot;` - Log plan
4. `task-master set-status --id=&lt;id&gt; --status=in-progress` - Start work
5. Implement code following logged plan
6. `task-master update-subtask --id=&lt;id&gt; --prompt=&quot;what worked/didn&apos;t work&quot;` - Log progress
7. `task-master set-status --id=&lt;id&gt; --status=done` - Complete task

### Complex Workflows with Checklists

For large migrations or multi-step processes:

1. Create a markdown PRD file describing the new changes: `touch task-migration-checklist.md` (prds can be .txt or .md)
2. Use Taskmaster to parse the new prd with `task-master parse-prd --append` (also available in MCP)
3. Use Taskmaster to expand the newly generated tasks into subtasks. Consdier using `analyze-complexity` with the correct --to and --from IDs (the new ids) to identify the ideal subtask amounts for each task. Then expand them.
4. Work through items systematically, checking them off as completed
5. Use `task-master update-subtask` to log progress on each task/subtask and/or updating/researching them before/during implementation if getting stuck

### Git Integration

Task Master works well with `gh` CLI:

```bash
# Create PR for completed task
gh pr create --title &quot;Complete task 1.2: User authentication&quot; --body &quot;Implements JWT auth system as specified in task 1.2&quot;

# Reference task in commits
git commit -m &quot;feat: implement JWT auth (task 1.2)&quot;
```

### Parallel Development with Git Worktrees

```bash
# Create worktrees for parallel task development
git worktree add ../project-auth feature/auth-system
git worktree add ../project-api feature/api-refactor

# Run Claude Code in each worktree
cd ../project-auth &amp;&amp; claude    # Terminal 1: Auth work
cd ../project-api &amp;&amp; claude     # Terminal 2: API work
```

## Troubleshooting

### AI Commands Failing

```bash
# Check API keys are configured
cat .env                           # For CLI usage

# Verify model configuration
task-master models

# Test with different model
task-master models --set-fallback gpt-4o-mini
```

### MCP Connection Issues

- Check `.mcp.json` configuration
- Verify Node.js installation
- Use `--mcp-debug` flag when starting Claude Code
- Use CLI as fallback if MCP unavailable

### Task File Sync Issues

```bash
# Regenerate task files from tasks.json
task-master generate

# Fix dependency issues
task-master fix-dependencies
```

DO NOT RE-INITIALIZE. That will not do anything beyond re-adding the same Taskmaster core files.

## Important Notes

### AI-Powered Operations

These commands make AI calls and may take up to a minute:

- `parse_prd` / `task-master parse-prd`
- `analyze_project_complexity` / `task-master analyze-complexity`
- `expand_task` / `task-master expand`
- `expand_all` / `task-master expand --all`
- `add_task` / `task-master add-task`
- `update` / `task-master update`
- `update_task` / `task-master update-task`
- `update_subtask` / `task-master update-subtask`

### File Management

- Never manually edit `tasks.json` - use commands instead
- Never manually edit `.taskmaster/config.json` - use `task-master models`
- Task markdown files in `tasks/` are auto-generated
- Run `task-master generate` after manual changes to tasks.json

### Claude Code Session Management

- Use `/clear` frequently to maintain focused context
- Create custom slash commands for repeated Task Master workflows
- Configure tool allowlist to streamline permissions
- Use headless mode for automation: `claude -p &quot;task-master next&quot;`

### Multi-Task Updates

- Use `update --from=&lt;id&gt;` to update multiple future tasks
- Use `update-task --id=&lt;id&gt;` for single task updates
- Use `update-subtask --id=&lt;id&gt;` for implementation logging

### Research Mode

- Add `--research` flag for research-based AI enhancement
- Requires a research model API key like Perplexity (`PERPLEXITY_API_KEY`) in environment
- Provides more informed task creation and updates
- Recommended for complex technical tasks

---

_This guide ensures Claude Code has immediate access to Task Master&apos;s essential functionality for agentic development workflows._</file><file path="fe/.taskmaster/config.json">{
  &quot;models&quot;: {
    &quot;main&quot;: {
      &quot;provider&quot;: &quot;anthropic&quot;,
      &quot;modelId&quot;: &quot;claude-sonnet-4-20250514&quot;,
      &quot;maxTokens&quot;: 64000,
      &quot;temperature&quot;: 0.2
    },
    &quot;research&quot;: {
      &quot;provider&quot;: &quot;perplexity&quot;,
      &quot;modelId&quot;: &quot;sonar&quot;,
      &quot;maxTokens&quot;: 8700,
      &quot;temperature&quot;: 0.1
    },
    &quot;fallback&quot;: {
      &quot;provider&quot;: &quot;anthropic&quot;,
      &quot;modelId&quot;: &quot;claude-3-7-sonnet-20250219&quot;,
      &quot;maxTokens&quot;: 120000,
      &quot;temperature&quot;: 0.2
    }
  },
  &quot;global&quot;: {
    &quot;logLevel&quot;: &quot;info&quot;,
    &quot;debug&quot;: false,
    &quot;defaultNumTasks&quot;: 10,
    &quot;defaultSubtasks&quot;: 5,
    &quot;defaultPriority&quot;: &quot;medium&quot;,
    &quot;projectName&quot;: &quot;Task Master&quot;,
    &quot;ollamaBaseURL&quot;: &quot;http://localhost:11434/api&quot;,
    &quot;bedrockBaseURL&quot;: &quot;https://bedrock.us-east-1.amazonaws.com&quot;,
    &quot;responseLanguage&quot;: &quot;English&quot;,
    &quot;enableCodebaseAnalysis&quot;: true,
    &quot;enableProxy&quot;: false,
    &quot;anonymousTelemetry&quot;: true
  },
  &quot;claudeCode&quot;: {},
  &quot;codexCli&quot;: {},
  &quot;grokCli&quot;: {
    &quot;timeout&quot;: 120000,
    &quot;workingDirectory&quot;: null,
    &quot;defaultModel&quot;: &quot;grok-4-latest&quot;
  }
}</file><file path="fe/.taskmaster/state.json">{
  &quot;currentTag&quot;: &quot;master&quot;,
  &quot;lastSwitched&quot;: &quot;2025-12-29T13:25:29.859Z&quot;,
  &quot;branchTagMapping&quot;: {},
  &quot;migrationNoticeShown&quot;: false
}</file><file path="fe/app/about/page.tsx">import { useTranslation } from &apos;react-i18next&apos;
import { motion } from &apos;framer-motion&apos;
import MarketingLayout from &apos;@/components/marketing/MarketingLayout&apos;
import Link from &apos;next/link&apos;
import { InteractiveHoverButton } from &apos;@/components/ui/interactive-hover-button&apos;
import {
  Clock,
  Shield,
  Brain,
  Target,
  Lock,
  Zap,
  MessageCircle,
  Calendar,
  BarChart3,
  Layers,
  Eye,
  Mic,
  ArrowRight,
} from &apos;lucide-react&apos;
‚ãÆ----
&lt;InteractiveHoverButton text=</file><file path="fe/app/admin/audit-logs/page.tsx">import React, { useState } from &apos;react&apos;
import { Card } from &apos;@/components/ui/card&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { Search, RefreshCw, ChevronLeft, ChevronRight, FileText, User, Calendar } from &apos;lucide-react&apos;
import { useAdminAuditLogs } from &apos;@/hooks/queries/admin&apos;
import { format } from &apos;date-fns&apos;
‚ãÆ----
{/* Audit Logs List */}</file><file path="fe/app/admin/payments/page.tsx">import React, { useState } from &apos;react&apos;
import { Card } from &apos;@/components/ui/card&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { Search, RefreshCw, ChevronLeft, ChevronRight, Receipt, ExternalLink } from &apos;lucide-react&apos;
import { useAdminPayments } from &apos;@/hooks/queries/admin&apos;
import type { PaymentStatus } from &apos;@/types/admin&apos;
import { format } from &apos;date-fns&apos;
import { formatCurrency } from &apos;@/services/admin.service&apos;
‚ãÆ----
{/* Filters */}
‚ãÆ----
{/* Payments Table */}</file><file path="fe/app/admin/subscriptions/page.tsx">import React, { useState } from &apos;react&apos;
import { Card } from &apos;@/components/ui/card&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { Search, RefreshCw, ChevronLeft, ChevronRight, CreditCard } from &apos;lucide-react&apos;
import { useAdminSubscriptions } from &apos;@/hooks/queries/admin&apos;
import type { SubscriptionStatus } from &apos;@/types/admin&apos;
import { format } from &apos;date-fns&apos;
‚ãÆ----
{/* Filters */}
‚ãÆ----
{/* Subscriptions Table */}</file><file path="fe/app/admin/users/page.tsx">import React, { useState } from &apos;react&apos;
import { Card } from &apos;@/components/ui/card&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from &apos;@/components/ui/dropdown-menu&apos;
import { Search, MoreVertical, UserCog, CreditCard, Mail, Shield, RefreshCw, ChevronLeft, ChevronRight } from &apos;lucide-react&apos;
import { useAdminUsers, useUpdateUserStatus, useSendPasswordReset } from &apos;@/hooks/queries/admin&apos;
import { GrantCreditsDialog } from &apos;@/components/admin/GrantCreditsDialog&apos;
import { UserDetailsDialog } from &apos;@/components/admin/UserDetailsDialog&apos;
import type { AdminUser, UserStatus, UserRole, AdminUserListParams } from &apos;@/types/admin&apos;
import { format } from &apos;date-fns&apos;
‚ãÆ----
const handleStatusChange = (userId: string, newStatus: UserStatus) =&gt;
const handlePasswordReset = (userId: string, email: string) =&gt;
‚ãÆ----
{/* Users Table */}
‚ãÆ----
setSelectedUser(user)
setShowDetailsDialog(true)
‚ãÆ----
setShowDetailsDialog(false)
‚ãÆ----
setShowCreditsDialog(false)</file><file path="fe/app/admin/layout.tsx">import React from &apos;react&apos;
import { useRouter } from &apos;next/navigation&apos;
import { AdminSidebar } from &apos;@/components/admin/AdminSidebar&apos;
import { RefreshCw } from &apos;lucide-react&apos;
import { useDashboardStats } from &apos;@/hooks/queries/admin/useDashboardStats&apos;
export default function AdminLayout(</file><file path="fe/app/admin/page.tsx">import React from &apos;react&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { Tabs, TabsContent, TabsList, TabsTrigger } from &apos;@/components/ui/tabs&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { Avatar, AvatarFallback, AvatarImage } from &apos;@/components/ui/avatar&apos;
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from &apos;@/components/ui/table&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent } from &apos;@/components/ui/chart&apos;
import {
  Users,
  CreditCard,
  TrendingUp,
  TrendingDown,
  DollarSign,
  Download,
  Calendar,
  Settings,
  BarChart3,
  FileText,
  Bell,
  Info,
  ChevronDown,
} from &apos;lucide-react&apos;
import {
  Line,
  LineChart,
  Bar,
  BarChart,
  Area,
  AreaChart,
  XAxis,
  CartesianGrid,
  ResponsiveContainer,
} from &apos;recharts&apos;
import {
  useDashboardStats,
  useSubscriptionDistribution,
  useRecentPayments,
  useRevenueTrends,
  useSubscriptionTrends,
  useAdminMe,
} from &apos;@/hooks/queries/admin&apos;
import { formatCurrency, formatNumber } from &apos;@/services/admin.service&apos;
import { cn } from &apos;@/lib/utils&apos;
const generateSparklineFromTrends = (
  data: { revenue?: number; subscriptions?: number }[] | undefined,
  key: &apos;revenue&apos; | &apos;subscriptions&apos;
):</file><file path="fe/app/api/chat/route.ts">import { NextResponse } from &apos;next/server&apos;
import { sendMessageToGemini } from &apos;@/services/geminiService&apos;
export async function POST(request: Request)</file><file path="fe/app/api/tts/route.ts">import { getSpeechFromGemini } from &apos;@/services/geminiService&apos;
import { NextResponse } from &apos;next/server&apos;
export async function POST(request: Request)</file><file path="fe/app/auth/callback/page.tsx">import { Suspense, useEffect, useState } from &apos;react&apos;
import { useRouter, useSearchParams } from &apos;next/navigation&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { AllyLogo } from &apos;@/components/shared/logo&apos;
‚ãÆ----
const handleCallback = async () =&gt;</file><file path="fe/app/callback/page.tsx">import { Suspense, useEffect, useState, useMemo } from &apos;react&apos;
import { useRouter, useSearchParams } from &apos;next/navigation&apos;
import { motion, AnimatePresence } from &apos;framer-motion&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { AllyLogo } from &apos;@/components/shared/logo&apos;
import { authService } from &apos;@/services/auth.service&apos;
import { STORAGE_KEYS } from &apos;@/lib/constants&apos;
import {
  redirectToCheckout,
  redirectToCreditPackCheckout,
  type PlanSlug,
  type PlanInterval,
} from &apos;@/services/payment.service&apos;
‚ãÆ----
const handleCallback = async () =&gt;</file><file path="fe/app/contact/page.tsx">import { useTranslation } from &apos;react-i18next&apos;
import { Mail } from &apos;lucide-react&apos;
import MarketingLayout from &apos;@/components/marketing/MarketingLayout&apos;
import { ContactForm } from &apos;@/components/contact/ContactForm&apos;</file><file path="fe/app/dashboard/analytics/page.tsx">import { useState } from &apos;react&apos;
import AnalyticsDashboard from &apos;@/components/dashboard/analytics/AnalyticsDashboard&apos;
import AIAllySidebar from &apos;@/components/dashboard/shared/AIAllySidebar&apos;
import { AnalyticsProvider } from &apos;@/contexts/AnalyticsContext&apos;
export default function AnalyticsPage()
‚ãÆ----
onOpen=</file><file path="fe/app/dashboard/billing/page.tsx">import React, { Suspense, useEffect, useState } from &apos;react&apos;
import { useSearchParams } from &apos;next/navigation&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { format } from &apos;date-fns&apos;
import { useQueryClient } from &apos;@tanstack/react-query&apos;
import { Card } from &apos;@/components/ui/card&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { Button } from &apos;@/components/ui/button&apos;
import {
  CreditCard,
  Check,
  Clock,
  AlertCircle,
  ArrowRight,
  RefreshCw,
  Shield,
  Zap,
  Crown,
  Settings,
  Receipt,
} from &apos;lucide-react&apos;
import { LoadingSection } from &apos;@/components/ui/loading-spinner&apos;
import {
  redirectToBillingPortal,
  redirectToCheckout,
  upgradeSubscription,
  cancelSubscription,
  requestRefund,
  type Plan,
  type PlanSlug,
  type PlanInterval,
} from &apos;@/services/payment.service&apos;
import { PaymentMethodCard } from &apos;@/components/dashboard/billing/PaymentMethodCard&apos;
import { TransactionHistoryTable } from &apos;@/components/dashboard/billing/TransactionHistoryTable&apos;
import { ConfirmDialog } from &apos;@/components/dashboard/shared/ConfirmDialog&apos;
import { useBillingData, billingKeys } from &apos;@/hooks/queries/billing&apos;
‚ãÆ----
const handleManageBilling = async () =&gt;
const handlePlanAction = async (plan: Plan) =&gt;
const handleCancelSubscription = () =&gt;
const confirmCancelSubscription = async () =&gt;
const handleRefund = () =&gt;
const confirmRefund = async () =&gt;
‚ãÆ----
&lt;AlertCircle className=&quot;w-3 h-3 mr-1&quot; /&gt;
‚ãÆ----</file><file path="fe/app/dashboard/integrations/page.tsx">import IntegrationsDashboard from &apos;@/components/dashboard/IntegrationsDashboard&apos;
export default function IntegrationsPage()</file><file path="fe/app/dashboard/layout.tsx">import { DashboardUIProvider, useDashboardUI } from &apos;@/contexts/DashboardUIContext&apos;
import { ChatProvider } from &apos;@/contexts/ChatContext&apos;
import { OnboardingTour } from &apos;@/components/dashboard/shared/OnboardingTour&apos;
import React, { Suspense } from &apos;react&apos;
import SettingsModal from &apos;@/components/dashboard/shared/SettingsModal&apos;
import Sidebar from &apos;@/components/dashboard/shared/Sidebar&apos;
import { AnimatedHamburger } from &apos;@/components/ui/animated-hamburger&apos;
function DashboardLayoutContent(
function DashboardLayoutFallback()
export default function DashboardLayout(</file><file path="fe/app/dashboard/page.tsx">import ChatInterface from &apos;@/components/dashboard/chat/ChatInterface&apos;
export default function DashboardPage()</file><file path="fe/app/integrations/slack/page.tsx">import { useSearchParams, useRouter } from &apos;next/navigation&apos;
import { useEffect, useState } from &apos;react&apos;
import { CheckCircle2, XCircle, Loader2 } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { FaSlack } from &apos;react-icons/fa&apos;
‚ãÆ----
const getErrorMessage = (error: string): string =&gt;
const handleGoToIntegrations = () =&gt;
const handleRetry = () =&gt;</file><file path="fe/app/loading/page.tsx">import { Suspense, useEffect, useState, useMemo } from &apos;react&apos;
import { useRouter, useSearchParams } from &apos;next/navigation&apos;
import { motion, AnimatePresence } from &apos;framer-motion&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { AllyLogo } from &apos;@/components/shared/logo&apos;</file><file path="fe/app/login/page.tsx">import LoginPage from &apos;@/components/auth/LoginPage&apos;
import { Suspense } from &apos;react&apos;
function LoginFallback()</file><file path="fe/app/pricing/page.tsx">import { useTranslation } from &apos;react-i18next&apos;
import { PricingSectionDemo } from &apos;@/components/ui/pricing-section-demo&apos;
import FAQs from &apos;@/components/marketing/FAQs&apos;
import { AnimatedTestimonials } from &apos;@/components/ui/animated-testimonials&apos;
import MarketingLayout from &apos;@/components/marketing/MarketingLayout&apos;
‚ãÆ----
export default function PricingPage()
‚ãÆ----
title=
‚ãÆ----
badgeText=</file><file path="fe/app/privacy/page.tsx">import MarketingLayout from &apos;@/components/marketing/MarketingLayout&apos;
import Link from &apos;next/link&apos;</file><file path="fe/app/register/page.tsx">import RegisterPage from &apos;@/components/auth/RegisterPage&apos;
export default function Register()</file><file path="fe/app/terms/page.tsx">import MarketingLayout from &apos;@/components/marketing/MarketingLayout&apos;
import Link from &apos;next/link&apos;</file><file path="fe/app/waitinglist/page.tsx">import WaitingList from &apos;@/components/waiting-list/WaitingList&apos;
export default function WaitingListPage()</file><file path="fe/app/error.tsx">import { AlertCircle, AlertTriangle, Check, Copy, Home, RefreshCw, Terminal } from &apos;lucide-react&apos;
import { Card, CardContent, CardFooter, CardHeader } from &apos;@/components/ui/card&apos;
import { useEffect, useState, useCallback } from &apos;react&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { Button } from &apos;@/components/ui/button&apos;
function formatErrorForCopy(error: Error &amp;
‚ãÆ----
const handleRetry = () =&gt;
‚ãÆ----
e.preventDefault()
handleCopyError()
‚ãÆ----
&lt;span className=&quot;text-green-600&quot;&gt;</file><file path="fe/app/global-error.tsx">import { useEffect } from &apos;react&apos;
import { Button } from &apos;@/components/ui/button&apos;
export default function GlobalError(
‚ãÆ----
&lt;Button onClick=</file><file path="fe/app/layout.tsx">import type { Metadata } from &quot;next&quot;;
import { Providers } from &quot;@/app/providers&quot;;
‚ãÆ----
export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
})</file><file path="fe/app/page.tsx">import { ArrowRight, Calendar, Clock, Mic } from &apos;lucide-react&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { Button } from &apos;@/components/ui/button&apos;
import BentoGridSection from &apos;@/components/marketing/BentoGridSection&apos;
import { SOCIAL_LINKS } from &apos;@/lib/constants&apos;
import { TelegramIcon, SlackIcon } from &apos;@/components/shared/Icons&apos;
import FeatureShowcase from &apos;@/components/marketing/FeatureShowcase&apos;
import { InteractiveHoverButton } from &apos;@/components/ui/interactive-hover-button&apos;
import { AnimatedFeatureSpotlight3D } from &apos;@/components/ui/animated-feature-spotlight3d&apos;
import Link from &apos;next/link&apos;
import MarketingLayout from &apos;@/components/marketing/MarketingLayout&apos;
import Testimonials from &apos;@/components/marketing/Testimonials&apos;
‚ãÆ----
&lt;InteractiveHoverButton text=
‚ãÆ----
preheaderText=</file><file path="fe/app/providers.tsx">import { AuthProvider } from &quot;@/contexts/AuthContext&quot;;
import { ENV } from &quot;@/lib/constants&quot;;
import { LanguageProvider } from &quot;@/contexts/LanguageContext&quot;;
import { QueryClientProvider } from &quot;@tanstack/react-query&quot;;
import { ReactQueryDevtools } from &quot;@tanstack/react-query-devtools&quot;;
import { ThemeProvider } from &quot;next-themes&quot;;
import { Toaster } from &quot;sonner&quot;;
import { createQueryClient } from &quot;@/lib/query&quot;;
import { useState } from &quot;react&quot;;</file><file path="fe/components/3d/ally-character.tsx">import { useRef, useEffect, useState, useCallback, memo, useMemo } from &apos;react&apos;
import { Canvas, useFrame, useThree } from &apos;@react-three/fiber&apos;
import { OrbitControls, ContactShadows, Center } from &apos;@react-three/drei&apos;
‚ãÆ----
export type AllyAnimationState = &apos;idle&apos; | &apos;talking&apos; | &apos;listening&apos; | &apos;thinking&apos; | &apos;happy&apos; | &apos;sad&apos;
export interface AllyCharacterProps {
  animationState?: AllyAnimationState
  autoRotate?: boolean
  autoRotateSpeed?: number
  enableControls?: boolean
  backgroundColor?: string | null
  scale?: number
  onAnimationChange?: (state: AllyAnimationState) =&gt; void
  className?: string
  mouthOpenness?: number
}
function ThreeJsResourceDisposer()
‚ãÆ----
const getColor = () =&gt;
‚ãÆ----
&lt;meshStandardMaterial color=</file><file path="fe/components/3d/ally-chat-avatar.tsx">import { useMemo } from &apos;react&apos;
import dynamic from &apos;next/dynamic&apos;
import { motion, AnimatePresence } from &apos;framer-motion&apos;
import type { AllyAnimationState } from &apos;./ally-character&apos;
‚ãÆ----
export type ChatState = &apos;idle&apos; | &apos;listening&apos; | &apos;processing&apos; | &apos;speaking&apos; | &apos;error&apos;
interface AllyChatAvatarProps {
  chatState: ChatState
  audioLevel?: number
  size?: &apos;sm&apos; | &apos;md&apos; | &apos;lg&apos; | &apos;xl&apos;
  className?: string
  showBackground?: boolean
}
‚ãÆ----
function mapChatStateToAnimation(chatState: ChatState): AllyAnimationState</file><file path="fe/components/3d/index.ts"></file><file path="fe/components/3d/three-dwall-calendar.tsx">import { Card, CardContent } from &apos;@/components/ui/card&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { Popover, PopoverContent, PopoverTrigger } from &apos;@/components/ui/popover&apos;
import React, { useRef, useState } from &apos;react&apos;
import { eachDayOfInterval, endOfMonth, format, startOfMonth } from &apos;date-fns&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { Trash2 } from &apos;lucide-react&apos;
import { v4 as uuidv4 } from &apos;uuid&apos;
export type CalendarEvent = {
  id: string
  title: string
  date: string
}
interface ThreeDWallCalendarProps {
  events: CalendarEvent[]
  onAddEvent?: (e: CalendarEvent) =&gt; void
  onRemoveEvent?: (id: string) =&gt; void
  panelWidth?: number
  panelHeight?: number
  columns?: number
  hideControls?: boolean
}
‚ãÆ----
// 3D tilt state
‚ãÆ----
// month days
‚ãÆ----
const eventsForDay = (d: Date)
const handleAdd = () =&gt;
// wheel tilt
const onWheel = (e: React.WheelEvent) =&gt;
// drag tilt
const onPointerDown = (e: React.PointerEvent) =&gt;
const onPointerMove = (e: React.PointerEvent) =&gt;
const onPointerUp = () =&gt;
‚ãÆ----
key=</file><file path="fe/components/3d/wireframe-dotted-globe.tsx">import { useEffect, useRef, useState } from &apos;react&apos;
interface RotatingEarthProps {
  width?: number
  height?: number
  className?: string
  hideControls?: boolean
}
‚ãÆ----
const pointInPolygon = (point: [number, number], polygon: number[][]): boolean =&gt;
const pointInFeature = (point: [number, number], feature: any): boolean =&gt;
const generateDotsInPolygon = (feature: any, dotSpacing = 16) =&gt;
interface DotData {
      lng: number
      lat: number
      visible: boolean
    }
‚ãÆ----
const render = () =&gt;
const loadWorldData = async () =&gt;
‚ãÆ----
const rotate = () =&gt;
‚ãÆ----
const handleMouseDown = (event: MouseEvent) =&gt;
‚ãÆ----
const handleMouseMove = (moveEvent: MouseEvent) =&gt;
const handleMouseUp = () =&gt;
‚ãÆ----
const handleWheel = (event: WheelEvent) =&gt;</file><file path="fe/components/admin/AdminSidebar.tsx">import React from &apos;react&apos;
import Link from &apos;next/link&apos;
import { usePathname } from &apos;next/navigation&apos;
import { LayoutDashboard, Users, CreditCard, Receipt, FileText, ArrowLeft, Shield } from &apos;lucide-react&apos;
import { cn } from &apos;@/lib/utils&apos;
‚ãÆ----
className=</file><file path="fe/components/admin/GrantCreditsDialog.tsx">import React, { useState } from &apos;react&apos;
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
} from &apos;@/components/ui/dialog&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { Label } from &apos;@/components/ui/label&apos;
import { Textarea } from &apos;@/components/ui/textarea&apos;
import { CreditCard, Loader2 } from &apos;lucide-react&apos;
import { useGrantCredits } from &apos;@/hooks/queries/admin&apos;
import type { AdminUser } from &apos;@/types/admin&apos;
interface GrantCreditsDialogProps {
  user: AdminUser
  onClose: () =&gt; void
}
‚ãÆ----
const handleSubmit = (e: React.FormEvent) =&gt;</file><file path="fe/components/admin/UserDetailsDialog.tsx">import React from &apos;react&apos;
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
} from &apos;@/components/ui/dialog&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { Card } from &apos;@/components/ui/card&apos;
import { User, Mail, Calendar, Globe, CreditCard, Shield } from &apos;lucide-react&apos;
import type { AdminUser, UserStatus, UserRole } from &apos;@/types/admin&apos;
import { format } from &apos;date-fns&apos;
interface UserDetailsDialogProps {
  user: AdminUser
  onClose: () =&gt; void
}</file><file path="fe/components/auth/ImageCarousel.tsx">import React, { useState, useEffect } from &apos;react&apos;
interface ImageCarouselProps {
  images: string[]
  interval?: number
}</file><file path="fe/components/auth/LoginPage.tsx">import { useTranslation } from &apos;react-i18next&apos;
import { AllyLogo, BetaBadge } from &apos;@/components/shared/logo&apos;
import React, { useEffect } from &apos;react&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { ENV } from &apos;@/lib/constants&apos;
import { FcGoogle } from &apos;react-icons/fc&apos;
import ImageCarousel from &apos;@/components/auth/ImageCarousel&apos;
import { InteractiveHoverButton } from &apos;@/components/ui/interactive-hover-button&apos;
import Link from &apos;next/link&apos;
import { useRouter, useSearchParams } from &apos;next/navigation&apos;
‚ãÆ----
const handleGoogleLogin = () =&gt;
‚ãÆ----
text=</file><file path="fe/components/auth/OTPVerificationPage.tsx">import { ArrowLeft, CheckCircle2, Lock } from &apos;lucide-react&apos;
import React, { useEffect, useRef, useState } from &apos;react&apos;
import { AllyLogo } from &apos;@/components/shared/logo&apos;
import { BackgroundPattern1 } from &apos;@/components/shared/BackgroundPattern1&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { InteractiveHoverButton } from &apos;@/components/ui/interactive-hover-button&apos;
import { useRouter } from &apos;next/navigation&apos;
‚ãÆ----
const handleChange = (index: number, value: string) =&gt;
const handleKeyDown = (index: number, e: React.KeyboardEvent&lt;HTMLInputElement&gt;) =&gt;
const handleVerify = async (e: React.FormEvent) =&gt;
const handleResend = () =&gt;
‚ãÆ----
// Simulate resend API call
‚ãÆ----
onKeyDown=
‚ãÆ----
onClick=</file><file path="fe/components/auth/PhoneRegistrationPage.tsx">import { ArrowLeft, ChevronDown, Phone, ShieldCheck } from &apos;lucide-react&apos;
import React, { useState } from &apos;react&apos;
import { AllyLogo } from &apos;@/components/shared/logo&apos;
import { BackgroundPattern1 } from &apos;@/components/shared/BackgroundPattern1&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { InteractiveHoverButton } from &apos;@/components/ui/interactive-hover-button&apos;
import { useRouter } from &apos;next/navigation&apos;
interface Country {
  name: string
  code: string
  dialCode: string
}
‚ãÆ----
const PhoneRegistrationPage: React.FC = () =&gt;
‚ãÆ----
const handleSendOTP = (e: React.FormEvent) =&gt;
‚ãÆ----
onChange=</file><file path="fe/components/auth/RegisterPage.tsx">import { useTranslation } from &apos;react-i18next&apos;
import { AllyLogo, BetaBadge } from &apos;@/components/shared/logo&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { ENV } from &apos;@/lib/constants&apos;
import { FcGoogle } from &apos;react-icons/fc&apos;
import ImageCarousel from &apos;@/components/auth/ImageCarousel&apos;
import { InteractiveHoverButton } from &apos;@/components/ui/interactive-hover-button&apos;
import Link from &apos;next/link&apos;
import React from &apos;react&apos;
‚ãÆ----
const handleGoogleSignUp = () =&gt;
‚ãÆ----
text=</file><file path="fe/components/contact/ContactForm.tsx">import React, { useState, useCallback } from &apos;react&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { Upload, X, CheckCircle, AlertCircle, Loader2 } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { Label } from &apos;@/components/ui/label&apos;
import { cn } from &apos;@/lib/utils&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
type FormState = {
  name: string
  email: string
  subject: string
  message: string
}
type SubmissionState = &apos;idle&apos; | &apos;loading&apos; | &apos;success&apos; | &apos;error&apos;
‚ãÆ----
const handleInputChange = (e: React.ChangeEvent&lt;HTMLInputElement | HTMLTextAreaElement&gt;) =&gt;
const validateFile = (file: File): string | null =&gt;
‚ãÆ----
const removeFile = (index: number) =&gt;
const handleDragOver = (e: React.DragEvent) =&gt;
const handleDragLeave = (e: React.DragEvent) =&gt;
const handleDrop = (e: React.DragEvent) =&gt;
const handleFileInputChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt;
const validateForm = (): string | null =&gt;
const handleSubmit = async (e: React.FormEvent) =&gt;
‚ãÆ----
className=
‚ãÆ----</file><file path="fe/components/dashboard/analytics/daily-hours-charts/DailyHoursAreaChart.tsx">import { Area, AreaChart, CartesianGrid, XAxis, YAxis } from &apos;recharts&apos;
import { format } from &apos;date-fns&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { DailyAvailableHoursDataPoint } from &apos;@/types/analytics&apos;
interface DailyHoursAreaChartProps {
  data: DailyAvailableHoursDataPoint[]
  onDayClick?: (date: string, hours: number) =&gt; void
}</file><file path="fe/components/dashboard/analytics/daily-hours-charts/DailyHoursBarChart.tsx">import { Bar, BarChart, CartesianGrid, XAxis } from &apos;recharts&apos;
import { format } from &apos;date-fns&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { DailyAvailableHoursDataPoint } from &apos;@/types/analytics&apos;
interface DailyHoursBarChartProps {
  data: DailyAvailableHoursDataPoint[]
  onDayClick?: (date: string, hours: number) =&gt; void
}</file><file path="fe/components/dashboard/analytics/daily-hours-charts/DailyHoursLineChart.tsx">import { Line, LineChart, CartesianGrid, XAxis, YAxis } from &apos;recharts&apos;
import { format } from &apos;date-fns&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { DailyAvailableHoursDataPoint } from &apos;@/types/analytics&apos;
interface DailyHoursLineChartProps {
  data: DailyAvailableHoursDataPoint[]
  onDayClick?: (date: string, hours: number) =&gt; void
}</file><file path="fe/components/dashboard/analytics/daily-hours-charts/DailyHoursStackedChart.tsx">import { Area, AreaChart, CartesianGrid, XAxis, YAxis, Legend } from &apos;recharts&apos;
import { format } from &apos;date-fns&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { DailyAvailableHoursDataPoint } from &apos;@/types/analytics&apos;
import { CALENDAR_CONSTANTS } from &apos;@/lib/constants&apos;
interface DailyHoursStackedChartProps {
  data: DailyAvailableHoursDataPoint[]
  onDayClick?: (date: string, hours: number) =&gt; void
}</file><file path="fe/components/dashboard/analytics/daily-hours-charts/index.ts"></file><file path="fe/components/dashboard/analytics/event-duration-charts/EventDurationBarChart.tsx">import { Bar, BarChart, XAxis, YAxis, Cell, ResponsiveContainer, Tooltip } from &apos;recharts&apos;
import type { EventDurationCategory } from &apos;@/types/analytics&apos;
import EventsListDialog from &apos;@/components/dialogs/EventsListDialog&apos;
interface EventDurationBarChartProps {
  data: EventDurationCategory[]
  onCategoryClick?: (category: EventDurationCategory) =&gt; void
}</file><file path="fe/components/dashboard/analytics/event-duration-charts/EventDurationPieChart.tsx">import { Pie, PieChart, Cell, ResponsiveContainer, Tooltip, Legend } from &apos;recharts&apos;
import type { EventDurationCategory } from &apos;@/types/analytics&apos;
import EventsListDialog from &apos;@/components/dialogs/EventsListDialog&apos;
interface EventDurationPieChartProps {
  data: EventDurationCategory[]
  onCategoryClick?: (category: EventDurationCategory) =&gt; void
}</file><file path="fe/components/dashboard/analytics/event-duration-charts/EventDurationProgressChart.tsx">import { Button } from &apos;@/components/ui/button&apos;
import type { EventDurationCategory } from &apos;@/types/analytics&apos;
import EventsListDialog from &apos;@/components/dialogs/EventsListDialog&apos;
interface EventDurationProgressChartProps {
  data: EventDurationCategory[]
  totalEvents: number
  onCategoryClick?: (category: EventDurationCategory) =&gt; void
}
‚ãÆ----
const handleCategoryClick = (category: EventDurationCategory) =&gt;
‚ãÆ----
onClick=</file><file path="fe/components/dashboard/analytics/monthly-pattern-charts/MonthlyPatternAreaChart.tsx">import { Area, AreaChart, XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip } from &apos;recharts&apos;
import type { MonthlyPatternDataPoint } from &apos;@/types/analytics&apos;
import EventsListDialog from &apos;@/components/dialogs/EventsListDialog&apos;
interface MonthlyPatternAreaChartProps {
  data: MonthlyPatternDataPoint[]
  onDayClick?: (dayOfMonth: number, events: MonthlyPatternDataPoint[&apos;events&apos;]) =&gt; void
}</file><file path="fe/components/dashboard/analytics/monthly-pattern-charts/MonthlyPatternBarChart.tsx">import { Bar, BarChart, XAxis, YAxis, Cell, ResponsiveContainer, Tooltip } from &apos;recharts&apos;
import type { MonthlyPatternDataPoint } from &apos;@/types/analytics&apos;
import EventsListDialog from &apos;@/components/dialogs/EventsListDialog&apos;
interface MonthlyPatternBarChartProps {
  data: MonthlyPatternDataPoint[]
  onDayClick?: (dayOfMonth: number, events: MonthlyPatternDataPoint[&apos;events&apos;]) =&gt; void
}
‚ãÆ----
const getBarColor = (hours: number) =&gt;
‚ãÆ----
onClose=</file><file path="fe/components/dashboard/analytics/monthly-pattern-charts/MonthlyPatternLineChart.tsx">import { Line, LineChart, XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip } from &apos;recharts&apos;
import type { MonthlyPatternDataPoint } from &apos;@/types/analytics&apos;
import EventsListDialog from &apos;@/components/dialogs/EventsListDialog&apos;
interface MonthlyPatternLineChartProps {
  data: MonthlyPatternDataPoint[]
  onDayClick?: (dayOfMonth: number, events: MonthlyPatternDataPoint[&apos;events&apos;]) =&gt; void
}</file><file path="fe/components/dashboard/analytics/time-allocation-charts/index.ts"></file><file path="fe/components/dashboard/analytics/time-allocation-charts/TimeAllocationBarChart.tsx">import { Bar, BarChart, CartesianGrid, XAxis, YAxis, Cell } from &apos;recharts&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { CalendarBreakdownItem } from &apos;@/types/analytics&apos;
import { getValidHexColor } from &apos;@/lib/colorUtils&apos;
interface TimeAllocationBarChartProps {
  data: CalendarBreakdownItem[]
  onCalendarClick?: (calendarId: string, calendarName: string, calendarColor: string) =&gt; void
}</file><file path="fe/components/dashboard/analytics/time-allocation-charts/TimeAllocationDonutChart.tsx">import { Pie, PieChart, Cell, Label, Tooltip } from &apos;recharts&apos;
import { ChartContainer, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { CalendarBreakdownItem } from &apos;@/types/analytics&apos;
import { getValidHexColor } from &apos;@/lib/colorUtils&apos;
import { calculatePercentage, sumBy } from &apos;@/lib/dataUtils&apos;
interface TimeAllocationDonutChartProps {
  data: CalendarBreakdownItem[]
  onCalendarClick?: (calendarId: string, calendarName: string, calendarColor: string) =&gt; void
}
‚ãÆ----
const handleClick = (entry: CalendarBreakdownItem) =&gt;</file><file path="fe/components/dashboard/analytics/time-allocation-charts/TimeAllocationHorizontalBarChart.tsx">import { Bar, BarChart, XAxis, YAxis, Cell } from &apos;recharts&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { CalendarBreakdownItem } from &apos;@/types/analytics&apos;
import { getValidHexColor } from &apos;@/lib/colorUtils&apos;
import { calculatePercentage, sumBy } from &apos;@/lib/dataUtils&apos;
interface TimeAllocationHorizontalBarChartProps {
  data: CalendarBreakdownItem[]
  onCalendarClick?: (calendarId: string, calendarName: string, calendarColor: string) =&gt; void
}</file><file path="fe/components/dashboard/analytics/time-allocation-charts/TimeAllocationPieChart.tsx">import { Pie, PieChart, Cell, Legend, Tooltip } from &apos;recharts&apos;
import { ChartContainer, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { CalendarBreakdownItem } from &apos;@/types/analytics&apos;
import { getValidHexColor } from &apos;@/lib/colorUtils&apos;
import { calculatePercentage, sumBy } from &apos;@/lib/dataUtils&apos;
interface TimeAllocationPieChartProps {
  data: CalendarBreakdownItem[]
  onCalendarClick?: (calendarId: string, calendarName: string, calendarColor: string) =&gt; void
}
‚ãÆ----
const handleClick = (entry: CalendarBreakdownItem) =&gt;</file><file path="fe/components/dashboard/analytics/time-allocation-charts/TimeAllocationRadarChart.tsx">import { Radar, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Tooltip } from &apos;recharts&apos;
import { ChartContainer, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { CalendarBreakdownItem } from &apos;@/types/analytics&apos;
import { getValidHexColor } from &apos;@/lib/colorUtils&apos;
import { calculateMax } from &apos;@/lib/dataUtils&apos;
interface TimeAllocationRadarChartProps {
  data: CalendarBreakdownItem[]
  onCalendarClick?: (calendarId: string, calendarName: string, calendarColor: string) =&gt; void
}
‚ãÆ----
// Chart config for styling
‚ãÆ----
const handleClick = (entry: typeof chartData[0]) =&gt;</file><file path="fe/components/dashboard/analytics/weekly-pattern-charts/WeeklyPatternAreaChart.tsx">import { Area, AreaChart, XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip } from &apos;recharts&apos;
import type { WeeklyPatternDataPoint } from &apos;@/types/analytics&apos;
import EventsListDialog from &apos;@/components/dialogs/EventsListDialog&apos;
interface WeeklyPatternAreaChartProps {
  data: WeeklyPatternDataPoint[]
  onDayClick?: (dayIndex: number, events: WeeklyPatternDataPoint[&apos;events&apos;]) =&gt; void
}</file><file path="fe/components/dashboard/analytics/weekly-pattern-charts/WeeklyPatternBarChart.tsx">import { Bar, BarChart, XAxis, YAxis, Cell } from &apos;recharts&apos;
import { ChartContainer, ChartTooltip, type ChartConfig } from &apos;@/components/ui/chart&apos;
import type { WeeklyPatternDataPoint } from &apos;@/types/analytics&apos;
import EventsListDialog from &apos;@/components/dialogs/EventsListDialog&apos;
interface WeeklyPatternBarChartProps {
  data: WeeklyPatternDataPoint[]
  onDayClick?: (dayIndex: number, events: WeeklyPatternDataPoint[&apos;events&apos;]) =&gt; void
}</file><file path="fe/components/dashboard/analytics/weekly-pattern-charts/WeeklyPatternLineChart.tsx">import { Line, LineChart, XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip } from &apos;recharts&apos;
import type { WeeklyPatternDataPoint } from &apos;@/types/analytics&apos;
import EventsListDialog from &apos;@/components/dialogs/EventsListDialog&apos;
interface WeeklyPatternLineChartProps {
  data: WeeklyPatternDataPoint[]
  onDayClick?: (dayIndex: number, events: WeeklyPatternDataPoint[&apos;events&apos;]) =&gt; void
}</file><file path="fe/components/dashboard/analytics/AnalyticsDashboard.tsx">import { Button } from &apos;@/components/ui/button&apos;
import { Info, RotateCw } from &apos;lucide-react&apos;
import type { CalendarEvent } from &apos;@/types/api&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import React from &apos;react&apos;
import { format } from &apos;date-fns&apos;
import { getDaysBetween } from &apos;@/lib/dateUtils&apos;
import AnalyticsDashboardSkeleton from &apos;./AnalyticsDashboardSkeleton&apos;
import BentoStatsGrid from &apos;./BentoStatsGrid&apos;
import { CalendarFilterSelect } from &apos;./CalendarFilterSelect&apos;
import CalendarEventsDialog from &apos;@/components/dialogs/CalendarEventsDialog&apos;
import CalendarSettingsDialog from &apos;@/components/dialogs/CalendarSettingsDialog&apos;
import CreateCalendarDialog from &apos;@/components/dialogs/CreateCalendarDialog&apos;
import DailyAvailableHoursDashboard from &apos;./DailyAvailableHoursDashboard&apos;
import DayEventsDialog from &apos;@/components/dialogs/DayEventsDialog&apos;
import { DatePickerWithRange } from &apos;@/components/ui/date-range-picker&apos;
import EventDetailsDialog from &apos;@/components/dialogs/EventDetailsDialog&apos;
import EventDurationDashboard from &apos;./EventDurationDashboard&apos;
import FocusTimeTracker from &apos;./FocusTimeTracker&apos;
import InsightCard from &apos;./InsightCard&apos;
import InsightCardSkeleton from &apos;./InsightCardSkeleton&apos;
import { InteractiveHoverButton } from &apos;@/components/ui/interactive-hover-button&apos;
import ManageCalendars from &apos;@/components/dashboard/analytics/ManageCalendars&apos;
import MonthlyPatternDashboard from &apos;./MonthlyPatternDashboard&apos;
import RecentEvents from &apos;@/components/dashboard/analytics/RecentEvents&apos;
import ScheduleHealthScore from &apos;./ScheduleHealthScore&apos;
import TimeAllocationDashboard from &apos;./TimeAllocationDashboard&apos;
import TimeDistributionChart from &apos;./TimeDistributionChart&apos;
import UpcomingWeekPreview from &apos;./UpcomingWeekPreview&apos;
import WeeklyPatternDashboard from &apos;./WeeklyPatternDashboard&apos;
import { getInsightIcon } from &apos;@/lib/iconUtils&apos;
import { useAIInsights } from &apos;@/hooks/queries/analytics/useAIInsights&apos;
import { useAnalyticsContext } from &apos;@/contexts/AnalyticsContext&apos;
interface AnalyticsDashboardProps {
  isLoading?: boolean
}
‚ãÆ----
(</file><file path="fe/components/dashboard/analytics/AnalyticsDashboardSkeleton.tsx">import {
  Skeleton,
  SkeletonCalendarSources,
  SkeletonChart,
  SkeletonDonutChart,
  SkeletonInsightCard,
  SkeletonList,
} from &apos;@/components/ui/skeleton&apos;
import React from &apos;react&apos;</file><file path="fe/components/dashboard/analytics/BentoStatsGrid.tsx">import React from &apos;react&apos;
import { motion } from &apos;framer-motion&apos;
import NumberFlow from &apos;@number-flow/react&apos;
import {
  Activity,
  CalendarDays,
  CalendarOff,
  Clock,
  Flame,
  Repeat,
  Star,
  Target,
  Timer,
  TrendingUp,
  TrendingDown,
  Minus,
  Zap,
  Sun,
} from &apos;lucide-react&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { useLanguage } from &apos;@/contexts/LanguageContext&apos;
import type { EnhancedAnalyticsData, ComparisonResult } from &apos;@/types/analytics&apos;
interface BentoStatsGridProps {
  data: EnhancedAnalyticsData
  comparison?: ComparisonResult | null
  isLoading?: boolean
}
‚ãÆ----
function TrendBadge(
function CircularProgress(
‚ãÆ----
const getColor = (score: number) =&gt;</file><file path="fe/components/dashboard/analytics/CalendarFilterSelect.tsx">import { Calendar, Check, ChevronDown, X } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Popover, PopoverContent, PopoverTrigger } from &apos;@/components/ui/popover&apos;
import { cn } from &apos;@/lib/utils&apos;
import { useTranslation } from &apos;react-i18next&apos;
import type { CalendarListEntry } from &apos;@/types/api&apos;
interface CalendarFilterSelectProps {
  calendars: CalendarListEntry[]
  selectedCalendarIds: string[]
  onSelectionChange: (ids: string[]) =&gt; void
  isLoading?: boolean
}
‚ãÆ----
const handleToggleCalendar = (calendarId: string) =&gt;
const handleSelectAll = () =&gt;
const handleClearSelection = () =&gt;
const getSelectedCalendarNames = () =&gt;
‚ãÆ----
className=</file><file path="fe/components/dashboard/analytics/ChartTypeWrapper.tsx">import { BarChart3, LineChart, AreaChart, Layers, PieChart, CircleDot, Radar, BarChartHorizontal } from &apos;lucide-react&apos;
import { AnimatePresence, motion } from &apos;framer-motion&apos;
import { Tabs, TabsList, TabsTrigger } from &apos;@/components/ui/tabs&apos;
import { useLanguage } from &apos;@/contexts/LanguageContext&apos;
‚ãÆ----
interface ChartTypeWrapperProps&lt;T extends string&gt; {
  chartId: string
  chartTypes: readonly T[]
  defaultType: T
  labels?: Partial&lt;Record&lt;T, string&gt;&gt;
  children: (chartType: T) =&gt; React.ReactNode
  className?: string
  tabsPosition?: &apos;left&apos; | &apos;right&apos;
}
export function ChartTypeWrapper&lt;T extends string&gt;({
  chartId,
  chartTypes,
  defaultType,
  labels = {},
  children,
  className,
  tabsPosition = &apos;right&apos;,
}: ChartTypeWrapperProps&lt;T&gt;)
‚ãÆ----
&lt;Tabs value={chartType} onValueChange={(value) =&gt; setChartType(value as T)}&gt;
          &lt;TabsList className=&quot;h-8&quot;&gt;</file><file path="fe/components/dashboard/analytics/DailyAvailableHoursChart.tsx">import { Bar, BarChart, CartesianGrid, XAxis } from &apos;recharts&apos;
import { Clock, Info } from &apos;lucide-react&apos;
import { format } from &apos;date-fns&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent, type ChartConfig } from &apos;@/components/ui/chart&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import type { DailyAvailableHoursDataPoint } from &apos;@/types/analytics&apos;
import { CALENDAR_CONSTANTS } from &apos;@/lib/constants&apos;
import { calculateAverage } from &apos;@/lib/dataUtils&apos;
interface DailyAvailableHoursChartProps {
  data: DailyAvailableHoursDataPoint[]
  onDayClick?: (date: string, hours: number) =&gt; void
}</file><file path="fe/components/dashboard/analytics/DailyAvailableHoursDashboard.tsx">import { Clock, Info } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { useLanguage } from &apos;@/contexts/LanguageContext&apos;
import type { DailyAvailableHoursDataPoint } from &apos;@/types/analytics&apos;
import { calculateAverage, formatNumber } from &apos;@/lib/dataUtils&apos;
import { CALENDAR_CONSTANTS } from &apos;@/lib/constants&apos;
import { ChartTypeWrapper } from &apos;./ChartTypeWrapper&apos;
import { DailyHoursBarChart } from &apos;./daily-hours-charts/DailyHoursBarChart&apos;
import { DailyHoursLineChart } from &apos;./daily-hours-charts/DailyHoursLineChart&apos;
import { DailyHoursAreaChart } from &apos;./daily-hours-charts/DailyHoursAreaChart&apos;
import { DailyHoursStackedChart } from &apos;./daily-hours-charts/DailyHoursStackedChart&apos;
interface DailyAvailableHoursDashboardProps {
  data: DailyAvailableHoursDataPoint[]
  onDayClick?: (date: string, hours: number) =&gt; void
  isLoading?: boolean
}</file><file path="fe/components/dashboard/analytics/EventDurationDashboard.tsx">import { Timer, Info } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { useLanguage } from &apos;@/contexts/LanguageContext&apos;
import type { EventDurationCategory } from &apos;@/types/analytics&apos;
import { formatNumber } from &apos;@/lib/dataUtils&apos;
import { ChartTypeWrapper } from &apos;./ChartTypeWrapper&apos;
import { EventDurationBarChart } from &apos;./event-duration-charts/EventDurationBarChart&apos;
import { EventDurationPieChart } from &apos;./event-duration-charts/EventDurationPieChart&apos;
import { EventDurationProgressChart } from &apos;./event-duration-charts/EventDurationProgressChart&apos;
‚ãÆ----
type DurationChartType = (typeof CHART_TYPES)[number]
interface EventDurationDashboardProps {
  data: EventDurationCategory[]
  totalEvents: number
  onCategoryClick?: (category: EventDurationCategory) =&gt; void
  isLoading?: boolean
}</file><file path="fe/components/dashboard/analytics/FocusTimeTracker.tsx">import React from &apos;react&apos;
import { Target, Clock, Zap, TrendingUp } from &apos;lucide-react&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import type { FocusTimeMetrics } from &apos;@/types/analytics&apos;
interface FocusTimeTrackerProps {
  data: FocusTimeMetrics
  totalDays: number
  isLoading?: boolean
}</file><file path="fe/components/dashboard/analytics/InsightCard.tsx">import type { InsightCardProps } from &apos;@/types/analytics&apos;
import React from &apos;react&apos;
import { getInsightColorClasses } from &apos;@/lib/colorUtils&apos;
const InsightCard: React.FC&lt;InsightCardProps&gt; = (</file><file path="fe/components/dashboard/analytics/InsightCardSkeleton.tsx">import React from &apos;react&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
const InsightCardSkeleton: React.FC = () =&gt;</file><file path="fe/components/dashboard/analytics/ManageCalendars.tsx">import { CalendarDays, CheckCircle, Plus } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import type { CalendarListEntry } from &apos;@/types/api&apos;
import React from &apos;react&apos;
interface ManageCalendarsProps {
  calendars: CalendarListEntry[]
  calendarMap: Map&lt;string, { name: string; color: string }&gt;
  onCalendarClick: (calendar: CalendarListEntry) =&gt; void
  onCreateCalendar: () =&gt; void
  isLoading?: boolean
}
‚ãÆ----
onCalendarClick(calendar)</file><file path="fe/components/dashboard/analytics/MonthlyPatternChart.tsx">import React, { useMemo } from &apos;react&apos;
import { Calendar } from &apos;lucide-react&apos;
import { Bar, BarChart, XAxis, YAxis, ResponsiveContainer, Cell } from &apos;recharts&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent } from &apos;@/components/ui/chart&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import type { MonthlyPatternDataPoint } from &apos;@/types/analytics&apos;
interface MonthlyPatternChartProps {
  data: MonthlyPatternDataPoint[]
  isLoading?: boolean
}</file><file path="fe/components/dashboard/analytics/MonthlyPatternDashboard.tsx">import { Calendar, Info } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { useLanguage } from &apos;@/contexts/LanguageContext&apos;
import type { MonthlyPatternDataPoint } from &apos;@/types/analytics&apos;
import { formatNumber } from &apos;@/lib/dataUtils&apos;
import { ChartTypeWrapper } from &apos;./ChartTypeWrapper&apos;
import { MonthlyPatternBarChart } from &apos;./monthly-pattern-charts/MonthlyPatternBarChart&apos;
import { MonthlyPatternLineChart } from &apos;./monthly-pattern-charts/MonthlyPatternLineChart&apos;
import { MonthlyPatternAreaChart } from &apos;./monthly-pattern-charts/MonthlyPatternAreaChart&apos;
‚ãÆ----
type MonthlyChartType = (typeof CHART_TYPES)[number]
interface MonthlyPatternDashboardProps {
  data: MonthlyPatternDataPoint[]
  onDayClick?: (dayOfMonth: number, events: MonthlyPatternDataPoint[&apos;events&apos;]) =&gt; void
  isLoading?: boolean
}</file><file path="fe/components/dashboard/analytics/RecentEvents.tsx">import { Button } from &apos;@/components/ui/button&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { Info, ListChecks } from &apos;lucide-react&apos;
import type { ProcessedActivity } from &apos;@/types/analytics&apos;
import React from &apos;react&apos;
interface RecentEventsProps {
  activities: ProcessedActivity[]
  onActivityClick: (activity: ProcessedActivity) =&gt; void
  isLoading?: boolean
  layout?: &apos;vertical&apos; | &apos;horizontal&apos;
}
‚ãÆ----
onClick=</file><file path="fe/components/dashboard/analytics/ScheduleHealthScore.tsx">import React, { useMemo } from &apos;react&apos;
import { Activity, AlertTriangle, CheckCircle, Clock, Coffee, Moon, Users } from &apos;lucide-react&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import type { EnhancedAnalyticsData } from &apos;@/types/analytics&apos;
interface ScheduleHealthScoreProps {
  data: EnhancedAnalyticsData
  isLoading?: boolean
}
interface HealthFactor {
  id: string
  label: string
  score: number
  maxScore: number
  icon: React.ComponentType&lt;{ className?: string }&gt;
  status: &apos;good&apos; | &apos;warning&apos; | &apos;bad&apos;
  tip: string
}
‚ãÆ----
const { factors, totalScore, maxScore } = healthAnalysis
  const percentage = Math.round((totalScore / maxScore) * 100)
const getOverallStatus = (score: number):
‚ãÆ----</file><file path="fe/components/dashboard/analytics/TimeAllocationChart.tsx">import { Button } from &apos;@/components/ui/button&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { calculatePercentage, sumBy } from &apos;@/lib/dataUtils&apos;
import { Info } from &apos;lucide-react&apos;
import React from &apos;react&apos;
import type { TimeAllocationChartProps } from &apos;@/types/analytics&apos;
import { getValidHexColor } from &apos;@/lib/colorUtils&apos;
import { motion } from &apos;framer-motion&apos;</file><file path="fe/components/dashboard/analytics/TimeAllocationDashboard.tsx">import { BarChart3, PieChart, CircleDot, Radar, BarChartHorizontal, Info } from &apos;lucide-react&apos;
import { AnimatePresence, motion } from &apos;framer-motion&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { Tabs, TabsList, TabsTrigger } from &apos;@/components/ui/tabs&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import type { CalendarBreakdownItem } from &apos;@/types/analytics&apos;
import { sumBy, calculatePercentage, formatNumber } from &apos;@/lib/dataUtils&apos;
import { getValidHexColor } from &apos;@/lib/colorUtils&apos;
import { TimeAllocationBarChart } from &apos;./time-allocation-charts/TimeAllocationBarChart&apos;
import { TimeAllocationPieChart } from &apos;./time-allocation-charts/TimeAllocationPieChart&apos;
import { TimeAllocationDonutChart } from &apos;./time-allocation-charts/TimeAllocationDonutChart&apos;
import { TimeAllocationRadarChart } from &apos;./time-allocation-charts/TimeAllocationRadarChart&apos;
import { TimeAllocationHorizontalBarChart } from &apos;./time-allocation-charts/TimeAllocationHorizontalBarChart&apos;
‚ãÆ----
type ChartType = (typeof CHART_TYPES)[number]
‚ãÆ----
interface ChartTypeConfig {
  icon: React.ComponentType&lt;{ size?: number }&gt;
  label: string
}
‚ãÆ----
interface TimeAllocationDashboardProps {
  data: CalendarBreakdownItem[]
  onCalendarClick?: (calendarId: string, calendarName: string, calendarColor: string) =&gt; void
  isLoading?: boolean
}</file><file path="fe/components/dashboard/analytics/TimeDistributionChart.tsx">import React, { useMemo } from &apos;react&apos;
import { Clock } from &apos;lucide-react&apos;
import { PieChart, Pie, Cell, ResponsiveContainer } from &apos;recharts&apos;
import { ChartContainer, ChartTooltip, ChartTooltipContent } from &apos;@/components/ui/chart&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import type { TimeOfDayDistribution } from &apos;@/types/analytics&apos;
interface TimeDistributionChartProps {
  data: TimeOfDayDistribution
  isLoading?: boolean
}</file><file path="fe/components/dashboard/analytics/TimeSavedChart.tsx">import React, { useRef, useState } from &apos;react&apos;
import { calculateMax } from &apos;@/lib/dataUtils&apos;
import { motion } from &apos;framer-motion&apos;
import { useContainerDimensions } from &apos;@/hooks/useContainerDimensions&apos;
interface TimeSavedChartProps {
  data: { day: string; hours: number }[]
}
‚ãÆ----
const getX = (index: number)
const getY = (hours: number)
‚ãÆ----
const handleMouseMove = (e: React.MouseEvent&lt;SVGSVGElement&gt;) =&gt;
const handleMouseLeave = () =&gt;</file><file path="fe/components/dashboard/analytics/TimeSavedColumnChart.tsx">import React, { useRef, useState } from &apos;react&apos;
import { calculateAvailableHoursLeft, calculateMax } from &apos;@/lib/dataUtils&apos;
import { CALENDAR_CONSTANTS } from &apos;@/lib/constants&apos;
import { format } from &apos;date-fns&apos;
import { motion } from &apos;framer-motion&apos;
import { useContainerDimensions } from &apos;@/hooks/useContainerDimensions&apos;
interface TimeSavedColumnChartProps {
  data: { day: number; date: string; hours: number }[]
}
‚ãÆ----
const _getY = (hours: number)
const getBarHeight = (hours: number)
‚ãÆ----
onMouseEnter=
‚ãÆ----
width=</file><file path="fe/components/dashboard/analytics/UpcomingWeekPreview.tsx">import React from &apos;react&apos;
import { CalendarDays, Clock, AlertCircle, Repeat } from &apos;lucide-react&apos;
import { format } from &apos;date-fns&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import type { UpcomingWeekData, UpcomingDayData } from &apos;@/hooks/queries/analytics/useUpcomingWeekData&apos;
interface UpcomingWeekPreviewProps {
  data: UpcomingWeekData | undefined
  isLoading?: boolean
  isError?: boolean
  onRetry?: () =&gt; void
}</file><file path="fe/components/dashboard/analytics/WeeklyPatternDashboard.tsx">import { CalendarDays, Info } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { useLanguage } from &apos;@/contexts/LanguageContext&apos;
import type { WeeklyPatternDataPoint } from &apos;@/types/analytics&apos;
import { formatNumber } from &apos;@/lib/dataUtils&apos;
import { ChartTypeWrapper } from &apos;./ChartTypeWrapper&apos;
import { WeeklyPatternBarChart } from &apos;./weekly-pattern-charts/WeeklyPatternBarChart&apos;
import { WeeklyPatternLineChart } from &apos;./weekly-pattern-charts/WeeklyPatternLineChart&apos;
import { WeeklyPatternAreaChart } from &apos;./weekly-pattern-charts/WeeklyPatternAreaChart&apos;
‚ãÆ----
type WeeklyChartType = (typeof CHART_TYPES)[number]
interface WeeklyPatternDashboardProps {
  data: WeeklyPatternDataPoint[]
  onDayClick?: (dayIndex: number, events: WeeklyPatternDataPoint[&apos;events&apos;]) =&gt; void
  isLoading?: boolean
}</file><file path="fe/components/dashboard/billing/PaymentMethodCard.tsx">import React from &apos;react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Card } from &apos;@/components/ui/card&apos;
import { cn } from &apos;@/lib/utils&apos;
import type { PaymentMethod, CardBrand } from &apos;@/services/payment.service&apos;
interface PaymentMethodCardProps {
  paymentMethod: PaymentMethod | null
  onUpdate?: () =&gt; void
  className?: string
}
function VisaIcon(
‚ãÆ----
&lt;svg className=
‚ãÆ----
function AmexIcon(
function DiscoverIcon(
function GenericCardIcon(
‚ãÆ----
&lt;Card className=</file><file path="fe/components/dashboard/billing/TransactionHistoryTable.tsx">import React, { useState } from &apos;react&apos;
import { format } from &apos;date-fns&apos;
import { Download, CheckCircle2, Clock, XCircle, ChevronDown, ChevronUp, Receipt } from &apos;lucide-react&apos;
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from &apos;@/components/ui/table&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { cn } from &apos;@/lib/utils&apos;
import type { Transaction, TransactionStatus } from &apos;@/services/payment.service&apos;
interface TransactionHistoryTableProps {
  transactions: Transaction[]
  className?: string
}
‚ãÆ----
function StatusBadge(
‚ãÆ----
className=
‚ãÆ----
function formatAmount(amount: number, currency: string): string
‚ãÆ----
onClick=
‚ãÆ----
&lt;div className=
‚ãÆ----
onToggle=</file><file path="fe/components/dashboard/chat/AgentProfileSelector.tsx">import { Check, ChevronDown, Sparkles, Zap, Crown, Bot } from &apos;lucide-react&apos;
import { cn } from &apos;@/lib/utils&apos;
import { Button } from &apos;@/components/ui/button&apos;
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from &apos;@/components/ui/dropdown-menu&apos;
import {
  useAgentProfiles,
  useSelectedAgentProfile,
  useUpdateSelectedAgentProfile,
  type AgentProfile,
  type AgentTier,
} from &apos;@/hooks/queries/agent-profiles&apos;
‚ãÆ----
className=
‚ãÆ----
onSelect=</file><file path="fe/components/dashboard/chat/AssistantAvatar.tsx">import React from &apos;react&apos;
import { Typewriter } from &apos;@/components/ui/typewriter&apos;
import { VoicePoweredOrb } from &apos;@/components/ui/voice-powered-orb&apos;
interface AssistantAvatarProps {
  isRecording: boolean
  isSpeaking: boolean
  isLoading: boolean
  compact?: boolean
}</file><file path="fe/components/dashboard/chat/AvatarView.tsx">import { AnimatePresence, motion } from &apos;framer-motion&apos;
import { Check, MessageSquare, X } from &apos;lucide-react&apos;
import React, { useEffect, useRef, useState } from &apos;react&apos;
import { AssistantAvatar } from &apos;./AssistantAvatar&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Message } from &apos;@/types&apos;
import { MessageActions } from &apos;./MessageActions&apos;
interface AvatarViewProps {
  messages: Message[]
  isRecording: boolean
  isSpeaking: boolean
  speakingMessageId: string | null
  isLoading: boolean
  onResend: (text: string) =&gt; void
  onEditAndResend: (messageId: string, newText: string) =&gt; void
  onSpeak: (text: string, messageId?: string) =&gt; void
  avatarScrollRef: React.RefObject&lt;HTMLDivElement | null&gt;
}
‚ãÆ----
const handleStartEdit = (msg: Message) =&gt;
const handleCancelEdit = () =&gt;
const handleConfirmEdit = () =&gt;
const handleKeyDown = (e: React.KeyboardEvent) =&gt;</file><file path="fe/components/dashboard/chat/ChatInput.tsx">import { ArrowUp, ImagePlus, Mic, Pause, X, ChevronLeft, ChevronRight } from &apos;lucide-react&apos;
import React, { forwardRef, useCallback, useMemo, useRef, useState } from &apos;react&apos;
import { AIVoiceInput } from &apos;@/components/ui/ai-voice-input&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Dialog, DialogContent, DialogTitle } from &apos;@/components/ui/dialog&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { VisuallyHidden } from &apos;@radix-ui/react-visually-hidden&apos;
import { getTextDirection } from &apos;@/lib/utils&apos;
import { INPUT_LIMITS, validateInputLength } from &apos;@/lib/security/sanitize&apos;
import { toast } from &apos;sonner&apos;
export interface ImageFile {
  id: string
  file: File
  preview: string
  base64?: string
}
interface ImageLightboxProps {
  images: ImageFile[]
  currentIndex: number
  open: boolean
  onOpenChange: (open: boolean) =&gt; void
  onPrevious: () =&gt; void
  onNext: () =&gt; void
}
‚ãÆ----
// Reset input so same file can be selected again</file><file path="fe/components/dashboard/chat/ChatInterface.tsx">import React, { useCallback, useEffect, useRef, useState } from &apos;react&apos;
import { AgentProfileSelector } from &apos;./AgentProfileSelector&apos;
import { AvatarView } from &apos;./AvatarView&apos;
import { ChatInput, ImageFile } from &apos;./ChatInput&apos;
import { ChatView } from &apos;./ChatView&apos;
import { Message } from &apos;@/types&apos;
import { ThreeDView } from &apos;./ThreeDView&apos;
import { ViewSwitcher } from &apos;./ViewSwitcher&apos;
import { useChatContext } from &apos;@/contexts/ChatContext&apos;
import { useSpeechRecognition } from &apos;@/hooks/useSpeechRecognition&apos;
import { useStreamingChat } from &apos;@/hooks/useStreamingChat&apos;
import { ttsCache } from &apos;@/services/tts-cache.service&apos;
import { LoadingSpinner } from &apos;@/components/ui/loading-spinner&apos;
import { useVoicePreference } from &apos;@/hooks/queries&apos;
import { toast } from &apos;sonner&apos;
‚ãÆ----
interface Window {
    webkitAudioContext: typeof AudioContext
  }
‚ãÆ----
type ActiveTab = &apos;chat&apos; | &apos;avatar&apos; | &apos;3d&apos;
‚ãÆ----
const handleVisibilityChange = () =&gt;
‚ãÆ----
const stopSpeaking = () =&gt;
const speakText = async (text: string, messageId?: string) =&gt;
const handleSend = async (e?: React.FormEvent, textToSend: string = input) =&gt;
‚ãÆ----
// Clean up image previews and clear images state
‚ãÆ----
// Pass images to streaming message
‚ãÆ----
const handleResend = (text: string) =&gt;
const handleEditMessage = (text: string) =&gt;
const handleEditAndResend = (messageId: string, newText: string) =&gt;
const handleCancel = () =&gt;
‚ãÆ----
const scrollToBottom = () =&gt;</file><file path="fe/components/dashboard/chat/ChatTabSkeleton.tsx">import { Skeleton, SkeletonMessageBubble } from &apos;@/components/ui/skeleton&apos;
import React from &apos;react&apos;
const ChatTabSkeleton: React.FC = () =&gt;</file><file path="fe/components/dashboard/chat/ChatView.tsx">import { AlertCircle } from &apos;lucide-react&apos;
import { Message } from &apos;@/types&apos;
import { MessageActions } from &apos;./MessageActions&apos;
import MessageBubble from &apos;@/components/dashboard/chat/MessageBubble&apos;
import { StreamingMessage } from &apos;./StreamingMessage&apos;
import React from &apos;react&apos;
interface ChatViewProps {
  messages: Message[]
  isLoading: boolean
  error: string | null
  isSpeaking: boolean
  speakingMessageId: string | null
  onResend: (text: string) =&gt; void
  onEdit: (text: string) =&gt; void
  onSpeak: (text: string, messageId?: string) =&gt; void
  scrollRef: React.RefObject&lt;HTMLDivElement | null&gt;
  streamingText?: string
  currentTool?: string | null
}
‚ãÆ----
onSpeak=</file><file path="fe/components/dashboard/chat/ComingSoonPlaceholder.tsx">import React from &apos;react&apos;
import { Box, Laptop } from &apos;lucide-react&apos;
export const ComingSoonPlaceholder: React.FC = ()</file><file path="fe/components/dashboard/chat/MessageActions.tsx">import React, { useState } from &apos;react&apos;
import { Check, Clock, Copy, Edit2, RotateCcw, Volume2 } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Message } from &apos;@/types&apos;
import { toast } from &apos;sonner&apos;
interface MessageActionsProps {
  msg: Message
  isSpeaking: boolean
  onResend: (text: string) =&gt; void
  onEdit: (text: string) =&gt; void
  onSpeak: (text: string) =&gt; void
}
export const MessageActions: React.FC&lt;MessageActionsProps&gt; = (
‚ãÆ----
const handleCopy = async () =&gt;</file><file path="fe/components/dashboard/chat/MessageBubble.tsx">import React, { useMemo, useState, useCallback } from &apos;react&apos;
import ReactMarkdown from &apos;react-markdown&apos;
import { Role, MessageImage } from &apos;@/types&apos;
import remarkGfm from &apos;remark-gfm&apos;
import { getTextDirection } from &apos;@/lib/utils&apos;
import { ChevronLeft, ChevronRight } from &apos;lucide-react&apos;
import { Dialog, DialogContent, DialogTitle } from &apos;@/components/ui/dialog&apos;
import { VisuallyHidden } from &apos;@radix-ui/react-visually-hidden&apos;
interface MessageBubbleProps {
  role: Role
  content: string
  timestamp: Date
  images?: MessageImage[]
  hideTimestamp?: boolean
}
interface MessageImageLightboxProps {
  images: MessageImage[]
  currentIndex: number
  open: boolean
  onOpenChange: (open: boolean) =&gt; void
  onPrevious: () =&gt; void
  onNext: () =&gt; void
}</file><file path="fe/components/dashboard/chat/StreamingMessage.tsx">import React, { useMemo } from &apos;react&apos;
import ReactMarkdown from &apos;react-markdown&apos;
import remarkGfm from &apos;remark-gfm&apos;
import { Loader2 } from &apos;lucide-react&apos;
import { getTextDirection } from &apos;@/lib/utils&apos;
interface StreamingMessageProps {
  content: string
  currentTool: string | null
  isStreaming: boolean
}
‚ãÆ----
function getToolDisplayName(tool: string): string</file><file path="fe/components/dashboard/chat/ThreeDView.tsx">import React, { useState, useEffect, useRef } from &apos;react&apos;
import { motion } from &apos;framer-motion&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Smile, Frown, Brain, Ear, MessageCircle, Pause, Loader2 } from &apos;lucide-react&apos;
type AllyAnimationState = &apos;idle&apos; | &apos;talking&apos; | &apos;listening&apos; | &apos;thinking&apos; | &apos;happy&apos; | &apos;sad&apos;
‚ãÆ----
const handleAnimationChange = (state: AllyAnimationState) =&gt;
‚ãÆ----
onClick=</file><file path="fe/components/dashboard/chat/TwoDTabSkeleton.tsx">import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { MessageSquare } from &apos;lucide-react&apos;
import React from &apos;react&apos;</file><file path="fe/components/dashboard/chat/ViewSwitcher.tsx">import { Box, MessageSquare, User } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import React from &apos;react&apos;
type ActiveTab = &apos;chat&apos; | &apos;avatar&apos; | &apos;3d&apos;
interface ViewSwitcherProps {
  activeTab: ActiveTab
  onTabChange: (tab: ActiveTab) =&gt; void
}
export const ViewSwitcher: React.FC&lt;ViewSwitcherProps&gt; = (</file><file path="fe/components/dashboard/shared/settings-tabs/components/index.ts"></file><file path="fe/components/dashboard/shared/settings-tabs/components/SettingsDropdown.tsx">import React from &apos;react&apos;
import { ChevronDown, Check } from &apos;lucide-react&apos;
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from &apos;@/components/ui/dropdown-menu&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { cn } from &apos;@/lib/utils&apos;
export interface DropdownOption {
  value: string
  label: string
  icon?: React.ReactNode
}
interface SettingsDropdownProps {
  value: string
  options: DropdownOption[]
  onChange: (value: string) =&gt; void
  placeholder?: string
  className?: string
  id?: string
}
‚ãÆ----
&lt;Button id=
‚ãÆ----
const getDisplayText = () =&gt;
const toggleOption = (optionValue: string) =&gt;
‚ãÆ----
e.preventDefault()
toggleOption(option.value)
‚ãÆ----
className=</file><file path="fe/components/dashboard/shared/settings-tabs/components/SettingsRow.tsx">import React from &apos;react&apos;
import { HelpCircle } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from &apos;@/components/ui/tooltip&apos;
import { cn } from &apos;@/lib/utils&apos;
interface SettingsRowProps {
  title: string
  tooltip: string
  control: React.ReactNode
  id?: string
  className?: string
  icon?: React.ReactNode
}
‚ãÆ----
className=</file><file path="fe/components/dashboard/shared/settings-tabs/components/SettingsSection.tsx">import React from &apos;react&apos;
import { cn } from &apos;@/lib/utils&apos;
interface SettingsSectionProps {
  title?: string
  children: React.ReactNode
  className?: string
  showDivider?: boolean
}
export const SettingsSection: React.FC&lt;SettingsSectionProps&gt; = ({
  title,
  children,
  className,
  showDivider = false,
}) =&gt;
‚ãÆ----
&lt;div className=</file><file path="fe/components/dashboard/shared/settings-tabs/components/TimePicker.tsx">import React from &apos;react&apos;
import { cn } from &apos;@/lib/utils&apos;
interface TimePickerProps {
  value: string
  onChange: (time: string) =&gt; void
  disabled?: boolean
  className?: string
  id?: string
}</file><file path="fe/components/dashboard/shared/settings-tabs/components/TimezoneSelector.tsx">import React, { useState, useMemo } from &apos;react&apos;
import { ChevronDown, Check, Search } from &apos;lucide-react&apos;
import { Popover, PopoverContent, PopoverTrigger } from &apos;@/components/ui/popover&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { cn } from &apos;@/lib/utils&apos;
‚ãÆ----
interface TimezoneSelectorProps {
  value: string
  onChange: (timezone: string) =&gt; void
  disabled?: boolean
  className?: string
  id?: string
}
‚ãÆ----
className=
‚ãÆ----
onChange(tz.value)</file><file path="fe/components/dashboard/shared/settings-tabs/AssistantTab.tsx">import React, { useEffect, useState, useRef } from &apos;react&apos;
import { useForm, useWatch } from &apos;react-hook-form&apos;
import { zodResolver } from &apos;@hookform/resolvers/zod&apos;
import {
  AlertTriangle,
  Brain,
  Check,
  Loader2,
  Play,
  Sparkles,
  Square,
  Volume2,
  Lightbulb,
  CalendarCheck,
  Database,
  Mic,
  Music,
} from &apos;lucide-react&apos;
import { toast } from &apos;sonner&apos;
import { motion, AnimatePresence } from &apos;framer-motion&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Label } from &apos;@/components/ui/label&apos;
import { LoadingSection } from &apos;@/components/ui/loading-spinner&apos;
import CinematicGlowToggle from &apos;@/components/ui/cinematic-glow-toggle&apos;
import { SettingsRow, SettingsSection, SettingsDropdown, type DropdownOption } from &apos;./components&apos;
import { voiceService } from &apos;@/services/voice.service&apos;
import {
  useAllyBrain,
  useUpdateAllyBrain,
  useContextualScheduling,
  useUpdateContextualScheduling,
  useVoicePreference,
  useUpdateVoicePreference,
} from &apos;@/hooks/queries&apos;
import {
  allyBrainSchema,
  type AllyBrainFormData,
  allyBrainDefaults,
  ALLY_BRAIN_PLACEHOLDER,
  VOICE_OPTIONS,
  type TTSVoice,
} from &apos;@/lib/validations/preferences&apos;
interface AssistantTabProps {}
‚ãÆ----
const handleContextualToggle = (checked: boolean) =&gt;
const handleVoiceToggle = (checked: boolean) =&gt;
const handleVoiceChange = (voice: string) =&gt;
const stopPreview = () =&gt;
const playVoicePreview = async () =&gt;
‚ãÆ----
const onSubmit = async (data: AllyBrainFormData) =&gt;
‚ãÆ----
&lt;form onSubmit=</file><file path="fe/components/dashboard/shared/settings-tabs/DataControlsTab.tsx">import { Brain, Download, Loader2, MessageSquareX, Trash2, MessageCircleX, Eraser, UserX } from &apos;lucide-react&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { SettingsRow, SettingsSection } from &apos;./components&apos;
import { Button } from &apos;@/components/ui/button&apos;
import React from &apos;react&apos;
interface DataControlsTabProps {
  onDeleteAllConversations: () =&gt; void
  isDeletingConversations: boolean
  onResetMemory: () =&gt; void
  isResettingMemory: boolean
  onDeleteAccount: () =&gt; void
}
‚ãÆ----
const handleExport = () =&gt;</file><file path="fe/components/dashboard/shared/settings-tabs/GeneralTab.tsx">import React, { useState } from &apos;react&apos;
import Image from &apos;next/image&apos;
import { Moon, Sun, Monitor, Palette, Globe, Clock } from &apos;lucide-react&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { SettingsRow, SettingsDropdown, SettingsSection, type DropdownOption } from &apos;./components&apos;
import { getUserDisplayInfo, type UserData } from &apos;@/lib/user-utils&apos;
interface GeneralTabProps {
  isDarkMode: boolean
  toggleTheme: () =&gt; void
  userData: UserData | null | undefined
  isUserLoading: boolean
}
‚ãÆ----
const handleAppearanceChange = (value: string) =&gt;</file><file path="fe/components/dashboard/shared/settings-tabs/index.ts"></file><file path="fe/components/dashboard/shared/settings-tabs/IntegrationsTab.tsx">import { AlertTriangle, ArrowUpRight, Calendar, CheckCircle2, Circle, Hash, Loader2, Phone, Plus, RefreshCw, Send, X } from &apos;lucide-react&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { SettingsRow, SettingsSection } from &apos;./components&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { Button } from &apos;@/components/ui/button&apos;
import type { GoogleCalendarIntegrationStatus } from &apos;@/types/api&apos;
import React from &apos;react&apos;
interface IntegrationsTabProps {
  googleCalendarStatus: GoogleCalendarIntegrationStatus | null | undefined
  isGoogleCalendarLoading: boolean
  isGoogleCalendarBusy: boolean
  isDisconnecting: boolean
  onResync: () =&gt; void
  onDisconnect: () =&gt; void
}
‚ãÆ----
control=</file><file path="fe/components/dashboard/shared/settings-tabs/NotificationsTab.tsx">import React, { useEffect, useState } from &apos;react&apos;
import { Bell, Check, Loader2, Mail, Plus, Trash2, CheckCircle, AlertTriangle, Sparkles, CalendarDays, BellRing, CalendarCog } from &apos;lucide-react&apos;
import { toast } from &apos;sonner&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { LoadingSection } from &apos;@/components/ui/loading-spinner&apos;
import CinematicGlowToggle from &apos;@/components/ui/cinematic-glow-toggle&apos;
import {
  SettingsRow,
  SettingsDropdown,
  SettingsSection,
  TimePicker,
  TimezoneSelector,
  type DropdownOption,
} from &apos;./components&apos;
import { useReminderDefaults, useUpdateReminderDefaults, useDailyBriefing, useUpdateDailyBriefing } from &apos;@/hooks/queries&apos;
import {
  type EventReminder,
  type ReminderDefaultsFormData,
  type DailyBriefingFormData,
  REMINDER_TIME_OPTIONS,
  reminderDefaultsDefaults,
  dailyBriefingDefaults,
} from &apos;@/lib/validations/preferences&apos;
‚ãÆ----
const handleToggleEnabled = (checked: boolean) =&gt;
const handleToggleCalendarDefaults = (checked: boolean) =&gt;
const handleAddReminder = () =&gt;
const handleRemoveReminder = (index: number) =&gt;
const handleUpdateReminder = (index: number, field: keyof EventReminder, value: string | number) =&gt;
const handleSaveReminders = async () =&gt;
const handleToggleBriefing = (checked: boolean) =&gt;
const handleBriefingTimeChange = (time: string) =&gt;
const handleBriefingTimezoneChange = (timezone: string) =&gt;
const handleSaveBriefing = async () =&gt;
const formatTime = (time: string) =&gt;
‚ãÆ----
value=
‚ãÆ----
onChange=</file><file path="fe/components/dashboard/shared/settings-tabs/SecurityTab.tsx">import React, { useState } from &apos;react&apos;
import { ChevronRight, ShieldCheck, Monitor } from &apos;lucide-react&apos;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import { Button } from &apos;@/components/ui/button&apos;
import CinematicGlowToggle from &apos;@/components/ui/cinematic-glow-toggle&apos;
import { SettingsRow, SettingsSection } from &apos;./components&apos;
export const SecurityTab: React.FC = () =&gt;</file><file path="fe/components/dashboard/shared/settings-tabs/SubscriptionTab.tsx">import React, { useState } from &apos;react&apos;
import { AnimatePresence, motion } from &apos;framer-motion&apos;
import {
  Crown,
  Zap,
  Shield,
  Check,
  ArrowRight,
  RefreshCw,
  ArrowDown,
  BadgeCheck,
  Minus,
  Plus,
  ExternalLink,
} from &apos;lucide-react&apos;
import { Card, CardContent } from &apos;@/components/ui/card&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { LoadingSection } from &apos;@/components/ui/loading-spinner&apos;
import { Tab } from &apos;@/components/ui/pricing-tab&apos;
import {
  redirectToCheckout,
  redirectToCreditPackCheckout,
  redirectToBillingPortal,
  upgradeSubscription,
  type Plan,
  type PlanSlug,
  type PlanInterval,
} from &apos;@/services/payment.service&apos;
import NumberFlow from &apos;@number-flow/react&apos;
import { cn } from &apos;@/lib/utils&apos;
import { useSubscriptionStatus, usePlans } from &apos;@/hooks/queries/billing&apos;
‚ãÆ----
const getPlanIcon = (planSlug: string) =&gt;
const getCurrentPlanOrder = (): number =&gt;
const getActionType = (planSlug: PlanSlug): &apos;upgrade&apos; | &apos;downgrade&apos; | &apos;current&apos; =&gt;
const handlePlanAction = async (plan: Plan, customCredits?: number) =&gt;
const handleManageBilling = async () =&gt;
‚ãÆ----
className=
‚ãÆ----
onClick=
‚ãÆ----
onChange=</file><file path="fe/components/dashboard/shared/sidebar-components/ConversationList.tsx">import React from &apos;react&apos;
import { Clock, MessageSquare, Search, Trash2, X } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Input } from &apos;@/components/ui/input&apos;
import { formatRelativeDate } from &apos;@/lib/dateUtils&apos;
import type { ConversationListItem } from &apos;@/services/chatService&apos;
import { StreamingTitle } from &apos;./StreamingTitle&apos;
interface ConversationListProps {
  conversations: ConversationListItem[]
  selectedConversationId: string | null
  streamingTitleConversationId: string | null
  isLoading: boolean
  isSearching: boolean
  localSearchValue: string
  onSearchChange: (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; void
  onClearSearch: () =&gt; void
  onSelectConversation: (conversation: ConversationListItem) =&gt; void
  onInitiateDelete: (e: React.MouseEvent, id: string) =&gt; void
}
‚ãÆ----
onClick=</file><file path="fe/components/dashboard/shared/sidebar-components/DeleteConfirmDialog.tsx">import React from &apos;react&apos;
import { ConfirmDialog } from &apos;../ConfirmDialog&apos;
interface DeleteConfirmDialogProps {
  isOpen: boolean
  onClose: () =&gt; void
  onConfirm: () =&gt; void
  isLoading?: boolean
}
export const DeleteConfirmDialog: React.FC&lt;DeleteConfirmDialogProps&gt; = ({
  isOpen,
  onClose,
  onConfirm,
  isLoading = false,
}) =&gt;</file><file path="fe/components/dashboard/shared/sidebar-components/index.ts"></file><file path="fe/components/dashboard/shared/sidebar-components/SidebarFooter.tsx">import React from &apos;react&apos;
import Image from &apos;next/image&apos;
import { useRouter } from &apos;next/navigation&apos;
import { BadgeCheck, Bell, CreditCard, LogOut, MoreHorizontal, Settings, Sparkles } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from &apos;@/components/ui/dropdown-menu&apos;
import UserProfileCard from &apos;@/components/dashboard/shared/UserProfileCard&apos;
import { getUserDisplayInfo, type UserData } from &apos;@/lib/user-utils&apos;
interface SidebarFooterProps {
  isOpen: boolean
  userData: UserData | null | undefined
  onOpenSettings: () =&gt; void
  onClose: () =&gt; void
  onSignOut?: () =&gt; void
}
‚ãÆ----
onOpenSettings()
onClose()</file><file path="fe/components/dashboard/shared/sidebar-components/SidebarHeader.tsx">import { AllyLogo, BetaBadge } from &apos;@/components/shared/logo&apos;
import { ChevronLeft, ChevronRight, Plus } from &apos;lucide-react&apos;
import { AnimatedHamburger } from &apos;@/components/ui/animated-hamburger&apos;
import { Button } from &apos;@/components/ui/button&apos;
import Link from &apos;next/link&apos;
import React from &apos;react&apos;
interface SidebarHeaderProps {
  isOpen: boolean
  onClose: () =&gt; void
  onToggle: () =&gt; void
  onNewChat: () =&gt; void
}</file><file path="fe/components/dashboard/shared/sidebar-components/SidebarNav.tsx">import { BarChart2, LayoutDashboard, Shield } from &apos;lucide-react&apos;
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from &apos;@/components/ui/tooltip&apos;
import Link from &apos;next/link&apos;
import React from &apos;react&apos;
import { useLanguage } from &apos;@/contexts/LanguageContext&apos;
import { useUser } from &apos;@/hooks/queries/auth/useUser&apos;
interface NavLinkProps {
  href: string
  activePath: string
  isOpen: boolean
  icon: React.ComponentType&lt;{ className?: string }&gt;
  id?: string
  description?: string
  onClick?: () =&gt; void
  children?: React.ReactNode
}
const NavLink: React.FC&lt;NavLinkProps&gt; = ({
  href,
  activePath,
  isOpen,
  icon: Icon,
  id,
  description,
  onClick,
  children,
}) =&gt;
interface SidebarNavProps {
  pathname: string
  isOpen: boolean
  onClose: () =&gt; void
}</file><file path="fe/components/dashboard/shared/sidebar-components/StreamingTitle.tsx">import React, { useState, useEffect, useRef } from &apos;react&apos;
interface StreamingTitleProps {
  title: string
  isStreaming: boolean
  className?: string
}
‚ãÆ----
export const StreamingTitle: React.FC&lt;StreamingTitleProps&gt; = (
‚ãÆ----
const animate = () =&gt;</file><file path="fe/components/dashboard/shared/AIAllySidebar.tsx">import { AnimatePresence, motion } from &quot;framer-motion&quot;;
import { ArrowUp, ChevronDown, Mic, X } from &quot;lucide-react&quot;;
import React, { useEffect, useRef, useState } from &quot;react&quot;;
import { AIVoiceInput } from &quot;@/components/ui/ai-voice-input&quot;;
import { Button } from &quot;@/components/ui/button&quot;;
import { Input } from &quot;@/components/ui/input&quot;;
import { VoicePoweredOrb } from &quot;@/components/ui/voice-powered-orb&quot;;
import { cn } from &quot;@/lib/utils&quot;;
import { useSpeechRecognition } from &quot;@/hooks/useSpeechRecognition&quot;;
interface AIAllySidebarProps {
  isOpen: boolean;
  onClose: () =&gt; void;
  onOpen?: () =&gt; void;
}
const AllyOrbButton: React.FC&lt;
‚ãÆ----
className=
‚ãÆ----
const handleSendMessage = (textToSend: string = inputText) =&gt;
‚ãÆ----
// Simulate AI response
‚ãÆ----
// Handler wrappers for AIVoiceInput component
const handleStartRecording = () =&gt;
const handleStopRecording = (text: string) =&gt;
const handleCancelRecording = () =&gt;
const handleToggleRecording = () =&gt;
const scrollToBottom = () =&gt;
‚ãÆ----
&lt;AllyOrbButton onClick=
‚ãÆ----
setInputText(action.label);
inputRef.current?.focus();
‚ãÆ----
e.preventDefault();
handleSendMessage();</file><file path="fe/components/dashboard/shared/ConfirmDialog.tsx">import React, { useCallback, useEffect } from &apos;react&apos;
import { Loader2 } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from &apos;@/components/ui/dialog&apos;
export interface ConfirmDialogProps {
  isOpen: boolean
  onClose: () =&gt; void
  onConfirm: () =&gt; void
  title: string
  description: string
  confirmLabel?: string
  cancelLabel?: string
  variant?: &apos;destructive&apos; | &apos;warning&apos; | &apos;default&apos;
  isLoading?: boolean
}
export const ConfirmDialog: React.FC&lt;ConfirmDialogProps&gt; = ({
  isOpen,
  onClose,
  onConfirm,
  title,
  description,
  confirmLabel = &apos;Confirm&apos;,
  cancelLabel = &apos;Cancel&apos;,
  variant = &apos;destructive&apos;,
  isLoading = false,
}) =&gt;
‚ãÆ----
const getButtonStyles = () =&gt;</file><file path="fe/components/dashboard/shared/OnboardingTour.tsx">import { AnimatePresence, motion } from &apos;framer-motion&apos;
import { ChevronLeft, ChevronRight, Sparkles, X } from &apos;lucide-react&apos;
import React, { useEffect, useState } from &apos;react&apos;
import { Button } from &apos;@/components/ui/button&apos;
interface Step {
  id: string
  targetId: string
  title: string
  content: string
  position: &apos;top&apos; | &apos;bottom&apos; | &apos;left&apos; | &apos;right&apos; | &apos;center&apos;
}
‚ãÆ----
const checkMobile = () =&gt;
‚ãÆ----
const updateSpotlight = () =&gt;
‚ãÆ----
const next = () =&gt;
const prev = () =&gt;</file><file path="fe/components/dashboard/shared/SettingsModal.tsx">import React, { useState } from &apos;react&apos;
import { useRouter } from &apos;next/navigation&apos;
import { Bell, Brain, CreditCard, Database, LayoutDashboard, LogOut, Settings, Shield, X } from &apos;lucide-react&apos;
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from &apos;@/components/ui/dialog&apos;
import { Tabs, TabsContent, TabsList, TabsTrigger } from &apos;@/components/ui/tabs&apos;
import { Button } from &apos;@/components/ui/button&apos;
import {
  useGoogleCalendarStatus,
  useDisconnectGoogleCalendar,
  useDeleteAllConversations,
  useResetMemory,
  useUser,
  useDeactivateUser,
} from &apos;@/hooks/queries&apos;
import { toast } from &apos;sonner&apos;
import {
  GeneralTab,
  SubscriptionTab,
  NotificationsTab,
  DataControlsTab,
  IntegrationsTab,
  SecurityTab,
  AssistantTab,
} from &apos;./settings-tabs&apos;
import { ConfirmDialog } from &apos;./ConfirmDialog&apos;
interface SettingsModalProps {
  isOpen: boolean
  onClose: () =&gt; void
  onSignOut?: () =&gt; void
  isDarkMode: boolean
  toggleTheme: () =&gt; void
}
type TabValue = &apos;general&apos; | &apos;account&apos; | &apos;notifications&apos; | &apos;integrations&apos; | &apos;assistant&apos; | &apos;security&apos; | &apos;data_controls&apos;
‚ãÆ----
const handleGoogleCalendarResync = () =&gt;
const handleGoogleCalendarDisconnect = () =&gt;
const confirmGoogleCalendarDisconnect = () =&gt;
const handleDeleteAllConversations = () =&gt;
const confirmDeleteAllConversations = () =&gt;
const handleResetMemory = () =&gt;
const confirmResetMemory = () =&gt;
const handleDeleteAccount = () =&gt;
const confirmDeleteAccount = async () =&gt;</file><file path="fe/components/dashboard/shared/Sidebar.tsx">import { ConversationList, DeleteConfirmDialog, SidebarFooter, SidebarHeader, SidebarNav } from &apos;./sidebar-components&apos;
import { SidebarProvider, useSidebarContext } from &apos;@/contexts/SidebarContext&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Calendar } from &apos;lucide-react&apos;
import { QuickEventDialog } from &apos;@/components/dialogs/QuickEventDialog&apos;
import React from &apos;react&apos;
import { useChatContext } from &apos;@/contexts/ChatContext&apos;
import { useUser } from &apos;@/hooks/queries/auth/useUser&apos;
interface SidebarProps {
  isOpen: boolean
  onClose: () =&gt; void
  onToggle: () =&gt; void
  onOpenSettings: () =&gt; void
  onSignOut?: () =&gt; void
}
‚ãÆ----
onClick=
‚ãÆ----
onSelectConversation=
‚ãÆ----
onEventCreated=</file><file path="fe/components/dashboard/shared/UserProfileCard.tsx">import Image from &apos;next/image&apos;
import { useUser } from &apos;@/hooks/queries/auth/useUser&apos;
import { getUserDisplayInfo } from &apos;@/lib/user-utils&apos;
interface UserProfileCardProps {
  isOpen: boolean
}</file><file path="fe/components/dashboard/IntegrationsDashboard.tsx">import { ArrowUpRight, CheckCircle2, Circle, List, Loader2, RefreshCw, Settings, X } from &apos;lucide-react&apos;
import { GoogleCalendarIcon, TelegramIcon, WhatsAppIcon } from &apos;@/components/shared/Icons&apos;
import { FaSlack } from &apos;react-icons/fa&apos;
import React, { useState } from &apos;react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Skeleton } from &apos;@/components/ui/skeleton&apos;
import { useCalendars, useSlackStatus } from &apos;@/hooks/queries&apos;
interface IntegrationsDashboardProps {}
‚ãÆ----
onClick=</file><file path="fe/components/dashboard/RescheduleDialog.tsx">import { useState } from &apos;react&apos;
import { Calendar, Clock, ArrowRight, Loader2, Check, AlertCircle, Sparkles } from &apos;lucide-react&apos;
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
} from &apos;@/components/ui/dialog&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { useRescheduleSuggestions, useRescheduleEvent } from &apos;@/hooks/queries/events/useReschedule&apos;
import type { RescheduleSuggestion } from &apos;@/services/events.service&apos;
interface RescheduleDialogProps {
  open: boolean
  onOpenChange: (open: boolean) =&gt; void
  eventId: string
  eventSummary: string
  calendarId?: string
  onSuccess?: () =&gt; void
}
‚ãÆ----
const handleReschedule = () =&gt;
const handleTimePreferenceChange = (time: typeof preferredTime) =&gt;
‚ãÆ----
onClick=</file><file path="fe/components/dialogs/quick-event/DialogStateViews.tsx">import React from &apos;react&apos;
import { motion } from &apos;framer-motion&apos;
import { AlertCircle, Calendar, Check, ExternalLink, Loader2, Mic } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import type { ParsedEventData, QuickAddConflict } from &apos;@/types/api&apos;
import { EventPreview } from &apos;./EventPreview&apos;
type DialogState = &apos;input&apos; | &apos;recording&apos; | &apos;transcribing&apos; | &apos;parsing&apos; | &apos;confirm&apos; | &apos;conflict&apos; | &apos;creating&apos; | &apos;success&apos; | &apos;error&apos;
interface InputViewProps {
  state: DialogState
}
export const InputView: React.FC&lt;InputViewProps&gt; = (
interface LoadingViewProps {
  message: string
}
export const LoadingView: React.FC&lt;LoadingViewProps&gt; = (
interface ConfirmViewProps {
  event: ParsedEventData
  calendarName: string
  message: string
  onConfirm: () =&gt; void
}
export const ConfirmView: React.FC&lt;ConfirmViewProps&gt; = (
interface ConflictViewProps {
  event: ParsedEventData
  calendarName: string
  conflicts: QuickAddConflict[]
  message: string
  onConfirm: () =&gt; void
  onCancel: () =&gt; void
}</file><file path="fe/components/dialogs/quick-event/EventPreview.tsx">import React from &apos;react&apos;
import { Calendar, Clock, FileText, MapPin } from &apos;lucide-react&apos;
import type { ParsedEventData } from &apos;@/types/api&apos;
interface EventPreviewProps {
  event: ParsedEventData
  calendarName?: string
}</file><file path="fe/components/dialogs/quick-event/index.ts"></file><file path="fe/components/dialogs/CalendarEventsDialog.tsx">import {
  Calendar,
  CalendarDays,
  CircleCheckBig,
  CircleX,
  Clock,
  Hash,
  Hourglass,
  Loader2,
  MapPin,
  Minus,
  Search,
  TrendingDown,
  TrendingUp,
  X,
} from &apos;lucide-react&apos;
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from &apos;../ui/dialog&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { Input } from &apos;@/components/ui/input&apos;
import type { CalendarEvent } from &apos;@/types/api&apos;
import type { CalendarEventsDialogProps } from &apos;@/types/analytics&apos;
import React, { useState, useMemo } from &apos;react&apos;
import { format } from &apos;date-fns&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { useDebouncedCallback } from &apos;use-debounce&apos;
‚ãÆ----
const handleSearchChange = (value: string) =&gt;
const clearSearch = () =&gt;
// Filter events based on debounced search query (summary or description)
‚ãÆ----
// Calculate filtered hours
‚ãÆ----
const getEventDuration = (event: CalendarEvent): string =&gt;
const formatEventTime = (event: CalendarEvent): string =&gt;</file><file path="fe/components/dialogs/CalendarSettingsDialog.tsx">import { Bell, CalendarDays, CheckCircle, Info, Mail, Star, Video } from &apos;lucide-react&apos;
import { Dialog, DialogContent, DialogHeader, DialogTitle } from &apos;@/components/ui/dialog&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import type { CalendarListEntry } from &apos;@/types/api&apos;
import type { CalendarSettingsDialogProps } from &apos;@/types/analytics&apos;
import React from &apos;react&apos;
‚ãÆ----
const handleOpenChange = (open: boolean) =&gt;</file><file path="fe/components/dialogs/CreateCalendarDialog.tsx">import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from &apos;@/components/ui/dialog&apos;
import { Loader2, Plus } from &apos;lucide-react&apos;
import React, { useState } from &apos;react&apos;
import { Button } from &apos;../ui/button&apos;
import type { CreateCalendarDialogProps } from &apos;@/types/analytics&apos;
import { Input } from &apos;../ui/input&apos;
import { InteractiveHoverButton } from &apos;../ui/interactive-hover-button&apos;
import { calendarsService } from &apos;@/services/calendars.service&apos;
import { toast } from &apos;sonner&apos;
import { useQueryClient } from &apos;@tanstack/react-query&apos;
const CreateCalendarDialog: React.FC&lt;CreateCalendarDialogProps&gt; = (
‚ãÆ----
// Helper to clear state when closing
const handleClose = () =&gt;
const handleCreate = async () =&gt;</file><file path="fe/components/dialogs/DayEventsDialog.tsx">import { CalendarDays, CircleCheckBig, CircleX, Clock, Hash, Hourglass, Loader2, MapPin, Search, Sun, X } from &apos;lucide-react&apos;
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from &apos;../ui/dialog&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { Input } from &apos;@/components/ui/input&apos;
import type { CalendarEvent } from &apos;@/types/api&apos;
import React, { useState, useMemo } from &apos;react&apos;
import { format } from &apos;date-fns&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { useDebouncedCallback } from &apos;use-debounce&apos;
export interface DayEventsDialogProps {
  isOpen: boolean
  date: string
  availableHours: number
  events: CalendarEvent[]
  calendarMap: Map&lt;string, { name: string; color: string }&gt;
  isLoading?: boolean
  onClose: () =&gt; void
  onEventClick: (event: CalendarEvent, calendarColor: string, calendarName: string) =&gt; void
}
‚ãÆ----
const handleSearchChange = (value: string) =&gt;
const clearSearch = () =&gt;
// Filter events based on debounced search query (summary or description)
‚ãÆ----
// Calculate filtered hours
‚ãÆ----
const getEventDuration = (event: CalendarEvent): string =&gt;
const formatEventTime = (event: CalendarEvent): string =&gt;
const formatEventTimeRange = (event: CalendarEvent): string =&gt;
const getCalendarInfo = (event: CalendarEvent):
‚ãÆ----
{/* Decorative Top Border */}</file><file path="fe/components/dialogs/EventDetailsDialog.tsx">import { useState } from &apos;react&apos;
import {
  AlignLeft,
  ArrowRight,
  CalendarClock,
  CalendarDays,
  Check,
  Clock,
  ExternalLink,
  Hourglass,
  Info,
  Link as LinkIcon,
  MapPin,
  RefreshCw,
  User,
  Users,
  X,
} from &apos;lucide-react&apos;
import { Dialog, DialogContent, DialogHeader, DialogTitle } from &apos;@/components/ui/dialog&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { format, formatDistanceStrict } from &apos;date-fns&apos;
import type { EventDetailsDialogProps } from &apos;@/types/analytics&apos;
import React from &apos;react&apos;
import { RescheduleDialog } from &apos;@/components/dashboard/RescheduleDialog&apos;
import { sanitizeHtml } from &apos;@/lib/security/sanitize&apos;
‚ãÆ----
const formatDate = (dateStr?: string | null) =&gt;
const getStatusColor = (status?: string) =&gt;
‚ãÆ----
const handleOpenChange = (open: boolean) =&gt;
‚ãÆ----

‚ãÆ----
{/* Location */}
‚ãÆ----
href={`https://maps.google.com/?q=$?q=${encodeURIComponent(event.location)}`}
‚ãÆ----
{/* People Section */}</file><file path="fe/components/dialogs/EventsListDialog.tsx">import { Calendar, CalendarDays, Clock, ExternalLink, Hash, Hourglass } from &apos;lucide-react&apos;
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from &apos;../ui/dialog&apos;
import { format } from &apos;date-fns&apos;
import type { PatternEventSummary } from &apos;@/types/analytics&apos;
export interface EventsListDialogProps {
  isOpen: boolean
  title: string
  subtitle?: string
  events: PatternEventSummary[]
  onClose: () =&gt; void
}
function formatDuration(minutes: number): string
function formatEventTime(startTime: string, endTime: string): string
function formatEventDate(dateStr: string): string
function handleEventClick(htmlLink: string | undefined)
function calculateTotalHours(events: PatternEventSummary[]): number</file><file path="fe/components/dialogs/QuickEventDialog.tsx">import React, { useState, useEffect, useCallback, useRef } from &apos;react&apos;
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from &apos;@/components/ui/dialog&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { AllyLogo } from &apos;@/components/shared/logo&apos;
import { Calendar, Loader2, Mic, MicOff, Sparkles } from &apos;lucide-react&apos;
import { AnimatePresence } from &apos;framer-motion&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { voiceService } from &apos;@/services/voice.service&apos;
import { toast } from &apos;sonner&apos;
import type { QuickAddConflict, ParsedEventData } from &apos;@/types/api&apos;
import { InputView, LoadingView, ConfirmView, ConflictView, SuccessView, ErrorView } from &apos;./quick-event&apos;
type QuickEventDialogProps = {
  isOpen: boolean
  onClose: () =&gt; void
  onEventCreated?: () =&gt; void
}
type DialogState = &apos;input&apos; | &apos;recording&apos; | &apos;transcribing&apos; | &apos;parsing&apos; | &apos;confirm&apos; | &apos;conflict&apos; | &apos;creating&apos; | &apos;success&apos; | &apos;error&apos;
‚ãÆ----
const handleTextChange = (e: React.ChangeEvent&lt;HTMLTextAreaElement&gt;) =&gt;
const handleKeyDown = (e: React.KeyboardEvent&lt;HTMLTextAreaElement&gt;) =&gt;
const resetState = () =&gt;
‚ãÆ----
&lt;Button onClick=</file><file path="fe/components/marketing/BentoGridSection.tsx">import React from &apos;react&apos;
import { motion } from &apos;framer-motion&apos;
import { Lock, Globe, Brain, Zap, Layout } from &apos;lucide-react&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { BentoCard, BentoGrid } from &apos;@/components/ui/bento-grid&apos;
import { RotatingEarth, ThreeDWallCalendar, CalendarEvent } from &apos;@/components/3d&apos;</file><file path="fe/components/marketing/FAQs.tsx">import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from &apos;@/components/ui/accordion&apos;
import { useTranslation } from &apos;react-i18next&apos;</file><file path="fe/components/marketing/FeatureCarousel.tsx">import {
  AlertCircle,
  ArrowRight,
  BarChart3,
  Battery,
  Calendar,
  Check,
  ChevronLeft,
  ChevronRight,
  Clock,
  Layers,
  MapPin,
  Mic,
  NotebookTabs,
  Plane,
  ShieldCheck,
  Smartphone,
  User,
  Users,
  Wifi,
} from &apos;lucide-react&apos;
import { AnimatePresence, motion } from &apos;framer-motion&apos;
import React, { useEffect, useState } from &apos;react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { TelegramIcon, WhatsAppIcon } from &apos;@/components/shared/Icons&apos;
import { AllyLogo } from &apos;@/components/shared/logo&apos;
const PhoneFrame: React.FC&lt;
‚ãÆ----
const next = ()
const prev = ()
‚ãÆ----
onMouseLeave=
‚ãÆ----
onClick=</file><file path="fe/components/marketing/FeatureShowcase.tsx">import { useState, useEffect, useCallback } from &apos;react&apos;
import { motion } from &apos;framer-motion&apos;
import {
  Calendar,
  Check,
  CheckCheck,
  Clock,
  Mic,
  Bell,
  BarChart3,
  Search,
  Plus,
  ChevronLeft,
  ChevronRight,
  Globe,
  Brain,
  Languages,
  CalendarDays,
  CalendarRange,
  User,
  Settings,
  Volume2,
  Edit3,
  Trash2,
  type LucideIcon,
} from &apos;lucide-react&apos;
import { TelegramIcon } from &apos;@/components/shared/Icons&apos;
import { AllyLogo } from &apos;@/components/shared/logo&apos;
import { IPhoneMockup } from &apos;@/components/ui/iphone-mockup&apos;
import { cn } from &apos;@/lib/utils&apos;
interface Message {
  type: &apos;user&apos; | &apos;ally&apos;
  content: string | React.ReactNode
  time: string
  isVoice?: boolean
  showTyping?: boolean
}
interface Feature {
  id: string
  icon: LucideIcon
  titleKey: string
  descriptionKey: string
  category: &apos;schedule&apos; | &apos;manage&apos; | &apos;insights&apos; | &apos;ai&apos;
  telegram: {
    messages: Message[]
  }
  web: {
    component: React.ReactNode
  }
}
‚ãÆ----
className=
‚ãÆ----
onMouseLeave=
‚ãÆ----
&lt;div className=</file><file path="fe/components/marketing/Footer.tsx">import { AllyLogo, BetaBadge } from &apos;@/components/shared/logo&apos;
import { TelegramIcon, WhatsAppIcon } from &apos;@/components/shared/Icons&apos;
import Link from &apos;next/link&apos;
import { Mail } from &apos;lucide-react&apos;
import React from &apos;react&apos;
import { SOCIAL_LINKS } from &apos;@/lib/constants&apos;
import { useTranslation } from &apos;react-i18next&apos;
const DiscordIcon = (</file><file path="fe/components/marketing/MarketingLayout.tsx">import React from &apos;react&apos;
import Navbar from &apos;@/components/marketing/Navbar&apos;
import Footer from &apos;@/components/marketing/Footer&apos;
interface MarketingLayoutProps {
  children: React.ReactNode
}
const MarketingLayout: React.FC&lt;MarketingLayoutProps&gt; = (</file><file path="fe/components/marketing/Navbar.tsx">import { AllyLogo, BetaBadge } from &quot;@/components/shared/logo&quot;;
import { AnimatePresence, motion } from &quot;framer-motion&quot;;
import { Mail } from &quot;lucide-react&quot;;
import React, { useEffect, useState } from &quot;react&quot;;
import { TelegramIcon, WhatsAppIcon } from &quot;@/components/shared/Icons&quot;;
import { usePathname, useRouter } from &quot;next/navigation&quot;;
import { useTranslation } from &quot;react-i18next&quot;;
import { AnimatedHamburger } from &quot;@/components/ui/animated-hamburger&quot;;
import { Button } from &quot;@/components/ui/button&quot;;
import { InteractiveHoverButton } from &quot;@/components/ui/interactive-hover-button&quot;;
import { LanguageDropdown } from &quot;@/components/shared/LanguageDropdown&quot;;
import Link from &quot;next/link&quot;;
import { ThemeToggle } from &quot;../ui/theme-toggle&quot;;
const DiscordIcon = ({ className }: { className?: string }) =&gt; (
  &lt;svg viewBox=&quot;0 0 24 24&quot; fill=&quot;currentColor&quot; className={className}&gt;
    &lt;path d=&quot;M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.086 2.157 2.419c0 1.334-.947 2.419-2.157 2.419zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.086 2.157 2.419c0 1.334-.946 2.419-2.157 2.419z&quot; /&gt;
  &lt;/svg&gt;
);
‚ãÆ----
const handleScroll = () =&gt;
‚ãÆ----
onClick=
‚ãÆ----
text=
‚ãÆ----
setIsMobileMenuOpen(false);</file><file path="fe/components/marketing/Testimonials.tsx">import Link from &apos;next/link&apos;
import { motion } from &apos;framer-motion&apos;
import { MessageSquarePlus, Send } from &apos;lucide-react&apos;
import { useTranslation } from &apos;react-i18next&apos;
import { TestimonialsColumn, Testimonial } from &apos;@/components/ui/testimonials-column&apos;</file><file path="fe/components/marketing/UseCaseGrid.tsx">import { BrainCircuit, CalendarDays, Check, Mic, Plane, User, LucideIcon } from &apos;lucide-react&apos;
import { AllyLogo } from &apos;@/components/shared/logo&apos;
import React from &apos;react&apos;
import { motion } from &apos;framer-motion&apos;
import { useTranslation } from &apos;react-i18next&apos;
interface UseCaseItem {
  icon: LucideIcon
  key: string
  illustration: (t: (key: string) =&gt; string) =&gt; React.ReactNode
}</file><file path="fe/components/shared/BackgroundPattern1.tsx">import React from &apos;react&apos;
import { cn } from &apos;@/lib/utils&apos;
import { PatternPlaceholder } from &apos;@/components/shared/PatternPlaceholder&apos;
interface BackgroundPattern1Props {
  className?: string
  children?: React.ReactNode
}</file><file path="fe/components/shared/ErrorBoundary.tsx">import React, { Component, ErrorInfo, ReactNode } from &apos;react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
interface Props {
  children: ReactNode
  fallback?: ReactNode
}
interface State {
  hasError: boolean
  error: Error | null
  errorInfo: ErrorInfo | null
}
‚ãÆ----
constructor(props: Props)
static getDerivedStateFromError(error: Error): Partial&lt;State&gt;
componentDidCatch(error: Error, errorInfo: ErrorInfo): void</file><file path="fe/components/shared/Icons.tsx">import React from &apos;react&apos;
export const SlackIcon = (
export const TelegramIcon = (
export const WhatsAppIcon = (
export const GoogleCalendarIcon = (</file><file path="fe/components/shared/LanguageDropdown.tsx">import { Globe, Check } from &quot;lucide-react&quot;;
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from &quot;@/components/ui/dropdown-menu&quot;;
import { useLanguage } from &quot;@/contexts/LanguageContext&quot;;
import { cn } from &quot;@/lib/utils&quot;;
interface LanguageDropdownProps {
  className?: string;
  triggerClassName?: string;
  compact?: boolean;
}
‚ãÆ----
className=</file><file path="fe/components/shared/logo.tsx">import Image from &apos;next/image&apos;
import React from &apos;react&apos;</file><file path="fe/components/shared/PatternPlaceholder.tsx">import React from &apos;react&apos;
import { cn } from &apos;@/lib/utils&apos;
interface PatternPlaceholderProps {
  className?: string
}
‚ãÆ----
className=</file><file path="fe/components/shared/ThemeProvider.tsx">import { ThemeProvider as NextThemesProvider } from &apos;next-themes&apos;
export function ThemeProvider(</file><file path="fe/components/ui/accordion.tsx">import { ChevronDown } from &apos;lucide-react&apos;
import { cn } from &apos;@/components/../lib/utils&apos;</file><file path="fe/components/ui/ai-voice-input.tsx">import React, { useState, useEffect, useMemo, useRef, useCallback } from &apos;react&apos;
import { Mic } from &apos;lucide-react&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
interface AIVoiceInputProps {
  onStart?: () =&gt; void
  onStop?: (duration: number, transcribedText: string | null) =&gt; void
  onInterimResult?: (text: string) =&gt; void
  visualizerBars?: number
  demoMode?: boolean
  demoInterval?: number
  className?: string
  isRecordingProp: boolean
  onToggleRecording: () =&gt; void
  speechRecognitionSupported: boolean
  speechRecognitionError: string | null
}
‚ãÆ----
const runAnimation = () =&gt;
‚ãÆ----
const formatTime = (seconds: number) =&gt;
const handleClick = () =&gt;
‚ãÆ----
&lt;div className=
‚ãÆ----
className=</file><file path="fe/components/ui/alert-dialog.tsx">import { cn } from &quot;@/lib/utils&quot;
import { buttonVariants } from &quot;@/components/ui/button&quot;
‚ãÆ----
className=</file><file path="fe/components/ui/animated-cursor.tsx">import React, { createContext, useContext, useEffect, useState, useRef, ReactNode } from &apos;react&apos;
import { motion, useMotionValue, useSpring, AnimatePresence } from &apos;framer-motion&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
interface CursorContextProps {
  mouseX: any
  mouseY: any
  isVisible: boolean
  isHovering: boolean
  setIsHovering: (val: boolean) =&gt; void
}
‚ãÆ----
export const CursorProvider: React.FC&lt;
‚ãÆ----
const handleMouseMove = (e: MouseEvent) =&gt;
const handleMouseLeave = ()
const handleMouseEnter = ()
‚ãÆ----
export const useCursor = () =&gt;
‚ãÆ----
className=</file><file path="fe/components/ui/animated-feature-spotlight3d.tsx">import { motion, useMotionValue, useTransform } from &apos;framer-motion&apos;
import { cn } from &apos;@/lib/utils&apos;
import { Button, type ButtonProps } from &apos;@/components/ui/button&apos;
interface AnimatedFeatureSpotlight3DProps extends React.HTMLAttributes&lt;HTMLElement&gt; {
  preheaderIcon?: React.ReactNode
  preheaderText: string
  heading: React.ReactNode
  description: string
  buttonText?: string
  buttonProps?: ButtonProps
  imageUrl: string
  imageAlt?: string
  reverse?: boolean
  onButtonClick?: () =&gt; void
}
‚ãÆ----
const handleMouseMove = (e: React.MouseEvent&lt;HTMLDivElement&gt;) =&gt;
const handleMouseLeave = () =&gt;</file><file path="fe/components/ui/animated-hamburger.tsx">import React from &apos;react&apos;
import { motion } from &apos;framer-motion&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
interface AnimatedHamburgerProps {
  isOpen: boolean
  onClick: () =&gt; void
  className?: string
}
‚ãÆ----
className=</file><file path="fe/components/ui/animated-testimonials.tsx">import { Avatar, AvatarFallback, AvatarImage } from &quot;@/components/ui/avatar&quot;;
import { Quote, Star } from &quot;lucide-react&quot;;
import { motion, useAnimation, useInView, type Variants } from &quot;framer-motion&quot;;
import { useEffect, useRef, useState } from &quot;react&quot;;
import { Separator } from &quot;@/components/ui/separator&quot;;
export interface Testimonial {
  id: number;
  name: string;
  role: string;
  company: string;
  content: string;
  rating: number;
  avatar: string;
}
export interface AnimatedTestimonialsProps {
  title?: string;
  subtitle?: string;
  badgeText?: string;
  testimonials?: Testimonial[];
  autoRotateInterval?: number;
  className?: string;
}</file><file path="fe/components/ui/animated-text-cycle.tsx">import { useState, useEffect, useRef } from &quot;react&quot;;
import { motion, AnimatePresence, type Variants } from &quot;framer-motion&quot;;
interface AnimatedTextCycleProps {
  words: string[];
  interval?: number;
  className?: string;
}</file><file path="fe/components/ui/avatar.tsx">import { cn } from &apos;@/components/../lib/utils&apos;</file><file path="fe/components/ui/badge.tsx">import { cva, type VariantProps } from &apos;class-variance-authority&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
‚ãÆ----
export interface BadgeProps extends React.HTMLAttributes&lt;HTMLDivElement&gt;, VariantProps&lt;typeof badgeVariants&gt; {
  className?: string
  variant?: VariantProps&lt;typeof badgeVariants&gt;[&apos;variant&apos;]
}</file><file path="fe/components/ui/bento-grid.tsx">import React, { ReactNode } from &apos;react&apos;
import { ArrowRight } from &apos;lucide-react&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
import { Button } from &apos;@/components/ui/button&apos;
const BentoGrid: React.FC&lt;{
  children?: ReactNode
  className?: string
}&gt; = (
‚ãÆ----
&lt;div className=
‚ãÆ----
const BentoCard: React.FC&lt;
‚ãÆ----
className=</file><file path="fe/components/ui/button.tsx">import { Slot } from &apos;@radix-ui/react-slot&apos;
import { cva, type VariantProps } from &apos;class-variance-authority&apos;
‚ãÆ----
import { cn } from &apos;@/lib/utils&apos;
‚ãÆ----
export interface ButtonProps
  extends React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;, VariantProps&lt;typeof buttonVariants&gt; {
  asChild?: boolean
}
‚ãÆ----
return &lt;Comp className=</file><file path="fe/components/ui/calendar.tsx">import { ChevronLeft, ChevronRight } from &apos;lucide-react&apos;
‚ãÆ----
import { DayPicker } from &apos;react-day-picker&apos;
import { cn } from &apos;@/lib/utils&apos;
import { buttonVariants } from &apos;@/components/ui/button&apos;
export type CalendarProps = React.ComponentProps&lt;typeof DayPicker&gt;
function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  components: userComponents,
  ...props
}: CalendarProps)</file><file path="fe/components/ui/card.tsx">import { cn } from &apos;@/lib/utils&apos;</file><file path="fe/components/ui/chart.tsx">import { cn } from &apos;@/lib/utils&apos;
‚ãÆ----
export type ChartConfig = {
  [k in string]: {
    label?: React.ReactNode
    icon?: React.ComponentType
  } &amp; ({ color?: string; theme?: never } | { color?: never; theme: Record&lt;keyof typeof THEMES, string&gt; })
}
type ChartContextProps = {
  config: ChartConfig
}
‚ãÆ----
function useChart()
‚ãÆ----
className=
‚ãÆ----
return &lt;div className=</file><file path="fe/components/ui/cinematic-glow-toggle.tsx">import React from &apos;react&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
import { motion } from &apos;framer-motion&apos;
interface CinematicGlowToggleProps {
  id: string
  checked: boolean
  onChange: (checked: boolean) =&gt; void
  className?: string
}
‚ãÆ----
onClick=</file><file path="fe/components/ui/date-range-picker.tsx">import { Calendar as CalendarIcon, Info } from &apos;lucide-react&apos;
import { HoverCard, HoverCardContent, HoverCardTrigger } from &apos;@/components/ui/hover-card&apos;
import { Popover, PopoverContent, PopoverTrigger } from &apos;@/components/ui/popover&apos;
import {
  addMonths,
  endOfMonth,
  format,
  isSameMonth,
  startOfMonth,
  startOfWeek,
  startOfYear,
  subDays,
  subMonths,
} from &apos;date-fns&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { Calendar } from &apos;@/components/ui/calendar&apos;
import { Label } from &apos;@/components/ui/label&apos;
import CinematicGlowToggle from &apos;./cinematic-glow-toggle&apos;
import { DateRange } from &apos;react-day-picker&apos;
import { cn } from &apos;@/lib/utils&apos;
import { toast } from &apos;sonner&apos;
interface DatePickerWithRangeProps extends React.HTMLAttributes&lt;HTMLDivElement&gt; {
  date: DateRange | undefined
  setDate: (date: DateRange | undefined) =&gt; void
}
type PresetKey = &apos;yesterday&apos; | &apos;today&apos; | &apos;last7&apos; | &apos;last30&apos; | &apos;thisWeek&apos; | &apos;thisMonth&apos; | &apos;prevMonth&apos; | &apos;thisYear&apos; | &apos;custom&apos;
‚ãÆ----
const handleCompareToggle = (checked: boolean) =&gt;
const handleSelect = (selectedDate: DateRange | undefined) =&gt;
const handleApply = () =&gt;
const setPreset = (preset: PresetKey) =&gt;
const renderPresetButton = (label: string, presetKey: PresetKey)
‚ãÆ----
className=
‚ãÆ----
&lt;div className=
‚ãÆ----

‚ãÆ----
if (selectedDate)
‚ãÆ----
setLeftMonth(selectedDate)
‚ãÆ----
setLeftMonth(newRange.from)
‚ãÆ----
toMonth=
‚ãÆ----
fromMonth=
‚ãÆ----
onClick=</file><file path="fe/components/ui/demo.tsx">import React from &apos;react&apos;
import { SparklesCore } from &apos;@/components/ui/sparkles&apos;</file><file path="fe/components/ui/dialog.tsx">import { X } from &apos;lucide-react&apos;
import { cn } from &apos;@/lib/utils&apos;
‚ãÆ----
&lt;div className=</file><file path="fe/components/ui/dropdown-menu.tsx">import { Check, ChevronRight, Circle } from &apos;lucide-react&apos;
import { cn } from &apos;@/lib/utils&apos;
‚ãÆ----
className=
‚ãÆ----
return &lt;span className=</file><file path="fe/components/ui/hand-writing-text-demo.tsx">import React from &apos;react&apos;
import { HandWrittenTitle } from &apos;@/components/ui/hand-writing-text&apos;
export const HandWrittenTitleDemo: React.FC = () =&gt;</file><file path="fe/components/ui/hand-writing-text.tsx">import React from &apos;react&apos;
import { motion, Variants } from &apos;framer-motion&apos;
interface HandWrittenTitleProps {
  title?: string
  subtitle?: string
  hideCircle?: boolean
}</file><file path="fe/components/ui/hover-card.tsx">import { cn } from &apos;@/components/../lib/utils&apos;</file><file path="fe/components/ui/input.tsx">import { cn } from &apos;@/components/../lib/utils&apos;</file><file path="fe/components/ui/interactive-hover-button.tsx">import { AnimatePresence, motion } from &apos;framer-motion&apos;
import { ArrowRight } from &apos;lucide-react&apos;
import React from &apos;react&apos;
import { cn } from &apos;../../lib/utils&apos;
interface InteractiveHoverButtonProps extends React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt; {
  text?: string
  loadingText?: string
  isLoading?: boolean
  Icon?: React.ReactNode
  dotClassName?: string
  hoverContentClassName?: string
}
‚ãÆ----
className=</file><file path="fe/components/ui/iphone-mockup.tsx">import React, { CSSProperties, ReactNode } from &apos;react&apos;
type IPhoneModel = &apos;14&apos; | &apos;14-pro&apos; | &apos;15&apos; | &apos;15-pro&apos; | &apos;x&apos; | &apos;plain&apos;
type Orientation = &apos;portrait&apos; | &apos;landscape&apos;
type WallpaperFit = &apos;cover&apos; | &apos;contain&apos; | &apos;fill&apos;
export interface IPhoneMockupProps {
  model?: IPhoneModel
  color?:
    | &apos;black&apos;
    | &apos;midnight&apos;
    | &apos;silver&apos;
    | &apos;starlight&apos;
    | &apos;space-black&apos;
    | &apos;gold&apos;
    | &apos;blue&apos;
    | &apos;pink&apos;
    | &apos;titanium&apos;
    | &apos;natural-titanium&apos;
    | &apos;green&apos;
    | &apos;red&apos;
    | string
  orientation?: Orientation
  scale?: number
  bezel?: number
  radius?: number
  shadow?: boolean | string
  screenBg?: string
  wallpaper?: string
  wallpaperFit?: WallpaperFit
  wallpaperPosition?: string
  showDynamicIsland?: boolean
  showNotch?: boolean
  islandWidth?: number
  islandHeight?: number
  islandRadius?: number
  notchWidth?: number
  notchHeight?: number
  notchRadius?: number
  safeArea?: boolean
  safeAreaOverrides?: Partial&lt;{ top: number; bottom: number; left: number; right: number }&gt;
  showHomeIndicator?: boolean
  innerShadow?: boolean
  style?: CSSProperties
  className?: string
  frameStyle?: CSSProperties
  screenStyle?: CSSProperties
  children?: ReactNode
}
‚ãÆ----
function shade(hex: string, pct: number): string
‚ãÆ----
const to = (v: number)</file><file path="fe/components/ui/label.tsx">import { cva, type VariantProps } from &apos;class-variance-authority&apos;
import { cn } from &apos;@/lib/utils&apos;</file><file path="fe/components/ui/livekit-voice-button.tsx">import { useState, useCallback } from &apos;react&apos;
import { Mic, MicOff, Loader2, Phone, PhoneOff } from &apos;lucide-react&apos;
import { Button } from &apos;@/components/ui/button&apos;
import { useLiveKitVoice, type LiveKitVoiceState } from &apos;@/hooks/useLiveKitVoice&apos;
import { cn } from &apos;@/lib/utils&apos;
interface LiveKitVoiceButtonProps {
  className?: string
  onTranscript?: (text: string, isFinal: boolean) =&gt; void
  onError?: (error: string) =&gt; void
}
‚ãÆ----
const getStateIcon = () =&gt;
const getStateLabel = (): string =&gt;
‚ãÆ----
&lt;div className=</file><file path="fe/components/ui/loading-spinner.tsx">import { cn } from &apos;@/lib/utils&apos;
interface LoadingSpinnerProps {
  size?: &apos;sm&apos; | &apos;md&apos; | &apos;lg&apos;
  className?: string
  overlay?: boolean
  text?: string
}
‚ãÆ----
export function LoadingSpinner({
  size = &apos;md&apos;,
  className,
  overlay = false,
  text,
}: LoadingSpinnerProps)
‚ãÆ----
className=
‚ãÆ----
export function LoadingSection({
  text,
  className,
}: {
  text?: string
  className?: string
})
‚ãÆ----
&lt;div className=</file><file path="fe/components/ui/popover.tsx">import { cn } from &apos;@/components/../lib/utils&apos;</file><file path="fe/components/ui/pricing-card.tsx">import { AnimatePresence, motion } from &apos;framer-motion&apos;
import { ArrowRight, BadgeCheck, Minus, Plus, Zap } from &apos;lucide-react&apos;
import React, { useRef, useState } from &apos;react&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { Card } from &apos;@/components/ui/card&apos;
import { InteractiveHoverButton } from &apos;@/components/ui/interactive-hover-button&apos;
import NumberFlow from &apos;@number-flow/react&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
import { useRouter } from &apos;next/navigation&apos;
import { useAuthContext } from &apos;@/contexts/AuthContext&apos;
import {
  redirectToCheckout,
  redirectToCreditPackCheckout,
  type PlanSlug,
  type PlanInterval,
} from &apos;@/services/payment.service&apos;
export interface PricingTier {
  id: string
  name: string
  price: Record&lt;string, number | string&gt;
  description: string
  features: string[]
  cta: string
  highlighted?: boolean
  popular?: boolean
  isCustom?: boolean
}
interface PricingCardProps {
  tier: PricingTier
  paymentFrequency: string
}
‚ãÆ----
const getPrimaryTextColor = ()
const getSecondaryTextColor = ()
const adjustAmount = (delta: number) =&gt;
const handleInputChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt;
const handleBlur = () =&gt;
‚ãÆ----
const handleGetStarted = async () =&gt;
‚ãÆ----
// If user is not authenticated, redirect to register first
‚ãÆ----
// Store the plan info in localStorage so we can redirect after auth
‚ãÆ----
const getFrequencyLabel = () =&gt;
‚ãÆ----
className=
‚ãÆ----
&lt;p className=
‚ãÆ----
setIsEditing(true)
setTimeout(()</file><file path="fe/components/ui/pricing-section-demo.tsx">import React from &apos;react&apos;
import { PricingSection } from &apos;@/components/ui/pricing-section&apos;
import { HandWrittenTitleDemo } from &apos;@/components/ui/hand-writing-text-demo&apos;
‚ãÆ----
export function PricingSectionDemo()</file><file path="fe/components/ui/pricing-section.tsx">import React, { useState } from &apos;react&apos;
import { PricingCard, type PricingTier } from &apos;@/components/ui/pricing-card&apos;
import { Tab } from &apos;@/components/ui/pricing-tab&apos;
interface PricingSectionProps {
  title: string
  subtitle: string
  tiers: PricingTier[]
  frequencies: string[]
}</file><file path="fe/components/ui/pricing-tab.tsx">import { motion } from &apos;framer-motion&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
interface TabProps {
  text: string
  selected: boolean
  setSelected: (text: string) =&gt; void
  discount?: boolean
}
export const Tab: React.FC&lt;TabProps&gt; = (
‚ãÆ----
onClick=</file><file path="fe/components/ui/radial-orbital-timeline.tsx">import { ArrowRight, Link as LinkIcon, Sparkles, Zap } from &apos;lucide-react&apos;
import { Card, CardContent, CardHeader, CardTitle } from &apos;@/components/ui/card&apos;
import React, { useEffect, useRef, useState } from &apos;react&apos;
import { Badge } from &apos;@/components/ui/badge&apos;
import { Button } from &apos;@/components/ui/button&apos;
interface TimelineItem {
  id: number
  title: string
  date: string
  content: string
  category: string
  icon: React.ComponentType&lt;{ size?: number }&gt;
  relatedIds: number[]
  status: &apos;completed&apos; | &apos;in-progress&apos; | &apos;pending&apos;
  energy: number
}
interface RadialOrbitalTimelineProps {
  timelineData: TimelineItem[]
}
‚ãÆ----
const handleContainerClick = (e: React.MouseEvent&lt;HTMLDivElement&gt;) =&gt;
const toggleItem = (id: number) =&gt;
‚ãÆ----
const centerViewOnNode = (nodeId: number) =&gt;
const calculateNodePosition = (index: number, total: number) =&gt;
const getRelatedItems = (itemId: number): number[] =&gt;
const isRelatedToActive = (itemId: number): boolean =&gt;
const getStatusStyles = (status: TimelineItem[&apos;status&apos;]): string =&gt;
‚ãÆ----
onMouseLeave=
‚ãÆ----
e.stopPropagation()
toggleItem(item.id)
‚ãÆ----
toggleItem(relatedId)</file><file path="fe/components/ui/separator.tsx">import { cn } from &apos;@/components/../lib/utils&apos;</file><file path="fe/components/ui/skeleton.tsx">import { cn } from &apos;@/lib/utils&apos;
interface SkeletonProps {
  className?: string
  style?: React.CSSProperties
}
export function Skeleton(
‚ãÆ----
return &lt;div className=
‚ãÆ----
export function SkeletonCard(
‚ãÆ----
className=
‚ãÆ----
export function SkeletonInsightCard(
‚ãÆ----
&lt;div className=</file><file path="fe/components/ui/sparkles.tsx">import React, { useId } from &quot;react&quot;;
import { useEffect, useState } from &quot;react&quot;;
import Particles, { initParticlesEngine } from &quot;@tsparticles/react&quot;;
import type { Container, SingleOrMultiple } from &quot;@tsparticles/engine&quot;;
import { loadSlim } from &quot;@tsparticles/slim&quot;;
import { cn } from &quot;@/components/../lib/utils&quot;;
import { motion, useAnimation } from &quot;framer-motion&quot;;
type ParticlesProps = {
  id?: string;
  className?: string;
  background?: string;
  particleSize?: number;
  minSize?: number;
  maxSize?: number;
  speed?: number;
  particleColor?: string;
  particleDensity?: number;
};
export const SparklesCore = (props: ParticlesProps) =&gt;
‚ãÆ----
const particlesLoaded = async (container?: Container) =&gt;</file><file path="fe/components/ui/table.tsx">import { cn } from &quot;@/lib/utils&quot;</file><file path="fe/components/ui/tabs.tsx">import { cn } from &apos;@/lib/utils&apos;</file><file path="fe/components/ui/testimonials-column.tsx">import React from &apos;react&apos;
import Link from &apos;next/link&apos;
import { motion } from &apos;framer-motion&apos;
import { MessageSquarePlus } from &apos;lucide-react&apos;
export interface Testimonial {
  text: string
  image: string
  name: string
  role: string
  isPlaceholder?: boolean
}</file><file path="fe/components/ui/textarea.tsx">import { cn } from &quot;@/lib/utils&quot;
‚ãÆ----
className=</file><file path="fe/components/ui/theme-toggle.tsx">import { Moon, Sun } from &apos;lucide-react&apos;
import React, { useEffect, useState } from &apos;react&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
import { useTheme } from &apos;next-themes&apos;
interface ThemeToggleProps {
  className?: string
}
‚ãÆ----
className=</file><file path="fe/components/ui/timeline.tsx">import { useScroll, useTransform, motion } from &apos;framer-motion&apos;
import React, { useEffect, useRef, useState } from &apos;react&apos;
interface TimelineEntry {
  title: string
  content: React.ReactNode
}</file><file path="fe/components/ui/tooltip.tsx">import { cn } from &quot;@/lib/utils&quot;
‚ãÆ----
className=</file><file path="fe/components/ui/typewriter.tsx">import React, { useEffect, useState } from &apos;react&apos;
import { motion, Variants } from &apos;framer-motion&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
interface TypewriterProps {
  text: string | string[]
  speed?: number
  initialDelay?: number
  waitTime?: number
  deleteSpeed?: number
  loop?: boolean
  className?: string
  showCursor?: boolean
  hideCursorOnType?: boolean
  cursorChar?: string | React.ReactNode
  cursorAnimationVariants?: {
    initial: Variants[&apos;initial&apos;]
    animate: Variants[&apos;animate&apos;]
  }
  cursorClassName?: string
}
‚ãÆ----
const startTyping = () =&gt;
‚ãÆ----
&lt;div className=</file><file path="fe/components/ui/voice-powered-orb.tsx">import React, { useEffect, useRef, FC } from &apos;react&apos;
import { Renderer, Program, Mesh, Triangle, Vec3 } from &apos;ogl&apos;
import { cn } from &apos;@/components/../lib/utils&apos;
interface VoicePoweredOrbProps {
  className?: string
  hue?: number
  enableVoiceControl?: boolean
  voiceSensitivity?: number
  maxRotationSpeed?: number
  maxHoverIntensity?: number
  isLoading?: boolean
  onVoiceDetected?: (detected: boolean) =&gt; void
}
export const VoicePoweredOrb: FC&lt;VoicePoweredOrbProps&gt; = ({
  className,
  hue = 0,
  enableVoiceControl = true,
  voiceSensitivity = 2.5,
  maxRotationSpeed = 1.2,
  maxHoverIntensity = 0.8,
  isLoading = false,
  onVoiceDetected,
}) =&gt;
‚ãÆ----
const stopMicrophone = () =&gt;
const isAudioContextUsable = (ctx: AudioContext | null): ctx is AudioContext =&gt;
const initMicrophone = async (cleanedUp:
‚ãÆ----
const resize = () =&gt;
‚ãÆ----
const update = (t: number) =&gt;</file><file path="fe/components/waiting-list/WaitingList.tsx">import { AllyLogo } from &quot;@/components/shared/logo&quot;;
import { ArrowLeft } from &quot;lucide-react&quot;;
import { Input } from &quot;@/components/ui/input&quot;;
import { InteractiveHoverButton } from &quot;@/components/ui/interactive-hover-button&quot;;
import Link from &quot;next/link&quot;;
import React from &quot;react&quot;;
import { SparklesCore } from &quot;@/components/ui/sparkles&quot;;
const WaitingList: React.FC = () =&gt;</file><file path="fe/components/AvatarTooltipGroup.tsx">import { AnimatePresence, motion } from &apos;framer-motion&apos;
import React, { useState } from &apos;react&apos;
import { Star } from &apos;lucide-react&apos;
interface AvatarProps {
  src: string
  name: string
  fallback: string
}
‚ãÆ----
&lt;div className=&quot;relative&quot; onMouseEnter=</file><file path="fe/components/ProductivityGauge.tsx">import React from &apos;react&apos;
import { motion } from &apos;framer-motion&apos;
interface ProductivityGaugeProps {
  score: number
}
const ProductivityGauge: React.FC&lt;ProductivityGaugeProps&gt; = (</file><file path="fe/components/TaskBreakdownChart.tsx">import React from &apos;react&apos;
import { motion } from &apos;framer-motion&apos;
interface ChartData {
  name: string
  value: number
  color: string
}
interface TaskBreakdownChartProps {
  data: ChartData[]
}</file><file path="fe/components/UseCaseSimulator.tsx"></file><file path="fe/components/Waveform.tsx"></file><file path="fe/contexts/AnalyticsContext.tsx">import React, { createContext, useCallback, useContext, useState, useMemo, useRef } from &apos;react&apos;
import { subDays } from &apos;date-fns&apos;
import { useQuery, useQueryClient } from &apos;@tanstack/react-query&apos;
import { DateRange } from &apos;react-day-picker&apos;
import { z } from &apos;zod&apos;
import { calendarsService } from &apos;@/services/calendars.service&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { useAnalyticsData } from &apos;@/hooks/queries/analytics&apos;
import { useUpcomingWeekData, type UpcomingWeekData } from &apos;@/hooks/queries/analytics/useUpcomingWeekData&apos;
import {
  CalendarEventSchema,
  type EnhancedAnalyticsData,
  type ComparisonResult,
  type AnalyticsResponse,
  type ProcessedActivity,
} from &apos;@/types/analytics&apos;
import type { CalendarEvent, CalendarListEntry, EventQueryParams } from &apos;@/types/api&apos;
interface SelectedCalendarForEvents {
  id: string
  name: string
  color: string
}
interface AnalyticsContextValue {
  date: DateRange | undefined
  setDate: (date: DateRange | undefined) =&gt; void
  selectedCalendarIds: string[]
  setSelectedCalendarIds: (ids: string[]) =&gt; void
  calendarsData: CalendarListEntry[]
  calendarMap: Map&lt;string, { name: string; color: string }&gt;
  isCalendarsLoading: boolean
  processedData: EnhancedAnalyticsData
  analyticsRawData: AnalyticsResponse | null | undefined
  comparison: ComparisonResult | null
  isAnalyticsLoading: boolean
  isAnalyticsFetching: boolean
  isAnalyticsError: boolean
  analyticsError: Error | null
  refetchAnalytics: () =&gt; void
  selectedEvent: z.infer&lt;typeof CalendarEventSchema&gt; | null
  isEventDialogOpen: boolean
  selectedEventCalendarColor: string
  selectedEventCalendarName: string
  openEventDetailsDialog: (
    event: z.infer&lt;typeof CalendarEventSchema&gt;,
    calendarColor: string,
    calendarName: string,
  ) =&gt; void
  closeEventDetailsDialog: () =&gt; void
  isCalendarEventsDialogOpen: boolean
  selectedCalendarForEvents: SelectedCalendarForEvents | null
  calendarEvents: CalendarEvent[]
  isCalendarEventsLoading: boolean
  calendarTotalHours: number | undefined
  openCalendarEventsDialog: (calendarId: string, calendarName: string, calendarColor: string) =&gt; void
  closeCalendarEventsDialog: () =&gt; void
  isCalendarSettingsDialogOpen: boolean
  selectedCalendarForSettings: CalendarListEntry | null
  openCalendarSettingsDialog: (calendar: CalendarListEntry) =&gt; void
  closeCalendarSettingsDialog: () =&gt; void
  isCreateCalendarDialogOpen: boolean
  openCreateCalendarDialog: () =&gt; void
  closeCreateCalendarDialog: () =&gt; void
  onCalendarCreated: () =&gt; void
  isDayEventsDialogOpen: boolean
  selectedDayDate: string | null
  selectedDayHours: number
  selectedDayEvents: CalendarEvent[]
  openDayEventsDialog: (dayDate: string, hours: number) =&gt; void
  closeDayEventsDialog: () =&gt; void
  handleActivityClick: (activity: ProcessedActivity) =&gt; void
  handleCalendarEventClick: (event: CalendarEvent, calendarColor: string, calendarName: string) =&gt; void
  upcomingWeekData: UpcomingWeekData | undefined
  isUpcomingWeekLoading: boolean
  isUpcomingWeekError: boolean
  refetchUpcomingWeek: () =&gt; void
}
‚ãÆ----
export function AnalyticsProvider(
‚ãÆ----
// Create calendar dialog state
‚ãÆ----
// Calendar settings dialog state
‚ãÆ----
// Calendar events dialog state
‚ãÆ----
// Day events dialog state
‚ãÆ----
// Fetch calendars</file><file path="fe/contexts/AuthContext.tsx">import type { AuthData, CustomUser, User } from &apos;@/types/api&apos;
import React, { ReactNode, createContext, useCallback, useContext, useMemo } from &apos;react&apos;
import { useUser } from &apos;@/hooks/queries/auth/useUser&apos;
import { STORAGE_KEYS } from &apos;@/lib/constants&apos;
import { useQueryClient } from &apos;@tanstack/react-query&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
interface AuthContextType {
  user: User | CustomUser | null
  isLoading: boolean
  isAuthenticated: boolean
  login: (data: AuthData) =&gt; void
  logout: () =&gt; void
  refreshUser: () =&gt; Promise&lt;void&gt;
}
‚ãÆ----
const hasPreviousSession = ()
export const AuthProvider = (
export const useAuthContext = () =&gt;</file><file path="fe/contexts/ChatContext.tsx">import React, { createContext, useContext, useState, useCallback, useEffect, useRef } from &apos;react&apos;
import { useQueryClient } from &apos;@tanstack/react-query&apos;
import {
  type ConversationListItem,
  type ChatMessage,
  startNewConversation as startNewConversationApi,
} from &apos;@/services/chatService&apos;
import { Message } from &apos;@/types&apos;
import { useConversations, useConversation, useDeleteConversationById } from &apos;@/hooks/queries&apos;
import { useSelectedAgentProfile } from &apos;@/hooks/queries/agent-profiles&apos;
import { queryKeys } from &apos;@/lib/query&apos;
interface ChatContextValue {
  selectedConversationId: string | null
  conversations: ConversationListItem[]
  isLoadingConversations: boolean
  isLoadingConversation: boolean
  isPendingConversation: boolean
  searchQuery: string
  setSearchQuery: (query: string) =&gt; void
  isSearching: boolean
  streamingTitleConversationId: string | null
  selectedProfileId: string | null
  isLoadingProfile: boolean
  selectConversation: (conversation: ConversationListItem) =&gt; void
  startNewConversation: () =&gt; void
  refreshConversations: () =&gt; Promise&lt;void&gt;
  removeConversation: (id: string) =&gt; Promise&lt;boolean&gt;
  setConversationId: (id: string | null, isLocallyCreated?: boolean) =&gt; void
  updateConversationTitle: (id: string, title: string, isStreaming?: boolean) =&gt; void
  addConversationToList: (conversation: ConversationListItem) =&gt; void
  messages: Message[]
  setMessages: React.Dispatch&lt;React.SetStateAction&lt;Message[]&gt;&gt;
}
‚ãÆ----
export function ChatProvider(
‚ãÆ----
// TanStack Query hooks - pass search query when it has 2+ characters
‚ãÆ----
// Track if we just created this conversation locally (to avoid overwriting messages)
‚ãÆ----
// Convert conversation messages when a conversation is loaded
// Skip if this conversation was just created locally (messages already exist)
‚ãÆ----
// Skip overwriting if we just created this conversation locally
‚ãÆ----
// Clear messages immediately when switching conversations to avoid showing stale data
‚ãÆ----
// Invalidate the specific conversation query to ensure fresh data
‚ãÆ----
// Also invalidate the query cache to ensure server data is refreshed</file><file path="fe/contexts/DashboardUIContext.tsx">import React, {
  createContext,
  useCallback,
  useContext,
  useEffect,
  useState,
} from &quot;react&quot;;
import { useRouter, useSearchParams } from &quot;next/navigation&quot;;
import { useTheme } from &quot;next-themes&quot;;
import { toast } from &quot;sonner&quot;;
import { useGoogleCalendarStatus } from &quot;@/hooks/queries/integrations&quot;;
import { STORAGE_KEYS } from &quot;@/lib/constants&quot;;
‚ãÆ----
type DashboardUIContextValue = {
  isSidebarOpen: boolean;
  toggleSidebar: () =&gt; void;
  closeSidebar: () =&gt; void;
  isSettingsOpen: boolean;
  openSettings: () =&gt; void;
  closeSettings: () =&gt; void;
  isDarkMode: boolean;
  toggleTheme: () =&gt; void;
  showTour: boolean;
  completeTour: () =&gt; void;
  handleSignOut: () =&gt; void;
};
‚ãÆ----
export function DashboardUIProvider({
  children,
}: {
  children: React.ReactNode;
})
‚ãÆ----
// Show toast with reconnect action
// Note: googleCalendarStatus is already the unwrapped GoogleCalendarIntegrationStatus (destructured from useQueryWrapper)
‚ãÆ----
const openSettings = ()
const closeSettings = ()
const toggleTheme = ()
const completeTour = () =&gt;
const handleSignOut = () =&gt;
‚ãÆ----
export function useDashboardUI()</file><file path="fe/contexts/GapRecoveryContext.tsx">import React, { createContext, useContext, useState, useCallback, useMemo } from &apos;react&apos;
import type { GapCandidate, GapQueryParams } from &apos;@/types/api&apos;
import type { DateRange } from &apos;react-day-picker&apos;
import { format } from &apos;date-fns&apos;
import { useGaps, useFillGap, useSkipGap, useDismissAllGaps } from &apos;@/hooks/queries/gaps&apos;
interface GapRecoveryContextValue {
  dateRange: DateRange | undefined
  setDateRange: (range: DateRange | undefined) =&gt; void
  gaps: GapCandidate[]
  totalCount: number
  analyzedRange: { start: string; end: string } | null
  isLoading: boolean
  isFetching: boolean
  isError: boolean
  refetch: () =&gt; void
  selectedGap: GapCandidate | null
  isDialogOpen: boolean
  openFillDialog: (gap: GapCandidate) =&gt; void
  closeFillDialog: () =&gt; void
  handleFill: (gap: GapCandidate, summary: string, location?: string) =&gt; void
  handleSkip: (gapId: string) =&gt; void
  handleDismissAll: () =&gt; void
  isFilling: boolean
  isSkipping: boolean
  skippingGapId: string | undefined
  isDismissing: boolean
}
‚ãÆ----
export function GapRecoveryProvider(</file><file path="fe/contexts/LanguageContext.tsx">import React, { createContext, useContext, useEffect, useState, useCallback, useMemo } from &apos;react&apos;
import { useTranslation } from &apos;react-i18next&apos;
import type { TFunction } from &apos;i18next&apos;
import { SUPPORTED_LANGUAGES, LANGUAGE_STORAGE_KEY, type SupportedLanguageCode } from &apos;@/lib/i18n&apos;
import { detectUserLanguage } from &apos;@/lib/geolocation&apos;
‚ãÆ----
interface LanguageContextValue {
  t: TFunction
  currentLanguage: SupportedLanguageCode
  changeLanguage: (code: SupportedLanguageCode) =&gt; void
  languages: typeof SUPPORTED_LANGUAGES
  isRTL: boolean
}
‚ãÆ----
function getInitialLanguage(): SupportedLanguageCode
export function LanguageProvider(
export function useLanguage()</file><file path="fe/contexts/SidebarContext.tsx">import React, { createContext, useContext, useState, useCallback, useMemo } from &apos;react&apos;
import { usePathname, useRouter } from &apos;next/navigation&apos;
import { useDebouncedCallback } from &apos;use-debounce&apos;
import { useChatContext } from &apos;@/contexts/ChatContext&apos;
import { toast } from &apos;sonner&apos;
import type { ConversationListItem } from &apos;@/services/chatService&apos;
interface SidebarContextValue {
  pathname: string
  conversationToDelete: string | null
  setConversationToDelete: (id: string | null) =&gt; void
  isDeletingConversation: boolean
  localSearchValue: string
  handleSearchChange: (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; void
  handleClearSearch: () =&gt; void
  isQuickEventOpen: boolean
  setIsQuickEventOpen: (open: boolean) =&gt; void
  handleNewChat: (onClose: () =&gt; void) =&gt; void
  handleSelectConversation: (conversation: ConversationListItem, onClose: () =&gt; void) =&gt; Promise&lt;void&gt;
  initiateDelete: (e: React.MouseEvent, id: string) =&gt; void
  confirmDelete: () =&gt; Promise&lt;void&gt;
}
‚ãÆ----
export function SidebarProvider(</file><file path="fe/coverage/.lcov.info.0b72bd2634c65b27.tmp">TN:
SF:lib/dateUtils.ts
FNF:4
FNH:4
DA:1,103
DA:10,51
DA:11,36
DA:13,23
DA:14,40
DA:15,2
DA:17,27
DA:18,18
DA:19,2
DA:21,26
DA:22,33
DA:23,2
DA:25,36
DA:31,45
DA:32,43
DA:40,50
DA:41,25
DA:42,74
LF:18
LH:18
end_of_record
TN:
SF:lib/utils.ts
FNF:1
FNH:1
DA:1,28
DA:2,41
DA:4,20
DA:5,28
LF:4
LH:4
end_of_record
TN:
SF:tests/setup.ts
FNF:20
FNH:0
DA:1,17
DA:4,36
DA:6,25
DA:7,0
DA:8,0
DA:9,0
DA:10,0
DA:11,0
DA:12,0
DA:13,0
DA:14,0
DA:15,0
DA:16,5
DA:17,21
DA:18,15
DA:19,15
DA:20,18
DA:21,13
DA:22,16
DA:23,8
DA:24,6
DA:25,17
DA:26,15
DA:27,20
DA:28,17
DA:29,12
DA:30,6
DA:31,18
DA:32,21
DA:33,3
DA:34,3
DA:35,1
DA:37,38
DA:39,27
DA:40,19
DA:41,20
DA:42,19
DA:43,22
DA:44,10
DA:45,3
DA:46,1
DA:49,44
DA:51,53
DA:52,3
DA:53,3
DA:54,2
DA:55,3
DA:56,1
DA:59,50
DA:61,65
DA:62,3
DA:63,3
DA:64,2
DA:65,3
DA:66,1
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:80,3
DA:83,30
DA:84,18
DA:85,16
LF:69
LH:50
end_of_record</file><file path="fe/coverage/.lcov.info.3d1a0965f091892f.tmp">TN:
SF:hooks/useStreamingChat.ts
FNF:14
FNH:7
DA:1,13
DA:3,54
DA:4,94
DA:21,23
DA:22,21
DA:23,19
DA:24,20
DA:25,21
DA:26,12
DA:27,2
DA:29,23
DA:30,101
DA:31,69
DA:32,42
DA:34,50
DA:35,36
DA:36,6
DA:38,43
DA:39,38
DA:40,41
DA:41,38
DA:42,4
DA:43,38
DA:44,11
DA:45,22
DA:46,7
DA:47,6
DA:49,40
DA:50,44
DA:51,31
DA:52,0
DA:53,4
DA:55,63
DA:57,25
DA:58,24
DA:59,23
DA:60,24
DA:61,25
DA:62,15
DA:63,7
DA:65,74
DA:67,46
DA:68,14
DA:69,21
DA:70,36
DA:71,48
DA:72,20
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,9
DA:79,0
DA:80,0
DA:81,0
DA:82,0
DA:83,0
DA:84,9
DA:86,0
DA:87,0
DA:88,0
DA:89,0
DA:90,9
DA:92,0
DA:93,0
DA:94,0
DA:95,0
DA:96,9
DA:98,0
DA:99,9
DA:101,0
DA:102,0
DA:103,0
DA:104,0
DA:105,0
DA:106,0
DA:107,9
DA:109,0
DA:110,0
DA:111,0
DA:112,0
DA:113,0
DA:114,0
DA:115,6
DA:117,5
DA:118,7
DA:120,65
DA:121,40
DA:122,13
DA:123,27
DA:124,44
DA:125,7
DA:126,4
DA:128,39
DA:130,69
DA:131,4
DA:133,12
DA:134,19
DA:135,25
DA:136,17
DA:137,21
DA:138,1
LF:102
LH:71
end_of_record
TN:
SF:lib/api/client.ts
FNF:4
FNH:0
DA:1,35
DA:2,26
DA:14,43
DA:15,45
DA:16,24
DA:18,40
DA:19,28
DA:20,14
DA:21,36
DA:22,4
DA:23,22
DA:24,3
DA:27,25
DA:28,17
DA:31,4
DA:33,0
DA:34,0
DA:35,0
DA:36,0
DA:37,0
DA:38,0
DA:39,0
DA:40,0
DA:41,0
DA:42,2
DA:45,0
DA:46,0
DA:47,0
DA:48,0
DA:49,0
DA:50,0
DA:51,0
DA:52,0
DA:53,0
DA:54,0
DA:55,0
DA:56,0
DA:57,0
DA:59,3
DA:61,34
DA:62,0
DA:63,0
DA:64,0
DA:65,0
DA:66,0
DA:67,0
DA:68,0
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,1
DA:79,0
DA:80,0
DA:81,0
DA:82,0
DA:83,0
DA:84,0
DA:85,0
DA:86,0
DA:87,0
DA:88,0
DA:89,0
DA:90,0
DA:91,0
DA:92,0
DA:93,0
DA:94,0
DA:95,0
DA:96,0
DA:97,0
DA:98,0
DA:99,0
DA:100,0
DA:101,0
DA:102,0
DA:103,0
DA:104,0
DA:105,0
DA:106,0
DA:107,0
DA:108,0
DA:109,0
DA:110,0
DA:111,0
DA:112,0
DA:113,0
DA:114,0
DA:115,0
DA:116,0
DA:117,0
DA:118,0
DA:119,0
DA:120,0
DA:121,0
DA:122,0
DA:123,0
DA:124,0
DA:125,0
DA:126,0
DA:127,0
DA:128,0
DA:129,0
DA:130,0
DA:131,0
DA:132,0
DA:133,0
DA:134,0
DA:135,0
DA:136,0
DA:137,0
DA:138,0
DA:139,0
DA:140,0
DA:141,0
DA:142,0
DA:143,0
DA:144,0
DA:145,0
DA:146,0
DA:147,0
DA:148,0
DA:149,0
DA:150,0
DA:151,0
DA:152,0
DA:153,0
DA:154,0
DA:155,0
DA:156,0
DA:157,0
DA:158,0
DA:161,2
LF:137
LH:20
end_of_record
TN:
SF:lib/api/endpoints.ts
FNF:14
FNH:0
DA:8,27
DA:17,22
DA:23,40
DA:29,40
DA:35,36
DA:41,36
DA:47,50
DA:53,50
DA:59,58
DA:70,30
DA:77,19
DA:83,48
DA:90,28
DA:96,44
DA:103,26
DA:109,50
DA:116,29
DA:122,48
DA:129,40
DA:139,24
DA:146,16
DA:153,44
DA:160,42
DA:166,44
DA:172,36
DA:178,34
DA:189,28
DA:200,74
DA:207,96
DA:218,42
DA:225,40
DA:232,54
DA:238,60
DA:245,46
DA:252,62
DA:259,42
DA:266,42
DA:273,42
DA:284,20
DA:290,40
DA:297,13
DA:304,13
DA:310,44
DA:316,38
DA:322,45
DA:328,36
DA:338,45
DA:345,27
DA:351,67
DA:357,89
DA:359,81
DA:361,68
DA:368,26
DA:379,44
DA:381,44
DA:383,50
DA:385,53
DA:387,46
DA:388,24
DA:389,64
DA:400,54
DA:407,68
DA:414,34
DA:421,20
DA:428,21
DA:435,19
DA:442,22
DA:449,29
DA:455,50
DA:462,40
DA:469,42
DA:470,1
LF:72
LH:72
end_of_record
TN:
SF:lib/constants.ts
FNF:1
FNH:1
DA:6,21
DA:7,79
DA:8,57
DA:9,55
DA:10,41
DA:11,2
DA:14,22
DA:15,15
DA:16,16
DA:17,16
DA:18,14
DA:19,2
DA:22,30
DA:23,31
DA:24,33
DA:25,13
DA:26,2
DA:29,30
DA:31,34
DA:33,40
DA:35,38
DA:37,36
DA:39,19
DA:41,27
DA:43,25
DA:44,2
DA:47,36
DA:49,27
DA:51,17
DA:53,26
DA:54,2
DA:57,32
DA:59,101
DA:61,61
DA:62,1
LF:35
LH:35
end_of_record
TN:
SF:lib/dateUtils.ts
FNF:4
FNH:4
DA:1,103
DA:10,51
DA:11,36
DA:13,23
DA:14,40
DA:15,2
DA:17,27
DA:18,18
DA:19,2
DA:21,26
DA:22,33
DA:23,2
DA:25,36
DA:31,45
DA:32,43
DA:40,50
DA:41,25
DA:42,74
LF:18
LH:18
end_of_record
TN:
SF:lib/utils.ts
FNF:1
FNH:1
DA:1,28
DA:2,41
DA:4,20
DA:5,28
LF:4
LH:4
end_of_record
TN:
SF:services/chatStreamService.ts
FNF:4
FNH:0
DA:1,51
DA:15,0
DA:16,0
DA:17,0
DA:18,0
DA:19,0
DA:20,0
DA:21,0
DA:22,0
DA:23,0
DA:24,0
DA:25,0
DA:26,0
DA:27,0
DA:28,0
DA:29,0
DA:30,0
DA:31,0
DA:32,0
DA:36,0
DA:37,0
DA:38,0
DA:39,0
DA:40,0
DA:41,0
DA:42,0
DA:43,1
DA:62,0
DA:63,0
DA:64,0
DA:65,0
DA:66,0
DA:67,0
DA:68,0
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:79,0
DA:80,0
DA:81,0
DA:82,0
DA:83,0
DA:84,0
DA:85,0
DA:86,0
DA:87,0
DA:88,0
DA:89,0
DA:90,0
DA:91,0
DA:92,0
DA:93,0
DA:94,0
DA:95,0
DA:96,0
DA:97,0
DA:98,0
DA:99,0
DA:100,0
DA:101,0
DA:102,0
DA:103,0
DA:104,0
DA:105,0
DA:106,0
DA:107,0
DA:108,0
DA:109,0
DA:110,0
DA:111,0
DA:112,0
DA:113,0
DA:114,0
DA:115,0
DA:116,0
DA:117,0
DA:118,0
DA:119,0
DA:120,0
DA:121,0
DA:122,0
DA:123,0
DA:124,0
DA:125,0
DA:126,0
DA:127,0
DA:128,0
DA:129,0
DA:130,0
DA:131,0
DA:132,0
DA:133,0
DA:134,0
DA:135,0
DA:136,0
DA:137,0
DA:138,0
DA:139,0
DA:140,0
DA:141,0
DA:142,0
DA:143,0
DA:144,0
DA:145,0
DA:146,0
DA:147,0
DA:148,0
DA:149,0
DA:150,0
DA:151,0
DA:152,0
DA:153,0
DA:154,0
DA:155,0
DA:156,0
DA:157,0
DA:158,0
DA:159,0
DA:160,0
DA:161,0
DA:162,0
DA:163,0
DA:164,0
DA:165,0
DA:166,0
DA:167,0
DA:168,0
DA:169,0
DA:170,0
DA:171,0
DA:172,1
DA:176,0
LF:139
LH:3
end_of_record
TN:
SF:services/payment.service.ts
FNF:24
FNH:21
DA:1,45
DA:2,48
DA:99,38
DA:100,66
DA:101,27
DA:107,30
DA:108,65
DA:109,40
DA:115,43
DA:116,72
DA:117,27
DA:123,40
DA:124,60
DA:130,54
DA:131,38
DA:132,29
DA:133,6
DA:134,4
DA:135,39
DA:141,52
DA:142,38
DA:143,37
DA:144,6
DA:145,4
DA:146,39
DA:152,57
DA:153,82
DA:154,37
DA:160,65
DA:161,74
DA:167,41
DA:168,70
DA:169,8
DA:170,5
DA:171,81
DA:181,0
DA:182,0
DA:183,2
DA:189,0
DA:190,0
DA:191,2
DA:197,0
DA:198,0
DA:199,2
DA:205,57
DA:206,43
DA:207,22
DA:208,13
DA:209,29
DA:210,26
DA:211,24
DA:217,53
DA:218,30
DA:219,37
DA:220,23
DA:221,51
DA:222,50
DA:228,56
DA:229,37
DA:230,43
LF:60
LH:54
end_of_record
TN:
SF:tests/setup.ts
FNF:20
FNH:0
DA:1,17
DA:4,36
DA:6,25
DA:7,0
DA:8,0
DA:9,0
DA:10,0
DA:11,0
DA:12,0
DA:13,0
DA:14,0
DA:15,0
DA:16,5
DA:17,21
DA:18,15
DA:19,15
DA:20,18
DA:21,13
DA:22,16
DA:23,8
DA:24,6
DA:25,17
DA:26,15
DA:27,20
DA:28,17
DA:29,12
DA:30,6
DA:31,18
DA:32,21
DA:33,3
DA:34,3
DA:35,1
DA:37,38
DA:39,27
DA:40,19
DA:41,20
DA:42,19
DA:43,22
DA:44,10
DA:45,3
DA:46,1
DA:49,44
DA:51,53
DA:52,3
DA:53,3
DA:54,2
DA:55,3
DA:56,1
DA:59,50
DA:61,65
DA:62,3
DA:63,3
DA:64,2
DA:65,3
DA:66,1
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:80,3
DA:83,30
DA:84,18
DA:85,16
LF:69
LH:50
end_of_record</file><file path="fe/coverage/.lcov.info.6d75b8dae9b8a72a.tmp">TN:
SF:lib/api/client.ts
FNF:4
FNH:0
DA:1,35
DA:2,26
DA:14,43
DA:15,45
DA:16,24
DA:18,40
DA:19,28
DA:20,14
DA:21,36
DA:22,4
DA:23,22
DA:24,3
DA:27,25
DA:28,17
DA:31,4
DA:33,0
DA:34,0
DA:35,0
DA:36,0
DA:37,0
DA:38,0
DA:39,0
DA:40,0
DA:41,0
DA:42,2
DA:45,0
DA:46,0
DA:47,0
DA:48,0
DA:49,0
DA:50,0
DA:51,0
DA:52,0
DA:53,0
DA:54,0
DA:55,0
DA:56,0
DA:57,0
DA:59,3
DA:61,34
DA:62,0
DA:63,0
DA:64,0
DA:65,0
DA:66,0
DA:67,0
DA:68,0
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,1
DA:79,0
DA:80,0
DA:81,0
DA:82,0
DA:83,0
DA:84,0
DA:85,0
DA:86,0
DA:87,0
DA:88,0
DA:89,0
DA:90,0
DA:91,0
DA:92,0
DA:93,0
DA:94,0
DA:95,0
DA:96,0
DA:97,0
DA:98,0
DA:99,0
DA:100,0
DA:101,0
DA:102,0
DA:103,0
DA:104,0
DA:105,0
DA:106,0
DA:107,0
DA:108,0
DA:109,0
DA:110,0
DA:111,0
DA:112,0
DA:113,0
DA:114,0
DA:115,0
DA:116,0
DA:117,0
DA:118,0
DA:119,0
DA:120,0
DA:121,0
DA:122,0
DA:123,0
DA:124,0
DA:125,0
DA:126,0
DA:127,0
DA:128,0
DA:129,0
DA:130,0
DA:131,0
DA:132,0
DA:133,0
DA:134,0
DA:135,0
DA:136,0
DA:137,0
DA:138,0
DA:139,0
DA:140,0
DA:141,0
DA:142,0
DA:143,0
DA:144,0
DA:145,0
DA:146,0
DA:147,0
DA:148,0
DA:149,0
DA:150,0
DA:151,0
DA:152,0
DA:153,0
DA:154,0
DA:155,0
DA:156,0
DA:157,0
DA:158,0
DA:161,2
LF:137
LH:20
end_of_record
TN:
SF:lib/constants.ts
FNF:1
FNH:1
DA:6,21
DA:7,79
DA:8,57
DA:9,55
DA:10,41
DA:11,2
DA:14,22
DA:15,15
DA:16,16
DA:17,16
DA:18,14
DA:19,2
DA:22,30
DA:23,31
DA:24,33
DA:25,13
DA:26,2
DA:29,30
DA:31,34
DA:33,40
DA:35,38
DA:37,36
DA:39,19
DA:41,27
DA:43,25
DA:44,2
DA:47,36
DA:49,27
DA:51,17
DA:53,26
DA:54,2
DA:57,32
DA:59,101
DA:61,61
DA:62,1
LF:35
LH:35
end_of_record
TN:
SF:services/chatService.ts
FNF:14
FNH:14
DA:1,45
DA:14,53
DA:15,56
DA:16,12
DA:17,12
DA:18,15
DA:19,5
DA:20,12
DA:21,68
DA:22,56
DA:23,35
DA:24,3
DA:66,31
DA:67,12
DA:68,12
DA:69,10
DA:70,3
DA:71,40
DA:72,28
DA:73,27
DA:74,5
DA:75,38
DA:76,34
DA:77,2
DA:78,87
DA:79,94
DA:85,51
DA:86,9
DA:87,86
DA:88,49
DA:89,11
DA:90,13
DA:97,54
DA:98,9
DA:99,72
DA:100,12
DA:101,11
DA:102,14
DA:109,44
DA:110,9
DA:111,56
DA:112,30
DA:113,7
DA:114,12
DA:115,11
DA:116,14
DA:120,65
DA:121,97
DA:122,12
DA:123,15
DA:124,5
DA:125,12
DA:126,68
DA:127,19
DA:128,35
DA:129,3
DA:132,42
DA:133,9
DA:134,56
DA:135,12
DA:136,11
DA:137,13
LF:62
LH:62
end_of_record
TN:
SF:tests/setup.ts
FNF:20
FNH:0
DA:1,17
DA:4,36
DA:6,25
DA:7,0
DA:8,0
DA:9,0
DA:10,0
DA:11,0
DA:12,0
DA:13,0
DA:14,0
DA:15,0
DA:16,5
DA:17,21
DA:18,15
DA:19,15
DA:20,18
DA:21,13
DA:22,16
DA:23,8
DA:24,6
DA:25,17
DA:26,15
DA:27,20
DA:28,17
DA:29,12
DA:30,6
DA:31,18
DA:32,21
DA:33,3
DA:34,3
DA:35,1
DA:37,38
DA:39,27
DA:40,19
DA:41,20
DA:42,19
DA:43,22
DA:44,10
DA:45,3
DA:46,1
DA:49,44
DA:51,53
DA:52,3
DA:53,3
DA:54,2
DA:55,3
DA:56,1
DA:59,50
DA:61,65
DA:62,3
DA:63,3
DA:64,2
DA:65,3
DA:66,1
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:80,3
DA:83,30
DA:84,18
DA:85,16
LF:69
LH:50
end_of_record</file><file path="fe/coverage/.lcov.info.a3bd81d83991e9ab.tmp">TN:
SF:lib/api/client.ts
FNF:4
FNH:0
DA:1,35
DA:2,26
DA:14,43
DA:15,45
DA:16,24
DA:18,40
DA:19,28
DA:20,14
DA:21,36
DA:22,4
DA:23,22
DA:24,3
DA:27,25
DA:28,17
DA:31,4
DA:33,0
DA:34,0
DA:35,0
DA:36,0
DA:37,0
DA:38,0
DA:39,0
DA:40,0
DA:41,0
DA:42,2
DA:45,0
DA:46,0
DA:47,0
DA:48,0
DA:49,0
DA:50,0
DA:51,0
DA:52,0
DA:53,0
DA:54,0
DA:55,0
DA:56,0
DA:57,0
DA:59,3
DA:61,34
DA:62,0
DA:63,0
DA:64,0
DA:65,0
DA:66,0
DA:67,0
DA:68,0
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,1
DA:79,0
DA:80,0
DA:81,0
DA:82,0
DA:83,0
DA:84,0
DA:85,0
DA:86,0
DA:87,0
DA:88,0
DA:89,0
DA:90,0
DA:91,0
DA:92,0
DA:93,0
DA:94,0
DA:95,0
DA:96,0
DA:97,0
DA:98,0
DA:99,0
DA:100,0
DA:101,0
DA:102,0
DA:103,0
DA:104,0
DA:105,0
DA:106,0
DA:107,0
DA:108,0
DA:109,0
DA:110,0
DA:111,0
DA:112,0
DA:113,0
DA:114,0
DA:115,0
DA:116,0
DA:117,0
DA:118,0
DA:119,0
DA:120,0
DA:121,0
DA:122,0
DA:123,0
DA:124,0
DA:125,0
DA:126,0
DA:127,0
DA:128,0
DA:129,0
DA:130,0
DA:131,0
DA:132,0
DA:133,0
DA:134,0
DA:135,0
DA:136,0
DA:137,0
DA:138,0
DA:139,0
DA:140,0
DA:141,0
DA:142,0
DA:143,0
DA:144,0
DA:145,0
DA:146,0
DA:147,0
DA:148,0
DA:149,0
DA:150,0
DA:151,0
DA:152,0
DA:153,0
DA:154,0
DA:155,0
DA:156,0
DA:157,0
DA:158,0
DA:161,2
LF:137
LH:20
end_of_record
TN:
SF:lib/api/endpoints.ts
FNF:14
FNH:0
DA:8,27
DA:17,22
DA:23,40
DA:29,40
DA:35,36
DA:41,36
DA:47,50
DA:53,50
DA:59,58
DA:70,30
DA:77,19
DA:83,48
DA:90,28
DA:96,44
DA:103,26
DA:109,50
DA:116,29
DA:122,48
DA:129,40
DA:139,24
DA:146,16
DA:153,44
DA:160,42
DA:166,44
DA:172,36
DA:178,34
DA:189,28
DA:200,74
DA:207,96
DA:218,42
DA:225,40
DA:232,54
DA:238,60
DA:245,46
DA:252,62
DA:259,42
DA:266,42
DA:273,42
DA:284,20
DA:290,40
DA:297,13
DA:304,13
DA:310,44
DA:316,38
DA:322,45
DA:328,36
DA:338,45
DA:345,27
DA:351,67
DA:357,89
DA:359,81
DA:361,68
DA:368,26
DA:379,44
DA:381,44
DA:383,50
DA:385,53
DA:387,46
DA:388,24
DA:389,64
DA:400,54
DA:407,68
DA:414,34
DA:421,20
DA:428,21
DA:435,19
DA:442,22
DA:449,29
DA:455,50
DA:462,40
DA:469,42
DA:470,1
LF:72
LH:72
end_of_record
TN:
SF:lib/constants.ts
FNF:1
FNH:1
DA:6,21
DA:7,79
DA:8,57
DA:9,55
DA:10,41
DA:11,2
DA:14,22
DA:15,15
DA:16,16
DA:17,16
DA:18,14
DA:19,2
DA:22,30
DA:23,31
DA:24,33
DA:25,13
DA:26,2
DA:29,30
DA:31,34
DA:33,40
DA:35,38
DA:37,36
DA:39,19
DA:41,27
DA:43,25
DA:44,2
DA:47,36
DA:49,27
DA:51,17
DA:53,26
DA:54,2
DA:57,32
DA:59,101
DA:61,61
DA:62,1
LF:35
LH:35
end_of_record
TN:
SF:lib/dateUtils.ts
FNF:4
FNH:4
DA:1,103
DA:10,51
DA:11,36
DA:13,23
DA:14,40
DA:15,2
DA:17,27
DA:18,18
DA:19,2
DA:21,26
DA:22,33
DA:23,2
DA:25,36
DA:31,45
DA:32,43
DA:40,50
DA:41,25
DA:42,74
LF:18
LH:18
end_of_record
TN:
SF:lib/utils.ts
FNF:1
FNH:1
DA:1,28
DA:2,41
DA:4,20
DA:5,28
LF:4
LH:4
end_of_record
TN:
SF:services/chatService.ts
FNF:14
FNH:14
DA:1,45
DA:14,53
DA:15,56
DA:16,12
DA:17,12
DA:18,15
DA:19,5
DA:20,12
DA:21,68
DA:22,56
DA:23,35
DA:24,3
DA:66,31
DA:67,12
DA:68,12
DA:69,10
DA:70,3
DA:71,40
DA:72,28
DA:73,27
DA:74,5
DA:75,38
DA:76,34
DA:77,2
DA:78,87
DA:79,94
DA:85,51
DA:86,9
DA:87,86
DA:88,49
DA:89,11
DA:90,13
DA:97,54
DA:98,9
DA:99,72
DA:100,12
DA:101,11
DA:102,14
DA:109,44
DA:110,9
DA:111,56
DA:112,30
DA:113,7
DA:114,12
DA:115,11
DA:116,14
DA:120,65
DA:121,97
DA:122,12
DA:123,15
DA:124,5
DA:125,12
DA:126,68
DA:127,19
DA:128,35
DA:129,3
DA:132,42
DA:133,9
DA:134,56
DA:135,12
DA:136,11
DA:137,13
LF:62
LH:62
end_of_record
TN:
SF:services/payment.service.ts
FNF:24
FNH:21
DA:1,45
DA:2,48
DA:99,38
DA:100,66
DA:101,27
DA:107,30
DA:108,65
DA:109,40
DA:115,43
DA:116,72
DA:117,27
DA:123,40
DA:124,60
DA:130,54
DA:131,38
DA:132,29
DA:133,6
DA:134,4
DA:135,39
DA:141,52
DA:142,38
DA:143,37
DA:144,6
DA:145,4
DA:146,39
DA:152,57
DA:153,82
DA:154,37
DA:160,65
DA:161,74
DA:167,41
DA:168,70
DA:169,8
DA:170,5
DA:171,81
DA:181,0
DA:182,0
DA:183,2
DA:189,0
DA:190,0
DA:191,2
DA:197,0
DA:198,0
DA:199,2
DA:205,57
DA:206,43
DA:207,22
DA:208,13
DA:209,29
DA:210,26
DA:211,24
DA:217,53
DA:218,30
DA:219,37
DA:220,23
DA:221,51
DA:222,50
DA:228,56
DA:229,37
DA:230,43
LF:60
LH:54
end_of_record
TN:
SF:tests/setup.ts
FNF:20
FNH:0
DA:1,17
DA:4,36
DA:6,25
DA:7,0
DA:8,0
DA:9,0
DA:10,0
DA:11,0
DA:12,0
DA:13,0
DA:14,0
DA:15,0
DA:16,5
DA:17,21
DA:18,15
DA:19,15
DA:20,18
DA:21,13
DA:22,16
DA:23,8
DA:24,6
DA:25,17
DA:26,15
DA:27,20
DA:28,17
DA:29,12
DA:30,6
DA:31,18
DA:32,21
DA:33,3
DA:34,3
DA:35,1
DA:37,38
DA:39,27
DA:40,19
DA:41,20
DA:42,19
DA:43,22
DA:44,10
DA:45,3
DA:46,1
DA:49,44
DA:51,53
DA:52,3
DA:53,3
DA:54,2
DA:55,3
DA:56,1
DA:59,50
DA:61,65
DA:62,3
DA:63,3
DA:64,2
DA:65,3
DA:66,1
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:80,3
DA:83,30
DA:84,18
DA:85,16
LF:69
LH:50
end_of_record</file><file path="fe/coverage/.lcov.info.cb4b8924cabc5d50.tmp">TN:
SF:lib/utils.ts
FNF:1
FNH:1
DA:1,28
DA:2,41
DA:4,20
DA:5,28
LF:4
LH:4
end_of_record
TN:
SF:tests/setup.ts
FNF:20
FNH:0
DA:1,17
DA:4,36
DA:6,25
DA:7,0
DA:8,0
DA:9,0
DA:10,0
DA:11,0
DA:12,0
DA:13,0
DA:14,0
DA:15,0
DA:16,5
DA:17,21
DA:18,15
DA:19,15
DA:20,18
DA:21,13
DA:22,16
DA:23,8
DA:24,6
DA:25,17
DA:26,15
DA:27,20
DA:28,17
DA:29,12
DA:30,6
DA:31,18
DA:32,21
DA:33,3
DA:34,3
DA:35,1
DA:37,38
DA:39,27
DA:40,19
DA:41,20
DA:42,19
DA:43,22
DA:44,10
DA:45,3
DA:46,1
DA:49,44
DA:51,53
DA:52,3
DA:53,3
DA:54,2
DA:55,3
DA:56,1
DA:59,50
DA:61,65
DA:62,3
DA:63,3
DA:64,2
DA:65,3
DA:66,1
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:80,3
DA:83,30
DA:84,18
DA:85,16
LF:69
LH:50
end_of_record</file><file path="fe/coverage/.lcov.info.d8a701fbb22bfc53.tmp">TN:
SF:tests/setup.ts
FNF:20
FNH:0
DA:1,17
DA:4,36
DA:6,25
DA:7,0
DA:8,0
DA:9,0
DA:10,0
DA:11,0
DA:12,0
DA:13,0
DA:14,0
DA:15,0
DA:16,5
DA:17,21
DA:18,15
DA:19,15
DA:20,18
DA:21,13
DA:22,16
DA:23,8
DA:24,6
DA:25,17
DA:26,15
DA:27,20
DA:28,17
DA:29,12
DA:30,6
DA:31,18
DA:32,21
DA:33,3
DA:34,3
DA:35,1
DA:37,38
DA:39,27
DA:40,19
DA:41,20
DA:42,19
DA:43,22
DA:44,10
DA:45,3
DA:46,1
DA:49,44
DA:51,53
DA:52,3
DA:53,3
DA:54,2
DA:55,3
DA:56,1
DA:59,50
DA:61,65
DA:62,3
DA:63,3
DA:64,2
DA:65,3
DA:66,1
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:80,3
DA:83,30
DA:84,18
DA:85,16
LF:69
LH:50
end_of_record</file><file path="fe/coverage/.lcov.info.dfab37873e75a6b1.tmp"></file><file path="fe/coverage/.lcov.info.fc76ad9af8353d8f.tmp">TN:
SF:lib/dateUtils.ts
FNF:4
FNH:4
DA:1,103
DA:10,51
DA:11,36
DA:13,23
DA:14,40
DA:15,2
DA:17,27
DA:18,18
DA:19,2
DA:21,26
DA:22,33
DA:23,2
DA:25,36
DA:31,45
DA:32,43
DA:40,50
DA:41,25
DA:42,74
LF:18
LH:18
end_of_record
TN:
SF:tests/setup.ts
FNF:20
FNH:0
DA:1,17
DA:4,36
DA:6,25
DA:7,0
DA:8,0
DA:9,0
DA:10,0
DA:11,0
DA:12,0
DA:13,0
DA:14,0
DA:15,0
DA:16,5
DA:17,21
DA:18,15
DA:19,15
DA:20,18
DA:21,13
DA:22,16
DA:23,8
DA:24,6
DA:25,17
DA:26,15
DA:27,20
DA:28,17
DA:29,12
DA:30,6
DA:31,18
DA:32,21
DA:33,3
DA:34,3
DA:35,1
DA:37,38
DA:39,27
DA:40,19
DA:41,20
DA:42,19
DA:43,22
DA:44,10
DA:45,3
DA:46,1
DA:49,44
DA:51,53
DA:52,3
DA:53,3
DA:54,2
DA:55,3
DA:56,1
DA:59,50
DA:61,65
DA:62,3
DA:63,3
DA:64,2
DA:65,3
DA:66,1
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:80,3
DA:83,30
DA:84,18
DA:85,16
LF:69
LH:50
end_of_record</file><file path="fe/coverage/lcov.info">TN:
SF:hooks/useStreamingChat.ts
FNF:14
FNH:7
DA:1,13
DA:3,54
DA:4,94
DA:21,23
DA:22,21
DA:23,19
DA:24,20
DA:25,21
DA:26,12
DA:27,2
DA:29,23
DA:30,101
DA:31,69
DA:32,42
DA:34,50
DA:35,36
DA:36,6
DA:38,43
DA:39,38
DA:40,41
DA:41,38
DA:42,4
DA:43,38
DA:44,11
DA:45,22
DA:46,7
DA:47,6
DA:49,40
DA:50,44
DA:51,31
DA:52,0
DA:53,4
DA:55,63
DA:57,25
DA:58,24
DA:59,23
DA:60,24
DA:61,25
DA:62,15
DA:63,7
DA:65,74
DA:67,46
DA:68,14
DA:69,21
DA:70,36
DA:71,48
DA:72,20
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,9
DA:79,0
DA:80,0
DA:81,0
DA:82,0
DA:83,0
DA:84,9
DA:86,0
DA:87,0
DA:88,0
DA:89,0
DA:90,9
DA:92,0
DA:93,0
DA:94,0
DA:95,0
DA:96,9
DA:98,0
DA:99,9
DA:101,0
DA:102,0
DA:103,0
DA:104,0
DA:105,0
DA:106,0
DA:107,9
DA:109,0
DA:110,0
DA:111,0
DA:112,0
DA:113,0
DA:114,0
DA:115,6
DA:117,5
DA:118,7
DA:120,65
DA:121,40
DA:122,13
DA:123,27
DA:124,44
DA:125,7
DA:126,4
DA:128,39
DA:130,69
DA:131,4
DA:133,12
DA:134,19
DA:135,25
DA:136,17
DA:137,21
DA:138,1
LF:102
LH:71
end_of_record
TN:
SF:lib/constants.ts
FNF:1
FNH:1
DA:6,21
DA:7,79
DA:8,57
DA:9,55
DA:10,41
DA:11,2
DA:14,22
DA:15,15
DA:16,16
DA:17,16
DA:18,14
DA:19,2
DA:22,30
DA:23,31
DA:24,33
DA:25,13
DA:26,2
DA:29,30
DA:31,34
DA:33,40
DA:35,38
DA:37,36
DA:39,19
DA:41,27
DA:43,25
DA:44,2
DA:47,36
DA:49,27
DA:51,17
DA:53,26
DA:54,2
DA:57,32
DA:59,101
DA:61,61
DA:62,1
LF:35
LH:35
end_of_record
TN:
SF:services/chatStreamService.ts
FNF:4
FNH:0
DA:1,51
DA:15,0
DA:16,0
DA:17,0
DA:18,0
DA:19,0
DA:20,0
DA:21,0
DA:22,0
DA:23,0
DA:24,0
DA:25,0
DA:26,0
DA:27,0
DA:28,0
DA:29,0
DA:30,0
DA:31,0
DA:32,0
DA:36,0
DA:37,0
DA:38,0
DA:39,0
DA:40,0
DA:41,0
DA:42,0
DA:43,1
DA:62,0
DA:63,0
DA:64,0
DA:65,0
DA:66,0
DA:67,0
DA:68,0
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:79,0
DA:80,0
DA:81,0
DA:82,0
DA:83,0
DA:84,0
DA:85,0
DA:86,0
DA:87,0
DA:88,0
DA:89,0
DA:90,0
DA:91,0
DA:92,0
DA:93,0
DA:94,0
DA:95,0
DA:96,0
DA:97,0
DA:98,0
DA:99,0
DA:100,0
DA:101,0
DA:102,0
DA:103,0
DA:104,0
DA:105,0
DA:106,0
DA:107,0
DA:108,0
DA:109,0
DA:110,0
DA:111,0
DA:112,0
DA:113,0
DA:114,0
DA:115,0
DA:116,0
DA:117,0
DA:118,0
DA:119,0
DA:120,0
DA:121,0
DA:122,0
DA:123,0
DA:124,0
DA:125,0
DA:126,0
DA:127,0
DA:128,0
DA:129,0
DA:130,0
DA:131,0
DA:132,0
DA:133,0
DA:134,0
DA:135,0
DA:136,0
DA:137,0
DA:138,0
DA:139,0
DA:140,0
DA:141,0
DA:142,0
DA:143,0
DA:144,0
DA:145,0
DA:146,0
DA:147,0
DA:148,0
DA:149,0
DA:150,0
DA:151,0
DA:152,0
DA:153,0
DA:154,0
DA:155,0
DA:156,0
DA:157,0
DA:158,0
DA:159,0
DA:160,0
DA:161,0
DA:162,0
DA:163,0
DA:164,0
DA:165,0
DA:166,0
DA:167,0
DA:168,0
DA:169,0
DA:170,0
DA:171,0
DA:172,1
DA:176,0
LF:139
LH:3
end_of_record
TN:
SF:tests/setup.ts
FNF:20
FNH:0
DA:1,17
DA:4,36
DA:6,25
DA:7,0
DA:8,0
DA:9,0
DA:10,0
DA:11,0
DA:12,0
DA:13,0
DA:14,0
DA:15,0
DA:16,5
DA:17,21
DA:18,15
DA:19,15
DA:20,18
DA:21,13
DA:22,16
DA:23,8
DA:24,6
DA:25,17
DA:26,15
DA:27,20
DA:28,17
DA:29,12
DA:30,6
DA:31,18
DA:32,21
DA:33,3
DA:34,3
DA:35,1
DA:37,38
DA:39,27
DA:40,19
DA:41,20
DA:42,19
DA:43,22
DA:44,10
DA:45,3
DA:46,1
DA:49,44
DA:51,53
DA:52,3
DA:53,3
DA:54,2
DA:55,3
DA:56,1
DA:59,50
DA:61,65
DA:62,3
DA:63,3
DA:64,2
DA:65,3
DA:66,1
DA:69,0
DA:70,0
DA:71,0
DA:72,0
DA:73,0
DA:74,0
DA:75,0
DA:76,0
DA:77,0
DA:78,0
DA:80,3
DA:83,30
DA:84,18
DA:85,16
LF:69
LH:50
end_of_record</file><file path="fe/hooks/queries/admin/index.ts"></file><file path="fe/hooks/queries/admin/useAdminAuditLogs.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { getAuditLogs } from &apos;@/services/admin.service&apos;
export const useAdminAuditLogs = (params: {
  page?: number
  limit?: number
  adminUserId?: string
  action?: string
  search?: string
}) =&gt;</file><file path="fe/hooks/queries/admin/useAdminCharts.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { getRevenueTrends, getSubscriptionTrends, getAdminMe } from &apos;@/services/admin.service&apos;
export const useRevenueTrends = (months: number = 6) =&gt;
export const useSubscriptionTrends = (days: number = 7) =&gt;
export const useAdminMe = () =&gt;</file><file path="fe/hooks/queries/admin/useAdminPayments.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { getPayments } from &apos;@/services/admin.service&apos;
export const useAdminPayments = (params: {
  page?: number
  limit?: number
  userId?: string
  status?: string
  search?: string
}) =&gt;
export const useRecentPayments = (params:</file><file path="fe/hooks/queries/admin/useAdminSubscriptions.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { getSubscriptions } from &apos;@/services/admin.service&apos;
export const useAdminSubscriptions = (params: {
  page?: number
  limit?: number
  userId?: string
  status?: string
  search?: string
}) =&gt;</file><file path="fe/hooks/queries/admin/useAdminUsers.ts">import { useQuery, useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import {
  getUsers,
  getUserById,
  updateUserStatus,
  updateUserRole,
  grantCredits,
  sendPasswordReset,
} from &apos;@/services/admin.service&apos;
import type { AdminUserListParams, UserStatus, UserRole } from &apos;@/types/admin&apos;
export const useAdminUsers = (params: AdminUserListParams) =&gt;
export const useAdminUser = (id: string) =&gt;
export const useUpdateUserStatus = () =&gt;
export const useUpdateUserRole = () =&gt;
export const useGrantCredits = () =&gt;
export const useSendPasswordReset = () =&gt;</file><file path="fe/hooks/queries/admin/useDashboardStats.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { getDashboardStats, getSubscriptionDistribution } from &apos;@/services/admin.service&apos;
export const useDashboardStats = () =&gt;
export const useSubscriptionDistribution = () =&gt;</file><file path="fe/hooks/queries/agent-profiles/index.ts">import { useQuery, useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import {
  agentProfilesService,
  type AgentProfile,
  type AgentTier,
  type AgentProfilesResponse,
  type SelectedProfileResponse,
  type GetProfilesParams,
} from &apos;@/services/agent-profiles.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import type { QueryHookOptions } from &apos;../useQueryWrapper&apos;
export function useAgentProfiles(params?: GetProfilesParams, options?: QueryHookOptions)
export function useAgentProfile(id: string, options?: QueryHookOptions)
export function useSelectedAgentProfile(options?: QueryHookOptions)
export function useUpdateSelectedAgentProfile()</file><file path="fe/hooks/queries/analytics/index.ts"></file><file path="fe/hooks/queries/analytics/useAIInsights.ts">import type { AIInsightsResponse } from &apos;@/types/analytics&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
import { useQuery } from &apos;@tanstack/react-query&apos;
interface UseAIInsightsOptions {
  timeMin: Date | null
  timeMax: Date | null
  enabled?: boolean
}
interface APIResponse {
  status: string
  message: string
  data: AIInsightsResponse
}
export function useAIInsights(</file><file path="fe/hooks/queries/analytics/useAnalyticsComparison.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { AnalyticsResponseSchema, type ComparisonResult, type PeriodMetrics } from &apos;@/types/analytics&apos;
interface UseAnalyticsComparisonOptions {
  timeMin: Date | null
  timeMax: Date | null
  currentMetrics: PeriodMetrics | null
  enabled?: boolean
}
export function useAnalyticsComparison({
  timeMin,
  timeMax,
  currentMetrics,
  enabled = true,
}: UseAnalyticsComparisonOptions)
‚ãÆ----
const calculateMetrics = (data: typeof previousResult.data): PeriodMetrics =&gt;
‚ãÆ----
const calculateTrend = (
        current: number,
        previous: number,
):</file><file path="fe/hooks/queries/analytics/useAnalyticsData.ts">import React from &apos;react&apos;
import { useQuery } from &apos;@tanstack/react-query&apos;
import { CalendarDays } from &apos;lucide-react&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import {
  AnalyticsResponseSchema,
  type AnalyticsResponse,
  type CalendarBreakdownItem,
  type ProcessedActivity,
  type PeriodMetrics,
  type DailyAvailableHoursDataPoint,
  type EnhancedAnalyticsData,
  type WeeklyPatternDataPoint,
  type MonthlyPatternDataPoint,
  type PatternEventSummary,
  type EventDurationCategory,
  type TimeOfDayDistribution,
  type EventDurationBreakdown,
  type FocusTimeMetrics,
  type ProductivityMetrics,
} from &apos;@/types/analytics&apos;
import { toast } from &apos;sonner&apos;
import { useAnalyticsComparison } from &apos;./useAnalyticsComparison&apos;
import type { CalendarEvent } from &apos;@/types/api&apos;
interface UseAnalyticsDataOptions {
  timeMin: Date | null
  timeMax: Date | null
  calendarMap: Map&lt;string, { name: string; color: string }&gt;
  calendarIds?: string[]
  enabled?: boolean
}
‚ãÆ----
function getEmptyEnhancedData(): EnhancedAnalyticsData
function getTimeOfDayCategory(hour: number): keyof TimeOfDayDistribution
function getDurationCategory(minutes: number): keyof EventDurationBreakdown
function calculateProductivityScore(
  meetingLoad: number,
  focusTimePercentage: number,
  eventDistribution: number
): number
export function useAnalyticsData(</file><file path="fe/hooks/queries/analytics/useUpcomingWeekData.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { addDays, startOfDay, endOfDay, format, isToday, isTomorrow } from &apos;date-fns&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { AnalyticsResponseSchema } from &apos;@/types/analytics&apos;
import type { CalendarEvent } from &apos;@/types/api&apos;
export interface UpcomingDayData {
  date: Date
  dateStr: string
  dayName: string
  dayShort: string
  isToday: boolean
  isTomorrow: boolean
  totalHours: number
  eventCount: number
  events: {
    id: string
    summary: string
    startTime: string
    endTime: string
    durationMinutes: number
    calendarName: string
    calendarColor: string
    isAllDay: boolean
    isRecurring: boolean
  }[]
  busynessLevel: &apos;free&apos; | &apos;light&apos; | &apos;moderate&apos; | &apos;busy&apos; | &apos;packed&apos;
}
export interface UpcomingWeekData {
  days: UpcomingDayData[]
  totalEvents: number
  totalHours: number
  busiestDay: string
  freestDay: string
}
interface UseUpcomingWeekDataOptions {
  calendarMap: Map&lt;string, { name: string; color: string }&gt;
  enabled?: boolean
}
function getBusynessLevel(hours: number): &apos;free&apos; | &apos;light&apos; | &apos;moderate&apos; | &apos;busy&apos; | &apos;packed&apos;
export function useUpcomingWeekData(</file><file path="fe/hooks/queries/auth/index.ts"></file><file path="fe/hooks/queries/auth/useDeactivateUser.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { authService } from &apos;@/services/auth.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { ApiResponse } from &apos;@/types/api&apos;
export function useDeactivateUser(options?: MutationHookOptions&lt;null, void&gt;)</file><file path="fe/hooks/queries/auth/useSignIn.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { authService } from &apos;@/services/auth.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { AuthData, ApiResponse } from &apos;@/types/api&apos;
interface SignInVariables {
  email: string
  password: string
}
export function useSignIn(options?: MutationHookOptions&lt;AuthData, SignInVariables&gt;)</file><file path="fe/hooks/queries/auth/useSignUp.ts">import { useMutation } from &apos;@tanstack/react-query&apos;
import { authService } from &apos;@/services/auth.service&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { AuthData, ApiResponse } from &apos;@/types/api&apos;
interface SignUpVariables {
  email: string
  password: string
}
export function useSignUp(options?: MutationHookOptions&lt;AuthData, SignUpVariables&gt;)</file><file path="fe/hooks/queries/auth/useUser.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { authService } from &apos;@/services/auth.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
interface UseUserOptions extends QueryHookOptions {
  customUser?: boolean
}
export function useUser(options?: UseUserOptions)</file><file path="fe/hooks/queries/auth/useVerifyOTP.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { authService } from &apos;@/services/auth.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { AuthData, ApiResponse } from &apos;@/types/api&apos;
interface VerifyOTPVariables {
  email: string
  token: string
}
export function useVerifyOTP(options?: MutationHookOptions&lt;AuthData, VerifyOTPVariables&gt;)</file><file path="fe/hooks/queries/billing/index.ts"></file><file path="fe/hooks/queries/billing/useBilling.ts">import { useQuery, useQueries } from &apos;@tanstack/react-query&apos;
import {
  getSubscriptionStatus,
  getPlans,
  getBillingOverview,
  type UserAccess,
  type Plan,
  type BillingOverview,
} from &apos;@/services/payment.service&apos;
import { QUERY_CONFIG, STORAGE_KEYS } from &apos;@/lib/constants&apos;
const hasPreviousSession = ()
‚ãÆ----
export function useSubscriptionStatus(options?:
export function usePlans(options?:
export function useBillingOverview(options?:
export function useBillingData()</file><file path="fe/hooks/queries/calendars/index.ts"></file><file path="fe/hooks/queries/calendars/useCalendarById.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { calendarsService } from &apos;@/services/calendars.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
interface UseCalendarByIdOptions extends QueryHookOptions {
  id: string
}
export function useCalendarById(options: UseCalendarByIdOptions)</file><file path="fe/hooks/queries/calendars/useCalendarColors.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { calendarsService } from &apos;@/services/calendars.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
export function useCalendarColors(options?: QueryHookOptions)</file><file path="fe/hooks/queries/calendars/useCalendars.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { calendarsService } from &apos;@/services/calendars.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
interface UseCalendarsOptions extends QueryHookOptions {
  custom?: boolean
}
export function useCalendars(options?: UseCalendarsOptions)</file><file path="fe/hooks/queries/calendars/useCalendarSettings.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { calendarsService } from &apos;@/services/calendars.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
interface UseCalendarSettingsOptions extends QueryHookOptions {
  calendarId?: string
}
export function useCalendarSettings(options?: UseCalendarSettingsOptions)</file><file path="fe/hooks/queries/calendars/useCalendarTimezones.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { calendarsService } from &apos;@/services/calendars.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
export function useCalendarTimezones(options?: QueryHookOptions)</file><file path="fe/hooks/queries/calendars/useCreateCalendar.ts">import type { ApiResponse, CreateCalendarRequest, CreateCalendarResponse } from &apos;@/types/api&apos;
import { MutationHookOptions, useMutationWrapper } from &apos;../useMutationWrapper&apos;
import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { calendarsService } from &apos;@/services/calendars.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
export function useCreateCalendar(options?: MutationHookOptions&lt;CreateCalendarResponse, CreateCalendarRequest&gt;)</file><file path="fe/hooks/queries/calendars/useFreeBusy.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { calendarsService } from &apos;@/services/calendars.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
export function useFreeBusy(options?: QueryHookOptions)</file><file path="fe/hooks/queries/conversations/index.ts"></file><file path="fe/hooks/queries/conversations/useConversation.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { getConversation, type FullConversation } from &apos;@/services/chatService&apos;
import type { QueryHookOptions } from &apos;../useQueryWrapper&apos;
interface UseConversationOptions extends QueryHookOptions {
  conversationId: string | null
}
export function useConversation(options: UseConversationOptions)</file><file path="fe/hooks/queries/conversations/useConversations.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { getConversations, type ConversationListResponse } from &apos;@/services/chatService&apos;
import type { QueryHookOptions } from &apos;../useQueryWrapper&apos;
interface UseConversationsOptions extends QueryHookOptions {
  limit?: number
  offset?: number
  search?: string
}
export function useConversations(options?: UseConversationsOptions)</file><file path="fe/hooks/queries/conversations/useDeleteAllConversations.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { deleteAllConversations } from &apos;@/services/chatService&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import type { MutationHookOptions } from &apos;../useMutationWrapper&apos;
type DeleteAllResult = { success: boolean; deletedCount: number }
export function useDeleteAllConversations(options?: MutationHookOptions&lt;DeleteAllResult, void&gt;)</file><file path="fe/hooks/queries/conversations/useDeleteConversationById.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { deleteConversation } from &apos;@/services/chatService&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import type { MutationHookOptions } from &apos;../useMutationWrapper&apos;
export function useDeleteConversationById(options?: MutationHookOptions&lt;boolean, string&gt;)</file><file path="fe/hooks/queries/conversations/useGetConversationById.ts">import { getConversation, type FullConversation } from &apos;@/services/chatService&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import { useQuery } from &apos;@tanstack/react-query&apos;
import type { QueryHookOptions } from &apos;../useQueryWrapper&apos;
export function useGetConversationById(conversationId: string, options?: QueryHookOptions)</file><file path="fe/hooks/queries/conversations/useGetConversations.ts">import { QUERY_CONFIG } from &quot;@/lib/constants&quot;;
import {
  getConversations,
  type ConversationListResponse,
} from &quot;@/services/chatService&quot;;
import { queryKeys } from &quot;@/lib/query/keys&quot;;
import { useQuery } from &quot;@tanstack/react-query&quot;;
export const useGetConversations = () =&gt;</file><file path="fe/hooks/queries/conversations/useRefreshConversation.ts">import { queryKeys } from &apos;@/lib/query/keys&apos;
import { useCallback } from &apos;react&apos;
import { useQueryClient } from &apos;@tanstack/react-query&apos;
export function useRefreshConversations()</file><file path="fe/hooks/queries/conversations/useResetMemory.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { resetMemory, ResetMemoryResult } from &apos;@/services/chatService&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import type { MutationHookOptions } from &apos;../useMutationWrapper&apos;
export function useResetMemory(options?: MutationHookOptions&lt;ResetMemoryResult, void&gt;)</file><file path="fe/hooks/queries/conversations/useUpdateConversationById.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { ChatResponse, continueConversation } from &apos;@/services/chatService&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import type { MutationHookOptions } from &apos;../useMutationWrapper&apos;
interface ContinueConversationParams {
  conversationId: string
  message: string
}
export function useUpdateConversationById(options?: MutationHookOptions&lt;ChatResponse, ContinueConversationParams&gt;)</file><file path="fe/hooks/queries/events/index.ts"></file><file path="fe/hooks/queries/events/useCreateEvent.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { CreateEventRequest, CalendarEvent, ApiResponse } from &apos;@/types/api&apos;
export function useCreateEvent(options?: MutationHookOptions&lt;CalendarEvent, CreateEventRequest&gt;)</file><file path="fe/hooks/queries/events/useDeleteEvent.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { ApiResponse } from &apos;@/types/api&apos;
export function useDeleteEvent(options?: MutationHookOptions&lt;null, string&gt;)</file><file path="fe/hooks/queries/events/useEventAnalytics.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
import type { EventQueryParams } from &apos;@/types/api&apos;
interface UseEventAnalyticsOptions extends QueryHookOptions {
  params?: EventQueryParams
}
export function useEventAnalytics(options?: UseEventAnalyticsOptions)</file><file path="fe/hooks/queries/events/useEventById.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
interface UseEventByIdOptions extends QueryHookOptions {
  id: string
  calendarId?: string
}
export function useEventById(options: UseEventByIdOptions)</file><file path="fe/hooks/queries/events/useEvents.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { useQueryWrapper, QueryHookOptions } from &apos;../useQueryWrapper&apos;
import type { EventQueryParams } from &apos;@/types/api&apos;
interface UseEventsOptions extends QueryHookOptions {
  params?: EventQueryParams
}
export function useEvents(options?: UseEventsOptions)</file><file path="fe/hooks/queries/events/useMoveEvent.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { MoveEventRequest, CalendarEvent, ApiResponse } from &apos;@/types/api&apos;
export function useMoveEvent(options?: MutationHookOptions&lt;CalendarEvent, MoveEventRequest&gt;)</file><file path="fe/hooks/queries/events/useQuickAddEvent.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { eventsService, QuickAddResult } from &apos;@/services/events.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import type { QuickAddEventRequest, QuickAddResponse } from &apos;@/types/api&apos;
export interface QuickAddMutationOptions {
  onSuccess?: (data: QuickAddResponse, variables: QuickAddEventRequest) =&gt; void | Promise&lt;void&gt;
  onConflict?: (data: QuickAddResponse, variables: QuickAddEventRequest) =&gt; void
  onError?: (error: string, variables: QuickAddEventRequest) =&gt; void
  onSettled?: (result: QuickAddResult | undefined, variables: QuickAddEventRequest) =&gt; void
}
export function useQuickAddEvent(options?: QuickAddMutationOptions)</file><file path="fe/hooks/queries/events/useReschedule.ts">import { useMutation, useQuery, useQueryClient } from &apos;@tanstack/react-query&apos;
import { eventsService, RescheduleSuggestionsResponse, RescheduleEventRequest } from &apos;@/services/events.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { CalendarEvent, ApiResponse } from &apos;@/types/api&apos;
interface UseRescheduleSuggestionsParams {
  eventId: string
  calendarId?: string
  preferredTimeOfDay?: &apos;morning&apos; | &apos;afternoon&apos; | &apos;evening&apos; | &apos;any&apos;
  daysToSearch?: number
  excludeWeekends?: boolean
  enabled?: boolean
}
export function useRescheduleSuggestions({
  eventId,
  calendarId,
  preferredTimeOfDay,
  daysToSearch,
  excludeWeekends,
  enabled = true,
}: UseRescheduleSuggestionsParams)
interface RescheduleEventParams extends RescheduleEventRequest {
  eventId: string
}
export function useRescheduleEvent(options?: MutationHookOptions&lt;CalendarEvent, RescheduleEventParams&gt;)</file><file path="fe/hooks/queries/events/useUpdateEvent.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { UpdateEventRequest, CalendarEvent, ApiResponse } from &apos;@/types/api&apos;
interface UpdateEventVariables {
  id: string
  data: UpdateEventRequest
}
export function useUpdateEvent(options?: MutationHookOptions&lt;CalendarEvent, UpdateEventVariables&gt;)</file><file path="fe/hooks/queries/events/useWatchEvents.ts">import { useMutation } from &apos;@tanstack/react-query&apos;
import { eventsService } from &apos;@/services/events.service&apos;
import { useMutationWrapper, MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { WatchEventsRequest, CalendarEvent, ApiResponse } from &apos;@/types/api&apos;
export function useWatchEvents(options?: MutationHookOptions&lt;CalendarEvent, WatchEventsRequest&gt;)</file><file path="fe/hooks/queries/gaps/index.ts"></file><file path="fe/hooks/queries/gaps/useGapMutations.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { gapsService } from &apos;@/services/gaps.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import type { FillGapRequest, FillGapResponse, SkipGapResponse, DismissAllGapsResponse } from &apos;@/types/api&apos;
import { toast } from &apos;sonner&apos;
export function useFillGap()
export function useSkipGap()
export function useDismissAllGaps()
export function useDisableGapAnalysis()</file><file path="fe/hooks/queries/gaps/useGaps.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { gapsService } from &apos;@/services/gaps.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import type { GapsResponse, GapQueryParams, ApiResponse } from &apos;@/types/api&apos;
export interface UseGapsOptions {
  enabled?: boolean
  refetchOnWindowFocus?: boolean
  staleTime?: number
}
export function useGaps(params?: GapQueryParams, options?: UseGapsOptions)</file><file path="fe/hooks/queries/integrations/index.ts"></file><file path="fe/hooks/queries/integrations/useDisconnectGoogleCalendar.ts">import { useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import { integrationsService } from &apos;@/services/integrations.service&apos;
import { useMutationWrapper, type MutationHookOptions } from &apos;../useMutationWrapper&apos;
import type { ApiResponse } from &apos;@/types/api&apos;
type DisconnectResponse = { isActive: boolean }
export function useDisconnectGoogleCalendar(options?: MutationHookOptions&lt;DisconnectResponse, void&gt;)</file><file path="fe/hooks/queries/integrations/useGoogleCalendarStatus.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { integrationsService } from &apos;@/services/integrations.service&apos;
import { useQueryWrapper, type QueryHookOptions } from &apos;../useQueryWrapper&apos;
export function useGoogleCalendarStatus(options?: QueryHookOptions)</file><file path="fe/hooks/queries/integrations/useSlackStatus.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { queryKeys } from &apos;@/lib/query&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { integrationsService } from &apos;@/services/integrations.service&apos;
import { useQueryWrapper, type QueryHookOptions } from &apos;../useQueryWrapper&apos;
export function useSlackStatus(options?: QueryHookOptions)</file><file path="fe/hooks/queries/preferences/index.ts">import { useQuery, useMutation, useQueryClient } from &apos;@tanstack/react-query&apos;
import { preferencesService, type PreferenceResponse } from &apos;@/services/preferences.service&apos;
import { queryKeys } from &apos;@/lib/query/keys&apos;
import { QUERY_CONFIG } from &apos;@/lib/constants&apos;
import type {
  AllyBrainFormData,
  ContextualSchedulingFormData,
  ReminderDefaultsFormData,
  VoicePreferenceFormData,
  DailyBriefingFormData,
} from &apos;@/lib/validations/preferences&apos;
import type { QueryHookOptions } from &apos;../useQueryWrapper&apos;
export function useAllyBrain(options?: QueryHookOptions)
export function useUpdateAllyBrain()
export function useContextualScheduling(options?: QueryHookOptions)
export function useUpdateContextualScheduling()
export function useReminderDefaults(options?: QueryHookOptions)
export function useUpdateReminderDefaults()
export function useVoicePreference(options?: QueryHookOptions)
export function useUpdateVoicePreference()
export function useDailyBriefing(options?: QueryHookOptions)
export function useUpdateDailyBriefing()</file><file path="fe/hooks/queries/AGENTS.md"># Query Hooks Module

TanStack Query hooks with standardized wrapper pattern.

## Wrapper Pattern

```typescript
// Query hook
export function useEvents(options?: QueryHookOptions) {
  return useQueryWrapper({
    queryKey: [&apos;events&apos;],
    queryFn: () =&gt; eventService.getEvents(),
    ...options,
  })
}

// Mutation hook
export function useCreateEvent() {
  return useMutationWrapper({
    mutationFn: (data) =&gt; eventService.createEvent(data),
    successMessage: &apos;Event created&apos;,
    invalidateKeys: [[&apos;events&apos;]],
  })
}
```

## Where to Look

| Task                     | File                                 |
| ------------------------ | ------------------------------------ |
| Add query hook           | Domain folder + export in `index.ts` |
| Add mutation hook        | Domain folder + export in `index.ts` |
| Change query behavior    | `useQueryWrapper.ts`                 |
| Change mutation behavior | `useMutationWrapper.ts`              |
| API calls                | `@/services/`                        |

## Domain Structure

| Folder           | Hooks                                          |
| ---------------- | ---------------------------------------------- |
| `auth/`          | useUser, useSignIn, useSignUp, useVerifyOTP    |
| `events/`        | useEvents, useCreateEvent, useQuickAddEvent    |
| `calendars/`     | useCalendars, useCalendarSettings, useFreeBusy |
| `conversations/` | useConversations, useGetConversationById       |
| `gaps/`          | useGaps, useFillGap, useGapSettings            |
| `preferences/`   | useAllyBrain, useContextualScheduling          |
| `analytics/`     | useEventAnalytics                              |
| `integrations/`  | useGoogleCalendarStatus                        |

## Query Key Patterns

| Key                 | Usage             |
| ------------------- | ----------------- |
| `[&apos;events&apos;]`        | All events list   |
| `[&apos;events&apos;, id]`    | Single event      |
| `[&apos;calendars&apos;]`     | All calendars     |
| `[&apos;conversations&apos;]` | Conversation list |
| `[&apos;gaps&apos;]`          | Gap recovery data |

## Conventions

- All hooks MUST use wrapper functions
- Export all hooks from domain `index.ts`
- Re-export from root `index.ts`
- Mutations must specify `invalidateKeys`

## Anti-Patterns

| Forbidden                    | Why                          |
| ---------------------------- | ---------------------------- |
| Raw `useQuery`/`useMutation` | Use wrappers for consistency |
| Hardcoded API URLs           | Use services layer           |
| Missing `invalidateKeys`     | Stale data after mutations   |
| Duplicate query keys         | Use established patterns     |</file><file path="fe/hooks/queries/index.ts"></file><file path="fe/hooks/queries/useMutationWrapper.ts">import { UseMutationResult } from &apos;@tanstack/react-query&apos;
import type { ApiResponse } from &apos;@/types/api&apos;
import { NormalizedMutationState, extractApiError } from &apos;@/lib/query/types&apos;
export function useMutationWrapper&lt;TData, TVariables&gt;(
  mutationResult: UseMutationResult&lt;ApiResponse&lt;TData&gt;, Error, TVariables&gt;,
): NormalizedMutationState&lt;TData, TVariables&gt;
‚ãÆ----
const mutateAsync = async (variables: TVariables): Promise&lt;TData&gt; =&gt;
‚ãÆ----
export interface MutationHookOptions&lt;TData, TVariables&gt; {
  onSuccess?: (data: TData, variables: TVariables) =&gt; void | Promise&lt;void&gt;
  onError?: (error: Error, variables: TVariables) =&gt; void
  onSettled?: (data: TData | undefined, error: Error | null, variables: TVariables) =&gt; void
}</file><file path="fe/hooks/queries/useQueryWrapper.ts">import { UseQueryResult } from &apos;@tanstack/react-query&apos;
import type { ApiResponse } from &apos;@/types/api&apos;
import { NormalizedQueryState, extractApiError } from &apos;@/lib/query/types&apos;
export function useQueryWrapper&lt;TData&gt;(
  queryResult: UseQueryResult&lt;ApiResponse&lt;TData&gt;, Error&gt;,
): NormalizedQueryState&lt;TData&gt;
export interface QueryHookOptions {
  enabled?: boolean
  refetchOnWindowFocus?: boolean
  refetchOnMount?: boolean
  staleTime?: number
  gcTime?: number
}</file><file path="fe/hooks/useAgentProfiles.ts">import { useQuery } from &apos;@tanstack/react-query&apos;
import { voiceService, type AgentProfile } from &apos;@/services/voice.service&apos;
export type AgentTier = &apos;free&apos; | &apos;pro&apos; | &apos;enterprise&apos;
export interface UseAgentProfilesOptions {
  tier?: AgentTier
  voiceOnly?: boolean
  enabled?: boolean
}
export function useAgentProfiles(options: UseAgentProfilesOptions =
export function useDefaultProfile(profiles: AgentProfile[] | undefined, defaultId: string | undefined)</file><file path="fe/hooks/useContainerDimensions.ts">import { useState, useEffect, RefObject } from &apos;react&apos;
interface Dimensions {
  width: number
  height: number
}
export const useContainerDimensions = (containerRef: RefObject&lt;HTMLElement | null&gt;): Dimensions =&gt;</file><file path="fe/hooks/useLiveKitVoice.ts">import { useState, useCallback, useRef, useEffect } from &apos;react&apos;
import { Room, RoomEvent, Track, RemoteTrack, RemoteTrackPublication, Participant } from &apos;livekit-client&apos;
import { voiceService } from &apos;@/services/voice.service&apos;
export type LiveKitVoiceState = &apos;idle&apos; | &apos;connecting&apos; | &apos;connected&apos; | &apos;speaking&apos; | &apos;listening&apos; | &apos;error&apos;
interface UseLiveKitVoiceOptions {
  onTranscript?: (text: string, isFinal: boolean) =&gt; void
  onAgentSpeaking?: (isSpeaking: boolean) =&gt; void
  onError?: (error: string) =&gt; void
}
export function useLiveKitVoice(options: UseLiveKitVoiceOptions =</file><file path="fe/hooks/useSpeechRecognition.ts">import { useState, useRef, useCallback, useEffect } from &apos;react&apos;
import { transcribeAudio } from &apos;@/services/voice.service&apos;
interface UseSpeechRecognitionReturn {
  isRecording: boolean
  speechRecognitionSupported: boolean
  speechRecognitionError: string | null
  interimTranscription: string
  startRecording: () =&gt; Promise&lt;void&gt;
  stopRecording: (finalTranscription?: string | null) =&gt; void
  cancelRecording: () =&gt; void
  toggleRecording: () =&gt; void
}
export const useSpeechRecognition = (onFinalTranscription: (text: string) =&gt; void): UseSpeechRecognitionReturn =&gt;
‚ãÆ----
// Update ref when callback changes
‚ãÆ----
// Check if MediaRecorder is supported (client-side only)
‚ãÆ----
// Request microphone access
‚ãÆ----
// Determine supported MIME type</file><file path="fe/hooks/useStreamingChat.ts">import { useState, useCallback, useRef } from &apos;react&apos;
import { streamChatMessage, createStreamAbortController } from &apos;@/services/chatStreamService&apos;
import type { StreamingState } from &apos;@/types/stream&apos;
export interface ImageContent {
  type: &apos;image&apos;
  data: string
  mimeType: &apos;image/png&apos; | &apos;image/jpeg&apos; | &apos;image/webp&apos; | &apos;image/gif&apos;
}
interface UseStreamingChatOptions {
  profileId?: string | null
  onStreamComplete?: (conversationId: string, fullResponse: string) =&gt; void
  onStreamError?: (error: string) =&gt; void
  onTitleGenerated?: (conversationId: string, title: string) =&gt; void
}
interface UseStreamingChatReturn {
  streamingState: StreamingState
  sendStreamingMessage: (message: string, conversationId?: string, images?: ImageContent[]) =&gt; Promise&lt;void&gt;
  cancelStream: () =&gt; void
  resetStreamingState: () =&gt; void
}
‚ãÆ----
export function useStreamingChat(options: UseStreamingChatOptions =</file><file path="fe/lib/api/client.ts">import { ENV, STORAGE_KEYS } from &apos;../constants&apos;
import axios, { type AxiosError, type InternalAxiosRequestConfig } from &apos;axios&apos;
interface RetryableRequestConfig extends InternalAxiosRequestConfig {
  _retry?: boolean
}
interface SessionErrorResponse {
  data?: {
    code?: string
  }
}
‚ãÆ----
const processQueue = (error: AxiosError | null) =&gt;</file><file path="fe/lib/api/endpoints.ts">export type EndpointsType = typeof ENDPOINTS</file><file path="fe/lib/i18n/locales/ar.ts">import type { TranslationShape } from &apos;./en&apos;</file><file path="fe/lib/i18n/locales/de.ts">import type { TranslationShape } from &apos;./en&apos;</file><file path="fe/lib/i18n/locales/en.ts">export type TranslationKeys = typeof en
type DeepTranslationShape&lt;T&gt; = {
  [K in keyof T]: T[K] extends object ? DeepTranslationShape&lt;T[K]&gt; : string
}
export type TranslationShape = DeepTranslationShape&lt;TranslationKeys&gt;</file><file path="fe/lib/i18n/locales/fr.ts">import type { TranslationShape } from &apos;./en&apos;</file><file path="fe/lib/i18n/locales/he.ts">import type { TranslationShape } from &apos;./en&apos;</file><file path="fe/lib/i18n/locales/ru.ts">import type { TranslationShape } from &apos;./en&apos;</file><file path="fe/lib/i18n/config.ts">import i18n from &quot;i18next&quot;;
import { initReactI18next } from &quot;react-i18next&quot;;
import LanguageDetector from &quot;i18next-browser-languagedetector&quot;;
import { en } from &quot;./locales/en&quot;;
import { he } from &quot;./locales/he&quot;;
import { ru } from &quot;./locales/ru&quot;;
import { fr } from &quot;./locales/fr&quot;;
import { de } from &quot;./locales/de&quot;;
import { ar } from &quot;./locales/ar&quot;;
‚ãÆ----
export type SupportedLanguageCode =
  (typeof SUPPORTED_LANGUAGES)[number][&quot;code&quot;];</file><file path="fe/lib/i18n/index.ts"></file><file path="fe/lib/query/config.ts">import { ENV, QUERY_CONFIG } from &apos;@/lib/constants&apos;
import { MutationCache, QueryCache, QueryClient } from &apos;@tanstack/react-query&apos;
import { extractApiError } from &apos;./types&apos;
function handleQueryError(error: unknown)
function handleMutationError(error: unknown)
export function createQueryClient(): QueryClient</file><file path="fe/lib/query/index.ts"></file><file path="fe/lib/query/keys.ts">import type { EventQueryParams, GapQueryParams } from &apos;@/types/api&apos;
‚ãÆ----
export type QueryKeys = typeof queryKeys</file><file path="fe/lib/query/types.ts">import { AxiosError } from &apos;axios&apos;
export interface ApiError {
  status: number
  message: string
  code?: string
  details?: Record&lt;string, unknown&gt;
}
export interface NormalizedQueryState&lt;TData&gt; {
  data: TData | null
  isLoading: boolean
  isFetching: boolean
  isRefetching: boolean
  isError: boolean
  error: ApiError | null
  errorMessage: string | null
  isSuccess: boolean
  status: &apos;idle&apos; | &apos;loading&apos; | &apos;error&apos; | &apos;success&apos;
  refetch: () =&gt; Promise&lt;void&gt;
}
export interface NormalizedMutationState&lt;TData, TVariables&gt; {
  mutate: (variables: TVariables) =&gt; void
  mutateAsync: (variables: TVariables) =&gt; Promise&lt;TData&gt;
  isLoading: boolean
  isPending: boolean
  isError: boolean
  isSuccess: boolean
  isIdle: boolean
  error: ApiError | null
  errorMessage: string | null
  data: TData | null
  reset: () =&gt; void
}
export function extractApiError(error: unknown): ApiError</file><file path="fe/lib/security/sanitize.ts">import DOMPurify from &apos;dompurify&apos;
export function sanitizeHtml(dirty: string | undefined | null): string
‚ãÆ----
// Only run DOMPurify on client side
‚ãÆ----
// Allow safe HTML tags commonly used in event descriptions
‚ãÆ----
export function sanitizeHtmlWithSafeLinks(dirty: string | undefined | null): string
‚ãÆ----
// First sanitize, then fix links
‚ãÆ----
// Add noopener noreferrer to all links
‚ãÆ----
/**
 * Strip all HTML tags, returning plain text.
 * Use this when you don&apos;t want any HTML rendering.
 *
 * @param dirty - The HTML string to strip
 * @returns Plain text with all HTML removed
 */
export function stripHtml(dirty: string | undefined | null): string
‚ãÆ----
export function validateInputLength(
  input: string,
  maxLength: number
):</file><file path="fe/lib/validations/preferences.ts">import { z } from &apos;zod&apos;
‚ãÆ----
export type AllyBrainFormData = z.infer&lt;typeof allyBrainSchema&gt;
export type ContextualSchedulingFormData = z.infer&lt;typeof contextualSchedulingSchema&gt;
‚ãÆ----
export type EventReminder = z.infer&lt;typeof eventReminderSchema&gt;
export type ReminderDefaultsFormData = z.infer&lt;typeof reminderDefaultsSchema&gt;
‚ãÆ----
export type TTSVoice = (typeof TTS_VOICES)[number]
‚ãÆ----
export type VoicePreferenceFormData = z.infer&lt;typeof voicePreferenceSchema&gt;
‚ãÆ----
export type DailyBriefingFormData = z.infer&lt;typeof dailyBriefingSchema&gt;</file><file path="fe/lib/colorUtils.ts">export const getValidHexColor = (color: string | undefined | null, fallback: string = DEFAULT_COLOR): string =&gt;
export const getActivityLevelColor = (level: number): string =&gt;
export type HealthActivity = &apos;Gym&apos; | &apos;Run&apos; | &apos;Swim&apos; | &apos;Rest&apos;
export const getHealthActivityColor = (type: HealthActivity): string =&gt;
export type InsightColor = &apos;amber&apos; | &apos;sky&apos; | &apos;emerald&apos; | &apos;rose&apos; | &apos;indigo&apos; | &apos;orange&apos;
export const getInsightColorClasses = (color: InsightColor):</file><file path="fe/lib/constants.ts">const getApiBaseUrl = (): string =&gt;
‚ãÆ----
get API_BASE_URL()</file><file path="fe/lib/dataUtils.ts">export const sumBy = &lt;T extends Record&lt;string, any&gt;&gt;(data: T[], key: keyof T): number =&gt;
export const calculatePercentage = (value: number, total: number, decimals: number = 0): number =&gt;
export const joinNonEmpty = (values: (string | undefined | null)[], separator: string = &apos; &apos;): string =&gt;
export const calculateAverage = (values: number[]): number =&gt;
export const calculateMax = (values: number[], defaultValue: number = 1): number =&gt;
export const calculateAvailableHoursLeft = (usedHours: number, totalAvailableHours: number = 17): number =&gt;
export const formatNumber = (value: number, decimals?: number): string =&gt;</file><file path="fe/lib/dateUtils.ts">import { differenceInCalendarDays, format, isThisWeek, isToday, isYesterday, subDays } from &apos;date-fns&apos;
export const formatRelativeDate = (dateString: string): string =&gt;
export const getDaysBetween = (from: Date, to: Date): number =&gt;
export const generateDateRange = (days: number = 365): Date[] =&gt;</file><file path="fe/lib/geolocation.ts">import type { SupportedLanguageCode } from &apos;./i18n&apos;
‚ãÆ----
export function getUserTimezone(): string
export function getCountryFromTimezone(timezone: string): string | null
export function getLanguageForCountry(
  countryCode: string,
): SupportedLanguageCode | null
export function getLanguageFromBrowserLang(
  browserLang: string,
): SupportedLanguageCode | null
export function detectUserLanguage(): SupportedLanguageCode | null</file><file path="fe/lib/iconUtils.ts">import {
  Activity,
  Award,
  BarChart3,
  Briefcase,
  Calendar,
  CheckCircle,
  Clock,
  Coffee,
  Compass,
  Flame,
  Heart,
  Layers,
  Moon,
  PieChart,
  Sun,
  Target,
  TrendingDown,
  TrendingUp,
  Users,
  Zap,
  type LucideIcon,
} from &apos;lucide-react&apos;
import type { InsightIconName } from &apos;@/types/analytics&apos;
‚ãÆ----
export function getInsightIcon(name: InsightIconName): LucideIcon</file><file path="fe/lib/user-utils.ts">import type { CustomUser, User } from &apos;@/types/api&apos;
export type UserData = CustomUser | User
export interface UserDisplayInfo {
  firstName: string
  lastName: string
  fullName: string
  initials: string
  email: string
  avatarUrl: string | undefined
  createdAt: string | undefined
}
export function isCustomUser(user: UserData): user is CustomUser
export function getUserDisplayInfo(user: UserData | null | undefined): UserDisplayInfo | null</file><file path="fe/lib/utils.ts">import { clsx, type ClassValue } from &apos;clsx&apos;
import { twMerge } from &apos;tailwind-merge&apos;
export function cn(...inputs: ClassValue[])
export function isRTLText(text: string): boolean
export function getTextDirection(text: string): &apos;rtl&apos; | &apos;ltr&apos;</file><file path="fe/public/ally-3d-create.py">def clear_scene()
def create_materials()
‚ãÆ----
materials = {}
mat_body = bpy.data.materials.new(name=&quot;Ally_Body&quot;)
‚ãÆ----
nodes = mat_body.node_tree.nodes
‚ãÆ----
principled = nodes.new(&quot;ShaderNodeBsdfPrincipled&quot;)
‚ãÆ----
output = nodes.new(&quot;ShaderNodeOutputMaterial&quot;)
‚ãÆ----
mat_eye = bpy.data.materials.new(name=&quot;Ally_Eye&quot;)
‚ãÆ----
nodes = mat_eye.node_tree.nodes
‚ãÆ----
mat_highlight = bpy.data.materials.new(name=&quot;Ally_Highlight&quot;)
‚ãÆ----
nodes = mat_highlight.node_tree.nodes
‚ãÆ----
mat_headphone = bpy.data.materials.new(name=&quot;Ally_Headphone&quot;)
‚ãÆ----
nodes = mat_headphone.node_tree.nodes
‚ãÆ----
mat_mic = bpy.data.materials.new(name=&quot;Ally_Mic&quot;)
‚ãÆ----
nodes = mat_mic.node_tree.nodes
‚ãÆ----
google_colors = [
‚ãÆ----
mat = bpy.data.materials.new(name=f&quot;Ally_Google_{name}&quot;)
‚ãÆ----
nodes = mat.node_tree.nodes
‚ãÆ----
def create_body()
‚ãÆ----
&quot;&quot;&quot;Create the ghost/blob body shape&quot;&quot;&quot;
# Create a UV sphere and sculpt it into blob shape
‚ãÆ----
body = bpy.context.active_object
‚ãÆ----
subsurf = body.modifiers.new(name=&quot;Subdivision&quot;, type=&quot;SUBSURF&quot;)
‚ãÆ----
mesh = body.data
‚ãÆ----
factor = abs(vert.co.z) / 0.5
‚ãÆ----
def create_eye(side=&quot;left&quot;)
‚ãÆ----
x_offset = -0.35 if side == &quot;left&quot; else 0.35
‚ãÆ----
eye = bpy.context.active_object
‚ãÆ----
eye.scale = (0.8, 0.4, 1.0)  # Oval shape
‚ãÆ----
# Eye highlight - small white dot
‚ãÆ----
highlight = bpy.context.active_object
‚ãÆ----
def create_mouth()
‚ãÆ----
&quot;&quot;&quot;Create a simple curved smile&quot;&quot;&quot;
# Create curve for smile
‚ãÆ----
curve = bpy.context.active_object
‚ãÆ----
def create_headphones()
‚ãÆ----
headphone_parts = []
‚ãÆ----
headband = bpy.context.active_object
‚ãÆ----
mesh = headband.data
‚ãÆ----
left_cup = bpy.context.active_object
‚ãÆ----
left_pad = bpy.context.active_object
‚ãÆ----
right_cup = bpy.context.active_object
‚ãÆ----
right_pad = bpy.context.active_object
‚ãÆ----
def create_microphone()
‚ãÆ----
mic_parts = []
‚ãÆ----
boom = bpy.context.active_object
‚ãÆ----
spline = boom.data.splines[0]
‚ãÆ----
mic_head = bpy.context.active_object
‚ãÆ----
def create_google_accent()
‚ãÆ----
feathers = []
colors = [&quot;blue&quot;, &quot;green&quot;, &quot;yellow&quot;, &quot;red&quot;]
base_x = 0.9
base_y = 0.1
base_z = 0.95
‚ãÆ----
feather = bpy.context.active_object
‚ãÆ----
feather.scale = (0.6, 0.6, 2.0)  # Elongate
‚ãÆ----
def apply_materials(materials)
‚ãÆ----
&quot;&quot;&quot;Apply materials to all objects&quot;&quot;&quot;
# Body
body = bpy.data.objects.get(&quot;Ally_Body&quot;)
‚ãÆ----
eye = bpy.data.objects.get(f&quot;Ally_Eye_{side}&quot;)
‚ãÆ----
highlight = bpy.data.objects.get(f&quot;Ally_Highlight_{side}&quot;)
‚ãÆ----
mouth = bpy.data.objects.get(&quot;Ally_Mouth&quot;)
‚ãÆ----
obj = bpy.data.objects.get(name)
‚ãÆ----
feather = bpy.data.objects.get(f&quot;Ally_Feather_{color}&quot;)
‚ãÆ----
def setup_scene()
‚ãÆ----
&quot;&quot;&quot;Setup lighting and camera&quot;&quot;&quot;
# Add soft lighting
‚ãÆ----
key_light = bpy.context.active_object
‚ãÆ----
fill_light = bpy.context.active_object
‚ãÆ----
camera = bpy.context.active_object
‚ãÆ----
world = bpy.data.worlds.get(&quot;World&quot;)
‚ãÆ----
bg_node = world.node_tree.nodes.get(&quot;Background&quot;)
‚ãÆ----
def parent_all_to_empty()
‚ãÆ----
parent = bpy.context.active_object
‚ãÆ----
def export_glb(filepath)
def main()
‚ãÆ----
materials = create_materials()</file><file path="fe/public/ally-animations-setup.py">FRAME_RATE = 30
IDLE_CYCLE_FRAMES = 120
BOBBING_AMPLITUDE = 0.05
BREATHING_SCALE = 0.02
SHAPE_KEYS = {
ACTIONS = {
def get_main_mesh()
def get_or_create_armature()
‚ãÆ----
armature = bpy.context.active_object
‚ãÆ----
bone = armature.data.edit_bones[&quot;Bone&quot;]
‚ãÆ----
body_bone = armature.data.edit_bones.new(&quot;Body&quot;)
‚ãÆ----
head_bone = armature.data.edit_bones.new(&quot;Head&quot;)
‚ãÆ----
def ensure_shape_keys(mesh_obj)
‚ãÆ----
existing_keys = [sk.name for sk in mesh_obj.data.shape_keys.key_blocks]
‚ãÆ----
sk = mesh_obj.shape_key_add(name=key_name, from_mix=False)
‚ãÆ----
def create_idle_animation(armature, mesh_obj)
‚ãÆ----
body_bone = armature.pose.bones.get(&quot;Body&quot;)
‚ãÆ----
progress = frame / IDLE_CYCLE_FRAMES
angle = progress * 2 * math.pi
bob_offset = math.sin(angle) * BOBBING_AMPLITUDE
‚ãÆ----
breath_scale = 1.0 + math.sin(angle * 1.5) * BREATHING_SCALE
‚ãÆ----
sway = math.sin(angle * 0.5) * 0.01
‚ãÆ----
def create_talking_animation(armature, mesh_obj)
‚ãÆ----
shape_keys = mesh_obj.data.shape_keys
‚ãÆ----
mouth_open = shape_keys.key_blocks.get(SHAPE_KEYS[&quot;mouth_open&quot;])
‚ãÆ----
talk_frames = 60
mouth_pattern = [0, 0.6, 0.3, 0.8, 0.2, 0.7, 0.1, 0.5, 0.4, 0.9, 0.2, 0.6]
‚ãÆ----
frame = int(i * (talk_frames / len(mouth_pattern)))
‚ãÆ----
def create_listening_animation(armature, mesh_obj)
‚ãÆ----
head_bone = armature.pose.bones.get(&quot;Head&quot;)
‚ãÆ----
listen_frames = 90
‚ãÆ----
progress = frame / listen_frames
‚ãÆ----
def create_thinking_animation(armature, mesh_obj)
‚ãÆ----
think_frames = 60
‚ãÆ----
progress = frame / think_frames
‚ãÆ----
eyes_wide = shape_keys.key_blocks.get(SHAPE_KEYS[&quot;eyes_wide&quot;])
brow_up = shape_keys.key_blocks.get(SHAPE_KEYS[&quot;brow_up&quot;])
‚ãÆ----
def create_happy_animation(armature, mesh_obj)
‚ãÆ----
happy_frames = 90
mouth_smile = shape_keys.key_blocks.get(SHAPE_KEYS[&quot;mouth_smile&quot;])
eyes_happy = shape_keys.key_blocks.get(SHAPE_KEYS[&quot;eyes_happy&quot;])
‚ãÆ----
progress = frame / happy_frames
‚ãÆ----
def create_sad_animation(armature, mesh_obj)
‚ãÆ----
sad_frames = 120
mouth_sad = shape_keys.key_blocks.get(SHAPE_KEYS[&quot;mouth_sad&quot;])
eyes_sad = shape_keys.key_blocks.get(SHAPE_KEYS[&quot;eyes_sad&quot;])
brow_down = shape_keys.key_blocks.get(SHAPE_KEYS[&quot;brow_down&quot;])
‚ãÆ----
progress = frame / sad_frames
‚ãÆ----
def export_for_web(filepath)
def main()
‚ãÆ----
mesh_obj = get_main_mesh()
‚ãÆ----
armature = get_or_create_armature()
‚ãÆ----
export_path = (</file><file path="fe/services/admin.service.ts">import { apiClient } from &apos;@/lib/api/client&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import type {
  AdminDashboardStats,
  SubscriptionDistribution,
  AdminUserListResponse,
  AdminUserListParams,
  AdminUser,
  AdminSubscriptionListResponse,
  AdminPaymentListResponse,
  AdminAuditLogListResponse,
  UserStatus,
  UserRole,
  RevenueTrendPoint,
  SubscriptionTrendPoint,
} from &apos;@/types/admin&apos;
interface ApiResponse&lt;T&gt; {
  status: &apos;success&apos; | &apos;error&apos;
  message: string
  data?: T
}
export const getDashboardStats = async (): Promise&lt;AdminDashboardStats&gt; =&gt;
export const getSubscriptionDistribution = async (): Promise&lt;SubscriptionDistribution[]&gt; =&gt;
export const getUsers = async (params: AdminUserListParams): Promise&lt;AdminUserListResponse&gt; =&gt;
export const getUserById = async (id: string): Promise&lt;AdminUser&gt; =&gt;
export const updateUserStatus = async (id: string, status: UserStatus, reason?: string): Promise&lt;void&gt; =&gt;
export const updateUserRole = async (id: string, role: UserRole, reason?: string): Promise&lt;void&gt; =&gt;
export const grantCredits = async (id: string, credits: number, reason: string): Promise&lt;void&gt; =&gt;
export const sendPasswordReset = async (id: string): Promise&lt;void&gt; =&gt;
export const getSubscriptions = async (params: {
  page?: number
  limit?: number
  userId?: string
  status?: string
  search?: string
}): Promise&lt;AdminSubscriptionListResponse&gt; =&gt;
export const getPayments = async (params: {
  page?: number
  limit?: number
  userId?: string
  status?: string
  search?: string
}): Promise&lt;AdminPaymentListResponse&gt; =&gt;
export const getAuditLogs = async (params: {
  page?: number
  limit?: number
  adminUserId?: string
  action?: string
  search?: string
}): Promise&lt;AdminAuditLogListResponse&gt; =&gt;
export const getRevenueTrends = async (months: number = 6): Promise&lt;RevenueTrendPoint[]&gt; =&gt;
export const getSubscriptionTrends = async (days: number = 7): Promise&lt;SubscriptionTrendPoint[]&gt; =&gt;
export const getAdminMe = async (): Promise&lt;AdminUser&gt; =&gt;
export const formatCurrency = (cents: number, currency = &apos;USD&apos;): string =&gt;
export const formatNumber = (num: number): string =&gt;</file><file path="fe/services/agent-profiles.service.ts">import type { ApiResponse } from &apos;@/types/api&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
export type AgentTier = &apos;free&apos; | &apos;pro&apos; | &apos;enterprise&apos;
export type AgentCapability =
  | &apos;calendar_read&apos;
  | &apos;calendar_write&apos;
  | &apos;gap_analysis&apos;
  | &apos;smart_scheduling&apos;
  | &apos;multi_calendar&apos;
  | &apos;voice&apos;
  | &apos;realtime&apos;
export type VoiceStyle = &apos;alloy&apos; | &apos;echo&apos; | &apos;fable&apos; | &apos;onyx&apos; | &apos;nova&apos; | &apos;shimmer&apos;
export interface AgentProfile {
  id: string
  displayName: string
  tagline: string
  description: string
  tier: AgentTier
  capabilities: AgentCapability[]
  modelConfig: {
    provider: &apos;openai&apos; | &apos;google&apos; | &apos;anthropic&apos;
    tier: &apos;fast&apos; | &apos;balanced&apos; | &apos;powerful&apos;
    supportsRealtime: boolean
  }
  voice: {
    style: VoiceStyle
    speed: number
  }
  personality: {
    conciseness: number
    casualness: number
    notes: string
  }
  version: &apos;v1&apos;
}
export interface AgentProfilesResponse {
  profiles: AgentProfile[]
  defaultProfileId: string
}
export interface SelectedProfileResponse {
  profileId: string
  profile: AgentProfile
}
export interface GetProfilesParams {
  tier?: AgentTier
  voiceOnly?: boolean
}
‚ãÆ----
async getProfiles(params?: GetProfilesParams): Promise&lt;ApiResponse&lt;AgentProfilesResponse&gt;&gt;
async getProfileById(id: string): Promise&lt;ApiResponse&lt;AgentProfile&gt;&gt;
async getSelectedProfile(): Promise&lt;ApiResponse&lt;SelectedProfileResponse&gt;&gt;
async setSelectedProfile(profileId: string): Promise&lt;ApiResponse&lt;SelectedProfileResponse&gt;&gt;</file><file path="fe/services/auth.service.ts">import { ApiResponse, AuthData, CustomUser, User } from &apos;@/types/api&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
‚ãÆ----
async signIn(email: string, password: string): Promise&lt;ApiResponse&lt;AuthData&gt;&gt;
async signUp(email: string, password: string): Promise&lt;ApiResponse&lt;AuthData&gt;&gt;
async verifyOTP(email: string, token: string): Promise&lt;ApiResponse&lt;AuthData&gt;&gt;
async getUser(customUser = false): Promise&lt;ApiResponse&lt;User | CustomUser&gt;&gt;
async deactivateUser(): Promise&lt;ApiResponse&lt;null&gt;&gt;
getGoogleAuthUrl(): string
getGitHubAuthUrl(): string</file><file path="fe/services/calendars.service.ts">import {
  ApiResponse,
  CalendarListResponse,
  CreateCalendarRequest,
  CreateCalendarResponse,
  CustomCalendar,
} from &apos;@/types/api&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
‚ãÆ----
async getCalendars(custom = true): Promise&lt;ApiResponse&lt;CustomCalendar[]&gt;&gt;
async getCalendarById(id: string): Promise&lt;ApiResponse&lt;CustomCalendar&gt;&gt;
async getSettings(): Promise&lt;ApiResponse&lt;
async getSettingsById(id: string): Promise&lt;ApiResponse&lt;
async getColors(): Promise&lt;ApiResponse&lt;Record&lt;string,
async getTimezones(): Promise&lt;ApiResponse&lt;
async getFreeBusy(): Promise&lt;ApiResponse&lt;Record&lt;string,
async getCalendarList(params?: {
    minAccessRole?: string
    showDeleted?: boolean
    showHidden?: boolean
}): Promise&lt;ApiResponse&lt;CalendarListResponse&gt;&gt;
async createCalendar(request: CreateCalendarRequest): Promise&lt;ApiResponse&lt;CreateCalendarResponse&gt;&gt;</file><file path="fe/services/chatService.ts">import { apiClient } from &apos;@/lib/api/client&apos;
export interface ChatMessageImage {
  data: string
  mimeType: &apos;image/png&apos; | &apos;image/jpeg&apos; | &apos;image/webp&apos; | &apos;image/gif&apos;
}
export interface ChatMessage {
  role: &apos;user&apos; | &apos;assistant&apos;
  content: string
  images?: ChatMessageImage[]
}
export interface ChatResponse {
  content: string
  conversationId?: string
  title?: string
}
export const sendChatMessage = async (message: string, history: ChatMessage[]): Promise&lt;ChatResponse&gt; =&gt;
export interface ConversationListItem {
  id: string
  title: string
  messageCount: number
  lastUpdated: string
  createdAt: string
}
export interface FullConversation {
  id: string
  userId: string
  messages: ChatMessage[]
  summary?: string
  messageCount: number
  lastUpdated: string
  createdAt: string
}
export interface ConversationListResponse {
  conversations: ConversationListItem[]
  status: string
  message: string
  pagination: {
    limit: number
    offset: number
    count: number
  }
}
export const getConversations = async (
  limit: number = 20,
  offset: number = 0,
  search?: string,
): Promise&lt;ConversationListResponse&gt; =&gt;
export const getConversation = async (conversationId: string): Promise&lt;FullConversation | null&gt; =&gt;
export const deleteConversation = async (conversationId: string): Promise&lt;boolean&gt; =&gt;
export const deleteAllConversations = async (): Promise&lt;
export const continueConversation = async (conversationId: string, message: string): Promise&lt;ChatResponse&gt; =&gt;
export const startNewConversation = async (): Promise&lt;boolean&gt; =&gt;
export interface ResetMemoryResult {
  embeddings: number
  conversations: number
  redisContext: boolean
  message: string
}
export const resetMemory = async (): Promise&lt;ResetMemoryResult&gt; =&gt;</file><file path="fe/services/chatStreamService.ts">import { ENV } from &apos;@/lib/constants&apos;
import type {
  SSEEvent,
  SSEEventType,
  TextDeltaData,
  ToolStartData,
  ToolCompleteData,
  AgentSwitchData,
  TitleGeneratedData,
  DoneData,
  ErrorData,
  StreamCallbacks,
} from &apos;@/types/stream&apos;
function getAuthHeaders(): HeadersInit
function parseSSELine(line: string): SSEEvent | null
export interface ImageContent {
  type: &apos;image&apos;
  data: string
  mimeType: &apos;image/png&apos; | &apos;image/jpeg&apos; | &apos;image/webp&apos; | &apos;image/gif&apos;
}
export interface StreamChatOptions {
  message: string
  conversationId?: string
  profileId?: string
  images?: ImageContent[]
  callbacks: StreamCallbacks
  signal?: AbortSignal
}
export interface StreamResult {
  success: boolean
  conversationId?: string
  fullResponse?: string
  error?: string
}
export async function streamChatMessage(options: StreamChatOptions): Promise&lt;StreamResult&gt;
export function createStreamAbortController(): AbortController</file><file path="fe/services/events.service.ts">import { apiClient } from &apos;@/lib/api/client&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import type {
  ApiResponse,
  CalendarEvent,
  EventQueryParams,
  EventAnalytics,
  CreateEventRequest,
  UpdateEventRequest,
  QuickAddEventRequest,
  QuickAddResponse,
  MoveEventRequest,
  WatchEventsRequest,
} from &apos;@/types/api&apos;
export type QuickAddResult =
  | { success: true; data: QuickAddResponse }
  | { success: false; requiresConfirmation: true; data: QuickAddResponse; error: string }
  | { success: false; requiresConfirmation: false; error: string }
‚ãÆ----
async getEvents(params?: EventQueryParams): Promise&lt;ApiResponse&lt;CalendarEvent[]&gt;&gt;
async getEventById(id: string, calendarId?: string): Promise&lt;ApiResponse&lt;CalendarEvent&gt;&gt;
async createEvent(eventData: CreateEventRequest): Promise&lt;ApiResponse&lt;CalendarEvent&gt;&gt;
async updateEvent(id: string, eventData: UpdateEventRequest): Promise&lt;ApiResponse&lt;CalendarEvent&gt;&gt;
async deleteEvent(id: string): Promise&lt;ApiResponse&lt;null&gt;&gt;
async getAnalytics(params?: EventQueryParams): Promise&lt;ApiResponse&lt;EventAnalytics&gt;&gt;
async quickAdd(requestData: QuickAddEventRequest): Promise&lt;QuickAddResult&gt;
async moveEvent(requestData: MoveEventRequest): Promise&lt;ApiResponse&lt;CalendarEvent&gt;&gt;
async watchEvents(requestData: WatchEventsRequest): Promise&lt;ApiResponse&lt;CalendarEvent&gt;&gt;
async getRescheduleSuggestions(
    eventId: string,
    params?: {
      calendarId?: string
      preferredTimeOfDay?: &apos;morning&apos; | &apos;afternoon&apos; | &apos;evening&apos; | &apos;any&apos;
      daysToSearch?: number
      excludeWeekends?: boolean
    },
): Promise&lt;ApiResponse&lt;RescheduleSuggestionsResponse&gt;&gt;
async rescheduleEvent(
    eventId: string,
    requestData: RescheduleEventRequest,
): Promise&lt;ApiResponse&lt;CalendarEvent&gt;&gt;
‚ãÆ----
export interface RescheduleSuggestion {
  start: string
  end: string
  startFormatted: string
  endFormatted: string
  dayOfWeek: string
  score: number
  reason: string
}
export interface RescheduleSuggestionsResponse {
  success: boolean
  event?: {
    id: string
    summary: string
    start: string
    end: string
    duration: number
  }
  suggestions: RescheduleSuggestion[]
  error?: string
}
export interface RescheduleEventRequest {
  newStart: string
  newEnd: string
  calendarId?: string
}</file><file path="fe/services/gaps.service.ts">import { apiClient } from &apos;@/lib/api/client&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import type {
  ApiResponse,
  GapsResponse,
  GapQueryParams,
  FillGapRequest,
  FillGapResponse,
  SkipGapRequest,
  SkipGapResponse,
  DismissAllGapsResponse,
} from &apos;@/types/api&apos;
‚ãÆ----
async getGaps(params?: GapQueryParams): Promise&lt;ApiResponse&lt;GapsResponse&gt;&gt;
async getFormattedGaps(): Promise&lt;ApiResponse&lt;string&gt;&gt;
async fillGap(gapId: string, requestData: FillGapRequest): Promise&lt;ApiResponse&lt;FillGapResponse&gt;&gt;
async skipGap(gapId: string, requestData?: SkipGapRequest): Promise&lt;ApiResponse&lt;SkipGapResponse&gt;&gt;
async dismissAllGaps(): Promise&lt;ApiResponse&lt;DismissAllGapsResponse&gt;&gt;
async disableGapAnalysis(): Promise&lt;ApiResponse&lt;</file><file path="fe/services/geminiService.ts">import { GoogleGenAI, Modality } from &apos;@google/genai&apos;
export const sendMessageToGemini = async (message: string, history:
export const getSpeechFromGemini = async (text: string, voiceName: &apos;Kore&apos; | &apos;Zephyr&apos; | &apos;Puck&apos; = &apos;Zephyr&apos;) =&gt;
function decode(base64: string)
export async function decodeAudioData(
  base64: string,
  ctx: AudioContext,
  sampleRate: number = 24000,
  numChannels: number = 1,
): Promise&lt;AudioBuffer&gt;</file><file path="fe/services/integrations.service.ts">import { ApiResponse, GoogleCalendarIntegrationStatus, SlackIntegrationStatus } from &apos;@/types/api&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
‚ãÆ----
async getGoogleCalendarStatus(): Promise&lt;ApiResponse&lt;GoogleCalendarIntegrationStatus&gt;&gt;
async disconnectGoogleCalendar(): Promise&lt;ApiResponse&lt;
async getSlackStatus(): Promise&lt;ApiResponse&lt;SlackIntegrationStatus&gt;&gt;</file><file path="fe/services/payment.service.ts">import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
export type PlanSlug = &apos;starter&apos; | &apos;pro&apos; | &apos;executive&apos;
export type PlanInterval = &apos;monthly&apos; | &apos;yearly&apos;
export type SubscriptionStatus =
  | &apos;trialing&apos;
  | &apos;active&apos;
  | &apos;past_due&apos;
  | &apos;canceled&apos;
  | &apos;unpaid&apos;
  | &apos;incomplete&apos;
  | &apos;incomplete_expired&apos;
  | &apos;paused&apos;
export interface Plan {
  id: string
  name: string
  slug: PlanSlug
  description: string
  pricing: {
    monthly: number
    yearly: number
    perUse: number
  }
  limits: {
    aiInteractionsMonthly: number | null
    actionPackSize: number | null
  }
  features: string[]
  isPopular: boolean
  isHighlighted: boolean
}
export interface PaymentStatus {
  enabled: boolean
  provider: &apos;lemonsqueezy&apos;
  trialDays: number
  moneyBackDays: number
}
export interface SubscriptionInfo {
  id: string
  status: SubscriptionStatus
  interval: PlanInterval
  trialEnd: string | null
  currentPeriodEnd: string | null
  cancelAtPeriodEnd: boolean
  moneyBackEligibleUntil: string | null
  isLinkedToProvider: boolean
}
export interface UserAccess {
  has_access: boolean
  subscription_status: SubscriptionStatus | null
  plan_name: string | null
  plan_slug: string | null
  interactions_remaining: number | null
  credits_remaining: number
  trial_days_left: number | null
  money_back_eligible: boolean
  subscription: SubscriptionInfo | null
}
export interface CheckoutParams {
  planSlug: PlanSlug
  interval: PlanInterval
  successUrl?: string
  cancelUrl?: string
}
export interface CreditPackCheckoutParams {
  credits: number
  planSlug: PlanSlug
  successUrl?: string
  cancelUrl?: string
}
interface ApiResponse&lt;T&gt; {
  status: &apos;success&apos; | &apos;error&apos;
  message: string
  data?: T
}
export const getPaymentStatus = async (): Promise&lt;PaymentStatus&gt; =&gt;
export const getPlans = async (): Promise&lt;Plan[]&gt; =&gt;
export const getSubscriptionStatus = async (): Promise&lt;UserAccess&gt; =&gt;
export const initializeFreePlan = async (): Promise&lt;void&gt; =&gt;
export const createSubscriptionCheckout = async (params: CheckoutParams): Promise&lt;string&gt; =&gt;
export const createCreditPackCheckout = async (params: CreditPackCheckoutParams): Promise&lt;string&gt; =&gt;
export const createBillingPortalSession = async (returnUrl?: string): Promise&lt;string&gt; =&gt;
export const cancelSubscription = async (reason?: string, immediate = false): Promise&lt;void&gt; =&gt;
export const requestRefund = async (reason?: string): Promise&lt;
export interface UpgradeParams {
  planSlug: PlanSlug
  interval: PlanInterval
}
export interface UpgradeResult {
  subscription: {
    id: string
    status: SubscriptionStatus
    interval: PlanInterval
    planId: string
  }
  prorated: boolean
}
export const upgradeSubscription = async (params: UpgradeParams): Promise&lt;UpgradeResult&gt; =&gt;
export type TransactionStatus = &apos;succeeded&apos; | &apos;pending&apos; | &apos;failed&apos;
export type CardBrand = &apos;visa&apos; | &apos;mastercard&apos; | &apos;amex&apos; | &apos;discover&apos; | &apos;unknown&apos;
export interface PaymentMethod {
  id: string
  brand: CardBrand
  last4: string
  expiryMonth: number
  expiryYear: number
  isDefault: boolean
}
export interface Transaction {
  id: string
  date: string
  description: string
  amount: number
  currency: string
  status: TransactionStatus
  invoiceUrl: string | null
}
export interface BillingOverview {
  paymentMethod: PaymentMethod | null
  transactions: Transaction[]
}
export const getBillingOverview = async (): Promise&lt;BillingOverview&gt; =&gt;
export const redirectToCheckout = async (params: CheckoutParams): Promise&lt;void&gt; =&gt;
export const redirectToCreditPackCheckout = async (params: CreditPackCheckoutParams): Promise&lt;void&gt; =&gt;
export const redirectToBillingPortal = async (returnUrl?: string): Promise&lt;void&gt; =&gt;
export const formatPrice = (cents: number, currency = &apos;USD&apos;): string =&gt;
export const calculateTrialDaysLeft = (trialEnd: string | null): number | null =&gt;
export const isMoneyBackEligible = (moneyBackUntil: string | null): boolean =&gt;</file><file path="fe/services/preferences.service.ts">import type { ApiResponse } from &apos;@/types/api&apos;
import type {
  AllyBrainFormData,
  ContextualSchedulingFormData,
  ReminderDefaultsFormData,
  VoicePreferenceFormData,
  DailyBriefingFormData,
} from &apos;@/lib/validations/preferences&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import { apiClient } from &apos;@/lib/api/client&apos;
export interface PreferenceResponse&lt;T&gt; {
  key: string
  value: T
  updatedAt?: string
  isDefault: boolean
}
export interface AllPreferencesResponse {
  preferences: {
    ally_brain: PreferenceResponse&lt;AllyBrainFormData&gt;
    contextual_scheduling: PreferenceResponse&lt;ContextualSchedulingFormData&gt;
    reminder_defaults: PreferenceResponse&lt;ReminderDefaultsFormData&gt;
  }
}
‚ãÆ----
async getAllPreferences(): Promise&lt;ApiResponse&lt;AllPreferencesResponse&gt;&gt;
async getAllyBrain(): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;AllyBrainFormData&gt;&gt;&gt;
async updateAllyBrain(value: AllyBrainFormData): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;AllyBrainFormData&gt;&gt;&gt;
async getContextualScheduling(): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;ContextualSchedulingFormData&gt;&gt;&gt;
async updateContextualScheduling(
    value: ContextualSchedulingFormData,
): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;ContextualSchedulingFormData&gt;&gt;&gt;
async getReminderDefaults(): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;ReminderDefaultsFormData&gt;&gt;&gt;
async updateReminderDefaults(
    value: ReminderDefaultsFormData,
): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;ReminderDefaultsFormData&gt;&gt;&gt;
async getVoicePreference(): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;VoicePreferenceFormData&gt;&gt;&gt;
async updateVoicePreference(
    value: VoicePreferenceFormData,
): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;VoicePreferenceFormData&gt;&gt;&gt;
async getDailyBriefing(): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;DailyBriefingFormData&gt;&gt;&gt;
async updateDailyBriefing(
    value: DailyBriefingFormData,
): Promise&lt;ApiResponse&lt;PreferenceResponse&lt;DailyBriefingFormData&gt;&gt;&gt;</file><file path="fe/services/tts-cache.service.ts">import type { TTSVoice } from &apos;@/lib/validations/preferences&apos;
import { voiceService } from &apos;./voice.service&apos;
interface CacheEntry {
  audioBuffer: ArrayBuffer
  timestamp: number
}
‚ãÆ----
class TTSCacheService
‚ãÆ----
private getCacheKey(text: string, voice: TTSVoice): string
private evictOldEntries(): void
async synthesize(text: string, voice: TTSVoice = &apos;alloy&apos;): Promise&lt;ArrayBuffer&gt;
clear(): void
get size(): number</file><file path="fe/services/voice.service.ts">import { apiClient } from &apos;@/lib/api/client&apos;
import { ENDPOINTS } from &apos;@/lib/api/endpoints&apos;
import type { ApiResponse } from &apos;@/types/api&apos;
import type { TTSVoice } from &apos;@/lib/validations/preferences&apos;
export interface TranscriptionResult {
  success: boolean
  text?: string
  error?: string
}
export type TranscriptionResponse = {
  text: string
}
export type AgentProfile = {
  id: string
  displayName: string
  tagline: string
  description: string
  tier: &apos;free&apos; | &apos;pro&apos; | &apos;enterprise&apos;
  supportsVoice: boolean
  supportsRealtime: boolean
}
export type AgentProfilesResponse = {
  profiles: AgentProfile[]
  defaultProfileId: string
}
export type LiveKitTokenResponse = {
  token: string
  roomName: string
  wsUrl: string
  profile: AgentProfile
}
export const transcribeAudio = async (audioBlob: Blob): Promise&lt;TranscriptionResult&gt; =&gt;
‚ãÆ----
async transcribe(audioBlob: Blob): Promise&lt;ApiResponse&lt;TranscriptionResponse&gt;&gt;
async synthesize(text: string, voice?: TTSVoice): Promise&lt;ArrayBuffer&gt;
async getLiveKitToken(profileId?: string): Promise&lt;ApiResponse&lt;LiveKitTokenResponse&gt;&gt;
async getAgentProfiles(options?: {
    tier?: &apos;free&apos; | &apos;pro&apos; | &apos;enterprise&apos;
    voiceOnly?: boolean
}): Promise&lt;ApiResponse&lt;AgentProfilesResponse&gt;&gt;</file><file path="fe/styles/globals.css">@tailwind base;
@tailwind components;
@tailwind utilities;
:root {
.dark,
body {
.noise {
.grid-background {
.dark .grid-background {
‚ãÆ----
.wave-bar {
‚ãÆ----
.animate-fade-in {
‚ãÆ----
.animate-float {
‚ãÆ----
.animate-pulse {
.animate-ping {
::-webkit-scrollbar {
::-webkit-scrollbar-track {
::-webkit-scrollbar-thumb {
.dark ::-webkit-scrollbar-thumb {
.bg-gradient-radial {
@layer base {
‚ãÆ----
* {
‚ãÆ----
@apply border-border;</file><file path="fe/tests/components/shared/ErrorBoundary.test.tsx">import { describe, expect, it, beforeEach, mock, afterEach } from &quot;bun:test&quot;;
‚ãÆ----
constructor(props: P)
setState(newState: Partial&lt;S&gt;)
render()
‚ãÆ----
const getDerivedStateFromError = (error: Error) =&gt; (
‚ãÆ----
const handleReset = () =&gt;
‚ãÆ----
const mockReload = () =&gt;</file><file path="fe/tests/hooks/queries/conversations/useConversations.test.ts">import { describe, expect, it, beforeEach, mock } from &quot;bun:test&quot;;
‚ãÆ----
import { useConversations } from &quot;@/hooks/queries/conversations/useConversations&quot;;</file><file path="fe/tests/lib/api/services/auth.service.test.ts">import { describe, expect, it, beforeEach, mock } from &quot;bun:test&quot;;
‚ãÆ----
import { authService } from &quot;@/services/auth.service&quot;;</file><file path="fe/tests/lib/api/client.test.ts">import { describe, expect, it, beforeEach, afterEach, mock, spyOn } from &quot;bun:test&quot;;</file><file path="fe/tests/lib/dateUtils.test.ts">import { describe, expect, it, beforeEach, afterEach, mock } from &quot;bun:test&quot;;
import { formatRelativeDate, getDaysBetween, generateDateRange } from &quot;../../lib/dateUtils&quot;;</file><file path="fe/tests/lib/utils.test.ts">import { describe, expect, it } from &quot;bun:test&quot;;
import { cn } from &quot;../../lib/utils&quot;;</file><file path="fe/tests/mocks/axios.ts">import { mock } from &quot;bun:test&quot;;</file><file path="fe/tests/mocks/react-query.ts">import { mock } from &quot;bun:test&quot;;
export const createMockQueryResult = &lt;T&gt;(data: T | undefined = undefined) =&gt; (
export const createMockMutationResult = &lt;T, TVariables = unknown&gt;() =&gt; (
‚ãÆ----
export const mockErrorQuery = (error: Error) =&gt; (</file><file path="fe/tests/setup.ts">import { afterEach, mock } from &quot;bun:test&quot;;
‚ãÆ----
observe()
unobserve()
disconnect()</file><file path="fe/tests/test-utils.tsx">import React, { type ReactElement, type ReactNode } from &quot;react&quot;;
import { render, type RenderOptions } from &quot;@testing-library/react&quot;;
import { QueryClient, QueryClientProvider } from &quot;@tanstack/react-query&quot;;
const createTestQueryClient = ()
interface AllProvidersProps {
  children: ReactNode;
}
const AllProviders = (
const customRender = (
  ui: ReactElement,
  options?: Omit&lt;RenderOptions, &quot;wrapper&quot;&gt;
) =&gt; render(ui,
‚ãÆ----
export const mockApiResponse = &lt;T,&gt;(data: T, status = 200) =&gt; (
export const mockApiError = (message: string, status = 400) =&gt;
export const waitForAsync = ()</file><file path="fe/types/admin.ts">export type UserRole = &apos;user&apos; | &apos;admin&apos; | &apos;moderator&apos; | &apos;support&apos;
export type UserStatus = &apos;active&apos; | &apos;inactive&apos; | &apos;suspended&apos; | &apos;pending_verification&apos;
export interface AdminUser {
  id: string
  email: string
  first_name: string | null
  last_name: string | null
  display_name: string | null
  avatar_url: string | null
  status: UserStatus
  role: UserRole
  timezone: string | null
  locale: string | null
  email_verified: boolean | null
  created_at: string
  updated_at: string
  last_login_at: string | null
  subscription?: AdminUserSubscription | null
  oauth_connected?: boolean
}
export interface AdminUserSubscription {
  id: string
  plan_name: string
  plan_slug: string
  status: string
  interval: string
  current_period_end: string | null
  ai_interactions_used: number
  credits_remaining: number
}
export interface AdminDashboardStats {
  totalUsers: number
  activeUsers: number
  newUsersToday: number
  newUsersWeek: number
  newUsersMonth: number
  activeSubscriptions: number
  totalRevenueCents: number
  mrrCents: number
}
export interface SubscriptionDistribution {
  planSlug: string
  planName: string
  subscriberCount: number
  percentage: number
}
export interface AdminUserListResponse {
  users: AdminUser[]
  total: number
  page: number
  totalPages: number
}
export interface AdminUserListParams {
  page?: number
  limit?: number
  search?: string
  status?: UserStatus
  role?: UserRole
  sortBy?: &apos;created_at&apos; | &apos;email&apos; | &apos;last_login_at&apos;
  sortOrder?: &apos;asc&apos; | &apos;desc&apos;
}
export type SubscriptionStatus = &apos;active&apos; | &apos;trialing&apos; | &apos;cancelled&apos; | &apos;expired&apos; | &apos;paused&apos;
export interface AdminSubscription {
  id: string
  userId: string
  userEmail: string
  planId: string
  planName: string
  planSlug: string
  status: SubscriptionStatus
  interval: string
  currentPeriodStart: string | null
  currentPeriodEnd: string | null
  cancelledAt: string | null
  aiInteractionsUsed: number
  creditsRemaining: number
  createdAt: string
  updatedAt: string
}
export interface AdminSubscriptionListResponse {
  subscriptions: AdminSubscription[]
  total: number
  page: number
  totalPages: number
}
export type PaymentStatus = &apos;succeeded&apos; | &apos;pending&apos; | &apos;failed&apos; | &apos;refunded&apos;
export interface AdminPayment {
  id: string
  userId: string
  userEmail: string
  amountCents: number
  currency: string
  status: PaymentStatus
  description: string | null
  lsOrderId: string | null
  receiptUrl: string | null
  createdAt: string
}
export interface AdminPaymentListResponse {
  payments: AdminPayment[]
  total: number
  page: number
  totalPages: number
}
export interface AdminAuditLog {
  id: string
  action: string
  adminUserId: string
  adminEmail: string | null
  targetUserId: string | null
  details: Record&lt;string, unknown&gt; | null
  ipAddress: string | null
  userAgent: string | null
  createdAt: string
}
export interface AdminAuditLogListResponse {
  logs: AdminAuditLog[]
  total: number
  page: number
  totalPages: number
}
export interface UpdateUserStatusRequest {
  status: UserStatus
  reason?: string
}
export interface UpdateUserRoleRequest {
  role: UserRole
  reason?: string
}
export interface GrantCreditsRequest {
  credits: number
  reason: string
}
export interface RevenueTrendPoint {
  month: string
  revenue: number
  subscriptions: number
}
export interface SubscriptionTrendPoint {
  date: string
  newSubscriptions: number
  cancelledSubscriptions: number
  totalActive: number
}</file><file path="fe/types/analytics.ts">import type { CalendarEvent, CalendarListEntry } from &apos;./api&apos;
import type React from &apos;react&apos;
import { z } from &apos;zod&apos;
‚ãÆ----
export type AnalyticsEventData = z.infer&lt;typeof CalendarEventSchema&gt;
export type CalendarEventsGroup = z.infer&lt;typeof CalendarEventsGroupSchema&gt;
export type AnalyticsResponse = z.infer&lt;typeof AnalyticsResponseSchema&gt;
export interface CalendarBreakdownItem {
  category: string
  hours: number
  color: string
  calendarId?: string
}
export interface ProcessedActivity {
  action: string
  time: string
  icon: React.ComponentType&lt;{ size?: number; style?: React.CSSProperties }&gt;
  timestamp: number
  calendarName: string
  calendarId: string
  calendarColor: string
  event: CalendarEvent
}
export interface ProcessedAnalyticsData {
  totalEvents: number
  totalDurationHours: number
  averageEventDuration: number
  busiestDayHours: number
  calendarBreakdown: CalendarBreakdownItem[]
  recentActivities: ProcessedActivity[]
  dailyAvailableHours: DailyAvailableHoursDataPoint[]
}
export interface PeriodMetrics {
  totalEvents: number
  totalDurationHours: number
  averageEventDuration: number
  busiestDayHours: number
}
export interface TrendData {
  value: number
  previousValue: number
  percentageChange: number
  direction: &apos;up&apos; | &apos;down&apos; | &apos;neutral&apos;
}
export interface ComparisonResult {
  current: PeriodMetrics
  previous: PeriodMetrics
  trends: {
    totalEvents: TrendData
    totalDuration: TrendData
    avgEventDuration: TrendData
    busiestDay: TrendData
  }
}
export interface TimeAllocationChartProps {
  data: CalendarBreakdownItem[]
  onCalendarClick?: (calendarId: string, calendarName: string, calendarColor: string) =&gt; void
  isLoading?: boolean
}
export type InsightColor = &apos;amber&apos; | &apos;sky&apos; | &apos;emerald&apos; | &apos;rose&apos; | &apos;indigo&apos; | &apos;orange&apos;
export interface InsightCardProps {
  icon: React.ComponentType&lt;{ className?: string }&gt;
  title: string
  value: string
  description: string
  color: InsightColor
}
export interface WeeklyInsight {
  icon: React.ComponentType&lt;{ className?: string }&gt;
  title: string
  value: string
  description: string
  color: InsightColor
}
export interface StatsCardProps {
  label: string
  value: number
  previousValue?: number
  suffix?: string
  icon: React.ComponentType&lt;{ className?: string }&gt;
  iconColor: string
  iconBg: string
  showTrend?: boolean
  trendDirection?: &apos;up&apos; | &apos;down&apos; | &apos;neutral&apos;
  trendPercentage?: number
  sparklineData?: number[]
  isLoading?: boolean
}
export interface KPICardsSectionProps {
  totalEvents: number
  totalDurationHours: number
  averageEventDuration: number
  busiestDayHours: number
  comparison?: ComparisonResult | null
  isLoading?: boolean
}
export interface CalendarInfo {
  id: string
  name: string
  color: string
}
export interface EventDetailsDialogProps {
  isOpen: boolean
  event: CalendarEvent | null
  calendarColor: string
  calendarName: string
  onClose: () =&gt; void
}
export interface CalendarEventsDialogProps {
  isOpen: boolean
  calendarId: string
  calendarName: string
  calendarColor: string
  dateRange: { from: Date; to: Date } | undefined
  events: CalendarEvent[]
  isLoading: boolean
  totalHours?: number
  previousPeriodHours?: number
  percentageChange?: number
  onClose: () =&gt; void
  onEventClick: (event: CalendarEvent) =&gt; void
}
export interface CalendarSettingsDialogProps {
  isOpen: boolean
  calendar: CalendarListEntry | null
  onClose: () =&gt; void
}
export interface CreateCalendarDialogProps {
  isOpen: boolean
  existingCalendars: CalendarListEntry[]
  onClose: () =&gt; void
  onSuccess?: () =&gt; void
}
export interface CalendarMap {
  [calendarId: string]: {
    name: string
    color: string
  }
}
export interface DailyAvailableHoursDataPoint {
  day: number
  date: string
  hours: number
}
export interface PatternEventSummary {
  id: string
  summary: string
  startTime: string
  endTime: string
  eventDate: string
  durationMinutes: number
  calendarName: string
  calendarColor: string
  htmlLink?: string
}
export interface WeeklyPatternDataPoint {
  day: string
  dayShort: string
  dayIndex: number
  hours: number
  eventCount: number
  events: PatternEventSummary[]
}
export interface MonthlyPatternDataPoint {
  dayOfMonth: number
  hours: number
  eventCount: number
  events: PatternEventSummary[]
}
export interface EventDurationCategory {
  key: &apos;short&apos; | &apos;medium&apos; | &apos;long&apos; | &apos;extended&apos;
  label: string
  range: string
  color: string
  count: number
  percentage: number
  events: PatternEventSummary[]
}
export interface TimeOfDayDistribution {
  morning: number
  afternoon: number
  evening: number
  night: number
}
export interface EventDurationBreakdown {
  short: number
  medium: number
  long: number
  extended: number
}
export interface FocusTimeMetrics {
  totalFocusBlocks: number
  averageFocusBlockLength: number
  longestFocusBlock: number
  focusTimePercentage: number
}
export interface ProductivityMetrics {
  productivityScore: number
  meetingLoad: number
  averageEventsPerDay: number
  mostProductiveDay: string
  leastProductiveDay: string
  peakHour: number
}
export interface EnhancedAnalyticsData {
  totalEvents: number
  totalDurationHours: number
  averageEventDuration: number
  busiestDayHours: number
  calendarBreakdown: CalendarBreakdownItem[]
  recentActivities: ProcessedActivity[]
  dailyAvailableHours: DailyAvailableHoursDataPoint[]
  weeklyPattern: WeeklyPatternDataPoint[]
  monthlyPattern: MonthlyPatternDataPoint[]
  timeOfDayDistribution: TimeOfDayDistribution
  eventDurationBreakdown: EventDurationBreakdown
  eventDurationCategories: EventDurationCategory[]
  focusTimeMetrics: FocusTimeMetrics
  productivityMetrics: ProductivityMetrics
  totalDays: number
  daysWithEvents: number
  eventFreeDays: number
  longestEvent: number
  shortestEvent: number
  recurringEventsCount: number
  allDayEventsCount: number
}
export interface BentoStatItem {
  id: string
  label: string
  value: number | string
  suffix?: string
  icon: React.ComponentType&lt;{ className?: string }&gt;
  iconColor: string
  iconBg: string
  description?: string
  trend?: {
    direction: &apos;up&apos; | &apos;down&apos; | &apos;neutral&apos;
    percentage: number
  }
  size: &apos;small&apos; | &apos;medium&apos; | &apos;large&apos;
  sparklineData?: number[]
}
export interface BentoStatsGridProps {
  stats: BentoStatItem[]
  isLoading?: boolean
}
export interface WeeklyPatternChartProps {
  data: WeeklyPatternDataPoint[]
  isLoading?: boolean
}
export interface MonthlyPatternChartProps {
  data: MonthlyPatternDataPoint[]
  isLoading?: boolean
}
export interface TimeDistributionChartProps {
  data: TimeOfDayDistribution
  isLoading?: boolean
}
export interface EventDurationChartProps {
  data: EventDurationBreakdown
  totalEvents: number
  isLoading?: boolean
}
‚ãÆ----
export type InsightIconName = (typeof INSIGHT_ICON_NAMES)[number]
export interface AIInsight {
  id: string
  icon: InsightIconName
  title: string
  value: string
  description: string
  color: InsightColor
}
export interface AIInsightsResponse {
  insights: AIInsight[]
  generatedAt: string
  periodStart: string
  periodEnd: string
}</file><file path="fe/types/api.ts">export interface ApiResponse&lt;T&gt; {
  status: &quot;success&quot; | &quot;error&quot;;
  message: string;
  data: T | null;
}
export interface UserMetadata {
  first_name?: string;
  last_name?: string;
  avatar_url?: string;
}
export interface User {
  id: string;
  email: string;
  user_metadata: UserMetadata;
  aud: string;
  confirmed_at: string;
  created_at: string;
  updated_at: string;
}
export interface CustomUser {
  id: string;
  email: string;
  phone?: string | null;
  first_name?: string | null;
  last_name?: string | null;
  avatar_url?: string | null;
  role?: &apos;user&apos; | &apos;admin&apos; | &apos;moderator&apos; | &apos;support&apos;;
  created_at: string;
  updated_at: string;
}
export interface Session {
  access_token: string;
  refresh_token: string;
  expires_in: number;
  token_type: string;
}
export interface AuthData {
  user: User;
  session: Session;
}
export interface CustomCalendar {
  calendarId: string;
  calendarName: string | null;
  calendarDescription: string | null;
  calendarLocation: string | null;
  calendarColorForEvents: string | null;
  accessRole: string | null;
  timeZoneForCalendar: string | null;
  dataOwner?: string | null;
  defaultReminders?: EventReminder[];
}
export interface EventReminder {
  method: &quot;email&quot; | &quot;popup&quot;;
  minutes: number;
}
export interface EventDateTime {
  date?: string;
  dateTime?: string;
  timeZone?: string;
}
export interface Attendee {
  id?: string;
  email: string;
  displayName?: string;
  organizer?: boolean;
  self?: boolean;
  responseStatus: &quot;needsAction&quot; | &quot;declined&quot; | &quot;tentative&quot; | &quot;accepted&quot;;
  optional?: boolean;
}
export interface CalendarEvent {
  kind: &quot;calendar#event&quot;;
  id: string;
  etag: string;
  status: &quot;confirmed&quot; | &quot;tentative&quot; | &quot;cancelled&quot;;
  htmlLink: string;
  summary: string;
  description?: string;
  location?: string;
  colorId?: string;
  creator: { email: string };
  organizer: { email: string };
  start: EventDateTime;
  end: EventDateTime;
  attendees?: Attendee[];
  reminders: { useDefault: boolean; overrides?: EventReminder[] };
  created: string;
  updated: string;
  recurringEventId?: string;
  recurrence?: string[];
}
export interface CustomEvent {
  eventId: string;
  summary: string;
  description: string | null;
  location: string | null;
  durationOfEvent: string | null;
  start: string | null;
  end: string | null;
}
export interface EventQueryParams {
  calendarId?: string;
  timeMin?: string;
  timeMax?: string;
  maxResults?: number;
  orderBy?: string;
  singleEvents?: boolean;
}
export interface EventAnalytics {
  allEvents: CalendarEvent[][];
}
export type QuickAddEventRequest = {
  text: string;
  forceCreate?: boolean;
}
export type ParsedEventData = {
  summary: string;
  date?: string;
  time?: string;
  duration?: string;
  location?: string;
  description?: string;
}
export type QuickAddConflict = {
  id: string;
  summary: string;
  start: string;
  end: string;
  calendarName: string;
}
export type QuickAddResponse = {
  event?: CalendarEvent;
  parsed?: ParsedEventData;
  calendarId?: string;
  calendarName?: string;
  eventUrl?: string;
  conflicts?: QuickAddConflict[];
}
export interface MoveEventRequest {
  eventId: string;
  destination: string;
  calendarId?: string;
}
export interface WatchEventsRequest {
  id: string;
  type: string;
  address: string;
  calendarId?: string;
}
export interface CreateEventRequest {
  summary: string;
  description?: string;
  location?: string;
  start: EventDateTime;
  end: EventDateTime;
  attendees?: Attendee[];
  reminders?: { useDefault: boolean; overrides?: EventReminder[] };
  calendarId?: string;
  email?: string;
  addMeetLink?: boolean;
}
export interface UpdateEventRequest {
  summary?: string;
  description?: string;
  location?: string;
  start?: EventDateTime;
  end?: EventDateTime;
  attendees?: Attendee[];
  reminders?: { useDefault: boolean; overrides?: EventReminder[] };
}
export interface CreateCalendarRequest {
  summary: string;
  description?: string;
  location?: string;
  timeZone?: string;
}
export interface CreateCalendarResponse {
  kind: &quot;calendar#calendar&quot;;
  etag: string;
  id: string;
  summary: string;
  description?: string;
  location?: string;
  timeZone?: string;
}
export interface CalendarColors {
  [key: string]: {
    background: string;
    foreground: string;
  };
}
export interface TimezoneInfo {
  value: string;
}
export interface FreeBusyResponse {
  [calendarId: string]: {
    busy: Array&lt;{
      start: string;
      end: string;
    }&gt;;
  };
}
export interface CalendarListResponse {
  kind: &quot;calendar#calendarList&quot;;
  etag: string;
  nextSyncToken?: string;
  items: CalendarListEntry[];
}
export interface CalendarListEntry {
  kind: &quot;calendar#calendarListEntry&quot;;
  etag: string;
  id: string;
  summary: string;
  description?: string;
  timeZone?: string;
  colorId?: string;
  backgroundColor?: string;
  foregroundColor?: string;
  selected?: boolean;
  accessRole?: string;
  defaultReminders?: EventReminder[];
  primary?: boolean;
}
export interface GoogleCalendarIntegrationStatus {
  isSynced: boolean;
  isActive: boolean;
  isExpired: boolean;
  syncedAt: string | null;
  authUrl: string;
}
export interface SlackIntegrationStatus {
  isConnected: boolean;
  slackUserId: string | null;
  slackTeamId: string | null;
  slackUsername: string | null;
  connectedAt: string | null;
  installUrl: string;
}
export type DayOfWeek =
  | &quot;sunday&quot;
  | &quot;monday&quot;
  | &quot;tuesday&quot;
  | &quot;wednesday&quot;
  | &quot;thursday&quot;
  | &quot;friday&quot;
  | &quot;saturday&quot;;
export type SupportedEventLanguage = &quot;en&quot; | &quot;de&quot; | &quot;fr&quot; | &quot;he&quot; | &quot;ar&quot; | &quot;ru&quot;;
export interface GapRecoverySettings {
  autoGapAnalysis: boolean;
  minGapThreshold: number;
  maxGapThreshold: number;
  ignoredDays: DayOfWeek[];
  lookbackDays: number;
  minConfidenceThreshold: number;
  includedCalendars: string[];
  excludedCalendars: string[];
  eventLanguages: SupportedEventLanguage[];
  languageSetupComplete: boolean;
}
export interface GapCandidate {
  id: string;
  start: string;
  end: string;
  durationMinutes: number;
  durationFormatted: string;
  precedingEventSummary: string;
  precedingEventLink: string | null;
  followingEventSummary: string;
  followingEventLink: string | null;
  suggestion: string | null;
  confidence: number;
}
export interface GapsResponse {
  gaps: GapCandidate[];
  totalCount: number;
  analyzedRange: {
    start: string;
    end: string;
  };
  settings: GapRecoverySettings;
}
export interface GapQueryParams {
  startDate?: string;
  endDate?: string;
  calendarId?: string;
  lookbackDays?: number;
  limit?: number;
}
export interface FillGapRequest {
  summary: string;
  description?: string;
  location?: string;
  calendarId?: string;
}
export interface FillGapResponse {
  eventId: string;
  message: string;
}
export interface SkipGapRequest {
  reason?: string;
}
export interface SkipGapResponse {
  gapId: string;
  reason: string;
}
export interface DismissAllGapsResponse {
  count: number;
  message: string;
}</file><file path="fe/types/billing.ts"></file><file path="fe/types/stream.ts">export type SSEEventType =
  | &apos;text_delta&apos;
  | &apos;tool_start&apos;
  | &apos;tool_complete&apos;
  | &apos;agent_switch&apos;
  | &apos;title_generated&apos;
  | &apos;done&apos;
  | &apos;error&apos;
  | &apos;heartbeat&apos;
export interface SSEEvent&lt;T = unknown&gt; {
  type: SSEEventType
  data: T
  timestamp: string
}
export interface TextDeltaData {
  delta: string
  fullText?: string
}
export interface ToolStartData {
  tool: string
  agent: string
  args?: Record&lt;string, unknown&gt;
}
export interface ToolCompleteData {
  tool: string
  result: &apos;success&apos; | &apos;error&apos;
  output?: string
}
export interface AgentSwitchData {
  from: string
  to: string
}
export interface DoneData {
  conversationId: string
  fullResponse: string
  usage?: {
    totalTokens?: number
    inputTokens?: number
    outputTokens?: number
  }
}
export interface ErrorData {
  message: string
  code: string
}
export interface TitleGeneratedData {
  conversationId: string
  title: string
}
export interface StreamingState {
  isStreaming: boolean
  streamedText: string
  currentTool: string | null
  currentAgent: string | null
  error: string | null
}
export interface StreamCallbacks {
  onTextDelta?: (delta: string, fullText: string) =&gt; void
  onToolStart?: (tool: string, agent: string) =&gt; void
  onToolComplete?: (tool: string, result: &apos;success&apos; | &apos;error&apos;) =&gt; void
  onAgentSwitch?: (from: string, to: string) =&gt; void
  onTitleGenerated?: (conversationId: string, title: string) =&gt; void
  onDone?: (conversationId: string, fullResponse: string) =&gt; void
  onError?: (message: string, code: string) =&gt; void
}</file><file path="fe/.dockerignore"># Dependencies
node_modules
.pnpm-store

# Build outputs (we rebuild in Docker)
.next
out
dist

# Development files
.env
.env.*
!.env.example

# IDE and editor files
.idea
.vscode
*.swp
*.swo

# Git
.git
.gitignore

# Testing
coverage
.nyc_output
*.test.ts
*.test.tsx
*.spec.ts
*.spec.tsx
__tests__

# Documentation
*.md
!README.md

# OS files
.DS_Store
Thumbs.db

# Logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# TypeScript build info
*.tsbuildinfo

# Misc
.eslintcache
.prettierignore</file><file path="fe/.gitignore"># Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
.next

dev-debug.log
# Dependency directories
node_modules/
# Environment variables
.env
.vscode
# OS specific

# Task files
# tasks.json
# tasks/ 
.mvp.json
tsconfig.tsbuildinfo</file><file path="fe/.mcp.json">{
  &quot;mcpServers&quot;: {
    &quot;task-master-ai&quot;: {
      &quot;type&quot;: &quot;stdio&quot;,
      &quot;command&quot;: &quot;npx&quot;,
      &quot;args&quot;: [&quot;-y&quot;, &quot;task-master-ai&quot;],
      &quot;env&quot;: {
        &quot;TASK_MASTER_TOOLS&quot;: &quot;core&quot;,
        &quot;ANTHROPIC_API_KEY&quot;: &quot;YOUR_ANTHROPIC_API_KEY_HERE&quot;,
        &quot;PERPLEXITY_API_KEY&quot;: &quot;YOUR_PERPLEXITY_API_KEY_HERE&quot;,
        &quot;OPENAI_API_KEY&quot;: &quot;YOUR_OPENAI_KEY_HERE&quot;,
        &quot;GOOGLE_API_KEY&quot;: &quot;YOUR_GOOGLE_KEY_HERE&quot;,
        &quot;XAI_API_KEY&quot;: &quot;YOUR_XAI_KEY_HERE&quot;,
        &quot;OPENROUTER_API_KEY&quot;: &quot;YOUR_OPENROUTER_KEY_HERE&quot;,
        &quot;MISTRAL_API_KEY&quot;: &quot;YOUR_MISTRAL_KEY_HERE&quot;,
        &quot;AZURE_OPENAI_API_KEY&quot;: &quot;YOUR_AZURE_KEY_HERE&quot;,
        &quot;OLLAMA_API_KEY&quot;: &quot;YOUR_OLLAMA_API_KEY_HERE&quot;
      }
    }
  }
}</file><file path="fe/.prettierignore">node_modules
dist
build
.next
.env*</file><file path="fe/.prettierrc">{
  &quot;singleQuote&quot;: true,
  &quot;semi&quot;: false,
  &quot;tabWidth&quot;: 2,
  &quot;printWidth&quot;: 120,
  &quot;arrowParens&quot;: &quot;always&quot;,
  &quot;bracketSpacing&quot;: true,
  &quot;bracketSameLine&quot;: false,
  &quot;jsxBracketSameLine&quot;: false,
  &quot;jsxSingleQuote&quot;: false,
  &quot;quoteProps&quot;: &quot;as-needed&quot;
}</file><file path="fe/app-runner.yaml">version: 1.0
runtime: nodejs22
build:
  commands:
    - corepack enable
    - pnpm install --frozen-lockfile
    - pnpm build
    - cp -r public .next/standalone/public
    - cp -r .next/static .next/standalone/.next/static
run:
  command: node .next/standalone/server.js
  network:
    port: 3000
  env:
    - name: NODE_ENV
      value: &quot;production&quot;
    - name: PORT
      value: &quot;3000&quot;
    - name: HOSTNAME
      value: &quot;0.0.0.0&quot;
  health_check:
    protocol: TCP
    port: 3000
    interval: 10
    timeout: 5
    healthy_threshold: 1
    unhealthy_threshold: 3</file><file path="fe/bunfig.toml">[test]
preload = [&quot;./tests/setup.ts&quot;]
coverage = true
coverageReporter = [&quot;text&quot;, &quot;lcov&quot;]</file><file path="fe/components.json">{
  &quot;$schema&quot;: &quot;https://ui.shadcn.com/schema.json&quot;,
  &quot;style&quot;: &quot;new-york&quot;,
  &quot;rsc&quot;: true,
  &quot;tsx&quot;: true,
  &quot;tailwind&quot;: {
    &quot;config&quot;: &quot;tailwind.config.ts&quot;,
    &quot;css&quot;: &quot;styles/globals.css&quot;,
    &quot;baseColor&quot;: &quot;zinc&quot;,
    &quot;cssVariables&quot;: true,
    &quot;prefix&quot;: &quot;&quot;
  },
  &quot;iconLibrary&quot;: &quot;lucide&quot;,
  &quot;aliases&quot;: {
    &quot;components&quot;: &quot;@/components&quot;,
    &quot;utils&quot;: &quot;@/lib/utils&quot;,
    &quot;ui&quot;: &quot;@/components/ui&quot;,
    &quot;lib&quot;: &quot;@/lib&quot;,
    &quot;hooks&quot;: &quot;@/hooks&quot;
  },
  &quot;registries&quot;: {}
}</file><file path="fe/database.types.ts">export type Json =
  | string
  | number
  | boolean
  | null
  | { [key: string]: Json | undefined }
  | Json[]
export type Database = {
  __InternalSupabase: {
    PostgrestVersion: &quot;13.0.4&quot;
  }
  public: {
    Tables: {
      conversation_messages: {
        Row: {
          completion_tokens: number | null
          content: string
          conversation_id: string
          created_at: string
          id: string
          metadata: Json | null
          prompt_tokens: number | null
          role: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;]
          sequence_number: number
          tool_call_id: string | null
          tool_calls: Json | null
        }
        Insert: {
          completion_tokens?: number | null
          content: string
          conversation_id: string
          created_at?: string
          id?: string
          metadata?: Json | null
          prompt_tokens?: number | null
          role: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;]
          sequence_number: number
          tool_call_id?: string | null
          tool_calls?: Json | null
        }
        Update: {
          completion_tokens?: number | null
          content?: string
          conversation_id?: string
          created_at?: string
          id?: string
          metadata?: Json | null
          prompt_tokens?: number | null
          role?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;message_role&quot;]
          sequence_number?: number
          tool_call_id?: string | null
          tool_calls?: Json | null
        }
        Relationships: [
          {
            foreignKeyName: &quot;conversation_messages_conversation_id_fkey&quot;
            columns: [&quot;conversation_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;conversations&quot;
            referencedColumns: [&quot;id&quot;]
          },
        ]
      }
      conversations: {
        Row: {
          archived_at: string | null
          created_at: string
          external_chat_id: number | null
          id: string
          is_active: boolean | null
          last_message_at: string | null
          message_count: number | null
          source: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
          summary: string | null
          title: string | null
          updated_at: string
          user_id: string
        }
        Insert: {
          archived_at?: string | null
          created_at?: string
          external_chat_id?: number | null
          id?: string
          is_active?: boolean | null
          last_message_at?: string | null
          message_count?: number | null
          source: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
          summary?: string | null
          title?: string | null
          updated_at?: string
          user_id: string
        }
        Update: {
          archived_at?: string | null
          created_at?: string
          external_chat_id?: number | null
          id?: string
          is_active?: boolean | null
          last_message_at?: string | null
          message_count?: number | null
          source?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
          summary?: string | null
          title?: string | null
          updated_at?: string
          user_id?: string
        }
        Relationships: []
      }
      lemonsqueezy_webhook_events: {
        Row: {
          created_at: string | null
          error_message: string | null
          event_id: string
          event_type: string
          id: string
          payload: Json
          processed: boolean | null
          processed_at: string | null
          retry_count: number | null
        }
        Insert: {
          created_at?: string | null
          error_message?: string | null
          event_id: string
          event_type: string
          id?: string
          payload: Json
          processed?: boolean | null
          processed_at?: string | null
          retry_count?: number | null
        }
        Update: {
          created_at?: string | null
          error_message?: string | null
          event_id?: string
          event_type?: string
          id?: string
          payload?: Json
          processed?: boolean | null
          processed_at?: string | null
          retry_count?: number | null
        }
        Relationships: []
      }
      oauth_tokens: {
        Row: {
          access_token: string
          created_at: string
          expires_at: string | null
          id: string
          id_token: string | null
          is_valid: boolean | null
          last_refreshed_at: string | null
          provider: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;oauth_provider&quot;]
          provider_user_id: string | null
          refresh_error_count: number | null
          refresh_token: string | null
          refresh_token_expires_at: string | null
          scope: string | null
          token_type: string | null
          updated_at: string
          user_id: string
        }
        Insert: {
          access_token: string
          created_at?: string
          expires_at?: string | null
          id?: string
          id_token?: string | null
          is_valid?: boolean | null
          last_refreshed_at?: string | null
          provider: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;oauth_provider&quot;]
          provider_user_id?: string | null
          refresh_error_count?: number | null
          refresh_token?: string | null
          refresh_token_expires_at?: string | null
          scope?: string | null
          token_type?: string | null
          updated_at?: string
          user_id: string
        }
        Update: {
          access_token?: string
          created_at?: string
          expires_at?: string | null
          id?: string
          id_token?: string | null
          is_valid?: boolean | null
          last_refreshed_at?: string | null
          provider?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;oauth_provider&quot;]
          provider_user_id?: string | null
          refresh_error_count?: number | null
          refresh_token?: string | null
          refresh_token_expires_at?: string | null
          scope?: string | null
          token_type?: string | null
          updated_at?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: &quot;oauth_tokens_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;oauth_tokens_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;oauth_tokens_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;oauth_tokens_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      plans: {
        Row: {
          action_pack_size: number | null
          ai_interactions_monthly: number | null
          created_at: string | null
          description: string | null
          display_order: number | null
          features: Json | null
          id: string
          is_active: boolean | null
          is_highlighted: boolean | null
          is_popular: boolean | null
          lemonsqueezy_product_id: string | null
          lemonsqueezy_variant_id_monthly: string | null
          lemonsqueezy_variant_id_yearly: string | null
          name: string
          price_monthly_cents: number | null
          price_per_use_cents: number | null
          price_yearly_cents: number | null
          slug: string
          stripe_price_id_monthly: string | null
          stripe_price_id_yearly: string | null
          stripe_product_id: string | null
          updated_at: string | null
        }
        Insert: {
          action_pack_size?: number | null
          ai_interactions_monthly?: number | null
          created_at?: string | null
          description?: string | null
          display_order?: number | null
          features?: Json | null
          id?: string
          is_active?: boolean | null
          is_highlighted?: boolean | null
          is_popular?: boolean | null
          lemonsqueezy_product_id?: string | null
          lemonsqueezy_variant_id_monthly?: string | null
          lemonsqueezy_variant_id_yearly?: string | null
          name: string
          price_monthly_cents?: number | null
          price_per_use_cents?: number | null
          price_yearly_cents?: number | null
          slug: string
          stripe_price_id_monthly?: string | null
          stripe_price_id_yearly?: string | null
          stripe_product_id?: string | null
          updated_at?: string | null
        }
        Update: {
          action_pack_size?: number | null
          ai_interactions_monthly?: number | null
          created_at?: string | null
          description?: string | null
          display_order?: number | null
          features?: Json | null
          id?: string
          is_active?: boolean | null
          is_highlighted?: boolean | null
          is_popular?: boolean | null
          lemonsqueezy_product_id?: string | null
          lemonsqueezy_variant_id_monthly?: string | null
          lemonsqueezy_variant_id_yearly?: string | null
          name?: string
          price_monthly_cents?: number | null
          price_per_use_cents?: number | null
          price_yearly_cents?: number | null
          slug?: string
          stripe_price_id_monthly?: string | null
          stripe_price_id_yearly?: string | null
          stripe_product_id?: string | null
          updated_at?: string | null
        }
        Relationships: []
      }
      slack_users: {
        Row: {
          created_at: string | null
          first_name: string | null
          id: string
          is_linked: boolean | null
          last_activity_at: string | null
          pending_email: string | null
          slack_team_id: string
          slack_user_id: string
          slack_username: string | null
          updated_at: string | null
          user_id: string | null
        }
        Insert: {
          created_at?: string | null
          first_name?: string | null
          id?: string
          is_linked?: boolean | null
          last_activity_at?: string | null
          pending_email?: string | null
          slack_team_id: string
          slack_user_id: string
          slack_username?: string | null
          updated_at?: string | null
          user_id?: string | null
        }
        Update: {
          created_at?: string | null
          first_name?: string | null
          id?: string
          is_linked?: boolean | null
          last_activity_at?: string | null
          pending_email?: string | null
          slack_team_id?: string
          slack_user_id?: string
          slack_username?: string | null
          updated_at?: string | null
          user_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: &quot;slack_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;slack_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;slack_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;slack_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      subscriptions: {
        Row: {
          ai_interactions_used: number | null
          cancel_at_period_end: boolean | null
          canceled_at: string | null
          cancellation_reason: string | null
          created_at: string | null
          credits_remaining: number | null
          current_period_end: string | null
          current_period_start: string | null
          first_payment_at: string | null
          id: string
          interval: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;] | null
          lemonsqueezy_customer_id: string | null
          lemonsqueezy_subscription_id: string | null
          lemonsqueezy_variant_id: string | null
          metadata: Json | null
          money_back_eligible_until: string | null
          plan_id: string
          status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;] | null
          stripe_customer_id: string | null
          stripe_price_id: string | null
          stripe_subscription_id: string | null
          trial_end: string | null
          trial_start: string | null
          updated_at: string | null
          user_id: string
        }
        Insert: {
          ai_interactions_used?: number | null
          cancel_at_period_end?: boolean | null
          canceled_at?: string | null
          cancellation_reason?: string | null
          created_at?: string | null
          credits_remaining?: number | null
          current_period_end?: string | null
          current_period_start?: string | null
          first_payment_at?: string | null
          id?: string
          interval?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;] | null
          lemonsqueezy_customer_id?: string | null
          lemonsqueezy_subscription_id?: string | null
          lemonsqueezy_variant_id?: string | null
          metadata?: Json | null
          money_back_eligible_until?: string | null
          plan_id: string
          status?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;] | null
          stripe_customer_id?: string | null
          stripe_price_id?: string | null
          stripe_subscription_id?: string | null
          trial_end?: string | null
          trial_start?: string | null
          updated_at?: string | null
          user_id: string
        }
        Update: {
          ai_interactions_used?: number | null
          cancel_at_period_end?: boolean | null
          canceled_at?: string | null
          cancellation_reason?: string | null
          created_at?: string | null
          credits_remaining?: number | null
          current_period_end?: string | null
          current_period_start?: string | null
          first_payment_at?: string | null
          id?: string
          interval?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;] | null
          lemonsqueezy_customer_id?: string | null
          lemonsqueezy_subscription_id?: string | null
          lemonsqueezy_variant_id?: string | null
          metadata?: Json | null
          money_back_eligible_until?: string | null
          plan_id?: string
          status?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;] | null
          stripe_customer_id?: string | null
          stripe_price_id?: string | null
          stripe_subscription_id?: string | null
          trial_end?: string | null
          trial_start?: string | null
          updated_at?: string | null
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: &quot;subscriptions_plan_id_fkey&quot;
            columns: [&quot;plan_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;plans&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      telegram_users: {
        Row: {
          created_at: string
          first_name: string | null
          id: string
          is_bot: boolean | null
          is_linked: boolean | null
          language_code: string | null
          last_activity_at: string | null
          pending_email: string | null
          telegram_chat_id: number | null
          telegram_user_id: number
          telegram_username: string | null
          updated_at: string
          user_id: string | null
        }
        Insert: {
          created_at?: string
          first_name?: string | null
          id?: string
          is_bot?: boolean | null
          is_linked?: boolean | null
          language_code?: string | null
          last_activity_at?: string | null
          pending_email?: string | null
          telegram_chat_id?: number | null
          telegram_user_id: number
          telegram_username?: string | null
          updated_at?: string
          user_id?: string | null
        }
        Update: {
          created_at?: string
          first_name?: string | null
          id?: string
          is_bot?: boolean | null
          is_linked?: boolean | null
          language_code?: string | null
          last_activity_at?: string | null
          pending_email?: string | null
          telegram_chat_id?: number | null
          telegram_user_id?: number
          telegram_username?: string | null
          updated_at?: string
          user_id?: string | null
        }
        Relationships: [
          {
            foreignKeyName: &quot;telegram_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;telegram_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;telegram_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;telegram_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      user_calendars: {
        Row: {
          access_role:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;calendar_access_role&quot;]
            | null
          background_color: string | null
          calendar_id: string
          calendar_name: string | null
          created_at: string
          default_reminders: Json | null
          foreground_color: string | null
          id: string
          is_primary: boolean | null
          is_visible: boolean | null
          last_synced_at: string | null
          notification_enabled: boolean | null
          sync_token: string | null
          timezone: string | null
          updated_at: string
          user_id: string
        }
        Insert: {
          access_role?:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;calendar_access_role&quot;]
            | null
          background_color?: string | null
          calendar_id: string
          calendar_name?: string | null
          created_at?: string
          default_reminders?: Json | null
          foreground_color?: string | null
          id?: string
          is_primary?: boolean | null
          is_visible?: boolean | null
          last_synced_at?: string | null
          notification_enabled?: boolean | null
          sync_token?: string | null
          timezone?: string | null
          updated_at?: string
          user_id: string
        }
        Update: {
          access_role?:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;calendar_access_role&quot;]
            | null
          background_color?: string | null
          calendar_id?: string
          calendar_name?: string | null
          created_at?: string
          default_reminders?: Json | null
          foreground_color?: string | null
          id?: string
          is_primary?: boolean | null
          is_visible?: boolean | null
          last_synced_at?: string | null
          notification_enabled?: boolean | null
          sync_token?: string | null
          timezone?: string | null
          updated_at?: string
          user_id?: string
        }
        Relationships: [
          {
            foreignKeyName: &quot;user_calendars_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;user_calendars_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;user_calendars_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;user_calendars_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      users: {
        Row: {
          avatar_url: string | null
          created_at: string
          deactivated_at: string | null
          display_name: string | null
          email: string
          email_verified: boolean | null
          first_name: string | null
          id: string
          last_login_at: string | null
          last_name: string | null
          locale: string | null
          preferences: Json | null
          role: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_role&quot;]
          status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_status&quot;] | null
          timezone: string | null
          updated_at: string
        }
        Insert: {
          avatar_url?: string | null
          created_at?: string
          deactivated_at?: string | null
          display_name?: string | null
          email: string
          email_verified?: boolean | null
          first_name?: string | null
          id?: string
          last_login_at?: string | null
          last_name?: string | null
          locale?: string | null
          preferences?: Json | null
          role?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_role&quot;]
          status?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_status&quot;] | null
          timezone?: string | null
          updated_at?: string
        }
        Update: {
          avatar_url?: string | null
          created_at?: string
          deactivated_at?: string | null
          display_name?: string | null
          email?: string
          email_verified?: boolean | null
          first_name?: string | null
          id?: string
          last_login_at?: string | null
          last_name?: string | null
          locale?: string | null
          preferences?: Json | null
          role?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_role&quot;]
          status?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_status&quot;] | null
          timezone?: string | null
          updated_at?: string
        }
        Relationships: []
      }
      whatsapp_users: {
        Row: {
          created_at: string | null
          first_message_at: string | null
          id: string
          is_linked: boolean | null
          language_code: string | null
          last_activity_at: string | null
          message_count: number | null
          onboarding_step: string | null
          pending_email: string | null
          updated_at: string | null
          user_id: string | null
          whatsapp_name: string | null
          whatsapp_phone: string
        }
        Insert: {
          created_at?: string | null
          first_message_at?: string | null
          id?: string
          is_linked?: boolean | null
          language_code?: string | null
          last_activity_at?: string | null
          message_count?: number | null
          onboarding_step?: string | null
          pending_email?: string | null
          updated_at?: string | null
          user_id?: string | null
          whatsapp_name?: string | null
          whatsapp_phone: string
        }
        Update: {
          created_at?: string | null
          first_message_at?: string | null
          id?: string
          is_linked?: boolean | null
          language_code?: string | null
          last_activity_at?: string | null
          message_count?: number | null
          onboarding_step?: string | null
          pending_email?: string | null
          updated_at?: string | null
          user_id?: string | null
          whatsapp_name?: string | null
          whatsapp_phone?: string
        }
        Relationships: [
          {
            foreignKeyName: &quot;whatsapp_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;whatsapp_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;whatsapp_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;whatsapp_users_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
    }
    Views: {
      v_active_subscriptions: {
        Row: {
          ai_interactions_limit: number | null
          ai_interactions_remaining: number | null
          ai_interactions_used: number | null
          cancel_at_period_end: boolean | null
          canceled_at: string | null
          current_period_end: string | null
          current_period_start: string | null
          display_name: string | null
          email: string | null
          first_payment_at: string | null
          interval: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;] | null
          money_back_eligible_until: string | null
          plan_name: string | null
          plan_slug: string | null
          status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;] | null
          stripe_customer_id: string | null
          stripe_subscription_id: string | null
          subscription_created_at: string | null
          subscription_id: string | null
          trial_end: string | null
          trial_start: string | null
          user_id: string | null
        }
        Relationships: [
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;users&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_active_users_with_calendar&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_admin_user_list&quot;
            referencedColumns: [&quot;id&quot;]
          },
          {
            foreignKeyName: &quot;subscriptions_user_id_fkey&quot;
            columns: [&quot;user_id&quot;]
            isOneToOne: false
            referencedRelation: &quot;v_user_conversation_stats&quot;
            referencedColumns: [&quot;user_id&quot;]
          },
        ]
      }
      v_active_users_with_calendar: {
        Row: {
          display_name: string | null
          email: string | null
          primary_calendar_id: string | null
          primary_calendar_name: string | null
          timezone: string | null
          token_expires_at: string | null
          token_valid: boolean | null
          user_id: string | null
        }
        Relationships: []
      }
      v_admin_user_list: {
        Row: {
          ai_interactions_used: number | null
          avatar_url: string | null
          created_at: string | null
          credits_remaining: number | null
          current_period_end: string | null
          display_name: string | null
          email: string | null
          email_verified: boolean | null
          first_name: string | null
          has_oauth_connected: boolean | null
          id: string | null
          last_name: string | null
          locale: string | null
          plan_name: string | null
          plan_slug: string | null
          role: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_role&quot;] | null
          status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;user_status&quot;] | null
          subscription_id: string | null
          subscription_interval:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;plan_interval&quot;]
            | null
          subscription_status:
            | Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;]
            | null
          timezone: string | null
          updated_at: string | null
        }
        Relationships: []
      }
      v_subscription_distribution: {
        Row: {
          percentage: number | null
          plan_name: string | null
          plan_slug: string | null
          subscriber_count: number | null
        }
        Relationships: []
      }
      v_user_conversation_stats: {
        Row: {
          email: string | null
          last_conversation_at: string | null
          telegram_conversations: number | null
          total_conversations: number | null
          total_messages: number | null
          user_id: string | null
          web_conversations: number | null
        }
        Relationships: []
      }
    }
    Functions: {
      check_trial_expirations: { Args: never; Returns: number }
      check_user_access: {
        Args: { p_user_id: string }
        Returns: {
          credits_remaining: number
          has_access: boolean
          interactions_remaining: number
          money_back_eligible: boolean
          plan_name: string
          subscription_status: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;subscription_status&quot;]
          trial_days_left: number
        }[]
      }
      cleanup_expired_sessions: { Args: never; Returns: number }
      cleanup_expired_sessions_v2: { Args: never; Returns: number }
      cleanup_old_pending_gaps:
        | { Args: never; Returns: number }
        | { Args: { days_old?: number }; Returns: number }
      cleanup_old_pending_gaps_v2: {
        Args: { days_old?: number }
        Returns: number
      }
      get_or_create_conversation:
        | {
            Args: {
              p_external_chat_id?: number
              p_source: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
              p_user_id: string
            }
            Returns: string
          }
        | {
            Args: {
              p_source?: Database[&quot;public&quot;][&quot;Enums&quot;][&quot;conversation_source&quot;]
              p_telegram_chat_id?: number
              p_user_id: string
            }
            Returns: string
          }
      match_conversation_embeddings: {
        Args: {
          match_count?: number
          match_threshold?: number
          match_user_id?: number
          query_embedding: string
        }
        Returns: {
          content: string
          id: string
          metadata: Json
          similarity: number
        }[]
      }
      match_conversation_embeddings_v2: {
        Args: {
          match_count?: number
          match_threshold?: number
          match_user_id: string
          query_embedding: string
        }
        Returns: {
          content: string
          id: string
          metadata: Json
          similarity: number
        }[]
      }
      match_conversation_embeddings_web:
        | {
            Args: {
              match_count?: number
              p_user_id?: string
              query_embedding: string
            }
            Returns: {
              content: string
              id: string
              similarity: number
            }[]
          }
        | {
            Args: {
              match_count?: number
              match_threshold?: number
              match_user_email: string
              query_embedding: string
            }
            Returns: {
              content: string
              id: number
              metadata: Json
              similarity: number
            }[]
          }
      match_event_embeddings: {
        Args: {
          match_count?: number
          match_threshold?: number
          match_user_id: string
          query_embedding: string
        }
        Returns: {
          content: string
          id: number
          metadata: Json
          similarity: number
        }[]
      }
      reset_subscription_usage: {
        Args: { p_subscription_id: string }
        Returns: undefined
      }
      show_limit: { Args: never; Returns: number }
      show_trgm: { Args: { &quot;&quot;: string }; Returns: string[] }
    }
    Enums: {
      calendar_access_role: &quot;owner&quot; | &quot;writer&quot; | &quot;reader&quot; | &quot;freeBusyReader&quot;
      conversation_source: &quot;web&quot; | &quot;telegram&quot; | &quot;whatsapp&quot; | &quot;api&quot;
      gap_resolution_status:
        | &quot;pending&quot;
        | &quot;filled&quot;
        | &quot;skipped&quot;
        | &quot;dismissed&quot;
        | &quot;expired&quot;
      message_role: &quot;user&quot; | &quot;assistant&quot; | &quot;system&quot; | &quot;tool&quot;
      oauth_provider: &quot;google&quot; | &quot;github&quot; | &quot;telegram&quot; | &quot;whatsapp&quot;
      payment_status:
        | &quot;pending&quot;
        | &quot;succeeded&quot;
        | &quot;failed&quot;
        | &quot;refunded&quot;
        | &quot;partially_refunded&quot;
        | &quot;disputed&quot;
      plan_interval: &quot;monthly&quot; | &quot;yearly&quot; | &quot;one_time&quot;
      subscription_status:
        | &quot;trialing&quot;
        | &quot;active&quot;
        | &quot;past_due&quot;
        | &quot;canceled&quot;
        | &quot;unpaid&quot;
        | &quot;incomplete&quot;
        | &quot;incomplete_expired&quot;
        | &quot;paused&quot;
      user_role: &quot;user&quot; | &quot;admin&quot; | &quot;moderator&quot; | &quot;support&quot;
      user_status: &quot;active&quot; | &quot;inactive&quot; | &quot;suspended&quot; | &quot;pending_verification&quot;
    }
    CompositeTypes: {
      [_ in never]: never
    }
  }
}
type DatabaseWithoutInternals = Omit&lt;Database, &quot;__InternalSupabase&quot;&gt;
type DefaultSchema = DatabaseWithoutInternals[Extract&lt;keyof Database, &quot;public&quot;&gt;]
export type Tables&lt;
  DefaultSchemaTableNameOrOptions extends
    | keyof (DefaultSchema[&quot;Tables&quot;] &amp; DefaultSchema[&quot;Views&quot;])
    | { schema: keyof DatabaseWithoutInternals },
  TableName extends DefaultSchemaTableNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof (DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;] &amp;
        DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Views&quot;])
    : never = never,
&gt; = DefaultSchemaTableNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? (DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;] &amp;
      DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Views&quot;])[TableName] extends {
      Row: infer R
    }
    ? R
    : never
  : DefaultSchemaTableNameOrOptions extends keyof (DefaultSchema[&quot;Tables&quot;] &amp;
        DefaultSchema[&quot;Views&quot;])
    ? (DefaultSchema[&quot;Tables&quot;] &amp;
        DefaultSchema[&quot;Views&quot;])[DefaultSchemaTableNameOrOptions] extends {
        Row: infer R
      }
      ? R
      : never
    : never
export type TablesInsert&lt;
  DefaultSchemaTableNameOrOptions extends
    | keyof DefaultSchema[&quot;Tables&quot;]
    | { schema: keyof DatabaseWithoutInternals },
  TableName extends DefaultSchemaTableNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;]
    : never = never,
&gt; = DefaultSchemaTableNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;][TableName] extends {
      Insert: infer I
    }
    ? I
    : never
  : DefaultSchemaTableNameOrOptions extends keyof DefaultSchema[&quot;Tables&quot;]
    ? DefaultSchema[&quot;Tables&quot;][DefaultSchemaTableNameOrOptions] extends {
        Insert: infer I
      }
      ? I
      : never
    : never
export type TablesUpdate&lt;
  DefaultSchemaTableNameOrOptions extends
    | keyof DefaultSchema[&quot;Tables&quot;]
    | { schema: keyof DatabaseWithoutInternals },
  TableName extends DefaultSchemaTableNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;]
    : never = never,
&gt; = DefaultSchemaTableNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[DefaultSchemaTableNameOrOptions[&quot;schema&quot;]][&quot;Tables&quot;][TableName] extends {
      Update: infer U
    }
    ? U
    : never
  : DefaultSchemaTableNameOrOptions extends keyof DefaultSchema[&quot;Tables&quot;]
    ? DefaultSchema[&quot;Tables&quot;][DefaultSchemaTableNameOrOptions] extends {
        Update: infer U
      }
      ? U
      : never
    : never
export type Enums&lt;
  DefaultSchemaEnumNameOrOptions extends
    | keyof DefaultSchema[&quot;Enums&quot;]
    | { schema: keyof DatabaseWithoutInternals },
  EnumName extends DefaultSchemaEnumNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[DefaultSchemaEnumNameOrOptions[&quot;schema&quot;]][&quot;Enums&quot;]
    : never = never,
&gt; = DefaultSchemaEnumNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[DefaultSchemaEnumNameOrOptions[&quot;schema&quot;]][&quot;Enums&quot;][EnumName]
  : DefaultSchemaEnumNameOrOptions extends keyof DefaultSchema[&quot;Enums&quot;]
    ? DefaultSchema[&quot;Enums&quot;][DefaultSchemaEnumNameOrOptions]
    : never
export type CompositeTypes&lt;
  PublicCompositeTypeNameOrOptions extends
    | keyof DefaultSchema[&quot;CompositeTypes&quot;]
    | { schema: keyof DatabaseWithoutInternals },
  CompositeTypeName extends PublicCompositeTypeNameOrOptions extends {
    schema: keyof DatabaseWithoutInternals
  }
    ? keyof DatabaseWithoutInternals[PublicCompositeTypeNameOrOptions[&quot;schema&quot;]][&quot;CompositeTypes&quot;]
    : never = never,
&gt; = PublicCompositeTypeNameOrOptions extends {
  schema: keyof DatabaseWithoutInternals
}
  ? DatabaseWithoutInternals[PublicCompositeTypeNameOrOptions[&quot;schema&quot;]][&quot;CompositeTypes&quot;][CompositeTypeName]
  : PublicCompositeTypeNameOrOptions extends keyof DefaultSchema[&quot;CompositeTypes&quot;]
    ? DefaultSchema[&quot;CompositeTypes&quot;][PublicCompositeTypeNameOrOptions]
    : never</file><file path="fe/Dockerfile"># Frontend Dockerfile - Multi-Stage Build for Next.js
# Optimized for App Runner deployment with standalone output
# syntax=docker/dockerfile:1

# =============================================================================
# Stage 1: Base - Install dependencies
# =============================================================================
ARG NODE_VERSION=22
FROM node:${NODE_VERSION}-slim AS base

# Configure pnpm
ENV PNPM_HOME=&quot;/pnpm&quot;
ENV PATH=&quot;$PNPM_HOME:$PATH&quot;

# Install system dependencies
RUN apt-get update -qq &amp;&amp; \
    apt-get install --no-install-recommends -y ca-certificates &amp;&amp; \
    rm -rf /var/lib/apt/lists/* &amp;&amp; \
    npm install -g pnpm@10

WORKDIR /app

# =============================================================================
# Stage 2: Dependencies - Install all dependencies
# =============================================================================
FROM base AS deps

# Copy package files
COPY package.json pnpm-lock.yaml ./

# Install all dependencies (including devDependencies for build)
RUN pnpm install --frozen-lockfile

# =============================================================================
# Stage 3: Builder - Build the Next.js application
# =============================================================================
FROM base AS builder

WORKDIR /app

# Copy dependencies from deps stage
COPY --from=deps /app/node_modules ./node_modules

# Copy source code
# Note: If you have a shared folder at the monorepo root, uncomment the next line
# and adjust the path. The shared code will be copied into the build context.
# COPY ../shared ./shared

COPY . .

# Set build-time environment variables
# These are baked into the client bundle at build time
ARG NEXT_PUBLIC_API_URL
ARG NEXT_PUBLIC_SUPABASE_URL
ARG NEXT_PUBLIC_SUPABASE_ANON_KEY
ARG NEXT_PUBLIC_GOOGLE_CLIENT_ID

ENV NEXT_PUBLIC_API_URL=${NEXT_PUBLIC_API_URL}
ENV NEXT_PUBLIC_SUPABASE_URL=${NEXT_PUBLIC_SUPABASE_URL}
ENV NEXT_PUBLIC_SUPABASE_ANON_KEY=${NEXT_PUBLIC_SUPABASE_ANON_KEY}
ENV NEXT_PUBLIC_GOOGLE_CLIENT_ID=${NEXT_PUBLIC_GOOGLE_CLIENT_ID}

# Disable Next.js telemetry during build
ENV NEXT_TELEMETRY_DISABLED=1

# Build the application
# This creates the .next/standalone directory with a minimal Node.js server
RUN pnpm build

# =============================================================================
# Stage 4: Runner - Production runtime
# =============================================================================
FROM node:${NODE_VERSION}-slim AS runner

WORKDIR /app

# Set production environment
ENV NODE_ENV=production
ENV NEXT_TELEMETRY_DISABLED=1

# Create non-privileged user for security
ARG UID=10001
RUN adduser \
    --disabled-password \
    --gecos &quot;&quot; \
    --home &quot;/app&quot; \
    --shell &quot;/sbin/nologin&quot; \
    --uid &quot;${UID}&quot; \
    appuser

# Copy only the necessary files from builder
# The standalone build includes everything needed to run

# Copy the standalone server
COPY --from=builder --chown=appuser:appuser /app/.next/standalone ./

# Copy static files (these are not included in standalone by default)
COPY --from=builder --chown=appuser:appuser /app/.next/static ./.next/static

# Copy public folder
COPY --from=builder --chown=appuser:appuser /app/public ./public

# Switch to non-privileged user
USER appuser

# Expose the port Next.js runs on
EXPOSE 3000

# Set the hostname to listen on all interfaces
ENV HOSTNAME=&quot;0.0.0.0&quot;
ENV PORT=3000

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD node -e &quot;require(&apos;http&apos;).get(&apos;http://localhost:3000/&apos;, (r) =&gt; process.exit(r.statusCode === 200 ? 0 : 1))&quot;

# Start the server
CMD [&quot;node&quot;, &quot;server.js&quot;]</file><file path="fe/env.example"># ============================================================================
# AI Google Calendar Assistant - Frontend
# ============================================================================
# Copy this file to .env.local (if you need any environment variables)
# ============================================================================

# Backend URL is now hardcoded in lib/constants.ts:
# - localhost/127.0.0.1 -&gt; http://localhost:3000 (local development)
# - any other host -&gt; https://i3fzcpnmmk.eu-central-1.awsapprunner.com (production)
#
# No environment variables needed for backend URL configuration.
# ============================================================================</file><file path="fe/eslint.config.mjs">// Global ignores
‚ãÆ----
// Base JavaScript rules
‚ãÆ----
// TypeScript rules
‚ãÆ----
// React rules
‚ãÆ----
// React rules
‚ãÆ----
&apos;react/react-in-jsx-scope&apos;: &apos;off&apos;, // Not needed in Next.js
&apos;react/prop-types&apos;: &apos;off&apos;, // Using TypeScript
&apos;react/display-name&apos;: &apos;off&apos;, // Allow anonymous components
‚ãÆ----
// React Hooks rules
‚ãÆ----
// TypeScript rules adjustments
‚ãÆ----
// TanStack Query rules
‚ãÆ----
// JavaScript-specific overrides
‚ãÆ----
// Config files - allow globals
‚ãÆ----
// React Three Fiber components - allow Three.js JSX properties</file><file path="fe/metadata.json">{
  &quot;name&quot;: &quot;Google AI Personal Assistant&quot;,
  &quot;description&quot;: &quot;A professional SaaS-style bridge to interact with Gemini AI, featuring multi-platform integration management for WhatsApp and Telegram.&quot;,
  &quot;requestFramePermissions&quot;: [&quot;microphone&quot;]
}</file><file path="fe/next-env.d.ts"></file><file path="fe/next.config.mjs">/** @type {import(&apos;next&apos;).NextConfig} */
‚ãÆ----
async headers()</file><file path="fe/package.json">{
  &quot;name&quot;: &quot;google-ai-personal-assistant&quot;,
  &quot;displayName&quot;: &quot;Google AI Personal Assistant&quot;,
  &quot;version&quot;: &quot;1.0.139&quot;,
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;next build&quot;,
    &quot;redis&quot;: &quot;redis-server&quot;,
    &quot;dev&quot;: &quot;next dev --port 4000&quot;,
    &quot;format&quot;: &quot;prettier --write .&quot;,
    &quot;lint&quot;: &quot;eslint .&quot;,
    &quot;lint:fix&quot;: &quot;eslint . --fix&quot;,
    &quot;start&quot;: &quot;next start&quot;,
    &quot;sort&quot;: &quot;npx sort-package-json&quot;,
    &quot;test&quot;: &quot;bun test&quot;,
    &quot;test:watch&quot;: &quot;bun test --watch&quot;,
    &quot;test:coverage&quot;: &quot;bun test --coverage&quot;,
    &quot;update:db:types&quot;: &quot;npx supabase gen types typescript --project-id vdwjfekcsnurtjsieojv --schema public &gt; database.types.ts&quot;
  },
  &quot;dependencies&quot;: {
    &quot;@google/genai&quot;: &quot;1.34.0&quot;,
    &quot;@hookform/resolvers&quot;: &quot;^5.2.2&quot;,
    &quot;@number-flow/react&quot;: &quot;0.5.10&quot;,
    &quot;@radix-ui/react-accordion&quot;: &quot;^1.2.12&quot;,
    &quot;@radix-ui/react-alert-dialog&quot;: &quot;^1.1.15&quot;,
    &quot;@radix-ui/react-avatar&quot;: &quot;^1.1.11&quot;,
    &quot;@radix-ui/react-dialog&quot;: &quot;^1.1.15&quot;,
    &quot;@radix-ui/react-dropdown-menu&quot;: &quot;^2.1.16&quot;,
    &quot;@radix-ui/react-hover-card&quot;: &quot;^1.1.15&quot;,
    &quot;@radix-ui/react-label&quot;: &quot;^2.1.8&quot;,
    &quot;@radix-ui/react-popover&quot;: &quot;^1.1.15&quot;,
    &quot;@radix-ui/react-separator&quot;: &quot;^1.1.8&quot;,
    &quot;@radix-ui/react-slot&quot;: &quot;^1.2.4&quot;,
    &quot;@radix-ui/react-tabs&quot;: &quot;^1.1.13&quot;,
    &quot;@radix-ui/react-tooltip&quot;: &quot;^1.2.8&quot;,
    &quot;@react-three/drei&quot;: &quot;^10.7.7&quot;,
    &quot;@react-three/fiber&quot;: &quot;^9.5.0&quot;,
    &quot;@supabase/supabase-js&quot;: &quot;^2.89.0&quot;,
    &quot;@tanstack/react-query&quot;: &quot;^5.90.14&quot;,
    &quot;@tsparticles/engine&quot;: &quot;3.9.1&quot;,
    &quot;@tsparticles/react&quot;: &quot;3.0.0&quot;,
    &quot;@tsparticles/slim&quot;: &quot;3.9.1&quot;,
    &quot;@types/dompurify&quot;: &quot;^3.0.5&quot;,
    &quot;axios&quot;: &quot;^1.13.2&quot;,
    &quot;class-variance-authority&quot;: &quot;^0.7.1&quot;,
    &quot;clsx&quot;: &quot;^2.1.1&quot;,
    &quot;d3&quot;: &quot;7.9.0&quot;,
    &quot;date-fns&quot;: &quot;^3.6.0&quot;,
    &quot;dompurify&quot;: &quot;^3.3.1&quot;,
    &quot;framer-motion&quot;: &quot;^12.24.7&quot;,
    &quot;i18next&quot;: &quot;^25.7.3&quot;,
    &quot;i18next-browser-languagedetector&quot;: &quot;^8.2.0&quot;,
    &quot;livekit-client&quot;: &quot;^2.16.1&quot;,
    &quot;lucide-react&quot;: &quot;^0.562.0&quot;,
    &quot;next&quot;: &quot;^16.1.1&quot;,
    &quot;next-themes&quot;: &quot;^0.4.6&quot;,
    &quot;ogl&quot;: &quot;1.0.11&quot;,
    &quot;react&quot;: &quot;^19.1.0&quot;,
    &quot;react-day-picker&quot;: &quot;^9.13.0&quot;,
    &quot;react-dom&quot;: &quot;^19.1.0&quot;,
    &quot;react-hook-form&quot;: &quot;^7.70.0&quot;,
    &quot;react-i18next&quot;: &quot;^16.5.1&quot;,
    &quot;react-icons&quot;: &quot;^5.5.0&quot;,
    &quot;react-markdown&quot;: &quot;9.0.1&quot;,
    &quot;recharts&quot;: &quot;2.15.4&quot;,
    &quot;remark-gfm&quot;: &quot;4.0.0&quot;,
    &quot;sonner&quot;: &quot;^2.0.7&quot;,
    &quot;tailwind-merge&quot;: &quot;^3.4.0&quot;,
    &quot;tailwindcss-animate&quot;: &quot;^1.0.7&quot;,
    &quot;three&quot;: &quot;^0.182.0&quot;,
    &quot;use-debounce&quot;: &quot;^10.0.6&quot;,
    &quot;uuid&quot;: &quot;^10.0.0&quot;,
    &quot;zod&quot;: &quot;^4.3.4&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@babel/parser&quot;: &quot;^7.28.5&quot;,
    &quot;@eslint/js&quot;: &quot;^9.39.2&quot;,
    &quot;@tailwindcss/typography&quot;: &quot;^0.5.15&quot;,
    &quot;@tanstack/eslint-plugin-query&quot;: &quot;^5.91.2&quot;,
    &quot;@tanstack/react-query-devtools&quot;: &quot;^5.91.2&quot;,
    &quot;@testing-library/dom&quot;: &quot;^10.4.0&quot;,
    &quot;@testing-library/react&quot;: &quot;^16.1.0&quot;,
    &quot;@testing-library/user-event&quot;: &quot;^14.6.1&quot;,
    &quot;@types/bun&quot;: &quot;^1.2.13&quot;,
    &quot;@types/d3&quot;: &quot;7.4.3&quot;,
    &quot;@types/node&quot;: &quot;^25.0.3&quot;,
    &quot;@types/react&quot;: &quot;^19.1.8&quot;,
    &quot;@types/react-dom&quot;: &quot;^19.1.6&quot;,
    &quot;@types/react-icons&quot;: &quot;^3.0.0&quot;,
    &quot;@types/three&quot;: &quot;^0.182.0&quot;,
    &quot;@types/uuid&quot;: &quot;^10.0.0&quot;,
    &quot;autoprefixer&quot;: &quot;^10.4.19&quot;,
    &quot;babel-plugin-react-compiler&quot;: &quot;^19.1.0-rc.2&quot;,
    &quot;eslint&quot;: &quot;^9.28.0&quot;,
    &quot;eslint-config-next&quot;: &quot;^16.1.1&quot;,
    &quot;eslint-plugin-react&quot;: &quot;^7.37.5&quot;,
    &quot;eslint-plugin-react-hooks&quot;: &quot;^7.0.1&quot;,
    &quot;happy-dom&quot;: &quot;^17.4.6&quot;,
    &quot;magic-string&quot;: &quot;^0.30.21&quot;,
    &quot;postcss&quot;: &quot;^8.4.39&quot;,
    &quot;prettier&quot;: &quot;3.7.4&quot;,
    &quot;swc-plugin-component-annotate&quot;: &quot;^1.13.0&quot;,
    &quot;tailwindcss&quot;: &quot;^3.4.6&quot;,
    &quot;typescript&quot;: &quot;~5.5.3&quot;,
    &quot;typescript-eslint&quot;: &quot;^8.52.0&quot;
  }
}</file><file path="fe/postcss.config.js"></file><file path="fe/README.md"># AI Google Calendar Assistant - Frontend

&gt; Modern Next.js 16 + React 19 web application with AI-powered calendar management, real-time chat interface, voice input, and comprehensive analytics dashboard.

[![Next.js](https://img.shields.io/badge/Next.js-16.1.1-black.svg)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.1.0-blue.svg)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.5+-blue.svg)](https://www.typescriptlang.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.4-38B2AC.svg)](https://tailwindcss.com/)
[![Framer Motion](https://img.shields.io/badge/Framer_Motion-12.24-FF0055.svg)](https://www.framer.com/motion/)

---

## Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Architecture](#architecture)
- [State Management](#state-management)
- [Component Library](#component-library)
- [Hooks](#hooks)
- [Services](#services)
- [Project Structure](#project-structure)
- [Getting Started](#getting-started)
- [Development](#development)
- [Testing](#testing)
- [Performance](#performance)
- [Security](#security)

---

## Overview

This frontend application provides:

- **AI Chat Interface**: Conversational calendar management with real-time streaming responses
- **Voice Input**: Speech-to-text via browser API and LiveKit integration
- **Multiple View Modes**: Chat view, Avatar view, and 3D wall calendar visualization
- **Analytics Dashboard**: Calendar insights with 12+ interactive chart components
- **Real-time Updates**: Live calendar synchronization via SSE
- **Multi-language Support**: i18n with RTL support (English, Hebrew, Arabic, German, French, Russian)
- **Admin Dashboard**: User management, audit logs, payment tracking

---

## Features

### AI Chat Interface

| Feature | Description |
|---------|-------------|
| **Streaming Responses** | Real-time text streaming with typewriter effect via SSE |
| **Natural Language** | Create, update, delete events via conversation |
| **Conversation History** | Persistent conversations with AI-generated titles |
| **Multiple View Modes** | Chat view, Avatar view, 3D visualization |
| **Voice Input** | Speech-to-text via browser API and LiveKit |
| **Voice Orb** | Visual feedback animation during voice input |
| **Image Upload** | Upload images for AI vision analysis |
| **Markdown Support** | Rich text rendering with syntax highlighting |
| **Message Actions** | Copy, regenerate, and feedback options |
| **TTS Caching** | Cached text-to-speech for repeated responses |

### Dashboard Views

| View | Route | Description |
|------|-------|-------------|
| **Main Dashboard** | `/dashboard` | Chat interface with sidebar navigation |
| **Analytics** | `/dashboard/analytics` | Calendar insights, time allocation, patterns |
| **Billing** | `/dashboard/billing` | Subscription management, payment history |
| **Integrations** | `/dashboard/integrations` | Connect/disconnect Google Calendar |

### Admin Dashboard

| Page | Route | Description |
|------|-------|-------------|
| **Users** | `/admin/users` | Search, view, manage all users |
| **Subscriptions** | `/admin/subscriptions` | Monitor subscription statuses |
| **Payments** | `/admin/payments` | Transaction history |
| **Audit Logs** | `/admin/audit-logs` | Security event tracking |

### Analytics Dashboard Components

| Component | Description |
|-----------|-------------|
| **BentoStatsGrid** | Key metrics in animated grid layout |
| **TimeAllocationChart** | Category-based time distribution (pie chart) |
| **DailyAvailableHoursChart** | Daily free time analysis (bar chart) |
| **WeeklyPatternDashboard** | Day-of-week activity heatmap |
| **MonthlyPatternChart** | Month-over-month trends (line chart) |
| **EventDurationDashboard** | Event length distribution |
| **RecentEvents** | Latest calendar entries list |
| **UpcomingWeekPreview** | Next 7 days overview |
| **FocusTimeTracker** | Deep work time analysis |
| **ScheduleHealthScore** | Overall schedule quality metric |
| **CalendarFilterSelect** | Filter analytics by calendar |
| **TimeDistributionChart** | Hourly activity breakdown |

### Modal Dialogs (15 Variants)

| Dialog | Description |
|--------|-------------|
| **QuickEventDialog** | Fast event creation with preview |
| **EventDetailsDialog** | View and manage single events |
| **CalendarEventsDialog** | Browse events by calendar |
| **DayEventsDialog** | View all events for a specific day |
| **CalendarSettingsDialog** | Manage calendar preferences |
| **CreateCalendarDialog** | Create new secondary calendars |
| **EventsListDialog** | Paginated event listing |
| **RescheduleDialog** | Smart event rescheduling with conflict detection |
| **GapRecoveryDialog** | Fill untracked time gaps |
| **UserDetailsDialog** | Admin: detailed user information |
| **GrantCreditsDialog** | Admin: grant user credits |

### Marketing Pages

| Page | Route | Description |
|------|-------|-------------|
| **Landing** | `/` | Hero section with feature showcase |
| **Pricing** | `/pricing` | Tiered pricing with animated testimonials |
| **About** | `/about` | Company and product information |
| **Contact** | `/contact` | Contact form with email integration |
| **Waiting List** | `/waitinglist` | Early access signup |
| **Privacy** | `/privacy` | Privacy policy |
| **Terms** | `/terms` | Terms of service |

### Authentication

| Feature | Description |
|---------|-------------|
| **Email/Password** | Traditional signup and signin |
| **Google OAuth** | One-click Google authentication |
| **OTP Verification** | Email verification code |
| **Session Management** | Automatic token refresh on focus |
| **Protected Routes** | Route guards for authenticated pages |

### Mobile &amp; Responsive

| Feature | Description |
|---------|-------------|
| **Hamburger Menu** | Mobile sidebar access via hamburger menu |
| **Responsive Layouts** | Adaptive UI for all screen sizes |
| **Touch-Friendly** | Optimized touch interactions |

### 3D Visualizations

| Component | Description |
|-----------|-------------|
| **WallCalendar3D** | Interactive Three.js calendar view |
| **WireframeGlobe** | Animated dotted globe |
| **Particles** | tsParticles background effects |
| **AllyCharacter** | 3D AI assistant animation |

---

## Architecture

### Application Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           FRONTEND ARCHITECTURE                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                         PRESENTATION LAYER                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Pages   ‚îÇ  ‚îÇ Layouts ‚îÇ  ‚îÇ Dialogs ‚îÇ  ‚îÇ Charts  ‚îÇ  ‚îÇ 3D      ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ (App    ‚îÇ  ‚îÇ (Auth,  ‚îÇ  ‚îÇ (Modal  ‚îÇ  ‚îÇ (Rechts)‚îÇ  ‚îÇ (Three) ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Router) ‚îÇ  ‚îÇ Dash)   ‚îÇ  ‚îÇ Forms)  ‚îÇ  ‚îÇ         ‚îÇ  ‚îÇ         ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ            ‚îÇ            ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ               ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                         ‚îÇ                                                   ‚îÇ
‚îÇ                         ‚ñº                                                   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                          STATE LAYER                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ TanStack      ‚îÇ  ‚îÇ React         ‚îÇ  ‚îÇ React Hook    ‚îÇ           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Query         ‚îÇ  ‚îÇ Context       ‚îÇ  ‚îÇ Form          ‚îÇ           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ (Server)      ‚îÇ  ‚îÇ (UI State)    ‚îÇ  ‚îÇ (Forms)       ‚îÇ           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                         ‚îÇ                                                   ‚îÇ
‚îÇ                         ‚ñº                                                   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                         SERVICE LAYER                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ API Services  ‚îÇ  ‚îÇ Chat Stream   ‚îÇ  ‚îÇ Voice         ‚îÇ           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ (Axios)       ‚îÇ  ‚îÇ Service (SSE) ‚îÇ  ‚îÇ Service       ‚îÇ           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                         ‚îÇ                                                   ‚îÇ
‚îÇ                         ‚ñº                                                   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                        EXTERNAL LAYER                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Backend API   ‚îÇ  ‚îÇ Supabase      ‚îÇ  ‚îÇ LiveKit       ‚îÇ           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ (Express)     ‚îÇ  ‚îÇ Auth          ‚îÇ  ‚îÇ Voice         ‚îÇ           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Data Flow

```
User Interaction
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Component     ‚îÇ  React component (UI)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Hook          ‚îÇ  useQuery, useMutation, useContext
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Service       ‚îÇ  API service function
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Axios         ‚îÇ  HTTP client with interceptors
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Backend API   ‚îÇ  Express server
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Response      ‚îÇ  Update cache, trigger re-render
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Streaming Chat Flow

```
User Message
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ChatContext     ‚îÇ  Add user message to state
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ chatStreamService ‚îÇ  POST /api/chat/stream
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ EventSource     ‚îÇ  SSE connection
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Events  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  &quot;delta&quot; ‚Üí Append to streaming text ‚îÇ
    ‚îÇ  &quot;done&quot;  ‚Üí Complete message         ‚îÇ
    ‚îÇ  &quot;error&quot; ‚Üí Handle error             ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ StreamingTypewriter ‚îÇ  Animate text display
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## State Management

### Overview

| Type | Tool | Use Case |
|------|------|----------|
| **Server State** | TanStack Query | API data, caching, background refresh |
| **UI State** | React Context | Auth, chat, dashboard, sidebar |
| **Form State** | React Hook Form | Form fields, validation |
| **URL State** | Next.js routing | Filters, pagination, navigation |

### React Contexts

#### AuthContext

```typescript
interface AuthContextType {
  user: User | null
  isLoading: boolean
  isAuthenticated: boolean
  signIn: (credentials: Credentials) =&gt; Promise&lt;void&gt;
  signOut: () =&gt; Promise&lt;void&gt;
  refreshSession: () =&gt; Promise&lt;void&gt;
}
```

**Features:**
- User authentication state
- Session management with auto-refresh
- Google OAuth integration
- Protected route handling

#### ChatContext

```typescript
interface ChatContextType {
  conversations: Conversation[]
  currentConversation: Conversation | null
  messages: Message[]
  isStreaming: boolean
  sendMessage: (content: string) =&gt; Promise&lt;void&gt;
  createConversation: () =&gt; void
  deleteConversation: (id: string) =&gt; void
  selectConversation: (id: string) =&gt; void
}
```

**Features:**
- Conversation management
- Message streaming state
- Real-time message updates
- Conversation history persistence

#### AnalyticsContext

```typescript
interface AnalyticsContextType {
  dateRange: DateRange
  selectedCalendars: string[]
  analyticsData: AnalyticsData | null
  isLoading: boolean
  setDateRange: (range: DateRange) =&gt; void
  setSelectedCalendars: (ids: string[]) =&gt; void
  refreshAnalytics: () =&gt; void
}
```

**Features:**
- Date range filtering
- Calendar selection
- Analytics data caching
- Automatic refresh

#### DashboardUIContext

```typescript
interface DashboardUIContextType {
  activeDialog: DialogType | null
  selectedEvent: CalendarEvent | null
  selectedCalendar: Calendar | null
  selectedDate: Date | null
  openDialog: (type: DialogType, data?: any) =&gt; void
  closeDialog: () =&gt; void
}
```

**Features:**
- Modal dialog management
- Selected item tracking
- Cross-component state sharing

#### Other Contexts

| Context | Purpose |
|---------|---------|
| **SidebarContext** | Sidebar collapse/expand state |
| **LanguageContext** | i18n locale management |
| **GapRecoveryContext** | Gap analysis state and operations |

#### GapRecoveryContext

```typescript
interface GapRecoveryContextType {
  gaps: Gap[]
  isAnalyzing: boolean
  selectedGap: Gap | null
  analyzeGaps: (dateRange: DateRange) =&gt; Promise&lt;void&gt;
  fillGap: (gap: Gap, eventDetails: EventInput) =&gt; Promise&lt;void&gt;
  dismissGap: (gapId: string) =&gt; void
  selectGap: (gap: Gap) =&gt; void
}
```

**Features:**
- Detect untracked time between calendar events
- Suggest events to fill detected gaps
- AI-powered activity recommendations
- Integration with quick event creation

### TanStack Query Patterns

#### Query Example

```typescript
// hooks/queries/useCalendars.ts
export function useCalendars() {
  return useQuery({
    queryKey: [&apos;calendars&apos;],
    queryFn: () =&gt; calendarsService.getAll(),
    staleTime: 5 * 60 * 1000, // 5 minutes
    refetchOnWindowFocus: true,
  })
}
```

#### Mutation Example

```typescript
// hooks/queries/useCreateEvent.ts
export function useCreateEvent() {
  const queryClient = useQueryClient()

  return useMutation({
    mutationFn: (event: CreateEventInput) =&gt; eventsService.create(event),
    onSuccess: () =&gt; {
      queryClient.invalidateQueries({ queryKey: [&apos;events&apos;] })
      queryClient.invalidateQueries({ queryKey: [&apos;analytics&apos;] })
    },
  })
}
```

#### Optimistic Updates

```typescript
export function useUpdateEvent() {
  const queryClient = useQueryClient()

  return useMutation({
    mutationFn: (event: UpdateEventInput) =&gt; eventsService.update(event),
    onMutate: async (newEvent) =&gt; {
      await queryClient.cancelQueries({ queryKey: [&apos;events&apos;] })
      const previousEvents = queryClient.getQueryData([&apos;events&apos;])
      queryClient.setQueryData([&apos;events&apos;], (old) =&gt; /* optimistic update */)
      return { previousEvents }
    },
    onError: (err, newEvent, context) =&gt; {
      queryClient.setQueryData([&apos;events&apos;], context.previousEvents)
    },
    onSettled: () =&gt; {
      queryClient.invalidateQueries({ queryKey: [&apos;events&apos;] })
    },
  })
}
```

---

## Component Library

### UI Primitives (40+ components)

Built with Radix UI and shadcn/ui for accessibility and consistency.

#### Layout Components

| Component | Description | Location |
|-----------|-------------|----------|
| `Sidebar` | Collapsible navigation | `components/dashboard/shared/` |
| `Header` | Dashboard header with user menu | `components/dashboard/shared/` |
| `Footer` | Marketing page footer | `components/marketing/` |
| `Card` | Content container | `components/ui/card.tsx` |
| `Separator` | Visual divider | `components/ui/separator.tsx` |

#### Form Components

| Component | Description | Location |
|-----------|-------------|----------|
| `Input` | Text input with validation | `components/ui/input.tsx` |
| `Button` | Multiple variants | `components/ui/button.tsx` |
| `Select` | Dropdown selection | `components/ui/select.tsx` |
| `Checkbox` | Toggle checkbox | `components/ui/checkbox.tsx` |
| `Switch` | Toggle switch | `components/ui/switch.tsx` |
| `DatePicker` | Date selection | `components/ui/date-picker.tsx` |
| `DateRangePicker` | Date range selection | `components/ui/date-range-picker.tsx` |

#### Feedback Components

| Component | Description | Location |
|-----------|-------------|----------|
| `Toast` | Notification toasts | `components/ui/toast.tsx` |
| `Dialog` | Modal dialogs | `components/ui/dialog.tsx` |
| `AlertDialog` | Confirmation dialogs | `components/ui/alert-dialog.tsx` |
| `Tooltip` | Hover tooltips | `components/ui/tooltip.tsx` |
| `Progress` | Progress indicators | `components/ui/progress.tsx` |
| `Skeleton` | Loading skeletons | `components/ui/skeleton.tsx` |

#### Data Display

| Component | Description | Location |
|-----------|-------------|----------|
| `Table` | Data tables with sorting | `components/ui/table.tsx` |
| `Badge` | Status badges | `components/ui/badge.tsx` |
| `Avatar` | User avatars | `components/ui/avatar.tsx` |
| `Tabs` | Tab navigation | `components/ui/tabs.tsx` |
| `Accordion` | Expandable sections | `components/ui/accordion.tsx` |

### Dashboard Components

#### Chat Components

| Component | Description |
|-----------|-------------|
| `ChatView` | Main chat interface with message list |
| `AvatarView` | Alternative view with AI avatar |
| `MessageBubble` | Individual message display |
| `StreamingTypewriter` | Animated text streaming effect |
| `VoiceOrb` | Voice input visualization |
| `ChatInput` | Message input with voice button |

#### Analytics Components

| Component | Props | Description |
|-----------|-------|-------------|
| `BentoStatsGrid` | `data: Stats[]` | Animated stats cards |
| `TimeAllocationChart` | `data: TimeData[]` | Pie chart for time distribution |
| `WeeklyPatternDashboard` | `data: WeekData[]` | Heatmap visualization |
| `FocusTimeTracker` | `focusHours: number` | Progress ring for focus time |
| `ScheduleHealthScore` | `score: number` | Health score indicator |

### Component Patterns

#### Compound Components

```tsx
// Dialog with compound pattern
&lt;Dialog&gt;
  &lt;DialogTrigger asChild&gt;
    &lt;Button&gt;Open&lt;/Button&gt;
  &lt;/DialogTrigger&gt;
  &lt;DialogContent&gt;
    &lt;DialogHeader&gt;
      &lt;DialogTitle&gt;Title&lt;/DialogTitle&gt;
      &lt;DialogDescription&gt;Description&lt;/DialogDescription&gt;
    &lt;/DialogHeader&gt;
    {/* Content */}
    &lt;DialogFooter&gt;
      &lt;Button&gt;Save&lt;/Button&gt;
    &lt;/DialogFooter&gt;
  &lt;/DialogContent&gt;
&lt;/Dialog&gt;
```

#### Controlled Components

```tsx
// Controlled select with form
const form = useForm&lt;FormValues&gt;()

&lt;FormField
  control={form.control}
  name=&quot;calendar&quot;
  render={({ field }) =&gt; (
    &lt;FormItem&gt;
      &lt;FormLabel&gt;Calendar&lt;/FormLabel&gt;
      &lt;Select onValueChange={field.onChange} defaultValue={field.value}&gt;
        &lt;SelectTrigger&gt;
          &lt;SelectValue placeholder=&quot;Select calendar&quot; /&gt;
        &lt;/SelectTrigger&gt;
        &lt;SelectContent&gt;
          {calendars.map((cal) =&gt; (
            &lt;SelectItem key={cal.id} value={cal.id}&gt;
              {cal.summary}
            &lt;/SelectItem&gt;
          ))}
        &lt;/SelectContent&gt;
      &lt;/Select&gt;
      &lt;FormMessage /&gt;
    &lt;/FormItem&gt;
  )}
/&gt;
```

---

## Hooks

### Custom Hooks Overview

| Hook | Purpose | Location |
|------|---------|----------|
| `useStreamingChat` | SSE chat streaming | `hooks/useStreamingChat.ts` |
| `useSpeechRecognition` | Browser speech API | `hooks/useSpeechRecognition.ts` |
| `useLiveKitVoice` | LiveKit voice integration | `hooks/useLiveKitVoice.ts` |
| `useAgentProfiles` | AI agent tier selection | `hooks/useAgentProfiles.ts` |
| `useGapRecovery` | Gap detection and filling | `hooks/useGapRecovery.ts` |
| `useImageUpload` | Image upload with preview | `hooks/useImageUpload.ts` |
| `useTTSCache` | Text-to-speech caching | `hooks/useTTSCache.ts` |
| `useDebounce` | Debounced values | `hooks/useDebounce.ts` |
| `useLocalStorage` | Persistent local storage | `hooks/useLocalStorage.ts` |
| `useMobileMenu` | Mobile hamburger menu state | `hooks/useMobileMenu.ts` |

### TanStack Query Hooks (60+)

Organized by domain in `hooks/queries/`:

#### Auth Hooks

| Hook | Method | Endpoint |
|------|--------|----------|
| `useSignIn` | POST | `/api/users/signin` |
| `useSignUp` | POST | `/api/users/signup` |
| `useUser` | GET | `/api/users/get-user` |
| `useLogout` | POST | `/api/users/logout` |

#### Calendar Hooks

| Hook | Method | Endpoint |
|------|--------|----------|
| `useCalendars` | GET | `/api/calendar` |
| `useCalendar` | GET | `/api/calendar/:id` |
| `useCreateCalendar` | POST | `/api/calendar` |
| `useUpdateCalendar` | PATCH | `/api/calendar/:id` |
| `useDeleteCalendar` | DELETE | `/api/calendar/:id` |

#### Event Hooks

| Hook | Method | Endpoint |
|------|--------|----------|
| `useEvents` | GET | `/api/events` |
| `useEvent` | GET | `/api/events/:id` |
| `useCreateEvent` | POST | `/api/events` |
| `useUpdateEvent` | PATCH | `/api/events/:id` |
| `useDeleteEvent` | DELETE | `/api/events/:id` |
| `useEventAnalytics` | GET | `/api/events/analytics` |

#### Conversation Hooks

| Hook | Method | Endpoint |
|------|--------|----------|
| `useConversations` | GET | `/api/chat/conversations` |
| `useConversation` | GET | `/api/chat/conversations/:id` |
| `useDeleteConversation` | DELETE | `/api/chat/conversations/:id` |
| `useUpdateConversationTitle` | PATCH | `/api/chat/conversations/:id` |

#### Admin Hooks

| Hook | Method | Endpoint |
|------|--------|----------|
| `useAdminUsers` | GET | `/api/admin/users` |
| `useAdminUser` | GET | `/api/admin/users/:id` |
| `useGrantCredits` | POST | `/api/admin/users/:id/credits` |
| `useAuditLogs` | GET | `/api/admin/audit-logs` |
| `useAdminPayments` | GET | `/api/admin/payments` |

### Hook Usage Examples

#### useStreamingChat

```tsx
const {
  isStreaming,
  streamedContent,
  sendMessage,
  stopStreaming,
} = useStreamingChat({
  conversationId,
  onComplete: (message) =&gt; {
    // Handle completed message
  },
  onError: (error) =&gt; {
    toast.error(error.message)
  },
})
```

#### useSpeechRecognition

```tsx
const {
  isListening,
  transcript,
  startListening,
  stopListening,
  resetTranscript,
  isSupported,
} = useSpeechRecognition({
  language: &apos;en-US&apos;,
  continuous: false,
  onResult: (text) =&gt; {
    // Handle recognized text
  },
})
```

#### useLiveKitVoice

```tsx
const {
  isConnected,
  isRecording,
  connect,
  disconnect,
  startRecording,
  stopRecording,
  roomState,
} = useLiveKitVoice({
  roomName: conversationId,
  onTranscript: (text) =&gt; {
    // Handle transcribed text
  },
})
```

---

## Services

### API Services

| Service | File | Description |
|---------|------|-------------|
| `authService` | `auth.service.ts` | Authentication operations |
| `calendarsService` | `calendars.service.ts` | Calendar CRUD |
| `eventsService` | `events.service.ts` | Event CRUD + analytics |
| `chatService` | `chatService.ts` | Non-streaming chat |
| `chatStreamService` | `chatStreamService.ts` | SSE streaming chat |
| `gapsService` | `gaps.service.ts` | Gap recovery operations |
| `voiceService` | `voice.service.ts` | Voice transcription |
| `paymentService` | `payment.service.ts` | Billing operations |
| `adminService` | `admin.service.ts` | Admin operations |
| `agentProfilesService` | `agent-profiles.service.ts` | Agent tier selection |
| `preferencesService` | `preferences.service.ts` | User preferences management |
| `ttsCacheService` | `tts-cache.service.ts` | TTS response caching |
| `integrationsService` | `integrations.service.ts` | Google Calendar connection |

### Service Pattern

```typescript
// services/calendars.service.ts
import api from &apos;@/lib/api&apos;
import type { Calendar, CreateCalendarInput } from &apos;@/types/calendar&apos;

export const calendarsService = {
  async getAll(): Promise&lt;Calendar[]&gt; {
    const { data } = await api.get(&apos;/api/calendar&apos;)
    return data.data
  },

  async getById(id: string): Promise&lt;Calendar&gt; {
    const { data } = await api.get(`/api/calendar/${id}`)
    return data.data
  },

  async create(input: CreateCalendarInput): Promise&lt;Calendar&gt; {
    const { data } = await api.post(&apos;/api/calendar&apos;, input)
    return data.data
  },

  async update(id: string, input: Partial&lt;Calendar&gt;): Promise&lt;Calendar&gt; {
    const { data } = await api.patch(`/api/calendar/${id}`, input)
    return data.data
  },

  async delete(id: string): Promise&lt;void&gt; {
    await api.delete(`/api/calendar/${id}`)
  },
}
```

### Axios Instance

```typescript
// lib/api.ts
import axios from &apos;axios&apos;
import { supabase } from &apos;./supabase&apos;

const api = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL,
  withCredentials: true,
})

// Request interceptor - add auth token
api.interceptors.request.use(async (config) =&gt; {
  const { data: { session } } = await supabase.auth.getSession()
  if (session?.access_token) {
    config.headers.Authorization = `Bearer ${session.access_token}`
  }
  return config
})

// Response interceptor - handle errors
api.interceptors.response.use(
  (response) =&gt; response,
  async (error) =&gt; {
    if (error.response?.status === 401) {
      await supabase.auth.signOut()
      window.location.href = &apos;/login&apos;
    }
    return Promise.reject(error)
  }
)

export default api
```

---

## Project Structure

```
fe/
‚îú‚îÄ‚îÄ app/                         # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ (marketing)/             # Marketing pages group
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ about/               # About page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contact/             # Contact page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pricing/             # Pricing page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ privacy/             # Privacy policy
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ terms/               # Terms of service
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ waitinglist/         # Waiting list signup
‚îÇ   ‚îú‚îÄ‚îÄ admin/                   # Admin dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ audit-logs/          # Audit log viewer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments/            # Payment management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscriptions/       # Subscription management
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users/               # User management
‚îÇ   ‚îú‚îÄ‚îÄ auth/                    # Auth pages
‚îÇ   ‚îú‚îÄ‚îÄ callback/                # OAuth callback
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/               # Main dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/           # Analytics page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ billing/             # Billing page
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ integrations/        # Integrations page
‚îÇ   ‚îú‚îÄ‚îÄ login/                   # Login page
‚îÇ   ‚îú‚îÄ‚îÄ register/                # Registration page
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx               # Root layout with Providers
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                 # Landing page
‚îÇ   ‚îú‚îÄ‚îÄ providers.tsx            # App providers wrapper
‚îÇ   ‚îî‚îÄ‚îÄ error.tsx                # Error boundary
‚îÇ
‚îú‚îÄ‚îÄ components/                  # React Components
‚îÇ   ‚îú‚îÄ‚îÄ 3d/                      # Three.js components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WallCalendar3D.tsx   # 3D calendar visualization
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WireframeGlobe.tsx   # Globe animation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AllyCharacter.tsx    # 3D AI assistant animation
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Particles.tsx        # tsParticles background effects
‚îÇ   ‚îú‚îÄ‚îÄ admin/                   # Admin components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminSidebar.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GrantCreditsDialog.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserDetailsDialog.tsx
‚îÇ   ‚îú‚îÄ‚îÄ auth/                    # Auth components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginForm.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RegisterForm.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ OTPVerification.tsx
‚îÇ   ‚îú‚îÄ‚îÄ contact/                 # Contact form
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/               # Dashboard components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/           # Analytics components (12+)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsDashboard.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BentoStatsGrid.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalendarFilterSelect.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DailyAvailableHoursChart.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventDurationDashboard.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FocusTimeTracker.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MonthlyPatternChart.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecentEvents.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ScheduleHealthScore.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TimeAllocationChart.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TimeDistributionChart.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UpcomingWeekPreview.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WeeklyPatternDashboard.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ billing/             # Billing components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaymentMethodCard.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TransactionHistoryTable.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat/                # Chat components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatView.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AvatarView.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MessageBubble.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StreamingTypewriter.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ImageUpload.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ VoiceOrb.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shared/              # Shared dashboard components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardHeader.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardSidebar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardLayout.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HamburgerMenu.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ IntegrationsDashboard.tsx
‚îÇ   ‚îú‚îÄ‚îÄ dialogs/                 # Modal dialogs (15 variants)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalendarEventsDialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalendarSettingsDialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateCalendarDialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DayEventsDialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventDetailsDialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventsListDialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GapRecoveryDialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RescheduleDialog.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ QuickEventDialog.tsx
‚îÇ   ‚îú‚îÄ‚îÄ marketing/               # Marketing components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navbar.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Footer.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Hero.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Features.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Testimonials.tsx
‚îÇ   ‚îú‚îÄ‚îÄ onboarding/              # Onboarding tour
‚îÇ   ‚îú‚îÄ‚îÄ shared/                  # Shared components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Logo.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ThemeToggle.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LanguageSelect.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ui/                      # UI primitives (40+)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialog.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ waiting-list/            # Waiting list form
‚îÇ
‚îú‚îÄ‚îÄ contexts/                    # React Contexts
‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsContext.tsx     # Analytics state
‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.tsx          # Authentication state
‚îÇ   ‚îú‚îÄ‚îÄ ChatContext.tsx          # Chat state management
‚îÇ   ‚îú‚îÄ‚îÄ DashboardUIContext.tsx   # Dashboard UI state
‚îÇ   ‚îú‚îÄ‚îÄ GapRecoveryContext.tsx   # Gap recovery state
‚îÇ   ‚îú‚îÄ‚îÄ LanguageContext.tsx      # i18n state
‚îÇ   ‚îî‚îÄ‚îÄ SidebarContext.tsx       # Sidebar state
‚îÇ
‚îú‚îÄ‚îÄ hooks/                       # Custom Hooks
‚îÇ   ‚îú‚îÄ‚îÄ queries/                 # TanStack Query hooks (60+)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                # Auth queries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendars/           # Calendar queries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events/              # Event queries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ conversations/       # Conversation queries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/           # Analytics queries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gaps/                # Gap recovery queries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ integrations/        # Integration queries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/               # Admin queries
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ agent-profiles/      # Agent profile queries
‚îÇ   ‚îú‚îÄ‚îÄ useAgentProfiles.ts      # Agent profile selection
‚îÇ   ‚îú‚îÄ‚îÄ useLiveKitVoice.ts       # LiveKit voice integration
‚îÇ   ‚îú‚îÄ‚îÄ useSpeechRecognition.ts  # Browser speech API
‚îÇ   ‚îî‚îÄ‚îÄ useStreamingChat.ts      # Chat streaming
‚îÇ
‚îú‚îÄ‚îÄ services/                    # API Services
‚îÇ   ‚îú‚îÄ‚îÄ admin.service.ts         # Admin API calls
‚îÇ   ‚îú‚îÄ‚îÄ agent-profiles.service.ts # AI agent tier selection
‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts          # Auth API calls
‚îÇ   ‚îú‚îÄ‚îÄ calendars.service.ts     # Calendar API calls
‚îÇ   ‚îú‚îÄ‚îÄ chatService.ts           # Chat API calls
‚îÇ   ‚îú‚îÄ‚îÄ chatStreamService.ts     # Streaming chat (SSE)
‚îÇ   ‚îú‚îÄ‚îÄ events.service.ts        # Events API calls
‚îÇ   ‚îú‚îÄ‚îÄ gaps.service.ts          # Gap recovery API
‚îÇ   ‚îú‚îÄ‚îÄ integrations.service.ts  # Google Calendar connection
‚îÇ   ‚îú‚îÄ‚îÄ payment.service.ts       # Payment API calls
‚îÇ   ‚îú‚îÄ‚îÄ preferences.service.ts   # User preferences &amp; settings
‚îÇ   ‚îú‚îÄ‚îÄ tts-cache.service.ts     # Text-to-speech caching
‚îÇ   ‚îî‚îÄ‚îÄ voice.service.ts         # Voice transcription API
‚îÇ
‚îú‚îÄ‚îÄ lib/                         # Utilities
‚îÇ   ‚îú‚îÄ‚îÄ api.ts                   # Axios instance
‚îÇ   ‚îú‚îÄ‚îÄ utils.ts                 # Helper functions
‚îÇ   ‚îî‚îÄ‚îÄ supabase.ts              # Supabase client
‚îÇ
‚îú‚îÄ‚îÄ types/                       # TypeScript types
‚îÇ   ‚îú‚îÄ‚îÄ calendar.ts              # Calendar, event types
‚îÇ   ‚îú‚îÄ‚îÄ chat.ts                  # Message, conversation types
‚îÇ   ‚îú‚îÄ‚îÄ user.ts                  # User, auth types
‚îÇ   ‚îî‚îÄ‚îÄ analytics.ts             # Analytics data types
‚îÇ
‚îú‚îÄ‚îÄ styles/                      # Global styles
‚îÇ   ‚îî‚îÄ‚îÄ globals.css              # Tailwind + custom CSS
‚îÇ
‚îú‚îÄ‚îÄ public/                      # Static assets
‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îî‚îÄ‚îÄ icons/
‚îÇ
‚îî‚îÄ‚îÄ tests/                       # Test files
```

---

## Getting Started

### Prerequisites

- Node.js 18+ or Bun 1.0+
- Backend service running (see `/be`)
- Supabase project (for auth)

### Environment Variables

Create `.env.local` in the `fe` directory:

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# API
NEXT_PUBLIC_API_URL=http://localhost:3000

# LiveKit (optional, for voice)
NEXT_PUBLIC_LIVEKIT_URL=your_livekit_url
```

### Installation

```bash
# Install dependencies
npm install
# or
bun install

# Start development server
npm run dev
# or
bun dev
```

The application will be available at `http://localhost:4000`.

### Building for Production

```bash
# Create production build
npm run build

# Start production server
npm run start
```

---

## Development

### Commands

```bash
npm run dev          # Dev server (port 4000)
npm run build        # Production build
npm run start        # Production server
npm run lint         # Lint code (ESLint)
npm run lint:fix     # Fix lint issues
npm run format       # Format code (Prettier)
npm run test         # Run tests
npm run test:watch   # Tests in watch mode
npm run test:coverage # Tests with coverage
npm run sort         # Sort package.json
npm run update:db:types # Generate Supabase types
```

### Code Style

| Rule | Standard |
|------|----------|
| **Formatter** | Prettier |
| **Linter** | ESLint with Next.js config |
| **Semicolons** | None |
| **Quotes** | Single quotes |
| **Imports** | `@/` alias for all internal imports |

### File Conventions

| Type | Convention | Example |
|------|------------|---------|
| **Components** | PascalCase | `ChatView.tsx` |
| **Pages** | `page.tsx` | `app/dashboard/page.tsx` |
| **Hooks** | useCamelCase | `useStreamingChat.ts` |
| **Services** | camelCase.service | `calendars.service.ts` |
| **Types** | camelCase | `calendar.ts` |
| **Contexts** | PascalCase + Context | `ChatContext.tsx` |

### Adding a New Feature

1. **Create types** in `types/`:
```typescript
// types/feature.ts
export interface Feature {
  id: string
  name: string
}
```

2. **Create service** in `services/`:
```typescript
// services/feature.service.ts
export const featureService = {
  async getAll(): Promise&lt;Feature[]&gt; { ... },
  async create(input: CreateFeatureInput): Promise&lt;Feature&gt; { ... },
}
```

3. **Create hooks** in `hooks/queries/`:
```typescript
// hooks/queries/useFeatures.ts
export function useFeatures() {
  return useQuery({
    queryKey: [&apos;features&apos;],
    queryFn: () =&gt; featureService.getAll(),
  })
}
```

4. **Create components** in `components/`:
```typescript
// components/feature/FeatureList.tsx
export function FeatureList() {
  const { data: features, isLoading } = useFeatures()
  // ...
}
```

---

## Testing

### Test Framework

- **Runner**: Bun test
- **Utilities**: Testing Library
- **Location**: `tests/`

### Running Tests

```bash
# Run all tests
bun test

# Run specific test file
bun test tests/components/ChatView.test.tsx

# Run with coverage
bun test --coverage

# Watch mode
bun test --watch
```

### Test Pattern

```typescript
import { render, screen, fireEvent } from &apos;@testing-library/react&apos;
import { ChatView } from &apos;@/components/dashboard/chat/ChatView&apos;

describe(&apos;ChatView&apos;, () =&gt; {
  it(&apos;renders message input&apos;, () =&gt; {
    render(&lt;ChatView /&gt;)
    expect(screen.getByPlaceholderText(&apos;Type a message...&apos;)).toBeInTheDocument()
  })

  it(&apos;sends message on submit&apos;, async () =&gt; {
    const onSend = jest.fn()
    render(&lt;ChatView onSend={onSend} /&gt;)

    fireEvent.change(screen.getByRole(&apos;textbox&apos;), { target: { value: &apos;Hello&apos; } })
    fireEvent.submit(screen.getByRole(&apos;form&apos;))

    expect(onSend).toHaveBeenCalledWith(&apos;Hello&apos;)
  })
})
```

---

## Performance

### Optimization Strategies

| Strategy | Implementation |
|----------|----------------|
| **Server Components** | Default for static content (Next.js 16) |
| **Client Components** | Only where interactivity needed |
| **Image Optimization** | Next.js Image component |
| **Code Splitting** | Automatic route-based splitting |
| **Lazy Loading** | Dynamic imports for heavy components |
| **Query Caching** | TanStack Query with stale-while-revalidate |
| **Streaming** | SSE for real-time chat updates |

### Lazy Loading Example

```typescript
// Lazy load heavy 3D component
const WallCalendar3D = dynamic(
  () =&gt; import(&apos;@/components/3d/WallCalendar3D&apos;),
  {
    loading: () =&gt; &lt;Skeleton className=&quot;h-[400px]&quot; /&gt;,
    ssr: false,
  }
)
```

### Performance Monitoring

- Web Vitals tracking
- TanStack Query DevTools
- React DevTools Profiler

---

## Security

### Client-Side Security

| Feature | Implementation |
|---------|----------------|
| **HTTPS Only** | Enforced in production |
| **XSS Prevention** | React&apos;s built-in escaping |
| **CSRF Protection** | Supabase Auth tokens |
| **Input Sanitization** | Zod validation |
| **Secure Cookies** | HttpOnly, SameSite |
| **Content Security** | Next.js security headers |

### Authentication Flow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  User Login     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Supabase Auth  ‚îÇ  Validate credentials
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  JWT Token      ‚îÇ  Stored in httpOnly cookie
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  API Request    ‚îÇ  Token in Authorization header
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Backend        ‚îÇ  Validate token, process request
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## License

MIT License - see [LICENSE](../LICENSE) for details.</file><file path="fe/tailwind.config.ts">import type { Config } from &apos;tailwindcss&apos;
import typography from &apos;@tailwindcss/typography&apos;</file><file path="fe/tsconfig.json">{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;ES2015&quot;,
    &quot;lib&quot;: [
      &quot;dom&quot;,
      &quot;dom.iterable&quot;,
      &quot;esnext&quot;
    ],
    &quot;allowJs&quot;: true,
    &quot;skipLibCheck&quot;: true,
    &quot;strict&quot;: true,
    &quot;forceConsistentCasingInFileNames&quot;: true,
    &quot;noEmit&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;module&quot;: &quot;esnext&quot;,
    &quot;moduleResolution&quot;: &quot;bundler&quot;,
    &quot;resolveJsonModule&quot;: true,
    &quot;isolatedModules&quot;: true,
    &quot;jsx&quot;: &quot;react-jsx&quot;,
    &quot;incremental&quot;: true,
    &quot;plugins&quot;: [
      {
        &quot;name&quot;: &quot;next&quot;
      }
    ],
    &quot;paths&quot;: {
      &quot;@/*&quot;: [
        &quot;./*&quot;
      ]
    }
  },
  &quot;include&quot;: [
    &quot;next-env.d.ts&quot;,
    &quot;**/*.ts&quot;,
    &quot;**/*.tsx&quot;,
    &quot;.next/types/**/*.ts&quot;,
    &quot;.next/dev/types/**/*.ts&quot;
  ],
  &quot;exclude&quot;: [
    &quot;node_modules&quot;
  ]
}</file><file path="fe/types.ts">export type Role = &apos;user&apos; | &apos;assistant&apos;
export interface MessageImage {
  data: string
  mimeType: &apos;image/png&apos; | &apos;image/jpeg&apos; | &apos;image/webp&apos; | &apos;image/gif&apos;
}
export interface Message {
  id: string
  role: Role
  content: string
  images?: MessageImage[]
  timestamp: Date
}
export interface ChatHistory {
  id: string
  title: string
  lastMessage: string
  date: string
}
export interface Integration {
  id: string
  name: string
  status: &apos;connected&apos; | &apos;disconnected&apos;
  icon: string
}
export type Route =
  | &apos;home&apos;
  | &apos;pricing&apos;
  | &apos;about&apos;
  | &apos;contact&apos;
  | &apos;dashboard&apos;
  | &apos;login&apos;
  | &apos;register&apos;
  | &apos;roi&apos;
  | &apos;waitinglist&apos;
  | &apos;phone-registration&apos;
  | &apos;otp-verification&apos;</file><file path="infra/cloudfront/CLOUDFRONT_SETUP.md"># CloudFront CDN Setup for Next.js Frontend

This guide explains how to deploy CloudFront in front of your App Runner service to:
- Offload ~80% of traffic (static assets) from App Runner
- Reduce compute costs significantly
- Speed up global load times via edge caching

## Architecture

```
Users ‚Üí CloudFront Edge ‚Üí App Runner (Next.js)
           ‚Üì
    Cached Static Assets
    (_next/static/*, images, fonts)
```

## Prerequisites

1. AWS CLI configured with appropriate permissions
2. App Runner frontend service deployed and running
3. (Optional) ACM certificate in us-east-1 for custom domain

## Deployment Steps

### 1. Create CDN Secret (for origin validation)

First, create a secret in AWS Secrets Manager to validate requests come from CloudFront:

```bash
# Generate a secure random token
TOKEN=$(openssl rand -hex 32)

# Create the secret
aws secretsmanager create-secret \
  --name cloudfront-cdn-secret \
  --secret-string &quot;{\&quot;token\&quot;:\&quot;$TOKEN\&quot;}&quot; \
  --region eu-central-1
```

### 2. Deploy CloudFront Stack

**Without custom domain:**

```bash
aws cloudformation deploy \
  --template-file cloudfront-frontend.yaml \
  --stack-name askally-frontend-cdn \
  --parameter-overrides \
    AppRunnerDomain=&lt;your-app-runner-id&gt;.eu-central-1.awsapprunner.com \
    Environment=production \
  --region eu-central-1
```

**With custom domain (askally.io):**

```bash
# Note: ACM certificate must be in us-east-1 for CloudFront
aws cloudformation deploy \
  --template-file cloudfront-frontend.yaml \
  --stack-name askally-frontend-cdn \
  --parameter-overrides \
    AppRunnerDomain=&lt;your-app-runner-id&gt;.eu-central-1.awsapprunner.com \
    CustomDomainName=askally.io \
    AcmCertificateArn=arn:aws:acm:us-east-1:ACCOUNT_ID:certificate/CERT_ID \
    Environment=production \
  --region eu-central-1
```

### 3. Update DNS (if using custom domain)

After deployment, update your DNS to point to CloudFront:

```bash
# Get the CloudFront domain
aws cloudformation describe-stacks \
  --stack-name askally-frontend-cdn \
  --query &apos;Stacks[0].Outputs[?OutputKey==`CloudFrontDomainName`].OutputValue&apos; \
  --output text
```

Create a CNAME or ALIAS record:
- **Name:** askally.io (or www.askally.io)
- **Type:** CNAME (or ALIAS for root domain in Route 53)
- **Value:** d1234abcd.cloudfront.net

### 4. (Optional) Validate Origin Requests in App Runner

To ensure requests only come through CloudFront, add middleware to your Next.js app:

```typescript
// middleware.ts
import { NextResponse } from &apos;next/server&apos;
import type { NextRequest } from &apos;next/server&apos;

export function middleware(request: NextRequest) {
  // In production, validate CDN secret header
  if (process.env.NODE_ENV === &apos;production&apos;) {
    const cdnSecret = request.headers.get(&apos;x-cdn-secret&apos;)
    const expectedSecret = process.env.CDN_SECRET

    if (expectedSecret &amp;&amp; cdnSecret !== expectedSecret) {
      // Allow health checks without the header
      if (request.nextUrl.pathname === &apos;/api/health&apos;) {
        return NextResponse.next()
      }
      return new NextResponse(&apos;Forbidden&apos;, { status: 403 })
    }
  }

  return NextResponse.next()
}

export const config = {
  matcher: [&apos;/((?!_next/static|_next/image|favicon.ico).*)&apos;],
}
```

## Cache Behavior Summary

| Path Pattern | Cache Duration | Notes |
|--------------|----------------|-------|
| `_next/static/*` | 1 year | Immutable, hashed files |
| `_next/image*` | 1 day | Image optimization API |
| `*.ico, *.png, *.jpg, *.svg` | 1 day | Public assets |
| `*.woff2` | 1 day | Font files |
| `robots.txt, sitemap*.xml` | 1 day | SEO files |
| Everything else | 0 (no cache) | Dynamic content |

## Estimated Cost Savings

With CloudFront serving static assets:
- **Before:** Every request hits App Runner (compute + data transfer)
- **After:** ~80% of requests served from edge cache

Typical savings for a Next.js app:
- App Runner compute: 50-80% reduction
- Data transfer: 60-90% reduction
- Response latency: 2-10x improvement for static assets

## Monitoring

### CloudFront Metrics
- Cache hit ratio (target: &gt;85% for static assets)
- Origin latency
- Error rates (4xx, 5xx)

### Useful CLI Commands

```bash
# Check cache statistics
aws cloudfront get-distribution \
  --id DISTRIBUTION_ID \
  --query &apos;Distribution.DistributionConfig.CacheBehaviors&apos;

# Invalidate cache (use sparingly)
aws cloudfront create-invalidation \
  --distribution-id DISTRIBUTION_ID \
  --paths &quot;/*&quot;

# Invalidate specific paths
aws cloudfront create-invalidation \
  --distribution-id DISTRIBUTION_ID \
  --paths &quot;/_next/static/*&quot; &quot;/favicon.ico&quot;
```

## Troubleshooting

### Cache Not Working
1. Check `Cache-Control` headers from origin
2. Verify cache policy is attached to behavior
3. Check for `Vary` headers that might prevent caching

### 502/503 Errors
1. Check App Runner health
2. Verify origin domain is correct
3. Check origin timeout settings (default: 30s)

### CORS Issues
1. Ensure origin returns proper CORS headers
2. Add CORS headers in response headers policy if needed

## Rolling Back

To remove CloudFront and revert to direct App Runner access:

```bash
# Delete the CloudFront stack
aws cloudformation delete-stack --stack-name askally-frontend-cdn

# Update DNS back to App Runner domain
# (manual step in your DNS provider)
```

Note: CloudFront distributions take 15-30 minutes to delete.</file><file path="infra/cloudfront/cloudfront-frontend.yaml">AWSTemplateFormatVersion: &apos;2010-09-09&apos;
Description: CloudFront distribution for Next.js Frontend on App Runner
Parameters:
  AppRunnerDomain:
    Type: String
    Description: The App Runner service URL (e.g., abc123.eu-central-1.awsapprunner.com)
    Default: &apos;&apos;
  CustomDomainName:
    Type: String
    Description: Custom domain name for CloudFront (e.g., askally.io)
    Default: &apos;&apos;
  AcmCertificateArn:
    Type: String
    Description: ARN of ACM certificate in us-east-1 for custom domain (required if using custom domain)
    Default: &apos;&apos;
  Environment:
    Type: String
    AllowedValues:
      - production
      - staging
    Default: production
Conditions:
  HasCustomDomain: !Not [!Equals [!Ref CustomDomainName, &apos;&apos;]]
  HasCertificate: !Not [!Equals [!Ref AcmCertificateArn, &apos;&apos;]]
  UseCustomDomain: !And [!Condition HasCustomDomain, !Condition HasCertificate]
Resources:
  # Origin Request Policy - Forward necessary headers to App Runner
  OriginRequestPolicy:
    Type: AWS::CloudFront::OriginRequestPolicy
    Properties:
      OriginRequestPolicyConfig:
        Name: !Sub &apos;${AWS::StackName}-OriginRequestPolicy&apos;
        Comment: Forward headers needed for Next.js App Runner origin
        HeadersConfig:
          HeaderBehavior: whitelist
          Headers:
            - Host
            - Accept
            - Accept-Language
            - Accept-Encoding
            - X-Forwarded-For
            - X-Forwarded-Proto
        QueryStringsConfig:
          QueryStringBehavior: all
        CookiesConfig:
          CookieBehavior: all
  StaticAssetsCachePolicy:
    Type: AWS::CloudFront::CachePolicy
    Properties:
      CachePolicyConfig:
        Name: !Sub &apos;${AWS::StackName}-StaticAssets&apos;
        Comment: Long-term caching for Next.js static assets
        DefaultTTL: 31536000
        MaxTTL: 31536000
        MinTTL: 31536000
        ParametersInCacheKeyAndForwardedToOrigin:
          EnableAcceptEncodingGzip: true
          EnableAcceptEncodingBrotli: true
          HeadersConfig:
            HeaderBehavior: none
          QueryStringsConfig:
            QueryStringBehavior: none
          CookiesConfig:
            CookieBehavior: none
  PublicAssetsCachePolicy:
    Type: AWS::CloudFront::CachePolicy
    Properties:
      CachePolicyConfig:
        Name: !Sub &apos;${AWS::StackName}-PublicAssets&apos;
        Comment: Caching for public folder assets
        DefaultTTL: 86400
        MaxTTL: 2592000
        MinTTL: 3600
        ParametersInCacheKeyAndForwardedToOrigin:
          EnableAcceptEncodingGzip: true
          EnableAcceptEncodingBrotli: true
          HeadersConfig:
            HeaderBehavior: none
          QueryStringsConfig:
            QueryStringBehavior: none
          CookiesConfig:
            CookieBehavior: none
  DynamicContentCachePolicy:
    Type: AWS::CloudFront::CachePolicy
    Properties:
      CachePolicyConfig:
        Name: !Sub &apos;${AWS::StackName}-Dynamic&apos;
        Comment: No caching for dynamic Next.js content
        DefaultTTL: 0
        MaxTTL: 0
        MinTTL: 0
        ParametersInCacheKeyAndForwardedToOrigin:
          EnableAcceptEncodingGzip: true
          EnableAcceptEncodingBrotli: true
          HeadersConfig:
            HeaderBehavior: whitelist
            Headers:
              - Accept
              - Accept-Language
              - Authorization
          QueryStringsConfig:
            QueryStringBehavior: all
          CookiesConfig:
            CookieBehavior: all
  SecurityHeadersPolicy:
    Type: AWS::CloudFront::ResponseHeadersPolicy
    Properties:
      ResponseHeadersPolicyConfig:
        Name: !Sub &apos;${AWS::StackName}-SecurityHeaders&apos;
        Comment: Security headers for frontend
        SecurityHeadersConfig:
          StrictTransportSecurity:
            AccessControlMaxAgeSec: 31536000
            IncludeSubdomains: true
            Preload: true
            Override: true
          ContentTypeOptions:
            Override: true
          FrameOptions:
            FrameOption: DENY
            Override: true
          ReferrerPolicy:
            ReferrerPolicy: strict-origin-when-cross-origin
            Override: true
          XSSProtection:
            ModeBlock: true
            Protection: true
            Override: true
  CloudFrontDistribution:
    Type: AWS::CloudFront::Distribution
    Properties:
      DistributionConfig:
        Enabled: true
        Comment: !Sub &apos;Next.js Frontend CDN - ${Environment}&apos;
        DefaultRootObject: &apos;&apos;
        HttpVersion: http2and3
        IPV6Enabled: true
        PriceClass: PriceClass_100  # Use only North America and Europe edge locations
        # Custom domain configuration
        Aliases: !If
          - UseCustomDomain
          - [!Ref CustomDomainName]
          - !Ref AWS::NoValue
        ViewerCertificate: !If
          - UseCustomDomain
          - AcmCertificateArn: !Ref AcmCertificateArn
            SslSupportMethod: sni-only
            MinimumProtocolVersion: TLSv1.2_2021
          - CloudFrontDefaultCertificate: true
        # Origin configuration
        Origins:
          - Id: AppRunnerOrigin
            DomainName: !Ref AppRunnerDomain
            CustomOriginConfig:
              HTTPPort: 80
              HTTPSPort: 443
              OriginProtocolPolicy: https-only
              OriginSSLProtocols:
                - TLSv1.2
              OriginReadTimeout: 30
              OriginKeepaliveTimeout: 5
            OriginCustomHeaders:
              - HeaderName: X-CDN-Secret
                HeaderValue: &apos;{{resolve:secretsmanager:cloudfront-cdn-secret:SecretString:token}}&apos;
        # Cache behaviors - most specific patterns first
        CacheBehaviors:
          # Next.js static assets (hashed, immutable) - cache forever
          - PathPattern: &apos;_next/static/*&apos;
            TargetOriginId: AppRunnerOrigin
            ViewerProtocolPolicy: redirect-to-https
            AllowedMethods:
              - GET
              - HEAD
            CachedMethods:
              - GET
              - HEAD
            CachePolicyId: !Ref StaticAssetsCachePolicy
            OriginRequestPolicyId: !Ref OriginRequestPolicy
            ResponseHeadersPolicyId: !Ref SecurityHeadersPolicy
            Compress: true
          # Next.js image optimization API - short cache with query string variation
          - PathPattern: &apos;_next/image*&apos;
            TargetOriginId: AppRunnerOrigin
            ViewerProtocolPolicy: redirect-to-https
            AllowedMethods:
              - GET
              - HEAD
            CachedMethods:
              - GET
              - HEAD
            CachePolicyId: !Ref PublicAssetsCachePolicy
            OriginRequestPolicyId: !Ref OriginRequestPolicy
            ResponseHeadersPolicyId: !Ref SecurityHeadersPolicy
            Compress: true
          # Public folder assets (favicon, robots.txt, etc.)
          - PathPattern: &apos;*.ico&apos;
            TargetOriginId: AppRunnerOrigin
            ViewerProtocolPolicy: redirect-to-https
            AllowedMethods:
              - GET
              - HEAD
            CachedMethods:
              - GET
              - HEAD
            CachePolicyId: !Ref PublicAssetsCachePolicy
            OriginRequestPolicyId: !Ref OriginRequestPolicy
            Compress: true
          - PathPattern: &apos;*.png&apos;
            TargetOriginId: AppRunnerOrigin
            ViewerProtocolPolicy: redirect-to-https
            AllowedMethods:
              - GET
              - HEAD
            CachedMethods:
              - GET
              - HEAD
            CachePolicyId: !Ref PublicAssetsCachePolicy
            OriginRequestPolicyId: !Ref OriginRequestPolicy
            Compress: true
          - PathPattern: &apos;*.jpg&apos;
            TargetOriginId: AppRunnerOrigin
            ViewerProtocolPolicy: redirect-to-https
            AllowedMethods:
              - GET
              - HEAD
            CachedMethods:
              - GET
              - HEAD
            CachePolicyId: !Ref PublicAssetsCachePolicy
            OriginRequestPolicyId: !Ref OriginRequestPolicy
            Compress: true
          - PathPattern: &apos;*.svg&apos;
            TargetOriginId: AppRunnerOrigin
            ViewerProtocolPolicy: redirect-to-https
            AllowedMethods:
              - GET
              - HEAD
            CachedMethods:
              - GET
              - HEAD
            CachePolicyId: !Ref PublicAssetsCachePolicy
            OriginRequestPolicyId: !Ref OriginRequestPolicy
            Compress: true
          - PathPattern: &apos;*.woff2&apos;
            TargetOriginId: AppRunnerOrigin
            ViewerProtocolPolicy: redirect-to-https
            AllowedMethods:
              - GET
              - HEAD
            CachedMethods:
              - GET
              - HEAD
            CachePolicyId: !Ref PublicAssetsCachePolicy
            OriginRequestPolicyId: !Ref OriginRequestPolicy
            Compress: true
          - PathPattern: &apos;robots.txt&apos;
            TargetOriginId: AppRunnerOrigin
            ViewerProtocolPolicy: redirect-to-https
            AllowedMethods:
              - GET
              - HEAD
            CachedMethods:
              - GET
              - HEAD
            CachePolicyId: !Ref PublicAssetsCachePolicy
            OriginRequestPolicyId: !Ref OriginRequestPolicy
            Compress: true
          - PathPattern: &apos;sitemap*.xml&apos;
            TargetOriginId: AppRunnerOrigin
            ViewerProtocolPolicy: redirect-to-https
            AllowedMethods:
              - GET
              - HEAD
            CachedMethods:
              - GET
              - HEAD
            CachePolicyId: !Ref PublicAssetsCachePolicy
            OriginRequestPolicyId: !Ref OriginRequestPolicy
            Compress: true
        DefaultCacheBehavior:
          TargetOriginId: AppRunnerOrigin
          ViewerProtocolPolicy: redirect-to-https
          AllowedMethods:
            - DELETE
            - GET
            - HEAD
            - OPTIONS
            - PATCH
            - POST
            - PUT
          CachedMethods:
            - GET
            - HEAD
          CachePolicyId: !Ref DynamicContentCachePolicy
          OriginRequestPolicyId: !Ref OriginRequestPolicy
          ResponseHeadersPolicyId: !Ref SecurityHeadersPolicy
          Compress: true
        CustomErrorResponses:
          - ErrorCode: 503
            ResponseCode: 503
            ResponsePagePath: /503
            ErrorCachingMinTTL: 10
          - ErrorCode: 502
            ResponseCode: 502
            ResponsePagePath: /502
            ErrorCachingMinTTL: 10
      Tags:
        - Key: Environment
          Value: !Ref Environment
        - Key: Service
          Value: frontend-cdn
Outputs:
  CloudFrontDistributionId:
    Description: CloudFront Distribution ID
    Value: !Ref CloudFrontDistribution
    Export:
      Name: !Sub &apos;${AWS::StackName}-DistributionId&apos;
  CloudFrontDomainName:
    Description: CloudFront Distribution Domain Name
    Value: !GetAtt CloudFrontDistribution.DomainName
    Export:
      Name: !Sub &apos;${AWS::StackName}-DomainName&apos;
  CloudFrontURL:
    Description: Full CloudFront URL
    Value: !Sub &apos;https://${CloudFrontDistribution.DomainName}&apos;
  CustomDomainURL:
    Condition: UseCustomDomain
    Description: Custom Domain URL
    Value: !Sub &apos;https://${CustomDomainName}&apos;</file><file path="infra/INFRASTRUCTURE.md"># Infrastructure Guide

This document covers the infrastructure improvements for the AI Google Calendar Assistant.

## Table of Contents

1. [CloudFront CDN](#cloudfront-cdn)
2. [Docker Multi-Stage Builds](#docker-multi-stage-builds)
3. [Telegram Webhooks](#telegram-webhooks)
4. [Redis Optimization](#redis-optimization)
5. [Runtime Tuning](#runtime-tuning)
6. [AI Agent Warming](#ai-agent-warming)

---

## CloudFront CDN

### Why CloudFront?

App Runner is a compute service, not a CDN. Without CloudFront:
- Every request (including static assets) hits your App Runner container
- Higher compute costs (paying for CPU to serve images/JS/CSS)
- Slower load times (no edge caching)

With CloudFront:
- ~80% of traffic (static assets) served from edge cache
- 50-80% reduction in App Runner compute
- 2-10x faster load times for static assets globally

### Configuration

See [cloudfront/CLOUDFRONT_SETUP.md](./cloudfront/CLOUDFRONT_SETUP.md) for detailed setup instructions.

**Quick Start:**

```bash
cd infra/cloudfront

# Deploy CloudFront
aws cloudformation deploy \
  --template-file cloudfront-frontend.yaml \
  --stack-name askally-frontend-cdn \
  --parameter-overrides \
    AppRunnerDomain=&lt;your-app-runner-id&gt;.eu-central-1.awsapprunner.com \
    CustomDomainName=askally.io \
    AcmCertificateArn=&lt;your-cert-arn&gt; \
  --region eu-central-1
```

### Cache Behavior

| Content Type | Cache Duration | Notes |
|--------------|----------------|-------|
| `_next/static/*` | 1 year | Hashed, immutable files |
| Images, fonts | 1 day | Public assets |
| HTML, API | No cache | Dynamic content |

---

## Docker Multi-Stage Builds

### Why Multi-Stage?

- Smaller production images (only runtime dependencies)
- Faster deployments (better layer caching)
- Security (no build tools in production)
- Monorepo support (shared folder handling)

### Frontend Dockerfile

Location: `/fe/Dockerfile`

```dockerfile
# Build stage: Full Node.js with build tools
FROM node:22-slim AS builder
# ... install deps, build Next.js

# Production stage: Minimal runtime
FROM node:22-slim AS runner
# ... copy only standalone build + static assets
```

**Build Arguments:**
- `NEXT_PUBLIC_API_URL` - Backend API URL
- `NEXT_PUBLIC_SUPABASE_URL` - Supabase project URL
- `NEXT_PUBLIC_SUPABASE_ANON_KEY` - Supabase anon key
- `NEXT_PUBLIC_GOOGLE_CLIENT_ID` - Google OAuth client ID

**Build Command:**
```bash
docker build \
  --build-arg NEXT_PUBLIC_API_URL=https://api.askally.io \
  -t askally-frontend \
  ./fe
```

### Backend Dockerfile

Location: `/be/Dockerfile`

```dockerfile
# Dependencies stage: Install all deps
FROM node:22-slim AS deps
# ... install dependencies

# Build stage: Compile TypeScript
FROM node:22-slim AS builder
# ... build to /app/dist

# Production deps: Only production packages
FROM node:22-slim AS prod-deps
# ... pnpm install --prod

# Runtime: Minimal production image
FROM node:22-slim AS runner
# ... copy dist + prod node_modules
```

**Build Command:**
```bash
docker build -t askally-backend ./be
```

### Image Sizes (Approximate)

| Image | Without Multi-Stage | With Multi-Stage |
|-------|--------------------|--------------------|
| Frontend | ~1.2 GB | ~150 MB |
| Backend | ~800 MB | ~200 MB |

---

## Telegram Webhooks

### Why Webhooks over Polling?

**Problems with Long-Polling (bot.start()) in App Runner:**
- App Runner kills idle connections after timeout
- Auto-scaling creates duplicate bot instances ‚Üí double replies
- Higher latency (polling interval delay)

**Benefits of Webhooks:**
- No idle connection issues
- Single handler regardless of scaling
- Instant message delivery
- Lower resource usage

### Configuration

**Environment Variable:**
```env
TELEGRAM_BOT_ACCESS_TOKEN=your_bot_token
```

**Automatic Mode Selection:**
- Production (`NODE_ENV=production`) ‚Üí Webhook mode
- Development ‚Üí Long-polling mode

### Webhook Endpoint

**URL:** `POST /api/telegram/webhook`

**Health Check:** `GET /api/telegram/health`

### Verifying Webhook Setup

After deployment, check webhook status:

```bash
# Check webhook info from Telegram
curl https://api.telegram.org/bot&lt;YOUR_BOT_TOKEN&gt;/getWebhookInfo

# Check health endpoint
curl https://i3fzcpnmmk.eu-central-1.awsapprunner.com/api/telegram/health
```

Expected response:
```json
{
  &quot;status&quot;: &quot;healthy&quot;,
  &quot;mode&quot;: &quot;webhook&quot;
}
```

---

## Redis Optimization

### The 30MB Limit Problem

With Redis Cloud&apos;s free tier (30MB), large AI conversation contexts can fill up quickly.

### Solution 1: Eviction Policy (Redis Cloud Settings)

Configure `maxmemory-policy` in Redis Cloud dashboard:

1. Go to Redis Cloud ‚Üí Your Database ‚Üí Configuration
2. Set **Eviction Policy** to `allkeys-lru`
3. This ensures oldest keys are deleted when memory is full (instead of crashing)

**Recommended Policies:**
| Policy | Behavior |
|--------|----------|
| `allkeys-lru` | Evict least recently used keys (recommended) |
| `volatile-lru` | Evict LRU keys with TTL set |
| `noeviction` | Return error when full (not recommended) |

### Solution 2: Compression (Optional)

For larger payloads, use the compression utility:

```typescript
import { compressJSON, decompressJSON } from &quot;@/utils/compression&quot;

// Compress before storing (saves 50-70% for JSON &gt; 1KB)
const compressed = await compressJSON(largeContext)
await redis.set(key, compressed)

// Decompress when reading
const data = await redis.get(key)
const context = await decompressJSON(data)
```

**Note:** Current context store uses small objects (~200-500 bytes), so compression isn&apos;t needed yet. Use it if you store larger AI conversation histories.

### Solution 3: TTL Best Practices

Current TTLs in `unified-context-store.ts`:
- Event/Calendar references: 24 hours
- Conversation context: 2 hours
- User preferences: 24 hours

These short TTLs prevent stale data buildup.

---

## Runtime Tuning

### Node.js Memory Configuration

For App Runner containers with limited memory, configure V8 heap size:

**In Dockerfile or App Runner environment:**
```env
NODE_OPTIONS=--max-old-space-size=1536
```

This limits V8 heap to ~1.5GB for a 2GB container (leaving room for OS and other processes).

### Bun Runtime (Development)

If using Bun in development:

```env
BUN_JSC_forceRAMSize=1610612736  # ~1.5GB in bytes
```

**Note:** Production currently uses Node.js (`node dist/app.js`), not Bun.

### Container Memory Recommendations

| Container Memory | NODE_OPTIONS |
|------------------|--------------|
| 1 GB | `--max-old-space-size=768` |
| 2 GB | `--max-old-space-size=1536` |
| 4 GB | `--max-old-space-size=3072` |

Rule: Set to ~75-80% of container memory.

---

## AI Agent Warming

### Why Warm Agents?

OpenAI Agents SDK can have cold-start delays when:
- Initializing complex tool definitions
- Loading schema validators
- Setting up agent hierarchies

### Current Implementation (Already Optimized)

The codebase already follows best practices:

**1. Agents initialized at module load (global scope):**
```typescript
// be/ai-agents/agents.ts
export const ORCHESTRATOR_AGENT = new Agent({
  name: &quot;calendar_orchestrator_agent&quot;,
  // ... configuration
})
```

**2. Tools defined at import time:**
```typescript
// be/ai-agents/tool-registry.ts
export const DIRECT_TOOLS = {
  validate_user_direct: tool({ ... }),
  insert_event_direct: tool({ ... }),
}
```

**3. OpenAI key set on import:**
```typescript
// be/config/clients/openai.ts
export function initializeOpenAI(): void {
  setDefaultOpenAIKey(env.openAiApiKey)
}
initializeOpenAI() // Called immediately
```

### Verification

To verify agents are warm, check server startup logs:
```
Server successfully started on port 8080
Telegram Bot: Webhook set to https://...
```

If agents were cold-starting per request, you&apos;d see delays in the first few requests after deployment.

---

## Deployment Checklist

### Pre-Deployment

- [ ] Build Docker images locally and test
- [ ] Verify environment variables are set in App Runner
- [ ] Ensure ACM certificate is in us-east-1 (for CloudFront)

### CloudFront Setup

- [ ] Deploy CloudFormation stack
- [ ] Update DNS to point to CloudFront
- [ ] Verify cache hit ratios

### Redis Setup

- [ ] Set eviction policy to `allkeys-lru` in Redis Cloud
- [ ] Monitor memory usage in dashboard

### Telegram Webhook

- [ ] Deploy backend with `TELEGRAM_BOT_ACCESS_TOKEN`
- [ ] Verify webhook is registered: `getWebhookInfo`
- [ ] Test bot responses

### Post-Deployment

- [ ] Monitor CloudFront cache hit ratio (target: &gt;85%)
- [ ] Check Telegram webhook health endpoint
- [ ] Review App Runner compute metrics (should decrease)
- [ ] Monitor Redis memory usage</file><file path="AGENTS.md"># AI Google Calendar Assistant

**Generated:** 2026-01-08 | **Branch:** main

## Overview

AI-powered Google Calendar Assistant with **multi-modal architecture**. Supports three interaction modalities:

- **Chat** (web) - OpenAI Agents SDK via streaming
- **Voice** (real-time) - LiveKit Agents SDK + OpenAI Realtime API
- **Telegram** - OpenAI Agents SDK via Grammy bot

Monorepo: Express+Bun backend (`be/`), Next.js 15+React 19 frontend (`fe/`). All modalities share the same tool handlers and cross-modal context via Redis.

## Structure

```
.
‚îú‚îÄ‚îÄ be/                     # Express + Bun backend (port 3000)
‚îÇ   ‚îú‚îÄ‚îÄ ai-agents/          # OpenAI Agent framework
‚îÇ   ‚îú‚îÄ‚îÄ telegram-bot/       # Grammy bot
‚îÇ   ‚îú‚îÄ‚îÄ voice-sidecar/      # LiveKit Voice Agent (separate process)
‚îÇ   ‚îú‚îÄ‚îÄ shared/             # Cross-modal shared layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/          # Core interfaces (HandlerContext, AgentContext)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tools/          # Framework-agnostic tool definitions
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/   # Pure business logic (email ‚Üí calendar ops)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/    # Zod schemas for tool parameters
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tool-executor.ts  # Provider-agnostic tool execution
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adapters/       # SDK-specific wrappers
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai-adapter.ts   # Wraps for @openai/agents
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ livekit-adapter.ts  # Wraps for @livekit/agents
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ context/        # Cross-modal context store (Redis)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orchestrator/   # Agent profile management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prompts/        # Shared prompt templates
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ llm/            # Multi-provider LLM abstraction
‚îÇ   ‚îú‚îÄ‚îÄ controllers/        # Route handlers (one per resource)
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/        # Auth, validation, rate limiting
‚îÇ   ‚îú‚îÄ‚îÄ routes/             # API endpoint definitions
‚îÇ   ‚îú‚îÄ‚îÄ utils/              # Calendar, auth, AI, HTTP utilities
‚îÇ   ‚îú‚îÄ‚îÄ config/             # Env, constants, external clients
‚îÇ   ‚îî‚îÄ‚îÄ services/           # Business logic services
‚îú‚îÄ‚îÄ fe/                     # Next.js 15 frontend (port 4000)
‚îÇ   ‚îú‚îÄ‚îÄ app/                # App Router pages
‚îÇ   ‚îú‚îÄ‚îÄ components/         # React components (shadcn/ui)
‚îÇ   ‚îú‚îÄ‚îÄ hooks/              # React hooks + TanStack Query
‚îÇ   ‚îî‚îÄ‚îÄ contexts/           # Auth, Chat, Dashboard state
‚îî‚îÄ‚îÄ AGENTS.md               # This file
```

---

## Backend Architecture (be/)

### Shared Layer (`be/shared/`)

The shared layer provides cross-modal functionality used by chat, voice, and telegram modalities.

#### Types (`shared/types/index.ts`)

| Type | Purpose |
|------|---------|
| `HandlerContext` | Context for tool handlers: `{ email: string }` |
| `AgentContext` | Context for OpenAI Agents SDK tools |
| `ProjectionMode` | Event data projection: `VOICE_LITE`, `CHAT_STANDARD`, `FULL` |
| `Modality` | Interaction channel: `chat`, `voice`, `telegram`, `api` |
| `ConflictingEvent` | Calendar event that conflicts with proposed time |
| `ConflictCheckResult` | Result of conflict checking operations |

| Function | Purpose |
|----------|---------|
| `stringifyError(error)` | Converts any error to user-friendly string |
| `categorizeError(error)` | Categorizes errors as `auth`, `database`, or `other` |

#### Tool Handlers (`shared/tools/handlers/`)

Pure business logic functions. Framework-agnostic, testable, reusable across modalities.

**Event Handlers** (`event-handlers.ts`):
| Function | Purpose |
|----------|---------|
| `getEventHandler(params, ctx)` | Retrieve events by time range, keywords, calendar |
| `insertEventHandler(params, ctx)` | Create new calendar event |
| `updateEventHandler(params, ctx)` | Update existing event fields |
| `deleteEventHandler(params, ctx)` | Delete event by ID |

**Direct Handlers** (`direct-handlers.ts`):
| Function | Purpose |
|----------|---------|
| `validateUserHandler(ctx)` | Check if user exists in database |
| `getTimezoneHandler(ctx)` | Get user&apos;s timezone (DB or Google Calendar) |
| `selectCalendarHandler(params, ctx)` | AI-powered calendar selection for event |
| `checkConflictsHandler(params, ctx)` | Check for conflicting events in time range |
| `preCreateValidationHandler(params, ctx)` | Combined validation: user + timezone + calendar + conflicts |
| `getCalendarCategoriesByEmail(email)` | Get user&apos;s synced calendars |

**Gap Handlers** (`gap-handlers.ts`):
| Function | Purpose |
|----------|---------|
| `analyzeGapsHandler(params, ctx)` | Find untracked time gaps in calendar |
| `fillGapHandler(params, ctx)` | Create event to fill a gap |
| `formatGapsHandler(params)` | Format gaps for display |

#### Tool Executor (`shared/tools/tool-executor.ts`)

Provider-agnostic tool execution for non-OpenAI providers (Gemini, Claude).

| Function | Purpose |
|----------|---------|
| `executeTool(toolCall, ctx)` | Execute single tool, return result |
| `executeTools(toolCalls, ctx)` | Execute multiple tools in parallel |
| `getAvailableToolNames()` | List all registered tool names |
| `isToolAvailable(name)` | Check if tool is registered |

#### Adapters (`shared/adapters/`)

SDK-specific wrappers that adapt handlers for specific frameworks.

**OpenAI Adapter** (`openai-adapter.ts`):
| Export | Purpose |
|--------|---------|
| `EVENT_TOOLS` | get_event, insert_event, update_event, delete_event |
| `VALIDATION_TOOLS` | validate_user, get_timezone, select_calendar, check_conflicts, pre_create_validation |
| `GAP_TOOLS` | analyze_gaps, fill_gap, format_gaps_display |
| `SHARED_TOOLS` | All tools combined |
| `getEmailFromContext(runContext, toolName)` | Extract email from RunContext |

**LiveKit Adapter** (`livekit-adapter.ts`):
| Export | Purpose |
|--------|---------|
| `LIVEKIT_TOOL_DEFINITIONS` | Tool definitions for LiveKit Agents SDK |
| `getLiveKitToolByName(name)` | Get specific tool definition |
| `getAllLiveKitTools()` | Get all LiveKit tool definitions |

#### Context Store (`shared/context/`)

Redis-backed cross-modal state persistence.

**Unified Context Store** (`unified-context-store.ts`):
| Method | Purpose |
|--------|---------|
| `setLastEvent(userId, event, modality)` | Store last referenced event |
| `getLastEvent(userId)` | Retrieve last event for pronoun resolution |
| `setLastCalendar(userId, calendar, modality)` | Store last referenced calendar |
| `getLastCalendar(userId)` | Retrieve last calendar |
| `setConversation(userId, context)` | Store conversation state |
| `getConversation(userId)` | Retrieve conversation context |
| `setModality(userId, modality)` | Track current interaction channel |
| `getSnapshot(userId)` | Get full context snapshot |
| `touch(userId)` | Refresh all TTLs |

**Entity Tracker** (`entity-tracker.ts`):
| Method | Purpose |
|--------|---------|
| `trackEvent(userId, event)` | Track event for &quot;it&quot;, &quot;that meeting&quot; resolution |
| `trackCalendar(userId, calendar)` | Track calendar for &quot;there&quot; resolution |
| `resolveEventReference(userId, ref)` | Resolve pronoun to actual event |

#### Orchestrator (`shared/orchestrator/`)

Agent profile management and factory functions.

**Agent Profiles** (`agent-profiles.ts`):
| Export | Purpose |
|--------|---------|
| `AGENT_PROFILES` | Map of profile ID to configuration |
| `getAgentProfile(id)` | Get profile by ID |
| `getProfilesForTier(tier)` | Get profiles for subscription tier |
| `getRealtimeProfiles()` | Get voice-capable profiles |

**Model Registry** (`model-registry.ts`):
| Export | Purpose |
|--------|---------|
| `getModelSpec(provider, tier)` | Get model specification |
| `getRealtimeModelId(provider)` | Get realtime model ID |
| `isRealtimeSupported(provider)` | Check if provider supports realtime |

**Orchestrator Factory** (`orchestrator-factory.ts`):
| Function | Purpose |
|----------|---------|
| `createVoiceAgent(options)` | Create voice agent with profile |
| `formatProfileForClient(profile)` | Format profile for API response |

**Text Agent Factory** (`text-agent-factory.ts`):
| Function | Purpose |
|----------|---------|
| `createTextAgent(options)` | Create text agent with profile |
| `runTextAgent(options)` | Run text agent and stream response |
| `supportsTools(provider)` | Check if provider supports tools |

#### LLM Abstraction (`shared/llm/`)

Multi-provider LLM interface.

| Function | Purpose |
|----------|---------|
| `createProviderFromProfile(profile)` | Create LLM provider from agent profile |
| `createOpenAIProvider(config)` | Create OpenAI provider |
| `createGoogleProvider(config)` | Create Google Gemini provider |
| `createAnthropicProvider(config)` | Create Anthropic Claude provider |

#### Prompts (`shared/prompts/`)

Shared prompt templates and builders.

| Export | Purpose |
|--------|---------|
| `CORE_IDENTITY` | Agent identity prompt segment |
| `CORE_CAPABILITIES` | Capability description segment |
| `CORE_BEHAVIOR` | Behavioral guidelines segment |
| `AUTH_CONTEXT` | Authentication context segment |
| `INTENT_RECOGNITION` | Intent parsing guidelines |
| `TIME_INFERENCE` | Time/date parsing guidelines |
| `ERROR_HANDLING` | Error response guidelines |
| `RESPONSE_STYLE` | Response formatting guidelines |
| `buildBasePrompt()` | Build complete base prompt |
| `buildOrchestratorPrompt()` | Build orchestrator-specific prompt |

---

### AI Agents (`be/ai-agents/`)

OpenAI Agents SDK implementation.

#### Tool Registry (`tool-registry.ts`)

| Export | Purpose |
|--------|---------|
| `AGENT_TOOLS` | Tools that use AI agents for complex operations |
| `DIRECT_TOOLS` | Tools that bypass agents for faster execution |

**AGENT_TOOLS**: `generate_google_auth_url`, `register_user_via_db`, `get_event`, `update_event`, `delete_event`

**DIRECT_TOOLS**: `validate_user_direct`, `get_timezone_direct`, `select_calendar_direct`, `check_conflicts_direct`, `pre_create_validation`, `insert_event_direct`, `get_event_direct`, `summarize_events`, `analyze_gaps_direct`, `fill_gap_direct`, `format_gaps_display`, `check_conflicts_all_calendars`, `set_event_reminders`, `get_calendar_default_reminders`, `update_calendar_default_reminders`, `get_user_reminder_preferences`, `update_user_reminder_preferences`

#### Direct Utilities (`direct-utilities.ts`)

Wrapper functions that call shared handlers with email-based context.

| Function | Purpose |
|----------|---------|
| `validateUserDirect(email)` | Validate user exists |
| `getUserDefaultTimezoneDirect(email)` | Get user timezone |
| `selectCalendarByRules(email, eventInfo)` | AI calendar selection |
| `checkConflictsDirect(params)` | Check event conflicts |
| `preCreateValidation(email, eventData)` | Combined pre-creation checks |
| `validateEventDataDirect(eventData)` | Validate event data format |
| `summarizeEvents(events)` | AI-powered event summarization |

#### Agents (`agents.ts`)

Agent definitions using OpenAI Agents SDK.

| Export | Purpose |
|--------|---------|
| `AGENTS` | Map of specialized agents |
| `HANDOFF_AGENTS` | Agents for handoff operations |
| `ORCHESTRATOR_AGENT` | Main orchestrating agent |

#### Sessions (`sessions/`)

Session management for agent conversations.

| Export | Purpose |
|--------|---------|
| `SupabaseAgentSession` | Session backed by Supabase |
| `createAgentSession(options)` | Create new session |
| `getSessionInfo(sessionId)` | Get session metadata |

---

### Utilities (`be/utils/`)

#### Calendar (`utils/calendar/`)

| Function | Purpose |
|----------|---------|
| `initUserSupabaseCalendarWithTokensAndUpdateTokens(tokenProps)` | Initialize calendar client with auto-refresh |
| `refreshAccessToken(credentials)` | Refresh Google access token |
| `createCalendarClient(auth)` | Create Google Calendar client |
| `checkEventConflicts(params)` | Check conflicts in single calendar |
| `checkEventConflictsAllCalendars(params)` | Check conflicts across all calendars |
| `getEventDurationString(event)` | Format event duration |
| `eventsHandler(req, action, eventData, extra)` | CRUD operations dispatcher |
| `analyzeGaps(email, options)` | Find calendar gaps |
| `analyzeGapsForUser(params)` | User-specific gap analysis |
| `fillGap(params)` | Create event in gap |
| `formatGapsForDisplay(gaps)` | Format gaps for UI |
| `getUserReminderPreferences(userId)` | Get reminder settings |
| `saveUserReminderPreferences(userId, prefs)` | Save reminder settings |
| `getCalendarDefaultReminders(email, calendarId)` | Get calendar default reminders |
| `updateCalendarDefaultReminders(email, calendarId, reminders)` | Update calendar reminders |
| `updateEventReminders(email, calendarId, eventId, reminders)` | Update event reminders |
| `resolveRemindersForEvent(prefs, calendarDefaults)` | Resolve which reminders to apply |
| `getUserIdByEmail(email)` | Get user ID from email |

#### Auth (`utils/auth/`)

| Function | Purpose |
|----------|---------|
| `generateGoogleAuthUrl(email)` | Generate OAuth URL |
| `checkTokenExpiry(tokens)` | Check if tokens need refresh |
| `fetchGoogleTokensByEmail(email)` | Get stored Google tokens |
| `refreshGoogleAccessToken(refreshToken)` | Refresh access token |
| `persistGoogleTokens(email, tokens)` | Store tokens in database |
| `deactivateGoogleTokens(email)` | Revoke tokens |
| `validateSupabaseToken(token)` | Validate Supabase JWT |
| `refreshSupabaseSession(refreshToken)` | Refresh Supabase session |
| `setSupabaseSession(accessToken, refreshToken)` | Set Supabase session |
| `fetchCredentialsByEmail(email)` | Get full credentials object |
| `supabaseThirdPartySignInOrSignUp(provider, token)` | Third-party auth |
| `updateUserSupabaseTokens(email, tokens)` | Update stored tokens |

#### HTTP (`utils/http/`)

| Function | Purpose |
|----------|---------|
| `asyncHandler(fn)` | Wrap async route handler |
| `reqResAsyncHandler(fn)` | Wrap async with req/res |
| `createHttpError(status, message)` | Create HTTP error |
| `sendErrorResponse(res, error)` | Send error response |
| `throwHttpError(status, message)` | Throw HTTP error |
| `sendR(res, status, message, data)` | Standard response helper |

---

### Controllers (`be/controllers/`)

| Controller | Purpose |
|------------|---------|
| `chat-controller.ts` | Non-streaming chat endpoint |
| `chat-stream-controller.ts` | Streaming chat with SSE |
| `agent-profiles-controller.ts` | Agent profile CRUD |
| `voice-controller.ts` | LiveKit token generation |
| `payment-controller.ts` | Lemon Squeezy subscription handling |
| `user-preferences-controller.ts` | User settings CRUD |
| `contact-controller.ts` | Contact form submission |
| `whatsapp-controller.ts` | WhatsApp integration |
| `google-calendar/` | Calendar-specific endpoints |
| `users/` | User management endpoints |

---

### Middlewares (`be/middlewares/`)

| Middleware | Purpose |
|------------|---------|
| `auth-handler.ts` | JWT authentication |
| `supabase-auth.ts` | Supabase session validation |
| `google-token-validation.ts` | Validate Google tokens |
| `google-token-refresh.ts` | Auto-refresh expired tokens |
| `calendar-client.ts` | Attach calendar client to request |
| `validation.ts` | Request body/params validation |
| `rate-limiter.ts` | Rate limiting |
| `error-handler.ts` | Global error handling |
| `security-audit.ts` | Security logging |

---

### Configuration (`be/config/`)

#### Environment (`env.ts`)

| Export | Purpose |
|--------|---------|
| `env` | Validated environment variables |
| `REDIRECT_URI` | OAuth callback URL |

#### Clients (`clients/`)

| Export | Purpose |
|--------|---------|
| `SUPABASE` | Supabase client instance |
| `OAUTH2CLIENT` | Google OAuth2 client |
| `CALENDAR` | Google Calendar API instance |
| `initializeOpenAI()` | Initialize OpenAI client |
| `redisClient` | Redis client instance |
| `isRedisConnected()` | Check Redis connection |
| `disconnectRedis()` | Close Redis connection |
| `initializeLemonSqueezy()` | Initialize Lemon Squeezy client |
| `isLemonSqueezyEnabled()` | Check if Lemon Squeezy is configured |
| `LEMONSQUEEZY_CONFIG` | Lemon Squeezy configuration |

#### Constants (`constants/`)

| Export | Purpose |
|--------|---------|
| `GOOGLE_CALENDAR_SCOPES` | Required OAuth scopes |
| `MODELS` | AI model identifiers |
| `CURRENT_MODEL` | Default model |
| `TIMEZONE` | Default timezone |
| `STATUS_RESPONSE` | HTTP status codes |
| `ROUTES` | API route paths |
| `ACTION` | Calendar action types |

---

## Where to Look

| Task | Location | Notes |
|------|----------|-------|
| Add API endpoint | `be/routes/` + `be/controllers/` | One controller per resource |
| Add AI tool | `be/ai-agents/tool-registry.ts` | Register in AGENT_TOOLS or DIRECT_TOOLS |
| Add tool handler | `be/shared/tools/handlers/` | Pure function, add to index.ts |
| Add agent | `be/ai-agents/agents.ts` | Choose FAST/MEDIUM/CURRENT model tier |
| Add middleware | `be/middlewares/` | Apply in route file |
| Frontend component | `fe/components/` | Use shadcn/ui primitives |
| Data fetching | `fe/hooks/queries/` | TanStack Query wrapper |
| Telegram command | `be/telegram-bot/utils/commands.ts` | Grammy middleware chain |

---

## Conventions

### Backend (Express + Bun)

- **No semicolons**, double quotes, 80 char line width (Biome + ultracite)
- **Path alias**: `@/*` ‚Üí `be/*` (use for all imports)
- **Module system**: CommonJS (`&quot;type&quot;: &quot;commonjs&quot;`)
- **Error handling**: Wrap routes with `reqResAsyncHandler`, respond via `sendR(res, status, message, data)`
- **Response format**: `{ status: &quot;success&quot;|&quot;error&quot;, message, data }`

### Frontend (Next.js 15)

- **No semicolons**, single quotes, 120 char print width (Prettier)
- **Path alias**: `@/*` ‚Üí `fe/*`
- **Components**: Functional + TypeScript, named exports, `&apos;use client&apos;` for client components
- **State**: React Context (global) + TanStack Query (server) + useState (local)

### Shared

- **Files**: kebab-case (`events-controller.ts`, `date-range-picker.tsx`)
- **Types**: `import type { X }` for type-only imports
- **Tests**: `be/tests/` mirroring source structure, Jest with `@jest/globals`

---

## Anti-Patterns

| Forbidden | Why |
|-----------|-----|
| `as any`, `@ts-ignore`, `@ts-expect-error` | Never suppress type errors |
| Relative imports in backend | Use `@/` alias always |
| `export default` for components | Use named exports |
| Empty catch blocks | Handle or rethrow errors |
| Hardcoded config values | Use `@/config` constants |
| `useState` for data fetching loading states | Use TanStack Query&apos;s built-in `isLoading` |
| `useEffect` + `useState` for API calls | Use `useQuery`/`useQueries` hooks instead |

### Loading State Pattern (Frontend)

**NEVER** use manual loading state for data fetching:
```typescript
// BAD - manual loading state
const [isLoading, setIsLoading] = useState(true)
const [data, setData] = useState(null)
useEffect(() =&gt; {
  fetchData().then(setData).finally(() =&gt; setIsLoading(false))
}, [])

// GOOD - TanStack Query handles loading
const { data, isLoading } = useQuery({
  queryKey: [&apos;data&apos;],
  queryFn: fetchData,
  enabled: hasPreviousSession(), // conditional fetching
})
```

**When `useState` for loading IS acceptable:**
- UI-only states (redirects via `window.location.href`)
- Asset loading (3D models, images)
- Form submission that redirects (no data return)
- Simulated delays / animations

---

## Commands

```bash
# Backend (be/)
bun --watch app.ts          # Dev server
bun run jest                # Tests
npx ultracite check         # Lint check
npx biome fix --write .     # Format

# Frontend (fe/)
npm run dev                 # Dev server (port 4000)
npm run build               # Production build
npm run lint                # ESLint
npm run format              # Prettier
```

---

## AI Agent Model Tiers

| Tier | Model | Use Case |
|------|-------|----------|
| `FAST_MODEL` | GPT-4-1-NANO | Simple tool-calling (cheap, fast) |
| `MEDIUM_MODEL` | GPT-4-1-MINI | Multi-tool orchestration |
| `CURRENT_MODEL` | GPT-5-MINI | Complex reasoning, NLP parsing |

---

## External Services

| Service | Purpose | Config Location |
|---------|---------|-----------------|
| Supabase | PostgreSQL + Auth + RLS | `be/config/clients/` |
| Google Calendar API | Events, calendars, OAuth | `be/utils/calendar/` |
| OpenAI | Agent orchestration | `be/ai-agents/` |
| LiveKit | Real-time voice rooms | `be/voice-sidecar/` |
| Lemon Squeezy | Payments (subscription) | `be/services/lemonsqueezy-service.ts` |
| Redis | Cross-modal context store | `be/shared/context/` |

---

## Agent Profiles

| Profile ID | Display Name | Tier | Realtime | Provider |
|------------|--------------|------|----------|----------|
| `ally-lite` | Ally Lite | free | No | OpenAI |
| `ally-pro` | Ally Pro | pro | Yes | OpenAI |
| `ally-flash` | Ally Flash | pro | Yes | OpenAI |
| `ally-executive` | Ally Executive | enterprise | Yes | OpenAI |
| `ally-gemini` | Ally Gemini | pro | No | Google |
| `ally-claude` | Ally Claude | pro | No | Anthropic |

---

## Notes

- **Database types**: Run `npm run update:db:types` in both `be/` and `fe/` after schema changes
- **Auth flow**: Supabase JWT ‚Üí Google token validation ‚Üí Auto-refresh middleware
- **Telegram**: Uses Grammy v1.38, i18n for Hebrew/English, RTL text handling
- **Large files (&gt;500 lines)**: `database.types.ts` (generated), `commands.ts`, `gap-recovery.ts`</file><file path="CHANGELOG.md"># Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

---

## [1.0.139] - 2026-01-12

### Week of January 6-12, 2026

#### Features

- **Security**: Implement Google RISC (Cross-Account Protection) endpoint (`86045ca`)
- **Infrastructure**: Add CloudFront CDN, multi-stage Docker builds, and Telegram webhooks (`08b1316`)
- **Performance**: Add Redis compression, runtime tuning, and performance docs (`396da5b`)
- **Frontend**: Hardcode backend URL based on hostname detection (`eaac6c5`)
- **Security**: Implement HTML sanitization and input validation utilities (`4b083a9`)
- **Calendar**: Enhance alias resolution and search strategy in event handling (`1de354a`)
- **Media**: Add image viewing lightbox and database storage (`69adf8b`)
- **Web**: Add image upload support to web chat UI (`08cc512`)
- **Telegram**: Add image upload support with AI vision (`98c6e31`)
- **UX**: Add typing indicator while processing Telegram requests (`4a8dde3`)
- **Frontend**: Integrate RescheduleDialog into EventDetailsDialog (`2ea1d18`)
- **i18n**: Add reschedule translations to all Telegram locales (`32df467`)
- **Calendar**: Add Google Meet auto-add for event creation (`a94e839`)
- **Calendar**: Add smart reschedule feature for both Telegram and web (`386a981`)
- **Frontend**: Enhance feature showcase with all Telegram bot features (`733e65d`)
- **Frontend**: Add auto-carousel feature showcase on homepage (`658cade`)
- **Frontend**: Add Telegram bot CTA to homepage and footer (`96c4250`)
- **Telegram**: Add /website command to navigate to web dashboard (`b43714c`)
- **Frontend**: Implement suspense loading state in dashboard layout (`fab2288`)
- **Analytics**: Add calendar filtering functionality to analytics dashboard (`f9c7813`)
- **Billing**: Add confirmation dialogs for subscription cancellation and refund requests (`b59c9f7`)
- **Billing**: Enhance billing overview with subscription lifecycle events (`887e444`)
- **Backend**: Add cron route and controller for daily briefings (`05cf839`)
- **Billing**: Enhance subscription management with LemonSqueezy integration (`57858d4`)
- **User**: Implement daily briefing feature for user preferences (`a50ac58`)
- **Database**: Add whatsapp_users table to database schema (`a393281`)
- **Messaging**: Integrate WhatsApp Cloud API for enhanced messaging capabilities (`e119d6f`)
- **Chat**: Add conversation management and memory reset functionalities (`f5b2c7f`)
- **Admin**: Implement admin user info retrieval and enhance pagination utilities (`66b35ca`)
- **Admin**: Implement admin dashboard and user management features (`484b3be`)
- **Billing**: Migrate from Stripe to Lemon Squeezy for subscription management (`88a4dbd`)
- **Agent**: Enhance agent management and UI components (`6a1c9e4`)
- **Calendar**: Enhance calendar integration and improve event handling (`1e66ce8`)
- **Docker**: Enhance Docker setup and update agent configuration (`f74ebb4`)
- **Agent**: Implement agent profile management and enhance chat functionality (`c8599dd`)
- **Voice**: Enhance voice interaction capabilities and agent profile management (`23a30f8`)
- **Voice**: Add repeat last response functionality as text and voice (`bc2727e`)
- **3D**: Update AllyCharacter component and integrate 3D model (`e7bb47c`)
- **3D**: Add 3D character components and animations for Ally (`dc2de59`)
- **Voice**: Integrate TTS caching and enhance voice preview functionality (`4161b45`)
- **Voice**: Implement voice preference settings and text-to-speech functionality (`8162d22`)
- **Calendar**: Implement reminder management features for calendar events (`5fa9cde`)
- **i18n**: Enhance localization and error handling in various components (`02b5406`)
- **i18n**: Enhance localization across multiple components (`1bda5f2`)
- **Chat**: Enhance chat streaming functionality and title generation support (`76cc3a0`)
- **Agent**: Enhance agent handler and prompt localization support (`db88f44`)
- **Calendar**: Implement conflict detection for event updates across all calendars (`c425e1c`)
- **UI**: Replace button elements with Button component in analytics and marketing sections (`c631277`)
- **Chat**: Implement streaming chat functionality and enhance chat components (`fa04285`)
- **i18n**: Enhance localization in EventDurationDashboard component (`46c4719`)
- **i18n**: Enhance localization in dashboard components (`ecccb9f`, `d68a713`, `32d58e6`)
- **API**: Add new conversation endpoint and enhance localization in dashboard components (`245d192`)
- **Chat**: Add start new conversation functionality and enhance chat service (`4a2d17a`)
- **Chat**: Enhance chat functionality and localization support (`8c78736`)
- **Analytics**: Enhance analytics dashboard with monthly and weekly pattern charts (`2128813`)
- **Telegram**: Enhance Telegram bot functionality and configuration (`9436c70`)
- **Dev**: Update ESLint configuration and refactor QuickEventDialog component (`45a8bdf`)
- **Backend**: Integrate date-fns library and refactor user controllers (`0414cfa`)
- **Calendar**: Enhance Google Calendar integration and user management (`1696883`)
- **Docs**: Restructure documentation and introduce AI agents and Telegram bot modules (`53b055f`)
- **Calendar**: Refactor quick add event functionality and introduce orchestrator for event creation (`b8338fc`)
- **Voice**: Add voice transcription feature and related routes (`bf8b169`)
- **Contact**: Add contact form and webhook handling for user inquiries (`9a08f5b`)
- **Telegram**: Implement brain feature for user preferences in Telegram bot (`63cfd92`)
- **Database**: Update database types and relationships for improved structure and clarity (`5ea9038`)
- **i18n**: Enhance language support and user settings in gap recovery (`c6db544`)
- **Types**: Enhance gap recovery types and improve code formatting (`3898f2f`)
- **Callback**: Enhance callback handling for pending plans in user flow (`41a8460`)
- **Deps**: Update package dependencies and modify start script (`35f6043`)

#### Bug Fixes

- **Mobile**: Add mobile hamburger menu button for sidebar access (`1cb4360`)
- **CSP**: Add AWS App Runner backend URL to CSP connect-src directive (`f4cdaeb`)
- **Env**: Use port-based environment detection instead of NODE_ENV (`434f57a`)
- **URL**: Remove trailing slash from baseUrl to prevent double slashes in webhook URL (`79e1c00`)
- **Port**: Use port 8080 in production, 3000 in development (`d17e447`)
- **Logging**: Use console logging only in production for AWS App Runner (`2ec6fab`)
- **Build**: Resolve frontend build failures on AWS App Runner (`ebd5aff`)
- **Deps**: Add missing dependencies and apprunner.yaml for BE deployment (`eb99b92`)
- **Types**: Pin uuid@9 with @types/uuid@9 to fix TypeScript build (`066bef4`)
- **Deploy**: App Runner configs for BE and FE deployments (`f5317d3`)
- **OAuth**: Strip trailing slashes from BASE_URL and FRONTEND_URL (`4051d85`)
- **OAuth**: Add production warnings for missing BASE_URL in OAuth config (`c8e85e4`)
- **Build**: Configure TypeScript build for App Runner deployment (`fbaa26f`)
- **Analytics**: Standardize time unit formatting in analytics components (`611b792`)
- **Encoding**: Update text encoding for consistency across components (`8848951`)
- **3D**: Remove color export option in ally animations setup (`c0af66e`)

#### Refactoring

- **Telegram**: Remove TELEGRAM_WEBHOOK_SECRET - simplify webhook setup (`1d1ae0a`)
- **Telegram**: Make TELEGRAM_WEBHOOK_SECRET optional but recommended (`5bd4ac6`)
- **UUID**: Replace uuid with Node.js crypto.randomUUID() (`20aa575`)
- **Config**: Update environment variable management and configuration structure (`cd4bed3`)
- **Meet**: Use Date.now() for Google Meet requestId instead of uuid (`8ce6592`)
- **Conversation**: Update conversation message handling and improve logging (`1eb68ac`)
- **Schema**: Simplify database schema and remove gap recovery features (`a73fd70`)
- **Config**: Remove Lemon Squeezy products guide and update environment configurations (`98a8e5d`)
- **Docker**: Update Dockerfile and .dockerignore for improved build efficiency (`8349db8`)
- **Auth**: Update authentication flow and integrate user service (`58d145e`)
- **Imports**: Standardize imports and enhance code readability in conversation services (`c828dc8`)
- **Chat**: Improve chat message handling and enhance localization in dashboard components (`600d535`)
- **Chat**: Streamline chat controller and enhance chat input components (`022bf38`)
- **Analytics**: Enhance analytics dashboard components and improve user interaction (`e6e2891`)
- **Analytics**: Improve event handling and UI components in analytics dashboard (`f95ae6d`)
- **Analytics**: Update analytics dashboard styles and configuration (`1a03626`)
- **Analytics**: Enhance analytics dashboard and improve number formatting (`844c292`)
- **User**: Update user preferences and enhance analytics dashboard (`0945563`)

#### Documentation

- **Utils**: Add comprehensive JSDoc docstrings to all utility functions (`3374fbe`)
- **README**: Comprehensive README updates for root, backend, and frontend (`2095f41`)
- **Env**: Simplify .env.example to show only required env vars (`1918a53`)
- **Backend**: Clarify NEXT_PUBLIC_BACKEND_URL is critical for production (`5b45ec0`)
- **Legal**: Update privacy policy and terms with complete Google OAuth scopes and WhatsApp integration (`6273872`)
- **README**: Update README and environment files for enhanced features and integrations (`d848175`)

#### Chores

- **LiveKit**: Remove LiveKit integration and related configurations (`95758cd`)
- **Env**: Refine environment configuration and update production URLs (`d06042c`)
- **URLs**: Update URLs and contact information across the application (`ea5c463`)
- **CSP**: Update environment variable loading logic and enhance CSP configuration (`cd37f39`)
- **Types**: Update route import path in next-env.d.ts to development types directory (`c0e7764`)
- **Deps**: Update dependencies in bun.lock and adjust route import in next-env.d.ts (`0523ce3`)
- **Build**: Update auto-generated files from build (`b336798`)
- **Env**: Simplify .env.example to required values only (`bfddd98`)
- **Env**: Update environment variable configurations for backend and frontend (`e3c3f98`)

---

## Summary Statistics

| Category | Count |
|----------|-------|
| Total Commits | 139 |
| Features | 70+ |
| Bug Fixes | 16 |
| Refactoring | 17 |
| Documentation | 6 |
| Chores | 9 |

### Key Highlights

1. **Google RISC Integration** - Added Cross-Account Protection for enhanced security
2. **CloudFront CDN** - Improved performance with CDN and multi-stage Docker builds
3. **WhatsApp Integration** - Full WhatsApp Cloud API support for messaging
4. **LemonSqueezy Migration** - Moved from Stripe to LemonSqueezy for subscriptions
5. **Image Upload Support** - AI vision capabilities for both Telegram and web
6. **Smart Rescheduling** - Intelligent event rescheduling across platforms
7. **Voice Features** - TTS, voice preferences, and transcription capabilities
8. **3D Character** - Ally 3D character with animations
9. **Admin Dashboard** - Full admin panel with user management
10. **Analytics** - Enhanced dashboards with weekly/monthly pattern charts

---

*Generated on 2026-01-12*</file><file path="README.md"># AI Google Calendar Assistant

&gt; **Ask Ally** - An intelligent, AI-powered calendar management platform that transforms natural language into structured Google Calendar events across multiple interfaces (Web, Voice, Telegram, WhatsApp).

[![TypeScript](https://img.shields.io/badge/TypeScript-5.9+-blue.svg)](https://www.typescriptlang.org/)
[![Next.js](https://img.shields.io/badge/Next.js-16.1.1-black.svg)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.1.0-blue.svg)](https://reactjs.org/)
[![Express](https://img.shields.io/badge/Express-5.1.0-green.svg)](https://expressjs.com/)
[![Bun](https://img.shields.io/badge/Bun-Runtime-orange.svg)](https://bun.sh/)
[![OpenAI Agents](https://img.shields.io/badge/OpenAI-Agents_v0.3.7-412991.svg)](https://openai.com/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

---

## Table of Contents

- [Overview](#overview)
- [Key Features](#key-features)
- [System Architecture](#system-architecture)
- [Multi-Modal Architecture](#multi-modal-architecture)
- [Project Structure](#project-structure)
- [Tech Stack](#tech-stack)
- [Getting Started](#getting-started)
- [API Reference](#api-reference)
- [Security Architecture](#security-architecture)
- [Deployment](#deployment)
- [Development](#development)
- [Documentation](#documentation)
- [Roadmap](#roadmap)
- [Contributing](#contributing)
- [License](#license)

---

## Overview

AI Google Calendar Assistant (Ask Ally) is a sophisticated calendar automation platform that leverages cutting-edge AI agents to provide intelligent calendar management through natural language processing. Built with a modern tech stack and designed for scalability as a multi-tenant SaaS product.

### Why Ask Ally?

- **Natural Conversations**: Talk to your calendar like you talk to a friend. Say &quot;Schedule a meeting with John tomorrow at 2pm&quot; and it&apos;s done.
- **Multi-Platform**: Access from web chat, voice commands, Telegram bot, or WhatsApp.
- **Smart Insights**: AI-powered analytics reveal patterns in your schedule and suggest improvements.
- **Gap Recovery**: Automatically detects untracked time and helps you remember what you did.

---

## Key Features

### Core Capabilities

| Feature | Description |
|---------|-------------|
| **Multi-Agent AI System** | OpenAI Agents framework with specialized agents for calendar operations |
| **Natural Language Processing** | Convert free-text to structured calendar events with smart parsing |
| **Multi-Platform Support** | Web dashboard, Voice input, Telegram bot, WhatsApp integration |
| **Real-time Streaming** | Server-Sent Events (SSE) for live chat responses with typewriter effect |
| **Gap Recovery** | AI-powered detection and filling of untracked calendar gaps |
| **Voice Input** | Speech-to-text via browser API and LiveKit for hands-free calendar management |
| **Analytics Dashboard** | Calendar insights with 12+ interactive visualizations |
| **Multi-language** | i18n support (English, Hebrew, Arabic, German, French, Russian) with RTL |
| **SaaS-Ready** | Multi-tenant architecture with Lemon Squeezy payment integration |

### Web Dashboard Features

| Feature | Description |
|---------|-------------|
| **AI Chat Interface** | Natural language calendar management with streaming responses |
| **Multiple View Modes** | Chat view, Avatar view, and 3D wall calendar visualization |
| **Conversation History** | Persistent conversations with AI-generated titles |
| **Dark/Light Theme** | System-aware theme switching with cinematic glow toggle |
| **Google OAuth** | Secure calendar integration with automatic token refresh |
| **Quick Event Dialog** | Fast event creation with preview |
| **Billing Dashboard** | Subscription management, payment history |
| **Admin Dashboard** | User management, audit logs, credit management (admin only) |

### AI Agent System

| Component | Description |
|-----------|-------------|
| **Orchestrator Agent** | Routes requests to specialized tools and handoff agents |
| **Direct Tools** | Fast, non-AI utilities for database operations (&lt;100ms) |
| **Handoff Agents** | Multi-step workflow handlers for create, update, delete |
| **Guardrails** | Safety checks for prompt injection and mass deletion protection |
| **Session Persistence** | Supabase-backed agent state with automatic session management |
| **Insights Generator** | AI-powered calendar analytics and productivity insights |

### Bot Integrations

| Platform | Features |
|----------|----------|
| **Telegram** | Natural language events, quick commands (/today, /week), multi-language, inline keyboards |
| **WhatsApp** | Conversational calendar management (in development) |
| **Voice** | LiveKit real-time voice rooms with OpenAI Whisper transcription |

### Calendar Operations

| Feature | Description |
|---------|-------------|
| **Full CRUD** | Create, read, update, delete events and calendars |
| **Multi-Calendar** | Support for multiple calendars with AI-powered auto-selection |
| **Conflict Detection** | Intelligent scheduling conflict identification |
| **Recurring Events** | RRULE format support for recurring patterns |
| **Timezone Handling** | Automatic timezone detection and conversion |
| **Watch/Webhooks** | Real-time event change notifications from Google |

---

## System Architecture

### High-Level Overview

```
                                   AI Google Calendar Assistant
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                                                                                      ‚îÇ
    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CLIENTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ  ‚îÇ                                                                              ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  Web App     ‚îÇ   ‚îÇ  Voice       ‚îÇ   ‚îÇ  Telegram    ‚îÇ   ‚îÇ  WhatsApp    ‚îÇ  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  (Next.js)   ‚îÇ   ‚îÇ  (LiveKit)   ‚îÇ   ‚îÇ  Bot         ‚îÇ   ‚îÇ  Bot         ‚îÇ  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  Port: 4000  ‚îÇ   ‚îÇ  Real-time   ‚îÇ   ‚îÇ  (Grammy)    ‚îÇ   ‚îÇ  (Webhook)   ‚îÇ  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ          ‚îÇ                  ‚îÇ                  ‚îÇ                  ‚îÇ          ‚îÇ    ‚îÇ
    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
    ‚îÇ             ‚îÇ                  ‚îÇ                  ‚îÇ                  ‚îÇ               ‚îÇ
    ‚îÇ             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
    ‚îÇ                                ‚îÇ                  ‚îÇ                                  ‚îÇ
    ‚îÇ                                ‚ñº                  ‚ñº                                  ‚îÇ
    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ BACKEND API ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ  ‚îÇ                         Express 5.1 + Bun                                    ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ                         Port: 3000 (dev) / 8080 (prod)                       ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ                                                                              ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ                    SHARED LAYER (Cross-Modal)                        ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  ‚îÇ Tool        ‚îÇ  ‚îÇ SDK         ‚îÇ  ‚îÇ Context     ‚îÇ  ‚îÇ Agent       ‚îÇ  ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  ‚îÇ Handlers    ‚îÇ  ‚îÇ Adapters    ‚îÇ  ‚îÇ Store       ‚îÇ  ‚îÇ Profiles    ‚îÇ  ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ                                                                              ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ                    AI AGENT ORCHESTRATOR                             ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  ‚îÇ Direct      ‚îÇ  ‚îÇ Agent       ‚îÇ  ‚îÇ Handoff     ‚îÇ  ‚îÇ Guardrails  ‚îÇ  ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  ‚îÇ Tools       ‚îÇ  ‚îÇ Tools       ‚îÇ  ‚îÇ Agents      ‚îÇ  ‚îÇ &amp; Safety    ‚îÇ  ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ                                                                              ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  Auth    ‚îÇ ‚îÇ Calendar ‚îÇ ‚îÇ  Chat    ‚îÇ ‚îÇ  Voice   ‚îÇ ‚îÇ Payments ‚îÇ          ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  Routes  ‚îÇ ‚îÇ  Routes  ‚îÇ ‚îÇ  Routes  ‚îÇ ‚îÇ  Routes  ‚îÇ ‚îÇ  Routes  ‚îÇ          ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ    ‚îÇ
    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
    ‚îÇ                                 ‚îÇ                                                    ‚îÇ
    ‚îÇ                                 ‚ñº                                                    ‚îÇ
    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ EXTERNAL SERVICES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ  ‚îÇ                                                                              ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  Supabase    ‚îÇ   ‚îÇ   Google     ‚îÇ   ‚îÇ   OpenAI     ‚îÇ   ‚îÇ   Redis      ‚îÇ  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  PostgreSQL  ‚îÇ   ‚îÇ   Calendar   ‚îÇ   ‚îÇ   Agents     ‚îÇ   ‚îÇ   Context    ‚îÇ  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  + Auth      ‚îÇ   ‚îÇ   API        ‚îÇ   ‚îÇ   SDK        ‚îÇ   ‚îÇ   Store      ‚îÇ  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ                                                                              ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ LemonSqueezy ‚îÇ   ‚îÇ   LiveKit    ‚îÇ   ‚îÇ   Anthropic  ‚îÇ   ‚îÇ   Resend     ‚îÇ  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îÇ  (Payments)  ‚îÇ   ‚îÇ   (Voice)    ‚îÇ   ‚îÇ   Claude     ‚îÇ   ‚îÇ   (Email)    ‚îÇ  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ    ‚îÇ
    ‚îÇ  ‚îÇ                                                                              ‚îÇ    ‚îÇ
    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
    ‚îÇ                                                                                      ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Data Flow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                              REQUEST FLOW                                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                     ‚îÇ
‚îÇ   User Input (Natural Language)                                                     ‚îÇ
‚îÇ        ‚îÇ                                                                            ‚îÇ
‚îÇ        ‚ñº                                                                            ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                               ‚îÇ
‚îÇ   ‚îÇ  Client Layer   ‚îÇ  Web / Voice / Telegram / WhatsApp                            ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                               ‚îÇ
‚îÇ            ‚îÇ                                                                        ‚îÇ
‚îÇ            ‚ñº                                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                               ‚îÇ
‚îÇ   ‚îÇ  Middleware     ‚îÇ  Auth ‚Üí Rate Limit ‚Üí Validation ‚Üí Token Refresh               ‚îÇ
‚îÇ   ‚îÇ  Chain          ‚îÇ                                                               ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                               ‚îÇ
‚îÇ            ‚îÇ                                                                        ‚îÇ
‚îÇ            ‚ñº                                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                               ‚îÇ
‚îÇ   ‚îÇ  Shared Layer   ‚îÇ  Framework-agnostic tool handlers                             ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                               ‚îÇ
‚îÇ            ‚îÇ                                                                        ‚îÇ
‚îÇ            ‚ñº                                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                               ‚îÇ
‚îÇ   ‚îÇ  AI Agent       ‚îÇ  OpenAI Agents SDK orchestration                              ‚îÇ
‚îÇ   ‚îÇ  Orchestrator   ‚îÇ                                                               ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                               ‚îÇ
‚îÇ            ‚îÇ                                                                        ‚îÇ
‚îÇ            ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                  ‚îÇ
‚îÇ            ‚ñº                  ‚ñº                  ‚ñº                                  ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ   ‚îÇ  Direct Tools   ‚îÇ ‚îÇ  Agent Tools    ‚îÇ ‚îÇ  Handoff Agents ‚îÇ                       ‚îÇ
‚îÇ   ‚îÇ  (Fast &lt;100ms)  ‚îÇ ‚îÇ  (AI-powered)   ‚îÇ ‚îÇ  (Multi-step)   ‚îÇ                       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ
‚îÇ            ‚îÇ                   ‚îÇ                   ‚îÇ                                ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                ‚îÇ
‚îÇ                                ‚îÇ                                                    ‚îÇ
‚îÇ                                ‚ñº                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ   ‚îÇ  External Services: Google Calendar API, Supabase, Redis            ‚îÇ           ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                                ‚îÇ                                                    ‚îÇ
‚îÇ                                ‚ñº                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                               ‚îÇ
‚îÇ   ‚îÇ  Response       ‚îÇ  Streaming (SSE) or JSON response                             ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                               ‚îÇ
‚îÇ                                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Multi-Modal Architecture

A key architectural feature is the **Shared Layer** that enables code reuse across all interaction modalities (Web Chat, Voice, Telegram, WhatsApp).

### Design Principles

1. **Single Source of Truth**: Tool handlers contain pure business logic, shared across all modalities
2. **Framework Agnostic**: Core logic is independent of specific SDKs (OpenAI, LiveKit, Grammy)
3. **Adapter Pattern**: SDK-specific wrappers adapt shared handlers for each framework
4. **Unified Context**: Redis-backed cross-modal state enables features like pronoun resolution

### Shared Layer Architecture

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ              SHARED LAYER                   ‚îÇ
                    ‚îÇ             (be/shared/)                    ‚îÇ
                    ‚îÇ                                             ‚îÇ
                    ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
                    ‚îÇ   ‚îÇ         Tool Handlers               ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   (Pure business logic)             ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ event-handlers.ts               ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ direct-handlers.ts              ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ gap-handlers.ts                 ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
                    ‚îÇ                     ‚îÇ                       ‚îÇ
                    ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
                    ‚îÇ   ‚îÇ                                   ‚îÇ     ‚îÇ
                    ‚îÇ   ‚ñº                                   ‚ñº     ‚îÇ
                    ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
                    ‚îÇ ‚îÇ OpenAI        ‚îÇ     ‚îÇ LiveKit       ‚îÇ     ‚îÇ
                    ‚îÇ ‚îÇ Adapter       ‚îÇ     ‚îÇ Adapter       ‚îÇ     ‚îÇ
                    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
                    ‚îÇ                                             ‚îÇ
                    ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
                    ‚îÇ   ‚îÇ   Unified Context Store (Redis)     ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ Cross-modal state persistence   ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ Entity tracking &amp; resolution    ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îÇ   ‚Ä¢ Conversation context            ‚îÇ   ‚îÇ
                    ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ                           ‚îÇ                       ‚îÇ
              ‚ñº                           ‚ñº                       ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Chat    ‚îÇ             ‚îÇ   Voice   ‚îÇ           ‚îÇ  Telegram ‚îÇ
        ‚îÇ  (Web)    ‚îÇ             ‚îÇ (LiveKit) ‚îÇ           ‚îÇ   (Bot)   ‚îÇ
        ‚îÇ           ‚îÇ             ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ
        ‚îÇ OpenAI    ‚îÇ             ‚îÇ LiveKit   ‚îÇ           ‚îÇ OpenAI    ‚îÇ
        ‚îÇ Agents    ‚îÇ             ‚îÇ Agents +  ‚îÇ           ‚îÇ Agents    ‚îÇ
        ‚îÇ SDK       ‚îÇ             ‚îÇ Realtime  ‚îÇ           ‚îÇ SDK       ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Benefits

- **Code Reuse**: Write business logic once, use everywhere
- **Consistency**: Same behavior across all platforms
- **Testability**: Pure functions are easy to unit test
- **Flexibility**: Easy to add new modalities (e.g., Slack, Discord)
- **Maintainability**: Changes propagate to all platforms automatically

---

## Project Structure

```
ai-google-calendar-assistant/
‚îÇ
‚îú‚îÄ‚îÄ be/                              # Backend (Express + TypeScript + Bun)
‚îÇ   ‚îú‚îÄ‚îÄ ai-agents/                   # OpenAI Agent System
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sessions/                # Session persistence (Supabase)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agents.ts                # Agent definitions &amp; orchestration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agents-instructions.ts   # System prompts &amp; guidelines
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tool-registry.ts         # Tool definitions (DIRECT, AGENT)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tool-schemas.ts          # Zod validation schemas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tool-execution.ts        # Tool execution logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ direct-utilities.ts      # Fast non-AI utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ guardrails.ts            # Safety checks
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ insights-generator.ts    # Analytics insights
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ shared/                      # Cross-Modal Shared Layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/                   # Core interfaces (HandlerContext, Modality)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tools/                   # Framework-agnostic tools
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # Pure business logic handlers
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas/             # Zod schemas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adapters/                # SDK-specific wrappers
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai-adapter.ts    # @openai/agents wrapper
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ livekit-adapter.ts   # @livekit/agents wrapper
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ context/                 # Cross-modal context (Redis)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orchestrator/            # Agent profiles &amp; factories
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prompts/                 # Shared prompt templates
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ llm/                     # Multi-provider abstraction
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ config/                      # Configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients/                 # External service clients
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants/               # Application constants
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ env.ts                   # Environment validation
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ controllers/                 # Request handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ google-calendar/         # Calendar controllers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users/                   # User management
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ routes/                      # API routes
‚îÇ   ‚îú‚îÄ‚îÄ services/                    # Business logic services
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/                 # Express middleware
‚îÇ   ‚îú‚îÄ‚îÄ telegram-bot/                # Telegram Bot (Grammy)
‚îÇ   ‚îú‚îÄ‚îÄ whatsapp-bot/                # WhatsApp Bot
‚îÇ   ‚îú‚îÄ‚îÄ voice-sidecar/               # LiveKit Voice Agent
‚îÇ   ‚îú‚îÄ‚îÄ utils/                       # Shared utilities
‚îÇ   ‚îú‚îÄ‚îÄ tests/                       # Test files (Jest)
‚îÇ   ‚îî‚îÄ‚îÄ app.ts                       # Application entry point
‚îÇ
‚îú‚îÄ‚îÄ fe/                              # Frontend (Next.js 16 + React 19)
‚îÇ   ‚îú‚îÄ‚îÄ app/                         # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (marketing)/             # Marketing pages group
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/               # Main dashboard
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/           # Analytics page
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ billing/             # Billing page
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ integrations/        # Integrations page
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin/                   # Admin dashboard
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/                  # React Components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 3d/                      # Three.js visualizations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/               # Dashboard components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/           # 12+ chart components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ billing/             # Payment components
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat/                # Chat interface
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialogs/                 # Modal dialogs (14 variants)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ marketing/               # Landing page components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/                      # 40+ UI primitives
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ contexts/                    # React Contexts (Auth, Chat, Analytics)
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                       # Custom Hooks
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ queries/                 # TanStack Query hooks (60+)
‚îÇ   ‚îú‚îÄ‚îÄ services/                    # API Services
‚îÇ   ‚îú‚îÄ‚îÄ lib/                         # Utilities (Axios, Supabase)
‚îÇ   ‚îî‚îÄ‚îÄ types/                       # TypeScript types
‚îÇ
‚îú‚îÄ‚îÄ AGENTS.md                        # AI Agent guidelines
‚îî‚îÄ‚îÄ README.md                        # This file
```

---

## Tech Stack

### Backend

| Category | Technologies |
|----------|-------------|
| **Runtime** | Bun 1.0+ (primary), Node.js 18+ (fallback) |
| **Framework** | Express 5.1.0 |
| **Language** | TypeScript 5.9+ |
| **AI/Agents** | OpenAI Agents SDK v0.3.7, Anthropic Claude, Google Gemini |
| **Database** | Supabase (PostgreSQL) with Row-Level Security |
| **Auth** | Supabase Auth, Google OAuth 2.0 |
| **Calendar** | Google Calendar API v105 |
| **Telegram Bot** | Grammy v1.38.3 |
| **Voice** | LiveKit Agents SDK, OpenAI Whisper |
| **Cache** | Redis (cross-modal context) |
| **Payments** | Lemon Squeezy |
| **Validation** | Zod v3.25 |
| **Testing** | Jest v30.2, Supertest |
| **Code Quality** | Biome (formatter), Ultracite (linter) |

### Frontend

| Category | Technologies |
|----------|-------------|
| **Framework** | Next.js 16.1.1 (App Router, Server Components) |
| **UI Library** | React 19.1.0 |
| **Language** | TypeScript 5.5+ |
| **Styling** | Tailwind CSS 3.4 |
| **Animation** | Framer Motion 12.24 |
| **Components** | Radix UI, shadcn/ui (40+ primitives) |
| **State** | TanStack Query 5.90 (server), React Context (UI) |
| **Forms** | React Hook Form 7.70, Zod 4.3 |
| **Charts** | Recharts 2.15, D3 7.9 |
| **3D Graphics** | Three.js 0.182, React Three Fiber 9.5 |
| **Voice** | LiveKit Client 2.16, Web Speech API |
| **Icons** | Lucide Icons 0.562 |

---

## Getting Started

### Prerequisites

- **Bun 1.0+** or Node.js 18+
- **Supabase** account (database + auth)
- **Google Cloud** project with Calendar API enabled
- **OpenAI API** key

### Quick Start

```bash
# Clone the repository
git clone https://github.com/yourusername/ai-google-calendar-assistant.git
cd ai-google-calendar-assistant

# Setup backend
cd be
cp .env.example .env
# Edit .env with your credentials
bun install
bun dev

# In a new terminal, setup frontend
cd fe
cp env.example .env.local
# Edit .env.local with your credentials
npm install
npm run dev
```

The backend runs on `http://localhost:3000` and frontend on `http://localhost:4000`.

### Environment Variables

#### Backend (`/be/.env`)

```env
# Required
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
OPEN_API_KEY=your_openai_api_key
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Optional (for additional features)
ANTHROPIC_API_KEY=your_anthropic_key
TELEGRAM_BOT_ACCESS_TOKEN=your_telegram_token
LEMON_SQUEEZY_API_KEY=your_lemonsqueezy_key
REDIS_URL=redis://localhost:6379
```

See `/be/.env.example` for all available options.

#### Frontend (`/fe/.env.local`)

```env
NEXT_PUBLIC_BACKEND_URL=http://localhost:3000
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
NEXT_PUBLIC_LIVEKIT_URL=your_livekit_url  # Optional, for voice
```

See `/fe/env.example` for all available options.

---

## API Reference

### Authentication (`/api/users`)

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/signup` | Register with email/password |
| `POST` | `/signin` | Sign in with credentials |
| `GET` | `/signup/google` | OAuth with Google |
| `GET` | `/callback` | OAuth callback handler |
| `POST` | `/logout` | Clear session |
| `GET` | `/get-user` | Get current user |
| `GET` | `/session` | Check session validity |
| `DELETE` | `/` | Deactivate account (GDPR) |

### Calendar (`/api/calendar`)

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/` | List all calendars |
| `POST` | `/` | Create secondary calendar |
| `GET` | `/:id` | Get calendar by ID |
| `PATCH` | `/:id` | Update calendar |
| `DELETE` | `/:id` | Delete calendar |
| `GET` | `/freebusy` | Get free/busy info |

### Events (`/api/events`)

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/` | List events (with filters) |
| `POST` | `/` | Create event |
| `GET` | `/:id` | Get event by ID |
| `PATCH` | `/:id` | Update event |
| `DELETE` | `/:id` | Delete event |
| `POST` | `/quick-add` | Natural language create |
| `GET` | `/analytics` | Get analytics data |

### Chat (`/api/chat`)

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/stream` | Stream chat response (SSE) |
| `POST` | `/` | Non-streaming chat |
| `GET` | `/conversations` | List conversations |
| `DELETE` | `/conversations/:id` | Delete conversation |

### Voice (`/api/voice`)

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/transcribe` | Transcribe audio |
| `POST` | `/stream` | Real-time voice streaming |

### Admin (`/api/admin`)

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/users` | List all users |
| `GET` | `/users/:id` | Get user details |
| `POST` | `/users/:id/credits` | Grant credits |
| `GET` | `/audit-logs` | Get audit logs |
| `GET` | `/payments` | Get payment history |

---

## Security Architecture

### Authentication &amp; Authorization

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    SECURITY LAYERS                                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ  CORS           ‚îÇ  Origin whitelisting                          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ  Helmet         ‚îÇ  Security headers (CSP, XSS, etc.)            ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ  Rate Limiter   ‚îÇ  Per-endpoint configurable limits             ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ  JWT Auth       ‚îÇ  Supabase token validation                    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ  Google OAuth   ‚îÇ  Token validation + auto-refresh              ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ  Row-Level      ‚îÇ  Supabase RLS policies                        ‚îÇ
‚îÇ   ‚îÇ  Security       ‚îÇ                                               ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ  Guardrails     ‚îÇ  AI safety (prompt injection, mass delete)    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ            ‚îÇ                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ   ‚îÇ  Audit Logging  ‚îÇ  Security event tracking                      ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Security Features

| Feature | Implementation |
|---------|----------------|
| **Authentication** | Supabase Auth with JWT validation |
| **OAuth 2.0** | Secure Google account integration |
| **Rate Limiting** | Configurable limits per endpoint |
| **Input Validation** | Zod schemas for all API inputs |
| **Row Level Security** | Supabase RLS for data isolation |
| **CORS** | Configured origin whitelisting |
| **Helmet** | Security headers |
| **AI Guardrails** | Prompt injection detection, mass deletion protection |
| **Audit Logging** | Security event tracking |
| **GDPR Compliance** | User account deletion support |

---

## Deployment

### Production Infrastructure

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    DEPLOYMENT ARCHITECTURE                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ   ‚îÇ  Vercel         ‚îÇ         ‚îÇ  AWS App Runner ‚îÇ               ‚îÇ
‚îÇ   ‚îÇ  (Frontend)     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  (Backend)      ‚îÇ               ‚îÇ
‚îÇ   ‚îÇ  Next.js SSR    ‚îÇ         ‚îÇ  Port: 8080     ‚îÇ               ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ           ‚îÇ                           ‚îÇ                         ‚îÇ
‚îÇ           ‚îÇ                           ‚îÇ                         ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
‚îÇ                       ‚îÇ                                         ‚îÇ
‚îÇ                       ‚ñº                                         ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                  SUPABASE                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ PostgreSQL  ‚îÇ  ‚îÇ Auth        ‚îÇ  ‚îÇ Storage     ‚îÇ      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ + RLS       ‚îÇ  ‚îÇ + JWT       ‚îÇ  ‚îÇ (optional)  ‚îÇ      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îÇ
‚îÇ   ‚îÇ            EXTERNAL SERVICES          ‚îÇ                     ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                     ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ OpenAI  ‚îÇ ‚îÇ Google  ‚îÇ ‚îÇ Lemon   ‚îÇ  ‚îÇ                     ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ API     ‚îÇ ‚îÇ Cal API ‚îÇ ‚îÇ Squeezy ‚îÇ  ‚îÇ                     ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                     ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Environment Detection

| Environment | Backend Port | Frontend Port |
|-------------|--------------|---------------|
| Development | 3000 | 4000 |
| Production | 8080 | 443 (Vercel) |
| Test | 3000 | - |

---

## Development

### Backend Commands

```bash
bun dev              # Dev server with hot reload
bun start            # Production server
bun test             # Run tests
bun test:coverage    # Tests with coverage
bun run check        # Lint check (Ultracite)
bun run fix          # Auto-fix lint issues
bun run format       # Format code (Biome)
bun run update:db:types  # Generate Supabase types
```

### Frontend Commands

```bash
npm run dev          # Dev server (port 4000)
npm run build        # Production build
npm run start        # Production server
npm run lint         # Lint code (ESLint)
npm run format       # Format code (Prettier)
npm run test         # Run tests
npm run update:db:types  # Generate Supabase types
```

### Code Conventions

| Rule | Backend | Frontend |
|------|---------|----------|
| **Semicolons** | None | None |
| **Quotes** | Double `&quot;` | Single `&apos;` |
| **Imports** | `@/` alias only | `@/` alias only |
| **Formatter** | Biome | Prettier |
| **Linter** | Ultracite + Biome | ESLint |

---

## Documentation

| Document | Description |
|----------|-------------|
| [Backend README](./be/README.md) | Detailed backend documentation, API reference, tool system |
| [Frontend README](./fe/README.md) | Detailed frontend documentation, components, state management |
| [AGENTS.md](./AGENTS.md) | AI agent architecture, guidelines, and coding conventions |

---

## Roadmap

### Current Development

- [ ] WhatsApp bot completion
- [ ] Enhanced conflict resolution
- [ ] Meeting optimization suggestions

### Planned Features

| Feature | Priority | Description |
|---------|----------|-------------|
| Slack Integration | High | Workspace calendar management |
| Mobile App | High | React Native iOS/Android |
| Zoom/Meet Auto-Link | Medium | Automatic video call links |
| Email Integration | Medium | Email-to-event parsing |
| Team Collaboration | Medium | Shared calendars, scheduling |
| Smart Reminders | Low | AI-powered reminder timing |
| Weekly Digest | Low | Automated schedule summaries |

---

## Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Follow the code style guidelines in `AGENTS.md`
4. Add tests for new functionality
5. Commit your changes (`git commit -m &apos;feat: add amazing feature&apos;`)
6. Push to the branch (`git push origin feature/amazing-feature`)
7. Open a Pull Request

### Commit Convention

```
feat: add new feature
fix: bug fix
docs: documentation changes
refactor: code refactoring
test: add/update tests
chore: maintenance tasks
```

---

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## Acknowledgments

- [OpenAI](https://openai.com/) - Agents framework and API
- [Google](https://developers.google.com/calendar) - Calendar API
- [Supabase](https://supabase.com/) - Backend platform
- [Vercel](https://vercel.com/) - Next.js and hosting
- [shadcn/ui](https://ui.shadcn.com/) - UI components
- [Grammy](https://grammy.dev/) - Telegram Bot framework
- [LiveKit](https://livekit.io/) - Real-time voice infrastructure</file></files></repomix>